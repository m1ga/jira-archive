---
title: "[AC-199] TiDownloadManager (Android) needs serious code review"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2015-12-22T09:13:39.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>android</td></tr>
<tr><th>Reporter</th><td>grebulon</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2015-07-05T09:42:32.000+0000</td></tr>
<tr><th>Updated</th><td>2015-12-22T09:13:39.000+0000</td></tr>
</table>

<h3>Description</h3>

Let one of your top Java developers take a look at the way _listeners_ is being managed. Mainly the use of _toRemove_ list in _handleFireDownloadMessage_.

Note that _listenerList_ itself is not removed from _listeners_ when it's done.

Also you should consider if the use of _SoftReference_ is wise, specially since you remove the listener after the callback is invoked.

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2015-11-16

   [~buddyguards] thank you for the feedback and insight. Are you interested in contributing a PR with the updates you feel are important, or would you like to review a PR once it is complete?</li>
<li>grebulon 2015-11-16

   I just replaced the whole class with UniversalImageLoader :-) Wrote a thin interface that matches TiDownloadManager. It boosted the download performance considerably.
   But I will gladly review the code when it's submitted.</li>
<li>Ashraf Abu 2015-12-03

   [~buddyguards] Is it possible for you to provide a sample of the code that you wrote?</li>
</ol>


<p><a href="/AC/AC-199.json">JSON Source</a></p>