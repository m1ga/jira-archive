---
title: "[AC-398] Error Alloy Data Binding Annotations"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2015-11-11T22:55:30.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Alloy</td></tr>
<tr><th>Labels</th><td>ios, iphone</td></tr>
<tr><th>Reporter</th><td>Frank Eijking</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2015-03-19T07:29:50.000+0000</td></tr>
<tr><th>Updated</th><td>2015-11-11T22:55:30.000+0000</td></tr>
</table>

<h3>Description</h3>

I try to use annotations as a collection inside a ti.map module Modules.Map.View.
Documentation says this is possible as of Alloy 1.4: [Alloy_Data_Binding](<a href="http://docs.appcelerator.com/titanium/3.0/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/3.0/#</a>!/guide/Alloy_Data_Binding)
Please consider the following in my view xml:

{noformat}
<Alloy>
    <Collection src="pins" />
    <Window id="map" class="container">
 
        <!-- DOES NOT WORK -->
        <View id="mapView" module="ti.map" dataCollection="pins">
            <Annotation latitude="{lat}" longitude="{lon}" title="{id}" />
        </View>
 
        <!-- DOES NOT WORK -->
        <!--Module module="ti.map" method="createView" id="mapView" dataCollection="pins">
            <Annotation latitude="{lat}" longitude="{lon}" title="{id}" />
        </Module-->
 
        <!-- WORKS -->
        <!--TableView dataCollection="pins">
            <TableViewRow title="{id}" latitude="{lat}" longitude="{lon}" />
        </TableView-->
 
    </Window>
</Alloy>
{noformat}

In my controller I do a
{noformat}
Alloy.Collections.pins.fetch();
{noformat}

Everything works fine for the above TableView.
However for both above $.mapView's which contain the same dataCollection attribute as the TableView, I get the following error:

*[ERROR] message = "null is not an object (evaluating '$model.__transform')";*

Which according to Tony Lukasavage comment in the following post [undefined-is-not-an-object-evaluating-modeltransform](<a href="https://developer.appcelerator.com/question/155544/undefined-is-not-an-object-evaluating-modeltransform)" rel="nofollow" target="_blank">https://developer.appcelerator.com/question/155544/undefined-is-not-an-object-evaluating-modeltransform)</a> means: "...you're attempting to use data binding notation on elements that are not inside an element with a dataCollection..."

I am using Ti SDK 3.5.1.GA and Alloy 1.5.1, testing on iOS Simulator 8.2
Does anybody succesfully used Annotations for a dataCollection as of Alloy 1.4+?


<h3>Comments</h3>

<ol>
<li>Frank Eijking 2015-03-19

   Also tested with Alloy 1.7.0-dev and 1.4.0, same issue.</li>
<li>Papia Chowdhury 2015-09-02

   Hello,
   
   This issue could not be reproduced. Following test case shows Alloy data binding works properly with ti.map module.
   
   *Testing Environment:*
   Appcelerator Studio, build: 4.2.0.201508141038
   Titanium SDK: 4.1.0 GA
   Alloy version : 1.7.6
   iOS simulator: iphone 5s(v8.1)
   OS X version: 10.9.5
   
   *Steps to reproduce:*
   1. Create an alloy project
   2. Add ti.map module
   2. Copy following test cases in respective files.
   2. Run the app.
   
   Observe that data binding annotation is working perfectly with the ti.map module.
   
   *Test Case*
   index.xml
   <code><pre>
   &lt;Alloy&gt;
   	&lt;Collection src="pins"/&gt;
   	&lt;Window &gt;
   		&lt;!--
   		&lt;View id="map" module="ti.map" dataCollection="pins"&gt;
   		&lt;Annotation latitude="37.39" longitude="-122.051" title="XML Annotation" /&gt;
   		&lt;/View&gt;
   		--&gt;
   
   		&lt;Module module="ti.map" method="createView" id="map" dataCollection="pins"&gt;
   			&lt;Annotation latitude="37.39" longitude="-122.051" title="XML Annotation" /&gt;
   		&lt;/Module&gt;
   
   	&lt;/Window&gt;
   &lt;/Alloy&gt;
   </pre></code>
   
   index.js
   <code><pre>
   if (!Ti.App.Properties.hasProperty('seeded')) {
   	var pins = [
   		{ title: "Appcelerator", latitude: 37.3892876, longitude: -122.0502364},
   		{ title: "Zone 1", latitude: 37.386697, longitude: -122.052028},
   		{ title: "Someplace nearby", latitude: 37.3880608, longitude: -122.0559039}
   	];
   	for(var i=0,j=pins.length;i&lt;j;i++) {
   		Alloy.createModel('pins', {
   			title: pins[i].title,
   			latitude: pins[i].latitude,
   			longitude: pins[i].longitude
   		}).save();
   	}
   	Ti.App.Properties.setString('seeded', 'yuppers');
   }
   
   Alloy.Collections.pins.fetch();
   
   function doTransform(model) {
   	var transform = model.toJSON();
   	transform.title = '[' + transform.title + ']';
   	return transform;
   }
   
   function doFilter(collection) {
       return collection.where({title:'Appcelerator'});
   }
   
   
   $.index.open();
   </pre></code>
   
   pins.js
   <code><pre>
   exports.definition = {
   	config: {
   		"columns" : {
   			"title" : "text",
   			"latitude": "real",
   			"longitude": "real"
   		},
   		adapter: {
   			type: "sql",
   			collection_name: "pins"
   		}
   	},
   	extendModel: function(Model) {
   		_.extend(Model.prototype, {
   			// extended functions and properties go here
   		});
   
   		return Model;
   	},
   	extendCollection : function(Collection) {
   		_.extend(Collection.prototype, {
   
   			// For Backbone v1.1.2, uncomment this to override the fetch method
   			/*
   			fetch: function(options) {
   				options = options ? _.clone(options) : {};
   				options.reset = true;
   				return Backbone.Collection.prototype.fetch.call(this, options);
   			},
   			*/
   		});
   		return Collection;
   	}
   };
   
   </pre></code>
   
   index.tss
   <code><pre>
   '#index': {
   	backgroundColor: '#fff',
   	fullscreen: false,
   	exitOnClose: true
   }
   "#map": {
     userLocation: false,
     animate: true,
   	region: { latitude: 37.3892876, latitudeDelta: 0.015, longitude: -122.0502364, longitudeDelta: 0.015 }
   }
   </pre></code>
   
   Thanks</li>
</ol>


<p><a href="/AC/AC-398.json">JSON Source</a></p>