---
title: "[AC-400] HTTPClient POST request with file doesn't work on Android"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2015-11-11T18:45:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>5.0.0.GA</td></tr>
<tr><th>Reporter</th><td>David Vermeir</td></tr>
<tr><th>Assignee</th><td>Mostafizur Rahman</td></tr>
<tr><th>Created</th><td>2015-09-29T08:21:41.000+0000</td></tr>
<tr><th>Updated</th><td>2015-11-11T18:45:11.000+0000</td></tr>
</table>

<h3>Description</h3>

When trying to do a POST request in Titanium 5.0.0GA, it works as long as you don't include a file. As soon as a file is included the body of the POST is empty on arrival on the server but the file is still there. This issue only seems to occur on Android, iOS has no problems.

I've posted this issue on the Community Q&A and other users seem to be having the same problems.

<h3>Comments</h3>

<ol>
<li>David Vermeir 2015-09-29

   <code><pre>
   var mediaParams = {
   			success : function(event) {
   				var imageBlob = event.media;
                                   register(imageBlob);
   			},
   			cancel : function() {
   				
   			},
   			error : function() {
   				
   			}
   		};
   Titanium.Media.openPhotoGallery(mediaParams);
   
   function register(image) {
           var registerData = {
                username:'test',
                avatar:image
           };
   
   	var xhr = Ti.Network.createHTTPClient();
   	xhr.onload = function() {
   		//...
   	};
   	xhr.onerror = function(error) {
                    //...
   	}; 
   
   	xhr.open('POST', '<a href="http://foo.com/register" rel="nofollow" target="_blank">http://foo.com/register</a>');
   	
   	xhr.send(registerData);
   }
   </pre></code>
   </li>
<li>Aminul Islam 2015-11-11

   Hi , 
   I tested the issue you reported . I can't reproduce it .HTTPClient POST request with file is working fine for me .
   *Test Code*
   <code><pre>
   function file_transmit(blob) {
   	url = 'http://abc/send_email.php';
   	var client = Ti.Network.createHTTPClient({
   		onload : function(e) {
   			var json = JSON.parse(this.responseText);
   			Ti.API.info('this.responseText' + this.responseText);
   			if (json.success === true) {
   			} else {
   			};
   		},
   		onerror : function(e) {
   			Ti.API.debug(e.error);
   		},
   	});
   	Ti.API.info('blob' + blob);
   	client.open("POST", url);
   	var params = {
   		fileUri : blob
   	};
       client.send(params);
   }
   </pre></code>
   
   
   
   Environment
   <code><pre>
   Operating System
     Name                        = Mac OS X
     Version                     = 10.10.5
     Architecture                = 64bit
     # CPUs                      = 4
     Memory                      = 8589934592
   Node.js
     Node.js Version             = 0.10.37
     npm Version                 = 1.4.28
   Titanium CLI
     CLI Version                 = 5.0.5
   Titanium SDK
     SDK Version                 =5.0.2 GA
     SDK Path                    = /Users/Library/Application Support/Titanium/mobilesdk/osx/5.0.2 GA
     Target Platform             = android
   </pre></code>
   
   Thanks</li>
</ol>


<p><a href="/AC/AC-400.json">JSON Source</a></p>