---
title: "[AC-404] HTTP Digest Authentication (NTML) breaks on iOS 8.3"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Hold</td></tr>
<tr><th>Resolution Date</th><td>2015-11-29T08:54:22.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>ios, triage</td></tr>
<tr><th>Reporter</th><td>Jeff Bonnes</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2015-04-20T02:23:44.000+0000</td></tr>
<tr><th>Updated</th><td>2015-11-29T08:54:22.000+0000</td></tr>
</table>

<h3>Description</h3>

Since upgrading devices to iOS 8.3, NTML authentication no longer works.  I have attached a simple app.js file that illustrates the issue.  I've given the password to Ingo to add as a private comment.

This code works on iOS 8.2, but does not work on iOS 8.3.

I've also attached Charles proxy output that shows the conversation between the server and app in both iOS versions.

With iOS8.2:
- the app makes a request to the server
- The server responds with a 401 and qop="auth" string as expected
- The app requests again with the Authorization: Digest header set
- The server returns a valid response 200

With iOS8.3
- the app makes a request to the server
- The server responds with a 401 and qop="auth" string as expected
- The app requests again with the Authorization: Digest header set.  However, the nc = 00000002 in the Authorization header.  In iOS 8.2, nc=00000001
- The server returns a 401 with a stale=true param in the qop="auth" header.


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-404_55005/app.js">app.js</td></td><td>2015-04-20T02:23:44.000+0000</td><td>928</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-404_55004/CharlesProxy.txt">CharlesProxy.txt</td></td><td>2015-04-20T02:23:44.000+0000</td><td>3901</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Jebun Naher 2015-11-08

   Hello
   
   We tested this issue in our environment with the provided password. But we didn't get any success or error message after running the app. The app keeps showing a loading indicator after clicking on the button.
   
   [Screenshot](<a href="http://postimg.org/image/5ytf3d665/)" rel="nofollow" target="_blank">http://postimg.org/image/5ytf3d665/)</a>
   
   *Testing Environment:*
   Appcelerator Studio, build: 4.3.3.201510212245
   Appcelerator Command-Line Interface, version 5.0.4
   Ti sdk: 5.0.2 GA
   Mac Osx: 10.9.5
   
   *Test Case:*
   Provided by the reporter.
   
   Thanks</li>
<li>Jeff Bonnes 2015-11-24

   Password has changed since this was reported.  I will review the code and update to the latest SDK to confirm that it is still happening.</li>
</ol>


<p><a href="/AC/AC-404.json">JSON Source</a></p>