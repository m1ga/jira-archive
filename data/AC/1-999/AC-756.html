---
title: "[AC-756] WebView.evalJS does not return the correct value when the expression is suffixed by semicolon"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2015-09-15T04:07:01.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Titus Wiguno</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2014-08-22T18:04:12.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:01.000+0000</td></tr>
</table>

<h3>Description</h3>

I'm using social.js to make integrated social-network login to my app. Apparently this line in social.js (line 381 or so) prevented the twitter login to behave as it should:

var response = e.source.evalJS('(p = document.getElementById("oauth_pin")) && p.innerHTML;');

I managed to work it out by removing the semicolon in the expression to eval.

<h3>Comments</h3>

<ol>
<li>Shuo Liang 2014-08-25

   hi,
   
   I think you don't need a semicolon in string, Like the example in Document. Ref: [<a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.UI.WebView-method-evalJS]
   
   Regards,
   Shuo</li>
<li>Rakhi Mitro 2015-08-30

   Hello,
   I have tested this issue in updated environment. [evalJS ](<a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.UI.WebView-method-evalJS) function evaluates a JavaScript expression inside the context of the web view and optionally, returns a result.The JavaScript expression must be passed in as a I think you don't need a semicolon in string. This is not a bug  for  latest Appcelerator version.  Not sure if this is still an issue for you. It doesn't appear to be based on our latest tests. Please let me know how I can help further. 
   
   *Test Environments:*
   
   CLI Version :4.0.1
   
   Titanium SDK  Version:4.1.0.GA
   Android: Google Galaxy Nexus:4.1.1 - API 16 - 720x1280
   Appc Studio: Appcelerator Studio, build: 4.1.1.201507141126
   Alloy: 1.7.3
   
   
   
   *Test code:*
   
   *app.js*
   
   <code><pre>
   
       var win = Titanium.UI.createWindow();
       var webview = Ti.UI.createWebView({
           url: 'test.html'
       });
       win.add(webview);
        
       webview.addEventListener('load',function(e) {
          
           var response = e.source.evalJS('(p = document.getElementById("oauth_pin")) && p.innerHTML;');       
           var response2 = e.source.evalJS('(p = document.getElementById("oauth_pin")) && p.innerHTML');
           Ti.API.info( "# of response with semicolon -&gt; " + response.length  );
           Ti.API.info( "# of of response without semicolon -&gt; " + response2.length  );
          
       });
       
       win.open();
     
   </pre></code>
   
   *test.html*
   
   <code><pre>
   
   &lt;!DOCTYPE html&gt;
   &lt;html&gt;
   &lt;body&gt;
   
   &lt;h1&gt;My First Heading&lt;/h1&gt;
   
   &lt;p id="oauth_pin"&gt;My first paragraph.&lt;/p&gt;
   
   &lt;/body&gt;
   &lt;/html&gt;
   
   </pre></code>
   
   
   
   *Test Steps:*
   
   <h4>Create web view on app.js .</h4>
   <h4>Create a html page text.html .</h4>
   <h4>Add load event listener  on window</h4>
   <h4>Call evalJS  function into load event.  </h4>
   <h4>Run the project</h4>
   
   
   *Test Result:*
   Project builds successfully .WebView.evalJS does return the correct value when the expression is  not suffixed by semicolon and with semicolon it works as expected.
   
   *Ti logs:*
   
   [WARN] :   EGL_genymotion: eglSurfaceAttrib not implemented
   [INFO] :   # of response with semicolon -> 19
   [INFO] :   # of of response without semicolon -> 19
   [INFO] :   APSAnalyticsService: Analytics Service Started
   [INFO] :   APSAnalyticsService: Stopping Analytics Service
   
   
   Thanks</li>
</ol>


<p><a href="/AC/AC-756.json">JSON Source</a></p>