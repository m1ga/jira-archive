---
title: "[AC-804] iOS: Debugger: actual breakpoint location is off by one in require()'d js modules"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2015-08-30T07:17:08.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Appcelerator CLI, Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>debugger-ios, ios</td></tr>
<tr><th>Reporter</th><td>Olivier Morandi</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2014-09-05T09:23:15.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:04.000+0000</td></tr>
</table>

<h3>Description</h3>

Since Ti SDK 3.3.0 (but not with earlier versions), when setting a breakpoint in a common js module the JSCore debugger will suspend on the previous line. This is not immediately evident in Ti Studio, since the debugger UI highlights the expected line.
The following code can be used to reveal the wrong behaviour:

<code><pre>
 exports.doSomething = function() {
	Ti.API.info("line 2");
	Ti.API.info("line 3");
	Ti.API.info("line 4");
};
</pre></code>

<code><pre>
var bt = require("mymodule").doSomething();
</pre></code>

With a breakpoint set at line 4 of the mymodule.js file, the execution is suspended at line 3, with the console output showing only

{noformat}
[INFO] line 2
{noformat}

This is caused by the commonJS wrapping code introduced by the  <code>-\[KrollBridge loadCommonJSModule:withSourceURL:\]</code> method, which actually adds a line on top of a file being require()'d, thus creating a discordance between the code parsed by JSCore and that viewed by the editor.

<h3>Comments</h3>

<ol>
<li>Olivier Morandi 2014-09-05

   </li>
</ol>


<p><a href="/AC/AC-804.json">JSON Source</a></p>