---
title: "[AC-870] iOS 7 - registerForPushNotifications does not trigger success or error event"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2014-11-18T23:47:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>3.4.0, 3.4.1, ios7, pushnotification</td></tr>
<tr><th>Reporter</th><td>Tim Varney</td></tr>
<tr><th>Assignee</th><td>Radamantis Torres-Lechuga</td></tr>
<tr><th>Created</th><td>2014-11-18T17:22:18.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:10.000+0000</td></tr>
</table>

<h3>Description</h3>

The following code does not result in a registration for push notification services on devices running iOS 7.1.  

if (Ti.Platform.name == "iPhone OS" && parseInt(Ti.Platform.version.split(".")[0]) >= 8) {
    // placeholder

} else {
    // For iOS 7 and earlier
    Ti.Network.registerForPushNotifications({
        // Specifies which notifications to receive
        types: [
            Ti.Network.NOTIFICATION_TYPE_BADGE,
            Ti.Network.NOTIFICATION_TYPE_ALERT,
            Ti.Network.NOTIFICATION_TYPE_SOUND
        ],
        success: deviceTokenSuccess,
        error: deviceTokenError,
        callback: receivePush
    });
}

// Process incoming push notifications
function receivePush(e) {
    alert('Received push: ' + JSON.stringify(e));
}
// Save the device token for subsequent API calls
function deviceTokenSuccess(e) {
    deviceToken = e.deviceToken;
    alert('success');
}

function deviceTokenError(e) {
    alert('Failed to register for push notifications! ' + e.error);
}

<h3>Comments</h3>

<ol>
<li>Tim Varney 2014-11-18

   Upon further inspection, this is not a problem with the titanium implementation of APN.  It was a problem with my code.
   
   <a href="http://docs.appcelerator.com/titanium/3.0/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/3.0/#</a>!/guide/Subscribing_to_push_notifications
   
   </li>
<li>Tim Varney 2014-11-18

   FYI,  the sample code on <a href="http://docs.appcelerator.com/titanium/3.0/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/3.0/#</a>!/guide/Subscribing_to_push_notifications will not work for iOS 7.  It is attempting to call the deviceTokenSuccess function before it is defined.</li>
</ol>


<p><a href="/AC/AC-870.json">JSON Source</a></p>