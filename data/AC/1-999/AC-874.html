---
title: "[AC-874] Time Picker value is always current date"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2014-09-04T07:38:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Alloy, Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>api, broken, proxy, time</td></tr>
<tr><th>Reporter</th><td>Lee Driscoll</td></tr>
<tr><th>Assignee</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Created</th><td>2014-03-06T20:36:04.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:10.000+0000</td></tr>
</table>

<h3>Description</h3>

The <code>getValue</code> method always returns the current time. Assumedly, this has been mapped to the android method: <code>TimePicker.getCurrentTime</code> which only returns the current time.



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-874_46713/time-picker-text.tar.gz">time-picker-text.tar.gz</td></td><td>2014-03-18T11:36:27.000+0000</td><td>5883521</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ritu Agrawal 2014-03-10

   Please provide a simple and runnable test case to reproduce this issue.</li>
<li>Ritu Agrawal 2014-03-17

   Resolving this ticket as the reporter has not provided requested information.</li>
<li>Lee Driscoll 2014-03-17

   Here is the test case: 
   
   <code><pre>
   &lt;Alloy&gt;
       &lt;Picker type="Ti.UI.PICKER_TYPE_DATE" /&gt;
   &lt;/Alloy&gt;
   </pre></code>
   
   <code><pre>
   &lt;Alloy&gt;
     &lt;Window
           title="Form"
           exitOnClose="false"
           navBarHidden="true"
           layout="vertical"
           width="100%"&gt;
        &lt;TextField
               id="timeField"
               hintText="DATE"
               editable="false"
               borderStyle="Ti.UI.INPUT_BORDERSTYLE_LINE"
               top="10"
               height="60"
               width="100%"
               onFocus="openTimePicker" /&gt;
     &lt;/Window&gt;
   &lt;/Alloy&gt;
   </pre></code>
   
   <code><pre>
   var timePickerController = Alloy.createController('fields/timePickerDialog', {
   	format24: true
   });
   function openTimePicker(e){
   	timePickerController.showForTextField(e.source);
   }
   </pre></code>
   
   <code><pre>
   function showForTextField(textField, opts){
   
   	opts = opts || {};
   
   	opts.callback = function(e) {
   		if(!e.cancel) {
   			var timeValue = e.value;
   			textField.value = timeValue.getHours() + ':' + timeValue.getMinutes();
   			textField.blur();
   		}
   	};
   
   	timePickerDialog.show(opts);
   }
   </pre></code></li>
<li>Ritu Agrawal 2014-03-17

   Thanks for providing the sample test case. I tried to run the code as it is but its throwing errors. Can you please confirm that you had included all the files? It would be helpful if you can zip up your test project and attach to this ticket.</li>
<li>Lee Driscoll 2014-03-18

   I tried to attach a tar of my project but it's 40-something mb, so I 've just attached my app folder</li>
<li>Lee Driscoll 2014-03-18

   Also, through putting together the sample project I found another bug.
   
   I really don't have time to do a full bug report at the moment but it's damn easy to explain:
   
   If a form field tries to acquire focus before it's containing window has been opened the app dies without an error.
   
   To test this, remove the focusable="false" flag from the TextField in index.xml (from the attached tar)</li>
<li>Tim Poulsen 2014-03-24

   Until ALOY-263 is merged, you can't create date/time type pickers in XML. Edit: I guess my comment wasn't directly related to the problem you're facing. But I'll leave it here anyway to let you know that you'll be able to create these pickers in XML soon.</li>
<li>Lee Driscoll 2014-03-24

   @Tim +1 for creating the pickers via XML, that'll be a great addition</li>
<li>Ritu Agrawal 2014-03-25

   Lee - Can you please provide a test case that does not create date / time picker in XML so that we can troubleshoot your current issue?</li>
<li>Lee Driscoll 2014-03-25

    Ritu - The attached project works for me.</li>
</ol>


<p><a href="/AC/AC-874.json">JSON Source</a></p>