---
title: "[AC-918] IndexOutOfBoundsException in TiApplication.getCurrentActivity"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2015-09-29T01:03:53.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>android</td></tr>
<tr><th>Reporter</th><td>grebulon</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2014-11-23T09:13:26.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:13.000+0000</td></tr>
</table>

<h3>Description</h3>

I have no idea how this happened. Got this in the Developer Console's Crashes and ANRs from one of our testers. The only way this can happen is if reference was removed in a different thread while in the getCurrent loop.

{quote}
java.lang.RuntimeException: Unable to pause activity \{com.pingapp.app/org.appcelerator.titanium.TiActivity\}: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3196)
at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3151)
at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:3129)
at android.app.ActivityThread.access$900(ActivityThread.java:159)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1333)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:176)
at android.app.ActivityThread.main(ActivityThread.java:5419)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:525)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1046)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:862)
at dalvik.system.NativeStart.main(Native Method)

Caused by: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:255)
at java.util.ArrayList.remove(ArrayList.java:403)
at org.appcelerator.titanium.TiApplication.getCurrentActivity(TiApplication.java:297)
at org.appcelerator.titanium.TiApplication.setCurrentActivity(TiApplication.java:569)
at org.appcelerator.titanium.TiBaseActivity.onPause(TiBaseActivity.java:1060)
at org.appcelerator.titanium.TiActivity.onPause(TiActivity.java:48)
at android.app.Activity.performPause(Activity.java:5474)
at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1250)
at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3182)
... 12 more
{quote}

<h3>Comments</h3>

<ol>
<li>Shuo Liang 2014-11-24

   Please provide a test case to reproduce your problem.</li>
<li>grebulon 2014-11-24

   As I wrote, I got this on the google developer console from one of the testers. I have no idea how this happened or how to reproduce it, but it definitely happened.</li>
<li>grebulon 2015-09-29

   Why is this marked as resolved? It is NOT resolved. This is a real case of a real use.
   Better mark it as "we don't care"</li>
</ol>


<p><a href="/AC/AC-918.json">JSON Source</a></p>