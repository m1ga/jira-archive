---
title: "[AC-966] ACS Users.resendConfirmation returns "You have to confirm your account before continuing""
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2015-09-29T01:19:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>acs</td></tr>
<tr><th>Reporter</th><td>Joseph Sachs</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2014-11-29T15:02:21.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:17.000+0000</td></tr>
</table>

<h3>Description</h3>

This ACS call for resending a New Account's Confirmation Email (with the correct Email) returns "You have to confirm your account before continuing".

Example:
<code><pre>
Cloud.Users.resendConfirmation({
    email: email.value,
    confirmation_subject: L('resendConfEmailSubject'),
    confirmation_template: (Ti.Locale.currentLanguage === 'fr') ? 'newUser_fr' : 'newUser_en'
}, function (e) {
    if (e.success) {
        alert('Please check your email!');
        email.value = '';
    }
    else {
        error(e);
    }
});
</pre></code>
Always returns an error saying: "You have to confirm your account before continuing"

<h3>Comments</h3>

<ol>
<li>Shuo Liang 2014-12-01

   Hi,
   
   Just tried Cloud.Users.resendConfirmation() API, it works well as expect. Please tried this simple code, see whether your problem is still there.
   
   <code><pre>
   var Cloud = require('ti.cloud');
   var email = "";  // enter your email which need to confirm, this email should be a new email and not verify yet.
   
   var win = Ti.UI.createWindow({
   	backgroundColor: 'White'
   });
   
   var button = Ti.UI.createButton({
   	title: "resend Confirmation",
   	top:"100"
   });
   button.addEventListener("click", function(){
   	Cloud.Users.resendConfirmation({
   		email: email,
   		confirmation_subject: "Test for Confirmation Email"
   	}, function(e) {
   		if (e.success) {
           	alert('Please check your email!');
       	} else {
       		alert(e);
       	}
   	});
   });
   
   win.add(button);
   win.open();
   </pre></code></li>
<li>Joseph Sachs 2014-12-01

   I've tried to do the same, here are the steps I've done:
   1- ACS Console Settings: Allow User Creation - Enable
   2- Created an Account *with email* // even though I get the email, I'd like to resend another confirmation
   3- Then I try to resend confirmation with the same email I created above:
   <code><pre>
   Cloud.Users.resendConfirmation({
           email: email, // same email used to create account from step 2 above
           confirmation_subject: "Test for Confirmation Email"
       }, function(e) {
           if (e.success) {
               alert('Please check your email!');
           } else {
               alert(e); // this line gets triggered
           }
       });
   </pre></code>
   I always get a reply thrown from line 8 above with the e.message = "You have to confirm your account before continuing"
   
   I'm using ti.Cloud version 3.2.7</li>
<li>Shuo Liang 2014-12-03

   Please try to use curl command, see if that works well.
   <code><pre>
   curl -b cookies.txt -c cookies.txt "<a href="https://api.cloud.appcelerator.com/v1/users/resend_confirmation.json?key=&lt" rel="nofollow" target="_blank">https://api.cloud.appcelerator.com/v1/users/resend_confirmation.json?key=&lt</a>;you key&gt;&pretty_json=true&email=&lt;the email&gt;" 
   </pre></code></li>
<li>Joseph Sachs 2014-12-04

   I think I know why... the session_id of the User when they create the account stores that session_id within the Module, Even if the Account needs confirmation.
   
   So for example:
   <code><pre>
   Alloy.Globals.Cloud.Users.create({
                   email: $.email.value,
                   username: $.user.value,
                   password: $.pass.value,
                   password_confirmation: $.pass.value,
                   confirmation_template: "fr" == Ti.Locale.currentLanguage ? "newUser_fr" : "newUser_en",
               }, function(e) {
                   if (e.success) {
                       $.signed.visible = true; // has a button to resend the email conf.
                       Ti.API.info("Session ID: " + Alloy.Globals.Cloud.sessionId);
                       Alloy.Globals.Cloud.sessionId = null; // nulls it
                       Ti.API.info("Session ID: " + Alloy.Globals.Cloud.sessionId); // nulled
                   } else {
                       Alloy.Globals.NotifierFail.show(e.message);
                   }
               });
   </pre></code>
   
   The result of this call is:
   [INFO] Session ID: wy1brdAq-7crtwZ2auj1SNU-zvM
   [INFO] Session ID: null
   
   So all calls afterwards don't go through because ACS.Cloud sets this user as not confirmed yet.</li>
<li>Joseph Sachs 2014-12-04

   What I've also done is - 
   
   After creating the account, I try to log the user out and even then, I get the same error message?
   
   If I close the App & reopen it... it works. 
   
   So I'm guessing the session_id is always being sent with the newly created account (that needs activation), resulting in ACS always returning "Need to confirm account before proceeding".
   
   Closing the App, removes the session_id, however doing it manually:
   Alloy.Globals.Cloud.sessionId = null
   dosen't work.</li>
<li>Papia Chowdhury 2015-09-07

   Hello,
   
   ACS was rebranded as ArrowDB. Please use the latest appcelerator environment with ArrowDB and let us know if this is still an issue for you.
   
   If you use [<a href="https://my.appcelerator.com" rel="nofollow" target="_blank">https://my.appcelerator.com</a>](<a href="https://my.appcelerator.com/)" rel="nofollow" target="_blank">https://my.appcelerator.com/)</a> and [<a href="https://cloud.appcelerator.com" rel="nofollow" target="_blank">https://cloud.appcelerator.com</a>](<a href="https://web.appcelerator.com/product/migrate-app#acs_instructions)" rel="nofollow" target="_blank">https://web.appcelerator.com/product/migrate-app#acs_instructions)</a> to manage ACS data and/or send push notifications, you will need to migrate your ACS data to Arrow DB. This process will not change your keys or require changes to (Titanium) client applications.
   
   Thanks.</li>
<li>Joseph Sachs 2015-10-02

   UPDATE:
   The issue still exists in ArrowDB.
   So I have a new User that comes and register. Fills in their email and password. then a confirmation email is sent. Lets say that the email dosen't send (even though it does).
   
   Now the User is faced with a button that says: "Resend Confirmation Email".
   
   The Account is Not Confirmed yet, and would like to confirm it by having the Resend Confirmation Email to be resent, when they tap on that button, the trace out of that API is:
   {"success":false,"error":true,"code":401,"message":"You have to confirm your account before continuing."}</li>
</ol>


<p><a href="/AC/AC-966.json">JSON Source</a></p>