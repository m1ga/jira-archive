---
title: "[AC-967] Service not assigning a valid token"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2014-07-04T21:45:09.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Documentation</td></tr>
<tr><th>Labels</th><td>api</td></tr>
<tr><th>Reporter</th><td>William Diaz</td></tr>
<tr><th>Assignee</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Created</th><td>2014-05-17T16:14:14.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:17.000+0000</td></tr>
</table>

<h3>Description</h3>

When I ran the app on the console it show the following message: V8Exception: Exception occurred at undefined:1: Uncaught SyntaxError: Unexpected token u

Was working fine before the new update.  

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-967_48180/Screen Shot 2014-05-17 at 12.08.24 PM.png">Screen Shot 2014-05-17 at 12.08.24 PM.png</td></td><td>2014-05-17T16:14:14.000+0000</td><td>137483</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-967_48182/Screen Shot 2014-05-18 at 1.27.36 AM.png">Screen Shot 2014-05-18 at 1.27.36 AM.png</td></td><td>2014-05-18T05:33:49.000+0000</td><td>76387</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-967_48183/Screen Shot 2014-05-18 at 1.27.53 AM.png">Screen Shot 2014-05-18 at 1.27.53 AM.png</td></td><td>2014-05-18T05:33:49.000+0000</td><td>157586</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-967_48184/Screen Shot 2014-05-18 at 1.31.48 AM.png">Screen Shot 2014-05-18 at 1.31.48 AM.png</td></td><td>2014-05-18T05:39:30.000+0000</td><td>41064</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-967_48185/Screen Shot 2014-05-18 at 2.44.34 AM.png">Screen Shot 2014-05-18 at 2.44.34 AM.png</td></td><td>2014-05-18T06:49:51.000+0000</td><td>82891</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-967_48186/Screen Shot 2014-05-18 at 3.27.38 AM.png">Screen Shot 2014-05-18 at 3.27.38 AM.png</td></td><td>2014-05-18T07:28:57.000+0000</td><td>81854</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>William Diaz 2014-05-18

   The errors occurs when launch the app:
   
   {"code":200,"status":"ok","method_name":"queryCustomObjects","page":1,"per_page":100,"total_pages":0,"total_results":0}}
   
   You would notice that returns 200 but the custom objects returns zero results and not token.
   
   Thanks in advance for any help my clients can deliver orders to their customers.
   
   William
   
   </li>
<li>Neeraj Gupta 2014-05-18

   Please provide a test case to reproduce this error. We have not been able to reproduce the issue based on limited information and we are unable to help you due to lack of information.</li>
<li>William Diaz 2014-05-18

   Tap on the app, the app proceed to login and then make the call to the custom objects and get the following results:
   {
     "meta": {
       "code": 200,
       "status": "ok",
       "method_name": "queryCustomObjects",
       "page": 1,
       "per_page": 100,
       "total_pages": 0,
       "total_results": 0
     },
     "response": {
       "settings": [
    
       ]
     }
   }
   
   Just notice that settings is returning zero entries.</li>
<li>Neeraj Gupta 2014-05-18

   Which app we are tapping on?</li>
<li>William Diaz 2014-05-18

   The error occurs after the following call.
   
   <a href="https://api.cloud.appcelerator.com/v1/objects/settings/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW&page=1&per_page=100&suppress_response_codes=true&ti_analytics=" rel="nofollow" target="_blank">https://api.cloud.appcelerator.com/v1/objects/settings/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW&page=1&per_page=100&suppress_response_codes=true&ti_analytics=</a>{"id":"f931347d-46a4-42a5-9077-291bbc2f2f7c","mid":"caa5858e4c9d7c7f","aguid":"c53185a9-b569-4d95-a644-33f018f64ebe","event":"cloud.objects.settings.query","deploytype":"production","sid":"c2687b39-50ba-45b4-86db-250147bede02"}</li>
<li>William Diaz 2014-05-18

   I enclosed the screen shots.,  when I launch the app,  the code make the call to the login auth and then after authentication it makes the following call:
   
   <a href="https://api.cloud.appcelerator.com/v1/objects/settings/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW&page=1&per_page=100&suppress_response_codes=true&ti_analytics=" rel="nofollow" target="_blank">https://api.cloud.appcelerator.com/v1/objects/settings/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW&page=1&per_page=100&suppress_response_codes=true&ti_analytics=</a>{"id":"f931347d-46a4-42a5-9077-291bbc2f2f7c","mid":"caa5858e4c9d7c7f","aguid":"c53185a9-b569-4d95-a644-33f018f64ebe","event":"cloud.objects.settings.query","deploytype":"test","sid":"c2687b39-50ba-45b4-86db-250147bede02"}
   
   The above call return 0 results  for settings, see enclosed screen shots.
   
   --Thanks
   </li>
<li>William Diaz 2014-05-18

   Zero results</li>
<li>William Diaz 2014-05-18

   Is there anything else I can provide to you guys to take care of this issue seriously and assume responsibilities if any???
   
   Thanks,
   William Diaz</li>
<li>Xuefeng Zhang 2014-05-18

   in your app, there are 4 kinds of custom objects, according to my curl tests, just settings object could not be queried back:
   <code><pre>
   1.
   curl <a href="http://api.cloud.appcelerator.com/v1/objects/menu/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW" rel="nofollow" target="_blank">http://api.cloud.appcelerator.com/v1/objects/menu/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW</a>
   
   
   xzhangMBP:~ xzhang$ curl <a href="http://api.cloud.appcelerator.com/v1/objects/menu/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW" rel="nofollow" target="_blank">http://api.cloud.appcelerator.com/v1/objects/menu/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW</a>
   {
     "meta": {
       "code": 200,
       "status": "ok",
       "method_name": "queryCustomObjects",
       "page": 1,
       "per_page": 10,
       "total_pages": 6,
       "total_results": 54
     },
     "response": {
       "menu": [
         {
           "id": "53607e7c15d82732301bff3c",
           "created_at": "2014-04-30T04:39:24+0000",
           "updated_at": "2014-04-30T04:39:58+0000",
           "title": "64. Taco Crispy Shell",
           "category": "535b4ad11316e90db215ceb6",
           "intro": "",
           "content": "",
           "prices": [
             {
               "name": "B",
               "value": "15"
             }
           ],
           "user": {
   
   
   2. curl <a href="http://api.cloud.appcelerator.com/v1/objects/menuorder/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW" rel="nofollow" target="_blank">http://api.cloud.appcelerator.com/v1/objects/menuorder/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW</a>
   
   xzhangMBP:~ xzhang$ curl <a href="http://api.cloud.appcelerator.com/v1/objects/menuorder/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW" rel="nofollow" target="_blank">http://api.cloud.appcelerator.com/v1/objects/menuorder/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW</a>
   {
     "meta": {
       "code": 200,
       "status": "ok",
       "method_name": "queryCustomObjects",
       "page": 1,
       "per_page": 10,
       "total_pages": 3,
       "total_results": 21
     },
     "response": {
       "menuorder": [
         {
           "id": "5376feb7bf2f6013ac001bb2",
           "created_at": "2014-05-17T06:16:23+0000",
           "updated_at": "2014-05-17T06:16:23+0000",
           "name": "greg",
           "phone": "0923413092",
           "address": "view talay villas, house #78, jomtien 2nd road (next to kiss food and drinks)",
           "notes": "28.  lime margarita",
           "orderList": [
             {
               "id": "53606f991316e90da81be222",
               "title": "18. California Burrito",
               "intro": "",
               "content": "Grilled carne asada steak, lettuce, french fries, guacamole, cheese and sour cream and pico de gallo salsa.  Served with Taco House Salsa.  ",
               "prices": [
                 {
                   "name": "B",
                   "value": "190"
                 }
               ],
   
   3. curl <a href="http://api.cloud.appcelerator.com/v1/objects/menucategory/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW" rel="nofollow" target="_blank">http://api.cloud.appcelerator.com/v1/objects/menucategory/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW</a>
   xzhangMBP:~ xzhang$ curl <a href="http://api.cloud.appcelerator.com/v1/objects/menucategory/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW" rel="nofollow" target="_blank">http://api.cloud.appcelerator.com/v1/objects/menucategory/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW</a>
   {
     "meta": {
       "code": 200,
       "status": "ok",
       "method_name": "queryCustomObjects",
       "page": 1,
       "per_page": 10,
       "total_pages": 2,
       "total_results": 11
     },
     "response": {
       "menucategory": [
         {
           "id": "535cd056ed8cdc76d900163a",
           "created_at": "2014-04-27T09:39:34+0000",
           "updated_at": "2014-04-27T09:39:34+0000",
           "title": "Chili & Salads",
           "user": {
             "id": "53574ee21316e90da8110bc4",
             "first_name": "Taco",
             "last_name": "House",
             "created_at": "2014-04-23T05:25:54+0000",
             "updated_at"
   
   4. curl <a href="http://api.cloud.appcelerator.com/v1/objects/settings/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW" rel="nofollow" target="_blank">http://api.cloud.appcelerator.com/v1/objects/settings/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW</a>
   
   xzhangMBP:~ xzhang$ curl <a href="http://api.cloud.appcelerator.com/v1/objects/settings/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW" rel="nofollow" target="_blank">http://api.cloud.appcelerator.com/v1/objects/settings/query.json?key=kf3OWNm418F9zg4Xv0Q01ifIltAFXZDW</a>
   {
     "meta": {
       "code": 200,
       "status": "ok",
       "method_name": "queryCustomObjects",
       "page": 1,
       "per_page": 10,
       "total_pages": 0,
       "total_results": 0
     },
     "response": {
       "settings": [
   
       ]
     }
   }
   </pre></code></li>
<li>Xuefeng Zhang 2014-05-18

    [~williamdiaztv], can you expand the setting object from web console and give me the object id?</li>
<li>William Diaz 2014-05-18

    The settings object disappeared after the update. That's explains why is not showing the data.  The weird thing is that my backend is working fine and is pulling data from settings.
    
    </li>
<li>William Diaz 2014-05-18

    I recreated the object, OMG data loss!!!! That is very concerning how I explain that to my customer???</li>
<li>Xuefeng Zhang 2014-05-18

    what is your update operation?</li>
<li>William Diaz 2014-05-18

    Settings api calls only occurs when launch the app (read no write) and  update only happens on the backend when setup the app (one time) for the first time. No doubt the new update deleted my customer data.  
    
    
    
    </li>
<li>William Diaz 2014-05-18

    Thanks Xuefeng for jumping into this. Finally a great developer from Appcelerator support community took the issue seriously and provided an immediate solution. You should be the next VP of Engineering at Appcelerator. 
    
    Thanks and now I'm thinking very seriously about running my apps on ACS. 
    
    Forgot to mention that ACS just pushed down a Mexican Food Franchise with presence on Thailand, Singapore, China and Europe. $$$$$$$ 
    
    -William</li>
<li>William Diaz 2014-05-18

    Just in case the app still running but still a indexing problem on your mongo database, Hope you guys don't delete the data again. They are live!</li>
<li>Xuefeng Zhang 2014-05-19

    [~williamdiaztv], can you give me your logic of updating your settings object?</li>
<li>Mauro Parra-Miranda 2014-06-30

    Hello William,
    is this still an issue? Or just a temporal glitch that is already solved?
    
    Best,
    
    Mauro </li>
<li>Mauro Parra-Miranda 2014-07-04

    No response from the customer. </li>
</ol>


<p><a href="/AC/AC-967.json">JSON Source</a></p>