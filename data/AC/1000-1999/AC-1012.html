---
title: "[AC-1012] Android build with ti.cloudpush fails on SDK 4.1.1"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2015-10-28T01:15:20.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Appcelerator Studio 4.3.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Conny Brunnkvist</td></tr>
<tr><th>Assignee</th><td>Radamantis Torres-Lechuga</td></tr>
<tr><th>Created</th><td>2015-10-22T13:10:52.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:20.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Steps to Reproduce</h4>
Failed to run dexer - impossible to build using 5.0.3 CLI

<h4>Actual Result</h4>
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Lcom/google/android/gms/dynamic/LifecycleDelegate;

<h4>Expected Result</h4>
A successful Android build with ti.cloudpush module available.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-1012_57103/.log">.log</td></td><td>2015-10-22T13:11:03.000+0000</td><td>636581</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-1012_57104/diagnostic7779652863286003910.log">diagnostic7779652863286003910.log</td></td><td>2015-10-22T13:11:33.000+0000</td><td>162999</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Aminul Islam 2015-10-27

   Hi , I have tested this issue.  I can't reproduce it . 
   I tested this using the ti.cloudpush 3.4.0
   Environment :
   <code><pre>
   Appcelerator Command-Line Interface, version 5.0.3
   Operating System
     Name                        = Mac OS X
     Version                     = 10.10.5
     Architecture                = 64bit
     # CPUs                      = 4
     Memory                      = 8589934592
   Node.js
     Node.js Version             = 0.10.37
     npm Version                 = 1.4.28
   Titanium CLI
     CLI Version                 = 5.0.5
   Titanium SDK
     SDK Version                 = 5.0.2.GA
     SDK Path                    = /Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.0.2.GA
     Target Platform             = android
   Command
   </pre></code>
   
   Thanks</li>
<li>Conny Brunnkvist 2015-10-27

   Thank you so much for your feedback.
   
   I think I just solved it myself: taking a closer look at the dexer command line parameters, it turned out to, of course, be a case of two Titanium Android-native modules containing the same google-services .jar file which caused it to fail. 
   
   I see that it is quite a common snafu for devs, and I would hope MOD-1985 at some point gets resolved to provide a general solution to these issues.
   
   The conflicting modules in my case were <code>ti.admob</code> and <code>ti.cloudpush</code>, both containing <code>lib/google-play-services.jar</code>. I was able to work around it by making a project-local copy of an older version of the module as <code>modules/android/ti.cloudpush/3.3.8-jarfix1</code>, pinning that version in my <code>tiapp.xml</code>, and finally deleting the jar file in the project local <code>modules/android/ti.admob/2.1.5/lib/</code>.</li>
</ol>


<p><a href="/AC/AC-1012.json">JSON Source</a></p>