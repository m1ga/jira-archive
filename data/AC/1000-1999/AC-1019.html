---
title: "[AC-1019] App crash on controller.close when the searchBar has focus"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2015-12-14T14:25:13.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Appcelerator Studio 4.4.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>dbenhenni</td></tr>
<tr><th>Assignee</th><td>Radamantis Torres-Lechuga</td></tr>
<tr><th>Created</th><td>2015-11-26T14:05:02.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:21.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Steps to Reproduce</h4>
create a window with a 'close'-Button a simple action: $.getView().close();

after that create a simple listView (I used Alloy) with a searchbar. When you run this on iPad and your searchView has focus and you click now (with the focussed searchbar) the close-Button. The app crashes without giving any errorMessage in the console. 

<h4>Actual Result</h4>
when I'm focussing the SearchBar of my ListView and click on my 'close-Button' (including the following code:  $.getView().close();) the app crashes without any errorMessage in the console. 

<h4>Expected Result</h4>
The controller should be closed. The app should shut down.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-1019_57620/.log">.log</td></td><td>2015-11-26T14:05:09.000+0000</td><td>6484747</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-1019_57788/demoapp.zip">demoapp.zip</td></td><td>2015-12-16T16:37:31.000+0000</td><td>1261</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-1019_57621/diagnostic7426290897126324166.log">diagnostic7426290897126324166.log</td></td><td>2015-11-26T14:05:18.000+0000</td><td>101014</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2015-11-30

   Hello [~dbenhenni], Please provide a test code of your problem. Also, you can take a look at these links below.
   
   [Link1](<a href="https://developer.appcelerator.com/question/176929/how-to-close-an-alloy-window-from-controller-of-required-view)." rel="nofollow" target="_blank">https://developer.appcelerator.com/question/176929/how-to-close-an-alloy-window-from-controller-of-required-view).</a>
   [Link2](<a href="https://developer.appcelerator.com/question/154457/close-windows-with-alloy)." rel="nofollow" target="_blank">https://developer.appcelerator.com/question/154457/close-windows-with-alloy).</a></li>
<li>dbenhenni 2015-12-01

   Hi Sharif AbuDarda ,
   
   <Alloy autoStyle="true">
   	<Window id="win1" title="Tickets" layout="absolute">
   		<View id="view1" layout="vertical" height="Ti.UI.FILL" width="Ti.UI.FILL" bottom="1%">
   
   			<View id="view_filter_Frame" layout="absolute" width="Ti.UI.FILL" height="40" backgroundColor="transparent" top="20" left="1%">
   				<Button id="contentLeft" class="navigationButton" title="Schließen" left="1%" onClick="openHome"></Button>
   			</View>
   			<ListView id="listview" defaultItemTemplate="template" onItemclick="openTicket" left="1%" right="1%">
   				*<SearchBar id="search" showCancel="true" backgroundColor="white" barColor="white"></SearchBar>*
   				<Templates>
   					<!-- Daten Template -------------------------------------------------------------------------->
   					<ItemTemplate name="template">
   ...
   <code><pre>function openHome() {
   $.listview.getSearchView().blur();
   $.getView().close();
   }</pre></code>
   
   When I click into the searchBar field, so the searchBar has focus, and I'm clicking my close-button (function openHome), the app crashes without any errorMessage in the console.
   
   It is the same behaviour within all of my listviews. I'm running the newest Appcelerator version and SDK without any luck.
   
   Best regards</li>
<li>Sharif AbuDarda 2015-12-09

   Hello [~dbenhenni], I tried tested your issue with a classic code, The code is working fine. No app crash happens. See the code below. Thanks.
   
   <code><pre>
   var win = Ti.UI.createWindow({
       backgroundColor : 'white',
       fullscreen : true
   });
   
   var close = Ti.UI.createButton({
       title : 'close',
       top : 0,
       height : 20
   });
   win.add(close);
   
   close.addEventListener('click', function() {
       win.close();
   });
   
   var search = Titanium.UI.createSearchBar({
       barColor : '#000',
       showCancel : true,
       height : 43,
       top : 0,
   });
   search.addEventListener('cancel', function() {
       search.blur();
   });
   
   var listView = Ti.UI.createListView({
       searchView : search,
       caseInsensitiveSearch : true,
       top : 50
   });
   var listSection = Ti.UI.createListSection();
   var fruits = ['Papaya', 'Peach', 'Pear', 'Persimmon', 'Pineapple', 'Pluot', 'Pomegranate'];
   var data = [];
   for (var i = 0; i < fruits.length; i++) {
       data.push({
           properties : {
               title : fruits[i],
               searchableText : fruits[i]
           }
       });
   }
   listSection.setItems(data);
   listView.addEventListener('noresults', function(e) {
       alert("No results found!");
   });
   listView.sections = [listSection];
   win.add(listView);
   win.open(); 
   </pre></code>
   </li>
<li>Julian Buss 2015-12-16

   I can clearly reproduce with the demoapp attached (only app/controller and app/view folders). Tested with most recent SDK 5.1.1.
   
   Steps to reproduce:
   - create a new Alloy app
   - copy app/controller and app/view folders from the demoapp.zip to your app
   - start app on iPad simulator
   - index.xml opens jbtest.xml automatically, now click on "schließen" button in the upper left -> the window closes and the index window is visible
   - now start the app again, click in the searchbar so that the searchbar has focus, now click the button "Schließen" -> app crashes
   </li>
</ol>


<p><a href="/AC/AC-1019.json">JSON Source</a></p>