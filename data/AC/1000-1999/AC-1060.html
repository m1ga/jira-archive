---
title: "[AC-1060] Images in TableView crashing app with null pointer failures"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2015-09-29T01:01:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Alloy</td></tr>
<tr><th>Labels</th><td>ImageView, TableViewRow, Titanium, crash, intermittent</td></tr>
<tr><th>Reporter</th><td>Ryan White</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2014-11-20T08:36:39.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:24.000+0000</td></tr>
</table>

<h3>Description</h3>

For iOS:
When populating rows (containing images) in a TableView, and updating the table, replacing the rows with new rows, this type of error intermittently happens:

{{
[INFO] :   failbags2(95744,0x57fd1a8) malloc: *** error for object 0x7a2ca800: pointer being freed was not allocated
[INFO] :   *** set a breakpoint in malloc_error_break to debug
}}

The error is intermittent, but happens about 30% of the time, which makes it a problem.

I'd posted a question: 
<a href="https://developer.appcelerator.com/question/179135/images-in-tableview-crashing-app-with-null-pointer-failures" rel="nofollow" target="_blank">https://developer.appcelerator.com/question/179135/images-in-tableview-crashing-app-with-null-pointer-failures</a>

... but after a day, haven't had any attempts at an answer. If I'm doing something grossly wrong - please let me know, but it looks like something is strange with garbage collection or other aspects of memory management. I could swear this problem wasn't here in previous iterations (but can't be absolutely sure). Compiling and running in xcode, when it breaks, seems to indicate that it's something to do with images, or the clearing up of them (TiUIImageView or something like that)

The attached "index.js" file is for app/controllers - replace the contents of index.js with the contents of this file. In the index.js file, is a snippet to replace the index.xml file in views.

I've also uploaded a zip file of my test project to:
<a href="http://scratch.otron9000.co.za/failbags2.zip" rel="nofollow" target="_blank">http://scratch.otron9000.co.za/failbags2.zip</a>

Just in case you want to download that and use it.

When running the test app, if console.log indicates an iteration as high as 4 or 5, the test won't fail. Uninstall the app from the simulator, clean the project in Titanium, and run from Titanium, and try again. Rinse, cycle, repeat :)

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-1060_52736/index.js">index.js</td></td><td>2014-11-20T08:36:39.000+0000</td><td>1636</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-1060_52787/Screen Shot 2014-11-21 at 12.37.52 PM.png">Screen Shot 2014-11-21 at 12.37.52 PM.png</td></td><td>2014-11-24T09:50:26.000+0000</td><td>1328515</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Shuo Liang 2014-11-21

   Tried your test case, but can't reproduce your problem. It works well for me.</li>
<li>Ryan White 2014-11-24

   Screen shot of failure in xcode, indicating TiUIImageView as potentially the problem</li>
<li>Ryan White 2014-11-24

   Just to be sure here - how many cycles of uninstall-clean-run did you run?
   Also - what is your setup?
   Maybe if I can copy your setup, I can get the project to work :)
   
   I also uploaded a screen cap of the error in Xcode.</li>
<li>Harish Mridha 2015-09-03

   Hi ,
   I tested the issue you reported. Can't reproduce your problem. It works well for me
   I tested this using the studio build: 4.1.1.201507141126 and TiSDK4.1.0 GA .
   I recommend you upgrade TiSDK to the latest build and let us know if you get the error again.
   I will mark this ticket as "resolved" since I can't reproduce it. However, feel free to reopen with additional information if you notice otherwise.
   Thanks</li>
</ol>


<p><a href="/AC/AC-1060.json">JSON Source</a></p>