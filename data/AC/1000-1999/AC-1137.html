---
title: "[AC-1137] iOS: Can't delete row after dynamically adding section to table view"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2014-07-14T22:32:08.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ivan Skugor</td></tr>
<tr><th>Assignee</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Created</th><td>2014-06-03T10:54:48.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:30.000+0000</td></tr>
</table>

<h3>Description</h3>

After table view section is added dynamically (for example, after table view click), deleting table view row does not work.


To see this issue, run this code:

<code><pre>
Ti.UI.setBackgroundColor("#fff")

var win = Ti.UI.createWindow({
	top: 20,
	backgroundColor: "#ccc"
});

var table = Ti.UI.createTableView({
	top: 0,
	bottom: 0
});

var section = Ti.UI.createTableViewSection({
	headerView: Ti.UI.createLabel({ text: "Section" })
});

for (var i = 0; i < 10; i++) {
	section.add(Ti.UI.createTableViewRow({
		title: "Row " + (i + 1)
	}));
}

table.setData([ section ]);

var newSection;
table.addEventListener("click", function(e) {

	if (!newSection) {
		newSection = Ti.UI.createTableViewSection({
			headerView: Ti.UI.createLabel({ text: "Section 0" })
		});

		newSection.add(Ti.UI.createTableViewRow({
			title: "Bleh"
		}));

		table.insertSectionBefore(0, newSection);
	}
	else {
		var index = e.index, row;

		if (e.index < table.data[1].rows.length) {
			row = table.data[1].rows[e.index];
		}

		Ti.API.info('row');
		Ti.API.info(row && row.title);

		if (row) {
			table.deleteRow(row);
		}

	}

});

win.add(table);

win.open();
</pre></code>

Click first time on some row in "Section" to add new section at beginning. After that, click on other rows, you'll see nothing happens. 
Check logs, this is error message: Assertion failure in -[UITableView _endCellAnimationsWithContext:]

<h3>Comments</h3>

<ol>
<li>Shuo Liang 2014-06-10

   </li>
<li>Mauro Parra-Miranda 2014-07-14

   DUP of TIMOB-17097</li>
</ol>


<p><a href="/AC/AC-1137.json">JSON Source</a></p>