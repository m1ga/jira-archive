---
title: "[AC-1162] iOS Background Services - On the 1st instance, Process killed after ~160-170s no matter what"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2015-11-26T06:25:56.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Appcelerator Studio 4.3.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Studio, Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>background, ios, registerBackgroundService, services</td></tr>
<tr><th>Reporter</th><td>Thierry</td></tr>
<tr><th>Assignee</th><td>Aminul Islam</td></tr>
<tr><th>Created</th><td>2015-11-22T04:04:22.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:31.000+0000</td></tr>
</table>

<h3>Description</h3>

Despite defining in the info.plist the background service modes for iOS

<code><pre>
                &lt;key&gt;UIBackgroundModes&lt;/key&gt;
                &lt;array&gt;
                    &lt;string&gt;location&lt;/string&gt;
                    &lt;string&gt;fetch&lt;/string&gt;
                &lt;/array&gt;
</pre></code>


On the 1st run
> The background services is killed / stop being triggered around 160-170s. Proof of concept with a setInterval running every 20s
> When re-open the app, the next/last iteration of the setInterval loop is triggered.

On the 2nd run (after resumed/paused the app)
> The background services works non stop correctly without being killed.


<code><pre>
// app.js
var service = Ti.App.iOS.registerBackgroundService({url:'bgservice_notifications.js'});
</pre></code>

<code><pre>
// bgservice_notifications.js
var timer = 0;
function intervalCheck(){
	var timestamp = new Date();
	Ti.API.info('DEAMON - INTERVAL ['+timestamp.getHours()+':'+timestamp.getMinutes()+':'+timestamp.getSeconds()+']');
	timer = timer+20;
	Ti.API.info('DEAMON - INTERVAL ['+timer+']');	
}
var cron = setInterval(intervalCheck,20000);
</pre></code>

<h3>Comments</h3>

<ol>
<li>Aminul Islam 2015-11-23

   Hi ,
   Tested *iOS Background Services* issue  on our updated environment . *iOS Background Services* working fine.I can't reproduce it . The background services is not killed / stop being triggered around 160-170s,
   
   *Environment*
   <code><pre>
   Operating System
     Name                        = Mac OS X
     Version                     = 10.10.5
     Architecture                = 64bit
     # CPUs                      = 4
     Memory                      = 8589934592
   Node.js
     Node.js Version             = 0.10.37
     npm Version                 = 1.4.28
   Titanium CLI
     CLI Version                 = 5.0.5
   Titanium SDK
     SDK Version                 = 5.0.2.GA and 5.1.0.GA 
     SDK Path                    = /Users/Library/Application Support/Titanium/mobilesdk/osx/5.0.2.GA
     Target Platform             = iphone
   </pre></code>
   Thanks</li>
<li>Thierry 2015-11-23

   Still having the issue.
   Here is my config
   
   {noformat}
   Operating System
     Name                        = Mac OS X
     Version                     = 10.11.1
     Architecture                = 64bit
     # CPUs                      = 4
     Memory                      = 8.0GB
   
   Node.js
     Node.js Version             = 4.2.2
     npm Version                 = 2.14.7
   
   Appcelerator CLI
     Installer                   = 4.2.2
     Core Package                = 5.0.4
   
   Titanium CLI
     CLI Version                 = 5.0.5
     node-appc Version           = 0.2.31
   
   Titanium SDKs
     5.1.0.GA
       Version                   = 5.1.0
       Install Location          = /Users/thierry/Library/Application Support/Titanium/mobilesdk/osx/5.1.0.GA
       Platforms                 = android, mobileweb, iphone
       git Hash                  = 0913213
       git Timestamp             = 11/18/15 21:44
       node-appc Version         = 0.2.32
     5.0.3.v20151002003129
       Version                   = 5.0.3
       Install Location          = /Users/thierry/Library/Application Support/Titanium/mobilesdk/osx/5.0.3.v20151002003129
       Platforms                 = android, mobileweb, iphone
       git Hash                  = d4496fe
       git Timestamp             = 10/02/15 00:31
       node-appc Version         = 0.2.31
    
   {noformat}</li>
<li>Aminul Islam 2015-11-24

   Hi, 
   Could you please share with us your *log* and more description ?
   
   Thanks</li>
</ol>


<p><a href="/AC/AC-1162.json">JSON Source</a></p>