---
title: "[AC-1283] Cannot Change Port Number for Node.ACS Project"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2015-09-04T05:35:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>TCSupportTriage, cloud, configuration-acs, node-acs, websocket</td></tr>
<tr><th>Reporter</th><td>James Sugrue</td></tr>
<tr><th>Assignee</th><td>Mostafizur Rahman</td></tr>
<tr><th>Created</th><td>2014-07-31T20:13:30.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:40.000+0000</td></tr>
</table>

<h3>Description</h3>

Due to limitations on some 3G data networks, I need to change the port for my Node.ACS server, using websockets. This is because port 80 (the default) is blocked by some providers (see here for an example of this <a href="http://stackoverflow.com/questions/5557776/websockets-over-a-3g-connection)" rel="nofollow" target="_blank">http://stackoverflow.com/questions/5557776/websockets-over-a-3g-connection)</a> 

I tested my 3G data connection using websocketstest.com and port 8080 would work fine. 

I tried following the node configuration on the CLI as detailed here (<a href="http://docs.appcelerator.com/cloud/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/cloud/latest/#</a>!/guide/node_cli_config). However this didn't work. 

I presume there must be some way to change port on a Node.ACS example? 

<h3>Comments</h3>

<ol>
<li>Seth Toda 2014-08-25

   Hello James,
   Could you just use port 443 instead? While we include socket io, we route all ports to 80 and 443. 
   Take the following example non-mvc proxy app example:
   <code><pre>
   require('http').createServer(function(req, res){
   
   	// strip out the leading slash
   	var targetURL = String(req.url.substring(1));
   
   	// grab the host from the url
   	var externalHost = String(url.parse(targetURL).host);
   	logger.info("targetURL: "+targetURL);
   	logger.info("ExternalHost: "+externalHost);
   	req.url = "";	
   	proxy.web(req, res, {
   		target: targetURL,
   		headers: {host: externalHost}
   	},function(e){
   		//logger.info('there: '+req.url);	
   	}); 	
   }).listen(8001);
   </pre></code>
   
   Running this locally with 'acs run' will allow you to access the proxy on port 8001
   <code><pre> 
   curl 127.0.0.1:8001/<a href="http://www.google.com" rel="nofollow" target="_blank">http://www.google.com</a>
   //google webpage output
   </pre></code>
   
   But running this remotely will fail:
   <code><pre>
   curl <node endpoint>:8001/<a href="http://www.google.com" rel="nofollow" target="_blank">http://www.google.com</a>
   //timeout
   </pre></code>
   
   However 80 will work:
   <code><pre>
   curl <node endpoint>:80/<a href="http://www.google.com" rel="nofollow" target="_blank">http://www.google.com</a>
   </pre></code>
   
   Thank you,
   Seth Toda</li>
<li>Seth Toda 2014-08-25

   This link may help explain:
   <a href="http://docs.appcelerator.com/cloud/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/cloud/latest/#</a>!/guide/node_limitations</li>
<li>Mauro Parra-Miranda 2014-09-05

   Hello [~jamessugrue]
   
   Did the Seth's doc help? 
   
   Best Regards</li>
<li>James Sugrue 2014-09-05

   I tried using port 443 to connect instead of 80 - that didn't work. And the limitations doc says that only one port can be used anyway.
   
   I'm deploying the app from the command line. Do you have an example of how to use an external script so that the port number can be changed? Anything I've tried there has failed. 
   
   Thanks 
   James</li>
<li>Seth Toda 2014-09-06

   Hello James, I have not used the external script feature. 443 to https and 80 to http are blocked by your 3G data provider? What range of ports do they generally allow?
   Here is our link which shows how to include the startup script: <a href="http://docs.appcelerator.com/cloud/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/cloud/latest/#</a>!/guide/node_config-section-scripts
   <a href="https://www.npmjs.org/doc/misc/npm-scripts.html" rel="nofollow" target="_blank">https://www.npmjs.org/doc/misc/npm-scripts.html</a></li>
<li>James Sugrue 2014-09-06

   It seems to be a security thing on some 3G providers that port 80 is blocked for non-http calls. In my case I'm using a websocket call. 
   No matter what I do it seems that only  ws://<host>:80 would ever connect, so I'm not running on certain 3G providers. 
   If I use wss://<host>:443 I can't connect from anywhere, and the same if I create a socket using ws://<host>:443 
   
   </li>
<li>Seth Toda 2014-09-12

   Hello James,
   
   I've been doing some research on your behalf and am find that a lot of 3G providers do not play nice with web sockets. [Here](<a href="http://blog.hekkers.net/2012/12/09/websockets-and-mobile-network-operators/)" rel="nofollow" target="_blank">http://blog.hekkers.net/2012/12/09/websockets-and-mobile-network-operators/)</a> is an article depicting a scenario very similar to yours. Also, can you check to see if you pass this online test via 3G?
   <a href="http://websocketstest.com/" rel="nofollow" target="_blank">http://websocketstest.com/</a></li>
</ol>


<p><a href="/AC/AC-1283.json">JSON Source</a></p>