---
title: "[AC-1293] Change event on TextField behaves badly on Android"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2015-09-15T04:01:02.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>TCSupportTriage, TextField, change, handler</td></tr>
<tr><th>Reporter</th><td>Thomas Neerup</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2014-08-12T13:19:17.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:41.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Steps to Reproduce</h4>
Create a new Classic project
Pase the code from the attached file
Run the App on IOS
Run the App on Android device/emulator
Write a combination of numbers and letters in the field

<h4>Actual Result</h4>
On IOS the change event is called and if invalid input the old value is set on the field the cursor is placed where it was before the event was called
On Android the change event is called and if invalid input the old value is set on the field but now the cursor is placed infront of the text. 

<h4>Expected Result</h4>
The cursor should not be repositioned

On android it is virtually impossible to write a change handler to validate the contents of a TextField since the cursor is repositioned in front of the text if text is changed in the handler.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-1293_50414/app.js">app.js</td></td><td>2014-08-12T13:19:19.000+0000</td><td>1914</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Amimul Hossain 2014-08-16

   Hello, We have tested the issue with the code sample provided, and observed the same problem. In android for a wrong value input, the cursor moved back to the initial starting position.
   
   TESTING ENVIRONMENT
   
   CLI version 3.3.0, 
   Titanium SDK version 3.3.0.GA
   Android and iOS Simulator 
   
   Workaround 
   
   We have tested this code that limits the user to input digits only. It's working fine for both android and iOS.
   
   CODE SAMPLE
   
   <code><pre>
   
   
   
   var win = Ti.UI.createWindow({
   	fullscreen : true,
   	exitOnClose : true,
   	backgroundColor : 'red'
   });
   
   var txtInput = Titanium.UI.createTextField({
       color: '#336699',
     top: 10, left: 10,
     width: 250, height: 60,
       changeFlag: true //custom property
   });
   txtInput.addEventListener('change',function(e){
       //check if first trigger of change event -&gt; input of user
       if (e.source.changeFlag){
           //get user's input and store in temp variable
           var temp = e.source.value;
           //remove all non-digit characters in user's input
           temp = temp.replace(/[^0-9]/g,"");
           e.source.value = temp; //this will fire a second change event
           //get the new length of the value of the textfield object
           var len = e.source.value.length;
           //set the cursor position after the last character of the value of the textfield object
           e.source.setSelection(len,len);
           e.source.flag = false;
       }else{
           //the second firing of the change event do nothing
           e.source.flag = true;
       }
   });
   
   win.add(txtInput);
   win.open();
   
   </pre></code>
   
   Thanks.</li>
<li>Mauro Parra-Miranda 2014-09-02

   Hello [~thomas.neerup@eg.dk]! 
   
   Can you please take a look into the previous workaround and let me know if that solves the issue. 
   
   Best Regards!</li>
<li>Thomas Neerup 2014-10-08

   No the previous workaround does not solve the issue.. 
   The code does not work... </li>
<li>Thomas Neerup 2015-01-08

   Any news on this one?
   Or any thoughts on how to limit numeric input on a TextField on android?</li>
<li>Amimul Hossain 2015-04-07

   I have tested this with SDK latest version. The workaround proposed works for me. I am going to mark this ticket as resolved. If you still get the error, please reopen this ticket.
   </li>
<li>Thomas Neerup 2015-09-15

   OMG. How can this be closed and marked as Resolved. When the bug still exist.</li>
</ol>


<p><a href="/AC/AC-1293.json">JSON Source</a></p>