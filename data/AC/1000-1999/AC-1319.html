---
title: "[AC-1319] App with permission crashes on Android 6 running devices"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2015-12-08T09:13:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>UnsatisfiedLinkError, android-6, permissions</td></tr>
<tr><th>Reporter</th><td>Itay Avtalyon</td></tr>
<tr><th>Assignee</th><td>Mostafizur Rahman</td></tr>
<tr><th>Created</th><td>2015-10-27T08:01:11.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:43.000+0000</td></tr>
</table>

<h3>Description</h3>

Our app has permissions (Internet, camera, external storage). It has worked fine on previous version on Android. One of the beta testers upgraded his device (Nexus) to Android 6 (Marshmallow) and our app now crashes when opened. Removal and uninstalls didn't help.

Here's a piece of the log:
linker  : readlink('/proc/self/fd/17') failed: Permission denied [fd=17]
10-20 10:47:48.452 17057 17093 E linker  : warning: unable to get realpath for the library "/data/app/com.imoogi.gevacampus-1/lib/arm/libti.styledlabel.so". Will use given name.
10-20 10:47:48.461 17057 17093 E linker  : readlink('/proc/self/fd/17') failed: Permission denied [fd=17]
10-20 10:47:48.461 17057 17093 E linker  : warning: unable to get realpath for the library "/data/app/com.imoogi.gevacampus-1/lib/arm/libti.compression.so". Will use given name.
10-20 10:47:48.470 17057 17093 E AndroidRuntime: FATAL EXCEPTION: KrollRuntimeThread
10-20 10:47:48.470 17057 17093 E AndroidRuntime: Process: com.imoogi.gevacampus, PID: 17057
10-20 10:47:48.470 17057 17093 E AndroidRuntime: java.lang.UnsatisfiedLinkError: dlopen failed: /data/app/com.imoogi.gevacampus-1/lib/arm/libti.compression.so: has text relocations
10-20 10:47:48.470 17057 17093 E AndroidRuntime: 	at java.lang.Runtime.loadLibrary(Runtime.java:372)
10-20 10:47:48.470 17057 17093 E AndroidRuntime: 	at java.lang.System.loadLibrary(System.java:1076)
10-20 10:47:48.470 17057 17093 E AndroidRuntime: 	at org.appcelerator.kroll.runtime.v8.V8Runtime.loadExternalModules(V8Runtime.java:132)
10-20 10:47:48.470 17057 17093 E AndroidRuntime: 	at org.appcelerator.kroll.runtime.v8.V8Runtime.initRuntime(V8Runtime.java:99)
10-20 10:47:48.470 17057 17093 E AndroidRuntime: 	at org.appcelerator.kroll.KrollRuntime.doInit(KrollRuntime.java:185)
10-20 10:47:48.470 17057 17093 E AndroidRuntime: 	at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:109)
10-20 10:47:48.471   782  1749 W ActivityManager:   Force finishing activity com.imoogi.gevacampus/.YoelGevaCampusActivity

(The full log sent to us is attached)

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-1319_57149/logcat 20-10-15.txt">logcat 20-10-15.txt</td></td><td>2015-10-27T07:59:51.000+0000</td><td>20806</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Aminul Islam 2015-12-02

   Hi,
   Android ask for permission from the user in Android 6.0.
   Please add *permission requesting* for android 6 . 
   <code><pre>
   if (Ti.Media.hasCameraPermissions()) {
   	window.open();
   } else { 
       Ti.Media.requestCameraPermissions(function(e) {
                if (e.success === true) {
               	 window.open();
                } else {
                    alert("Access denied, error: " + e.error);
                }
       });
   }
   </pre></code>
   Currently, if you request Camera Permissions, it will include Storage Permissions as well. This will allow it to get that permission it needs
   
   Thanks</li>
</ol>


<p><a href="/AC/AC-1319.json">JSON Source</a></p>