---
title: "[AC-1329] iOS: error "Collection was mutated while being enumerated" on ListView itemclick"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2015-09-30T04:28:43.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Mauro Piccotti</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2015-07-22T10:41:05.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:44.000+0000</td></tr>
</table>

<h3>Description</h3>

A very weird error appeared after I upgraded my app to Titanium 4.1 from 4.0.

Itemclick event on some components of a ListView crashes my application, I've finally found the problem and a workround.
The problem is difficult to reproduce and i cannot give you my controller/xml/tss because I have too many dependencies, but I reduced the code and I think that with the js and the error who changed the itemclick on ListView perhaps can understand what is the problem.

If I set the value property of a textField on my listView passing the value as parameter to the factory application crashes at the popover.show (it always worked before 4.1). If I remove the  the parameter in the factory and I set the value after it works.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-1329_56212/console.txt">console.txt</td></td><td>2015-07-22T10:32:37.000+0000</td><td>1241</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-1329_56211/listItemclick.js">listItemclick.js</td></td><td>2015-07-22T10:32:37.000+0000</td><td>1027</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-1329_56213/screenshot.png">screenshot.png</td></td><td>2015-07-22T10:32:37.000+0000</td><td>22229</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Mauro Piccotti 2015-07-22

   Doing the cast to String of the value it works, so it seems that now factory doesn't like to receive a number as value (setValue works).
   
   'value' : String(orderRow.getQty())</li>
<li>Mauro Piccotti 2015-07-22

   The same problem if I set the "value" property of a TextField with a number, it works only if I before do the cast to string with String(value).</li>
<li>Shannon Hicks 2015-07-28

   Your problem is likely the same as TIMOB-19249
   
   Hopefully that fix helps you out.</li>
</ol>


<p><a href="/AC/AC-1329.json">JSON Source</a></p>