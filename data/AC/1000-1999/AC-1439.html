---
title: "[AC-1439] Tabgroup on android causes black screen on resume"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2014-04-06T06:03:44.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>3.2.1, android</td></tr>
<tr><th>Reporter</th><td>Bill Martensson</td></tr>
<tr><th>Assignee</th><td>Ritu Agrawal</td></tr>
<tr><th>Created</th><td>2014-03-26T14:08:38.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:37:52.000+0000</td></tr>
</table>

<h3>Description</h3>

This have been tested on titanium 3.1, 3.2, 3.2.1, 3.2.2 and android 4.1,4.3

I create a new project with the following app.js
<code><pre> 
var win1 = Titanium.UI.createWindow({  
    title:'Test',
    backgroundColor:'#00ff00'
});

win1.open();
</pre></code> 
I then press the home button to pause the app. Then open several other apps to trigger a kill of the app.
When I resume the app there is just a black screen.
I then add this part in tiApp.xml:
<code><pre> 
&lt;activity android:alwaysRetainTaskState="true"
</pre></code> 
When I do the same as above and resume the app, the app closes and relaunches. Which is correct behavior from what I've read.

If I change the app.js to include a tabgroup:
<code><pre> 
var win1 = Titanium.UI.createWindow({  
    title:'Tab 1',
    backgroundColor:'#fff'
});
var tab1 = Titanium.UI.createTab({  
    icon:'KS_nav_views.png',
    title:'Tab 1',
    window:win1
});

var label1 = Titanium.UI.createLabel({
	color:'#999',
	text:'I am Window 1',
	font:{fontSize:20,fontFamily:'Helvetica Neue'},
	textAlign:'center',
	width:'auto'
});

win1.add(label1);

//
// create controls tab and root window
//
var win2 = Titanium.UI.createWindow({  
    title:'Tab 2',
    backgroundColor:'#fff'
});
var tab2 = Titanium.UI.createTab({  
    icon:'KS_nav_ui.png',
    title:'Tab 2',
    window:win2
});

var label2 = Titanium.UI.createLabel({
	color:'#999',
	text:'I am Window 2',
	font:{fontSize:20,fontFamily:'Helvetica Neue'},
	textAlign:'center',
	width:'auto'
});

win2.add(label2);

//
//  add tabs
//
tabGroup.addTab(tab1);  
tabGroup.addTab(tab2);  


// open tab group
tabGroup.open();
</pre></code> 
This reintroduces the problem with the black screen on resume after kill signal.

<h3>Comments</h3>

<ol>
<li>Ritu Agrawal 2014-03-31

   alwaysRetainTaskState is only useful on the root Activity of the application and that explains why it works for your first code snippet (root activity) and not with the tab group as that is not the root activity. This attribute is ignored for all other activities.
   
   <a href="http://developer.android.com/guide/topics/manifest/activity-element.html" rel="nofollow" target="_blank">http://developer.android.com/guide/topics/manifest/activity-element.html</a>
   <a href="http://stackoverflow.com/questions/4634985/how-to-test-androidalwaysretaintaskstate" rel="nofollow" target="_blank">http://stackoverflow.com/questions/4634985/how-to-test-androidalwaysretaintaskstate</a>
   </li>
</ol>


<p><a href="/AC/AC-1439.json">JSON Source</a></p>