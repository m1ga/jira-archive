---
title: "[AC-1557] Geolocation background refresh stops"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2015-09-29T04:57:26.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>background, backgroundservice, geolocation, gps, ios, ios8, location, services</td></tr>
<tr><th>Reporter</th><td>Steffan Bruin</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2015-03-11T09:29:32.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:38:01.000+0000</td></tr>
</table>

<h3>Description</h3>

My problem is the following: When I try to track GPS location in the background it often forgets or removes the event listener and stops retrieving location updates.

I’ve put an Interval in my background services file to try and keep my service alive, I’ve set a frequency check, when the location hasn’t been called for more than 30 seconds, it removes and then adds the location event listener again. All of this does not make the application stay alive.

I’ve added the following settings in tiapp.xml, these are also shown in the capabilities tab in Xcode:

<code><pre>
&lt;key&gt;UIBackgroundModes&lt;/key&gt;
&lt;array&gt;
        &lt;string&gt;location&lt;/string&gt;
        &lt;string&gt;remote-notification&lt;/string&gt;
        &lt;string&gt;fetch&lt;/string&gt;
&lt;/array&gt;
&lt;key&gt;UIRequiredDeviceCapabilities&lt;/key&gt;
&lt;array&gt;
        &lt;string&gt;gps&lt;/string&gt;
        &lt;string&gt;location-services&lt;/string&gt;
        &lt;string&gt;magnetometer&lt;/string&gt;
&lt;/array&gt;
</pre></code>

These are Geolocation settings I use:

Titanium.Geolocation.accuracy = Titanium.Geolocation.ACCURACY_BEST;
Titanium.Geolocation.activityType = Titanium.Geolocation.ACTIVITYTYPE_FITNESS;
Titanium.Geolocation.distanceFilter 	= 7;

And the code to register the background service:
<code><pre>
var service = Ti.App.iOS.registerBackgroundService({
	url : 'backgroundservice_tracker.js'
});
</pre></code>



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-1557_54402/backgroundservice_tracker.js">backgroundservice_tracker.js</td></td><td>2015-03-11T09:29:32.000+0000</td><td>7186</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Motiur Rahman 2015-09-07

   Hello,
   
   We tested the issue you reported. But we did not reproduce this issue with the latest environment.
   So we recommend you upgrade studio and SDK to the latest build then let us know if you get the similar behavior again.
   
   *Testing Environment:*
   Command-Line Interface, version 4.1.2,
   Ti SDK: 4.1.0.GA,                                         
   iOS Device: iPod 5G(v8.4.1),
   Alloy: 1.7.6,         
   Studio Version: 4.1.1
   
   Thanks.</li>
</ol>


<p><a href="/AC/AC-1557.json">JSON Source</a></p>