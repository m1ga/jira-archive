---
title: "[AC-1559] How to Reduce/Clear Android Heap Memory Size???"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2014-06-30T02:00:28.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Sattanathan</td></tr>
<tr><th>Assignee</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Created</th><td>2014-06-04T02:52:37.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:38:01.000+0000</td></tr>
</table>

<h3>Description</h3>

Hi,
We created app for Sales&Inventory Management System. This app having more no of screens so we used Multiple Windows concepts. our app working perfectly But we have MEMORY issue. Whenever i open the new window the Memory size was increased  After Closed window i clear all the children's components & put 'null'. Device HEAP Memory size is not reduced. I have used below functions for clear children’s:

.
.
.
windowClosed : function(){
    Controller.prototype. deAllocate(win);
 
},
deAllocate : function(win) {
 
    var length = win.children.length;
    for (var ctr = length-1; ctr >= 0; ct--) {
        var childView = view.children[ctr];
        if (childView != undefined || childView != null) {
            Ti.API.info(‘deAllocate -> ‘ + childView);
            Controller.prototype.deAllocateChildView(childView);
            win.remove(childView);
            childView = null;
        }
        childView = null;
    }
    win.close();
    win = null;
},
deAllocateChildView : function(view){
    var length = view.children.length;
 
    for (var ctr = length-1; ctr >= 0; ctr--) {
        var childView = view.children[ctr];
        if (childView != undefined || childView != null) {
            Ti.API.info(‘deAllocateChildView -> ‘ + childView);
            Controller.prototype.deAllocateChildView(childView);
            view.remove(childView);
            childView = null;
        }
        childView = null;
    }
    view = null;
},
.
.
.

I checked with logcat all the UI components are removed. but heap memory size is not reduced. whenever i opened new window the heap memory size is increasing. Once its reached 48MB my app will through OUT OF MEMORY exception is coming and app EXIT we need to restart the app.

my TiApp.xml file:

<android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>">
        <property name="ti.android.threadstacksize" type="int">41943040</property>
        <property name="ti.android.httpclient.maxbuffersize" type="int">41943040</property>
        <tool-api-level>17</tool-api-level>
        <property name="ti.deploytype">distribution</property>
        <property name="ti.android.compilejs" type="bool">true</property>
        <property name="ti.ui.defaultunit">dp</property>
        <property name="ti.android.root.reappears.restart" type="bool">false</property>
        <property name="ti.android.bug2373.finishfalseroot" type="bool">true</property>
        <manifest android:installLocation="preferExternal">
            <uses-sdk android:minSdkVersion="15"/>
            <supports-screens android:anyDensity="true"
                android:largeScreens="true" android:normalScreens="true" android:smallScreens="true"/>
        </manifest>
        <application android:allowTaskReparenting="true"
            android:debuggable="true" android:enabled="true"
            android:hardwareAccelerated="true" android:hasCode="true"
            android:killAfterRestore="true" android:label="AppLeak"
            android:largeHeap="true" android:name="AppleakApplication"
            android:persistent="true" android:restoreAnyVersion="true" android:supportsRtl="true">
            <uses-library
                android:name="com.google.android.maps"/>
            <uses-permission
                android:name="android.permission.ACCESS_COARSE_LOCATION"/>
            <uses-permission
                android:name="android.permission.ACCESS_FINE_LOCATION"/>
            <uses-permission
                android:name="android.permission.ACCESS_MOCK_LOCATION"/>
            <uses-permission
                android:name="android.permission.BLUETOOTH"/>
            <uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/>
            <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
            <uses-permission android:name="android.permission.INTERNET"/>
            <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
        </application>
 
    </android>

Is there any way to reduce heap memory, can you help me to fix this problem…

Thanks


<h3>Comments</h3>

<ol>
<li>Mauro Parra-Miranda 2014-06-30

   Hello!
   
   All the memory is managed by Android. In short:
   
   It will keep memory assigned to your app (even if you do this nice cleaning), since it will use both CPU and battery to do so. What it does is, it leaves the memory untouched, until the memory is needed. 
   
   More info about this, here; 
   
   <a href="http://forum.xda-developers.com/showthread.php?t=897823" rel="nofollow" target="_blank">http://forum.xda-developers.com/showthread.php?t=897823</a>
   
   Best Regards!</li>
</ol>


<p><a href="/AC/AC-1559.json">JSON Source</a></p>