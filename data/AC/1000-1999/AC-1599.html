---
title: "[AC-1599] Some parts of initialization code are not executed in Alloy project "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2014-05-15T18:48:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Fix Please</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2014-05-14T19:22:48.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:38:04.000+0000</td></tr>
</table>

<h3>Description</h3>

<code><pre>
alert('Hello 1');

(function (){
  alert('Hello 2');
})();

alert('Hello 3');

(function (){
  alert('Hello 4');
})();

alert('Hello 5');
</pre></code>

In Classic project all the messages are shown in opposite order:
'Hello 5', 'Hello 4', 'Hello 3', 'Hello 2', 'Hello 1'.

In Alloy project the same code shows the last message ('Hello 5') *only*.

<h3>Comments</h3>

<ol>
<li>Fix Please 2014-05-15

   Below is one more test case. The same as before, the 'Classic' project shows all the messages but *in strange order*: 'Hello 5', 'Hello 4', 'Hello 3', 'Hello 2', 'Hello 1'.
   Alloy project shows the last message ('Hello 5') *only*.
   
   *Take a look, please.*
   
   <code><pre>
   (function() {
   
   alert('Hello 1');
   
   (function (){
     alert('Hello 2');
   })();
   
   alert('Hello 3');
   
   (function (){
     alert('Hello 4');
     alert('Hello 5');
   })();
   
   }());
   </pre></code></li>
<li>Fokke Zandbergen 2014-05-15

   Where do you have this code? In a controller, lib or alloy.js? And what does the compiled code looks like?</li>
<li>Fix Please 2014-05-15

   {quote}
   Where do you have this code? In a controller, lib or alloy.js?
   {quote}
   I've just created a new test Alloy project from the scratch in order to re-check the issue once again.
   
   <h4>Case 1.</h4>
   *index.js* is empty.
   *alloy.js* is as follows:
   <code><pre>
   (function() {
   
   alert('Hello from alloy.js 1');
   
   (function (){
     alert('Hello from alloy.js 2');
   })();
   
   alert('Hello from alloy.js 3');
   
   (function (){
     alert('Hello from alloy.js 4');
     alert('Hello from alloy.js 5');
   })();
   
   }());
   </pre></code>
   
   <h4>The result:</h4>
   Hello from alloy.js 5
   Hello from alloy.js 4
   Hello from alloy.js 3
   Hello from alloy.js 2
   Hello from alloy.js 1
   </li>
<li>Fix Please 2014-05-15

   
   <h4>Case 2.</h4>
   *alloy.js* is empty.
   *index.js* is as follows:
   <code><pre>
   (function() {
   
   alert('Hello from index.js 1');
   
   (function (){
     alert('Hello from index.js 2');
   })();
   
   alert('Hello from index.js 3');
   
   (function (){
     alert('Hello from index.js 4');
     alert('Hello from index.js 5');
   })();
   
   }());</pre></code>
   
   <h4>The result:</h4>
   Hello from index.js 5
   Hello from index.js 4
   Hello from index.js 3
   Hello from index.js 2
   Hello from index.js 1
   </li>
<li>Fix Please 2014-05-15

   
   <h4>Case 3.</h4>
   *alloy.js* is empty.
   *index.js* is as follows (note, $.index.open() is added this time):
   <code><pre>
   (function() {
   
   alert('Hello from index.js 1');
   
   (function (){
     alert('Hello from index.js 2');
   })();
   
   alert('Hello from index.js 3');
   
   (function (){
     alert('Hello from index.js 4');
     alert('Hello from index.js 5');
   })();
   
   $.index.open();
   
   }());</pre></code>
   
   <h4>The result:</h4>
   Hello from index.js 5
   
   </li>
<li>Fix Please 2014-05-15

   
   <h4>Case 4.</h4>
   *alloy.js* is as follows:
   <code><pre>
   (function() {
   
   alert('Hello from alloy.js 1');
   
   (function (){
     alert('Hello from alloy.js 2');
   })();
   
   alert('Hello from alloy.js 3');
   
   (function (){
     alert('Hello from alloy.js 4');
     alert('Hello from alloy.js 5');
   })();
   
   }());
   </pre></code>
   
   *index.js* is as follows:
   <code><pre>
   (function() {
   
   alert('Hello from index.js 1');
   
   (function (){
     alert('Hello from index.js 2');
   })();
   
   alert('Hello from index.js 3');
   
   (function (){
     alert('Hello from index.js 4');
     alert('Hello from index.js 5');
   })();
   
   $.index.open();
   
   }());</pre></code>
   
   <h4>The result:</h4>
   Hello from index.js 5
   </li>
<li>Tony Lukasavage 2014-05-15

   The comparison here was poorly defined. The behavior between classic titanium and alloy is the same. Notice in your example everything works as expected until you add <code>$.index.open()</code>. If you create an equivalent classic titanium example, which augments your test case in the following way:
   
   <code><pre>
   var win = Ti.UI.createWindow();
   
   alert('Hello 1');
    
   (function (){
     alert('Hello 2');
   })();
    
   alert('Hello 3');
    
   (function (){
     alert('Hello 4');
   })();
    
   alert('Hello 5');
   
   win.open();
   </pre></code>
   
   The classic example behaves in the exact same way as alloy, showing only the last alert of <code>alert('Hello 5')</code>. This is behavior in Android that kills the pending alerts because a new activity is being opened when you open the main windows, which is <code>win</code> in the classic case, <code>$.index</code> in the alloy case. There is no disparity between alloy and titanium. </li>
<li>Tony Lukasavage 2014-05-15

   Additional note: if it is important to you that you be able to queue large amounts of alert() calls even when a new Android activity is opened, you could request that this be reopened and moved to the TIMOB project, as it has nothing to do with Alloy. TBH though, I would imagine this might not get much love since it is an extremely impractical use case. Entirely up to you whether to pursue though, if you can make a case for it.</li>
<li>Fix Please 2014-05-16

   {quote}
   you could request that this be reopened and moved to the TIMOB project
   {quote}
   No, thanks.</li>
</ol>


<p><a href="/AC/AC-1599.json">JSON Source</a></p>