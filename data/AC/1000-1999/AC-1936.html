---
title: "[AC-1936] Ti.Network.addHTTPCookie doesn't work"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2014-01-31T04:40:44.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Alloy, Studio</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Timothy Liu</td></tr>
<tr><th>Assignee</th><td>Ritu Agrawal</td></tr>
<tr><th>Created</th><td>2014-01-23T23:15:39.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:40:51.000+0000</td></tr>
</table>

<h3>Description</h3>

We're using api key authentication for our app, but the new cookie management in 3.2.0 for Android is obfuscated and does not work as expected.

I need to grab cookies from the webview and then load the cookies into our HttpClient requests.  iOS uses the same cookie store, but Android needs to use the new cookie system introduced in 3.2.0.

I'm able to retrieve the cookies using:
<code>Ti.Network.getSystemCookies()</code>
from the WebView.

However, when I run:
<code>Ti.Network.addHTTPCookie(cookie);</code>
It fails.

What has worked is manually generating the cookie string and setting it as a header with setRequestHeader('Cookie:', <cookie string>);  I feel like that's not the correct way to do it.

Thanks!

<h3>Comments</h3>

<ol>
<li>Ritu Agrawal 2014-01-24

   Android and iOS platforms use different cookie management scheme so Titanium SDK 3.2.0 tries to bring parity between these two platforms. You may want to try the sample attached with TIMOB-15244 ticket and see if it resolves your issue.</li>
<li>Ritu Agrawal 2014-01-31

   Resolving this ticket as the reporter did not follow up on the suggestion and did not provide a runnable test case to reproduce this problem.</li>
</ol>


<p><a href="/AC/AC-1936.json">JSON Source</a></p>