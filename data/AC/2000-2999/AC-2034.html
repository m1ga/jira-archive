---
title: "[AC-2034] Android: actionBar.displayHomeAsUp randomly shows double actionBar"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-09-17T22:40:23.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>actionbar, android</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2013-08-21T14:48:43.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:40:59.000+0000</td></tr>
</table>

<h3>Description</h3>

The combination of using the Android Holo theme with a TabGroup and using <code>Ti.Android.ActionBar.displayHomeAsUp</code> in a second Window opened in one of the Tabs randomly results in a double ActionBar like shown in the attached screenshot.

As the XML layout next to the screenshot shows there are actually 2 Windows present, each with its own ActionBar.

Removing lines 12-14 from the <code>app.js</code> code below and the problem is gone, showing the cause lies in the <code>displayHomeAsUp</code> logic.

<h4>Steps to reproduce</h4>

1. Generate a new empty project
2. Replace the <code>&lt;android&gt;</code> tag in <code>tiapp.xml</code> with:

<code><pre>
    &lt;android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt; 
        &lt;tool-api-level&gt;14&lt;/tool-api-level&gt; 
        &lt;manifest&gt; 
            &lt;uses-sdk android:targetSdkVersion="11"/&gt; 
            &lt;application android:theme="@android:style/Theme.Holo.Light"/&gt;
        &lt;/manifest&gt; 
    &lt;/android&gt; 
</pre></code>

3. Replace the contents of <code>app.js</code> with:

<code><pre>
var tabGroup = Ti.UI.createTabGroup({
    backgroundColor: "white"
});
var win1 = Ti.UI.createWindow({
    title: "Window 1",
    backgroundColor: "green"
});
win1.addEventListener('click', function () {
    var win2 = Ti.UI.createWindow({
        backgroundColor: 'red'
    });
    win2.addEventListener('open', function () {
        win2.activity.actionBar.setDisplayHomeAsUp(true);
    });
    tab1.open(win2);
});
var tab1 = Ti.UI.createTab({
    window: win1,
    title: "Tab 1"
});
tabGroup.addTab(tab1);
tabGroup.open();
</pre></code>

4. Repeatedly tap the green window to open the red window and use the hardware back button to return. Every now and then you should see the described behavior.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-2034_41764/Schermafbeelding 2013-08-21 om 15.55.53.png">Schermafbeelding 2013-08-21 om 15.55.53.png</td></td><td>2013-08-21T14:48:43.000+0000</td><td>68065</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Mark Mokryn 2013-08-21

   </li>
<li>Ketan Majmudar 2013-08-28

   I am getting this error randomly on my apps, it shows every other time or so, there is no telling when it will occur.</li>
<li>Fokke Zandbergen 2013-08-28

   Is this now fixed with TIMOB-14914?</li>
<li>Shak Hossain 2013-09-17

   [~Fokke] Please reopen if this is still resolved even after we resolved the related bug.</li>
<li>Fokke Zandbergen 2013-09-18

   Haven't seen it happening anymore, so thx.</li>
</ol>


<p><a href="/AC/AC-2034.json">JSON Source</a></p>