---
title: "[AC-2072] Ti.UI.convertUnits returns NaN"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2013-04-03T22:39:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Stanislav Fedorenko</td></tr>
<tr><th>Assignee</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Created</th><td>2012-11-06T17:39:33.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:41:02.000+0000</td></tr>
</table>

<h3>Description</h3>

Anvil test fails on 
suite: ui_layout
test: convertUnits
with message:
convertUnits - 67ms - error -  Message: should be: '0', was: 'NaN'

Fix:
in file titanium\Ti\UI.js
in function convertUnits
change 1st line to:
// even if result is NaN - convert it to 0;
var intermediary = +(dom.computeSize(convertFromValue, 0, false)) || 0; 


<h3>Comments</h3>

<ol>
<li>Daniel Sefton 2012-11-27

   Please can you provide some more information about this? What's "Anvil test"? Please could you provide a reproducible test case? Thanks!</li>
<li>Stanislav Fedorenko 2013-01-08

   This was found in test form suites\ui_layout.js :
   
   On MobileWeb:
   {quote}
   {noformat} 
   // Functional Test #1087-#1097
   this.convertUnits = function(testRun) {
   //...... skipped ......
   // #1097
   valueOf(testRun, Math.round(Ti.UI.convertUnits('abc', Ti.UI.UNIT_PX))).shouldBe(0);
   }
   {noformat} 
   {quote}
   
   
   According to this test code:
   Ti.UI.convertUnits('abc', Ti.UI.UNIT_PX)
   should not return NaN. It must return 0.</li>
<li>Pedro Enrique 2013-04-03

   This function is to convert units such as pixels or dips. "abc" is not a number, it's a string.</li>
<li>Mauro Parra-Miranda 2013-11-24

   Invalid issue. </li>
</ol>


<p><a href="/AC/AC-2072.json">JSON Source</a></p>