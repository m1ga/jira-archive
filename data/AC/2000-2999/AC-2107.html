---
title: "[AC-2107] Map loading in IOS 6 crashing app with error 'Invalid Region'"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2014-01-06T19:00:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Arvind Joshi</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2013-12-04T13:11:01.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:41:04.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Steps to Reproduce</h4>
The application was already working with IOS 6 and Titanium SDK 2.1.3 while we have update the application for Titanium SDK 3.1.3 and IOS 7.  The application is working ok with IOS 7 while getting crash with IOS 6.

These instructions are throwing exception:

mapview.set(region);
animate:true,
regionFit:true


<h4>Actual Result</h4>
[ERROR] :  The application has crashed with an uncaught exception 'NSInvalidArgumentException'.
[ERROR] :  Reason:
[ERROR] :  Invalid Region <center:-60.23981173, -0.00000538 span:+145.76430723, +450.00000000>
[ERROR] :  Stack trace:
[ERROR] :  0   CoreFoundation                      0x038d7012 __exceptionPreprocess + 178
[ERROR] :  1   libobjc.A.dylib                     0x03398e7e objc_exception_throw + 44
[ERROR] :  2   CoreFoundation                      0x0395ffb1 -[NSException raise] + 17
[ERROR] :  3   MapKit                              0x023a50cd -[MKMapView setRegion:animated:] + 709
[ERROR] :  4   Derby Bus                           0x0011bff7 -[TiMapView render] + 1383
[ERROR] :  5   Derby Bus                           0x0011c8f6 -[TiMapView frameSizeChanged:bounds:] + 294
[ERROR] :  6   Derby Bus                           0x000960b6 -[TiUIView checkBounds] + 806
[ERROR] :  7   Derby Bus                           0x000961b7 -[TiUIView setBounds:] + 119
[ERROR] :  8   Derby Bus                           0x0011c7b5 -[TiMapView setBounds:] + 453
[ERROR] :  9   Derby Bus                           0x00078d80 -[TiViewProxy relayout] + 2016
[ERROR] :  10  Derby Bus                           0x0007c990 -[TiViewProxy layoutChild:optimize:withMeasuredBounds:] + 1472
[ERROR] :  11  Derby Bus                           0x0007cc70 -[TiViewProxy layoutChildren:] + 656
[ERROR] :  12  Derby Bus                           0x00077886 -[TiViewProxy refreshView:] + 710
[ERROR] :  13  Derby Bus                           0x000790d3 -[TiViewProxy layoutChildrenIfNeeded] + 259
[ERROR] :  14  Derby Bus                           0x001fd017 +[TiLayoutQueue layoutProxy:] + 87
[ERROR] :  15  Derby Bus                           0x001fcde2 performLayoutRefresh + 530
[ERROR] :  16  CoreFoundation                      0x03896376 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 22
[ERROR] :  17  CoreFoundation                      0x03895e06 __CFRunLoopDoTimer + 534
[ERROR] :  18  CoreFoundation                      0x0387da82 __CFRunLoopRun + 1810
[ERROR] :  19  CoreFoundation                      0x0387cf44 CFRunLoopRunSpecific + 276
[ERROR] :  20  CoreFoundation                      0x0387ce1b CFRunLoopRunInMode + 123
[ERROR] :  21  GraphicsServices                    0x0365e7e3 GSEventRunModal + 88
[ERROR] :  22  GraphicsServices                    0x0365e668 GSEventRun + 104
[ERROR] :  23  UIKit                               0x011b565c UIApplicationMain + 1211
[ERROR] :  24  Derby Bus                           0x000042c8 main + 456
[ERROR] :  25  Derby Bus                           0x00002c15 start + 53
[ERROR] :  26  ???                                 0x00000001 0x0 + 1
-- End simulator log ---------------------------------------------------------
[ERROR] :  An error occurred running the iOS Simulator
[ERROR] :  [DEBUG] using retina iphone retina tall ios 7
[ERROR] :  
[ERROR] :  Project failed to build after 2m 14s 113ms

<h4>Expected Result</h4>
Should work in IOS 6 as working in IOS 7

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-2107_44362/.log">.log</td></td><td>2013-12-04T13:12:36.000+0000</td><td>9908799</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-2107_44363/diagnostic1800571363625380034.log">diagnostic1800571363625380034.log</td></td><td>2013-12-04T13:12:45.000+0000</td><td>7568</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Eric Wieber 2013-12-06

   Hello Arvind,
   
   I have been unable to reproduce your issue. I tested the sample app Kitchen Sink, as it has a map view in it, on iOS 6.1.2 and 7.0 devices. Both were able to properly display the map.
   
   I noticed that in the log that you posted that, at the bottom, it says: "using retina iphone retina tall ios 7".
   Is your app crashing on iOS 6.X or 7.X?
   Have you tried opening the map to another region or point?
   
   Also, could you please attach some sample code or test cases so that I can see the issue that you are seeing?
   </li>
<li>Arvind Joshi 2013-12-07

   Hi,
   
   The issues are coming for the following statements:
   
   mapview.set(region);
   animate:true,
   regionFit:true
   
   I have changes instructions as:
   
   animate: false
   setTimeout(function(){mapview.set(region);},300)
   
   This is stopped the crashing and showing error Invalid Region. I think this should be resolve in next versions.
   
   Thanks,
   
   </li>
<li>Mostafizur Rahman 2014-01-03

   Hello,
   
   I tested this issue with the test code below. I can't reproduce this issue in Ti SDK 3.1.3GA and iOS 7.0.0. Please check my code and let me know if you have this problem. If you have different test case that reproduces the issue, please post it here. We will re-test this.
   
   <h4>Test Environment:</h4>
   Mac OS X 10.8.5
   IOS 7.0.0
   Titanium SDK: 3.1.3
   Titanium CLI: 3.1.2
   
   
   <h4>Test Code</h4>
   <code><pre>
   
    
   var win = Ti.UI.createWindow();
   
   var mountainView = Titanium.Map.createAnnotation({
       latitude:37.390749,
       longitude:-122.081651,
       title:"Appcelerator Headquarters",
       subtitle:'Mountain View, CA',
       pincolor:Titanium.Map.ANNOTATION_RED,
       animate:true,
       leftButton: '/images/appcelerator_small.png',
       myid:1 ,// Custom property to uniquely identify this annotation.
       rightButton: '/images/appcelerator_small.png',
   });
   
   var mapview = Titanium.Map.createView({
       mapType: Titanium.Map.STANDARD_TYPE,
       region: {latitude:37.390749, longitude:-122.081651,
               latitudeDelta:0.04, longitudeDelta:0.04},
       animate:true,
       regionFit:true,
       userLocation:true,
       annotations:[mountainView]
   });
   
   win.add(mapview);
    
   
   win.open();
    
   
   </pre></code>
   
   Thanks </li>
<li>Eric Wieber 2014-01-06

   Glad you were able to stop the crashes. This info has been passed to engineering and should be fixed.
   Please let us know if you experience the issue again. Thank you!</li>
<li>Arvind Joshi 2014-01-07

   Thanks Team,
   
   I do not experience the issues again after update the code as:
    
   animate: false
   setTimeout(function(){mapview.set(region);},300)
   
   Thanks for the help.</li>
</ol>


<p><a href="/AC/AC-2107.json">JSON Source</a></p>