---
title: "[AC-2165] iOS: Modal window crashes app when calling win.close method while keyboard is open"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2013-05-03T18:53:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Vitr</td></tr>
<tr><th>Assignee</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Created</th><td>2013-05-03T11:44:20.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:41:09.000+0000</td></tr>
</table>

<h3>Description</h3>

*Problem description*
I have a view (index) that opens another modal view (settingsWindow) that contains some labels and textfields. When the cursor is in one of the textfields (i.e. the keyboard is shown) and I close the window (win.close()), then the app crashes after a short moment (without any error information in the console). If I blur all textfields first, to make the keyboard disappear, then the app does not crash!

*settingsWindow.xml*
<code><pre>
<Alloy>
    <Window id="settingsWin" modal="true">   
        <LeftNavButton id="leftNavButton">
            <Button id="cancelButton" onClick="cancelButtonClicked"></Button>
        </LeftNavButton>
        <RightNavButton>
            <Button id="okButton" onClick="okButtonClicked"></Button>
        </RightNavButton>
        <ScrollView>
            <Label id="serverIpLabel">Server IP/Name:</Label>
            <TextField id="serverIpTextField" hintText="e.g. 192.168.0.1" onChange="inputChanged" />
        </ScrollView>
    </Window>
</Alloy>
</pre></code>

*settingsWindow.js*
<code><pre>
function okButtonClicked() {
	$.settingsWin.close();
}

function cancelButtonClicked() {
	$.settingsWin.close();
}
</pre></code>

*index.js*
<code><pre>
function settingsButtonClicked() {
	var settingsWin = Alloy.createController('settingsWindow').getView();
	settingsWin.open();
};
</pre></code>

<h3>Comments</h3>

<ol>
<li>Daniel Sefton 2013-05-03

   Hi Vitr,
   
   Please make sure the test case you provided is droppable and runnable. Your settigsWindow.xml contained several ellipsis for example, and there's no index code with a button to open the modal window.
   
   Please go through the process of creating a new alloy project, dropping in the code you provided, and providing all the necessary code here.
   
   Thanks!</li>
</ol>


<p><a href="/AC/AC-2165.json">JSON Source</a></p>