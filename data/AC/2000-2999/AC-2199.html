---
title: "[AC-2199] [android] v8  optional float/double argument failure"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2013-04-01T22:14:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>android, arguments, kroll, optional, v8</td></tr>
<tr><th>Reporter</th><td>Martin Guillon</td></tr>
<tr><th>Assignee</th><td>Daniel Sefton</td></tr>
<tr><th>Created</th><td>2012-11-22T14:26:26.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:41:11.000+0000</td></tr>
</table>

<h3>Description</h3>

I am trying to add default values support to Ti.App.Properties.
Something like this
<code><pre>
@Kroll.method
public double getDouble(String key, @Kroll.argument(optional=true) double defaultValue)
{
	return appProperties.getDouble(key, defaultValue);
}
</pre></code>
If i try to compile with that code i get an error:
<code><pre>
[exec] src/native/../../generated/ti.modules.titanium.app.properties.PropertiesModule.cpp:314:22: error: invalid suffix "d" on integer constant
[exec] make: *** [/Volumes/data/dev/titanium/titanium_mobile/android/runtime/v8/obj/local/armeabi/objs/kroll-v8/__/__/generated/ti.modules.titanium.app.properties.PropertiesModule.o] Error 1
[exec] make: *** Waiting for unfinished jobs....
</pre></code>

<h3>Comments</h3>

<ol>
<li>Martin Guillon 2012-11-22

   I had another at this using another method
   <code><pre>
   @Kroll.method
   public double getDouble(String key, @Kroll.argument(optional=true) Object obj)
   {
   	double defaultValue = 0D;
   	if (obj != null) {
   		defaultValue = TiConvert.toDouble(obj);
   	}
   	return appProperties.getDouble(key, defaultValue);
   }
   </pre></code>
   And it worked. I am actually wondering if what i was doing was correct :s</li>
<li>Pedro Enrique 2013-04-01

   For assistance, please use the Q&A:
   <a href="http://developer.appcelerator.com/questions/newest" rel="nofollow" target="_blank">http://developer.appcelerator.com/questions/newest</a></li>
<li>Szymon Tomasz Stefanek 2014-10-22

   This bug is still present in 3.4.0GA.
   The cpp code generator adds invalid suffixes on float and double optional Kroll.arguments.
   </li>
</ol>


<p><a href="/AC/AC-2199.json">JSON Source</a></p>