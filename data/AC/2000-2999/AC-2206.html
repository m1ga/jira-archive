---
title: "[AC-2206] Android touchEnabled=false throws java error"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2013-12-23T02:27:50.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Alloy</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Andrew Greenstreet</td></tr>
<tr><th>Assignee</th><td>Ritu Agrawal</td></tr>
<tr><th>Created</th><td>2013-12-17T15:06:13.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:41:12.000+0000</td></tr>
</table>

<h3>Description</h3>

In an alloy view, setting touchEnabled='false' on any view type (view, label, etc) will throw

[ERROR] :  TiApplication: (main) [98,98] Sending event: exception on thread: main msg:java.lang.RuntimeException: Unable to start activity ComponentInfo{com.gstreetmedia.threetwotest/org.appcelerator.titanium.TiActivity}: java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Boolean; Titanium 3.2.0,2013/12/16 06:43,2a93aca
[ERROR] :  TiApplication: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.gstreetmedia.threetwotest/org.appcelerator.titanium.TiActivity}: java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Boolean
[ERROR] :  TiApplication: 	at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2176)
[ERROR] :  TiApplication: 	at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2226)
[ERROR] :  TiApplication: 	at android.app.ActivityThread.access$700(ActivityThread.java:135)
[ERROR] :  TiApplication: 	at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1397)
[ERROR] :  TiApplication: 	at android.os.Handler.dispatchMessage(Handler.java:102)
[ERROR] :  TiApplication: 	at android.os.Looper.loop(Looper.java:137)
[ERROR] :  TiApplication: 	at android.app.ActivityThread.main(ActivityThread.java:4998)
[ERROR] :  TiApplication: 	at java.lang.reflect.Method.invokeNative(Native Method)
[ERROR] :  TiApplication: 	at java.lang.reflect.Method.invoke(Method.java:515)
[ERROR] :  TiApplication: 	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:777)
[ERROR] :  TiApplication: 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:593)
[ERROR] :  TiApplication: 	at dalvik.system.NativeStart.main(Native Method)
[ERROR] :  TiApplication: Caused by: java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Boolean
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.view.TiUIView.registerForTouch(TiUIView.java:1455)
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.view.TiUIView.registerForTouch(TiUIView.java:1270)
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.proxy.TiViewProxy.handleGetView(TiViewProxy.java:474)
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.java:451)
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.proxy.TiViewProxy.realizeViews(TiViewProxy.java:489)
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.proxy.TiViewProxy.handleGetView(TiViewProxy.java:473)
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.java:451)
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.proxy.TiViewProxy.handleAdd(TiViewProxy.java:568)
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.proxy.TiViewProxy.add(TiViewProxy.java:546)
[ERROR] :  TiApplication: 	at ti.modules.titanium.ui.WindowProxy.windowCreated(WindowProxy.java:303)
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.TiActivityWindows.windowCreated(TiActivityWindows.java:32)
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.TiBaseActivity.windowCreated(TiBaseActivity.java:451)
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.TiBaseActivity.onCreate(TiBaseActivity.java:527)
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.TiActivity.onCreate(TiActivity.java:18)
[ERROR] :  TiApplication: 	at android.app.Activity.performCreate(Activity.java:5243)
[ERROR] :  TiApplication: 	at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1087)
[ERROR] :  TiApplication: 	at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2140)
[ERROR] :  TiApplication: 	... 11 more

index.xml is as follows

<Alloy>
	<Window class="container">
		<Label id="label" touchEnabled="false">Hello, World</Label>
	</Window>
</Alloy>

<h3>Comments</h3>

<ol>
<li>Andrew Greenstreet 2013-12-17

   Suggestion for fixing this is to update TiUIView.java with
   
   protected void registerForTouch(final View touchable)
   {
   	if (touchable == null) {
   		return;
   	}
   	
   	boolean clickable = true;
   	if (proxy.hasProperty(TiC.PROPERTY_TOUCH_ENABLED)) {
   		Object obj = proxy.getProperty(TiC.PROPERTY_TOUCH_ENABLED);
   		if (obj.getClass().equals(String.class)) {
   			clickable = obj.equals("false") ? false : true;
   		} else if (obj.getClass().equals(Boolean.class)) {
   			clickable = (Boolean) obj;
   		}
   	}
   	if (clickable) {
   		registerTouchEvents(touchable);
   		// Previously, we used the single tap handling above to fire our click event. It doesn't
   		// work: a single tap is not the same as a click. A click can be held for a while before
   		// lifting the finger; a single-tap is only generated from a quick tap (which will also cause
   		// a click.) We wanted to do it in single-tap handling presumably because the singletap
   		// listener gets a MotionEvent, which gives us the information we want to provide to our
   		// users in our click event, whereas Android's standard OnClickListener does _not_ contain
   		// that info. However, an "up" seems to always occur before the click listener gets invoked,
   		// so we store the last up event's x,y coordinates (see onTouch above) and use them here.
   		// Note: AdapterView throws an exception if you try to put a click listener on it.
   		doSetClickable(touchable);
   	} else {
   		touchable.setSoundEffectsEnabled(false);
   	}
   }</li>
<li>Ritu Agrawal 2013-12-23

   Thanks for reporting this issue and suggesting a solution. This issue is already covered by TIMOB-16063 and being actively worked upon by the engineering team. Please watch TIMOB-16063 for further updates.</li>
</ol>


<p><a href="/AC/AC-2206.json">JSON Source</a></p>