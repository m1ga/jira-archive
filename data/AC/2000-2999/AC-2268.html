---
title: "[AC-2268] Using Codeboxed module.. need Sampling Bitrate optimization"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2013-04-01T21:17:56.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>Android,, Bitrate, codeboxed, recording</td></tr>
<tr><th>Reporter</th><td>Prashant Sheth</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2012-10-11T18:06:27.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:41:16.000+0000</td></tr>
</table>

<h3>Description</h3>

We are initiating a wav recording with the 8000Kpbs sampling rate.  However the file size produced from this is too large (300KB) for the performance of the app.  We need to be able to try 4000 and then 8000.  But 4000 fails on some phones.  In Native Android, there's a "minBufferSize" approach that provides the MinBufferSize, but this is not available to us in Titanium.  How do we determine a device's minBuffersize that we can use?

This is the code we are using in Codeboxed that fails.  

var recording = audioRecorder.createAudioRecord({
 fileName : 'test1',
 //sampleRate : _OBJ.SUPPORTED_SAMPLE_RATE[count],
 sampleRate : 4000,
 audioEncoding : 16,
 audioChannel : 'STEREO',
 audioSource : 'MIC',
 audioFormat : 'WAV'
});

try {
   recording.start();
   startAnimation();
  } catch(e) {
   recording.sampleRate = 8000;
   recording.start();
   startAnimation();
  }

This does't seem to catch the exception at 4000 and we get an "Exceeded Buffer Size" exception.

<h3>Comments</h3>

<ol>
<li>Pedro Enrique 2013-04-01

   Please contact the module developer about issues and features with their module:
   <a href="https://marketplace.appcelerator.com/apps/1215?347726402#support" rel="nofollow" target="_blank">https://marketplace.appcelerator.com/apps/1215?347726402#support</a></li>
</ol>


<p><a href="/AC/AC-2268.json">JSON Source</a></p>