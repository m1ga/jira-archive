---
title: "[AC-2278] ListView itemclick event itemIndex inconsistent between Android and iOS"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2014-01-12T19:17:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Rudolf Cardinal</td></tr>
<tr><th>Assignee</th><td>Ritu Agrawal</td></tr>
<tr><th>Created</th><td>2014-01-12T16:52:23.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:41:17.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Steps to Reproduce</h4>
Run this code:

<code><pre>
var items = ['one', 'two', 'three', 'four', 'five'];
var data = [];
for (var i = 0; i &lt; items.length; ++i) {
    data.push( { properties: {
        itemId: i,
        title: items[i],
        searchableText: items[i],
    } } );
}
var section = Titanium.UI.createListSection();
section.setItems(data);
var listView = Titanium.UI.createListView({
    canScroll: true,
    caseInsensitiveSearch: true,
    searchView: Titanium.UI.createSearchBar({
        top: 0,
        left: 0,
        height: 45,
        showCancel: false,
    }),
    sections: [section],
});
listView.addEventListener('itemclick', function (e) {
    Titanium.API.trace('itemclick from listView: e.itemIndex = ' + JSON.stringify(e.itemIndex) + ', e.sectionIndex = ' + JSON.stringify(e.sectionIndex) + ', e.itemId = ' + JSON.stringify(e.itemId) );
});
var win = Ti.UI.createWindow({ backgroundColor: '#fff' });
win.add(listView);
win.open();

// ANDROID 4.1.1/Titanium 3.2.0: When a listview is filtered, itemId remains unchanged, but itemIndex is the index of the filtered content (e.g. always 0 if you've filtered down to one thing).
// iOS 7.0.3/Titanium 3.2.0: When a listview is filtered, itemIndex continues to reference the unfiltered list.
</pre></code>

<h4>Actual Result</h4>
ANDROID 4.1.1/Titanium 3.2.0: When a listview is filtered, itemId remains unchanged, but itemIndex is the index of the filtered content (e.g. always 0 if you've filtered down to one thing).

iOS 7.0.3/Titanium 3.2.0: When a listview is filtered, itemIndex continues to reference the unfiltered list.


<h4>Expected Result</h4>
Same result on both platforms.
(The obvious workaround is to use itemId, which is consistent.)

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-2278_45060/.log">.log</td></td><td>2014-01-12T16:52:35.000+0000</td><td>5822040</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-2278_45061/diagnostic1541366633337341993.log">diagnostic1541366633337341993.log</td></td><td>2014-01-12T16:52:42.000+0000</td><td>15690</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ritu Agrawal 2014-01-12

   Resolving this ticket as a duplicate of TIMOB-16079. Please track that ticket for further updates.</li>
</ol>


<p><a href="/AC/AC-2278.json">JSON Source</a></p>