---
title: "[AC-2358] TableView delete row indexing issues"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2013-10-14T17:14:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>TableView, tableViewRow</td></tr>
<tr><th>Reporter</th><td>Far</td></tr>
<tr><th>Assignee</th><td>Mostafizur Rahman</td></tr>
<tr><th>Created</th><td>2013-10-09T23:42:21.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:41:23.000+0000</td></tr>
</table>

<h3>Description</h3>

<a href="http://developer.appcelerator.com/question/12081/tableview-delete-row-indexing-issues" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/12081/tableview-delete-row-indexing-issues</a>

<h3>Comments</h3>

<ol>
<li>Mostafizur Rahman 2013-10-10

   Hello Far,
   
   Can you please describe this issue more clearly with full test code and test case? That is can test with app.js file. 
   
   
   Thanks
   </li>
<li>Far 2013-10-10

   SDK 3.1.3
   iOS 7
   XCode 5
   
   <code><pre>
   var win = Ti.UI.createWindow({top: 20});
   
   var data = [{title: 'Apples'}, {title: 'Bananas'}, {title: 'Carrots'}, {title: 'Potatoes'}];
   var table = Ti.UI.createTableView({
   	data: data,
   	editable: true
   });
   
   table.addEventListener('click', function(e) {
   	var index = e.index;
       var row = e.row;
       
       row.hasCheck = !row.hasCheck;    
       
       Ti.API.log('index is ' + index);
   });
   
   win.add(table);
   win.open();
   </pre></code>
   
   1. Delete any row from 0 to 3 from table by standard iOS table action
   2. Click row that was *after* deleted
   3. You will get *** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2903.2/UITableView.m:1076
   Look like invalid row returned in event. Row index is valid but no chance to get valid row by any TableView function.
   
   table.setData(table.getData()) in 'delete' event resolve this issue but it's ugly hack.</li>
<li>Mauro Parra-Miranda 2013-10-14

   Hello,
   
   tested with iOS7, Ti 3.1.3. When you delete the rows, there is no warning nor failure. 
   
   Best,
   
   Mauro </li>
<li>Far 2013-10-15

   row.hasCheck = !row.hasCheck; not work for any row *after* deleted.
   You will get assertion if click last row after delete any except last.</li>
<li>Far 2013-10-15

   Look like the problem in
   <code><pre>
   - (void)tableView:(UITableView *)ourTableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
   </pre></code>
   function.
   
   After delete row from section
   <code><pre>
   ...
   [[section rows] removeObjectAtIndex:[indexPath row]];
   ...
   </pre></code>
   there is need to fix row index (TiUITableViewRowProxy *row* property) in all rows after deleted.</li>
<li>Mauro Parra-Miranda 2013-10-15

   Hello,
   
   I used your testcase, instructions and it's not failing. If you can provide a testcase that reproduces the issue, we can reopen this.
   
   Best,
   
   Mauro </li>
<li>Far 2013-10-15

   Application don't crash but has wrong behavior after delete row.
   
   1. Click last row several time. You will see that *hasCheck* property set properly.
   2. Delete first row.
   3. Click last row. *hasChecked* property will not change and you will get
   *** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2903.2/UITableView.m:1076
   in console.</li>
<li>Mauro Parra-Miranda 2013-10-15

   Hello Far,
   your several times is 'dozens of times per second'? 
   
   Best,
   
   Mauro</li>
<li>Far 2013-10-15

   It's not necessary. I made the video for this issue <a href="https://mega.co.nz/#" rel="nofollow" target="_blank">https://mega.co.nz/#</a>!Z89zVZLJ!YSjfqgLZHa96oEKycAnG9xoS9mcL4R7cbZa9xyTMJKU</li>
<li>Far 2013-10-18

    Watch this video (it's very short - only 14s) and reopen ticket please, so I can forget about this issue before next release, when I say: "Good work, guys!".</li>
<li>Far 2013-11-25

    Look like fixed in master. Thx.</li>
</ol>


<p><a href="/AC/AC-2358.json">JSON Source</a></p>