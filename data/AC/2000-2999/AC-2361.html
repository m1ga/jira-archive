---
title: "[AC-2361] Android: eval doesn't reference properly to functions and variables when compiling for distribution"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2013-04-02T19:01:53.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>triage</td></tr>
<tr><th>Reporter</th><td>Claudio Caronia</td></tr>
<tr><th>Assignee</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Created</th><td>2012-09-12T09:37:15.000+0000</td></tr>
<tr><th>Updated</th><td>2017-10-22T15:49:31.000+0000</td></tr>
</table>

<h3>Description</h3>

When developing, eval recognizes properly functions and variables declared in its same namespace, both on emulator and on device (I tried on different devices with Android 2.3.3, 3.2 and 4.0, and it always worked installing from Titanium Studio).
When compiling for distribution and installing on a device it gives a Runtime Error that reports a variable (involved in an eval function... but this is not specified in the error) is undefined.

Follows a trivial example:

<code><pre>
var win = Ti.UI.createWindow({
	backgroundColor : "#FFF"
});

var func_a = function(p) {
	return ++p;
}
var func_b = function(p) {
	return --p;
}
var param = 10;
if (param &gt; 5) {
	var f = "b";
} else {
	var f = "a";
}

var result = eval("func_" + f + "(param)");

alert(f + ": " + result);

win.open();
</pre></code>


This would work correctly when running on the emulator or on a device installing from Titanium Studio, but would give the following error when using the app after compiling for distribution:

*_Runtime Error_*
*Location:*
[1,1] undefined
*Message:*
Uncaught ReferenceError: func_b is not defined
*Source:*
func_b(param)

<h3>Comments</h3>

<ol>
<li>Daniel Sefton 2013-04-02

   Cannot reproduce with Ti SDK 3.0.2 GA with Samsung Galaxy S2 Android 2.3.6.
   
   I installed to the device through studio in development mode, worked fine. I uninstalled the app. I then packaged the app for distribution, installed with "adb install", ran it, and it still worked fine.</li>
<li>Ivan Markovic 2017-10-22

   </li>
</ol>


<p><a href="/AC/AC-2361.json">JSON Source</a></p>