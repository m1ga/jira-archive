---
title: "[AC-2383] Android: Services in background not working when phone enter in sleep mode"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2013-04-01T23:24:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>android, background, service</td></tr>
<tr><th>Reporter</th><td>juanra</td></tr>
<tr><th>Assignee</th><td>Daniel Sefton</td></tr>
<tr><th>Created</th><td>2012-09-24T06:53:37.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:41:25.000+0000</td></tr>
</table>

<h3>Description</h3>

In a simple alarm clock it´s impossible to get a background service running every 5 seconds, because when phone enter in sleep mode, the service stops running (maybe the internal counter of interval stops) not vibrate, not counter, nothing.
Then when wake up the phone, service restart, but it´s not usable.


For example:

in app.js:
<code><pre>
var intent = Ti.Android.createServiceIntent({
    url: 'service.js'
});
intent.putExtra('interval', 5000);
Ti.Android.startService(intent);
</pre></code>






in service.js:
<code><pre>
Ti.API.info('Alarm control');
Ti.Media.vibrate([ 0, 100]);
</pre></code>






in tiapp.xml:
<code><pre>
<android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>">
  <manifest android:versionName="1.0.0">
      <uses-permission android:name="android.permission.WAKE_LOCK"/>
      <uses-permission android:name="android.permission.VIBRATE"/>
  </manifest>
  <services>
    <service url="service.js" type="interval"/>
  </services>
</android>
</pre></code>

If needed (help) I could provide complete titanium project.

Thanks!
Regards.

<h3>Comments</h3>

<ol>
<li>Anirudh Nagesh 2012-11-20

   </li>
<li>juanra 2012-11-26

   Hello Anirudh!!
   
   Thanks for your answer.
   
   I allways used SDK 2.1.2GA, and now I have tested my code in 3.0. The error persist.
   I have look at the ticket but really it´s not the same problem, in that ticket the problem is that the service it´s killed when exit application. In my case the service do nothing (not running) when the phone enter in sleep mode. I know that many people have same problem.
   
   in the case of my example, the phone stops vibrating when the screen go black. I have researched about that and it seems than the solution in android it´s about AlarmManager, it provides tools for wake up the phone in certain moments.
   
   Thanks a lot!</li>
</ol>


<p><a href="/AC/AC-2383.json">JSON Source</a></p>