---
title: "[AC-2389] Alloy: Model Fetch by ID does not work on instances (singletons)"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2013-06-24T13:16:39.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Alloy</td></tr>
<tr><th>Labels</th><td>alloy, model, preferences</td></tr>
<tr><th>Reporter</th><td>Sam Cleaver</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2013-06-22T01:50:08.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:41:25.000+0000</td></tr>
</table>

<h3>Description</h3>

I have a preferences model which stores app preferences/settings; it uses the preferences sync adapter for this purpose. However when attempting to retrieve a result using the fetch({id: <idhere>}) method, undefined is always returned. This makes the use of instances (singletons) impossible, the workaround is to use an instance of a Model initiated with the ID desired. For example:

Works (returns the object):
<code><pre> 
var genretest = Alloy.createModel('preferences', {id: "genreversion"});
genretest.fetch();
</pre></code>

Doesn't work (returns undefined):
<code><pre> 
var genretest2 = Alloy.Models.instance('preferences');
genretest2.fetch({id: "genreversion"});
</pre></code>
Also doesn't work (something wrong with passing ID via fetch?)
<code><pre> 
var genretest = Alloy.createModel('preferences');
genretest.fetch({id: "genreversion"});
</pre></code>

Obviously this is a performance issue as it means that singletons cannot be used throughout the app if a specific ID is desired (unless I've misinterpreted something).

I've attached my preferences.js model to assist in validation.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-2389_40167/preferences.js">preferences.js</td></td><td>2013-06-22T01:50:08.000+0000</td><td>680</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sam Cleaver 2013-06-22

   Through some preliminary testing modifying the Alloy source it seems that if the ID is passed through the fetch method, it is given/not given to the sync method as undefined. This is likely the reason for the issue though according to the documentation an object containing an id should be able to be passed to the fetch method. Most certainly I'm unsure as to how a singleton can be effectively used without being able to pass an object containing id through the fetch method.</li>
<li>Sam Cleaver 2013-06-24

   After reading through some Backbone documentation it seems you can retrieve results using the .get method (as opposed to fetch). I was confused by the Sync Adapters guide in the documentation as it shows an example whereby a Model is retrieved using the fetch method:
   
   <code><pre>
   // Performs a GET on /library/1
   book.fetch({id:1}); 
   </pre></code>
   
   Doesn't look like a bug so request closure.</li>
</ol>


<p><a href="/AC/AC-2389.json">JSON Source</a></p>