---
title: "[AC-2417] iOS: Pull to Refresh doesn't work in new SDK"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-10-12T22:09:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>ios, pull, refresh</td></tr>
<tr><th>Reporter</th><td>Josh Lewis</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2012-09-04T07:34:34.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:41:27.000+0000</td></tr>
</table>

<h3>Description</h3>

This code
<a href="http://developer.appcelerator.com/blog/2010/05/how-to-create-a-tweetie-like-pull-to-refresh-table.html" rel="nofollow" target="_blank">http://developer.appcelerator.com/blog/2010/05/how-to-create-a-tweetie-like-pull-to-refresh-table.html</a>

Only seems to work on the 2.1b SDK I have installed, using the new ones doesnt work correctly.  The view slides up, then back down to refresh, then back up to hide.

<h3>Comments</h3>

<ol>
<li>Shannon Hicks 2012-10-12

   Check Kitchen Sink for the updated code.</li>
<li>Daniel Sefton 2012-10-12

   Latest code: <a href="https://github.com/appcelerator/KitchenSink/blob/master/Resources/ui/handheld/ios/baseui/table_view_pull_to_refresh.js" rel="nofollow" target="_blank">https://github.com/appcelerator/KitchenSink/blob/master/Resources/ui/handheld/ios/baseui/table_view_pull_to_refresh.js</a>
   Commit history: <a href="https://github.com/appcelerator/KitchenSink/commits/master/Resources/ui/handheld/ios/baseui/table_view_pull_to_refresh.js" rel="nofollow" target="_blank">https://github.com/appcelerator/KitchenSink/commits/master/Resources/ui/handheld/ios/baseui/table_view_pull_to_refresh.js</a></li>
<li>Mostafizur Rahman 2014-01-09

   Hello,
   
   I tested this issue with the test code below (modified kitchen sink project). I can't reproduce this issue in latest Ti builds.
   
   <h4>Test Environment</h4>
   
   Mac OS X 10.8.6
   Ti SDK 3.2.0.GA
   Ti CLI 3.2.0
   IOS simulator 7.0.3
   
   
   
    
   
   <h4>Test Code </h4>
   
   <code><pre>
   
   var win = Ti.UI.createWindow({
   	backgroundColor : "#fff",
   });
   
   function formatDate() {
   	var date = new Date();
   	var datestr = date.getMonth() + '/' + date.getDate() + '/' + date.getFullYear();
   	if (date.getHours() &gt;= 12) {
   		datestr += ' ' + (date.getHours() == 12 ? date.getHours() : date.getHours() - 12) + ':' + date.getMinutes() + ' PM';
   	} else {
   		datestr += ' ' + date.getHours() + ':' + date.getMinutes() + ' AM';
   	}
   	return datestr;
   }
   
   var data = [{
   	title : "Row 1"
   }, {
   	title : "Row 2"
   }, {
   	title : "Row 3"
   }];
   
   var lastRow = 4;
   
   var tableView = Ti.UI.createTableView({
   	data : data
   });
   
   win.add(tableView);
   
   var border = Ti.UI.createView({
   	backgroundColor : "#576c89",
   	height : 2,
   	bottom : 0
   });
   
   var tableHeader = Ti.UI.createView({
   	backgroundColor : "#e2e7ed",
   	width : 320,
   	height : 60
   });
   
   // fake it til ya make it..  create a 2 pixel
   // bottom border
   tableHeader.add(border);
   
   var arrow = Ti.UI.createView({
   	backgroundImage : "/images/whiteArrow.png",
   	width : 23,
   	height : 60,
   	bottom : 10,
   	left : 20
   });
   
   var statusLabel = Ti.UI.createLabel({
   	text : "Pull to reload",
   	left : 55,
   	width : 200,
   	bottom : 30,
   	height : "auto",
   	color : "#576c89",
   	textAlign : "center",
   	font : {
   		fontSize : 13,
   		fontWeight : "bold"
   	},
   	shadowColor : "#999",
   	shadowOffset : {
   		x : 0,
   		y : 1
   	}
   });
   
   var lastUpdatedLabel = Ti.UI.createLabel({
   	text : "Last Updated: " + formatDate(),
   	left : 55,
   	width : 200,
   	bottom : 15,
   	height : "auto",
   	color : "#576c89",
   	textAlign : "center",
   	font : {
   		fontSize : 12
   	},
   	shadowColor : "#999",
   	shadowOffset : {
   		x : 0,
   		y : 1
   	}
   });
   
   var actInd = Titanium.UI.createActivityIndicator({
   	left : 20,
   	bottom : 13,
   	width : 30,
   	height : 30
   });
   
   tableHeader.add(arrow);
   tableHeader.add(statusLabel);
   tableHeader.add(lastUpdatedLabel);
   tableHeader.add(actInd);
   
   tableView.headerPullView = tableHeader;
   
   var pulling = false;
   var reloading = false;
   
   function beginReloading() {
   	// just mock out the reload
   	setTimeout(endReloading, 2000);
   }
   
   function endReloading() {
   	// simulate loading
   	for (var c = lastRow; c &lt; lastRow + 10; c++) {
   		tableView.appendRow({
   			title : "Row " + c
   		});
   	}
   	lastRow += 10;
   
   	// when you're done, just reset
   	tableView.setContentInsets({
   		top : 0
   	}, {
   		animated : true
   	});
   	reloading = false;
   	lastUpdatedLabel.text = "Last Updated: " + formatDate();
   	statusLabel.text = "Pull down to refresh...";
   	actInd.hide();
   	arrow.show();
   }
   
   tableView.addEventListener('scroll', function(e) {
   	var offset = e.contentOffset.y;
   	if (offset &lt;= -65.0 && !pulling && !reloading) {
   		var t = Ti.UI.create2DMatrix();
   		t = t.rotate(-180);
   		pulling = true;
   		arrow.animate({
   			transform : t,
   			duration : 180
   		});
   		statusLabel.text = "Release to refresh...";
   	} else if (pulling && (offset &gt; -65.0 && offset &lt; 0) && !reloading) {
   		pulling = false;
   		var t = Ti.UI.create2DMatrix();
   		arrow.animate({
   			transform : t,
   			duration : 180
   		});
   		statusLabel.text = "Pull down to refresh...";
   	}
   });
   
   var event1 = 'dragEnd';
   if (Ti.version &gt;= '3.0.0') {
   	event1 = 'dragend';
   }
   
   tableView.addEventListener(event1, function(e) {
   	if (pulling && !reloading) {
   		reloading = true;
   		pulling = false;
   		arrow.hide();
   		actInd.show();
   		statusLabel.text = "Reloading...";
   		tableView.setContentInsets({
   			top : 60
   		}, {
   			animated : true
   		});
   		arrow.transform = Ti.UI.create2DMatrix();
   		beginReloading();
   	}
   });
   win.open();
   </pre></code>
   
   
   Thnaks </li>
</ol>


<p><a href="/AC/AC-2417.json">JSON Source</a></p>