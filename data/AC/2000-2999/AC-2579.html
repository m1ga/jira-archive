---
title: "[AC-2579] Table EventListener e.index does not return correct row index"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2012-09-26T18:25:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>Ti.UI.SIZE, andoid, classname, eventlistener, mobile, mobilesdk, tableView, tableviewrow</td></tr>
<tr><th>Reporter</th><td>David Zollinger</td></tr>
<tr><th>Assignee</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Created</th><td>2012-08-11T15:41:11.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:41:39.000+0000</td></tr>
</table>

<h3>Description</h3>

When building a tableview based on existing data, the table eventlistener 'click' does not return the correct index value for the row clicked on.  Instead it returns the index value of the last item in the list.

This issue can be fixed by removing the 'className' from the tableviewrow definition.  Additionally it can be fixed by removing 'height: Ti.UI.SIZE' from the tableview definition.

It seems that these two options used at the same time in a table break the click function.  

One last thing, if you force the view to redraw, by switching orientation for example, after the redraw the index value returned from the 
click event is correct.

Here is a link to some extensive testing from the Q&A forum: [<a href="http://developer.appcelerator.com/question/140856/removing-a-tableviewrow-works-on-ios-but-not-android" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/140856/removing-a-tableviewrow-works-on-ios-but-not-android</a>]

Here is code to reproduce the issue:
<code><pre>
var win = Ti.UI.createWindow({ backgroundColor:'white' });
var data = [
    { title: 'One', productID: 1, productQty: 10 },
    { title: 'Two', productID: 2, productQty: 9 },
    { title: 'Three', productID: 3, productQty: 8 },
    { title: 'Four', productID: 4, productQty: 7 },
    { title: 'Five', productID: 5, productQty: 6 }
];
var intRow = 0, intRows = data.length;
var tbl_data = [];
var cartRow;
for (intRow = 0; intRow &lt; intRows; intRow = intRow + 1) {
    cartRow = Ti.UI.createTableViewRow({        
        className: 'mydata'
    });
 
    var deleteBtn = Ti.UI.createButton({
        right: 0,
        height: 45,
        width: 45,
        action: 'remove',
        title: 'r',
        productID: data[intRow].productID
    });
 
    cartRow.add(deleteBtn);
    tbl_data.push(cartRow);
}
 
var table = Ti.UI.createTableView({
    backgroundColor: 'red',
    data:tbl_data,
    height:Ti.UI.SIZE       
});
 
Ti.API.info('length', tbl_data.length);
win.add(table);
 
table.addEventListener('click', function(e){
    Ti.API.info('delete &gt; index ' + e.index);
});
 
win.open();
</pre></code>



<h3>Comments</h3>

<ol>
<li>Karl Rowley 2012-09-26

   This is a duplicate of TIMOB-10712
   
   I'm not able to reproduce this bug when
   I apply these pending pull requests:
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/3043" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3043</a>
   
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/3033" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3033</a></li>
<li>Mauro Parra-Miranda 2013-11-24

   DUP issue. </li>
</ol>


<p><a href="/AC/AC-2579.json">JSON Source</a></p>