---
title: "[AC-2718] Alloy.createController is using wrong location, Alloy is defined after user controllers in generated code"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2013-06-13T18:52:37.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Alloy</td></tr>
<tr><th>Labels</th><td>Alloy</td></tr>
<tr><th>Reporter</th><td>Braco</td></tr>
<tr><th>Assignee</th><td>Daniel Sefton</td></tr>
<tr><th>Created</th><td>2013-04-28T00:39:55.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:41:50.000+0000</td></tr>
</table>

<h3>Description</h3>

We have a widget that calls Alloy.createController. For some reason it's loading controllers form the main app's controller directory:

(...)/Our.app/alloy/controllers/foo.js

rather than the expected location:

(...)/Our.app/alloy/widgets/this-widget/...

In looking at the generated code, it seems that Alloy is defined after the controller:

function Controller() {
...
}
var Alloy = require("alloy"), Backbone = Alloy.Backbone, _ = Alloy._;

which means, I'm assuming, that we're getting the global Alloy instance and not this specific widget. This platform is difficult to debug on, so let me know if 
there's more information I can provide.


<h3>Comments</h3>

<ol>
<li>Shak Hossain 2013-06-13

   Hi Braco,
   Can you please post a reproducible test case?
   Regards,</li>
<li>Tony Lukasavage 2013-06-13

   When creating controllers in a widget, use the <code>Widget</code> object that is present only in widgets instead of Alloy. Using your example above:
   
   <code><pre>
   var controller = Widget.createController('foo');
   </pre></code>
   
   FYI, this is probably a better case for a Q&A question in the future.</li>
</ol>


<p><a href="/AC/AC-2718.json">JSON Source</a></p>