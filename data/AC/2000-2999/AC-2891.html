---
title: "[AC-2891] Android Webview fireEvent doesn't work if a custom module is included in the project"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-02-14T14:48:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Appcelerator Modules, Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>android, custom, fireevent, module, webview</td></tr>
<tr><th>Reporter</th><td>Mark Burggraf</td></tr>
<tr><th>Assignee</th><td>Josh Roesslein</td></tr>
<tr><th>Created</th><td>2012-02-11T11:29:09.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:47:51.000+0000</td></tr>
</table>

<h3>Description</h3>

In Android, a webview can can call Titanium.App.fireEvent just fine UNLESS you have a custom module in your project.  Once you call a custom module with the require() syntax, all webview fireEvent calls fail.  See the complete example below (you'll need to add your own custom module):
 

// if you uncomment the external module line below, webview can no longer call fireEvent!
//var SQLOBJ = require("com.dmarie.sql");

var win = Titanium.UI.createWindow({
	backgroundColor : '#fff'
});

Titanium.App.addEventListener("testEvent",function(e){
	Titanium.API.info("****testEvent fired...");
	alert("it works:" + e.obj);
})
var webview = Titanium.UI.createWebView({
	html : "<html><head><script>function test(){Titanium.API.info('*** firing testEvent here ***');Titanium.App.fireEvent('testEvent',{obj:123});}</script></head>"+
			"<body><h1>webview</h1><button onclick='test()'>Test</button></body></html>"
});
win.add(webview);

win.open();



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-2891_25741/app.js">app.js</td></td><td>2012-02-11T11:29:09.000+0000</td><td>654</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Mark Burggraf 2012-02-13

   This only happens with our module (com.dmarie.sql) which uses a lot of native .c code and the NDK.
   
   Also of note, is that if the require("com.dmarie.sql") is moved AFTER the win.open() call, the bug does not occur.
   
   Third, after require("com.dmarie.sql") is called, all webview objects have the problem.  Even if those webviews are in other windows, or declared in a separate commonJS module.</li>
<li>Mark Burggraf 2012-02-14

   The problem was in the custom module.
   
   Creating a new instance of AppModule caused the problem:
   module = new AppModule()
   
   Instead, we changed this reference to:
   AppModule app = (AppModule)TiApplication.getInstance().getModuleByName("App");
   
   This problem is now resolved.</li>
<li>Josh Roesslein 2012-02-14

   Confirmed resolved by reporter and no further action required from our end.</li>
</ol>


<p><a href="/AC/AC-2891.json">JSON Source</a></p>