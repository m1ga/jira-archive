---
title: "[AC-2901] Android: Titanium.Network.responseXML string is garbled characters  when charset is not utf-8"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-07-26T16:38:05.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>api</td></tr>
<tr><th>Reporter</th><td>Satoshi Tanaka</td></tr>
<tr><th>Assignee</th><td>Davide Cassenti</td></tr>
<tr><th>Created</th><td>2012-07-19T22:11:55.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:47:52.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Overview</h4>
The result of Titanium.Network.responseXML string is garbled characters when charset is not utf-8.

<h4>Sample Code</h4>

I make sample xml (charset is Shift_JIS) on my website.

<code><pre>
var xhr = Titanium.Network.createHTTPClient();
xhr.open('GET','<a href="http://kangaechu.com/xml/shiftjis.xml" rel="nofollow" target="_blank">http://kangaechu.com/xml/shiftjis.xml</a>');
//xhr.open('GET','<a href="http://kangaechu.com/xml/utf-8.xml" rel="nofollow" target="_blank">http://kangaechu.com/xml/utf-8.xml</a>');

xhr.onload = function(){
    //Ti.API.info(this.responseText);
    var titles = this.responseXML.getElementsByTagName('title');
    Ti.API.info(titles.length);
    for (var i=0; i&lt;titles.length; i++){
    	Ti.API.info(i + " : " + titles.item(i).textContent);
    }
};

xhr.onerror = function(error){
	Ti.API.error(error.toString());
};
xhr.send();

</pre></code> 

<h4>Result</h4>

Excepted:
{quote}
I/TiAPI   ( 1844):  0 : hello
I/TiAPI   ( 1844):  1 : こんにちわ
{quote} 

Result:
{quote}
I/TiAPI   ( 1963):  0 : hello
I/TiAPI   ( 1963):  1 : 縺薙ｓ縺ｫ縺｡繧�

{quote} 



<h3>Comments</h3>

<ol>
<li>Satoshi Tanaka 2012-07-19

   Created PR #2616 to resolve issue.
   <a href="https://github.com/appcelerator/titanium_mobile/pull/2616" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2616</a></li>
<li>Shak Hossain 2013-12-28

   <a href="https://github.com/appcelerator/titanium_mobile/pull/2616" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2616</a> was merged.</li>
</ol>


<p><a href="/AC/AC-2901.json">JSON Source</a></p>