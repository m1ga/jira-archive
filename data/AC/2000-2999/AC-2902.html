---
title: "[AC-2902] HTTPClient and random ASIHTTPRequestErrorDomain"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2011-06-10T04:15:12.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>HTTPClient, ios</td></tr>
<tr><th>Reporter</th><td>Romain</td></tr>
<tr><th>Assignee</th><td>Tony Guntharp</td></tr>
<tr><th>Created</th><td>2011-05-21T05:05:24.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:47:52.000+0000</td></tr>
</table>

<h3>Description</h3>

Since a few time, I use to have this issue with my requests:
<code><pre>
Error: {
     "source":{},
     "type":"error",
     "error":"Error Domain=ASIHTTPRequestErrorDomain Code=2 \"The request
        timed out\" UserInfo=0x403e40 {NSLocalizedDescription=The request timed out}"
}
</pre></code>

And sometimes, this one (but I don't think it's related to the issue):
<code><pre>
Error: {
     "source":{},
     "type":"error",
     "error":"Error Domain=ASIHTTPRequestErrorDomain Code=1 \"A connection
        failure occurred\" UserInfo=0x51ba60 {NSUnderlyingError=0x559cfc0 
        \"The operation couldn't be completed. Operation timed out\", 
        NSLocalizedDescription=A connection failure occurred}"
}
</pre></code>

But something strange happens: if I immediately send after a request the same one (that's to say: I don't even wait for the answer of the first one, I IMMEDIATELY send the other one): the first one fails as expected (after the timeout) meanwhile the second works (before the timeout of the first one)!
This issue used to happen sometimes.
But at the beginning of the week, I have created a request which send an image to my server (the image comes from the camera: e.media):
<code><pre>
var params = { image: e.media };
var xhr = Ti.Network.createHTTPClient();
xhr.setTimeout(someTimeout); // usually: 30000
xhr.onload = someOnloadFunction;
xhr.onerror = someOnerrorFunction;
xhr.open('POST', url);
xhr.setRequestHeader('Accept', 'application/json');
xhr.send(params);
</pre></code>
And if I do the same thing than before: this request fails each time for the first try but not for the second!
I also tried to create as the first request the same than the second but without any parameter (so, no image: I just specify the URL and the method). And I have the same result (fail for the first, success for the second).

Any idea why? I really need a solution because I can't do anything if my requests don't work as expected :/

If it can help, I use ruby on rails on Heroku as a server.

Thanks in advance

<h3>Comments</h3>

<ol>
<li>Paul Dowsett 2011-05-30

   In order for us to progress this issue, please edit your ticket to include a proper [Use-case](<a href="http://wiki.appcelerator.org/display/guides/Contributing+to+Titanium#ContributingtoTitanium-CreatingGoodUsecases)." rel="nofollow" target="_blank">http://wiki.appcelerator.org/display/guides/Contributing+to+Titanium#ContributingtoTitanium-CreatingGoodUsecases).</a>
   
   Also kindly read the [Submitting Bug Reports](<a href="http://wiki.appcelerator.org/display/guides/Contributing+to+Titanium#ContributingtoTitanium-SubmittingBugReports)" rel="nofollow" target="_blank">http://wiki.appcelerator.org/display/guides/Contributing+to+Titanium#ContributingtoTitanium-SubmittingBugReports)</a> guide before raising tickets.
   
   Thank you</li>
<li>Paul Dowsett 2011-06-10

   No response from user after request for information. Marking resolved / incomplete.</li>
<li>Paul Dowsett 2011-08-16

   Closed after 30 days of inactivity.</li>
</ol>


<p><a href="/AC/AC-2902.json">JSON Source</a></p>