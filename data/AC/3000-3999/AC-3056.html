---
title: "[AC-3056] Opening/closing the same windows sometimes causes a NullPointerException in Android"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2011-08-16T17:01:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>1.6.2, 1.7, android, crash, window</td></tr>
<tr><th>Reporter</th><td>Aleix Casagolda</td></tr>
<tr><th>Assignee</th><td>Tony Guntharp</td></tr>
<tr><th>Created</th><td>2011-06-10T03:34:57.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:48:06.000+0000</td></tr>
</table>

<h3>Description</h3>

I've found at least one case and I've written a simple app to demonstrate it.

A window with 2 buttons, each one opens a new window with a button to close. If the user opens/closes the windows several times, sometimes app crashes with a NullPointerException.

If the user opens always the same window, the app seems to do not crash. It seems too that if the user open/closes windows very fast works well and that if he/she waits some seconds before opening a new one after closing, tend to fail more frequently.

The code for the test application:

<code><pre>
Titanium.UI.setBackgroundColor('#000');

var win1 = Titanium.UI.createWindow({  
    title:'Window 1'
});

win1.add(openButton = Titanium.UI.createButton({
	title:'Open window 1',
	top: 10
}));

win1.add(openButton2 = Titanium.UI.createButton({
	title:'Open window 2',
	top: 100
}));

openButton.addEventListener('click', function() {
	modal.open();
});

openButton2.addEventListener('click', function() {
	modal2.open();
});

var modal = Titanium.UI.createWindow({
	title:'Modal',
        modal: true
});

modal.add(closeButton = Titanium.UI.createButton({
	title:'Close',
	top: 100
}));

closeButton.addEventListener('click', function() {
	modal.close();
});

var modal2 = Titanium.UI.createWindow({
	title:'Modal 2',
        modal: true
});

modal2.add(closeButton2 = Titanium.UI.createButton({
	title:'Close',
	bottom: 100
}));

closeButton2.addEventListener('click', function() {
	modal2.close();
});

win1.open();
</pre></code>

and the crash StackTrace:

{noformat}
E/TiUncaughtHandler(  442): (main) [15724,191549] Sending event: exception on thread: main msg:java.lang.NullPointerException; Titanium 1.6.2,2011/04/18 17:16,78906d
E/TiUncaughtHandler(  442): java.lang.NullPointerException
E/TiUncaughtHandler(  442): 	at android.content.ComponentName.<init>(ComponentName.java:75)
E/TiUncaughtHandler(  442): 	at android.content.Intent.<init>(Intent.java:2702)
E/TiUncaughtHandler(  442): 	at ti.modules.titanium.ui.TiUIWindow.createIntent(TiUIWindow.java:539)
E/TiUncaughtHandler(  442): 	at ti.modules.titanium.ui.TiUIWindow.createNewActivity(TiUIWindow.java:197)
E/TiUncaughtHandler(  442): 	at ti.modules.titanium.ui.TiUIWindow.<init>(TiUIWindow.java:110)
E/TiUncaughtHandler(  442): 	at ti.modules.titanium.ui.WindowProxy.handleOpen(WindowProxy.java:98)
E/TiUncaughtHandler(  442): 	at org.appcelerator.titanium.proxy.TiWindowProxy.handleMessage(TiWindowProxy.java:67)
E/TiUncaughtHandler(  442): 	at ti.modules.titanium.ui.WindowProxy.handleMessage(WindowProxy.java:85)
E/TiUncaughtHandler(  442): 	at android.os.Handler.dispatchMessage(Handler.java:95)
E/TiUncaughtHandler(  442): 	at android.os.Looper.loop(Looper.java:123)
E/TiUncaughtHandler(  442): 	at android.app.ActivityThread.main(ActivityThread.java:3647)
E/TiUncaughtHandler(  442): 	at java.lang.reflect.Method.invokeNative(Native Method)
E/TiUncaughtHandler(  442): 	at java.lang.reflect.Method.invoke(Method.java:507)
E/TiUncaughtHandler(  442): 	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/TiUncaughtHandler(  442): 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/TiUncaughtHandler(  442): 	at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(  442): FATAL EXCEPTION: main
E/AndroidRuntime(  442): java.lang.NullPointerException
E/AndroidRuntime(  442): 	at android.content.ComponentName.<init>(ComponentName.java:75)
E/AndroidRuntime(  442): 	at android.content.Intent.<init>(Intent.java:2702)
E/AndroidRuntime(  442): 	at ti.modules.titanium.ui.TiUIWindow.createIntent(TiUIWindow.java:539)
E/AndroidRuntime(  442): 	at ti.modules.titanium.ui.TiUIWindow.createNewActivity(TiUIWindow.java:197)
E/AndroidRuntime(  442): 	at ti.modules.titanium.ui.TiUIWindow.<init>(TiUIWindow.java:110)
E/AndroidRuntime(  442): 	at ti.modules.titanium.ui.WindowProxy.handleOpen(WindowProxy.java:98)
E/AndroidRuntime(  442): 	at org.appcelerator.titanium.proxy.TiWindowProxy.handleMessage(TiWindowProxy.java:67)
E/AndroidRuntime(  442): 	at ti.modules.titanium.ui.WindowProxy.handleMessage(WindowProxy.java:85)
E/AndroidRuntime(  442): 	at android.os.Handler.dispatchMessage(Handler.java:95)
E/AndroidRuntime(  442): 	at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(  442): 	at android.app.ActivityThread.main(ActivityThread.java:3647)
E/AndroidRuntime(  442): 	at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  442): 	at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(  442): 	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime(  442): 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime(  442): 	at dalvik.system.NativeStart.main(Native Method)
{noformat}


<h3>Comments</h3>

<ol>
<li>Paul Dowsett 2011-06-13

   Aleix
   
   Your code contains a lot of errors. Please correct them, in order to progress this ticket.
   
   Also provide the link to the Q&A question that you raised regarding this issue, which is a pre-requisite of opening tickets.
   
   Please read [Submitting Bug Reports](<a href="http://wiki.appcelerator.org/display/guides/Contributing+to+Titanium#ContributingtoTitanium-SubmittingBugReports)" rel="nofollow" target="_blank">http://wiki.appcelerator.org/display/guides/Contributing+to+Titanium#ContributingtoTitanium-SubmittingBugReports)</a> before raising any further tickets.
   
   Thanks</li>
<li>Paul Dowsett 2011-06-25

   No response from user</li>
<li>Paul Dowsett 2011-08-16

   /sigh</li>
<li>Paul Dowsett 2011-08-16

   Closing after 30 days of inactivity. Apologies for the copy/paste error! :/</li>
</ol>


<p><a href="/AC/AC-3056.json">JSON Source</a></p>