---
title: "[AC-3095] Application JNI crash when inserting and deleting rows from table"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2012-08-10T07:32:23.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>android, android-4.0, crash, jni, libkroll.so, tableview</td></tr>
<tr><th>Reporter</th><td>Soumya Kanti Kar</td></tr>
<tr><th>Assignee</th><td>Betty Tran</td></tr>
<tr><th>Created</th><td>2012-07-31T08:13:30.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:48:08.000+0000</td></tr>
</table>

<h3>Description</h3>

+TestCode+:
Sample test code has been attached.

+Test Case+:
Keep clicking the rows to expand and collapse.

+Expected behavior+:
The rows should get expanded and collapse.

+Actual behavior+:
The application crashes and the following log can be been in ADB.

W/dalvikvm(15448): trying to work around app JNI bugs, but didn't find 0x417d7300 in table!
W/dalvikvm(15448): JNI WARNING: DeleteLocalRef(0x417d7300) failed to find entry
W/dalvikvm(15448): trying to work around app JNI bugs, but didn't find 0x41730f30 in table!
W/dalvikvm(15448): JNI WARNING: DeleteLocalRef(0x41730f30) failed to find entry
I/DEBUG   (12262): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   (12262): Build fingerprint: 'samsung/GT-I9100/GT-I9100:4.0.3/IML74K/XXLPQ:user/release-keys'
I/DEBUG   (12262): pid: 15448, tid: 15463  >>> com.test.ExpandSample <<<
I/DEBUG   (12262): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000000
I/DEBUG   (12262):  r0 00000001  r1 00000001  r2 00000000  r3 529a2fa1
I/DEBUG   (12262):  r4 0010a350  r5 00000003  r6 002401d0  r7 002401d0
I/DEBUG   (12262):  r8 0023f1e4  r9 00000000  10 0023f2b8  fp 0010a4d4
I/DEBUG   (12262):  ip 5113a290  sp 50b99ab0  lr 50f2cb40  pc 50f2cb78  cpsr 20000010
I/DEBUG   (12262):  d0  41d3001716000000  d1  5d0b00555d0b0071
I/DEBUG   (12262):  d2  4064400000000000  d3  3ff0000000000000
I/DEBUG   (12262):  d4  3ff0000000000000  d5  4064400000000000
I/DEBUG   (12262):  d6  42738e12807f9000  d7  42738e1280757000
I/DEBUG   (12262):  d8  0000000000000000  d9  0000000000000000
I/DEBUG   (12262):  d10 0000000000000000  d11 0000000000000000
I/DEBUG   (12262):  d12 0000000000000000  d13 0000000000000000
I/DEBUG   (12262):  d14 0000000000000000  d15 0000000000000000
I/DEBUG   (12262):  d16 0000000000000000  d17 7e37e43c8800759c
I/DEBUG   (12262):  d18 4028000000000000  d19 3ff0000000000000
I/DEBUG   (12262):  d20 4197d78400000000  d21 bebbbc6c1a570a20
I/DEBUG   (12262):  d22 3ff0000000000000  d23 3fede16b9c24a98f
I/DEBUG   (12262):  d24 3e66376972bea4d0  d25 3fc39a09d078c69f
I/DEBUG   (12262):  d26 0000000000000000  d27 0000000000000000
I/DEBUG   (12262):  d28 0000000000000000  d29 0000000000000000
I/DEBUG   (12262):  d30 0000000000000000  d31 0000000000000000
I/DEBUG   (12262):  scr 20000012
I/DEBUG   (12262):
I/DEBUG   (12262):          #00  pc 50f2cb78  /data/data/com.test.ExpandSample/lib/libkroll-v8.so
I/DEBUG   (12262):          #01  lr 50f2cb40  /data/data/com.test.ExpandSample/lib/libkroll-v8.so
I/DEBUG   (12262):
I/DEBUG   (12262): code around pc:
I/DEBUG   (12262): 50f2cb58 e58455c0 0a000002 e58475bc e1a00004  .U.......u......
I/DEBUG   (12262): 50f2cb68 ebfbd1cf e1a00008 e28dd03c e8bd8ff0  ........<.......
I/DEBUG   (12262): 50f2cb78 e5993000 e3130001 1a000031 e1b0c0c3  .0......1.......
I/DEBUG   (12262): 50f2cb88 4a0000ad e5983000 e58dc030 e2032003  ...J.0..0.... ..
I/DEBUG   (12262): 50f2cb98 e3520001 0a00005c e59d3060 e3130007  ..R.\...`0......
I/DEBUG   (12262):
I/DEBUG   (12262): code around lr:
I/DEBUG   (12262): 50f2cb20 e24dd03c e1a09002 e1a0b003 e58455c0  <.M..........U..
I/DEBUG   (12262): 50f2cb30 e594a5b8 e1a07006 0a000026 ebfa136c  .....p..&...l...
I/DEBUG   (12262): 50f2cb40 e3500000 1a00000b e59b8000 e2455001  ..P..........PE.
I/DEBUG   (12262): 50f2cb50 e1570006 e584a5b8 e58455c0 0a000002  ..W......U......
I/DEBUG   (12262): 50f2cb60 e58475bc e1a00004 ebfbd1cf e1a00008  .u..............
I/DEBUG   (12262):
I/DEBUG   (12262): stack:
I/DEBUG   (12262):     50b99a70  00000000
I/DEBUG   (12262):     50b99a74  00000000
I/DEBUG   (12262):     50b99a78  00000000
I/DEBUG   (12262):     50b99a7c  00000000
I/DEBUG   (12262):     50b99a80  00000000
I/DEBUG   (12262):     50b99a84  00000000
I/DEBUG   (12262):     50b99a88  00000000
I/DEBUG   (12262):     50b99a8c  00000000
I/DEBUG   (12262):     50b99a90  00000000
I/DEBUG   (12262):     50b99a94  00000000
I/DEBUG   (12262):     50b99a98  00000000
I/DEBUG   (12262):     50b99a9c  00000000
I/DEBUG   (12262):     50b99aa0  41a95e18  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (12262):     50b99aa4  509b4078  /data/dalvik-cache/data@app@com.test.ExpandSample-2.apk@classes.dex
I/DEBUG   (12262):     50b99aa8  df0027ad
I/DEBUG   (12262):     50b99aac  00000000
I/DEBUG   (12262):     50b99ab0  00158e48  [heap]
I/DEBUG   (12262):     50b99ab4  414f6490  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (12262):     50b99ab8  00000000
I/DEBUG   (12262):     50b99abc  50b99da8
I/DEBUG   (12262):     50b99ac0  00000000
I/DEBUG   (12262):     50b99ac4  50b99e1c
I/DEBUG   (12262):     50b99ac8  000d2260  [heap]
I/DEBUG   (12262):     50b99acc  001f3378  [heap]
I/DEBUG   (12262):     50b99ad0  4bd924b8  /dev/ashmem/dalvik-LinearAlloc (deleted)
I/DEBUG   (12262):     50b99ad4  50b99b70
I/DEBUG   (12262):     50b99ad8  50b99b70
I/DEBUG   (12262):     50b99adc  00000001
I/DEBUG   (12262):     50b99ae0  001f3378  [heap]
I/DEBUG   (12262):     50b99ae4  4bd924b8  /dev/ashmem/dalvik-LinearAlloc (deleted)
I/DEBUG   (12262):     50b99ae8  50b99b70
I/DEBUG   (12262):     50b99aec  5113a1b8  /data/data/com.test.ExpandSample/lib/libkroll-v8.so
I/DEBUG   (12262):     50b99af0  0010a350  [heap]
I/DEBUG   (12262):     50b99af4  00000000
I/DEBUG   (12262):     50b99af8  0023f1e4  [heap]
I/DEBUG   (12262):     50b99afc  0010a4d4  [heap]
I/DEBUG   (12262):     50b99b00  00001c34
I/DEBUG   (12262):     50b99b04  00000000
I/DEBUG   (12262):     50b99b08  00000000
I/DEBUG   (12262):     50b99b0c  50e21658  /data/data/com.test.ExpandSample/lib/libkroll-v8.so
I/DEBUG   (12262):     50b99b10  00000000
I/DEBUG   (12262):     50b99b14  00000000
I/DEBUG   (12262):     50b99b18  41a95e18  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (12262):     50b99b1c  409534a5  /system/lib/libdvm.so
I/DEBUG   (12262):     50b99b20  50b99b28
I/DEBUG   (12262):     50b99b24  0010a350  [heap]
I/DEBUG   (12262):     50b99b28  0010a3a8  [heap]
I/DEBUG   (12262):     50b99b2c  002401d0  [heap]
I/DEBUG   (12262):     50b99b30  0023f2b8  [heap]
I/DEBUG   (12262):     50b99b34  00000000
I/DEBUG   (12262):     50b99b38  00000004
I/DEBUG   (12262):     50b99b3c  0010a4d4  [heap]
I/DEBUG   (12262):     50b99b40  417d72c8  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (12262):     50b99b44  50db59a4  /data/data/com.test.ExpandSample/lib/libkroll-v8.so
I/DEBUG   (12262):     50b99b48  00000000
I/DEBUG   (12262):     50b99b4c  00000000
I/DEBUG   (12262):     50b99b50  0020daf8  [heap]
I/DEBUG   (12262):     50b99b54  417d72e8  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (12262):     50b99b58  00000000
I/DEBUG   (12262):     50b99b5c  00000002
I/DEBUG   (12262):     50b99b60  00000000
I/DEBUG   (12262):     50b99b64  5113a1b8  /data/data/com.test.ExpandSample/lib/libkroll-v8.so
I/DEBUG   (12262):     50b99b68  41a95e18  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (12262):     50b99b6c  50d09033  /data/data/com.test.ExpandSample/lib/libkroll-v8.so
I/DEBUG   (12262):     50b99b70  000002b4
I/DEBUG   (12262):     50b99b74  0023f1e4  [heap]
I/DEBUG   (12262):     50b99b78  417d72c8  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (12262):     50b99b7c  00001db0
I/DEBUG   (12262):     50b99b80  001b9430  [heap]
I/DEBUG   (12262):     50b99b84  00276500  [heap]
I/DEBUG   (12262):     50b99b88  00000000
I/DEBUG   (12262):     50b99b8c  00000000
I/DEBUG   (12262):     50b99b90  0023f1dc  [heap]
I/DEBUG   (12262):     50b99b94  5113a1b8  /data/data/com.test.ExpandSample/lib/libkroll-v8.so
I/DEBUG   (12262):     50b99b98  0000129c
I/DEBUG   (12262):     50b99b9c  0023f1dc  [heap]
I/DEBUG   (12262):     50b99ba0  50b99bc8
I/DEBUG   (12262):     50b99ba4  50d095b9  /data/data/com.test.ExpandSample/lib/libkroll-v8.so
I/DEBUG   (12262):     50b99ba8  00000000
I/DEBUG   (12262):     50b99bac  0023f1d8  [heap]
I/DEBUG   (12262):     50b99bb0  00000000
I/DEBUG   (12262):     50b99bb4  07cf6d40
I/DEBUG   (12262): dumpstate -k -t -n -z -d -o /data/log/dumpstate_app_native -m 15448

+Others+:
The rows which are inserted and deleted, contains a Ti.UI.View inside the Row. Ti.UI.View row contains two label views, one left aligned and one right alined.

+Additional Info+:
This issue is less reproducible if the latest Mobile SDK 2.1.1.v20120712160111 is used. But readily reproducible when using SDK 1.8.2.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-3095_30203/ExpandSample.zip">ExpandSample.zip</td></td><td>2012-08-01T01:20:24.000+0000</td><td>1563812</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Pedro Enrique 2012-07-31

   Please open a ticket in our helpdesk.  
   <a href="http://support.appcelerator.com/" rel="nofollow" target="_blank">http://support.appcelerator.com/</a>  
   
   Jira is the bug reporting system for Titanium as a platform. We will be able to help you better through the HD.
   
   Thanks
   </li>
<li>Soumya Kanti Kar 2012-08-01

   The sample code has been attached using which when the build is done using 1.8.2 the crash can be observed.</li>
<li>Pedro Enrique 2012-08-10

   This is a duplicate ticket from the HelpDesk. Please continue the conversation here:
   
   <a href="http://support.appcelerator.com/tickets/APP-451981/homepage" rel="nofollow" target="_blank">http://support.appcelerator.com/tickets/APP-451981/homepage</a>
   </li>
</ol>


<p><a href="/AC/AC-3095.json">JSON Source</a></p>