---
title: "[AC-3157] Android: UI - webView is undefined in load event handler for WebView instance"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2011-12-26T10:12:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Sheshadri Mantha</td></tr>
<tr><th>Assignee</th><td>Paul Dowsett</td></tr>
<tr><th>Created</th><td>2011-09-01T09:40:31.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:48:13.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>

webView is undefined in load event handler for WebView instance

<h4>Test case</h4>

<h4>create a window</h4>
<h4>add webview to this window and tell this webview to use a local html file</h4>
<h4>add a load event handler to this webview</h4>
<h4>in this event handler, examine the webview.html or even the html within the source of the event object</h4>
<h4>local file has a link to a remote file; which when clicked does get loaded *BUT still no data in webview.html*</h4>


BTW: For sake of simplicity, i used an html page that i normally use for no connection and simply added a w3c link to it; in fact, network connection etc. are fine.

<code><pre>
Ti.UI.setBackgroundColor('#000');

var win1 = Titanium.UI.createWindow({  
    title:'HTML Test',
    backgroundColor:'#fff'
});
var localUrl = 'noconn.html';
var webView = Ti.UI.createWebView({url:localUrl})
webView.addEventListener('load', onLoad);
function onLoad(evt) {
  if (webView.url.search(localUrl) &gt;= 0) {
    Ti.API.info('LOCAL: +++++++++++++++++++++++++');
    Ti.API.info(evt.source.html);
    Ti.API.info('LOCAL: +++++++++++++++++++++++++');
    Ti.API.info(webView.html);
  }
  else {
    Ti.API.info(" !! NOT local html file -- " + webView.url);
    Ti.API.info('REMOTE: +++++++++++++++++++++++++');
    Ti.API.info(evt.source.html);
    Ti.API.info('REMOTE: +++++++++++++++++++++++++');
    Ti.API.info(webView.html);
  }	
}

win1.add(webView);
win1.open();
</pre></code>

<code><pre>
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"<a href="http://www.w3.org/TR/html4/strict.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/html4/strict.dtd</a>"&gt;

&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
    &lt;title&gt;No Data Connection&lt;/title&gt;
    &lt;meta name="generator" content="Studio 3 <a href="http://aptana.com/" rel="nofollow" target="_blank">http://aptana.com/</a>"&gt;
    &lt;meta name="author" content="healthtrio.com"&gt;
    &lt;!-- Date: 2011-08-15 --&gt;
    &lt;p&gt;Unable to raise the server due to connectivity issues.&lt;/p&gt;
    &lt;p&gt;Please try back later.&lt;/p&gt;
    &lt;a href="<a href="http://www.w3schools.com" rel="nofollow" target="_blank">http://www.w3schools.com</a>"&gt;Go Remote!&lt;/a&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;/body&gt;
&lt;/html&gt;

</pre></code>

<code><pre>
D/KrollContext(  291): (kroll$1: app://app.js) [101,1458] Running evaluated script: file:///android_asset/Resources/app.js
I/TiRootActivity(  291): (main) [0,0] checkpoint, on root activity resume. context = org.appcelerator.titanium.TiContext@43e628a8
W/TiAnalyticsSvc(  291): (Thread-11) [39,39] Analytics Service Started
I/global  (  291): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
I/global  (  291): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
D/dalvikvm(  291): GC_FOR_MALLOC freed 2892 objects / 323576 bytes in 152ms
I/global  (  291): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
I/TiAnalyticsSvc(  291): (Thread-11) [1784,1823] Sending 2 analytics events.
I/ActivityManager(   60): Displayed activity com.healthtrio.test/.HtmltestActivity: 6794 ms (total 6794 ms)
I/TiAPI   (  291): (kroll$1: app://app.js) [1360,3183] LOCAL: +++++++++++++++++++++++++
I/TiAPI   (  291): (kroll$1: app://app.js) [1,3184] undefined
I/TiAPI   (  291): (kroll$1: app://app.js) [1,3185] LOCAL: +++++++++++++++++++++++++
I/TiAPI   (  291): (kroll$1: app://app.js) [1,3186] undefined
D/dalvikvm(  291): GC_FOR_MALLOC freed 5513 objects / 387224 bytes in 202ms
D/dalvikvm(  291): GC_FOR_MALLOC freed 1253 objects / 63240 bytes in 53ms
W/TiAnalyticsSvc(  291): (Thread-11) [2218,5404] Stopping Analytics Service
D/dalvikvm(  118): GC_EXPLICIT freed 703 objects / 39600 bytes in 58ms
D/dalvikvm(  291): GC_FOR_MALLOC freed 2351 objects / 144400 bytes in 139ms
I/TiAPI   (  291): (kroll$1: app://app.js) [5382,10786]  !! NOT local html file -- <a href="http://www.w3schools.com/" rel="nofollow" target="_blank">http://www.w3schools.com/</a>
I/TiAPI   (  291): (kroll$1: app://app.js) [1,10787] REMOTE: +++++++++++++++++++++++++
I/TiAPI   (  291): (kroll$1: app://app.js) [1,10788] undefined
I/TiAPI   (  291): (kroll$1: app://app.js) [1,10789] REMOTE: +++++++++++++++++++++++++
I/TiAPI   (  291): (kroll$1: app://app.js) [0,10789] undefined
{quote}
</pre></code>

<h4>Related Discussions</h4>

Q&A: <a href="http://developer.appcelerator.com/question/124990/webviewhtml-is-undefined-in-load-event-handler#answer-217881" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/124990/webviewhtml-is-undefined-in-load-event-handler#answer-217881</a>


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-3157_22774/device.PNG">device.PNG</td></td><td>2011-09-01T09:40:31.000+0000</td><td>25908</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-3157_22773/htmltest-src.zip">htmltest-src.zip</td></td><td>2011-09-01T09:40:31.000+0000</td><td>748385</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Paul Dowsett 2011-12-26

   Sheshadri
   
   As this is a duplication of TIMOB-974, I will mark it resolved. You may reopen it if you disagree.
   
   However, also take a note of the changes I made to ensure that the ticket meets the [How to Submit a Bug Report](<a href="https://wiki.appcelerator.org/display/guides/How+to+Submit+a+Bug+Report)" rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/guides/How+to+Submit+a+Bug+Report)</a> guide (before I realised it was a duplicate). Please follow this when raising any tickets in future.
   
   Cheers</li>
<li>Paul Dowsett 2012-02-17

   Closing due to inactivity. If this issue still exists, please raise a new ticket, including all the information in the [JIRA Ticket Checklist](<a href="https://wiki.appcelerator.org/display/guides/How+to+Submit+a+Bug+Report#HowtoSubmitaBugReport-JIRATicketChecklist)" rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/guides/How+to+Submit+a+Bug+Report#HowtoSubmitaBugReport-JIRATicketChecklist)</a> to ensure that we can escalate it quickly. Read [How to Submit a Bug Report](<a href="https://wiki.appcelerator.org/display/guides/How+to+Submit+a+Bug+Report)" rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/guides/How+to+Submit+a+Bug+Report)</a> if you have not read it before, and always start a ticket using the [JIRA Ticket Template](<a href="https://wiki.appcelerator.org/display/guides/JIRA+Ticket+Template)." rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/guides/JIRA+Ticket+Template).</a>
   
   Thanks in advance</li>
</ol>


<p><a href="/AC/AC-3157.json">JSON Source</a></p>