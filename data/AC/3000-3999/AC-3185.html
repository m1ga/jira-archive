---
title: "[AC-3185] [tableview] added 'reuse', 'willappear' events. improve scrolling on android"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2012-07-29T17:11:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>android, ios, reuse, tableview</td></tr>
<tr><th>Reporter</th><td>Martin Guillon</td></tr>
<tr><th>Assignee</th><td>Varun Joshi</td></tr>
<tr><th>Created</th><td>2012-07-26T06:09:49.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-08T07:57:35.000+0000</td></tr>
</table>

<h3>Description</h3>

The firs and most important thing is an optimisation of scrolling on android. the getView() method is called many times on the same row, and every-time the setRowData was called (which is really heavy).
So i changed it to only call setRowData when the data actually changed.

I also added "reuse" and "rowappear" events in the tableview. This allows huge improvements in tableview loading and scrolling. For exemple if you download async images, you can start the download only when the row appears and stop it on reuse. Also you can "create" the row content only on "rowappear".
When you have a lot of complex rows it can drastically improve table loading. So the idea is that you create the rowData only with empty rows. Then on "rowappear" you create your custom view and add it to the row.
It works amazingly well. I still have to figure out why on android when loading the tableview, displayed cells first appear empty then fill themselves.
I add to fire the "reuse" event on the row itself, because of the ios implementation.
The "rowappear" event is fired on the tableview

TestCase
<code><pre>
var win = Ti.UI.createWindow({
    backgroundColor: 'white'
});

var tableview = Ti.UI.createTableView();
tableview.addEventListener('rowappear', function(_event){
    Ti.API.info('rowappear at index' + _event.index);
});
var rowData = [];
for (var i=0; i < 300; i++) {
    var row = Ti.UI.createTableViewRow({
        title: ('row ' + i)
    });
    row.addEventListener('reuse', function(_event){
        Ti.API.info('reuse row at index' + _event.index);
    });
  rowData.push(row);
}
tableview.data = rowData;
win.add(tableview);
win.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Martin Guillon 2012-07-26

   pull request <a href="https://github.com/appcelerator/titanium_mobile/pull/2515" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2515</a></li>
<li>Varun Joshi 2012-07-26

   Hi Martin,
   
   Thanks for the pull request. Just one thing, could you please create a new JIRA ticket with the same pull request against the master branch as platform is not able to merge it in the 2.1.X branch.
   
   For your reference, here is the link that explains how to contribute code to Titanium (if you dont already have it) : 
   
   <a href="https://wiki.appcelerator.org/display/guides2/Contributing+to+Titanium" rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/guides2/Contributing+to+Titanium</a>
   
   Please close this ticket after you create the other one.
   
   Regards,
   Varun</li>
<li>Martin Guillon 2012-07-28

   Yes you are right. Also i am still working on this one . I am so sure about events for that as they are async, I am thinking about using a method like HTTPClient onload.
   Will create a new ticket
   
   Thanks</li>
<li>Varun Joshi 2012-07-29

   Thanks. Closing this ticket.</li>
</ol>


<p><a href="/AC/AC-3185.json">JSON Source</a></p>