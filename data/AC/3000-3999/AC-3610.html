---
title: "[AC-3610] Windows: wptools.js fails when installing application with native module"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2016-05-12T08:29:03.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Jonas Bjurhult</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2016-05-10T05:43:18.000+0000</td></tr>
<tr><th>Updated</th><td>2016-05-12T08:37:25.000+0000</td></tr>
</table>

<h3>Description</h3>

I started getting the problem at SDK 5.4.0.v20160503001406 and it has been present since then. I tested using 5.4.0.v20160509133737 today and still get the same error.

SDK <= 5.4.0.v20160428075219 works fine


Steps to reproduce:

1. Create native windows module:
<code><pre>
    ti create -p windows -t module"
</pre></code>
2. Build module: 
<code><pre>
    cd <module_name>\windows
    ti build -p windows -t wp-local
</pre></code>
3. Copy resulting zip file to existing mobile app project
4. include <module name> in tiapp.xml:
<code><pre>
    <modules>
       <module platform="windows">module_name</module>
    </modules>
</pre></code>
5. Build using CLI:
<code><pre>
    appc ti build --platform windows --target wp-device
</pre></code>

Result:
<code><pre>
[INFO]  Project built successfully in 2m 382ms

[INFO]  Installing the application...
[ERROR] The remote procedure call failed.
[ERROR] Error: The remote procedure call failed.
    at ChildProcess.<anonymous> (C:\ProgramData\Titanium\mobilesdk\win32\5.4.0.v20160509133737\node_modules\windowslib\lib\wptool.js:762:10)
    at ChildProcess.emit (events.js:110:17)
    at maybeClose (child_process.js:1015:16)
    at Process.ChildProcess._handle.onexit (child_process.js:1087:5)
</pre></code>


<h3>Comments</h3>

<ol>
<li>Nazmus Salahin 2016-05-10

   Hello,
   
   I am able to build and run on Windows Phone Emulator with SDK <code>5.4.0.v20160509133737</code> without any error using following command.
   <code><pre>
   appc run -p windows -T wp-emulator
   </pre></code>
   
   But I am not able to build and run on Windows Phone Device with SDK <code>5.4.0.v20160509133737</code> using following command.
   <code><pre>
   appc run -p windows -T wp-device
   </pre></code>
   *Error log:*
   <code><pre>
   [WARN]  error while updating tiapp data with appc platform: 
   [WARN]  error while updating tiapp data with appc platform: 
   2016-05-10T11:54:01.162Z | ERROR  | An uncaught exception was thrown!
   Callback was already called.
   2016-05-10T11:54:01.168Z | ERROR  | Callback was already called.
   </pre></code>
   
   Build and run works fine on device and emulator with SDK <code>5.4.0.v20160405161149</code>
   
   Thanks
   
   *Environment*:
   
   *OS :* Microsoft Windows 8.1 Enterprise N
   *Device info:* Microsoft Lumia 640 (Windows Phone 8.1)
   *Node.js Version:* 0.12.7
   *npm Version:* 2.11.3
   *Titanium SDKs:* 5.4.0.v20160509133737
   *Java Development Kit Version:* 1.8.0_73
   *Titanium CLI Version:*  5.0.5
   *Appcelerator CLI Version:*  5.2.2
   *Appcelerator Studio:* 4.5.0
   
   </li>
<li>Jonas Bjurhult 2016-05-10

   Did you include a native module in your build?
   </li>
<li>Nazmus Salahin 2016-05-12

   Hello [~jonasbjurhult],
   We do not give support for Windows Phone module development yet. This support will start soon. You will have to wait till then to get support for  Windows Phone module development.
   
   Thanks for your understanding </li>
<li>JÃ¶rgen Buder 2016-05-12

   Supporting module development has to work from day one when you support Windows since you have so little support in Windows for example for background service (TimeTrigger) which is part of our app delivering to client end of May, we have ongoing touch point to support this and so not supporting this/us in this case is not an option, Please escalate to Chris och Kota, I will contact support to understand this issue. And since it is rather obvious that a module creates this kind of problem in later SDKs there is a regression you have to fix.
   
   Let me know if you have more questions...
   
   I am currently running the app with 20160420 SDK where it works, but anything above that does not execute. Module development is a central part of all your targets..
   
   Thanks</li>
</ol>


<p><a href="/AC/AC-3610.json">JSON Source</a></p>