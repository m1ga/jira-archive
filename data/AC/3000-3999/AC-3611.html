---
title: "[AC-3611] [iOS] Map annotation doesn't show correctly"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2016-05-25T14:13:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Appcelerator Studio 4.5.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Appcelerator Modules, Studio</td></tr>
<tr><th>Labels</th><td>annotation, ios, map, position</td></tr>
<tr><th>Reporter</th><td>Marian Kucharcik</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2016-05-10T09:07:02.000+0000</td></tr>
<tr><th>Updated</th><td>2016-07-11T14:39:44.000+0000</td></tr>
</table>

<h3>Description</h3>

Hi guys,
in my app I open shop detail window when user clicks on shop list table. In that window I have mapView with annotation to show user shop's location. Problem is, when I close detail window and open it with other shop(which has different location), annotation doesn't show up properly - it remains on original location. When I close the window again and click on the same shop, annotation position is ok. I tried to log annotation properties and it logs right longitude/latitude.
I have no problem with Android version of my app. I tried to replace custom image with default red pin but it didn't help.
Thank you.


<h3>Comments</h3>

<ol>
<li>Nazmus Salahin 2016-05-11

   Hello [~max87],
   
   Thanks for reporting. It will be appreciated if you provide simple test code and steps to reproduce. We will be able to identify if it is a valid bug or implementation problem when we are able to reproduce the issue.
   
   Thanks in advance
   </li>
<li>Marian Kucharcik 2016-05-11

   Hello Nazmus,
   you can download app from App Store - <a href="https://itunes.apple.com/sk/app/allbip/id1105923467?mt=8" rel="nofollow" target="_blank">https://itunes.apple.com/sk/app/allbip/id1105923467?mt=8</a> (in Slovak language)
   There are Categories on the first screen(click on Kozmetika f.e), then click on Lymfocentrum, it opens detail page. Scroll down to map view and there should be annotation. Click on Spat(Back) to list of shops and then on "The  Diamond hair&beauty studio. Then scroll down on detail page again and there is no annotation on place - it is on Lymfocentrum's address.
   
   The code is simple - I prepare detail screen on startup with map and then when user click on Shop I set correct variables to correct places - I remove annotation from map, create new annotation with new possition and add it to map. I tried to log annotation longitude&latitude before adding to map and after adding and they are the same, but possition is not changed.
   Thank you
    </li>
<li>Sharif AbuDarda 2016-05-12

   Hello [~max87], 
   
   We need a reproducible code to test. We will try to use the code in our platform to regenerate the issue. Please strip out the code and keep only the code that regenerates the issue and attached the code or the project in this ticket. We will be able to identify if it is a valid bug. In that case, we will escalate the ticket for a fix, If it's an implementation problem then we can provide support. All that possible when we are able to reproduce the issue in our environment.
   
   Thanks in advance.</li>
<li>Hans Kn√∂chel 2016-05-14

   This looks like a scoping-issue. Please ensure that your windows are opened in the correct scope and the module instance is shared globally, like <code>Alloy.Globals.Map = require("ti.map");</code>. Also ensure to clean views when closing a window. This is no SDK issue.</li>
<li>Sharif AbuDarda 2016-05-24

   Hello [~max87], Whats the update on your issue, Are you still having it? Let us know. Otherwise, we will close the ticket. </li>
<li>Marian Kucharcik 2016-07-11

   Hello Sharif,
   I tried to recompile this app with newest SDK and problem is still there.
   I moved require('ti.map') to app.js, but still same behavior.
   Thank you
   </li>
</ol>


<p><a href="/AC/AC-3611.json">JSON Source</a></p>