---
title: "[AC-3744] facebook login bug"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2016-06-09T22:03:01.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>ArrowDB</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>anand</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2016-06-06T09:18:37.000+0000</td></tr>
<tr><th>Updated</th><td>2016-06-09T22:03:01.000+0000</td></tr>
</table>

<h3>Description</h3>

When user(anand@nisostech.com) registers using arrowdb using api then it create account for that user (perfect), but if user logins from his facebook account with email address (anand@nisostech.com) then arrowdb create new account for that facebook user. Arrowdb don't map facebook user with user who has already register with similar email id.




fb login using arrowdb external account 

<a href="https://api.cloud.appcelerator.com/v1/users/external_account_login.json?key=" rel="nofollow" target="_blank">https://api.cloud.appcelerator.com/v1/users/external_account_login.json?key=</a><YOUR APP APP KEY>&pretty_json=true

request :
type:facebook,
token:EAADoNzpziVMBABK9kc4wXcV9e5pIo7LO0XswkOthz5xZCUqpUZAcCC9DDu2S0NJi28p3fiwzD7zuITJZAIK1uh7TIKDAmrultfZBju1noVkbwtX4ibbeLAy8pb2TZCVS6NDfye8X3xzAKX6NqyTdFDeLpYef0NOYu3UkX5Yxv5gZDZD

response :
{
  "meta": {
    "code": 200,
    "status": "ok",
    "method_name": "externalAccountLogin",
    "session_id": "Cbmqwd3XXFydg4sD0RV2BZOW3bY"
  },
  "response": {
    "users": [
      {
        "id": "5747f35b04f995090a8de505",
        "created_at": "2016-05-27T07:12:27+0000",
        "updated_at": "2016-06-06T08:13:28+0000",
        "external_accounts": [
          {
            "external_id": "168807353521580",
            "external_type": "facebook",
            "token": "EAADoNzpziVMBABK9kc4wXcV9e5pIo7LO0XswkOthz5xZCUqpUZAcCC9DDu2S0NJi28p3fiwzD7zuITJZAIK1uh7TIKDAmrultfZBju1noVkbwtX4ibbeLAy8pb2TZCVS6NDfye8X3xzAKX6NqyTdFDeLpYef0NOYu3UkX5Yxv5gZDZD"
          }
        ],
        "confirmed_at": "2016-05-27T07:12:27+0000",
        "email": "",
        "admin": "false",
        "stats": {
          "photos": {
            "total_count": 0
          },
          "storage": {
            "used": 0
          }
        },
        "friend_counts": {
          "requests": 0,
          "friends": 0
        }
      }
    ]
  }
}


create user using arrowdb create api

<a href="https://api.cloud.appcelerator.com/v1/users/create.json?key=" rel="nofollow" target="_blank">https://api.cloud.appcelerator.com/v1/users/create.json?key=</a><YOUR APP APP KEY>&pretty_json=true

request :
first_name:abc,
last_name:xyz,
email:anand2@nisostech.com,
password:12345,
password_confirmation:12345


response :
{
  "meta": {
    "code": 200,
    "status": "ok",
    "method_name": "createUser",
    "session_id": "EerdcRGqdUVRTaqzil32uLxd8wM"
  },
  "response": {
    "users": [
      {
        "id": "5755314204f9959307dbff31",
        "first_name": "abc",
        "last_name": "xyz",
        "created_at": "2016-06-06T08:16:02+0000",
        "updated_at": "2016-06-06T08:16:02+0000",
        "external_accounts": [

        ],
        "confirmed_at": "2016-06-06T08:16:02+0000",
        "username": "anand2@nisostech.com",
        "email": "anand2@nisostech.com",
        "role": "teacher",
        "admin": "false",
        "stats": {
          "photos": {
            "total_count": 0
          },
          "storage": {
            "used": 0
          }
        },
        "friend_counts": {
          "requests": 0,
          "friends": 0
        }
      }
    ]
  }
}

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2016-06-09

   Hello, 
   
   Please be informed that this is not a bug, we don't match user emails. The only thing we are looking at is facebook id, if facebook login is provided. We currently don't support linking facebook users with existing users by emails. This is not a supported feature. We had a report of this previously. Resolution here is, we are not doing it at this moment. 
   
   Regards,
   Sharif.</li>
</ol>


<p><a href="/AC/AC-3744.json">JSON Source</a></p>