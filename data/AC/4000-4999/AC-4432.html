---
title: "[AC-4432] Webview rendering issue on 5.4.0 GA under Android"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2016-10-04T16:09:39.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>android, webView</td></tr>
<tr><th>Reporter</th><td>Michele de Rosa</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2016-09-06T11:25:12.000+0000</td></tr>
<tr><th>Updated</th><td>2016-10-10T09:21:42.000+0000</td></tr>
</table>

<h3>Description</h3>

I am experiencing an issue on the webview component when switching from the version 5.3.1 GA to 5.4.0 GA. The webview contains some layers: one of them is a tile layer and others are WMS layers. It seems that the opacity param of the WMS layer has not been taken into account by the webview under 5.4.0 GA. The result is that I can see only the WMS images without the underlying cartography. The issue appears on both versions (5.3.1 GA and 5.4.0 GA) when trying to take a screenshot by calling the Ti.Media.taksScreenShot function. Finally, the issue seems to not affect iOS. I attach some screenshots.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-4432_60215/Pasted image at 2016_09_06 09_26 AM.png">Pasted image at 2016_09_06 09_26 AM.png</td></td><td>2016-09-06T11:22:49.000+0000</td><td>2196552</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-4432_60214/Pasted image at 2016_09_06 09_28 AM.png">Pasted image at 2016_09_06 09_28 AM.png</td></td><td>2016-09-06T11:23:14.000+0000</td><td>451211</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2016-09-29

   Hello, Can you share sample code for us to test? we will look into it. Send a list of steps to follow for successful regeneration. Thanks.</li>
<li>Michele de Rosa 2016-10-10

   Hi,
   sorry for the late response. This is a snippet of my HTML code inside the webview:
   
   {quote}
   map = L.map('map', {
                       minZoom: 4,
                       maxZoom: 10,
                       zoomControl: false,
                       //                measureControl: true,
                       fullscreenControl: true,
                       timeDimension: true,
                       timeDimensionControl: true,
                       timeDimensionControlOptions: {
                           playerOptions: {
                               loop: true
                           }
                       },
                       timeDimensionOptions: {
                           timeInterval: startDate + "/PT1H30M",
                           period: "PT15M",
                           currentTime: timeMs + 75 * 60 * 1000 // start time 30 mins before current time
                       }
                   });
   
   
   baseLayers['No Background'] = L.tileLayer('https://{s}.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWljZGVyIiwiYSI6ImQwMzE3MzIyZDhiNWRiZGIyYmE3M2NlZjcyYmM3YTBkIn0.hkWDN9OoMhGqI6rHsw02Pw', {
                       maxZoom: 18,
                       attribution: 'Map data &copy; <a href="<a href="http://openstreetmap.org" rel="nofollow" target="_blank">http://openstreetmap.org</a>">OpenStreetMap</a> contributors, ' +
                               '<a href="<a href="http://creativecommons.org/licenses/by-sa/2.0/" rel="nofollow" target="_blank">http://creativecommons.org/licenses/by-sa/2.0/</a>">CC-BY-SA</a>, ' +
                               'Imagery &copy; <a href="<a href="http://mapbox.com" rel="nofollow" target="_blank">http://mapbox.com</a>" >Mapbox</a>' + ', StormTrack data &copy; <a href="<a href="http://www.mondometeo.org" rel="nofollow" target="_blank">http://www.mondometeo.org</a>">Mondometeo</a>, ' +
                               '&copy; <a href="<a href="http://www.geo-k.co" rel="nofollow" target="_blank">http://www.geo-k.co</a>">GEO-K</a>',
                       id: mapType
                   });
   
   var eumsLayerAirMass = L.tileLayer.wms('<a href="http://eumetview.eumetsat.int/geoserv/wms" rel="nofollow" target="_blank">http://eumetview.eumetsat.int/geoserv/wms</a>', {
                       minZoom: 0,
                       maxZoom: 18,
                       layers: 'meteosat:msg_airmass',
                       styles: '',
                       format: 'image/png8',
                       CRS: 'EPSG:3857',
                       //TIME:        date,                       
                       transparent: true,
                       opacity: opacity,
                       version: '1.3.0',
                       zIndex: 1
                   });
   
   var baseAirMass = L.tileLayer('https://{s}.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWljZGVyIiwiYSI6ImQwMzE3MzIyZDhiNWRiZGIyYmE3M2NlZjcyYmM3YTBkIn0.hkWDN9OoMhGqI6rHsw02Pw', {
                       maxZoom: 18,
                       attribution: 'Map data &copy; <a href="<a href="http://openstreetmap.org" rel="nofollow" target="_blank">http://openstreetmap.org</a>">OpenStreetMap</a> contributors, ' +
                               '<a href="<a href="http://creativecommons.org/licenses/by-sa/2.0/" rel="nofollow" target="_blank">http://creativecommons.org/licenses/by-sa/2.0/</a>">CC-BY-SA</a>, ' +
                               'Imagery &copy; <a href="<a href="http://mapbox.com" rel="nofollow" target="_blank">http://mapbox.com</a>" >Mapbox</a>' + ', StormTrack data &copy; <a href="<a href="http://www.mondometeo.org" rel="nofollow" target="_blank">http://www.mondometeo.org</a>">Mondometeo</a>, ' +
                               '&copy; <a href="<a href="http://www.geo-k.co" rel="nofollow" target="_blank">http://www.geo-k.co</a>">GEO-K</a>.Credits Eumetsat',
                       id: mapType,
                       zIndex: 0
                   });
   
   var eumsGroupAirmass = L.layerGroup();
                   var tdLayerAirmass = L.timeDimension.layer.wms(eumsLayerAirMass);
                  
                   baseAirMass.addTo(eumsGroupAirmass);
                   tdLayerAirmass.addTo(eumsGroupAirmass);
   
                   baseLayers['Day & Night'] = eumsGroupAirmass;
   
   baseLayers['Day & Night'].addTo(map);
   
   layerControl = L.control.layers(baseLayers, null, {
                               collapsed: true,
                               position: 'topleft'
                           });
   
   layerControl.addTo(map);
   {quote}
   
   I'm using leaflet.
   
   Regards
   
   Michele de Rosa</li>
</ol>


<p><a href="/AC/AC-4432.json">JSON Source</a></p>