---
title: "[AC-4655] Custom images not working on ti.map"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2016-12-07T20:26:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Appcelerator Modules</td></tr>
<tr><th>Labels</th><td>android, map</td></tr>
<tr><th>Reporter</th><td>John Dalsgaard</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2016-12-06T11:41:21.000+0000</td></tr>
<tr><th>Updated</th><td>2016-12-20T13:58:25.000+0000</td></tr>
</table>

<h3>Description</h3>



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-4655_60920/Screenshot_20161207-032107.png">Screenshot_20161207-032107.png</td></td><td>2016-12-06T21:23:57.000+0000</td><td>211432</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-4655_60833/Screen Shot 2016-12-06 at 12.39.43.png">Screen Shot 2016-12-06 at 12.39.43.png</td></td><td>2016-12-06T11:40:42.000+0000</td><td>328807</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-4655_60834/Screen Shot 2016-12-06 at 12.39.55.png">Screen Shot 2016-12-06 at 12.39.55.png</td></td><td>2016-12-06T11:40:40.000+0000</td><td>480556</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-4655_60835/zeroTrip.png">zeroTrip.png</td></td><td>2016-12-06T11:37:03.000+0000</td><td>4483</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2016-12-06

   Hello, I am testing your image with ti.map 3.1.0 in SDK 6.0.0. I am not able to reproduce the issue. Your custom image shows in my case. See my screenshot. 
   <code><pre>
   operating System
     Name                        = Mac OS X
     Version                     = 10.11.6
     Architecture                = 64bit
     # CPUs                      = 4
     Memory                      = 8589934592
   Node.js
     Node.js Version             = 4.2.2
     npm Version                 = 2.14.7
   Titanium CLI
     CLI Version                 = 5.0.10
   Titanium SDK
     SDK Version                 = 6.0.0.GA
     Target Platform             = android
   ti.map 3.1.0
   </pre></code>
   
   </li>
<li>John Dalsgaard 2016-12-08

   Hi Sharif
   
   Ok, I can see that you have not tried the test code I have shown above. According to the documentation the <code>image</code> property can be: <code>image : String/Titanium.Blob</code>. So I can get it working with a string as well, which is fine. However, I cannot get it to work with my code where i "put" the image on top of a dark green, round image view.
   
   Did you try that? Could I adopt the code to make it work? I would expect my code to return a <code>Titanium.Blob</code> when using the <code>.toImage()</code> method of the view.</li>
<li>John Dalsgaard 2016-12-08

   Ok, I have done quite a lot more testing.... And it seems that the problem is the {color:#205081}borderRadius{color} property of the {color:#205081}Ti.UI.View{color}. So this code will show the image on top of a dark green background:
   
   <code><pre>
       var annotationView = Ti.UI.createView({
           width:50,
           height:50,
           opacity:0.8,
           backgroundColor:'#2a3b0a',  // Darker green
           // borderRadius:5
       });
        
       //Add image to the annotation view
       var imageView = Ti.UI.createImageView({
               width:35,
               height:35,
               opacity:1,
               image: '/images/zeroTrip.png'
           });
       annotationView.add(imageView);
       mapView.addAnnotation(
           Map.createAnnotation({
               latitude: e.coords.latitude, 
               longitude: e.coords.longitude,
               title:"Test icon",
               subtitle:"06-12-2016",
               // image:imageView.toImage()
               image:annotationView.toImage()
           })
       );
   
   </pre></code>
   
   And if I use the {color:#205081}imageView.toImage(){color} instead of the {color:#205081}annotationView.toImage(){color} then it correctly show the icon in the right size (without any background).
   
   So it seems the problem is with the {color:#205081}borderRadius{color} property. Do you want me to create a new JIRA - or could you just re-open this? Or even better provide me with a solution that I have overlooked :-)
   
   Thanks in advance!
   
   /John
   </li>
<li>John Dalsgaard 2016-12-08

   ... don't know what happened to the formating above??? Apparently, a code block behaves differently when in a comment??? :-/</li>
<li>John Dalsgaard 2016-12-08

   Sigh... and now the formating looks Ok. Strange....?</li>
<li>Hans Knöchel 2016-12-18

   [~jda] I added the blob feature in [this PR](<a href="https://github.com/appcelerator-modules/ti.map/pull/152)" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/152)</a> but only tested with <code>Ti.UI.ImageView</code>, not the <code>Ti.UI.View</code>. I didn't expect to have a difference there. So it may be a difference in the <code>toImage</code> method between those two. Can you validate that? Then we would need to fix it there instead.</li>
<li>John Dalsgaard 2016-12-19

   Hi Hans, I am pretty sure I had to go back to 2.3.7 to see the change in behaviour - but let me test it again...</li>
<li>John Dalsgaard 2016-12-20

   Hans, there seems to be no difference between <code>toBlob()</code> and <code>toImage()</code> - on the <code>Ti.UI.ImageView</code>. <code>toBlob()</code> is not defined on <code>Ti.UI.View</code> - as discussed on TiSlack :-)</li>
<li>Hans Knöchel 2016-12-20

   That's expected. Did you try the <code>customView</code> property btw?</li>
<li>John Dalsgaard 2016-12-20

    Just did - with borderradius it also disappears.</li>
</ol>


<p><a href="/AC/AC-4655.json">JSON Source</a></p>