---
title: "[AC-4889] iOS: Can't create modal transparent Window"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2017-04-04T14:08:28.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Appcelerator Studio 4.5.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>backgroundColor, window</td></tr>
<tr><th>Reporter</th><td>carlo</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2017-03-31T13:05:01.000+0000</td></tr>
<tr><th>Updated</th><td>2017-04-04T14:08:28.000+0000</td></tr>
</table>

<h3>Description</h3>

Try code above, after animation Window color is reset to Titanium.UI.backgroundColor

<code><pre>
var win = Titanium.UI.createWindow({
    backgroundColor: 'white',
});
win.open();
var fail = Ti.UI.createWindow({
	modal:true,
	backgroundColor:'transparent'//or #00FFFFFF
});
fail.add(Ti.UI.createLabel({
	text:"Test"
}));
fail.open();//after animation background is black (default)
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-4889_61945/Testingmodal.zip">Testingmodal.zip</td></td><td>2017-03-31T13:05:02.000+0000</td><td>34558</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ritu Agrawal 2014-03-10

   Moving this ticket to engineering as I can reproduce the issue with the provided test case.</li>
<li>Giorgos Papadopoulos 2014-03-15

   I think we have to setup the parent view controller modal presentation style to use the same view presentation style.
   
   Add this:
   topVC.modalPresentationStyle = UIModalPresentationCurrentContext;
   
   before presenting the view controller on -(void)showControllerModal:(UIViewController*)theController animated:(BOOL)animated of TiRootViewController.m
   
   Tested it and works with TiSDK 3.2.1, on simulator 7.0.3.</li>
<li>Tobias Høegh 2014-04-29

   It has nothing to do with the animation of the modal window. Same effect with animated set to false:
   
   fail.open({animated:false});
   
   But sure. Looks like the solution is fine.</li>
<li>Thierry Godfroid 2014-05-16

   FWIW, I did change it in 3.1.3GA and we get a transparent bg but it breaks the opening animation (slide up).  Any clue ? thanks
   
   3.1.3GA test on simulator 6.1</li>
<li>Giorgos Papadopoulos 2014-05-17

   Could you provider a test case ? Then I will look it up.</li>
<li>Thierry Godfroid 2014-05-17

   Here you go.  With the code below, and without adding the line you mention (with UIModalPresentationCurrentContext), animation is ok, transparency is maintained during animation and it all goes black (as expected) at end of animation.
   
   Now, modify TiRootViewController with your line and recompile/run the app.  When you click the red background, the modal just pops up without tthe slideup animation (but the end result shows the transparency).
   
   HTH
   Thierry
   
   <code><pre>
   var navwin, modalnavwin, rootwin, rootmodalwin;
   rootmodalwin = Ti.UI.createWindow({
   	backgroundColor: '#7F00CCCC'
   });
   modalnavwin = Ti.UI.iOS.createNavigationWindow({
   	modal: true,
   	window: rootmodalwin
   });
   rootmodalwin.addEventListener('click',function(){ 'use strict';
   	modalnavwin.close();
   });
   rootwin = Ti.UI.createWindow({
   	backgroundColor: 'red'
   });
   rootwin.add( Ti.UI.createImageView({
   	width: 300,
   	height: 200,
   	image: '<a href="http://www.appcelerator.com/wp-content/uploads/film_reel@2x.png" rel="nofollow" target="_blank">http://www.appcelerator.com/wp-content/uploads/film_reel@2x.png</a>'
   }));
   navwin = Ti.UI.iOS.createNavigationWindow({
   	window: rootwin
   });
   rootwin.addEventListener('click', function(){ 'use strict';
   	modalnavwin.open();
   });
   navwin.open()
   </pre></code>
   
   edited: I made a mistake in the previous version, it is of course navwin.open() at the last line not rootwin.open() !</li>
<li>Thierry Godfroid 2014-05-25

   please be aware that with SDK 3.2.2 and SDK 3.2.3 (at least) adding the line to TiRootViewController.m *breaks* the modal slide up animation !! So, the full solution is bound to be more complicated, I am afraid.</li>
<li>Ingo Muschenetz 2014-06-02

   [~srahim] to mark as invalid.</li>
<li>Thierry Godfroid 2014-06-25

   I find this a bit harsh.  There are apps out there who manage to do that natively (Path, for instance). 
   I have tried with transparency of the root window and failed.  So could you show me how to adapt the sample I gave for reproduction so that it work with the setBackgroundColor() trick you mention ?
   
   Thanks</li>
<li>Thierry Godfroid 2014-06-30

    I tested with this and added the setBackgroundColor() to my own test app (see post of 17-may).
    I agree that it changes the background color.  
    But it still does not show the underlying root window under the tranparent modal.
    How do you propose to do that with only a color change ?  It seems to me that the root cause is that the rootwindow is removed from the display and that's what solved with the trick shown by Giorgios.</li>
<li>carlo 2014-09-02

    give root window the same background color of modal window is not a solution for me!
    
    I think you have to consider this issue still open</li>
<li>carlo 2014-09-08

    I change my code so I don't need modal parameter anymore, thanks for code snippets.
    
    
    Finally, we can't create *modal* transparent window.
    I think this should be reported in docs.</li>
<li>Ingo Muschenetz 2014-09-08

    [~bhatfield] FYI.</li>
<li>Tobias Høegh 2014-09-08

    As Vishal Duggal mentioned: Transparent modal windows are little difficult to do.
    Same info in the link below, but there is also a workaround/example code. So it's absolute possible.
    
    <a href="http://www.cocoaosx.com/2011/10/20/how-to-display-transparent-modal-viewcontrollers/" rel="nofollow" target="_blank">http://www.cocoaosx.com/2011/10/20/how-to-display-transparent-modal-viewcontrollers/</a>
    </li>
<li>Thierry Godfroid 2014-09-08

    I kind of agree with @Tobias Schibler.  I know we can work around the issue but the goal of the titanium framework (at least to me) is that we can have the same behavior without resorting to per OS work arounds ....  </li>
<li>Tobias Høegh 2014-09-09

    [~vduggal] You make a good work! Thanks a lot.
    Would be good to have this facts with transparent modal windows in the docs.</li>
<li>Lee Morris 2017-03-30

    Closing ticket as "Won't Fix". There has been no update for a while. If there is any problem, please open a new ticket.</li>
<li>carlo 2017-03-31

    Same behavior in 6.0.3</li>
</ol>


<p><a href="/AC/AC-4889.json">JSON Source</a></p>