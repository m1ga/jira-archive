---
title: "[AC-4955] Webview Google OAuth Issue"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2017-05-10T11:22:09.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>JATIN JOSHI</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2017-05-09T23:55:49.000+0000</td></tr>
<tr><th>Updated</th><td>2017-05-10T13:28:28.000+0000</td></tr>
</table>

<h3>Description</h3>

I am using the OAuth feature of Google to authenticate users. Authorization page opens with a 403 error with the description:

This user-agent is not permitted to make OAuth authorization request to Google as it is classified as an embedded user-agent (also known as a web-view). Per our policy, only browsers are permitted to make authorization requests to Google. We offer several libraries and samples for native apps to perform authorization request in browser.

Google url is opened within web view. 

Code Snippet:

$.webview.url = args.url;//for new oAuth
function webviewLoaded(e){
	//wait for result to be put on webview by backend:
    var result = $.webview.evalJS('result');
    console.log("Social Login Results ---" + result);
    //when get the result, call the return function in index.js and return the result:
    if(result){
    	args.loginReturned(result);
    	$.socialLogin.close();
    }
}

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/AC/AC-4955_62199/GoogleErrorWEbView.png">GoogleErrorWEbView.png</td></td><td>2017-05-09T23:54:51.000+0000</td><td>209301</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Hans Kn√∂chel 2017-05-10

   Here are your options (this is no Titanium issue):
   - Use the [Ti.GoogleSignIn](<a href="https://github.com/hansemannn/titanium-google-signin)" rel="nofollow" target="_blank">https://github.com/hansemannn/titanium-google-signin)</a> module to do the OAuth flow with their native library
   - Use the Safari-Browser via <code>Ti.Platform.openURL</code> to handle the URL and set the callback url-scheme to your app's URL scheme (e.g. <code>myapp://</code>
   
   WebViews in general are disallowed by Google, that's what the message also says. I hope one of the above suggestions will help.</li>
<li>JATIN JOSHI 2017-05-10

   I tried this:
   
   safariDialog.open({
   		url: args.url,
   		tintColor:"red"
   	});
   	
   Ti.App.iOS.addEventListener("handleurl", function(e) {
       // If the handled url is provided by the safari-dialog, close it (use-case for OAuth)
       console.log("RESPONSE FROM SERVER" + JSON.stringify(e));
       if (e.launchOptions.source == "com.apple.SafariViewService") {
           safari.close();
       }
   });
   
   But not getting any response.</li>
</ol>


<p><a href="/AC/AC-4955.json">JSON Source</a></p>