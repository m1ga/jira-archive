---
title: "[AC-5108] Intermittent crashes on android. Seems related to okhttp"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-10-17T19:34:01.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Alloy, Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Hugo Ramos Freire Neto</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2017-07-26T18:13:30.000+0000</td></tr>
<tr><th>Updated</th><td>2017-10-17T19:34:01.000+0000</td></tr>
</table>

<h3>Description</h3>

Android ANRs Trace:

"OkHttp ConnectionPool" tid=17 TimedWaiting 
"OkHttp ConnectionPool" daemon prio=5 tid=17 TimedWaiting
  | group="main" sCount=1 dsCount=0 obj=0x12f7f640 self=0xab81ed58
  | sysTid=4515 nice=0 cgrp=default sched=0/0 handle=0xdf9ff930
  | state=S schedstat=( 54297968 36339376 163 ) utm=3 stm=2 core=2 HZ=100
  | stack=0xdf8fd000-0xdf8ff000 stackSize=1038KB
  | held mutexes=
  at java.lang.Object.wait! (Native method)
- waiting on <0x00d3f36d> (a com.android.okhttp.ConnectionPool)
  at com.android.okhttp.ConnectionPool.performCleanup (ConnectionPool.java:307)
- locked <0x00d3f36d> (a com.android.okhttp.ConnectionPool)
  at com.android.okhttp.ConnectionPool.runCleanupUntilPoolIsEmpty (ConnectionPool.java:244)
  at com.android.okhttp.ConnectionPool.access$000 (ConnectionPool.java:54)
  at com.android.okhttp.ConnectionPool$1.run (ConnectionPool.java:98)
  at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1113)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:588)
  at java.lang.Thread.run (Thread.java:818)

"Okio Watchdog" tid=27 Waiting 
"Okio Watchdog" daemon prio=1 tid=27 Waiting
  | group="main" sCount=1 dsCount=0 obj=0x12e92100 self=0xab8d1ed8
  | sysTid=4537 nice=19 cgrp=bg_non_interactive sched=0/0 handle=0xddadb930
  | state=S schedstat=( 5212603 9715053 45 ) utm=0 stm=0 core=1 HZ=100
  | stack=0xdd9d9000-0xdd9db000 stackSize=1038KB
  | held mutexes=
  at java.lang.Object.wait! (Native method)
- waiting on <0x0f4e7b1c> (a java.lang.Class<com.android.okhttp.okio.AsyncTimeout>)
  at com.android.okhttp.okio.AsyncTimeout.awaitTimeout (AsyncTimeout.java:311)
- locked <0x0f4e7b1c> (a java.lang.Class<com.android.okhttp.okio.AsyncTimeout>)
  at com.android.okhttp.okio.AsyncTimeout.access$000 (AsyncTimeout.java:40)
  at com.android.okhttp.okio.AsyncTimeout$Watchdog.run (AsyncTimeout.java:286)

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2017-07-31

   [~hrfn] Could you provide a test case that reproduces the issue?</li>
<li>Hugo Ramos Freire Neto 2017-07-31

   I can not reproduce, only users of my app are complaining that the app closes. And I can see this crashes on ANR log.</li>
<li>Sharif AbuDarda 2017-08-18

   Hello, We need a sample code that reproduce the issue. Thanks.</li>
</ol>


<p><a href="/AC/AC-5108.json">JSON Source</a></p>