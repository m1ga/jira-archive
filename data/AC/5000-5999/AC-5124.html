---
title: "[AC-5124] Ti.WKWebView failed ajax"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2017-08-08T19:49:27.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Appcelerator Modules</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>hakaniemi</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2017-08-03T07:46:12.000+0000</td></tr>
<tr><th>Updated</th><td>2019-06-28T10:52:14.000+0000</td></tr>
</table>

<h3>Description</h3>

Ti.WKWebView failed with the code below. Ti.UI.WebView will work fine.

<code><pre>
html = '<!DOCTYPE html><html><head><title>Local HTML</title><script src="<a href="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" rel="nofollow" target="_blank">https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js</a>"></script></head><body>';
html += '<a href="javascript:void()" id="btn" style="font-size:50px;">Click</a>';
html += '<script>$("#btn").on("click", function () {$.ajax({url:"<a href="https://google.com" rel="nofollow" target="_blank">https://google.com</a>", cache:false, dataType:"html"}).done(function (json, textStatus, jqXHR) {alert(json)}).fail(function (jqXHR, textStatus, errorThrown) {alert(textStatus);});});</script>';
html += '</body></html>';
</pre></code>


<h3>Comments</h3>

<ol>
<li>Aminul Islam 2017-08-06

   Hello,
   Thanks for reaching us. Would you mind if I request more details about your problem? What version of TiSDK, iOS and Ti.WKWebView do you have?
   Do you have any error log?
   
   Regards,
   Aminul </li>
<li>Muhammad Ahmed Fahad 2019-06-21

   I am having the same problem when switching to Ti SDK 8.X.X
   
   WKWebView has replaced the UIWebview (i.e. Ti.UI.WebView is now WKWebView in Ti.SDK 8.X.X)
   
   I'm using Ti.SDK 8.0.2.GA
   
   Setting and loading html (as below) in webview should display an alert with data: {userId: 1, id: 1, title: "delectus aut autem", completed: false} which happens with Ti.SDK 7.X.X but not with 8.X.X
   
   html = '<!DOCTYPE html><html><head><title>Local HTML</title><script src="<a href="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" rel="nofollow" target="_blank">https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js</a>"></script></head><body>';
   html += '<a href="javascript:void()" id="btn" style="font-size:50px;">Click</a>';
   html += '<script>$("#btn").on("click", function () {$.ajax({url:"<a href="https://jsonplaceholder.typicode.com/todos/1" rel="nofollow" target="_blank">https://jsonplaceholder.typicode.com/todos/1</a>", cache:false, dataType:"html"}).done(function (json, textStatus, jqXHR) {alert(json)}).fail(function (jqXHR, textStatus, errorThrown) {alert(textStatus);});});</script>';
   html += '</body></html>';
   
   Please re-open this issue and please fix as soon as possible. This has been putting off my upgrade to 8.X.X for quite a long time.
   Or at least document on how a workaround can be implemented.</li>
<li>Rene Pot 2019-06-21

   Hi [~fahad86], is there a reason it needs to be AJAX and cannot be done internally with <a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.Network-method-createHTTPClient</li>
<li>Muhammad Ahmed Fahad 2019-06-24

   I make use of a webview based map which makes multiple calls to some APIs based on the panning of the user on the map. It would be very inefficient to have many bridge cross-overs.</li>
<li>Rene Pot 2019-06-24

   [~fahad86] could you provide reproducible code so we can test it? </li>
<li>Muhammad Ahmed Fahad 2019-06-25

   app.js
   <code><pre>
   // Some comments here
   public String getFoo()
   var window = Ti.UI.createWindow({
     width: Ti.UI.FILL,
     height: Ti.UI.FILL
   });
   
   var html = '<!DOCTYPE html><html><head><title>Local HTML</title><script src="<a href="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" rel="nofollow" target="_blank">https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js</a>"></script></head><body>';
   html += '<a href="javascript:void()" id="btn" style="font-size:50px;">Click</a>';
   html += '<script>$("#btn").on("click", function () {$.ajax({url:"<a href="https://jsonplaceholder.typicode.com/todos" rel="nofollow" target="_blank">https://jsonplaceholder.typicode.com/todos</a>", cache:false, dataType:"json"}).done(function (json, textStatus, jqXHR){alert(json)}).fail(function (jqXHR, textStatus, errorThrown){alert(textStatus);});});</script>';
   html += '</body></html>';
   
   window.add(Ti.UI.createWebView({
     html: html,
     width: Ti.UI.FILL,
     height: Ti.UI.FILL
   });
   
   window.open();
   </pre></code>
   
   You can try the above. It needs to output an alert with json data (You can paste this in a browser and check the expected output: <a href="https://jsonplaceholder.typicode.com/todos)" rel="nofollow" target="_blank">https://jsonplaceholder.typicode.com/todos)</a></li>
<li>Muhammad Ahmed Fahad 2019-06-28

   We no longer need this as adding CORS headers ('Access-Control-Allow-Origin': '*') to our API's on our server helped solve this issue for us.
   </li>
</ol>


<p><a href="/AC/AC-5124.json">JSON Source</a></p>