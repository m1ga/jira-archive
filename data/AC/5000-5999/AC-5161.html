---
title: "[AC-5161] Memory leak in Hello World application"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2017-10-17T19:55:26.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Alloy, Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>memoryleak</td></tr>
<tr><th>Reporter</th><td>Yahya Uddin</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2017-08-28T10:05:55.000+0000</td></tr>
<tr><th>Updated</th><td>2017-10-17T19:55:26.000+0000</td></tr>
</table>

<h3>Description</h3>

I have the following basic Titanium Alloy application:

*index.xml*
<code><pre>
    &lt;Alloy&gt;
    	&lt;Window class="container"&gt;
    		&lt;Label id="label" onClick="doClick"&gt;Hello, World&lt;/Label&gt;
    	&lt;/Window&gt;
    &lt;/Alloy&gt;
</pre></code>

*index.js*

<code><pre>
    function doClick(e) {
    	Alloy.createController('foo', {}).getView().open();
    }
    
    $.index.open();
</pre></code>

*foo.xml*

<code><pre>
    &lt;Alloy&gt;
    	&lt;Window&gt;
    		&lt;View class="container"&gt;
    			&lt;Label id="label"&gt;Some text in the foo controller!&lt;/Label&gt;
    		&lt;/View&gt;
    	&lt;/Window&gt;
    &lt;/Alloy&gt;
</pre></code>


*foo.js*

<code><pre>
    $.cleanup = function cleanup() {
      $.destroy();
      $.off();
      $.foo.removeEventListener('close', $.cleanup); // added per @Sharif AbuDarda suggestion
    };
    
    $.foo.addEventListener('close', $.cleanup);
</pre></code>

I then monitored the amount of memory the Android emulator was using DDMS, based on the instructions provided here: <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/guide/Managing_Memory_and_Finding_Leaks

When the application started the number of objects was: *32,188*

When I click the button, and then close the new window by pressing back, the number of objects increases to: *32,332*

I do this again, it increases to: *32,478*

Open and close the window about 8 more times, and it increases to: *34,481*

and so on.

The issue is even worse if the window has many objects.

Note I have tested this on both an Android Emulator (Nexus 4) and a real Android device (Samsung S6).
This issues seems to occur on *6.1.X GA*

NOTE: I have not yet tested this on iOS yet.

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2017-08-29

   Hello, The evidence you showed showing a little memory increase. This much is usually negligible. Also, remove any event in the window before closing window. Thanks.</li>
<li>Yahya Uddin 2017-08-29

   Note that removing the event listener did not seem to fix the issue</li>
</ol>


<p><a href="/AC/AC-5161.json">JSON Source</a></p>