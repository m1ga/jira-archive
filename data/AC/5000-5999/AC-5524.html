---
title: "[AC-5524] Hyperloop NSData question"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2018-01-17T08:41:13.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Hyperloop</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Michael Hay</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2018-01-16T19:47:14.000+0000</td></tr>
<tr><th>Updated</th><td>2018-01-17T08:41:14.000+0000</td></tr>
</table>

<h3>Description</h3>

The latest intecom module in hyperloop produces this configurations. I cant sent a string to it as its as it seems to require and NS data object and i'm sensing a String. Can i convert it?

Trying:
{{TiIntercom.setDeviceToken('f4cf7dd07dac7a35d6f8479129d9cb05e4dc6a3a087640025121d6dcd76dc8df');
}}
Error:
{{<Notice>: [ERROR] -[__NSCFString bytes]: unrecognized selector sent to instance 0x1c80ad1a0
<Notice>: [ERROR] TiIntercom ex: {"line":147,"column":26,"sourceURL":"file:///var/containers/Bundle/Application/E070E5ED-B942-4574-8FB1-B490282A1A82/Buildcloud.app/hyperloop/intercom/intercom.js","description":"-[__NSCFString bytes]: unrecognized selector sent to instance 0x1c80ad1a0","name":"NSInvalidArgumentException","nativeStack":"1   libobjc.A.dylib                     0x0000000180580528 objc_exception_throw + 56\134n2   CoreFoundation                      0x0000000181347828 <redacted> + 0\134n3   CoreFoundation                      0x000000018133fd10 <redacted> + 1380\134n4   CoreFoundation                      0x0000000181224ecc _CF_forwarding_prep_0 + 92\134n5   Buildcloud                          0x0000000100399874 _ZN7plcrash3BIT5async24dwarf_cfa_state_iteratorIyxE4nextEPjPNS1_28plcrash_dwarf_cfa_reg_rule_tEPy + 607308\134n6   Buildcloud                          0x000000010039993c _ZN7plcrash3BIT5async24dwarf_cfa_state_iteratorIyxE4nextEPjPNS1_28plcrash_dwarf_cfa_reg_rule_tEPy + 607508\134n7   Buildcloud              <\M-b\M^@\M-&>

}}



Form Hyperloop JSON:

{{"setDeviceToken:": {
          "arguments": [
            {
              "encoding": "@",
              "name": "deviceToken",
              "type": "objc_pointer",
              *"value": "NSData *"*
            }
          ],
          "encoding": "v24@0:8@16",
          "instance": false,
          "name": "setDeviceToken",
          "returns": {
            "encoding": "v",
            "type": "void",
            "value": "void"
          },
          "selector": "setDeviceToken:"
        },}}

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2018-01-17

   Hello [~hknoechel], please can you help here?! </li>
<li>Hans Kn√∂chel 2018-01-17

   You need to pass it as NSData, noch as a String, which is no Hyperloop related task but a general native programming one. [Here](<a href="https://stackoverflow.com/a/26346543)" rel="nofollow" target="_blank">https://stackoverflow.com/a/26346543)</a> is an example of converting it from Swift - should be adoptable by Hyperloop.
   
   The other way would be to actually subscribe to the native <code>application: didRegisterForRemoteNotificationsWithDeviceToken:</code> selector that can be accessed from Hyperloop and native modules starting in 7.1.0 and later.</li>
</ol>


<p><a href="/AC/AC-5524.json">JSON Source</a></p>