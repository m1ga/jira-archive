---
title: "[AC-5744] iOS: Requesting permissions to open gallery will not allow gallery to open."
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2018-05-21T09:01:05.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>ios</td></tr>
<tr><th>Reporter</th><td>Joshua A. Ceaser</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2018-05-20T22:46:05.000+0000</td></tr>
<tr><th>Updated</th><td>2018-05-21T14:33:40.000+0000</td></tr>
</table>

<h3>Description</h3>

When requesting gallery permissions, after accepting permissions the gallery does not open.
 
Steps to reproduce:
1. Create a sample application
2. Update the index.js with the attached
3. Update the alloy.js with the attached to force splashscreen as snapshot.
4. Update the tiapp.xml with the NSPhotoLibraryUsageDescription and NSPhotoLibraryAddUsageDescription key in the attached tiapp.xml
5. Run the application and click on "Hello World"
6. Accept permissions
7. Notice nothing happens.

index.js
<code><pre>
var win = Ti.UI.createWindow({
    backgroundColor: '#fff'
});
 
function doClick(e) {
	var _galleryOptions = {
		allowEditing : false,
		allowMultiple : false,
		autohide : true,
		mediaTypes : [Ti.Media.MEDIA_TYPE_PHOTO]
	};

	if (Ti.Media.hasPhotoGalleryPermissions()) {
		Ti.Media.openPhotoGallery(_galleryOptions);
	} else {
		Ti.Media.requestPhotoGalleryPermissions(function(_evt) {
			if (_evt.success) {
				Ti.Media.openPhotoGallery(_galleryOptions);
			} else {
				alert('We need gallery permissions');
			}
		});
	}
}
 
 
var btn = Ti.UI.createButton({
    title: 'Trigger'
});
 
btn.addEventListener('click', doClick);
 
win.add(btn);
 
win.open();
</pre></code>

tiapp.xml
<code><pre>
&lt;key&gt;NSPhotoLibraryUsageDescription&lt;/key&gt;
                &lt;string&gt;To allow you to upload photos of documents&lt;/string&gt;
                &lt;key&gt;NSPhotoLibraryAddUsageDescription&lt;/key&gt;
                &lt;string&gt;To allow you to upload photos of documents&lt;/string&gt;
</pre></code>

alloy.js
<code><pre>
Ti.App.forceSplashAsSnapshot = true
</pre></code>



<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2018-05-21

   Works fine here (both with main- and kroll-thread). Try to reinstall your app or reach out to the community via Slack or Stackoverflow for more questions.</li>
<li>Joshua A. Ceaser 2018-05-21

   I left out the forceSplashAsSnapshot must be set to true.</li>
<li>Hans Knöchel 2018-05-21

   Thats a very important detail, hehe. In that case, it is a duplicate of TIMOB-26047 which already has a fix in place that you can use today. Cheers!</li>
</ol>


<p><a href="/AC/AC-5744.json">JSON Source</a></p>