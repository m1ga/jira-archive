---
title: "[AC-6012] requestAD failure in Alloy"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2018-11-29T23:54:32.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Appcelerator Studio 4.3.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Appcelerator Modules</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>alejandro_capel</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2018-11-07T06:22:00.000+0000</td></tr>
<tr><th>Updated</th><td>2018-11-29T23:54:33.000+0000</td></tr>
</table>

<h3>Description</h3>

Hi,

I'm trying use the admod module in android alloy app and I'm taking an issue. (No problem in IOS with same code).

This is my error code:

ERROR] :  TiExceptionHandler: (main) [75,2102] /alloy/controllers/home.js:957
[ERROR] :  TiExceptionHandler:     $.containerAdmod.requestAd();
[ERROR] :  TiExceptionHandler:                      ^
[ERROR] :  TiExceptionHandler: Error: Attempt to invoke virtual method 'void ti.admob.View.requestAd(org.appcelerator.kroll.KrollDict)' on a null object reference


I´m not sure what is the problem.Please can you help me? I think is a problem how I'm using this module in alloy but I'm not sure. I have searching in google but i couldn´t find a sample with this implementation.

Thanks in advance!

Regards.


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-6012_65849/build_android.log">build_android.log</td></td><td>2018-11-13T06:28:05.000+0000</td><td>873734</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-6012_65857/error admod.jpg">error admod.jpg</td></td><td>2018-11-14T19:43:47.000+0000</td><td>83066</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-6012_65864/error alloy in device.rtf">error alloy in device.rtf</td></td><td>2018-11-15T19:38:07.000+0000</td><td>65896</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-6012_65859/Screenshot_20181115-111548.png">Screenshot_20181115-111548.png</td></td><td>2018-11-15T05:29:26.000+0000</td><td>48653</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-6012_65856/test admod alloy.zip">test admod alloy.zip</td></td><td>2018-11-14T19:43:31.000+0000</td><td>1639216</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>alejandro_capel 2018-11-11

   Please, any sample with admob module using alloy in android?
   
   Thanks!!!</li>
<li>Rakhi Mitro 2018-11-12

   Hello,
   
   Thanks for your feedback. Are you using studio 4.3.0? Can you try [this](<a href="https://github.com/appcelerator-modules/ti.admob/tree/master/android/example)" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.admob/tree/master/android/example)</a> one on android classic ? If it works for you on android, please convert this code to alloy.
   
   </li>
<li>alejandro_capel 2018-11-12

   Hi,
   
   Yes, Sure. I tested in classic and it was sucesfully. No problem with ios alloy environemt. The Problem is when a call to method requestAd() for recovering the view. If I don´t use this method in code there is no error but obviously app doen´t show the admod view. 
   
   Please, i have been searching in google but I couldn´t find a sample of using this component with Alloy in Android. Do you have any sample?. It´s a pity in sample component there is not a sample code.
   
   Thanks in advance.
   
   </li>
<li>Rakhi Mitro 2018-11-13

   Hello,
   Thanks for your feedback. Can you please share your complete environment details and console logs on a separate text file here? Need to check that.
   
   </li>
<li>alejandro_capel 2018-11-13

    [^build_android.log] 
   
   home.xml :
   
   <Alloy>
   	<Window id="window" title="items">
   		<View id="container">
   			<TextField id="search_textfield" />    		
   			<ImageView id="search_icon" />
   	    	<ScrollView id="lists_container" zIndex="100">
   				<Require src="views/list_static_cell" id="searchCell" />
   				<Require src="views/list_static_cell" id="aboutCell" />
   				<Require src="views/list_static_cell" id="settingsCell" />
   	    	</ScrollView>
   	    	<View id="search_overlay" zIndex="0" />
   	    	<ActivityIndicator id="activity_indicator" />
   		
   		   <View id="containerAdmod" />
   		</View>
   
   	</Window>
   </Alloy>
   
   
   home.tss:
   
   "#window": {
   	backgroundColor:"black",
   	extendEdges: Titanium.UI.EXTEND_EDGE_TOP,
   	navBarHidden: true,
   	orientationModes: [Ti.UI.PORTRAIT]
   }
   
   "#window[platform=android]": {
   	exitOnClose: true
   }
   
   "#container": {
   	top: -70,
   	left: 0,
   	width: Ti.UI.FILL,
   	height: Alloy.Globals.TamanoVentana
   }
   
   
   "#containerAdmod": {
   	top: Alloy.Globals.TopAdmod,
   	left: 0,
   	width: Ti.UI.FILL,
   	height: Alloy.Globals.TamanoAdmod
   }
   
   etc...
   
   home.js (important code..):
   
   
   function init() {
   
         PutAdmod(0);
    
   	configureStaticCells();
   	Clasic(sound);
   
    
   	getConfig();
    
   	getLists();
    
   	// not required when loading local data
   	 $.activity_indicator.show();
    
   	if (OS_IOS) {
   		$.navbar.back_button.hide();
   	}
    
   	if (OS_ANDROID) {
   		$.window.addEventListener('open', function(e){
   			$.search_textfield.hide();
   		});
   	}
   }
   init();
   
   //PutAdmod function
   
   function PutAdmod( value)
   {
   
   Ti.API.info('start  admod ...');
      	
   
    _publisherid = 'ca-app-pub-22222.......';
   
   
   var Admob = require('ti.admob');
   
   
   var adView = Admob.createView({
   		     bottom: value, 
   		     left: 0,
   		     width: PosicionarAncho(99),
   		     height: PosicionarAlto(10),
                debugEnabled: false, // If enabled, a dummy value for <code>adUnitId</code> will be used to test
                adType: Admob.AD_TYPE_BANNER,
   		     adUnitId: _publisherid, // You can get your own at http: //www.admob.com/
                contentURL: '<a href="http://www.alexcmobile.com" rel="nofollow" target="_blank">http://www.alexcmobile.com</a>', // URL string for a webpage whose content matches the app content.
   		     adBackgroundColor: 'transparent',
                gender: Admob.GENDER_MALE, // GENDER_MALE or GENDER_FEMALE, default: undefined
                keywords: ['Mythology', 'Gods']	
   });
   
   adView.addEventListener(Admob.AD_RECEIVED, function() {
   	Ti.API.info('Did receive ad!');
   });
   adView.addEventListener(Admob.AD_NOT_RECEIVED, function(e) {
   	Ti.API.info('Failed to receive ad: ' + e.error);
   });
   
   //here the error
   adMobView.requestAd();
   $.containerAdmod.add(adView);
   
   }
   
   </li>
<li>Rakhi Mitro 2018-11-13

   Thanks for your feedback. We checked your file. Unable to find any error message. Can you please double check?</li>
<li>alejandro_capel 2018-11-13

   Hi again,
   
   Yes, the error doesn't write in log file. It´s happens in runtime.  I'm not sure this one is due to using Alloy. The error is right here: adMobView.requestAd() . As you can see, Alloy's view has not yet been opened, which is just the next line in the code  -> $.containerAdmod.add(adView);
   
   What is the meaning of this error?
   [ERROR] : TiExceptionHandler: Error: Attempt to invoke virtual method 'void ti.admob.View.requestAd(org.appcelerator.kroll.KrollDict)' on a null object reference .
   
   its seems the poblem comes with View, rigth?
   
   Thanks.</li>
<li>Rakhi Mitro 2018-11-14

   Hello,
   Thanks for your feedback. Please share your full test project here to reproduce the issue on our end.</li>
<li>alejandro_capel 2018-11-14

   OK. I send u a custom project with alloy functionality. In another file , the error in emulator.
   
   Please let me know any question.
   
   Thanks in advance.</li>
<li>Rakhi Mitro 2018-11-15

    [~alexcc],
    
    Thanks for your feedback. Tested your issue and its works as expected on android device. See attachment section for output. Download the sample test project from [here](<a href="https://www.dropbox.com/s/bhpkvt4vi8gvu58/testAlloy.zip?dl=0)" rel="nofollow" target="_blank">https://www.dropbox.com/s/bhpkvt4vi8gvu58/testAlloy.zip?dl=0)</a>,run on your environment and let us know how it goes.</li>
<li>alejandro_capel 2018-11-15

    Hi Rakhi,
    
    I have loaded your program in device and I have the error however now I have a very large trace.  [^error alloy in device.rtf]  
    
    Its seems the reason is :
    
    [INFO] :   zygote64: Caused by: java.lang.ClassNotFoundException: Didn't find class "android.webkit.TracingController" on path: DexPathList[[zip file "/data/app/com.android.chrome-PijQzE41jAPf1Jo6KRDwGg==/base.apk"],nativeLibraryDirectories=[/data/app/com.android.chrome-PijQzE41jAPf1Jo6KRDwGg==/lib/arm64, /data/app/com.android.chrome-PijQzE41jAPf1Jo6KRDwGg==/base.apk!/lib/arm64-v8a, /system/lib64, /system/vendor/lib64]]
    [INFO
    
    Can you have a look ,please?
    
    thanks</li>
<li>Sharif AbuDarda 2018-11-16

    Hello, Can you share the "appc ti setup check" log in here? Thanks.</li>
</ol>


<p><a href="/AC/AC-6012.json">JSON Source</a></p>