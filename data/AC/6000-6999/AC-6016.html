---
title: "[AC-6016] Issue with ApplicationContext by usage of 3-party library (leica) "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2018-11-08T23:30:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>3-Party</td></tr>
<tr><th>Reporter</th><td>Rainer Schleevoigt</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2018-11-08T10:26:00.000+0000</td></tr>
<tr><th>Updated</th><td>2018-11-08T23:30:24.000+0000</td></tr>
</table>

<h3>Description</h3>

I try to build an Android module for (BT-) communicating with devices.
In the demo app of the manufacture this pattern will used:

<code><pre>
public class myActivity extends Activity implements
		DeviceManager.FoundAvailableDeviceListener {
        @Override
	public void onAvailableDeviceFound(final Device device) {
		Log.i(LCAT, "Model: " + device.getModel() + " Name: "+ device.getDeviceName());
	}
        void findAvailableDevices() {
              deviceManager.setFoundAvailableDeviceListener(this);
             deviceManager.findAvailableDevices(getApplicationContext());
         }
} 
</pre></code>

This works in activity (as aspected). If I try to build this pattern in KrollProxy, the internal class DeviceManager detects the device with all properties but later during Device instantiating the app crashes because of null reference. The only difference to original code is that  we use the KrollProxy. For <code>getApplicationContext()</code> I'm using <code>TiApplication.getInstance().getApplicationContext()</code>. I have played with thread messaging and getbaseContext(), but nothing helps.

The manufactor don't feel responsible for Titanium framework ... 

Any clue? 

Here my KrollProxy: <a href="https://gist.github.com/AppWerft/40e88c86ee87d0fb2481b6eb5a2603f6" rel="nofollow" target="_blank">https://gist.github.com/AppWerft/40e88c86ee87d0fb2481b6eb5a2603f6</a>
Here the original: <a href="https://gist.github.com/AppWerft/de0c36b720d4cd180db71efee341d444" rel="nofollow" target="_blank">https://gist.github.com/AppWerft/de0c36b720d4cd180db71efee341d444</a>

<h3>Comments</h3>

<ol>
<li>Rainer Schleevoigt 2018-11-08

   It is solved, was a problem with closed cource and a "bug"</li>
</ol>


<p><a href="/AC/AC-6016.json">JSON Source</a></p>