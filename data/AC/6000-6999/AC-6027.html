---
title: "[AC-6027] Android P 9.0 commonjs module error"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2018-12-02T22:20:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Appcelerator Studio 4.5.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Alloy</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>David Penney</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2018-11-20T17:07:48.000+0000</td></tr>
<tr><th>Updated</th><td>2018-12-02T22:20:25.000+0000</td></tr>
</table>

<h3>Description</h3>

Packaging for Android and Testing on Pixel 2 Android P 9.0

In my alloy.js file i've linked to a commonjs file

//alloy.js
var dpi = require('/ui/dpi');
//as this method is call before the index page open it causes the app to not load
Alloy.CFG.borderWidth = dpi.dipUnitsToPixels(6);


//dpi.js
exports.dipUnitsToPixels = function(dipUnits) {
	var DENSITY_SMALL_LDPI = 120;
	var DENSITY_BASELINE_MDPI = 160;
	var DENSITY_HIGH_HDPI = 240;
	var DENSITY_EXTRA_HIGH_XHDPI = 320;
	var ret;


	switch (Ti.Platform.displayCaps.dpi) {
		case DENSITY_SMALL_LDPI:
			ret = (dipUnits * (Ti.Platform.displayCaps.dpi / DENSITY_SMALL_LDPI));
			break;

		case DENSITY_BASELINE_MDPI:
			ret = (dipUnits * (Ti.Platform.displayCaps.dpi / DENSITY_BASELINE_MDPI));
			break;

		case DENSITY_HIGH_HDPI:
			ret = (dipUnits * (Ti.Platform.displayCaps.dpi / DENSITY_HIGH_HDPI));
			break;

		case DENSITY_EXTRA_HIGH_XHDPI:
			ret = (dipUnits * (Ti.Platform.displayCaps.dpi / DENSITY_EXTRA_HIGH_XHDPI));
			break;

		default:
			ret = dipUnits;
	}

	return ret;
};





<h3>Comments</h3>

<ol>
<li>Rene Pot 2018-11-22

   Hi! What error are you experiencing exactly?</li>
<li>Rakhi Mitro 2018-11-28

   [~dpenney],
   
   Can you please share more information about the issue you are experiencing? It would be helpful if you provide error logs, screenshot which displays the issue properly.
   Thanks</li>
</ol>


<p><a href="/AC/AC-6027.json">JSON Source</a></p>