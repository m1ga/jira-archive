---
title: "[AC-6245] iOS: Firebase Cloud Messaging Token Fetching Error (embedded.mobileprovision couldn't be opened)"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2019-06-10T23:42:20.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Kai Lu</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2019-05-09T00:44:31.000+0000</td></tr>
<tr><th>Updated</th><td>2019-06-10T23:42:20.000+0000</td></tr>
</table>

<h3>Description</h3>

The problem is that when I test the app by deploying directly to my device I was able to get the firebase cloud messaging token but when I test it in the TestFlight I don't see the fcmToken and got this error:


<code><pre>
May  9 09:44:32 iKone WorkZone[346] &lt;Notice&gt;: 6.0.0 - [Firebase/InstanceID][I-IID003014] Error while reading embedded mobileprovision Error Domain=NSCocoaErrorDomain Code=260 "The file \M-b\M^@\M^\embedded.mobileprovision\M-b\M^@\M^] couldn\M-b\M^@\M^Yt be opened because there is no such file." UserInfo={NSFilePath=/var/containers/Bundle/Application/26B2725F-4413-4C1B-83B0-511AD5D46260/WorkZone.app/embedded.mobileprovision, NSUnderlyingError=0x2827e63a0 {Error Domain=NSPOSIXErrorDomain Code=2 "No such file or directory"}}
</pre></code>

I found similar issue here with phoneGap:
<a href="https://github.com/arnesson/cordova-plugin-firebase/issues/981" rel="nofollow" target="_blank">https://github.com/arnesson/cordova-plugin-firebase/issues/981</a>

They suggest it is a problem with the new build system.
"I had the same problem and it seems to be caused by the fact that your project/workspace is build using the new build system instead of the legacy one.

See for example following comment how to change this setting:
<a href="https://github.com/apache/cordova-ios/issues/412" rel="nofollow" target="_blank">https://github.com/apache/cordova-ios/issues/412</a>"

Upon digging into Titanium's build script (/7.5.0.GA/iphone/cli/commands/_build.js), I found the blacklist and comment suggests if I remove it from the list my app will be rejected to the app store.

       {color:red} // blacklisted files and directories that throw an error when used and will
	// lead to a rejection when submitted{color}
	this.blacklistDirectories = [
		'contents',
		'resources',
		'plugins',
		'watch',
		'_codesignature',
		{color:red}'embedded.mobileprovision',{color}
		'info.plist',
		'pkginfo',
		'assets.car',
		'modules',
		'LaunchScreen.storyboardc',
		'hyperloop'
	];

Please advise the best way to resolve this issue.

Thanks!



<h3>Comments</h3>

<ol>
<li>Kai Lu 2019-05-09

   OK, it turns out the error has nothing to do with the cloud messaging function.
   
   Please feel free to close the ticket.
   
   But I am still curious about why this error occurs and how should we do about it?</li>
</ol>


<p><a href="/AC/AC-6245.json">JSON Source</a></p>