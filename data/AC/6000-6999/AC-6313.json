{
	"id": "173901",
	"key": "AC-6313",
	"fields": {
		"issuetype": {
			"id": "1",
			"description": "A problem which impairs or prevents the functions of the product.",
			"name": "Bug",
			"subtask": false
		},
		"project": {
			"id": "12217",
			"key": "AC",
			"name": "Appcelerator - INBOX",
			"projectCategory": {
				"id": "10000",
				"description": "",
				"name": "Customer Service"
			}
		},
		"resolution": null,
		"resolutiondate": null,
		"created": "2019-07-19T10:32:38.000+0000",
		"labels": [
			"module",
			"urlsession"
		],
		"versions": [],
		"issuelinks": [],
		"assignee": {
			"name": "shossain",
			"key": "shossain",
			"displayName": "Shak Hossain",
			"active": false,
			"timeZone": "America/Los_Angeles"
		},
		"updated": "2019-11-14T15:46:51.000+0000",
		"status": {
			"description": "The issue is open and ready for the assignee to start work on it.",
			"name": "Open",
			"id": "1",
			"statusCategory": {
				"id": 2,
				"key": "new",
				"colorName": "blue-gray",
				"name": "To Do"
			}
		},
		"components": [
			{
				"id": "14550",
				"name": "Appcelerator Modules",
				"description": "Please enter tickets related to Modules here."
			}
		],
		"description": "my app uses ti.urlsession v2.2.0 and it crashes while downloading in the background after a short period (30s) with this log:\r\n\r\nForcing crash report with description: APPNAME:500 has active assertions beyond permitted time:\r\n<BKProcessAssertion: 0x1667c110; \"com.apple.nsurlsessiond.handlesession SESSIONID\" (backgroundDownload:30s); id:…7E20D91FE98F> (owner: nsurlsessiond:111)\r\n\r\nthe method \"backgroundSessionConfiguration\" is deprecated according to: \r\nhttps://developer.apple.com/documentation/foundation/urlsessionconfiguration\r\nis the module ti.urlSession still up to date?",
		"attachment": [
			{
				"id": "66867",
				"filename": "testurlsession2.zip",
				"author": {
					"name": "Alexander Baars",
					"key": "alexander baars",
					"displayName": "Alexander",
					"active": true,
					"timeZone": "Europe/Amsterdam"
				},
				"created": "2019-08-22T10:48:21.000+0000",
				"size": 8644111,
				"mimeType": "application/zip"
			}
		],
		"flagged": false,
		"summary": "Ti.urlSession outdated",
		"creator": {
			"name": "Alexander Baars",
			"key": "alexander baars",
			"displayName": "Alexander",
			"active": true,
			"timeZone": "Europe/Amsterdam"
		},
		"subtasks": [],
		"reporter": {
			"name": "Alexander Baars",
			"key": "alexander baars",
			"displayName": "Alexander",
			"active": true,
			"timeZone": "Europe/Amsterdam"
		},
		"environment": "I use the CLI\r\n\r\nOperating System\r\n  Name                        = Mac OS X\r\n  Version                     = 10.14.5\r\n  Architecture                = 64bit\r\n  # CPUs                      = 8\r\n  Memory                      = 16.0GB\r\n\r\nNode.js\r\n  Node.js Version             = 11.6.0\r\n  npm Version                 = 6.9.0\r\n\r\nAppcelerator CLI\r\n  Installer                   = 4.2.13\r\n  Core Package                = 7.0.12\r\n\r\nTitanium CLI\r\n  CLI Version                 = 5.1.1\r\n  node-appc Version           = 0.2.44\r\n\r\nTitanium SDKs\r\n  8.0.2.GA\r\n    Version                   = 8.0.2\r\n    Install Location          = /Users/alexander/Library/Application Support/Titanium/mobilesdk/osx/8.0.2.GA\r\n    Platforms                 = iphone, android\r\n    git Hash                  = a12da5b9ce\r\n    git Timestamp             = unknown\r\n    node-appc Version         = 0.2.47\r\n  8.0.1.GA\r\n    Version                   = 8.0.1\r\n    Install Location          = /Users/alexander/Library/Application Support/Titanium/mobilesdk/osx/8.0.1.GA\r\n    Platforms                 = iphone, android\r\n    git Hash                  = c4f6f25c7d\r\n    git Timestamp             = unknown\r\n    node-appc Version         = 0.2.47\r\n",
		"comment": {
			"comments": [
				{
					"id": "449981",
					"author": {
						"name": "rmitro",
						"key": "rmitro",
						"displayName": "Rakhi Mitro",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Hello [~Alexander Baars],\r\nThanks for reaching out to us. It would be great if you can share a sample test code and complete console logs which will be helpful reproduce the issue on our end.",
					"updateAuthor": {
						"name": "rmitro",
						"key": "rmitro",
						"displayName": "Rakhi Mitro",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2019-07-22T09:29:27.000+0000",
					"updated": "2019-07-22T09:29:27.000+0000"
				},
				{
					"id": "450337",
					"author": {
						"name": "rmitro",
						"key": "rmitro",
						"displayName": "Rakhi Mitro",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Hello!\r\n\r\nHope you are doing fine today.\r\nWould you please reply us regarding previous reviews? We are looking forward to your response.\r\n\r\n\r\n",
					"updateAuthor": {
						"name": "rmitro",
						"key": "rmitro",
						"displayName": "Rakhi Mitro",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2019-08-08T09:02:03.000+0000",
					"updated": "2019-08-08T09:02:03.000+0000"
				},
				{
					"id": "450714",
					"author": {
						"name": "Alexander Baars",
						"key": "alexander baars",
						"displayName": "Alexander",
						"active": true,
						"timeZone": "Europe/Amsterdam"
					},
					"body": "Hello,\r\n\r\nI created a test app with the sample from the urlsession module. (added)\r\nThe sample is slightly unfinished. Some logging renders undefined, the localnotification registration is missing.\r\nI changed the images downloads for (larger) audio files for test purposes.\r\n\r\nSteps to reproduce:\r\nIf a download is started from the rightnav button and the app is pushed to the background subsequently, before de download finishes, this happens:\r\nThe app finishes the download and saves the file.\r\nAfterwards the app is killed by the OS after a background permission expiration warning.\r\n\r\nBesides that, I never get a backgroundfetch trigger. If I use xCode to fake one the app continues working. The \"Simulate Background Fetch\" in Xcode triggers a backgroundTransfer event (not backgroundFetch).\r\nThe background permission expiration warning is followed by:\r\nActive assertions exist beyond permitted time, but process is being debugged;\r\n\r\nLogging:\r\n\r\n12:42:58.098141 +0200    0    [testurlsession2:14622] Sending background permission expiration warning!    62    com.apple.assertiond    assertiond\r\n12:43:03.095284 +0200    0    [testurlsession2:14622] Forcing crash report with description: testurlsession2:14622 has active assertions beyond permitted time: \r\n<BKProcessAssertion: 0x101162e50; \"com.apple.nsurlsessiond.handlesession download.by.button\" (backgroundDownload:30s); id:…513B75AEF30C> (owner: nsurlsessiond:94)    62    com.apple.assertiond    assertiond\r\n12:43:03.099421 +0200    0    [testurlsession2:14622] Finished crash reporting.    62    com.apple.assertiond    assertiond\r\n12:43:03.107254 +0200    0    Connection removed: IOHIDEventSystemConnection uuid:027E530D-FB2C-46A3-B66A-562C3965652D pid:14622 process:testurlsession2 type:Passive entitlements:0x0 caller:BackBoardServices: <redacted> + 364 attributes:<CFBasicHash 0x105d1d360 [0x105b00010]>{type = immutable dict, count = 3,\r\nentries =>\r\n    0 : <CFString 0x105a6dab0 [0x225829430]>{contents = \"pid\"} = <CFNumber 0x987e988d7734fca5 [0x225829430]>{value = +14622, type = kCFNumberSInt64Type}\r\n    1 : <CFString 0x105a41730 [0x225829430]>{contents = \"bundleID\"} = <CFString 0x105a80120 [0x225829430]>{contents = \"nl.alexanderbaars.testurlsession2\"}\r\n    2 : <CFString 0x105a09d00 [0x225829430]>{contents = \"HighFrequency\"} = <CFBoolean 0x22582eff8 [0x225829430]>{value = false}\r\n}\r\n inactive:0    56    com.apple.iohid    backboardd\r\n12:43:03.107472 +0200    0    105: { \"action\":\"client_died\", \"session\":{\"ID\":\"0x20f04\",\"PID\":14622,\"name\":\"testurlsession2\"}, \"details\":null }    26    com.apple.coreaudio    mediaserverd\r\n12:43:03.108810 +0200    0    [testurlsession2:14622] dump assertions count:1 HWM:3 (CPUMON check): {\r\n    <BKProcessAssertion: 0x101162e50; \"com.apple.nsurlsessiond.handlesession download.by.button\" (backgroundDownload:30s); id:…513B75AEF30C> [active]\r\n}    62    com.apple.assertiond    assertiond\r\n\r\n[...]\r\n\r\n12:43:03.528292 +0200    0    [testurlsession2:14622] Invalidating...    62    com.apple.assertiond    assertiond\r\n12:43:03.529248 +0200    0    Releasing PowerAssertion on testurlsession2:14622 from invalidate    62    com.apple.assertiond    assertiond\r\n12:43:03.529593 +0200    0    Process assertiond.62 Released SystemIsActive \"testurlsession2:14622:94-BCCFAA61-52ED-4CAC-A76D-513B75AEF30C [com.apple.nsurlsessiond.handlesession download.by.button] [0x101162e50]\" age:00:00:31  id:51539649274 [System: SysAct]    35    powerd    powerd\r\n12:43:03.730556 +0200    0    [testurlsession2:14622] Got exit context: <BKSProcessExitContext: 0x101038080; reason: (none)>    62    com.apple.assertiond    assertiond\r\n12:43:03.731755 +0200    0    <FBApplicationProcess: 0x10cfe1ae0; testurlsession2 (nl.alexanderbaars.testurlsession2); pid: 14622> assertiond says the process actually exited with context: <BKSProcessExitContext: 0x281031a80; reason: (none)>    52    com.apple.FrontBoard    SpringBoard\r\n12:43:03.732738 +0200    0    <FBApplicationProcess: 0x10cfe1ae0; testurlsession2 (nl.alexanderbaars.testurlsession2); pid: 14622> exited.    52    com.apple.FrontBoard    SpringBoard\r\n12:43:03.733393 +0200    0    Removing: <FBApplicationProcess: 0x10cfe1ae0; testurlsession2 (nl.alexanderbaars.testurlsession2); pid: 14622>    52    com.apple.FrontBoard    SpringBoard\r\n12:43:03.736165 +0200    0    Process exited: <FBApplicationProcess: 0x10cfe1ae0; testurlsession2 (nl.alexanderbaars.testurlsession2); pid: -1> -> <FBApplicationProcessExitContext: 0x281cdd500; exitReason: (none); terminationReason: (none)> {    stateAtExit = <FBProcessState: 0x281271860; pid: 14622; taskState: Not Running; visibility: Unknown>;\r\n}    52    com.apple.FrontBoard.workspace    SpringBoard\r\n",
					"updateAuthor": {
						"name": "Alexander Baars",
						"key": "alexander baars",
						"displayName": "Alexander",
						"active": true,
						"timeZone": "Europe/Amsterdam"
					},
					"created": "2019-08-22T11:10:40.000+0000",
					"updated": "2019-08-22T11:10:40.000+0000"
				},
				{
					"id": "451285",
					"author": {
						"name": "Alexander Baars",
						"key": "alexander baars",
						"displayName": "Alexander",
						"active": true,
						"timeZone": "Europe/Amsterdam"
					},
					"body": "any comments?",
					"updateAuthor": {
						"name": "Alexander Baars",
						"key": "alexander baars",
						"displayName": "Alexander",
						"active": true,
						"timeZone": "Europe/Amsterdam"
					},
					"created": "2019-09-11T09:15:08.000+0000",
					"updated": "2019-09-11T09:15:08.000+0000"
				},
				{
					"id": "451429",
					"author": {
						"name": "rmitro",
						"key": "rmitro",
						"displayName": "Rakhi Mitro",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"body": "[~Alexander Baars],\r\nDid you manage to test this on 8.1.1.GA and let us know the results.",
					"updateAuthor": {
						"name": "rmitro",
						"key": "rmitro",
						"displayName": "Rakhi Mitro",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2019-09-17T11:25:22.000+0000",
					"updated": "2019-09-17T11:25:22.000+0000"
				},
				{
					"id": "452291",
					"author": {
						"name": "Alexander Baars",
						"key": "alexander baars",
						"displayName": "Alexander",
						"active": true,
						"timeZone": "Europe/Amsterdam"
					},
					"body": "i did test it on 8.1.1.GA and 8.2.0.GA both result in the same issue.\r\nWhile downloading push the app to the background, the download finishes but app crashes right after.",
					"updateAuthor": {
						"name": "Alexander Baars",
						"key": "alexander baars",
						"displayName": "Alexander",
						"active": true,
						"timeZone": "Europe/Amsterdam"
					},
					"created": "2019-10-28T14:44:30.000+0000",
					"updated": "2019-10-28T14:44:30.000+0000"
				},
				{
					"id": "452683",
					"author": {
						"name": "Alexander Baars",
						"key": "alexander baars",
						"displayName": "Alexander",
						"active": true,
						"timeZone": "Europe/Amsterdam"
					},
					"body": "Do you have a solution for my problem?\r\n\r\nregards,\r\n\r\nAlexander Baars",
					"updateAuthor": {
						"name": "Alexander Baars",
						"key": "alexander baars",
						"displayName": "Alexander",
						"active": true,
						"timeZone": "Europe/Amsterdam"
					},
					"created": "2019-11-14T15:46:51.000+0000",
					"updated": "2019-11-14T15:46:51.000+0000"
				}
			],
			"maxResults": 7,
			"total": 7,
			"startAt": 0
		}
	}
}