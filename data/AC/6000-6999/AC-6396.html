---
title: "[AC-6396] iOS: JavascriptCore app crash"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Alloy, Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Jonas Funk Johannessen</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2019-10-08T10:50:26.000+0000</td></tr>
<tr><th>Updated</th><td>2021-08-07T16:14:43.000+0000</td></tr>
</table>

<h3>Description</h3>

We have just release our first version with SDK 8 (8.1.0.GA), updating from 7.5.1.GA. 
We have experienced a significant increase in JavascriptCore crashes with the new version – with no code changed. Going from 0-1 crashes a day to 400 a day. Below is the crash we are seeing. It is not reproducible, so it is difficult for us to provide a test case. 


<code><pre>
Crashed: Heap Helper Thread
0  JavaScriptCore                 0x1cf7875e0 JSC::SlotVisitor::drain(WTF::MonotonicTime)::$_3::operator()(JSC::MarkStackArray&) const + 328
1  JavaScriptCore                 0x1cf7875bc JSC::SlotVisitor::drain(WTF::MonotonicTime)::$_3::operator()(JSC::MarkStackArray&) const + 292
2  JavaScriptCore                 0x1cf7848f8 JSC::SlotVisitor::drain(WTF::MonotonicTime) + 144
3  JavaScriptCore                 0x1cf785138 JSC::SlotVisitor::drainFromShared(JSC::SlotVisitor::SharedDrainMode, WTF::MonotonicTime) + 580
4  JavaScriptCore                 0x1cf767fe4 WTF::SharedTaskFunctor&lt;void (), JSC::Heap::runBeginPhase(JSC::GCConductor)::$_18&gt;::run() + 172
5  JavaScriptCore                 0x1cf10f0e8 WTF::ParallelHelperClient::runTask(WTF::RefPtr&lt;WTF::SharedTask&lt;void ()&gt;, WTF::DumbPtrTraits&lt;WTF::SharedTask&lt;void ()&gt; &gt; &gt; const&) + 52
6  JavaScriptCore                 0x1cf10fbc0 WTF::ParallelHelperPool::Thread::work() + 28
7  JavaScriptCore                 0x1cf0e4784 WTF::Function&lt;void ()&gt;::CallableWrapper&lt;WTF::AutomaticThread::start(WTF::AbstractLocker const&)::$_0&gt;::call() + 372
8  JavaScriptCore                 0x1cf127b30 WTF::Thread::entryPoint(WTF::Thread::NewThreadContext*) + 260
9  JavaScriptCore                 0x1cf12903c WTF::wtfThreadEntryPoint(void*) + 12
10 libsystem_pthread.dylib        0x1c7b612c0 _pthread_body + 128
11 libsystem_pthread.dylib        0x1c7b61220 _pthread_start + 44
12 libsystem_pthread.dylib        0x1c7b64cdc thread_start + 4 
</pre></code>


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-6396_67020/2019-10-08_10-30-40.5371_+0200-fcfbcd6adc465691bd86896bef1e1392ccc071b5.crash">2019-10-08_10-30-40.5371_+0200-fcfbcd6adc465691bd86896bef1e1392ccc071b5.crash</td></td><td>2019-10-08T11:51:14.000+0000</td><td>109919</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-6396_67959/crashlog.crash">crashlog.crash</td></td><td>2021-08-07T16:14:43.000+0000</td><td>122328</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Jan Vennemann 2019-10-08

   [~jonasfunk], can you please provide a full crash report of the exception? Thanks!</li>
<li>Jonas Funk Johannessen 2019-10-08

   Attached a crash log</li>
<li>Jonas Funk Johannessen 2019-10-14

   If it's any help, we use a 
   <code><pre>
   setTimeout
   </pre></code>
    to poll an API every 10 secs. I heard that javascriptcore has some issues with 
   setTimeout and setInterval.</li>
<li>Jan Vennemann 2019-10-16

   Thanks for the crash log. It's very hard to tell what's going on since it's all related to the JSC internals. Without a proper reproduction test case we are unfortunately stabbing in the dark here. Can you check for memory leaks using Instruments and try to reproduce the crash in your app. Then send the collected data including the crash report? Maybe that gives some more insight.</li>
<li>Sharif AbuDarda 2019-10-19

   Hello [~jonasfunk], Can you please followup here on Jan's comment? Thanks.</li>
<li>Jonas Funk Johannessen 2019-10-21

   I'm sorry to hear, since the crash count we are seeing are extreme, and as I noted, has come with SDK 8. Can it in any way be related to our use of timers? Unfortunately I'm not able to run Instruments, as the app is closing down, as soon as I start it up. I will try to see if this can be fixed.</li>
<li>Jonas Funk Johannessen 2019-11-07

   I have tried to check for memory leaks in Instruments. When doing that all views seems to be deallocated but all proxies doesn't. Are they not supposed to be deallocated as well? Tried running kitchensinkv2 with allocations - also all proxies persisted here. Testing on device with SDK 8.2.1.</li>
<li>Hans Knöchel 2021-08-07

   Reproducible in 10.0.2 (with the latest fix from TIMOB-27875). Attaching the crash log here.</li>
</ol>


<p><a href="/AC/AC-6396.json">JSON Source</a></p>