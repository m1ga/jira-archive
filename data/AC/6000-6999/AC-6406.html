---
title: "[AC-6406] iOS 13: registerForPushNotifications callback are not fired"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>ios-12, ios-13, notifications, push, sdk-8</td></tr>
<tr><th>Reporter</th><td>Andrea Vitale</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2019-10-14T16:56:31.000+0000</td></tr>
<tr><th>Updated</th><td>2019-11-13T10:47:59.000+0000</td></tr>
</table>

<h3>Description</h3>

The _Ti.Network.registerForPushNotifications_ _success_, _error_ and _callback_ are not fired at all on iOS 13. The same code works well on iOS 12.4.3.

Here is the snippet:
<code><pre>
        if (OS_IOS) {
            Ti.App.iOS.addEventListener('usernotificationsettings', function eventUserNotificationSettings() {
                Ti.App.iOS.removeEventListener('usernotificationsettings', eventUserNotificationSettings);
            
                Ti.Network.registerForPushNotifications({
                    success: successCallback,
                    error: errorCallback,
                    callback: notificationsCallback
                });
            });
            
            Ti.App.iOS.registerUserNotificationSettings({
                types: [
                    Ti.App.iOS.USER_NOTIFICATION_TYPE_ALERT,
                    Ti.App.iOS.USER_NOTIFICATION_TYPE_SOUND,
                    Ti.App.iOS.USER_NOTIFICATION_TYPE_BADGE
                ]
            });
        }
</pre></code>

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2019-10-14

   You should use the <code>userNotificationSettings</code> for iOS 10+. The other one was deprecated back then and should only be used for backwards compatibility.</li>
<li>Andrea Vitale 2019-10-15

   I use it, I updated the issue with the entire code. Previously I only shared the code that doesn't work because if I put a Ti.API.info inside the _usernotificationsettings_ event callback I can see it.. what's wrong?</li>
<li>Hans Knöchel 2019-10-15

   [Here](<a href="https://gist.github.com/hansemannn/f69e939563016bc56b92e6971284cbcf)" rel="nofollow" target="_blank">https://gist.github.com/hansemannn/f69e939563016bc56b92e6971284cbcf)</a> is the push manager we use to register + listen to notifications. If it doesn't work with that one, the certificates you have will probably be the issue, but this is definitely no Titanium bug.</li>
<li>Andrea Vitale 2019-10-16

   Hans thanks for your feedback! Unfortunately it is the same code that I have on my side. How can it be a certificate issue? On all devices with iOS 12.x push notifications works well. On devices with iOS 13 it doesn’t.
   
   Could [this](<a href="https://onesignal.com/blog/ios-13-introduces-4-breaking-changes-to-notifications/)" rel="nofollow" target="_blank">https://onesignal.com/blog/ios-13-introduces-4-breaking-changes-to-notifications/)</a> be related?
   
   UPDATE: tried to send a push notification to this iOS 13 device and the notification arrives but the callback is never fired. So this doesn't seem related to a certificate issue.</li>
<li>Diego Freniche 2019-11-12

   I'm seeing this same problem. Building with Xcode 11.1  (11A1027), no callback while registering for notifications. Building with Xcode 10.3, everything works fine.</li>
<li>Diego Freniche 2019-11-13

   Update: in my case, it was my fault as I was using SDK 8.1.1 and Xcode 11. Looking at the [Compatibility Matrix](<a href="https://wiki.appcelerator.org/display/guides2/Titanium+Compatibility+Matrix#TitaniumCompatibilityMatrix-SupportedversionsofXcode)" rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/guides2/Titanium+Compatibility+Matrix#TitaniumCompatibilityMatrix-SupportedversionsofXcode)</a> after being told by Rene Pot it's clear I needed 8.2.0.</li>
</ol>


<p><a href="/AC/AC-6406.json">JSON Source</a></p>