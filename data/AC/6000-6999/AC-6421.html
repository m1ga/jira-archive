---
title: "[AC-6421] iOS: transpilation produces incorrect output to device"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>ios</td></tr>
<tr><th>Reporter</th><td>Sergey Volkov</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2019-10-28T15:17:00.000+0000</td></tr>
<tr><th>Updated</th><td>2019-11-05T08:26:19.000+0000</td></tr>
</table>

<h3>Description</h3>

Steps:
1. Create test app
<code><pre>
ti create --type app --id test.transpil --name test.transpil -p all -u 'example.com' -d .
</pre></code>
2. Add this snippet into app.js

<code><pre>
(function() {
    let a = {b: [1,2,3]};
    let r = 0;
    let test = function test() {
        if (!a) {
            return;
        }
        const b = a.b;
        for (let i = 0, l = b.length; i &lt; l; i++) {
            r += b[i];
        }
    };
    test();
    console.log(r);
})();
</pre></code>
3. Build the app for device:
<code><pre>
ti build -p ios -T device
</pre></code>
4. Verify "0" in application output in console
5. Verify transpiled code in "build/iphone/assets/app_js":
<code><pre>
function(){var
a={b:[1,2,3]},
r=0,
test=function test(){
if(1)



for(var b=a.b,i=0,l=b.length;void 0&gt;i;i++)
r+=b[i];

};
test(),
console.log(r);
}();
</pre></code>

Problem is here: "void 0>i".
Correct application output is: "6".

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2019-11-03

   Hello [~s.volkov], The issue is only in the device? I wasn't able to reproduce the issue in the simulator. I got the below log
   <code><pre>
   [INFO]  test.transpil 1.0 (Powered by Titanium 8.2.0.6bfdf6e394)
   [INFO]  6
   [DEBUG] Firing app event: started
   </pre></code>
   
   Thanks.</li>
<li>Ewan Harris 2019-11-04

   Seeing as this is a device only thing, it's probably down to the minification side of things</li>
<li>Sergey Volkov 2019-11-05

   Hi. Device only.</li>
</ol>


<p><a href="/AC/AC-6421.json">JSON Source</a></p>