---
title: "[AC-6465] Hyperloop - HealthKit requestAuthorizationToShareTypes is not a function"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Hyperloop, Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>ios</td></tr>
<tr><th>Reporter</th><td>Petr Malakhaltsev</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2020-01-01T21:36:07.000+0000</td></tr>
<tr><th>Updated</th><td>2020-01-29T20:24:31.000+0000</td></tr>
</table>

<h3>Description</h3>

I'm trying to authorize HealthKit via Hyperloop to query height of the user, so I run the following code:

<code><pre>
import {
  HKHealthStore,
} from 'HealthKit';

if (HKHealthStore.isHealthDataAvailable()) {
  Ti.API.log('available');
} else {
  Ti.API.log('not available');
}

let hk = new HKHealthStore();
hk.requestAuthorizationToShareTypes([], [], function() {});
</pre></code>

It does show "available" message, so I assume that heath data is available, but then it throughs an error "hk.requestAuthorizationToShareTypes is not a function", I've tried "swift-like" function "requestAuthorization" as well, but same result.

p.s. Is there any way to get available functions from Hyperloop?

<h3>Comments</h3>

<ol>
<li>Jan Vennemann 2020-01-06

   I guess you are trying to use [requestAuthorizationToShareTypes:readTypes:completion:](<a href="https://developer.apple.com/documentation/healthkit/hkhealthstore/1614152-requestauthorizationtosharetypes?language=objc)." rel="nofollow" target="_blank">https://developer.apple.com/documentation/healthkit/hkhealthstore/1614152-requestauthorizationtosharetypes?language=objc).</a>
   
   According to the conventions for [method names](<a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/guide/iOS_Hyperloop_Programming_Guide-section-src-46253491_iOSHyperloopProgrammingGuide-Namedmethods), this is the Hyperloop equivalent:
   
   <code><pre>
   hk.requestAuthorizationToShareTypesReadTypesCompletion([], [], function() {});
   </pre></code></li>
<li>Petr Malakhaltsev 2020-01-06

   Yes, that's true. It was my mistake that I missed this part of the iOS Hyperloop Programming Guide.
   
   But now, after I follow your suggestion it doesn't seem to do anything. No error, no authorization popup.
   
   <code><pre>
   let hk = new HKHealthStore();
   let height = HKObjectType.quantityTypeForIdentifier('HKQuantityTypeIdentifierHeight');
   hk.requestAuthorizationToShareTypesReadTypesCompletion([height], [height], function completion(success, error) {
     Ti.API.log('success');
   });
   </pre></code>
   </li>
<li>Rene Pot 2020-01-07

   [~pmalakhaltsev] have you configured the correct plist keys? Like NSHealthShareUsageDescription and NSHealthUpdateUsageDescription?</li>
<li>Petr Malakhaltsev 2020-01-07

   Yes, I have both keys in tiapp.xml
   <code><pre>
           &lt;key&gt;NSHealthShareUsageDescription&lt;/key&gt;
           &lt;string&gt;Share data description&lt;/string&gt;
           &lt;key&gt;NSHealthUpdateUsageDescription&lt;/key&gt;
           &lt;string&gt;Access data description&lt;/string&gt;
   </pre></code>
   
   Also I have "entitlements" section:
   <code><pre>
       &lt;entitlements&gt;
         &lt;dict&gt;
           &lt;key&gt;com.apple.developer.healthkit&lt;/key&gt;
           &lt;true/&gt;
           &lt;key&gt;com.apple.developer.healthkit.access&lt;/key&gt;
           &lt;array/&gt;
         &lt;/dict&gt;
       &lt;/entitlements&gt;
   </pre></code>
   
   Besides this I've tried to clean the project and rebuild it. Doesn't help.
   
   </li>
<li>Rene Pot 2020-01-28

   [~pmalakhaltsev] perhaps you have the same issue as [this guy?](<a href="https://stackoverflow.com/questions/26010554/requestauthorizationtosharetypes-method-not-displaying-permissions-prompt-in-ios)" rel="nofollow" target="_blank">https://stackoverflow.com/questions/26010554/requestauthorizationtosharetypes-method-not-displaying-permissions-prompt-in-ios)</a> </li>
<li>Petr Malakhaltsev 2020-01-29

   @topener, that's unlikely as:
   1. I pass not a string but (hopefully) quanityType
   <code><pre>
   var height = HKObjectType.quantityTypeForIdentifier("HKQuantityTypeIdentifierHeight");
   </pre></code>
   2. I initialize healthStore as an object (according to Hyperloop guide):
   <code><pre>
   var hk = HKHealthStore.alloc().init();
   // or
   var hk = new HKHealthStore();
   </pre></code>
   So I can't spot any visible mistake in the code ..
   </li>
</ol>


<p><a href="/AC/AC-6465.json">JSON Source</a></p>