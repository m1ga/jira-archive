---
title: "[AC-6490] Timeout property not working of T.Network.createHttpClient in iOS"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2020-02-14T15:27:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Appcelerator Studio 4.3.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>shishir.roy</td></tr>
<tr><th>Assignee</th><td>Abir Mukherjee</td></tr>
<tr><th>Created</th><td>2020-02-13T13:34:37.000+0000</td></tr>
<tr><th>Updated</th><td>2020-02-14T15:27:35.000+0000</td></tr>
</table>

<h3>Description</h3>

Hi, 
Tiimeout property and error event not working for request which is not proper in iOS platform. 
Example below:

<code><pre>
var url = "<a href="https://www.google" rel="nofollow" target="_blank">https://www.google</a> .com/";

// above url have space after keyword google

Ti.Network.createHTTPClient({
				onload: function(e)
				{
					Ti.API.info("Success");
				},
				onerror: function(e)
				{
					Ti.API.info("Error: " + e.error);
									
				},
				timeout: 60000
			});
			
			client.open("GET", url);			
			client.send(); 
</pre></code>

Above code, when the request made from iOS platform with incorrect url then, not getting any 
success or error callback even and timeout also not working.

Note: Same code working fine in Android and Windows app


<h3>Comments</h3>

<ol>
<li>shishir.roy 2020-02-13

   IOS Version: 13.3
   Titanium SDK: 8.2.1.GA</li>
<li>Ewan Harris 2020-02-13

   [~shishir.roy] I don't think the behaviour you're seeing on Android is a timeout, it's being passed an invalid host so is immediately throwing that as an error <code>Error: Invalid host: <a href="https://www.google%20.com/" rel="nofollow" target="_blank">https://www.google%20.com/</a></code> and not waiting for the timeout.
   
   Using an api like httpbins delay shows that the timeout appears to be working as intended on iOS, calling <code><a href="https://httpbin.org/delay/10" rel="nofollow" target="_blank">https://httpbin.org/delay/10</a></code> will wait 10 seconds before responding, after making the request it will error due to my timeout property only being 1 second
   
   <code><pre>
   var win = Ti.UI.createWindow();
   win.addEventListener('click', () => {
   	var url = "<a href="https://httpbin.org/delay/10" rel="nofollow" target="_blank">https://httpbin.org/delay/10</a>";
   	// above url have space after keyword google
   	var client = Ti.Network.createHTTPClient({
   		onload: function(e){ 
   			Ti.API.info("Success"); 
   		},
   		onerror: function(e) {
   			Ti.API.info("Error: " + e.error);
   		},
   		timeout: 1000
   	});
   	client.open("GET", url);
   	client.send();
   })
   win.open();
   </pre></code></li>
<li>shishir.roy 2020-02-13

   Yeah, agree with you. But why invalid url is not throwing any error in iOS. 
    We have scenario if user is entered invalid url while the request to server then it is not throwing any error and also timeout is not happening. 
   
   So please suggest how it will throw an error if it is invalid url. </li>
<li>Rene Pot 2020-02-14

   [~shishir.roy] it looks like from my testing you should be able to check the <code>connected</code> property whether or not the call has succeeded. 
   
   In my tests in the simulator, it looks like this boolean is updated immediately, but to be safe you can use a timeout to check this property. 
   
   <a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.Network.HTTPClient-property-connected</li>
<li>Rene Pot 2020-02-14

   Considering this ticket is about Timeout, I've created a new ticket specifically for improving the error flow with invalid URL: TIMOB-27767
   
   Therefore I'm closing this ticket, please watch that ticket to be updated on progress.</li>
</ol>


<p><a href="/AC/AC-6490.json">JSON Source</a></p>