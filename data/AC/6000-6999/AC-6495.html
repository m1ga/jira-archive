---
title: "[AC-6495] iOS and Android: Support for Global Vars in Styles (.tss) dropped??"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2020-02-21T10:34:04.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Muhammad Ahmed Fahad</td></tr>
<tr><th>Assignee</th><td>Abir Mukherjee</td></tr>
<tr><th>Created</th><td>2020-02-21T03:21:02.000+0000</td></tr>
<tr><th>Updated</th><td>2020-02-21T10:34:04.000+0000</td></tr>
</table>

<h3>Description</h3>

Titanium SDK 9.0.0.v20200220034622

Happens in both iOS and Android

Please add:
<code><pre>
var Alloy = Alloy || require('/alloy');
</pre></code>

to the build process in the contents of the styles folder

we have styles declared as Global vars accessible via Alloy.Globals:

E.g.
<code><pre>
  bottom: Alloy.Globals.Styles.NAV_BAR_BUTTONS_BOTTOM_PADDING,
  height: Alloy.Globals.Styles.NAV_BAR_BUTTONS_HEIGHT,
  touchFeedbackColor: Alloy.Globals.Colors.CALL_TO_ACTION
</pre></code>

We didn't notice issues whilst internally testing but later when released to Production we are capturing these JS errors:
<code><pre>
action: create, 
bubbles: False, 
cancelBubble: False, 
column: 172, 
controller: api/mobile_app/v1/errors/reports, 
format: json, 
javascriptStack: 
ReferenceError: Alloy is not defined
    at /alloy/styles/calendar.js:1:172
    at Module._runScript (ti:/module.js:587:9)
    at Module.load (ti:/module.js:106:7)
    at Module.loadJavascriptText (ti:/module.js:436:9)
    at Module.loadAsFile (ti:/module.js:488:15)
    at Module.loadAsFileOrDirectory (ti:/module.js:410:20)
    at Module.require (ti:/module.js:245:23)
    at Module.global.Module.require (&lt;embedded&gt;:19311:34)
    at require (ti:/module.js:550:15)
    at Object.exports.createStyle (/alloy.js:263:1)
</pre></code>

Please note that error occurs in: *{color:red}/alloy/styles/calendar.js:1:172{color}*
which is a .tss file compiled to .js

It is breaking some minor functionality in the app.

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2020-02-21

   [~fahad86] this is an unintended regression due to changes in SDK 9. We've fixed it in ALOY-1721and are aiming to release a CLI RC with the fix next week, you could probably workaround this yourself for now by adding the below to your alloy.js
   
   <code><pre>
   global.Alloy = Alloy;
   global._ = _;
   global.Backbone = Backbone;
   </pre></code></li>
</ol>


<p><a href="/AC/AC-6495.json">JSON Source</a></p>