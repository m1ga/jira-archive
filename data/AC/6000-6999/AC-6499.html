---
title: "[AC-6499] Android Material Theme not working in SDK 9"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2020-04-08T02:21:19.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>android</td></tr>
<tr><th>Reporter</th><td>Tony Lau</td></tr>
<tr><th>Assignee</th><td>Abir Mukherjee</td></tr>
<tr><th>Created</th><td>2020-03-04T07:59:52.000+0000</td></tr>
<tr><th>Updated</th><td>2020-04-08T02:21:19.000+0000</td></tr>
</table>

<h3>Description</h3>

Material them and custom button not working in SDK 9. Worked in 8.2.x
With the mytheme.xml, the buttons are supposed to be not with the standard grey rectangle and text should not in caps. 

<code><pre>
&lt;resources&gt;
	&lt;style name="materialTheme" parent="@style/Theme.AppCompat"&gt;
		 &lt;item name="colorPrimary"&gt;#033047&lt;/item&gt;
		 &lt;item name="colorPrimaryDark"&gt;#4c6a7a&lt;/item&gt;
		 &lt;item name="colorAccent"&gt;#4d88a3&lt;/item&gt;
		 &lt;item name="colorControlNormal"&gt;#757575&lt;/item&gt;
		 &lt;item name="colorControlActivated"&gt;#FF6E40&lt;/item&gt;
		 &lt;item name="colorControlHighlight"&gt;#4d88a3&lt;/item&gt;
		 &lt;item name="colorSwitchThumbNormal"&gt;#BDBDBD&lt;/item&gt;
		 &lt;item name="android:colorButtonNormal"&gt;#0D0C05&lt;/item&gt;
		 &lt;item name="android:colorEdgeEffect"&gt;#4d88a3&lt;/item&gt;
		 &lt;item name="android:buttonStyle"&gt;@style/customButton&lt;/item&gt;
	&lt;/style&gt;
	&lt;style name="customButton" parent="Widget.AppCompat.Button"&gt;
		&lt;item name="android:textAllCaps"&gt;false&lt;/item&gt;
	&lt;/style&gt;
&lt;/resources&gt;
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/AC/AC-6499_67292/Android-kitchensink.png">Android-kitchensink.png</td></td><td>2020-03-07T04:30:25.000+0000</td><td>90461</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2020-03-04

   This is likely an issue in your "AndroidManifest.xml" settings. We've switched to Google's newest gradle build tools, which is much more strict regarding your XML settings. For example, you need to make sure you have <code>@style/</code> prefixed in front of your theme name when referencing it in XML.
   
   Our "kitchensink-v2" sample app successfully overrides the theme in Titanium 9.0.0. Note that we reference it via <code>android:theme="@style/kitchensink"</code> in the "tiapp.xml" file where "kitchensink" is our custom theme/style.
   <a href="https://github.com/appcelerator/kitchensink-v2/blob/master/tiapp.xml" rel="nofollow" target="_blank">https://github.com/appcelerator/kitchensink-v2/blob/master/tiapp.xml</a>
   <a href="https://github.com/appcelerator/kitchensink-v2/blob/master/app/platform/android/res/values/custom_theme.xml" rel="nofollow" target="_blank">https://github.com/appcelerator/kitchensink-v2/blob/master/app/platform/android/res/values/custom_theme.xml</a>
   </li>
<li>Tony Lau 2020-03-06

   I took the kitchensink theme and works fine. If I added the  except the  customButton section, that is the part that is not functioning.
   .
   .
   	<item name="android:buttonStyle">@style/customButton</item>
   .
   .
   	<style name="customButton" parent="@style/Widget.AppCompat.Button">
   		<item name="android:textAllCaps">false</item>
   	</style>
   
   
   
   I also tried to modify the last section to specify android, still no luck
   	<style name="customButton" parent="@android:style/Widget.AppCompat.Button">
   		<item name="android:textAllCaps">false</item>
   	</style>
   
   
   </li>
<li>Joshua Quick 2020-03-07

   This works for me...
   <code><pre>
   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;resources&gt;
   	&lt;style name="kitchensink" parent="@style/Theme.AppCompat.Light"&gt;
   		&lt;!-- ... --&gt;
   		&lt;item name="buttonStyle"&gt;@style/MyTheme.Button&lt;/item&gt;
   	&lt;/style&gt;
   	&lt;style name="MyTheme.Button" parent="@style/Widget.AppCompat.Button"&gt;
   		&lt;item name="android:textAllCaps"&gt;false&lt;/item&gt;
   	&lt;/style&gt;
   &lt;/resources&gt;
   </pre></code>
   
   Here is a screenshot of it working in kitchensink-v2.
    !Android-kitchensink.png|thumbnail! 
   </li>
<li>Joshua Quick 2020-03-07

   I think it's an issue with your leading "android:" in...
   <code><pre>
   &lt;item name="android:buttonStyle"&gt;@style/customButton&lt;/item&gt;
   </pre></code>
   
   This below works when I tested it on Android 4.4 and 9.0. My understanding is because the theme comes from Google's AndroidX library (or in the past the Support library) instead of the Android system library.
   <code><pre>
   &lt;item name="buttonStyle"&gt;@style/customButton&lt;/item&gt;
   </pre></code>
   
   But I suppose if you're really paranoid, you can just define both. It won't hurt anything. :)
   <code><pre>
   &lt;item name="buttonStyle"&gt;@style/customButton&lt;/item&gt;
   &lt;item name="android:buttonStyle"&gt;@style/customButton&lt;/item&gt;
   </pre></code>
   <a href="https://stackoverflow.com/a/31359459" rel="nofollow" target="_blank">https://stackoverflow.com/a/31359459</a>
   </li>
<li>Tony Lau 2020-03-09

   No luck but I tested on real Android phones.
   
   Nexus 5X Android 8.1.0
   Galaxy Note3 Android 5.0
   
   For both devices, when I just switched back to 8.2.0GA, the lower caps showed up properly! A bit frustrating.
   
   
   </li>
<li>Joshua Quick 2020-03-10

   Without any more information, we can't help you. Especially since this is working for us.
   
   Do you see any warning or errors in the build log?</li>
<li>Tony Lau 2020-04-05

   I final stumbled into how it can be reproduced.
   It has to do with how the controller is opened in modal or not.
   
   Alloy.createController('xxxxxxxxx').getView().open({modal:true});
   ---> All text in button becomes all capital letters
   
   Alloy.createController('xxxxxxxxx').getView().open({modal:false});
   ---> All text in button showed up as what were typed in code
   
   
   So, the problem is pertained to when windows are opened as modal.
   
   </li>
<li>Joshua Quick 2020-04-07

   Okay. I'm able to reproduce it now. Thanks for isolating it.
   A bug has been introduced into Titanium 9.0.0. Your custom style is being applied to the wrong translucent activity theme internally.
   
   If you need a solution now, then you can work-around it in 1 of 2 ways.
   
   *Work-Around 1:*
   Set the "theme" property to the below string when creating a window in code like this...
   <code><pre>
   var window = Ti.UI.createWindow({
   	modal: true,
   	theme: "Theme.AppCompat.Translucent",
   });
   </pre></code>
   
   *Work-Around 2:*
   Set the theme of the "TiTranslucentActivity" like the below...
   <code><pre>
   &lt;ti:app&gt;
   	&lt;android&gt;
   		&lt;manifest&gt;
   			&lt;application android:theme="@style/MyStyle"&gt;
   				&lt;activity android:name="org.appcelerator.titanium.TiTranslucentActivity" android:theme="@style/Theme.AppCompat.Translucent"/&gt;
   			&lt;/application&gt;
   		&lt;/manifest&gt;
   	&lt;/android&gt;
   &lt;/ti:app&gt;
   </pre></code>
   
   Note that the above 2 solutions are temporary, because the translucent activity theme is supposed to use "Theme.AppCompat.Translucent", not "Theme.AppCompat.Translucent" (it's currently backwards in 9.0.0). So, the above won't work in older Titanium versions... or future versions. We'll see about addressing it in 9.0.1.
   
   Thanks for reporting this issue.</li>
<li>Joshua Quick 2020-04-08

   I've written a ticket that better clarifies the issue here: [TIMOB-27837]
   
   I'm going to close this ticket in favor of the above one. We've scheduled it to be fixed in Titanium 9.0.1. Thanks for reporting this issue.</li>
</ol>


<p><a href="/AC/AC-6499.json">JSON Source</a></p>