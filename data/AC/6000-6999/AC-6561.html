---
title: "[AC-6561] Ti.Platform.openURL causes "undefined is not an object" error"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2020-07-20T14:16:18.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>ios</td></tr>
<tr><th>Reporter</th><td>Justin Toth</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2020-06-18T00:29:50.000+0000</td></tr>
<tr><th>Updated</th><td>2020-07-20T14:16:19.000+0000</td></tr>
</table>

<h3>Description</h3>

When launching any url with Ti.Platform.openURL on iOS, the app then throws this error:

<code><pre>
[ERROR] Script Error {
[ERROR]     message = "undefined is not an object";
[ERROR]     type = TypeError;
[ERROR] } 
</pre></code>

It does not provide a stack trace, which is a separate issue. The interesting thing is that it will actually execute the openURL command but then when you return to your Titanium app and execute any subsequent Titanium code, it throws the error.

Another user has reported this same issue on [SO](<a href="https://stackoverflow.com/questions/62328830/getting-error-after-openurl-on-appcelerator-titanium-v-9)" rel="nofollow" target="_blank">https://stackoverflow.com/questions/62328830/getting-error-after-openurl-on-appcelerator-titanium-v-9)</a>, so I do not believe this issue is specific to our app.

Below is a simple repro. Launch the app then wait 10 seconds and notice how it correctly opens the apple maps url. Return to the Titanium app and wait another 10 seconds, and notice how the second openURL errors. The second openURL isn't relevant, what is relevant is that Titanium code has executed after the first openURL, and that's enough to cause it to error.

<code><pre>
var win = Ti.UI.createWindow({ 
	title: 'Ti.Platform.openURL Bug'
});
win.open();

var button = Ti.UI.createButton({
	top: 100,
	height: Ti.UI.SIZE,
	title: 'Open maps'
});
button.addEventListener('click', function() {
	Ti.Platform.openURL('<a href="http://maps.apple.com/maps?q=-8.012960" rel="nofollow" target="_blank">http://maps.apple.com/maps?q=-8.012960</a>,110.308998');
});
win.add(button);

setInterval(function() {
	Ti.Platform.openURL('<a href="http://maps.apple.com/maps?q=-8.012960" rel="nofollow" target="_blank">http://maps.apple.com/maps?q=-8.012960</a>,110.308998');
}, 10000);
</pre></code>

Also of note, I'm not confident that the interval is the ONLY way to cause this error, as I get this error even executing openURL commands not in an interval, but it certainly is easier to reproduce if it is within an interval.

This bug exists in Ti SDK 9.0.0+. Ti SDK 8.3.1.GA is the newest version that doesn't have this bug.

<h3>Comments</h3>

<ol>
<li>Justin Toth 2020-06-19

   I found a workaround for now from another ticket, specifying the second and third args of openURL:
   
   <code><pre>
   Ti.Platform.openURL('<a href="http://maps.apple.com/maps?q=" rel="nofollow" target="_blank">http://maps.apple.com/maps?q=</a>' + destinationAddress, null, () =&gt; { });
   </pre></code>
   </li>
<li>Michael Gangolf 2020-06-26

   Workaround works fine! I had the same error opening a external URL in 9.0.3.GA</li>
<li>Christopher Williams 2020-07-20

   Resolved as duplicate of linked ticket. Fix was just pushed to master/9_1_X/9_3_X. Release 9.1.0 will contain it. (or if you really need the fix and don't want to use the empty function callback workaround, you should be able to install a new 9_0_X branch build via <code>ti sdk install -b. 9_0_X</code> in about an hour once the build goes out)</li>
</ol>


<p><a href="/AC/AC-6561.json">JSON Source</a></p>