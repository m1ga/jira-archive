---
title: "[AC-6671] Android module dont work on armeabi-v7a"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK & CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>libanez</td></tr>
<tr><th>Assignee</th><td>Abir Mukherjee</td></tr>
<tr><th>Created</th><td>2021-01-30T22:53:06.000+0000</td></tr>
<tr><th>Updated</th><td>2021-01-30T23:43:58.000+0000</td></tr>
</table>

<h3>Description</h3>

Hi guys,

I'm crazy sinces few days with a problem i can't understand, i really need help.

I have two computers : One MacBook and one Windows 10 PC,
I started to code my app on the MacBook, and since more than one year i use the PC.

My app includes a native Android module, which was working well till now. Everything started to change when i wanted to update the Titanium SDK.

SDK 9.0.0.GA : 
- The module still compiles fine on the macBook
- The module don't compile on the PC due tot C++ errors (*edit : i posted a comment below with the error logs*)

SDK 9.3.1.GA :
- The module compile fine on the PC, but when i look closely at the generated files on the .aar, i see that the .so library file generated for armeabi-v7a have not the good size, and it result that the app fails with an exception on armeabi-v7a devices (tested). The app works well on other architectures devices.
- The module compile fine on the MacBook and all the .so have the correct size, the app is running on armeabi devices !

Why the hell appcelerator is not building the ".so" file in the "jni" folder correctly for armeabi-v7a architecture ? And why the hell the module compiles fine and runs fine if compiled with the macBook with 9.0.0.GA / 9.3.1.GA and not in the PC ?

Thank you in advance if you can help me !
Regards

<h3>Comments</h3>

<ol>
<li>libanez 2021-01-30

   For more information, this is the error i get when i try to compile the app with 9.0.0.GA SDK on the windows 10 PC :
   
   <code><pre>
   [ERROR] [GRADLE]
   [ERROR] [GRADLE] FAILURE: Build failed with an exception.
   [ERROR] [GRADLE]
   [ERROR] [GRADLE] * What went wrong:
   [ERROR] [GRADLE] Execution failed for task ':module:externalNativeBuildRelease'.
   [ERROR] [GRADLE] > Build command failed.
   [ERROR] [GRADLE]   Error while executing process C:\Users\libanez\AppData\Local\Android\Sdk\ndk\android-ndk-r21e\ndk-build.cmd with arguments {NDK_PROJECT_PATH=null APP_BUILD_SCRIPT=C:\SVN_files\CLIENT_NEPTING\branches\DEV\iziApp\ucube_client\appc\allpos-lib-modules\android\build\module\src\main\jni\Android.mk APP_ABI=armeabi-v7a NDK_ALL_ABIS=armeabi-v7a NDK_DEBUG=0 APP_PLATFORM=android-19 NDK_OUT=C:/SVN_files/CLIENT_NEPTING/branches/DEV/iziApp/ucube_client/appc/allpos-lib-modules/android/build/module/build/intermediates/ndkBuild/release/obj NDK_LIBS_OUT=C:\SVN_files\CLIENT_NEPTING\branches\DEV\iziApp\ucube_client\appc\allpos-lib-modules\android\build\module\build\intermediates\ndkBuild\release\lib APP_CPPFLAGS+=-std=c++11 APP_STL:=c++_shared -j8 C:/SVN_files/CLIENT_NEPTING/branches/DEV/iziApp/ucube_client/appc/allpos-lib-modules/android/build/module/build/intermediates/ndkBuild/release/obj/local/armeabi-v7a/libcom.nepting.allpos.lib.so}
   [ERROR] [GRADLE]   Android NDK: WARNING:C:\SVN_files\CLIENT_NEPTING\branches\DEV\iziApp\ucube_client\appc\allpos-lib-modules\android\build\module\src\main\jni\Android.mk:com.nepting.allpos.lib: non-system libraries in linker flags: -lkroll-v8
   [ERROR] [GRADLE]   Android NDK:     This is likely to result in incorrect builds. Try using LOCAL_STATIC_LIBRARIES
   [ERROR] [GRADLE]   Android NDK:     or LOCAL_SHARED_LIBRARIES instead to list the library dependencies of the
   [ERROR] [GRADLE]   Android NDK:     current module
   [ERROR] [GRADLE]   [armeabi-v7a] Prebuilt       : libc++_shared.so <= <NDK>/sources/cxx-stl/llvm-libc++/libs/armeabi-v7a/
   [ERROR] [GRADLE]   [armeabi-v7a] Compile++ thumb: com.nepting.allpos.lib <= TiModuleBootstrap.cpp
   [ERROR] [GRADLE]   [armeabi-v7a] Compile++ thumb: com.nepting.allpos.lib <= com.nepting.mpos.lib.NeptingModule.cpp
   [ERROR] [GRADLE]   [armeabi-v7a] SharedLibrary  : libcom.nepting.allpos.lib.so
   [ERROR] [GRADLE]
   [ERROR] [GRADLE]   C:/Users/libanez/AppData/Local/Android/Sdk/ndk/android-ndk-r21e/build//../toolchains/llvm/prebuilt/windows-x86_64/bin/../lib/gcc/arm-linux-androideabi/4.9.x/../../../../arm-linux-androideabi/bin\ld: error: cannot open C:/SVN_files/CLIENT_NEPTING/branches/DEV/iziApp/ucube_client/appc/allpos-lib-modules/android/build/module/build/intermediates/ndkBuild/release/obj/local/armeabi-v7a/objs/com.nepting.allpos.lib/__/__/__/build/ti-generated/jni/com.nepting.mpos.lib.NeptingModule.o: No such file or directory
   [ERROR] [GRADLE]   C:/SVN_files/CLIENT_NEPTING/branches/DEV/iziApp/ucube_client/appc/allpos-lib-modules/android/build/module/build/intermediates/ndkBuild/release/obj/local/armeabi-v7a/objs/com.nepting.allpos.lib/__/__/__/build/ti-generated/jni/TiModuleBootstrap.o:TiModuleBootstrap.cpp:titanium::bindings::TiModuleBindings::lookupGeneratedInit(char const*, unsigned int)::binds: error: undefined reference to 'com::nepting::allpos::lib::NeptingModule::bindProxy(v8::Local<v8::Object>, v8::Local<v8::Context>)'
   [ERROR] [GRADLE]   C:/SVN_files/CLIENT_NEPTING/branches/DEV/iziApp/ucube_client/appc/allpos-lib-modules/android/build/module/build/intermediates/ndkBuild/release/obj/local/armeabi-v7a/objs/com.nepting.allpos.lib/__/__/__/build/ti-generated/jni/TiModuleBootstrap.o:TiModuleBootstrap.cpp:titanium::bindings::TiModuleBindings::lookupGeneratedInit(char const*, unsigned int)::binds: error: undefined reference to 'com::nepting::allpos::lib::NeptingModule::dispose(v8::Isolate*)'
   [ERROR] [GRADLE]   clang++: error: linker command failed with exit code 1 (use -v to see invocation)
   [ERROR] [GRADLE]   make: *** [C:/Users/libanez/AppData/Local/Android/Sdk/ndk/android-ndk-r21e/build//../build/core/build-binary.mk:725: C:/SVN_files/CLIENT_NEPTING/branches/DEV/iziApp/ucube_client/appc/allpos-lib-modules/android/build/module/build/intermediates/ndkBuild/release/obj/local/armeabi-v7a/libcom.nepting.allpos.lib.so] Error 1
   [ERROR] [GRADLE]
   [ERROR] [GRADLE]
   [ERROR] [GRADLE] * Try:
   [ERROR] [GRADLE] Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.
   [ERROR] [GRADLE]
   [ERROR] [GRADLE] * Get more help at <a href="https://help.gradle.org" rel="nofollow" target="_blank">https://help.gradle.org</a>
   [ERROR] [GRADLE]
   [ERROR] [GRADLE] BUILD FAILED in 1m 10s
   </pre></code>
   </li>
</ol>


<p><a href="/AC/AC-6671.json">JSON Source</a></p>