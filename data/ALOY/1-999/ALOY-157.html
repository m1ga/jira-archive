---
title: "[ALOY-157] All top-level elements in a required view should be added its parent's view hierarchy"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-08-07T06:53:16.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2012 Sprint 16, Release 3.0.0</td></tr>
<tr><th>Components</th><td>XML</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2012-07-31T13:33:39.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-07T22:25:44.000+0000</td></tr>
</table>

<h3>Description</h3>

For example:

<h4>myview.xml</h4>
<code><pre>
&lt;Alloy&gt;
    &lt;View id="view1"/&gt;
    &lt;View id="view2"/&gt;
&lt;/Alloy&gt;
</pre></code>

Currently, if these view is required in the markup, or code, it will attach only the first top-level view to the parent hierarchy.

<h4>index.xml</h4>
<code><pre>
&lt;Alloy&gt;
    &lt;Window&gt;
        &lt;View require="myview"/&gt;
    &lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>

Would roughly translate to 

<code><pre>
&lt;Alloy&gt;
    &lt;Window&gt;
        &lt;View id="view1"/&gt;
    &lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>

We instead want it to return all elements as part of the view hierarchy

<code><pre>
&lt;Alloy&gt;
    &lt;Window&gt;
        &lt;View id="view1"/&gt;
        &lt;View id="view2"/&gt;
    &lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>

This will require changes in the View/Widget require parsers, and will also change how the getRoot() function works.

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2012-08-07

   All required views and widgets will return all top level elements to their parent, not just the first top level element now. This also helped flush out a bug where the view hierarchy wasn't established correctly if the only thing inside of a required view was other required views.
   
   A brief synopsis of the BaseController changes to facilitate this:
   * *getRoot()* remains the same and will return the first top level element. Useful as in most cases only one element is desired, even though the elements are now stored as an array.
   * *getRoots()* now returns the full array of top level elements belonging to a controler
   * *addRoot()* will add a new top level element to a controller's collection. This will likely never be used by developers and is currently only used by Alloy when establishing view hierarchy from markup. Eventually this may prove useful to developers if we further separate the controller lifecycle </li>
</ol>


<p><a href="/ALOY/ALOY-157.json">JSON Source</a></p>