---
title: "[ALOY-17] sizzle.js: only id selectors work"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-07-19T11:52:04.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>2012 Sprint 14</td></tr>
<tr><th>Fix Version/s</th><td>2012 Sprint 14</td></tr>
<tr><th>Components</th><td>Runtime</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2012-05-16T06:43:29.000+0000</td></tr>
<tr><th>Updated</th><td>2012-07-19T11:52:04.000+0000</td></tr>
</table>

<h3>Description</h3>

Tasks:

* It appears to be this call that is failing in sizzle.js
<code><pre>
Array.prototype.slice.call( document.documentElement.childNodes, 0 )[0].nodeType;

// this fails also
// Array.prototype.slice.call( document.documentElement.childNodes._nodes, 0 )[0].nodeType;
</pre></code>
* We should attempt to solve the problem without editing sizzle.js. If possible, the changes should be made to the XML DOM parsing code which we have full control over. The XML DOM parsing code is no longer updated, while sizzle.js is updated on a regular basis. 

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2012-05-16

   The <code>Array.prototype.slice</code> check was failing because no elements, aside from the document element, are loaded into the DOM at the point when this check is made. By specifying the XML load like this:
   
   <code><pre>
   loadXML('&lt;HTML&gt;&lt;BODY&gt;&lt;/BODY&gt;&lt;/HTML&gt;');
   </pre></code>
   
   The check passes and we can now traverse elements by tag name. Apprpriate changes have been made to the DOM generation code to account for the BODY tag.</li>
<li>Tony Lukasavage 2012-05-16

   fix details here: [<a href="https://github.com/appcelerator/ZipTi/commit/42ca5d42e5341975827c2c7b1bbf95e8aaf0be4e" rel="nofollow" target="_blank">https://github.com/appcelerator/ZipTi/commit/42ca5d42e5341975827c2c7b1bbf95e8aaf0be4e</a>](<a href="https://github.com/appcelerator/ZipTi/commit/42ca5d42e5341975827c2c7b1bbf95e8aaf0be4e)" rel="nofollow" target="_blank">https://github.com/appcelerator/ZipTi/commit/42ca5d42e5341975827c2c7b1bbf95e8aaf0be4e)</a></li>
</ol>


<p><a href="/ALOY/ALOY-17.json">JSON Source</a></p>