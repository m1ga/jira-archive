---
title: "[ALOY-27] Improve HTML parsing performance"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-07-19T11:52:06.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>2012 Sprint 14</td></tr>
<tr><th>Fix Version/s</th><td>2012 Sprint 14</td></tr>
<tr><th>Components</th><td>XML</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2012-05-11T08:24:31.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-22T13:21:20.000+0000</td></tr>
</table>

<h3>Description</h3>

Right now, everytime the generated HTML parser <code>parser/html.js</code> is called in <code>parser/parser.js</code>, the entire document is parsed. We should not be making multiple calls to <code>html.parser()</code>, we should either be processing all relevant HTML elements in a single call to <code>html.parser()</code>, or make use of the different <code>startRule</code> values available in <code>parser/html.js</code>.

This may not be an issue now, but as apps grow more complex, inefficient parsing could adversely effect build time.

<h3>Comments</h3>

<ol>
<li>Russell McMahon 2012-05-11

   Already built into the parsing is passing in an already created object tree, so no need to parse every time . Needs testing though.</li>
<li>Tony Lukasavage 2012-05-11

   Right, but wouldn't you need to traverse the object tree to know what to pass in? Since the object tree corresponds to our custom HTML grammar, there's no easy/efficient way to use selectors to traverse it.</li>
<li>Russell McMahon 2012-05-11

   You can also pass in parts so it limits what is scanned. As to selectors something you do need to scan the whole tree to return a collection but in the case of id once the object is created it's a hash map lookup so no dom scanning.</li>
<li>Tony Lukasavage 2012-05-21

   details here: [<a href="https://github.com/appcelerator/ZipTi/commit/cde130b26b91a1eb5f9d08bfc1ac0e9df7d4a9a6" rel="nofollow" target="_blank">https://github.com/appcelerator/ZipTi/commit/cde130b26b91a1eb5f9d08bfc1ac0e9df7d4a9a6</a>](<a href="https://github.com/appcelerator/ZipTi/commit/cde130b26b91a1eb5f9d08bfc1ac0e9df7d4a9a6)" rel="nofollow" target="_blank">https://github.com/appcelerator/ZipTi/commit/cde130b26b91a1eb5f9d08bfc1ac0e9df7d4a9a6)</a></li>
</ol>


<p><a href="/ALOY/ALOY-27.json">JSON Source</a></p>