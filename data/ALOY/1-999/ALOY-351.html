---
title: "[ALOY-351] Only include sync adapters when necessary"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Sub-task</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-08-07T20:59:07.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.3.0</td></tr>
<tr><th>Components</th><td>Models, Runtime</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2012-10-29T18:47:31.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-07T22:25:45.000+0000</td></tr>
</table>

<h3>Description</h3>

Currently all Alloy builtin sync adapters are included in built applications. We should inspect the application's models and include only the sync adapters which are necessary to run the app. This will reduce both compile time and the overall size of the app.

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2012-11-06

   The only reasonable to do this now would be to inspect the model files and look for the adapters used. Unfortunately since models are defined as JS and not JSON, we'd need to parse the file into AST and look for the adapter type that way. That would defeat the purpose of this ticket which is decreasing the amount of JS files processed as AST. We'll defer this ticket until we can come up with a more creative, faster way to determine which adapters to include.
   
   One thought would be to add an *adapters* field to the config.json where the developer could specify which adapters the app will use. If the *adapters* field is absent, import all adapters just as we do now.</li>
<li>Tony Lukasavage 2013-08-07

   PR: <a href="https://github.com/appcelerator/alloy/pull/213" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/213</a>
   test app: <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-351" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-351</a>
   
   Functional testing should be confirmed on all supported platform. Follow these steps with the given test app.
   
   <h4>Run the test app</h4>
   <h4>Inspect the compile log. Make sure that no sync adapters were copied into the project or optimized.</h4>
   <h4>Add one more sync adapters to the "adapters" array in the config.json file</h4>
   <code><pre>
   {
     "adapters": ["sql","properties"]
   }
   </pre></code>
   <h4>Compile the app again. Ensure that only the "sql" and "properties" adapter were copied into the project, and that those were the only adapters optimized.</h4>
   <h4>Remove "properties" from the config.json</h4>
   <code><pre>
   {
     "adapters": ["sql"]
   }
   </pre></code>
   <h4>Ensure that the "properties" adapter was removed from the project, that the "sql" adapter remains in it, and that the "sql" adapter is the only adapter that gets optimized.</h4></li>
</ol>


<p><a href="/ALOY/ALOY-351.json">JSON Source</a></p>