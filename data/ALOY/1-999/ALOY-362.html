---
title: "[ALOY-362] Allow controller-less views with some controller logic"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-05-21T15:18:42.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.4.0</td></tr>
<tr><th>Components</th><td>Runtime</td></tr>
<tr><th>Labels</th><td>notable, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Matthew Congrove</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2012-11-02T18:37:47.000+0000</td></tr>
<tr><th>Updated</th><td>2014-05-22T21:52:04.000+0000</td></tr>
</table>

<h3>Description</h3>

The ability to create views without a controller is quite nice, but it could be taken a step further. During development of a recent application I built numerous controllers with only 1 or 2 lines of code to set properties of elements in the view. For example:

<code><pre>
Alloy.createController("MyView", {
	labelText: "Hello, World!",
	imageUrl: "/images/test.png"
}).getView();
</pre></code>

<code><pre>
$.MyLabel.text = arguments[0].labelText;
$.MyImage.image = arguments[0].imageUrl;
</pre></code>

It would be nice if we could pass in parameters to the controller-less view which automatically sets these properties. For example:

<code><pre>
Alloy.createController("MyView", {
	MyLabel: {
		text: "Hello, World!"
	},
	MyImage: {
		image: "/images/test.png"
	}
}).getView();
</pre></code>

This lets us omit the controller completely.

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2012-11-02

   I like this idea, with a small change to implementation likely. For the sake of keeping the current convention unchanged, I would prefer to use a spceific reserved property where these "by id" property assignments would happen. Something like:
   
   <code><pre>
   Alloy.createController("MyView", {
       views: {
           MyLabel: {
               text: "Hello, World!"
           },
           MyImage: {
               image: "/images/test.png"
           }
       }
   }).getView();
   </pre></code>
   
   or perhaps like this:
   
   <code><pre>
   Alloy.createController("MyView", {
       '#MyLabel': {
           text: "Hello, World!"
       },
       '#MyImage': {
           image: "/images/test.png"
       }
   }).getView();
   </pre></code>
   
   just looking to avoid conflicts with how people currently use it</li>
<li>Matthew Congrove 2012-11-02

   Yes, that makes much more sense. I really like the latter as it keeps everything similar across the filetypes (JS -> TSS).</li>
<li>Tim Poulsen 2014-04-07

   PR: <a href="https://github.com/appcelerator/alloy/pull/358" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/358</a>
   
   Functional test:
   
   Run the app included in the PR. The result should be a white window with two labels: the first with a large gradient background and other properties as set in the index.js controller. Note that the childview.xml contains no properties other than ID. Styles from childview.tss are merged in. There is no childview.js controller file. Properties and values are set in the index.js controller using the new autoView argument.</li>
<li>Tim Poulsen 2014-04-28

   reopened for alternative implementation</li>
<li>Tim Poulsen 2014-04-28

   New PR: <a href="https://github.com/appcelerator/alloy/pull/376" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/376</a> 
   
   Functional test as before.
   
   In the new implementation, you no longer use the "autoView" object in your createController() call. Instead, pass an argument object whose keys correspond to the IDs of the components in the child view to which the styles will be applied.
   
   <code><pre>
   $.index.add(Alloy.createController('childview', {
   	"#label": {
   		text: 'I am a label',
   		top: 50
   	},
   	"#anotherlabel": {
   		text: 'I am also a label',
   		foo: 'bar' /* a custom/non-existent property */
   	},
   	"#someNonExistentId": { text: 'I do not exist'}
   }).getView());
   </pre></code></li>
<li>Tim Poulsen 2014-04-28

   For performance reasons, I'm leaning towards the implementation of <a href="https://github.com/appcelerator/alloy/pull/377" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/377</a> 
   
   <code><pre>
   $.index.add(Alloy.createController('childview', {
      alloyAutoView: {
         "#label": {
            text: 'I am a label',
            top: 50
         },
         "#anotherlabel": {
            text: 'I am also a label',
            foo: 'bar'
         },
         "#someNonExistentId": { text: 'I do not exist'}
      }
   }).getView());
   </pre></code></li>
<li>Tim Poulsen 2014-04-29

   OK, I went with a new dedicated method for controller-less views. This offers the best performance for existing apps and "standard" functionality while making controllerless views available to developers via a specific method.
   
   See <a href="https://github.com/appcelerator/alloy/pull/376" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/376</a> (merged).
   
   <code><pre>
   // new method, for instantiating controllerless views
   $.index.add(Alloy.createControllerlessView('childview', {
      "#label": {
         text: 'I am a label',
         top: 50
      }
   }).getView());
   
   // old method for instantiating controllers is still there
   $.index.add(Alloy.createController('normalchild', {
   	text: 'Set the old-fashioned way in the normalchild.js file'
   }).getView());
   </pre></code>
   
   Final functional test:
   
   Run the ALOY-362 test app. The result should be a white window with three labels: the top two are created with the controllerless view technique. The first label has a large gradient background and other properties as set in the index.js controller. Note that the childview.xml contains no properties other than ID. Styles from childview.tss are merged in. There is no childview.js controller file. Properties and values are set in the index.js controller using the new autoView argument. A third label, at the bottom of the screen is created with the traditional createController() method.
   </li>
<li>Tim Poulsen 2014-04-29

   PR merged</li>
<li>Tony Lukasavage 2014-05-16

   re-open for potential api change</li>
<li>Tim Poulsen 2014-05-20

    The new API moves this functionality to be a method of the controller, which must be invoked after the controller is instantiated. Like this:
    
    <code><pre>
    var someView = Alloy.createController('someView');
    someView.updateViews({
       "#myLabel": {
          text: 'I am a label',
          top: 50
       }
    });
    $.index.add(someView.getView());
    </pre></code>
    
    Note that updateViews() will not apply attributes to <Require> or <Widget> elements within your new controller. </li>
<li>Tim Poulsen 2014-05-20

    New PR <a href="https://github.com/appcelerator/alloy/pull/404" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/404</a>
    
    Merged to 1_4_X branch and cherry-picked to master</li>
<li>Tim Poulsen 2014-05-21

    Problem on Android was due to case -- sample app used normalChild when the file was named normalchild. The sample app would have failed on an iOS device. I've corrected that. I also made a change that removes an inadvertent SDK dependency (as written, the solution would have required SDK 3.2.0+).</li>
<li>Tim Poulsen 2014-05-21

    New PR <a href="https://github.com/appcelerator/alloy/pull/408" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/408</a> has been merged to 1_4_X and master</li>
<li>Federico Casali 2014-05-22

    Verified fixed and working as expected on Android (Google Nexus Galaxy), iOS (iPhone 5) and MobileWeb
    
    TiSDK 3.3.0.v20140522110830
    Alloy 1.4.0-alpha4
    Appcelerator Studio 3.3.0.201405211748
    CLI 3.3.0-alpha5
    
    Closing.</li>
</ol>


<p><a href="/ALOY/ALOY-362.json">JSON Source</a></p>