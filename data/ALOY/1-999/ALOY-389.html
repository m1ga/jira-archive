---
title: "[ALOY-389] TiStudio code completion for Alloy style files (TSS)"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-01-14T11:47:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 0.3.1</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.1.0, 2013 Sprint 03</td></tr>
<tr><th>Components</th><td>Titanium Studio</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2012-11-14T15:37:31.000+0000</td></tr>
<tr><th>Updated</th><td>2013-04-09T21:57:46.000+0000</td></tr>
</table>

<h3>Description</h3>

Alloy style files, which are in a custom TSS format, need TiStudio code completion. Since TSS is a brand new format, TiStudio is going to need an actual specification for the TSS format. For this I have started constructing a [true grammar](<a href="https://github.com/appcelerator/alloy/blob/master/Alloy/grammar/tss.pegjs)" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/Alloy/grammar/tss.pegjs)</a> in [pegjs](<a href="http://pegjs.majda.cz/)" rel="nofollow" target="_blank">http://pegjs.majda.cz/)</a> for the TSS format. The work on that is being logged in ALOY-272. This grammar will need to be completed, tested to ensure that replaces the current logic effectively, and then inserted as a replacement to the custom logic code in Alloy now. No small feat, so resolving ALOY-272 will be a big hurdle to jump before getting style code completion.

Once a grammar has been established, there area few ways in which TiStudio code completion would be useful in style files, all of which will occur as a developer is typing the property key names inside the style definition:

<h4>If the style in question refers to a Titanium API, code completion based on the Titanium API type. For example:</h4>
<code><pre>
"Window": {
    backgroundColor: '#fff'
}
</pre></code>
as a developer is typing "backgroundColor' above, TiStudio should be helping code complete based on the fact that the style is for a Ti.UI.Window.
<h4>If the style refers to an ID, code completion based on the type of the IDed component as identified in the corresponding view XML.</h4>
<code><pre>
&lt;!-- index.xml --&gt;
&lt;Label id="myLabel"/&gt;
</pre></code>
<code><pre>
// index.tss
"#myLabel": {
    text: 'some text'
}
</pre></code>
TiStudio should see *#myLabel*, understand that it is an ID style, find the UI component that it corresponds to in index.xml (in this a Ti.UI.Label), and then do code completion based on the determined type of Titanium API.
<h4>If the style refers to a class, code completion will work just as it does in the case of IDs, but the code completion will give a listing that is the intersection of all the properties that apply to any UI components given this class.</h4>

One final note is the handling of the global style app.tss. Since the app.tss has no associated view, it might make sense to only do code completion in the case of #1 where a Titanium API is given. I would imagine it would be a little to resource intensive to inspect all files in a project to look for IDs and classes in the cases of #2 and #3.

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2012-12-17

   As it stands, not much work will need to be done on the alloy side after the TiStudio team is provided with the parsing grammar from ALOY-272. I will adjust the ticket, or create new ones, if necessary.</li>
<li>Tony Lukasavage 2013-01-08

   @Chris,
   
   The new TSS grammar, which creates a parser with [pegjs](<a href="http://pegjs.majda.cz/)" rel="nofollow" target="_blank">http://pegjs.majda.cz/)</a>, can be found here: <a href="https://github.com/appcelerator/alloy/blob/master/Alloy/grammar/tss.pegjs" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/Alloy/grammar/tss.pegjs</a>
   
   Let me know if you need anything else to get started handling TSS files on your end.</li>
<li>Tony Lukasavage 2013-01-14

   Confirmed with Chris Williams that the current grammar is sufficient for the TiStudio team to start generating the necessary parsers on their end for TSS file processing and code assist. New tickets will be created if further work is needed to be done here.</li>
<li>Federico Casali 2013-04-09

   Code completion for TSS files being verified as working ad expected with:
   
   Appcelerator Studio 3.1.0.201304082106
   Alloy 1.1.0-cr
   
   Closing.</li>
</ol>


<p><a href="/ALOY/ALOY-389.json">JSON Source</a></p>