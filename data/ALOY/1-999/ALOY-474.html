---
title: "[ALOY-474] TSS: allow extra commas in parser"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-08-06T21:56:48.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 0.3.5</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 0.3.6, 2013 Sprint 02</td></tr>
<tr><th>Components</th><td>XML</td></tr>
<tr><th>Labels</th><td>alloy, qe-3.0.2, qe-Alloy, qe-manualtest, regression</td></tr>
<tr><th>Reporter</th><td>Dustin Hyde</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2013-01-18T14:24:07.000+0000</td></tr>
<tr><th>Updated</th><td>2014-08-06T21:56:48.000+0000</td></tr>
</table>

<h3>Description</h3>

With alloy 0.3.5, there is a regression where any .tss files with unnecessary commas will fail to build.

This breaks many customer apps and requires a manual edit of hundreds of lines of code.

Sample code (note the comma after 'height'):

<code><pre>
"Window":{
    backgroundColor: '#666',
    width: Ti.UI.FILL,
    height: Ti.UI.FILL,
},
</pre></code>

Sample Error (based on comma after 'height' property):

<code><pre>
[ERROR] :  [ERROR] Error processing style "/Users/dhyde/Downloads/21st-Century-Insurance/app/styles/contactUs/addContact.tss"
[ERROR] :  [ERROR] Expected bare word, comment, end of line, string or whitespace but "}" found.
[ERROR] :  [ERROR] Do you have an extra comma in your style definition?
[ERROR] :  [ERROR] - line:    9
[ERROR] :  [ERROR] - column:  1
[ERROR] :  [ERROR] - offset:  142
[ERROR] :  Alloy compiler failed
</pre></code>

<h3>Comments</h3>

<ol>
<li>Dustin Hyde 2013-01-18

   Verified fixed in the following environment:
   
   alloy: 0.3.6
   android emulator: 2.3.3
   titanium sdk: 3.0.0.GA
   titanium cli: 3.0.22</li>
<li>Tony Lukasavage 2013-01-18

   Updated the TSS parsing grammar to allow looser use of commas, regenerated the grammar-based parser, and modified the testing/grammar test app with extra commas to make sure that the parser handles them correctly. 
   
   Releasing 0.3.6 from the 0_3_X branch to cover this fix. Will add to the 1_0_X/master branch as well. </li>
<li>Federico Casali 2013-01-26

   Verified fixed also on 1_0_X master branch
   android device: 4.2
   iPhone devices: iPhone 6 and iPad 4.3.5
   TiSDK: 3.0.2.v20130124164131
   CLI: 3.0.23
   
   Closing.</li>
</ol>


<p><a href="/ALOY/ALOY-474.json">JSON Source</a></p>