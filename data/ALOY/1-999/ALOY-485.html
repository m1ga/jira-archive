---
title: "[ALOY-485] Collection binding on views for iOS incorrectly repopulating UI"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-10-24T19:28:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.3.0, 2013 Sprint 22</td></tr>
<tr><th>Components</th><td>Runtime</td></tr>
<tr><th>Labels</th><td>ios</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2013-01-23T22:19:54.000+0000</td></tr>
<tr><th>Updated</th><td>2013-12-10T00:03:12.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>problem</h4>

This issue is covered in detail in the related and dependent linked tickets. In brief, iOS remove() calls (used in collection binding for views) are performed asynchronously. If you are doing a "remove all" in a loop, this unfortunately means that operations that are performed after those remove() calls may actually be performed before the remove() is complete. This will cause some weird behavior if you are attempting to add views to the view hierarchy directly after the "remove all", which collection binding for views does.

<h4>impact</h4>

Any Titanium views that use the typical add()/remove() functions to establish parent/child relationships in the UI will behave unreliably on iOS until TIMOB-12399 is resolved. For the sake of clarity, here is a brief listing of views that would and would not work. The list is not comprehensive, but a few examples should make it more readily apparent exactly what this issue impacts:

* Will work
** Ti.UI.ScrollableView, as it uses *views* to establish its view hierarchy
** Ti.UI.TableView, as it uses *data* to establish its rows
** Ti.UI.ListView (in Alloy 1.2.0) as it uses *sections* to establish its sections
** Other UI components with special APIs for managing views (Buttonbar, TabbedBar)
* Will not work (as it uses add()/remove())
** Ti.UI.View
** Ti.UI.ScrollView
** Ti.UI.Window
** Essentially any UI component that does not have a special API for managing views contained within it

<h4>notes</h4>

Even after this ticket is resolved, TiSDK 3.2.0 or greater will be required for this to work in Alloy.

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2013-07-27

   As a (manual) workaround I populate a new "wrapper" <code>Ti.UI.View</code>, remove the previous wapper and then add the new one to the <code>Ti.UI.View</code> I need to populate.</li>
<li>Tony Lukasavage 2013-10-24

   Resolved as a result TIMOB-12399. TiSDK should be pulled from master, must be at least as recent as this commit: <a href="https://github.com/appcelerator/titanium_mobile/commit/affad6c1b077db76c795a91f861fa0a45c7c6af6" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/affad6c1b077db76c795a91f861fa0a45c7c6af6</a>
   
   test app: <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/models/journal" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/models/journal</a>
   
   
   Functional testing should be performed on an iOS sim/device.
   
   <h4>Run the app on iOS</h4>
   <h4>Repeatedly add entries to the journal. Make sure to do around 10 to be sure.</h4>
   <h4>Ensure that each time a journal entry is added that they are sorted in the right order, with the most recent journal entry at the top, the oldest at the bottom. Before the above version of the TiSDK, the order of the journal entries was not guaranteed and was often out of order.</h4>
   </li>
<li>Federico Casali 2013-12-10

   Verified fixed.
   
   TiSDK 3.2.0.v20131209000852
   CLI 3.2.0-beta
   Alloy 1.3.0-beta
   Titanium Studio 3.2.0.201312081251
   
   iOS simulator
   iPad Mini iOS 7
   iPad Mini iOS 6
   Nexus Galaxy 4.3
   
   Closing</li>
</ol>


<p><a href="/ALOY/ALOY-485.json">JSON Source</a></p>