---
title: "[ALOY-496] Alloy: formFactor attribute wrong behaviors"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2013-02-06T00:06:31.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.0.0</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 03</td></tr>
<tr><th>Components</th><td>Samples & Templates, Titanium SDK</td></tr>
<tr><th>Labels</th><td>qe-sdk3.0.2</td></tr>
<tr><th>Reporter</th><td>Federico Casali</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2013-02-05T00:37:41.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-22T13:21:03.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>
setting 'formFactor' attribute, does not always generate the intended behavior

<h4>Steps to reproduce </h4>
(code taken from "advanced/device_query", modifying formFactor attributes for the handheld devices)

<code><pre>
"#osLabel": {
	text: "Generic"
},
"#osLabel[platform=ios]": {
	text: "iOS device\n(size unknown)"
},
"#osLabel[platform=ios formFactor=tablet]": {
	text: "iPad"
},
"#osLabel[platform=ios formFactor=foo]": {
	text: "iPhone"
},
"#osLabel[platform=android formFactor=bar]": {
	text: "AndroidPhone",
	color: "#000"
},
"#osLabel[platform=android formFactor=tablet]": {
	text: "AndroidTablet",
	color: "#000"
},
</pre></code>

Results:
. iPhone: always displaying 'iPhone' text, also when setting anything as 'formFactor' and different than 'tablet'

. iPad: works fine, displaying 'iPad' text only when setting 'tablet' word as 'formFactor'

. Android Phone and Tablets: Always displaying the text associated to the Conditional Code part if a 'formFactor' attribute is set with any value. However, if only 'formFactor=tablet' is specified (commenting out the 'formFactor=bar' part), the condition is not satisfied and the 'Generic' text is displayed, even on tablets.
i.e. in the sample code, run on tablet devices, 'Android' text is always displayed instead of 'Android\nTablet'

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2013-02-05

   I don't think it's worth inspecting the unexpected behavior of misusing the formFactor attribute in device queries personally. Does it ever actually fail when used properly? Do we really need to dig into this one as it is documented?</li>
<li>Federico Casali 2013-02-05

   When used properly (i.e. using the original 'advanced/device_query' Sample code), it fails for Android Tablets, always detected just as 'Android'.
   Not been able to correctly detect Android Tablet.
   
   <code><pre>
   "#osLabel[platform=android]": {
   	text: "Android",
   	color: "#000"
   },
   "#osLabel[platform=android formFactor=tablet]": {
   	text: "Android\nTablet",
   	color: "#000"
   },
   </pre></code></li>
<li>Tony Lukasavage 2013-02-05

   I can't reproduce the issue with the advanced/device_query app. Just tested on emulator against 2 separate android tablets and they both show the styles for android tablet. Any more details on how you ran this or can i close the ticket?</li>
<li>Tony Lukasavage 2013-02-06

   This is caused by the same issue in ALOY-497</li>
<li>Federico Casali 2013-02-07

   Verified as fixed with the latest 1_0_X version
   (Git commit b97ead593b6e7c2b2a3beae4cb9a8720dd3931b6)
   
   All JS files are regenerated on each build.</li>
</ol>


<p><a href="/ALOY/ALOY-496.json">JSON Source</a></p>