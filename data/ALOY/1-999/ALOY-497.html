---
title: "[ALOY-497] Alloy: Journal sample runtime error switching between different platforms"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-06-03T19:44:32.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.4.0, Alloy 1.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.0.0, 2013 Sprint 03</td></tr>
<tr><th>Components</th><td>Samples & Templates</td></tr>
<tr><th>Labels</th><td>qe-sdk3.0.2, regression</td></tr>
<tr><th>Reporter</th><td>Federico Casali</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2013-02-05T03:50:31.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-22T13:21:12.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>
Runtime error when pressing the menu button in the Journal Sample app in Android

<h4>Steps</h4>
1. Install and run the app
2. Click on the menu button

Result: Runtime Error - attached screenshot and log

No issues on iOS devices.


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-497_35299/device-2013-02-04-194049.png">device-2013-02-04-194049.png</td></td><td>2013-02-05T03:50:31.000+0000</td><td>66520</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-497_35298/journal_android.log">journal_android.log</td></td><td>2013-02-05T03:50:31.000+0000</td><td>1589</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-497_35317/journal_ios.log">journal_ios.log</td></td><td>2013-02-05T23:42:56.000+0000</td><td>458</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-497_48557/Runtime error_Android.png">Runtime error_Android.png</td></td><td>2014-06-03T10:26:32.000+0000</td><td>62229</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-497_35318/Screen Shot 2013-02-05 at 3.00.49 PM.png">Screen Shot 2013-02-05 at 3.00.49 PM.png</td></td><td>2013-02-05T23:42:56.000+0000</td><td>121529</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2013-02-05

   You would get that error if you attempted to run this app on android but did not specify android in the compile command. For example:
   
   <code><pre>
   alloy compile
   </pre></code>
   
   would cause the problem, but this would work fine:
   
   <code><pre>
   alloy compile --config platform=android
   </pre></code>
   
   I have confirmed that this app works fine on Android when given the appropriate compile options. If there is more information about your specific workflow ("install and run" was kind of vague), we can address it. In the meantime the ticket will be closed.</li>
<li>Federico Casali 2013-02-05

   From Studio:
   
   1. create a new Alloy Project from Studio and copy the 'models/journal' Sample code in there
   2. Build-run for iOS
   result: Journal app works as expected
   3. Build-run for Android
   result: Bug reproduced - Journal app runs and clicking on the menu the runtime error is thrown
   
   4. cd to the project folder from terminal and run:
   <code><pre>	
   alloy compile --config platform=android
   </pre></code>
   5. Build-run again for Android
   result: Bug still reproducible - Journal app runs and clicking on the menu the runtime error is thrown
   
   6. cd to the project folder and manually delete the Resources folder, then from terminal run:
   <code><pre>	
   alloy compile --config platform=android
   </pre></code>
   7. Build-run again for Android
   result: Journal app works as expected
   
   8. Build-run for iOS
   result: App does not start (Application Error - see screenshot and Error log attached)
   
   9. cd to the project folder and manually delete the Resources folder, then from terminal run:
   <code><pre>	
   alloy compile --config platform=ios
   </pre></code>
   7. Build-run again for iOS
   result: Journal app works as expected</li>
<li>Tony Lukasavage 2013-02-05

   I need to make sure the files are regenerated and copied in again when platforms change. Since they can include compiler directives affected by deploy type and platform I should probably be regenerating any JS file.</li>
<li>Tony Lukasavage 2013-02-06

   All JS files are regenerated and copied in on each build to ensure that compiler directives are accounted for.</li>
<li>Federico Casali 2013-02-07

   Verified as fixed with the latest 1_0_X version
   (Git commit b97ead593b6e7c2b2a3beae4cb9a8720dd3931b6)
   
   All JS files are regenerated on each build.
   </li>
<li>Neha Mittal 2014-06-03

   This is a regression since it is working fine with alloy 1.3.1 GA.
   
   I am able to reproduce the issue, getting run time error on Android platform using below environment:
   
   Appc Studio: 3.3.0.201405271647
   SDK build: 3.3.0.v20140602174112
   acs: 1.0.14
   npm: 1.3.2
   alloy: 1.4.0-beta
   CLI: titanium-3.3.0-beta2
   titanium-code-processor:1.1.1
   Xcode: 5.1.1
   Osx: Mavericks(10.9.2)
   Device: Galaxy Nexus (4.1.1)
   
   Works fine on iOS device.
   
   Please refer the attached screenshot for your reference. Hence reopening the issue.</li>
<li>Federico Casali 2014-06-03

   </li>
</ol>


<p><a href="/ALOY/ALOY-497.json">JSON Source</a></p>