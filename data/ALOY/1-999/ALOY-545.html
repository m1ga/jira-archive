---
title: "[ALOY-545] Setting widget view-controller from within XML views"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-03-18T20:50:20.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.1.0, 2013 Sprint 06</td></tr>
<tr><th>Components</th><td>XML</td></tr>
<tr><th>Labels</th><td>alloy, compiler, controller, views, xml</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2013-02-23T22:20:46.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-07T22:25:57.000+0000</td></tr>
</table>

<h3>Description</h3>

If you require a widget in a XML view like this:

<code><pre>
&lt;widget src="nl.fokkezb.tweetsView" foo="bar" id="myWidget"&gt;&lt;/widget&gt;
</pre></code>

It generates code like this:

<code><pre>
$.__views.myWidget = Alloy.createWidget("nl.fokkezb.tweetsView", "widget", {
     id: "myWidget",
     foo: "bar"
});
</pre></code>

Let’s take a look at the code for createWidget in alloy.js:

<code><pre>
exports.createWidget = function(id, name, args) {
    return new (require("alloy/widgets/" + id + "/controllers/" + (name || "widget")))(args);
};
</pre></code>

As you can see, the second argument specifies the controller to require from the widget. You might not have known this, but the docs do mention that widget can contain multiple view-controllers, just like your app does.

Unfortunately, to use this feature you need to create the widget in your controller using code similar to the second fragment above. It’s currently not possible to do this in the view.

This is a missed opportunity to use a singe widget to expose a collection of reusable UI elements:

<code><pre>
&lt;view&gt;
     &lt;widget src="nl.fokkezb.ui" name="myFancyButton"&gt;&lt;/widget&gt;
     &lt;widget src="nl.fokkezb.ui" name="myCustomView"&gt;&lt;/widget&gt;
     &lt;widget src="nl.fokkezb.ui" name="myHorizontalTable"&gt;&lt;/widget&gt;
     …
&lt;/view&gt;
</pre></code>

Or create a widget that can be used in multiple contexts:

<code><pre>
&lt;tabgroup&gt;
     &lt;widget src="nl.fokkezb.tweetsView" name="tab"&gt;&lt;/widget&gt;
     &lt;tab&gt;
          &lt;widget src="nl.fokkezb.tweetsView" name="window"&gt;&lt;/widget&gt;
     &lt;/tab&gt;
&lt;/tabgroup&gt;
</pre></code>

So my feature request / improvement would be to support the name attribute for <Widget> elements, whose value would be used as the second argument for createWidget. I’ve made the necessary changes to Alloy.Require.js and did a pull request for this:

<a href="https://github.com/appcelerator/alloy/pull/111" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/111</a>

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2013-03-18

   Also updated widgets/basic test app to use this functionality: 
   
   <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/widgets/basic" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/widgets/basic</a></li>
<li>Shyam Bhadauria 2013-05-14

   Tested the app - <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/widgets/basic" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/widgets/basic</a>
   It is working fine with alloy version 1.1.2.Can close the bug.</li>
</ol>


<p><a href="/ALOY/ALOY-545.json">JSON Source</a></p>