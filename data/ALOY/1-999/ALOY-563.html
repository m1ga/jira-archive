---
title: "[ALOY-563] Allow for autoinitialization of Alloy repetition views from global collections on creation"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-03-30T14:10:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.0.0, 2013 Sprint 04</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>alloy, alloy-generate</td></tr>
<tr><th>Reporter</th><td>Davide Cassenti</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2013-03-12T11:38:40.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-07T22:25:46.000+0000</td></tr>
</table>

<h3>Description</h3>

A repetition view that is bound to a global collection is not initialized to the contents of the collection upon creation. Consider the following snippet:

<code><pre>
&lt;ScrollView id="documentsContainer" layout="vertical" dataCollection="document" dataFilter="filterDocuments" onSingletap="documentRowClicked"&gt;
    &lt;Require src="indexdocumentrow" notClickable="0"/&gt;
&lt;/ScrollView&gt;
</pre></code>

The autogenerated initialization code for this piece looks like this:

<code><pre>
var __alloyId31 = function(e) {
        var models = filterDocuments(Alloy.Collections.document), children = $.__views.documentsContainer.children;
        for (var d = children.length - 1; d &gt;= 0; d--) $.__views.documentsContainer.remove(children[d]);
        len = models.length;
        for (var i = 0; i &lt; len; i++) {
            var __alloyId28 = models[i];
            __alloyId28.__transform = {};
            var __alloyId30 = Alloy.createController("indexdocumentrow", {
                notClickable: "0",
                id: "__alloyId29",
                $model: __alloyId28
            });
            __alloyId30.setParent($.__views.documentsContainer);
        }
    };
    Alloy.Collections.document.on("fetch destroy change add remove reset", __alloyId31);
</pre></code>

To have this repeater view initialize, I need to either fetch the collection (which is already done at the beginning of the app) or fire one of the events from the last line, which is more suitable and which is what I do:

<code><pre>
Alloy.Collections.document.trigger("change");
</pre></code>

The problem now is, when I fire this event, all listeners in all open windows get this event. This means that all views in every window are first getting removed and then initialized again. This leads to enormous lagging.

As for me, there must be a markup attribute or another means to initialize the collection right upon creation, this would make it logical.

See original discussion: <a href="https://developer.appcelerator.com/question/149192/initialization-of-a-repeater-view-with-databinding" rel="nofollow" target="_blank">https://developer.appcelerator.com/question/149192/initialization-of-a-repeater-view-with-databinding</a>

<h3>Comments</h3>

<ol>
<li>Andrey Chirikba 2013-03-29

   I would suggest at least making the initialization function (currently an autogenerated name) accessible to user-written code. This would mean we can call it upon controller initialization without resorting to faking events. This would also help the user to reinitialize the view on events other than the default ones.</li>
<li>Tony Lukasavage 2013-03-30

   Not exactly a duplicate, but this is actually resolved by ALOY-489. You can use the new <code>dataFunction</code> attribute to give an explicit name to the binding function.
   
   <h4>index.xml</h4>
   
   <code><pre>
   &lt;Alloy&gt;
       &lt;Window&gt;
           &lt;TableView dataCollection="someCollection" dataFunction="doBinding"/&gt;
       &lt;/Window&gt;
   &lt;/Alloy&gt;
   </pre></code>
   
   <h4>index.js</h4>
   
   <code><pre>
   // fire binding manually
   doBinding();
   </pre></code></li>
</ol>


<p><a href="/ALOY/ALOY-563.json">JSON Source</a></p>