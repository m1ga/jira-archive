---
title: "[ALOY-596] Function is being called twice When adding alternate Window platform="android" on view.xml"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2014-05-01T20:25:17.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>alloy</td></tr>
<tr><th>Reporter</th><td>Mardo Del Cid</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2013-03-31T20:03:14.000+0000</td></tr>
<tr><th>Updated</th><td>2014-05-01T20:25:17.000+0000</td></tr>
</table>

<h3>Description</h3>

app/controllers/home.js:
//////////////////////////////////////////
var openBrowserOverlay;

openBrowserOverlay = function() {
 alert("Clicked!");
};
//////////////////////////////////////////

app/views/home.xml:
//////////////////////////////////////////
<Alloy>
    <Window id="navWin">
        <Button onClick="openBrowserOverlay" id="addButton"> </Button>
    </Window>
    <Window id="self" platform="android">
       <Button onClick="openBrowserOverlay" id="addButton"> </Button>
    </Window>
</Alloy>
//////////////////////////////////////////

When clicking "addButton" the function is called 2 times (alert appears 2 times)

However, changing app/controllers/home.js to:
//////////////////////////////////////////
function openBrowserOverlay() {
  alert("Clicked!");
};
//////////////////////////////////////////
Solves the problem.

It's only happening when defining the function with "var" (BTW, it's the way coffeescript defines functions, that's why i noticed) and having an alternate Window with platform="android".


<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2013-04-02

   It looks like on android you'll have 2 windows/buttons right on top of each other, and the buttons will both have the id "addButton". This would likely account for the alert being called twice. I'm going to close this for now and will re-open if more details are provided.</li>
<li>Mardo Del Cid 2013-04-02

   Hello Tony,
   
   I'm testing on the iOS Simulator, not on Android.
   Also, i would like to remark that works OK when using the standard way to define a function:
   <code><pre>
   function openBrowserOverlay() { 
       alert("Clicked!"); 
   };
   </pre></code>
   
   But it's called twice when defining the function as a variable:
   <code><pre>
   var openBrowserOverlay;
   openBrowserOverlay = function() { 
       alert("Clicked!"); 
   };
   </pre></code>
   
   
   To easily replicate the issue, create a new alloy app and change
   
   *index.js* to:
   <code><pre>
   var doClick = function(e) {  
       alert($.label.text);
   }
   
   $.index.open();
   </pre></code>
   
   *index.xml* to:
   <code><pre>
   &lt;Alloy&gt;
   	&lt;Window class="container" platform="ios"&gt;
   		&lt;Label id="label" onClick="doClick"&gt;Hello, World&lt;/Label&gt;
   	&lt;/Window&gt;
   	&lt;Window id="self" platform="android"&gt;
   		&lt;Label id="label" onClick="doClick"&gt;Hello, World&lt;/Label&gt;
   	&lt;/Window&gt;
   &lt;/Alloy&gt;
   </pre></code>
   // Note that i added *platform="ios"* to the first Window
   
   And run it with iOS Simulator:
   titanium build -p ios
   
   P.S. Thanks for the great framework!</li>
<li>Tim Poulsen 2014-02-26

   This appears to be resolved by the fix for ALOY-691. </li>
<li>Tim Poulsen 2014-05-01

   Tested and confirmed that this is no longer an issue thanks to the changes made in ALOY-691.</li>
</ol>


<p><a href="/ALOY/ALOY-596.json">JSON Source</a></p>