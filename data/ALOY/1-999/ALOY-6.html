---
title: "[ALOY-6] Generated HTML object tree full of whitespace elements"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-07-19T11:52:03.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>2012 Sprint 14</td></tr>
<tr><th>Fix Version/s</th><td>2012 Sprint 14</td></tr>
<tr><th>Components</th><td>XML</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2012-05-18T13:27:17.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-22T13:21:17.000+0000</td></tr>
</table>

<h3>Description</h3>

Something is wrong with the html.pegjs grammar for HTML. It is generating loads of unnecessary elements in the generated object tree that will make parsing more difficult and time consuming in terms of performance. 

here's a snippet of what I'm seeing:

<code><pre>
[ { tag: 'html',
    attrs: [],
    body: 
     [ '\n\t',
       { tag: 'head',
         attrs: [],
         body: 
          [ '\n\t\t',
            { tag: 'title',
              attrs: [],
              body: [ 'Declarative UI Master Detail Test' ] },
            '\n\t\t',
            { tag: 'script',
              attrs: [ [ 'src', '/controller/index.js' ] ],
              body: [] },
            '\n\t\t',
            { tag: 'style',
              attrs: [],
              body: [ '\n\t\t#mainWindow {\n\t\t\t-ti-layout: \'vertical\';\n\t\t\t-ti-navBarHidden: true;\n\t\t\t-ti-backgroundColor: \'#00a\';\n\t\t}\n\t\t' ] },
            '\n\t' ] },
       '\n\t',
// and so on....
</pre></code>

We need to correct the HTML grammar so that these whitespace elements are no longer included in the generated object tree. 

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2012-05-18

   Details here: [<a href="https://github.com/appcelerator/ZipTi/commit/8e1e091f5c5eb0a5c6bdd1c8e9e2da6dd5041ae0" rel="nofollow" target="_blank">https://github.com/appcelerator/ZipTi/commit/8e1e091f5c5eb0a5c6bdd1c8e9e2da6dd5041ae0</a>](<a href="https://github.com/appcelerator/ZipTi/commit/8e1e091f5c5eb0a5c6bdd1c8e9e2da6dd5041ae0)" rel="nofollow" target="_blank">https://github.com/appcelerator/ZipTi/commit/8e1e091f5c5eb0a5c6bdd1c8e9e2da6dd5041ae0)</a></li>
</ol>


<p><a href="/ALOY/ALOY-6.json">JSON Source</a></p>