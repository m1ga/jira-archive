---
title: "[ALOY-611] Add <Require> support to ListView"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Sub-task</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-07-31T20:40:36.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.2.0, 2013 Sprint 16, 2013 Sprint 08</td></tr>
<tr><th>Components</th><td>XML</td></tr>
<tr><th>Labels</th><td>notable</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2013-04-08T14:43:39.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-07T22:25:39.000+0000</td></tr>
</table>

<h3>Description</h3>

<Require> tags need to handle the <code>isViewTemplate</code> condition so that they can return ListView compatible code. Right now only explicit UI components are handled in the markup.

<code><pre>
&lt;Alloy&gt;
    &lt;ListView&gt;
        &lt;Templates&gt;
            &lt;ItemTemplate name="template1" height="100"&gt;
                &lt;ImageView bindId="image" left="15" top="6" bottom="6"/&gt;
                &lt;Label bindId="label" left="100" right="10"/&gt;
            &lt;/ItemTemplate&gt;
            &lt;ItemTemplate name="template2" height="100"&gt;
                &lt;!-- this won't work until this is resolved --&gt;
                &lt;Require src="someRequire"/&gt;
            &lt;/ItemTemplate&gt;
        &lt;/Templates&gt;
    &lt;/ListView&gt;
&lt;/Alloy&gt;
</pre></code>

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2013-04-11

   test app: <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/ui/listview" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/ui/listview</a>
   
   it includes required itemtemplates and listitems</li>
<li>Fokke Zandbergen 2013-07-31

   The test app does *not* include the very example of this ticket. It [does include](<a href="https://github.com/appcelerator/alloy/blob/master/test/apps/ui/listview/views/templates.xml)" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/test/apps/ui/listview/views/templates.xml)</a> a test where the <code>&lt;Require /&gt;</code> is on the same level as the other <code>&lt;ItemTemplate /&gt;</code>, but does not test for a <code>&lt;Require /&gt;</code> used *IN* an <code>&lt;ItemTemplate /&gt;</code>, like in the description of this ticket.
   
   When using a <code>&lt;Require /&gt;</code> inside an <code>&lt;ItemTemplate /&gt;</code> on the master version from Git, you'll get the following error during compile, which obviously should at least be caught to display a clear syntax error:
   
   <code><pre>
   
   /usr/local/lib/node_modules/alloy/Alloy/commands/compile/parsers/Alloy.Abstract.ItemTemplate.js:60
                                           return childTemplates + '.push(' + state.item.symbol + ');';
                                                                                        ^
   TypeError: Cannot read property 'symbol' of undefined
       at Object.CU.generateNodeExtended.post (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/parsers/Alloy.Abstract.ItemTemplate.js:60:51)
       at Object.exports.parse (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/parsers/base.js:14:17)
       at Object.exports.parse (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/parsers/Alloy.Require.js:12:27)
       at Object.exports.generateNode (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/compilerUtils.js:271:48)
       at Object.exports.generateNodeExtended (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/compilerUtils.js:223:17)
       at /usr/local/lib/node_modules/alloy/Alloy/commands/compile/parsers/Alloy.Abstract.ItemTemplate.js:55:15
       at Array.forEach (native)
       at Function._.each._.forEach (/usr/local/lib/node_modules/alloy/Alloy/lib/alloy/underscore.js:79:11)
       at parse (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/parsers/Alloy.Abstract.ItemTemplate.js:54:5)
       at Object.exports.parse (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/parsers/base.js:11:17)
       at Object.exports.parse (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/parsers/Alloy.Abstract.ItemTemplate.js:10:27)
       at Object.exports.generateNode (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/compilerUtils.js:271:48)
       at Object.exports.generateNodeExtended (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/compilerUtils.js:223:17)
       at /usr/local/lib/node_modules/alloy/Alloy/commands/compile/parsers/Ti.UI.ListView.js:57:17
       at Array.forEach (native)
       at Function._.each._.forEach (/usr/local/lib/node_modules/alloy/Alloy/lib/alloy/underscore.js:79:11)
       at /usr/local/lib/node_modules/alloy/Alloy/commands/compile/parsers/Ti.UI.ListView.js:48:6
       at Array.forEach (native)
       at Function._.each._.forEach (/usr/local/lib/node_modules/alloy/Alloy/lib/alloy/underscore.js:79:11)
       at parse (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/parsers/Ti.UI.ListView.js:31:4)
       at Object.exports.parse (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/parsers/base.js:11:17)
       at Object.exports.parse (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/parsers/Ti.UI.ListView.js:17:27)
       at Object.exports.generateNode (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/compilerUtils.js:271:48)
       at /usr/local/lib/node_modules/alloy/Alloy/commands/compile/compilerUtils.js:332:29
       at Array.forEach (native)
       at Function._.each._.forEach (/usr/local/lib/node_modules/alloy/Alloy/lib/alloy/underscore.js:79:11)
       at Object.exports.generateNode (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/compilerUtils.js:327:5)
       at /usr/local/lib/node_modules/alloy/Alloy/commands/compile/index.js:496:28
       at Array.forEach (native)
       at Function._.each._.forEach (/usr/local/lib/node_modules/alloy/Alloy/lib/alloy/underscore.js:79:11)
       at parseAlloyComponent (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/index.js:493:5)
       at /usr/local/lib/node_modules/alloy/Alloy/commands/compile/index.js:241:6
       at Array.forEach (native)
       at Function._.each._.forEach (/usr/local/lib/node_modules/alloy/Alloy/lib/alloy/underscore.js:79:11)
       at /usr/local/lib/node_modules/alloy/Alloy/commands/compile/index.js:233:6
       at Array.forEach (native)
       at Function._.each._.forEach (/usr/local/lib/node_modules/alloy/Alloy/lib/alloy/underscore.js:79:11)
       at module.exports (/usr/local/lib/node_modules/alloy/Alloy/commands/compile/index.js:229:4)
       at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/alloy/Alloy/alloy.js:91:46)
       at Module._compile (module.js:456:26)
       at Object.Module._extensions..js (module.js:474:10)
       at Module.load (module.js:356:32)
       at Function.Module._load (module.js:312:12)
       at Module.require (module.js:364:17)
       at require (module.js:380:17)
       at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/alloy/bin/alloy:3:1)
       at Module._compile (module.js:456:26)
       at Object.Module._extensions..js (module.js:474:10)
       at Module.load (module.js:356:32)
       at Function.Module._load (module.js:312:12)
       at Function.Module.runMain (module.js:497:10)
       at startup (node.js:119:16)
       at node.js:901:3
   </pre></code>
   
   Thanks to Matthew Lanham fro [bringing this under my attention](<a href="https://github.com/FokkeZB/nl.fokkezb.cachedImageView/issues/5)." rel="nofollow" target="_blank">https://github.com/FokkeZB/nl.fokkezb.cachedImageView/issues/5).</a></li>
<li>Tony Lukasavage 2013-07-31

   Thanks for the heads up guys. I'll address this specific situation.</li>
<li>Tony Lukasavage 2013-07-31

   PR: <a href="https://github.com/appcelerator/alloy/pull/198" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/198</a>
   
   After additional research, controllers within ItemTemplates don't make a great deal of sense given the entirely new structure used by the ListView API. There's no way to tie the UI components that compose the ItemTemplate back to the originating controller code. Due to this fact, the elements inside the <ItemTemplate> will need to be basic Titanium API elements, not controllers or widgets for the time being. 
   
   If you use a <Require> or <Widget> in an <ItemTemplate> now, you'll get an error like this at compile time:
   
   <code><pre>
   [ERROR] Error with &lt;Require&gt; at line 11
   [ERROR] &lt;ItemTemplate&gt; cannot contain &lt;Require&gt; or &lt;Widget&gt; elements.
   [ERROR] ListView currently only supports Titanium API elements:
   [ERROR]   examples: &lt;Label&gt;, &lt;Button&gt;, &lt;ImageView&gt;, etc...
   [ERROR] Please reference the ListView guide at docs.appcelerator.com for more details.
   [ERROR] Alloy compiler failed
   </pre></code>
   
   I'm going to resolve this issue, but will revisit it to be addressed with more than a compile error message at a future date. There would need to be significant work done on code generation just to facilitate this particular usage of ItemTemplate, and I don't believe the large effort necessary to do that is warranted right now.</li>
<li>Fokke Zandbergen 2013-08-01

   Agree 100%</li>
<li>André Böhlke 2014-06-02

   I still have the same problem in version 1.3.1. The resolution should not be "fixed" but "won't fix"</li>
<li>Manuel Lehner 2014-08-26

   Can this ticket be re-opened until there's a workaround? As André mentioned this was not fixed. Using Widgets and Require in Templates would be awesome.</li>
<li>Fokke Zandbergen 2014-08-26

   The original issue *IS* fixed. I think [~manuellehner] you better create a new issue asking for using <code>&lt;Require /&gt;</code> and <code>&lt;Widget /&gt;</code> in item templates.</li>
<li>Manuel Lehner 2014-08-26

   </li>
</ol>


<p><a href="/ALOY/ALOY-611.json">JSON Source</a></p>