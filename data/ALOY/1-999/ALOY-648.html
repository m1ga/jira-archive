---
title: "[ALOY-648] Allow ListViewAnimationProperties to be passed to functions while data binding"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-05-01T22:36:29.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.2.0, 2013 Sprint 09</td></tr>
<tr><th>Components</th><td>Models, Titanium SDK, XML</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2013-05-01T16:42:52.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-07T22:26:06.000+0000</td></tr>
</table>

<h3>Description</h3>

Currently when data binding with a ListSection as per ALOY-609, the code for adding items to the sections is totally generated by Alloy. Unfortunately as the ListView API is written, it requires that the iOS animation properties of the ListView be passed into any given item insertion or deletion function, it is not set at the ListView level. To facilitate this, Alloy needs some way to expose to developers a means to set these properties on a per-UI-update basis. 

<code><pre>
&lt;ListSection id="section" dataCollection="info" dataFunction="loadData"&gt;
</pre></code>

<code><pre>
// Animation options for ListView are only supported on iOS...
if (OS_IOS) {
	// Add "opts" to the "dataFunction" function object. In this case, we'll be
	// adding "animation" options that will be used by the ListView's generated
	// data binding code to make sure our ListItems don't animate when 
	// updated.
	// TODO: There's a Titanium bug where ListItems still animate when using
	//       the ListSection.setItems() function. When TIMOB-13737 is resolved,
	//       this will work as expected and the ListItems won't animate when
	//       they are added.
	loadData.opts = {
		animation: {
			animated: false
		}
	};
}
</pre></code>

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2013-05-01

   This issue is relevant to iOS platform only as it is the only one that supports the animation object being passed to the ListView: <a href="http://docs.appcelerator.com/titanium/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/latest/#</a>!/api/ListViewAnimationProperties
   
   *DISCLAIMER*: This is actual unverifiable until the ticket I logged, TIMOB-13737, is resolved. That ticket deals with the fact that ListSection.setItems() does not respect the animation object passed to it as its second argument. So I can confirm that the object gets constructed and passed to setItems() as expected, but since this functionality is broken at the Titanium level, there's no way to totally verify for now.
   
   PR: <a href="https://github.com/appcelerator/alloy/pull/126" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/126</a>
   test case: <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-648" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-648</a>
   
   During functional testing, only when TIMOB-13737 is resolved, the items should appear on the listview when the button is clicked, but they should not be animated on. To be sure of the behavior, run once with the section wrapped in the OS_IOS conditional, then once with it. You should notice without the OS_IOS conditional block that the items animate when added. With the conditional block they should not animate when added.</li>
<li>Federico Casali 2013-07-29

   Verification blocked by TIMOB-13737</li>
</ol>


<p><a href="/ALOY/ALOY-648.json">JSON Source</a></p>