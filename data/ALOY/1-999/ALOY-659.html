---
title: "[ALOY-659] Bad behavior when setting a platform specific 'controller' .JS with no platform specific associated .XML"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-08-01T01:19:48.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.1.2, Alloy 1.1.1, Alloy 1.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.3.0</td></tr>
<tr><th>Components</th><td>Runtime, Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Federico Casali</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2013-05-03T23:11:06.000+0000</td></tr>
<tr><th>Updated</th><td>2013-10-11T23:14:26.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem description</h4>

When setting a platform specific Controller .js file with no associated platform specific .xml , App does not run with bad error message.

See sample attached



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-659_38108/ALOY-659_output.log">ALOY-659_output.log</td></td><td>2013-05-04T05:10:39.000+0000</td><td>19486</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-659_38101/controller_iosFolder.zip">controller_iosFolder.zip</td></td><td>2013-05-03T23:11:06.000+0000</td><td>1147</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-659_38109/Screen Shot 2013-05-03 at 10.07.32 PM.png">Screen Shot 2013-05-03 at 10.07.32 PM.png</td></td><td>2013-05-04T05:10:39.000+0000</td><td>63155</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2013-05-04

   [~fcasali] can you add the actual error and console output (debug level) to the ticket description?</li>
<li>Federico Casali 2013-05-04

   Attaching output log and screenshot</li>
<li>Tony Lukasavage 2013-08-01

   PR: <a href="https://github.com/appcelerator/alloy/pull/201" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/201</a>
   test app: <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-659" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-659</a>
   
   Run the app on all supported platforms. Make sure it compiles successfully. When the app runs, it should also open an alert dialog with the name of the current platform.</li>
<li>Mark Mokryn 2013-09-15

   On 1.2.2-beta it's also buggy in the inverse case (which is more troubling) - when you have a platform specific view but a single controller. Tested this with your Navigation Window test app - just pulled win.js from the controllers/ios into controllers. Seems to work fine with latest 1.3.0 Alloy from Github. It would be great if these fixes can be merged into production Alloy ASAP (i.e. for 3.1.3), since it's *really* hard to maintain DRY code when we have to keep multiple JS files due to this bug. Thanks!</li>
<li>Tony Lukasavage 2013-09-15

   [~mokesmokes] It's unlikely that this will be put into 1.2.2 since that version is already in its release review process. I can see how far along we are, but no promises that this will be able to get into Alloy any quicker at the moment.</li>
<li>Mark Mokryn 2013-09-15

   Thanks Tony. Then any practical suggestion for cases such as when the top view elements differ between Android (e.g. Window) and iOS (e.g. NavigationWindow)? Is Alloy 1.3.0 stable enough for use, or do we really need to double up on the controller code due to this bug (that would be quite painful to maintain), or do you have another practical suggestion?
   Thanks again.</li>
<li>Mark Mokryn 2013-09-15

   BTW, regarding my previous comment: apparently 1.3.0 (coupled with 3.1.3RC) works fine on the iOS simulators (AFAICT), however misbehaves on actual iOS 6.1 devices. Have found this to be the case on both my app and your Navigation Window test app - HTH.</li>
<li>Tony Lukasavage 2013-09-15

   [~mokesmokes] This is a result of TIMOB-14884. The 1.3.0 branch will not work properly on ios devices until that ticket is resolved. At that point, when Alloy 1.3.0 is released, it will require TiSDK 3.2.0+.</li>
<li>Federico Casali 2013-10-11

   Verified as fixed. 
   
   Alloy 1.3.0
   CLI 3.2.0
   TiSDK 3.2.0.v20131010163242
   Titanium Studio 3.1.4
   
   Closing.</li>
<li>Mark Mokryn 2013-10-11

    Federico - was this fixed for both cases? i.e. 2 JS files and one XML file, and 2 XML files and one JS file?
    Both didn't work.
    Thanks</li>
</ol>


<p><a href="/ALOY/ALOY-659.json">JSON Source</a></p>