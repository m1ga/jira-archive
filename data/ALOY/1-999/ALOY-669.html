---
title: "[ALOY-669] Generated style arrays sometimes contain "undefined" keys"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-05-24T14:06:33.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.2.0, 2013 Sprint 11</td></tr>
<tr><th>Components</th><td>Styling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2013-05-23T21:28:50.000+0000</td></tr>
<tr><th>Updated</th><td>2013-06-24T13:34:51.000+0000</td></tr>
</table>

<h3>Description</h3>

When printing out a simple generated style array it sometimes contains entries that have "undefined" key entries, making them useless. For example, this is the JSON.stringify() version of the index style from the [basics/simple|] test app:

<code><pre>
[ {
    isApi: true,
    priority: 1000.0003,
    key: "Label",
    style: {
        color: "#000",
        font: {
            fontSize: "18dp",
            fontWeight: "bold"
        },
        height: "__ALLOY_EXPR__--Ti.UI.SIZE",
        width: "__ALLOY_EXPR__--Ti.UI.SIZE"
    }
}, {
    isApi: true,
    priority: 1000.0004,
    key: "undefined"
}, {
    isId: true,
    priority: 100000.0002,
    key: "index",
    style: {
        backgroundColor: "#fff",
        fullscreen: false,
        exitOnClose: true
    }
} ];
</pre></code>

This has not been an issue to this point because these values were simply unused in the compile process. Now that styles are going to be used at runtime (ALOY-210), they need to be as efficient as possible, which involved removing these useless entries. 

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2013-05-24

   PR: <a href="https://github.com/appcelerator/alloy/pull/134" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/134</a>
   
   Testing to confirm that this bug is resolved can be done simply by running <code>jake test:all</code>, as part of the PR includes augmenting the compile testing to search the generated styles for invalid undefined style entries. If all those unit tests pass, then the bug is resolved.</li>
<li>Federico Casali 2013-06-24

   Verified as fixed.
   
   Titanium SDK 3.1.2.v20130619101604
   Alloy 1.2.0
   Appcelerator Studio 3.1.1.201306131423
   
   Android 4.2.2 and iOS 6 devices.
   
   Closing. </li>
</ol>


<p><a href="/ALOY/ALOY-669.json">JSON Source</a></p>