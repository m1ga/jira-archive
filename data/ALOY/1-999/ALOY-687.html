---
title: "[ALOY-687] Pre-process all platform queries in runtime styles"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-06-04T23:05:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.2.0, 2013 Sprint 12</td></tr>
<tr><th>Components</th><td>Runtime, Styling</td></tr>
<tr><th>Labels</th><td>qe-testadded</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2013-06-04T21:33:01.000+0000</td></tr>
<tr><th>Updated</th><td>2013-08-02T02:07:44.000+0000</td></tr>
</table>

<h3>Description</h3>

Currently when processing style queries at runtime the platform conditions are still present. The runtime style modules should not even include style entries in the style array that does not apply to the current platform. These entries should be eliminated before ever reaching the runtime to ensure the best possible runtime processing performance.

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2013-06-04

   This took a little longer as I additionally optimized the runtime style by completely removing any platform queries from the "queries" key.
   
   PR: <a href="https://github.com/appcelerator/alloy/pull/144" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/144</a>
   Test app: <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-687" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-687</a>
   
   Follow the in-app instructions for functionally passing the test, ideally on all supported platforms.</li>
<li>Federico Casali 2013-08-02

   Verfied working as expected.
   
   Titanium SDK 3.1.2.v20130730133101
   Alloy 1.2.0-alpha2
   Appcelerator Studio 3.1.2.201307261628
   CLI 3.1.1
   Node 0.8.22
   
   Closing.</li>
</ol>


<p><a href="/ALOY/ALOY-687.json">JSON Source</a></p>