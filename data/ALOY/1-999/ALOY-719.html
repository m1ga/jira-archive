---
title: "[ALOY-719] Alloy Android feature request: view/style API level conditional code"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2014-05-13T20:17:01.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.4.0</td></tr>
<tr><th>Components</th><td>Runtime, XML</td></tr>
<tr><th>Labels</th><td>alloy, android</td></tr>
<tr><th>Reporter</th><td>Mark Mokryn</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2013-06-23T09:17:32.000+0000</td></tr>
<tr><th>Updated</th><td>2014-05-13T23:33:40.000+0000</td></tr>
</table>

<h3>Description</h3>

For Android, there is often conditional UI code based on the presence/absence of Action Bar capabilities. I find myself doing this manually on very single window, and it's a chore (e.g. configure the action bar in my controller code, or set up an action bar lookalike for API <= 10).... It would be great to add to the "platform=..." flags something along the line of "android-api-lte10" and "android-api-gt10" for views and styles.
Edit: the Android API level is determined at runtime, and the platform view/style attribute is used at build. So to generalize this request - what we really need is a runtime view/style conditional attribute, e.g. "condition = someVariable", where someVariable would be set at controller init, e.g. in my case it would be someVariable = Ti.Platform.Android.API_LEVEL <= 10 for a pre-Action Bar window header.

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2013-06-24

   [~mokesmokes] can you please include a proposed use case with code? I'd like to see the XML/JS you'd like this feature to encompass.</li>
<li>Mark Mokryn 2013-06-24

   XML:
   <code><pre>
   &lt;Alloy&gt;
     &lt;Window id="genericWin" class="container"&gt;
       &lt;View id="fakeAndroidActionBar" platform="android" condition="preHoneycomb"&gt;
   ....
   </pre></code>
   
   controller code:
   <code><pre>
   if (OS_ANDROID) {
     var preHoneycomb = Ti.Platform.Android.API_LEVEL &lt; 11;
   }
   </pre></code>
   
   I'm wondering if we need it in style files as well, in similar fashion. Not sure if it's a must, but perhaps it should be mirrored there, as done today for "platform".
   The use case I have today is indeed for Android Action Bars, where I like to have them where possible, and provide a view look-alike on 2.x. However, since this is done at runtime, why not just make it a generic conditional? Could be useful in many other cases as well.</li>
<li>Mark Mokryn 2013-06-24

   Just a couple more thoughts.... the example above is a simple case where the condition is static, and can be evaluated at controller initialization. Another class of conditions (unrelated to this specific case) would be binding the creation/destruction of views to models.</li>
<li>Tim Poulsen 2014-05-13

   [~mokesmokes] I think your request is at least partially resolved by ALOY-871. With that change, you can use the custom conditionals (with conditions defined in alloy.js as properties of Alloy.Globals) to accomplish the XML example you gave above. Those globals would also accomplish the controller code you show, though because those are evaluated at run time, non-matching branches can't be optimized out like the compile-time OS_* globals. Finally, Titanium 3.3 will include the AppCompat library to support the ActionBar on pre-ICS devices.
   
   Is there more to your request or could this be considered resolved by the other ticket and closed?</li>
<li>Mark Mokryn 2014-05-13

   Awesome - yes, you can close this ticket. Thanks.</li>
<li>Tim Poulsen 2014-05-13

   Resolved by ALOY-871 so closing this as a duplicate (yeah, this one came in first ...) </li>
</ol>


<p><a href="/ALOY/ALOY-719.json">JSON Source</a></p>