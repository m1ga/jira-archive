---
title: "[ALOY-727] Alloy: OptionDialog androidView not showing up"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-01-22T20:29:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.4.0</td></tr>
<tr><th>Components</th><td>Titanium SDK</td></tr>
<tr><th>Labels</th><td>alloy, android, optiondialog, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Mads Moller</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2013-05-22T17:18:24.000+0000</td></tr>
<tr><th>Updated</th><td>2014-05-08T23:47:43.000+0000</td></tr>
</table>

<h3>Description</h3>

The customView (androidView property) of an OptionDialog, does not work as expected. The content does not show when it is added through the controller.

The following does not work: (custom view inside OptionDialog tag) where 
<code><pre>
&lt;OptionDialog id="dialogView" platform="android" &gt;
		&lt;View id="container" class="VerticalView"&gt;
			&lt;Label id="name"&gt;&lt;/Label&gt;
			&lt;Label id="address"&gt;&lt;/Label&gt;
			&lt;Label id="zip"&gt;&lt;/Label&gt;
			&lt;Label id="city"&gt;&lt;/Label&gt;
			&lt;Label id="phone"&gt;&lt;/Label&gt;
			&lt;Label id="mail"&gt;&lt;/Label&gt;
		&lt;/View&gt;
	&lt;/OptionDialog&gt;	
</pre></code>

<code><pre>
$.name.text = Alloy.language.Name+": " + company.CompanyName;
$.address.text = Alloy.language.Address+": " + company.CompanyAddress;
$.zip.text = Alloy.language.ZipCode+": " + company.CompanyZipCode;
$.city.text = Alloy.language.City+": " + company.CompanyCity;
$.phone.text = Alloy.language.Phone+": " + company.CompanyPhone;
$.mail.text = Alloy.language.Email+": " + company.CompanyEmail;
</pre></code>


The following do work: (here I add the androidView manually through the controller)

<code><pre>
&lt;OptionDialog id="dialogView" platform="android" /&gt;

&lt;View id="container" class="VerticalView" platform="android"&gt;
	&lt;Label id="name"&gt;&lt;/Label&gt;
	&lt;Label id="address"&gt;&lt;/Label&gt;
	&lt;Label id="zip"&gt;&lt;/Label&gt;
	&lt;Label id="city"&gt;&lt;/Label&gt;
	&lt;Label id="phone"&gt;&lt;/Label&gt;
	&lt;Label id="mail"&gt;&lt;/Label&gt;
&lt;/View&gt;
</pre></code>


<code><pre>
$.name.text = Alloy.language.Name+": " + company.CompanyName;
$.address.text = Alloy.language.Address+": " + company.CompanyAddress;
$.zip.text = Alloy.language.ZipCode+": " + company.CompanyZipCode;
$.city.text = Alloy.language.City+": " + company.CompanyCity;
$.phone.text = Alloy.language.Phone+": " + company.CompanyPhone;
$.mail.text = Alloy.language.Email+": " + company.CompanyEmail;

if(OS_ANDROID){
	//manually set the androidView property
	$.dialogView.androidView = $.containerView;
	$.dialogView.show();
}
</pre></code>

<h3>Comments</h3>

<ol>
<li>Daniel Sefton 2013-05-22

   Hi Mads,
   
   Please could you either attach a project which reproduces the problem, or organise your code snippets to be complete for us to drop into a new project and run?
   
   Thanks!</li>
<li>Shak Hossain 2013-06-27

   Hi Tony,
   
   Moving this ti Alloy for your feedback. Even though Daniel asked for a test case, we have yet to receive it. However, the reporter is a well-known titan and I am under the impression that the issue is valid. Leaving it upto to you.
   
   Thanks,
   Shak</li>
<li>Mostafizur Rahman 2013-12-08

   Hello,
   
   I tested this issue the test code below. I was able to reproduce the problem.  It does occur when I try to update android View content from controller.
   
   <h4>Test Environment: </h4>
   
   OS: MAC OS X 10.8.5
   Ti SDK: 3.1.3 GA, 3.2.0.x
   Ti CLI: 3.3.0
   Alloy 1.2.2, 1.3.0-beta
   Android Device
   Android SDK 2.3.3, 4.2.2  
   
   
   <h4>Test Code</h4>
   *index.xml*
   <code><pre>
   &lt;Alloy&gt;
   	&lt;Window&gt;
   
   		&lt;OptionDialog id="options" title="App Options" destructive="3" cancel="2"&gt;
   			&lt;ButtonNames&gt;
   				&lt;ButtonName&gt;button 1&lt;/ButtonName&gt;
   				&lt;ButtonName&gt;button 2&lt;/ButtonName&gt;
   			&lt;/ButtonNames&gt;
   			&lt;View  id= "androidView"layout="horizontal" platform="android"&gt;
   				&lt;Label id="avLabel"/&gt;
   			&lt;/View&gt;
   		&lt;/OptionDialog&gt;
   		&lt;Button onClick="showOptions"&gt;options&lt;/Button&gt;
   	&lt;/Window&gt;
   &lt;/Alloy&gt;
   </pre></code>
   
   *index.js*
   
   <code><pre>
   function showOptions(e) {
   	$.options.show();
   }
   
   $.avLabel.text = 'This is an androidView';
   
   $.index.open();
   
   </pre></code>
   
   *index.tss*
   
   <code><pre>
   "Window": {
           backgroundColor: '#fff'
   },
   "Button": {
           height: Ti.UI.SIZE,
           width: Ti.UI.SIZE
   }, 
   "#avLabel": {
           color: '#fff',
           left: '20dp',
           height: Ti.UI.SIZE,
           width: Ti.UI.SIZE,
           textAlign: 'center',
           font: {
                   fontSize: '16dp'
           }
   }
   </pre></code>
   
   <h4>Step to test</h4>
   <h4>Create a new alloy project</h4>
   <h4>Paste test code in index.js/ index.xml/ index.tss</h4>
   <h4>Now run on android device/Emulator</h4>
   <h4>Click on button, it will display blank option dialog with two buttons </h4>
   
   <h4>Actual result </h4>
     “This is an androidView” will display in OptionDialog
   
   </li>
<li>Tim Poulsen 2014-01-21

   I am seeing the behavior described in the ticket, but the problem is not as indicated. The View and Label are present, however the generated controller does not have a variable $.avLabel, so the assignment in index.js does nothing.
   
   In other words, change the Label tag to the following and the app works as written (though I added a space added between "androidView"layout).
   
   <Label id="avLabel" text="This is a label"/>
   
   
   Full, working index.xml:
   
   <code><pre>
   &lt;Alloy&gt;
       &lt;Window&gt; 
           &lt;OptionDialog id="options" title="App Options" destructive="3" cancel="2"&gt;
               &lt;ButtonNames&gt;
                   &lt;ButtonName&gt;button 1&lt;/ButtonName&gt;
                   &lt;ButtonName&gt;button 2&lt;/ButtonName&gt;
               &lt;/ButtonNames&gt;
               &lt;View  id= "androidView" layout="horizontal" platform="android"&gt;
                   &lt;Label id="avLabel" text="This is a label"/&gt;
               &lt;/View&gt;
           &lt;/OptionDialog&gt;
           &lt;Button onClick="showOptions"&gt;options&lt;/Button&gt;
       &lt;/Window&gt;
   &lt;/Alloy&gt;
   </pre></code>
   
   index.js and index.tss as above.</li>
<li>Tony Lukasavage 2014-01-22

   PR: <a href="https://github.com/appcelerator/alloy/pull/309" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/309</a>
   test app: <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-727" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-727</a>
   
   <h4>functional test</h4>
   
   <h4>Run the test app for android</h4>
   <h4>Click the "options" button</h4>
   <h4>Assert that the OptionDialog that pops up has 2 buttons and has a label in it that contains the phrase "This is an androidView". Make sure it does *not* have the phrase "This is a label".</h4>
   <h4>Inspect the generated code in "Resources/android/alloy/controllers/index.js" and make sure that the views for both *androidView* and *avLabel* are generated only once.</h4>
   
   Prior to this fix, the label in step #3 would say "This is a label" and the *androidView* and *avLabel* views would have been generated twice in the controller. </li>
<li>Lokesh Choudhary 2014-05-08

   Verified the fix. We see expected results as mentioned by [~tlukasavage] in his comments for verification of the fix.
   
   Closing.
   
   Environment:
   Appc Studio : 3.3.0.201405011408
   Ti SDK : 3.3.0.v20140508101423
   Mac OSX : 10.8.5
   Alloy : 1.4.0-dev
   CLI - 3.3.0-dev
   Nexus 5 - android 4.4.2</li>
</ol>


<p><a href="/ALOY/ALOY-727.json">JSON Source</a></p>