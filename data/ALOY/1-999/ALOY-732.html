---
title: "[ALOY-732] Alloy: Model db_name is ignored when db_file is set"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-07-08T19:56:03.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.2.0, 2013 Sprint 14</td></tr>
<tr><th>Components</th><td>Models</td></tr>
<tr><th>Labels</th><td>qe-testadded</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2013-07-02T18:39:06.000+0000</td></tr>
<tr><th>Updated</th><td>2013-07-15T23:10:34.000+0000</td></tr>
</table>

<h3>Description</h3>

When you set both <code>db_file</code> to preload an existing SQLite database for a model, the <code>db_name</code> gets ignored. This is because a typo in the SQLite sync adapter for which I'll do a PR.

<code><pre>
var dbName = config.adapter.db_name = match[2];
</pre></code>

Should be:

<code><pre>
var dbName = config.adapter.db_name || match[2];
</pre></code>

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2013-07-02

   The PR: <a href="https://github.com/appcelerator/alloy/pull/168" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/168</a></li>
<li>Tony Lukasavage 2013-07-08

   Reviewed and merged. Also added a change for testing.
   
   PR: <a href="https://github.com/appcelerator/alloy/pull/168" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/168</a>
   test app: <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/models/sql_preload" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/models/sql_preload</a>
   
   The existing "models/sql_preload" test app was modified to use both db_name and db_file. If you run it on iOS (from a reset), you'll notice that it lists all the expected fighter names. Additionally, if you navigate to your apps directory, in my case:
   
   <code><pre>
   /Users/tlukasavage/Library/Application Support/iPhone Simulator/6.1/Applications/25822227-C9F2-40C2-82F7-9784F2DDF002/Library/Private Documents
   </pre></code>
   
   You'll see that the database file is named "fighters" instead of "myapp" now.</li>
<li>Federico Casali 2013-07-15

   Verified as fixed. 
   
   Environment:
   Titanium SDK 3.1.2.v20130710144553
   Appcelerator Studio 3.1.2.201307101037
   Alloy 1.2.0
   
   Android device 4.2.2 and iOS 5.
   
   Closing.</li>
</ol>


<p><a href="/ALOY/ALOY-732.json">JSON Source</a></p>