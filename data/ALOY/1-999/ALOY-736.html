---
title: "[ALOY-736] Alloy: Twitter builtin does not close loading popup after login"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-11-26T02:20:10.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.4.0, 2014 Sprint 08</td></tr>
<tr><th>Components</th><td>Builtins</td></tr>
<tr><th>Labels</th><td>qe-noTestNeeded, supportTeam</td></tr>
<tr><th>Reporter</th><td>Rupesh Sharma</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2013-07-03T10:41:00.000+0000</td></tr>
<tr><th>Updated</th><td>2014-11-26T02:20:10.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>
Alloy social builtin for twitter when used in the app it does not allow to close the loading popup after login.

<h4>Test case</h4>

<code><pre>
var social = require('alloy/social').create({
    consumerSecret: '',
    consumerKey: ''
});

// If not authorized, get authorization from the user
if(!social.isAuthorized()) { 
    social.authorize();
}

// Post a message
// Setup both callbacks for confirmation
social.share({
    message: "Salut, Monde!",
    success: function(e) {alert('Success!')},
    error: function(e) {alert('Error!')}
}); 

// Deauthorize the application
social.deauthorize();
</pre></code>

Please see the attached screenshot for the issue.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/ALOY/ALOY-736_40496/Screen Shot 2013-06-28 at 4.40.01 PM.png">Screen Shot 2013-06-28 at 4.40.01 PM.png</td></td><td>2013-07-03T10:41:00.000+0000</td><td>68547</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>josh rose 2013-08-19

   Also seeing this issue.  Ti 3.1.1</li>
<li>David Knell 2013-08-26

   I had this same issue and was banging my head against the desk trying to figure this out. Then I looked in the social.js file and found the answer. Basically, you should use authorize() *OR* share() in the same code block - *NOT* both. The share() function actually calls authorize itself which opens the authorizeUI AND the loadingUI (which is the screen in your screenshot). Then when you call share(), it calls authorize() again and opens another instance of authorizeUI and loadingUI and the code is not cleaning up both instances.
   
   The example and documentation should really make this more clear.
   
   If you change your code to the following, your user will still be asked to authenticate, if they are not already, and your problem should be solved.
   
   <code><pre>
   var social = require('alloy/social').create({
       consumerSecret: '',
       consumerKey: ''
   });
    
   // Post a message
   // Setup both callbacks for confirmation
   social.share({
       message: "Salut, Monde!",
       success: function(e) {alert('Success!')},
       error: function(e) {alert('Error!')}
   }); 
   
   </pre></code>
   
   Hope that helps...
   
   Dave</li>
<li>Tim Poulsen 2014-03-10

   Updated the docs to clarify. <a href="https://github.com/appcelerator/alloy/pull/345" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/345</a></li>
</ol>


<p><a href="/ALOY/ALOY-736.json">JSON Source</a></p>