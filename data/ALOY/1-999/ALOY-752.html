---
title: "[ALOY-752] font property is not properly being mixed in when using multiple classes"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-04-15T19:03:19.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.4.0, 2014 Sprint 08</td></tr>
<tr><th>Components</th><td>Styling</td></tr>
<tr><th>Labels</th><td>qe-testadded</td></tr>
<tr><th>Reporter</th><td>Bert Grantges</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2013-07-18T20:57:01.000+0000</td></tr>
<tr><th>Updated</th><td>2014-10-28T15:48:37.000+0000</td></tr>
</table>

<h3>Description</h3>

When trying to use multiple classes that manipulate the font on say a Label, the font property, which is an object itself is not properly mixed in. Thus one class overwrites the other object as a whole.

Say you have the following example: 

index.xml

<Window>
   <Label class="h1 bold">This is my styled text</Label> 
</Window>

index.tss

".h1":{
	font:{
		fontSize: "48dp"
	}
},
".bold":{
	font: {
		fontWeight: "bold"
	}
}

The expectation is that this should generate a label with a fontsize of 48 and in bold. 

The actual result is that it will produce a bold label - but not at the correct size

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/ALOY/ALOY-752_40904/Screen Shot 2013-07-18 at 3.56.02 PM.png">Screen Shot 2013-07-18 at 3.56.02 PM.png</td></td><td>2013-07-18T20:57:01.000+0000</td><td>424950</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2013-07-18

   Need to spend some time investigating if font should just get a specific fix, or deep merging of styles should be supported (always a dicey proposition in JS). </li>
<li>Bert Grantges 2013-07-29

   Tony - i see that this was assigned to a sprint, what are you thinking about deep merging? One off for font, or extending to other styles?</li>
<li>Tony Lukasavage 2013-07-29

   [~bgrantges] deep merging would allow me to never encounter this again, and cover all other possible objects, but I don't think I'm going to do that because of the inherent risks with attempting to do that in JS. I think I'll just more intelligently merge <code>font</code> where possible.</li>
<li>Malcolm Hollingsworth 2013-11-20

   This will be a massive time saver and allow the proper use of the font object.  It should be possible to use a mix and match approach here, the lack of this means much more complicated rules and styles.
   
   I understand why this is such a pain - a historical feature that appears to have been stuck in the - with font being the only real object property.
   
   May be an option would be to split them out in tss files only, so being able to specify as follows;
   
   ".h1": {
     font: {
       fontSize: "48dp"
     }
   },
   ".bold": {
     fontWeight: "bold"
   }
   
   This would combine as;
   
     font: {
       fontSize: "48dp",
       fontWeight: "bold"
     }
   
   
   The normal font object rules still apply and overwrite each other, but the use of a root level modifier property simply overrides that option.  This would mean the preprocessor could perform a much simpler job without having to work through the object logic.
   
   Again - this would be ONLY an Alloy tss feature, everywhere else this stays the same.  This way it works more like the platform rule in its differentiation.
   
   Just a thought.</li>
<li>Tim Poulsen 2014-03-14

   PR <a href="https://github.com/appcelerator/alloy/pull/344" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/344</a>
   
   Functional test
   
   1. Build the included test app /test/apps/testing/ALOY-752
   2. The label should be large (30pt), bold, and in the Hoefler font, as specified by a mix of component, class, and ID selectors.</li>
<li>Malcolm Hollingsworth 2014-03-14

   Still holding out for this one being resolved as the current situation makes it impossible to provide text styles in any simple manageable way.</li>
<li>Tim Poulsen 2014-04-15

   PR tested and merged</li>
<li>Lokesh Choudhary 2014-05-09

   Verified the fix. We see the label as expected & specified in the index.tss file.
   
   Closing.
   
   Environment:
   Appc Studio : 3.3.0.201405011408
   Ti SDK : 3.3.0.v20140508101423
   Mac OSX : 10.8.5
   Alloy : 1.4.0-dev
   CLI - 3.3.0-dev
   Mobileweb
   Nexus 5 - android 4.4.2
   Iphone 5 - iOS 6.1.3</li>
</ol>


<p><a href="/ALOY/ALOY-752.json">JSON Source</a></p>