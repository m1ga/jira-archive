---
title: "[ALOY-789] Improperly escaping line terminators"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-08-15T15:29:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.2.1, 2013 Sprint 17</td></tr>
<tr><th>Components</th><td>Runtime, Styling</td></tr>
<tr><th>Labels</th><td>qe-testadded</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2013-08-15T14:40:59.000+0000</td></tr>
<tr><th>Updated</th><td>2013-08-28T23:40:19.000+0000</td></tr>
</table>

<h3>Description</h3>

When creating runtime styles, the styler.js module is improperly escaping certain escape sequences, most notably line terminators. The following line in a TSS file:

<code><pre>
text: 'this is a \nlinebreak'
</pre></code>

is actually rendering the line break in the generated code, instead of preserving the given text string. The line terminators that should specifically be handled are listed here: 

<a href="http://es5.github.io/#x7.3" rel="nofollow" target="_blank">http://es5.github.io/#x7.3</a>

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2013-08-15

   commit: <a href="https://github.com/appcelerator/alloy/commit/1f0e84a68f8e5b56a464b6d968f6965257e0b358" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/commit/1f0e84a68f8e5b56a464b6d968f6965257e0b358</a> 
   
   Functional test should be performed on the 1_2_X branch:
   
   <code><pre>
   sudo npm install -g git://github.com/appcelerator/alloy.git#1_2_X
   </pre></code>
   
   And here are the steps:
   
   <h4>Create a default alloy app</h4>
   <h4>Set the index.xml like this:</h4>
   <code><pre>
   <Alloy>
   	<Window class="container">
   		<Label id="label" onClick="doClick"/>
   	</Window>
   </Alloy>
   </pre></code>
   <h4>Set the index.tss like this:</h4>
   <code><pre>
   ".container": {
   	backgroundColor:"white"
   }
   
   "Label": {
   	width: Ti.UI.SIZE,
   	height: Ti.UI.SIZE,
   	color: "#000",
   	text: "I have a \ntab"
   }
   </pre></code>
   <h4>Run the app</h4>
   <h4>Ensure that the generated "Resources/alloy/styles/index.js" file has no rendered line breaks in it.</h4>
   <h4>Package the app for Android. Ensure that is executes successfully.</h4></li>
<li>Tony Lukasavage 2013-08-15

   Another confirmation that this was resolved is in the duplicate ALOY-790</li>
<li>Olga Romero 2013-08-19

   Tested the above code with:
   Appcelerator Studio, build: 3.1.2.201308091728
   Titanum SDK, build:3.1.3.v20130816184556 
   Alloy: 1.2.1-cr
   CLI: 3.1.2
   Device:
   Galaxy Note2 Android version: 4.1.2
   
   Followed test steps successfully. </li>
<li>Thierry Ruiz 2013-08-28

   However, now when I use a line break into a view.xml file (example below) the line break code is not interpreted anymore and considered/showed as part of the main string. (Tested on iPhone Simulator)
   
   <Label text="hello \nworld" /></li>
<li>Thierry Ruiz 2013-08-28

   Turn out that using this coding way (instead of the one above), it works:
   
   <Label>hello \nworld</Label></li>
</ol>


<p><a href="/ALOY/ALOY-789.json">JSON Source</a></p>