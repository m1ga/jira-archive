---
title: "[ALOY-790] Alloy: Error when calling $.createStyle if the style file contains \n"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2013-08-15T21:20:19.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.2.1</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 17</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Daniel Sefton</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2013-08-10T11:34:04.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-22T13:21:00.000+0000</td></tr>
</table>

<h3>Description</h3>

*Problem*
The \n will be replaced in /alloy/styles/thecontroller.js with a new line causing an error when the file is required ($.createStyle called for example). A test case for iOS is included below.

*index.xml*
<code><pre>&lt;Alloy&gt;
	&lt;Window class="container"&gt;
		&lt;Label id="label" onClick="doClick"/&gt;
	&lt;/Window&gt;
&lt;/Alloy&gt;</pre></code>

*index.tss*
<code><pre>".container": {
	backgroundColor:"white"
},
"Label": {
	width: Ti.UI.SIZE,
	height: Ti.UI.SIZE,
	color: "#000",
	text:'Hello\nworld'
}</pre></code>

*index.js*
<code><pre>function doClick(e) {
    alert($.label.text);
}

$.index.open();

$.createStyle({
	classes:['test']
});</pre></code>

*Error (iOS)*
<code><pre>[ERROR] :  Script Error {
[ERROR] :      line = 1;
[ERROR] :      message = "Parse error";
[ERROR] :      name = SyntaxError;
[ERROR] :      sourceId = 284051488;
[ERROR] :      sourceURL = "file://localhost/Users/hani/Library/Application%20Support/iPhone%20Simulator/6.1/Applications/BA328F3A-899A-4681-9A30-55085E4A2AA9/BugTest.app/alloy/styles/index.js";
[ERROR] :  }
[ERROR] :  Script Error Module "alloy/styles/index" failed to leave a valid exports object</pre></code>

*Error (Android)*
<code><pre>08-15 14:08:06.745: E/TiExceptionHandler(8933): (main) [0,610] - Message: Uncaught SyntaxError: Unexpected token ILLEGAL
08-15 14:08:06.810: E/V8Exception(8933): Exception occurred at alloy/styles/index.js:1: Uncaught SyntaxError: Unexpected token ILLEGAL</pre></code>

<h3>Comments</h3>

<ol>
<li>Daniel Sefton 2013-08-12

   Hi Hani,
   
   Please can you provide a simple reproducible test case for this? Be sure to include all code necessary for us to create a runnable project.
   
   Thanks!</li>
<li>Daniel Sefton 2013-08-15

   Tested and confirmed on iOS 6 simulator and Samsung Galaxy S2 2.3.6 with Ti SDK 3.1.1 GA and Alloy 1.2.1.</li>
<li>Tony Lukasavage 2013-08-15

   Duplicate of ALOY-789</li>
<li>Tony Lukasavage 2013-08-15

   This is resolved in ALOY-789 and is already in the 1.2.1 release candidate. You can get it like this:
   
   <code><pre>
   [sudo] npm install -g alloy@1.2.1-cr
   </pre></code>
   
   The official 1.2.1 will be released early next week. If you guys would be so kind as to confirm that using 1.2.1-cr fixes the issue, that would be great.</li>
<li>Daniel Sefton 2013-08-15

   Confirmed fixed with 1.2.1-cr</li>
</ol>


<p><a href="/ALOY/ALOY-790.json">JSON Source</a></p>