---
title: "[ALOY-812] Alloy: Automatically convert string-values for number-properties like borderWidth in TSS"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2014-03-25T16:15:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.2.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>alloy, android, dip, px, tss</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2013-08-29T10:39:50.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-07T22:28:27.000+0000</td></tr>
</table>

<h3>Description</h3>

When doing an app for both iOS and Android, I usually set the default unit to <code>dp</code>. This works great, but some properties like <code>borderWidth</code> and <code>borderRadius</code> are always interpreted as <code>px</code> on Android.

So for the right size, I need to use Alloy's builtin <code>measurement.dpToPx</code>. However, TSS does not (longer) support using methods, only (global) values. This means for every different value I use, I need to pre-calculate the px-value in <code>alloy.js</code> and store it in <code>Alloy.Globals</code> so I can use it in the TSS. This is far from ideal.

Why not add builtin casting of non-number values to number-values for properties that require that type?

For example, in TSS I'd have:

<code><pre>
"View": {
  borderWidth: '5dp'
}
</pre></code>

Which then would be compiled to: 

<code><pre>
borderWidth: Alloy.measurement.toNumber('5dp');
</pre></code>

The <code>Alloy.measurement.toNumber</code> method then should read the unit from the string and perform the appropriate conversion to get the number-value (px).

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-812_46846/S420.png">S420.png</td></td><td>2014-03-25T16:15:16.000+0000</td><td>105815</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2013-08-29

   Just fixing these properties to also honor the default unit setting in the Titanium SDK would be even better, but of course break existing apps.</li>
<li>Tim Poulsen 2014-03-25

   See the attached screen. I don't believe this is a valid issue. Alloy app, default unit set in tiapp.xml to system with borderWidth:20 on the left and borderWidth:'20dp' on the right.
   
   If I set the default unit to dp in tiapp.xml, the result with 20 and '20dp' match, as would be expected.</li>
<li>Tim Poulsen 2014-03-25

   Marking as invalid pending developer response</li>
<li>Tim Poulsen 2014-03-26

   </li>
<li>Fokke Zandbergen 2014-04-17

   [~skypanther] this indeed seems to be fixed now <a href="https://github.com/appcelerator/titanium_mobile/pull/5521/files" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5521/files</a> added support for specifying a unit with the value.</li>
<li>Eric Merriman  2018-03-07

   Closing as invalid. If this is incorrect, please reopen.</li>
</ol>


<p><a href="/ALOY/ALOY-812.json">JSON Source</a></p>