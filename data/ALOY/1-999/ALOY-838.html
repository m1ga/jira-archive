---
title: "[ALOY-838] Alloy: Mix conditional environment and platform values"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-08-05T21:26:31.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.3.0, 2013 Sprint 22, 2013 Sprint 25</td></tr>
<tr><th>Components</th><td>Runtime, Tooling</td></tr>
<tr><th>Labels</th><td>alloy, config, environment, platform, qe-automatedtest</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2013-09-29T08:58:54.000+0000</td></tr>
<tr><th>Updated</th><td>2014-08-05T21:26:31.000+0000</td></tr>
</table>

<h3>Description</h3>

Right now it's not possible to have a configuration that applies only to <code>ios</code> in <code>production</code> in <code>config.json</code>. It would be nice to be able to mix both conditionals, just like in the XML views and TSS styles (and of course JS controllers).

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2013-09-29

   The PR: <a href="https://github.com/appcelerator/alloy/pull/247" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/247</a></li>
<li>Tony Lukasavage 2013-10-23

   test app: <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-838" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-838</a>
   
   Functional test should include running the given test app on multiple platforms, both sims and devices, and confirming that the runtime unit tests pass. Asserting that all existing compilations still pass with <code>jake test:all</code> would be a good idea too. </li>
<li>Federico Casali 2013-12-02

   Reopening as one unit test is failing.
   
   In order to have all runtime unit test passing on Android, those lines have to be added in the config.json file:
   
   <code><pre>
    "os:android env:test": {
           "button": "os:android env:test"
       },
   "os:android env:development": {
           "button": "os:android env:development"
       },
   </pre></code>
   
   
   otherwise one test is failing on Android:
   <code><pre>
   [FAIL] index controller --&gt; #button component has correct style
   [INFO]   
   [INFO]  index controller #button component has correct style
   [INFO]  expected [object Button] to have style:
   [INFO]  {"envOnly":"test","id":"button","osOnly":"android","title":"os:android env:test"}
   [INFO]  but found this instead:
   [INFO]  {"envOnly":"test","id":"button","osOnly":"android","title":"env:test os:android "}
   [INFO]  Error: expected [object Button] to have style:
   [INFO]  {"envOnly":"test","id":"button","osOnly":"android","title":"os:android env:test"}
   [INFO]  but found this instead:
   [INFO]  {"envOnly":"test","id":"button","osOnly":"android","title":"env:test os:android "}
   [INFO]  at new &lt;anonymous&gt; (jasmine.js:1:1431)
   [INFO]  at [object Object].toHaveStyle (jasmine.js:1:13466)
   [INFO]  at [object Object].&lt;anonymous&gt; (runtimeTester.js:1:1637)
   [INFO]  at [object Object].execute (jasmine.js:1:10733)
   [INFO]  at [object Object].next_ (jasmine.js:1:27094)
   [INFO]  at [object Object].start (jasmine.js:1:26510)
   [INFO]  at [object Object].execute (jasmine.js:1:31005)
   [INFO]  at [object Object].next_ (jasmine.js:1:27094)
   [INFO]  at jasmine.js:1:27067
   [INFO]  at [object Object].finish (jasmine.js:1:30669)
   [INFO]  Finished in 0.039 seconds
   [INFO]  8 specs, 1 failure
   
   </pre></code>
   
   
   TiSDK 3.2.0.v20131127194046
   CLI 3.2.0-beta
   Alloy 1.3.0-beta
   Titanium Studio 3.2.0.201311262027
   
   iPad OS 7 and simulator
   Android Google Nexus Galaxy 4.3</li>
<li>Fokke Zandbergen 2013-12-03

   PR for the updated config.json: <a href="https://github.com/appcelerator/alloy/pull/280" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/280</a></li>
<li>Tony Lukasavage 2013-12-03

   Resolved using [~fokke]'s PR above</li>
<li>Federico Casali 2013-12-03

   Verified all tests are passing after latest PR (merged in master) with Alloy 1.3.0-beta.
   
   Is it possible to merge the PR in the 1_3_X branch too?</li>
<li>Tony Lukasavage 2013-12-03

   already done</li>
</ol>


<p><a href="/ALOY/ALOY-838.json">JSON Source</a></p>