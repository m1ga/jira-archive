---
title: "[ALOY-852] Android: closure-compiler warns for suspicious Alloy code"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2014-01-06T19:21:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.3.0</td></tr>
<tr><th>Components</th><td>Tooling</td></tr>
<tr><th>Labels</th><td>alloy, android, build, compiler</td></tr>
<tr><th>Reporter</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2013-10-17T07:09:39.000+0000</td></tr>
<tr><th>Updated</th><td>2014-02-28T23:57:14.000+0000</td></tr>
</table>

<h3>Description</h3>

It looks like the <code>closure-compiler</code> doesn't like the optimized Alloy code. Though it works fine, a log with all these warnings doesn't show off well on Appcelerator I would think.

<h4>Steps to reproduce</h4>

1. Create a project: <code>titanium create -p android -n suspicious --id ti.suspicious -d .</code>
2. Initialize Alloy: <code>cd suspicious && alloy new</code>
3. Build for Play Store to trigger the closure-compiler: <code>titanium build -p android -T dist-playstore -K ~/some.keystore -L someAlias -P somePassword -O ~/</code>
4. You'll see lots of warnings like these:

<code><pre>
[INFO] Compiling javascript: alloy/controllers/index.js
[DEBUG] java -jar "/Users/zandbergen/Library/Application Support/Titanium/mobilesdk/osx/3.1.3.GA/android/lib/closure-compiler.jar" --js /Users/zandbergen/dev/tests/suspecious/build/android/bin/assets/Resources/alloy/controllers/index.js --js_output_file /Users/zandbergen/dev/tests/suspecious/build/android/bin/assets/Resources/alloy/controllers/index.js-compiled --jscomp_off=internetExplorerChecks --accept_const_keyword
[WARN] /Users/zandbergen/dev/tests/suspecious/build/android/bin/assets/Resources/alloy/controllers/index.js:7: WARNING - Suspicious code. This code lacks side-effects. Is there a bug?
    arguments[0] ? arguments[0]["__parentSymbol"] : null;
    ^

/Users/zandbergen/dev/tests/suspecious/build/android/bin/assets/Resources/alloy/controllers/index.js:8: WARNING - Suspicious code. This code lacks side-effects. Is there a bug?
    arguments[0] ? arguments[0]["$model"] : null;
    ^

/Users/zandbergen/dev/tests/suspecious/build/android/bin/assets/Resources/alloy/controllers/index.js:9: WARNING - Suspicious code. This code lacks side-effects. Is there a bug?
    arguments[0] ? arguments[0]["__itemTemplate"] : null;
    ^

0 error(s), 3 warning(s)

[INFO] Compiling javascript: alloy.js
[DEBUG] java -jar "/Users/zandbergen/Library/Application Support/Titanium/mobilesdk/osx/3.1.3.GA/android/lib/closure-compiler.jar" --js /Users/zandbergen/dev/tests/suspecious/build/android/bin/assets/Resources/alloy.js --js_output_file /Users/zandbergen/dev/tests/suspecious/build/android/bin/assets/Resources/alloy.js-compiled --jscomp_off=internetExplorerChecks --accept_const_keyword
[WARN] /Users/zandbergen/dev/tests/suspecious/build/android/bin/assets/Resources/alloy.js:156: WARNING - If this if/for/while really shouldnt have a body, use {}
        if (style.isId && opts.id && style.key === opts.id || style.isClass && _.contains(classes, style.key)) ; else {
        ^

0 error(s), 1 warning(s)
</pre></code>

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2014-01-06

   [~cbarber] I thought I heard mention that we might be doing something differently with respect to the closure-compiler for android. Is that true, and if so, could those changes perhaps be relevant here? </li>
<li>Chris Barber 2014-01-06

   [~tlukasavage] Closure compiler has been ripped out and replaced by UglifyJS in 3.2.0. 3.1.x and older still uses Closure Compiler.</li>
<li>Tony Lukasavage 2014-01-06

   As [~cbarber] has stated, a different compiler is now being used as of TiSDK 3.2.0+ for these builds. This ticket is is no longer valid WRT to TiSDK, and we won't be backporting fixes for prior versions.</li>
</ol>


<p><a href="/ALOY/ALOY-852.json">JSON Source</a></p>