---
title: "[ALOY-920] should.js causes compiler error"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-07-10T17:17:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.4.0, Alloy 1.3.0</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.4.0, Alloy 1.3.1, 2014 Sprint 01</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2014-01-10T17:01:42.000+0000</td></tr>
<tr><th>Updated</th><td>2014-07-10T17:17:00.000+0000</td></tr>
</table>

<h3>Description</h3>

If you attempt to compile an Alloy app that has [should.js](<a href="https://github.com/visionmedia/should.js)" rel="nofollow" target="_blank">https://github.com/visionmedia/should.js)</a> (the browser-compatible file that works with traditional Titanium dev), it will result in the following compile time error:

<code><pre>
[INFO] ----- OPTIMIZING -----
[INFO] - iphone/alloy.js
[TRACE]   processing "builtins" module...
[TRACE]   processing "optimizer" module...
[TRACE]   processing "compress" module...
[INFO] - iphone/should.js
WARN: ERROR: Unexpected token keyword «with», expected punc «(» [iphone/should.js:383,6]
[ERROR] Error generating AST for "/Users/tlukasavage/development/aloy920/Resources/iphone/should.js"
[ERROR] Unexpected token keyword «with», expected punc «(»
[ERROR] line 383, column 6, position 9813
</pre></code>

We should investigate the root of the error, put in a quick fix, then address the specific problems with uglify-js either via new options or an update to uglify-js.

<h3>Comments</h3>

<ol>
<li>Tony Lukasavage 2014-01-10

   According to this ticket, this issue was resolved in uglify-js 2.4.8: <a href="https://github.com/mishoo/UglifyJS2/issues/319" rel="nofollow" target="_blank">https://github.com/mishoo/UglifyJS2/issues/319</a></li>
<li>Tony Lukasavage 2014-01-10

   PR: <a href="https://github.com/appcelerator/alloy/pull/297" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/297</a>
   test app: <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-920" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-920</a>
   
   Merged to both master and 1_3_X
   
   Skip compiling should.js for now. Uglify-js will be fixed in Alloy 1.4.0 with ALOY-921.
   
   <h4>Functional Test</h4>
   
   <h4>Run the given test app</h4>
   <h4>Make sure you don't get the compile error noted in the description</h4>
   <h4>make sure you get no runtime errors</h4></li>
<li>Federico Casali 2014-05-17

   Verified fixed - there are no compile errors. 
   
   TiSDK 3.3.0.v20140516002513
   Alloy 1.4.0-alpha
   Appcelerator Studio 3.3.0.201405121247
   CLI 3.3.0-dev
   
   Closing</li>
<li>Paras Mishra 2014-07-09

   should.js provided in the app cause compile error.
   
   Environment used:
   Tested on:
   Device : iPod touch 2 , iOS version: 7.1.2
   SDK: 3.3.0.v20140708132513
   CLI version : 3.3.0-rc4
   OS : MAC OSX 10.9.2
   Alloy:  1.4.0-rc4
   ACS: 1.0.15
   npm:1.3.2
   LiveView: 1.0.4
   Appcelerator Studio, build: 3.3.0.201407081443
   titanium-code-processor: 1.1.1
   XCode : 5.1.1</li>
</ol>


<p><a href="/ALOY/ALOY-920.json">JSON Source</a></p>