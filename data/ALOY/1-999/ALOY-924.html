---
title: "[ALOY-924] Alloy: Built-in loading widget fails to be added in controller whose top-level view is a navigation window"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2014-01-14T14:01:07.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.3.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Widgets</td></tr>
<tr><th>Labels</th><td>api, community, defect</td></tr>
<tr><th>Reporter</th><td>David He</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2014-01-05T10:18:39.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-07T22:28:28.000+0000</td></tr>
</table>

<h3>Description</h3>

Below code snippet will fail

<code><pre>
[ERROR] :  Script Error {
[ERROR] :      backtrace = "#0 () at :0";
[ERROR] :      line = 5;
[ERROR] :      message = "-[__NSDictionaryM krollObjectForBridge:]: unrecognized selector sent to instance 0xd94ffc0";
[ERROR] :      sourceId = 234370688;
[ERROR] :      sourceURL = "file:///Users/Tracyguan/Library/Application%20Support/iPhone%20Simulator/7.0.3/Applications/2153BB00-6302-4AC9-88AA-580D5EBBA65D/alloyTester.app/alloy/controllers/nav_root_win.js";
[ERROR] :  }
</pre></code>

nav_win.xml
<code><pre>
&lt;Alloy&gt;
	&lt;NavigationWindow id="nav" platform="ios"&gt;
		&lt;Window id="index" title="Job List" tabBarHidden="true" backgroundColor="black"&gt;
			&lt;LeftNavButton platform="ios"&gt;
				&lt;Button id="lBtn" style="Titanium.UI.iPhone.SystemButtonStyle.PLAIN" title="Job Status" onClick="closeW" /&gt;
			&lt;/LeftNavButton&gt;
			&lt;Button title="showLoading" onClick="load"/&gt;
		&lt;/Window&gt;
	&lt;/NavigationWindow&gt;
&lt;/Alloy&gt;

</pre></code>

nav_win.js
<code><pre>
function load() {
	var loadIcon = Alloy.createWidget("com.appcelerator.loading");
	$.index.add(loadIcon); //throw error
	//$.nav.add(loadIcon); //throw error
}
</pre></code>


<h3>Comments</h3>

<ol>
<li>Ritu Agrawal 2014-01-14

   Tony - Not sure how to reproduce this issue with Titanium SDK as it appears to be related to loading widget so moving it to Alloy project for diagnosis as we can reproduce it with the provided test case.</li>
<li>Tony Lukasavage 2014-01-14

   Your code is not properly using the Alloy APIs, both the original and updated test cases. <code>createWidget</code> returns a widget controller, not a UI component, which is what <code>add()</code> expects. You need to change:
   
   <code><pre>
   var loadIcon = Alloy.createWidget("com.appcelerator.loading");
   </pre></code>
   
   to 
   
   <code><pre>
   var loadIcon = Alloy.createWidget("com.appcelerator.loading").getView();
   </pre></code>
   
   and it works fine.
   
   In the future, try posting these types of questions to [Q&A](<a href="http://developer.appcelerator.com/questions/newest)" rel="nofollow" target="_blank">http://developer.appcelerator.com/questions/newest)</a> (if you haven't already) before logging a ticket to the Titanium Community project. </li>
<li>Eric Merriman  2018-03-07

   Closing as invalid. If this is incorrect, please reopen.</li>
</ol>


<p><a href="/ALOY/ALOY-924.json">JSON Source</a></p>