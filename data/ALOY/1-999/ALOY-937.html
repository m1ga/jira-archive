---
title: "[ALOY-937] Platform specific widget assets are misplaced under Resources"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-01-27T16:07:07.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.3.1</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.4.0, Alloy 1.3.1, 2014 Sprint 02</td></tr>
<tr><th>Components</th><td>Widgets</td></tr>
<tr><th>Labels</th><td>alloy, assets, community, compile, platforms, qe-manualtest, triage, widgets</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Tony Lukasavage</td></tr>
<tr><th>Created</th><td>2014-01-23T11:06:21.000+0000</td></tr>
<tr><th>Updated</th><td>2014-11-20T22:14:40.000+0000</td></tr>
</table>

<h3>Description</h3>

There happens to be a regression with platform specific widget assets since Alloy 1.3 started compiling to platform specific folders under <code>Resources</code>.

<h4>To reproduce</h4>

1. Compile the attached Alloy app for iOS or Android.
2. Find that main assets are well placed.
3. Find that the widget assets are misplaced under <code>Resources/android/iphone</code> and alike folders.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/ALOY/ALOY-937_45630/ALOY-937_sample.zip">ALOY-937_sample.zip</td></td><td>2014-02-05T19:02:46.000+0000</td><td>6154072</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/ALOY/ALOY-937_45319/app.zip">app.zip</td></td><td>2014-01-23T11:06:21.000+0000</td><td>69763</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/ALOY/ALOY-937_45360/app (3).zip">app (3).zip</td></td><td>2014-01-24T17:29:07.000+0000</td><td>152845</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/ALOY/ALOY-937_45333/Untitled.tiff">Untitled.tiff</td></td><td>2014-01-23T20:49:59.000+0000</td><td>231790</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ritu Agrawal 2014-01-24

   Moving this ticket to engineering as we can reproduce it with the provided steps.</li>
<li>Fokke Zandbergen 2014-01-24

   </li>
<li>Tony Lukasavage 2014-01-24

   app(3) is an updated app with details related to android density specific images</li>
<li>Fokke Zandbergen 2014-01-24

   The issue described is not critical, but using density-specific folders under widget assets is as the next test shows:
   
   <a href="https://www.flowdock.com/rest/private/11188/37372/files/2IqZkjLWhNarR71S75Jkig/app.zip" rel="nofollow" target="_blank">https://www.flowdock.com/rest/private/11188/37372/files/2IqZkjLWhNarR71S75Jkig/app.zip</a>
   
   Compile for Android and you'll find <code>Resources/android/android</code> and <code>Resources/android/iphone</code> folders that shouldn't been there and the density specific widget assets can only be found under <code>Resources/android/android</code>.</li>
<li>Tony Lukasavage 2014-01-25

   PR: <a href="https://github.com/appcelerator/alloy/pull/310" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/310</a>
   test app: <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-937" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-937</a>
   
   Functional test
   
   <h4>Compile the test app (same as the one in the description) for android and/or ios</h4>
   <h4>Ensure that the file assets for the compile are copied to the right locations. For example, make sure that if you first compile for android that no "Resources/android/iphone" folder is created. Also ensure that the density-specific images for the widget are copied to the appropriate locations. For reference, I have attached a screenshot of what the resulting file structure should look like for a fresh android compile of the test app.</h4>
   </li>
<li>Tony Lukasavage 2014-01-25

   [~fokke] would you be so kind as to test with the following version of alloy and make sure that your bug is fixed?
   
   <code><pre>
   npm install -g git://github.com/appcelerator/alloy.git#1_3_X
   </pre></code>
   
   Soon as you do, I'll resolve this ticket and post a new beta to npm.</li>
<li>Fokke Zandbergen 2014-01-25

   [~tlukasavage], the only thing I've found is that there's an empty <code>Resources/iphone|android/foo</code> directory, but that's not a problem of course.
   
   Another thing not related to assets is that only when compiling to iOS, there is a <code>Resources/alloy/CFG.js</code>, duplicating <code>Resources/iphone/alloy/CFG.js</code>. Again, not really a problem, just noticed it.
   
   Also, what is the reason for having an empty <code>Resources/app.js</code>? Some kind of backwards compatibility thing? Seems to work well without.</li>
<li>Jeff Antram 2014-01-27

   Platform specific widget assets are in the right place now. 
   
   But I am seeing a populated Resources/iphone/images folder for an android build and vice versa for an iPhone build. 
   </li>
<li>Tony Lukasavage 2014-01-27

   Thanks guys! I'm going to resolve this issue to take care of the regression, but I'll log a new ticket for more cleanly populating the assets throughout the rest of the platform-specific folders.</li>
<li>Tony Lukasavage 2014-01-27

    Merged into both master and 1_3_X. Available in alloy 1.3.1-beta4.</li>
</ol>


<p><a href="/ALOY/ALOY-937.json">JSON Source</a></p>