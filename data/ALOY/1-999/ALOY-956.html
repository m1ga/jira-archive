---
title: "[ALOY-956] Jake: remove hardcoded SDK version"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-06-16T19:57:59.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.4.0</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.5.0</td></tr>
<tr><th>Components</th><td>Samples & Templates</td></tr>
<tr><th>Labels</th><td>qe-manualtest</td></tr>
<tr><th>Reporter</th><td>Tim Poulsen</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2014-02-11T16:08:03.000+0000</td></tr>
<tr><th>Updated</th><td>2014-09-17T16:29:55.000+0000</td></tr>
</table>

<h3>Description</h3>

The SDK version is hardcoded into the app.jake file as well as the HarnessTemplate. 

For jakelib/app.jake, simply removing ~line 78 is recommended:

<code>'--sdk', '3.2.0.GA'</code>

Probably need to do some string replacement in test/projects/HarnessTemplate/tiapp.xml


<h3>Comments</h3>

<ol>
<li>Tim Poulsen 2014-04-23

   While at it, we should remove the targetSdkVersion tag from the tiapp.xml. It causes problems and by default the tooling builds with the newest Android tooling available, which kicks off the 4.x emulator.</li>
<li>Federico Casali 2014-05-01

   </li>
<li>Tim Poulsen 2014-05-08

   I removed the Android labels from this ticket. There are a couple of hard-coded versions in the jake files and harness template that need to be changed. Only the targetSdkVersion is Android-specific. The others apply to all platforms.</li>
<li>Tim Poulsen 2014-06-11

   PR: <a href="https://github.com/appcelerator/alloy/pull/441" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/441</a>
   
   Merged.
   
   Functional test is to use the <code>jake app:run</code> command with its various options as described in the <a href="https://github.com/appcelerator/alloy/blob/master/jakelib/readme.md" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/jakelib/readme.md</a> file. Specifically, you should:
   
   * - Launch an app with an SDK version of your choice (with the <code>sdk</code> argument); the app should be built with the version you specified.
   * - Use <code>ti sdk select</code> to set an SDK version preference, then run jake without the <code>sdk</code> argument; the app should be built with the version you specified.
   
   In each case, jake should launch the app using the command-line arguments you pass.</li>
<li>Tim Poulsen 2014-06-16

   Apps are not built using the specified SDK as intended or expected. Reopening.</li>
<li>Tim Poulsen 2014-06-16

   New PR <a href="https://github.com/appcelerator/alloy/pull/450" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/450</a> merged.
   
   Updated code obtains the SDK version you've selected with <code>ti sdk select</code> by querying the CLI and uses it if you don't have an <code>&lt;sdk-version&gt;</code> tag in the tiapp.xml (which is now the state of the HarnessTemplate app) or specify a version with the <code>sdk</code> argument to jake. </li>
<li>Federico Casali 2014-08-19

   Verified working as expected. 
   Test case added to TCMS in the Alloy Core Test suite. 
   
   Note:
   HarnessTemplate does not include an <SDK version> tag in tiapp.xml, therefore no specific SDK is being imported in the Harness project tiapp.xml.
   However, when building, also Studio automatically uses the SDK being specified in 'ti sdk' when using jake to import the app.
   
   TiSDK 3.4.0.v20140813022514
   Appcelerator Studio 3.3.1.201408121314 
   CLI 3.4.0-dev
   Alloy 1.5.0-dev
   Xcode6-beta5
   
   </li>
</ol>


<p><a href="/ALOY/ALOY-956.json">JSON Source</a></p>