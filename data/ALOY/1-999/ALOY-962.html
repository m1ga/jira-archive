---
title: "[ALOY-962] Menu control doesn't appear in Todo sample on Android"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-04-15T13:55:03.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.4.0, 2014 Sprint 08</td></tr>
<tr><th>Components</th><td>Samples & Templates</td></tr>
<tr><th>Labels</th><td>qe-testadded</td></tr>
<tr><th>Reporter</th><td>Tim Statler</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2014-02-21T01:36:25.000+0000</td></tr>
<tr><th>Updated</th><td>2014-05-09T00:54:27.000+0000</td></tr>
</table>

<h3>Description</h3>

Steps:

1. In Studio import the Alloy Todo sample and build for Android.

Results: Menu for All, Active, Done options doesn't appear.
Expected: Menu appears.


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/ALOY/ALOY-962_46773/4.3 emulator.png">4.3 emulator.png</td></td><td>2014-03-20T20:09:13.000+0000</td><td>48656</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/ALOY/ALOY-962_46776/ALOY962.png">ALOY962.png</td></td><td>2014-03-20T20:23:36.000+0000</td><td>40574</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/ALOY/ALOY-962_46772/s4_android_442.png">s4_android_442.png</td></td><td>2014-03-20T20:09:13.000+0000</td><td>56663</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Tim Statler 2014-02-24

   The sample sets <code>navBarHidden: true</code> in index.tss, which explains it. Setting it to <code>false</code> fixes the original problem but the navbar + header bar combination looks a bit unorthodox. It seems the Android version should exclude the header view and use the action bar exclusively to add/filter items.</li>
<li>Tim Poulsen 2014-03-20

   PR: <a href="https://github.com/appcelerator/alloy/pull/350" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/350</a> 
   
   I implemented the ActionBar and menu, pinning the Add item to the action bar and forcing the rest to the menu. I replaced the PNG for the Add button with the Android R drawable to properly support multiple resolutions. While I was at it, I tweaked the TSS so the app looks better on iOS7.
   
   Functional test:
   
   1. Create a new Alloy project. 
   2. Copy the app folder from test/apps/models/todo though you'll want to keep the assets folder intact from the stock template or the app will run letter-boxed on iOS7 and be missing icons/splash screens on all platforms.
   3. Run the app for Android. It should implement the action bar as described above.
   4. Run the app for iPhone. If you preserved the assets folder, the app should fill the screen but not cover the status bar.</li>
<li>Tim Statler 2014-03-20

   I left a comment in the PR regarding the tableTop style pushing the table down too far on Android.
   
   On my Galaxy S4 (Android 4.4.2) the hidden MenuItems (All/Done/Active) aren't accessible (see attached) because the drop-down menu control doesn't appear. It appears as expected on a Genymotion Android 4.3 emulator (see other image).
   
   </li>
<li>Tim Poulsen 2014-03-20

   It works fine on my Galaxy Nexus (4.2.2). </li>
<li>Tim Poulsen 2014-03-21

   The "overflow menu" (three-dots) appears only on devices without a physical menu button. The S4 has such a button, the Nexus and Genymotion emulator also tested with do not. So, the behavior [~tstatler] describes is "expected behavior." There are ways to force the overflow menu, such as <a href="https://github.com/ricardoalcocer/actionbarextras" rel="nofollow" target="_blank">https://github.com/ricardoalcocer/actionbarextras</a></li>
<li>Tim Statler 2014-03-21

   Thanks for the info, Tim. I've created a ticket to add this info about the overflow to our Android Menu docs (TIDOC-1595). </li>
<li>Tim Poulsen 2014-04-15

   PR merged
   
   Functional review can also be done with jake:
   
   <code>jake app:run dir=models/todo platform=android</code>
   
   There were minor UI tweaks for iOS too. So, also
   
   <code>jake app:run dir=models/todo</code></li>
<li>Lokesh Choudhary 2014-05-09

   Verified the fix. We see the menu control on android & iOS.
   
   Closing.
   
   Environment:
   Appc Studio : 3.3.0.201405011408
   Ti SDK : 3.3.0.v20140508101423
   Mac OSX : 10.8.5
   Alloy : 1.4.0-dev
   CLI - 3.3.0-dev
   Nexus 5 - android 4.4.2
   Iphone 5 - iOS 6.1.3</li>
</ol>


<p><a href="/ALOY/ALOY-962.json">JSON Source</a></p>