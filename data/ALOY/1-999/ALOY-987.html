---
title: "[ALOY-987] Alloy : Shorthand for fetch() don't work correctly using default alloy_id"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-04-11T17:30:44.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.4.0, 2014 Sprint 07</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>Alloy, qe-testadded, query, sqlite</td></tr>
<tr><th>Reporter</th><td>Reymundo López</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2014-04-09T02:13:20.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-22T13:21:21.000+0000</td></tr>
</table>

<h3>Description</h3>

Related to ALOY-829. When trying to get a collection using the id shorthand and in the model you don't have an idAttribute configuration set, the adapter throws an exception because the idAttribute is undefined.

Also need to add the validation if id value is string, because the alloy_id values are guid's strings.

  <code><pre> myCollection.fetch({ id: "8395dda4-b998-07cb-baaf-3dd071329dc9" });</pre></code>

<code><pre>[ERROR]     nativeReason = "Error Domain=com.plausiblelabs.pldatabase Code=3 \"An error occured parsing the provided SQL statement.\" UserInfo=0xcec2b20 {com.plausiblelabs.pldatabase.error.vendor.code=1, NSLocalizedDescription=An error occured parsing the provided SQL statement., com.plausiblelabs.pldatabase.error.query.string=SELECT * FROM paymentOption WHERE undefined = 8395dda4-b998-07cb-baaf-3dd071329dc9, com.plausiblelabs.pldatabase.error.vendor.string=unrecognized token: \"8395dda4\"}";</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-987_47230/AlloyIDTest.zip">AlloyIDTest.zip</td></td><td>2014-04-10T11:54:14.000+0000</td><td>5915701</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ritu Agrawal 2014-04-09

   Please provide a simple runnable test case to reproduce this issue.</li>
<li>Reymundo López 2014-04-10

   Simple example that add models to the DB, shows the models in a TableView and when the user click in one row and do the {noformat}fetch.({ id : id }){noformat} error shows</li>
<li>Tim Poulsen 2014-04-11

   PR is <a href="https://github.com/appcelerator/alloy/pull/359" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/359</a>
   
   I've tested and the PR solves the issue and passes all tests. Ready to be merged.
   
   Functional test: run the AlloyIDTest app attached to this ticket. Tap any row in the table. The alert should show the collection length to be 1. No errors should be output.</li>
<li>Lokesh Choudhary 2014-05-14

   Verified the fix. Clicking on the table rows show's the collection length to be 1.
   
   Closing.
   
   Environment:
   Appc Studio : 3.3.0.201405121247
   Ti SDK : 3.3.0.v20140513191712
   Mac OSX : 10.8.5
   Alloy : 1.4.0-dev
   CLI - 3.3.0-dev
   Nexus 5 - android 4.4.2
   Iphone 5S - iOS 7.1</li>
</ol>


<p><a href="/ALOY/ALOY-987.json">JSON Source</a></p>