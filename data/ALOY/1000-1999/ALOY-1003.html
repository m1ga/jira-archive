---
title: "[ALOY-1003] ListView binding compile error when \"type\" is used as a bindId"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-05-28T14:54:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.5.0</td></tr>
<tr><th>Components</th><td>Styling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Paul Mietz Egli</td></tr>
<tr><th>Assignee</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Created</th><td>2014-05-01T18:29:18.000+0000</td></tr>
<tr><th>Updated</th><td>2014-09-15T09:32:26.000+0000</td></tr>
</table>

<h3>Description</h3>

I was running into the following compiler error when building my project with 1.4.0-dev:

<code><pre>
[DEBUG] [ERROR] : Object #&lt;Object&gt; has no method 'indexOf'
[DEBUG] [ERROR] Alloy compiler failed
</pre></code>

I eventually traced this down to the use of the string "type" as my bindId in my ListItem template.  The parse() method in default.js adds a property named "type" to view templates, which appears to be overwritten by my bindId value of "type", which causes processStyle() in styler.js to fail at line 359.  I changed "type" to "__type" in both default.js and styler.js, which appears to have fixed the issue.

Test case attached with commented-out working code in index.xml

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/ALOY/ALOY-1003_48179/TestListApp.zip">TestListApp.zip</td></td><td>2014-05-17T13:01:45.000+0000</td><td>6005784</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Paul Mietz Egli 2014-05-01

   PR with test and fix sent: <a href="https://github.com/appcelerator/alloy/pull/382" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/382</a></li>
<li>Tim Poulsen 2014-05-02

   PR passes all tests, changes appear to not affect use of Alloy only the compilation process, thus I've accepted and merged the PR.</li>
<li>Tim Poulsen 2014-05-02

   PR accepted and merged</li>
<li>Tim Poulsen 2014-05-02

   The fix turned out to have unintended consequences not obvious from the automated tests. Reopening to come up with a different solution.</li>
<li>Feon Sua Xin Miao 2014-05-17

   Please run the attached test app to reproduce the error.
   
   index.xml
   <code><pre>
   &lt;!-- this doesn't compile --&gt;
   &lt;ListItem template="template" type:text="hola"/&gt;
   
   &lt;!-- this compiles --&gt;
   &lt;ListItem template="template" /&gt;
   </pre></code></li>
<li>Feon Sua Xin Miao 2014-05-26

   PR: <a href="https://github.com/appcelerator/alloy/pull/417" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/417</a>
   Test app: <a href="https://github.com/feons/alloy/tree/ALOY-1003/test/apps/testing/ALOY-1003" rel="nofollow" target="_blank">https://github.com/feons/alloy/tree/ALOY-1003/test/apps/testing/ALOY-1003</a>
   
   Functional Test:
   1. Test app uses "type" as the listview template bindid, it compiles with no error.
   2. Date time picker in the test app is parsed and loads fine.
   </li>
<li>Tim Poulsen 2014-05-28

   PR merged</li>
<li>Kajenthiran Velummaylum 2014-09-15

   Closing the ticket as it's working with attached sample project. 
   
   | Appcelerator Studio | 3.4.0.201409131030 |
   | Titanium SDK | 3.4.0.v20140913174915|
   | Alloy | 1.5.0-rc2|
   | CLI | 3.4.0-rc3 |
   | OS | OSX 10.9.4 |
   | Xcode | Xcode6-GM |
   | Device | iPhone5S(iOS 8.0) Simulator, Galaxy S5 (v4.4.2) device|</li>
</ol>


<p><a href="/ALOY/ALOY-1003.json">JSON Source</a></p>