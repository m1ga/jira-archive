---
title: "[ALOY-1033] ListView searchView property throws error if set in XML"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-09-12T13:47:32.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.4.0, Alloy 1.3.1</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.5.0</td></tr>
<tr><th>Components</th><td>XML</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tim Poulsen</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2014-05-28T18:21:12.000+0000</td></tr>
<tr><th>Updated</th><td>2014-09-15T08:58:44.000+0000</td></tr>
</table>

<h3>Description</h3>

One option for enabling list view searching is to set the <code>searchView</code> property of the list equal to a reference to the SearchBar component. 

*Expectation*

I should be able to set this property as an attribute of the <code>&lt;ListView&gt;</code> tag in the XML.

*Actual*

As demonstrated by the attached app, doing so throws this error:

<code><pre>
[ERROR] Script Error {
[ERROR]     backtrace = "#0 () at file:///Users/tpoulsen/Library/Application%20Support/iPhone%20Simulator/7.1/Applications/D10A7127-56CA-485E-99C7-FE9A5C9DDD60/ListViewSearch.app/alloy.js:231";
[ERROR]     line = 95;
[ERROR]     message = "Invalid type passed to function";
[ERROR]     nativeLocation = "-[TiUIListView setSearchView_:] (TiUIListView.m:746)";
[ERROR]     nativeReason = "expected: TiUISearchBarProxy or nil, was: String";
[ERROR]     sourceId = 259295456;
[ERROR]     sourceURL = "file:///Users/tpoulsen/Library/Application%20Support/iPhone%20Simulator/7.1/Applications/D10A7127-56CA-485E-99C7-FE9A5C9DDD60/ListViewSearch.app/alloy/controllers/index.js";
[ERROR] } 
</pre></code>

*Reason and workaround*

The attribute's value is being passed as a string to the ListView component, rather than as a reference to the component with that ID. As a workaround, you can set the searchView property in the controller.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/ALOY/ALOY-1033_48424/ListViewSearch.zip">ListViewSearch.zip</td></td><td>2014-05-28T18:21:12.000+0000</td><td>5906989</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Tim Poulsen 2014-05-29

   PR: <a href="https://github.com/appcelerator/alloy/pull/422" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/422</a>
   
   Test app: test/apps/testing/ALOY-1033
   
   Functional test:
   
   1. Run the app (should see no errors in console or app). Tap in the search box and search for items (should work).
   2. Edit the app's index.xml to move the <SearchBar> within the <ListView>. Run the app and it should work as before.</li>
<li>Feon Sua Xin Miao 2014-05-30

   Tested Tim's PR, functional tests passed.</li>
<li>Tim Poulsen 2014-05-30

   PR merged</li>
<li>Tim Poulsen 2014-09-12

   This is an SDK issue, not Alloy.
   
   <code><pre>
   var win = Ti.UI.createWindow({
       backgroundColor: 'blue',
       fullscreen: false
   });
   
   // Use action bar search view
   var search = Ti.UI.Android.createSearchView({
       hintText: "Table Search",
       top: 0
   });
   
   win.add(search);
   
   var listView = Ti.UI.createListView({
   	searchView: search, /* comment this out & it runs*/
   	top: 40
   });
   var sections = [];
   
   var fruitSection = Ti.UI.createListSection({ headerTitle: 'Fruits'});
   var fruitDataSet = [
       {properties: { title: 'Apple'}},
       {properties: { title: 'Banana'}},
   ];
   fruitSection.setItems(fruitDataSet);
   sections.push(fruitSection);
   
   var vegSection = Ti.UI.createListSection({ headerTitle: 'Vegetables'});
   var vegDataSet = [
       {properties: { title: 'Carrots'}},
       {properties: { title: 'Potatoes'}},
   ];
   vegSection.setItems(vegDataSet);
   sections.push(vegSection);
   
   listView.sections = sections;
   win.add(listView);
   win.open();
   </pre></code>
   
   Crashes in the same way.</li>
<li>Feon Sua Xin Miao 2014-09-12

   Master: <a href="https://github.com/appcelerator/alloy/pull/554" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/554</a>
   1_5_X: <a href="https://github.com/appcelerator/alloy/pull/555" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/555</a>
   
   Update the test app to reflect the platform differences, such that the SearchBar is outside the list for iOS and inside the list for Android.
   </li>
<li>Tim Poulsen 2014-09-12

   PRs tested and merged</li>
<li>Visalakshi Chidambaram 2014-09-15

   Verified in the following environment : â€¨
   Appcelerator Studio, build: 3.4.0.201409131030
   CLI: 3.4.0-rc3
   Alloy: 1.5.0-rc2 
   Code processor: 1.1.1 
   SDK: 3.4.0.v20140913174915
   Mac OSX version 10.9.4
   Xcode: Xcode 6 GM seed
   Windows 8.1 
   Device: ipad (ios8) and samsung galaxy (4.4.2)</li>
</ol>


<p><a href="/ALOY/ALOY-1033.json">JSON Source</a></p>