---
title: "[ALOY-1036] CustomTSS: Comma-separated queries are using wrong operator AND instead of OR"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-06-10T17:37:26.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.4.0</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.5.0</td></tr>
<tr><th>Components</th><td>Styling</td></tr>
<tr><th>Labels</th><td>qe-closed-3.4.0, qe-manualtest, qe-testadded, styling</td></tr>
<tr><th>Reporter</th><td>Federico Casali</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2014-06-03T00:27:00.000+0000</td></tr>
<tr><th>Updated</th><td>2014-08-20T10:04:02.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem description</h4>
CustomTSS comma-separated queries are not correctly applied since the boolean operator used in this case is an AND instead of an OR.

<h4>Steps to reproduce</h4>

<h4>Sample code</h4>
// index.xml
<code><pre>
&lt;Alloy&gt;
	&lt;Window&gt;
		&lt;Label class="classLabel" id="testLabel"/&gt;
	&lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>

// app.tss
<code><pre>
"Label":{
	font:{
		fontSize:'22dp'
	},
	color:'purple'
}

".classLabel":{
	text:"Simple class label applied"
}

".classLabel[platform=ios,android formFactor=tablet,handheld if=Alloy.Globals.custom1,Alloy.Globals.custom2]":{
	text:"iOS or Android! Styles conditionals correctly applied"
}
</pre></code>

// alloy.js
<code><pre>
Alloy.Globals.custom1 = true;
Alloy.Globals.custom2 = false;
</pre></code>

<h4>Steps</h4>
1. Run the sample code either on iOS or Android
Result: Label text is "Simple class label applied"
Expected result: Label text should be "iOS or Android! Styles conditionals correctly applied"
Style conditional is not satisfied as custom2 is false and "if=Alloy.Globals.custom1,Alloy.Globals.custom2" returns false (should be true).

2. Change "Alloy.Globals.custom2" from false to true. Run on either iOS or Android.
Result: Label text is "iOS or Android! Styles conditionals correctly applied", since both are true and the AND operator returns true. 

<h3>Comments</h3>

<ol>
<li>Tim Poulsen 2014-06-10

   PR <a href="https://github.com/appcelerator/alloy/pull/442" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/442</a>
   
   Test app: Use <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-1036" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/testing/ALOY-1036</a>
   
   Functional test
   
   1. Build the the 1036 test app. You should see two labels: the first to say "iOS or Android! Styles conditionals correctly applied" and the second to say "Add in XML"
   2. Modify alloy.js setting both global variables true. The build the app. You should see the same two labels.
   3. Modify alloy.js setting both global variables false. The build the app. You should see just one label with the text "Simple class label applied".
   4. Build the <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/advanced/custom_tss_queries" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/advanced/custom_tss_queries</a> app. It should run without errors and apply styles as described by the alloy.js and TSS classes.</li>
<li>Tim Poulsen 2014-06-10

   Reopening to adjust time</li>
<li>Tim Poulsen 2014-06-10

   Re-resolving with updated time</li>
<li>Priya Agarwal 2014-08-20

   Verified with:
   
   Appc Studio - 3.4.0.201408180158 
   SDK - 3.4.0.v20140819094113 
   acs - 1.0.16 
   alloy - 1.5.0-dev 
   npm - 1.3.2 
   titanium - 3.4.0-dev 
   titanium-code-processor - 1.1.1 
   OS - mavericks (v10.9.4) 
   Xcode - 6Beta5
   Device - iPhone5s(v8.0), Nexus7(v4.4.4)
   
   Tested both the apps (test/apps/testing/ALOY-1036 and <a href="https://github.com/appcelerator/alloy/tree/master/test/apps/advanced/custom_tss_queries)." rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/advanced/custom_tss_queries).</a> Both apps run without error and as expected.
   Hence closing the issue.</li>
</ol>


<p><a href="/ALOY/ALOY-1036.json">JSON Source</a></p>