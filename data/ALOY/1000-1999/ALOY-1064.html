---
title: "[ALOY-1064] ListView parser should remove Templates node after processing the templates"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-08-05T05:31:15.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.5.0</td></tr>
<tr><th>Components</th><td>Tooling</td></tr>
<tr><th>Labels</th><td>qe-manualtest</td></tr>
<tr><th>Reporter</th><td>Tim Poulsen</td></tr>
<tr><th>Assignee</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Created</th><td>2014-06-30T19:28:17.000+0000</td></tr>
<tr><th>Updated</th><td>2014-09-13T16:40:54.000+0000</td></tr>
</table>

<h3>Description</h3>

Given a project containing a widget and this in index.xml:

<code><pre>
<Alloy>
    <Window>
        <Widget src="foo">
            <ListView>
                <Templates>
                    <ItemTemplate name="first">
                       <!-- ... ... ... -->
                    </ItemTemplate>
 
                     <ItemTemplate name="second">
                       <!-- ... ... ... -->
                    </ItemTemplate>
                </Templates>
            </ListView>
       </Widget>
    </Window>
</Alloy>
</pre></code>

The widget receives an arguments object containing two extra <code>null</code> values which presumably correspond to the ItemTemplate tags. Those should be removed by the Ti.UI.ListView.js parser.

Generated code without this change:
<code><pre>
$.__views.__alloyId0 = Alloy.createWidget("foo", "widget", {
    id: "__alloyId0",
    children: [ , , $.__views.__alloyId1 ],
    __parentSymbol: $.__views.index
});
</pre></code>

Using child views of Widget other than ListView (such as using a pair of Views) does not pass those null values via the children array.

Workaround: reference the children array like this:

<code><pre>
var kids = _.compact(arguments[0].children);
Ti.API.info(JSON.stringify(kids));
</pre></code>


<h3>Comments</h3>

<ol>
<li>Feon Sua Xin Miao 2014-08-04

   PR: <a href="https://github.com/appcelerator/alloy/pull/499" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/499</a>
   Test app: <a href="https://github.com/feons/alloy/tree/ALOY-1064/test/apps/testing/ALOY-1064" rel="nofollow" target="_blank">https://github.com/feons/alloy/tree/ALOY-1064/test/apps/testing/ALOY-1064</a>
   
   Functional Test:
   
       1. Compile test app on iOS
       2. There should be no null values for widget's children property. The generated code should look like this:
   <code><pre>
   128     $.__views.__alloyId0 = Alloy.createWidget("foo", "widget", {
   129         id: "__alloyId0",
   130         children: [ $.__views.__alloyId1 ],
   131         __parentSymbol: $.__views.index
   132     });
   </pre></code>
   
   </li>
<li>Federico Casali 2014-09-13

   Verified fixed on iOS 8 (iPAD mini) and Android 4.3 
   
   TiSDK 3.4.0.v20140912164913
   Appcelerator Studio 3.4.0.201409121853
   CLI 3.4.0-rc3
   Alloy 1.5.0-rc
   Xcode6 GM
   
   Closing.</li>
</ol>


<p><a href="/ALOY/ALOY-1064.json">JSON Source</a></p>