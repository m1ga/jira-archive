---
title: "[ALOY-1087] baseController in widgets should look for local controller"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Widgets</td></tr>
<tr><th>Labels</th><td>baseContro, widgets</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2014-06-17T08:46:28.000+0000</td></tr>
<tr><th>Updated</th><td>2016-12-08T14:21:51.000+0000</td></tr>
</table>

<h3>Description</h3>

When you try to define a baseController for a widget controller:

<code><pre>
exports.baseController = 'foo';
</pre></code>

The compiled widget controller will have:

<code><pre>
require("alloy/controllers/foo').apply(this, Array.prototype.slice.call(arguments));
</pre></code>

Using <code>WPATH('foo')</code> will only make things worse and result in a path like <code>alloy/controllers/my.widget/foo</code>.

Related code:

- <a href="https://github.com/appcelerator/alloy/blob/6e5496c545d67a4fe60bd967bda55a06d5807611/Alloy/template/component.js#L18" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/6e5496c545d67a4fe60bd967bda55a06d5807611/Alloy/template/component.js#L18</a>
- <a href="https://github.com/appcelerator/alloy/blob/624da7094296bdabd5b9e53201948d6f3dac782d/Alloy/commands/compile/index.js#L584" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/624da7094296bdabd5b9e53201948d6f3dac782d/Alloy/commands/compile/index.js#L584</a>

Maybe at the lines mentioned second we can prefix either <code>alloy/controllers</code> or <code>widgetDir</code>?

<code><pre>
	template.parentController = (cCode.parentControllerName !== '') ?
		(cCode.parentControllerName : "'BaseController'";
</pre></code>

<h3>Comments</h3>

<ol>
<li>Mauro Parra-Miranda 2014-07-15

   Original Reporter: [~fokke]</li>
<li>Fokke Zandbergen 2014-11-10

   The workaround is to use a relative path:
   
   <code><pre>
   exports.baseController = '../widgets/theWidgetYouWantToExtend/controllers/widget';
   </pre></code></li>
<li>Sergey Nosenko 2016-12-08

   the workaround doesn't work with Android SDK 6.0.0  :(
   
   I have to use
   <code><pre>require("./field").apply($, Array.prototype.slice.call(arguments));</pre></code>
   in my controllers.</li>
</ol>


<p><a href="/ALOY/ALOY-1087.json">JSON Source</a></p>