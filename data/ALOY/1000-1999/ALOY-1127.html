---
title: "[ALOY-1127] Alloys Data Binding feature does not respect formFactor property"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-10-07T03:16:32.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.6.0, Alloy 1.7.0</td></tr>
<tr><th>Components</th><td>Models</td></tr>
<tr><th>Labels</th><td>TCSupport, alloy</td></tr>
<tr><th>Reporter</th><td>Jick Steen</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2014-07-31T08:17:21.000+0000</td></tr>
<tr><th>Updated</th><td>2015-03-26T20:53:14.000+0000</td></tr>
</table>

<h3>Description</h3>

Similar to ALOY-691 the same example fails if using the <code>formFactor</code> attribute. See following example using Alloy 1.4.1 . It results in a crash.

<code><pre>
&lt;Alloy&gt;
    &lt;Collection src="test" /&gt;
    &lt;Window id="index" platform="ios" formFactor="tablet"&gt;
        &lt;View id="content" dataCollection="test" dataFunction="render"&gt;
            &lt;View&gt;&lt;/View&gt;
        &lt;/View&gt;
    &lt;/Window&gt;
    &lt;Window id="index" platform="ios" formFactor="handheld"&gt;
        &lt;TableView&gt;
            &lt;TableViewRow dataCollection="test" dataFunction="render"&gt;
                &lt;View&gt;&lt;/View&gt;
            &lt;/TableViewRow&gt;
        &lt;/TableView&gt;
    &lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>

<code><pre>
$.index.addEventListener('open', function () {
    $.destroy();
});
 
$.index.open(); 
 
render();
</pre></code>

<code><pre>
exports.definition = {
 
  configuration : {
    "columns": {
      "username":"string"
    },
    "adapter": {
      "type": "sql",
      "collection_name": "test"
    },
  },
 
  extendModel: function(Model) {
 
    _.extend(Model.prototype, {});
 
    return Model;
  },
 
  extendCollection: function(Collection) {
 
    _.extend(Collection.prototype, {});
 
    return Collection;
  }
}
</pre></code>

This will generate the following code in <code>destroy()</code> although always only one of those can be defined at a moment. To reproduce just run it on iOS.

<code><pre>
exports.destroy = function() {
    __alloyId5.off("fetch destroy change add remove reset", render);
    __alloyId12.off("fetch destroy change add remove reset", render);
};
</pre></code>

Error message will be for instance
<code><pre>
'undefined' is not an object (evaluating '__alloyId5.off')
</pre></code>

Link to Q&A: <a href="http://developer.appcelerator.com/question/176639/alloys-data-binding-feature-does-not-respect-handheld-property" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/176639/alloys-data-binding-feature-does-not-respect-handheld-property</a>

<h3>Comments</h3>

<ol>
<li>Jick Steen 2014-09-01

   FYI: Same error happens when using new "if" condition instead of "platform and formFactor" attribute.</li>
<li>Mauro Parra-Miranda 2014-09-04

   [~tlukasavage]: Hello! can you please set Jick Steen as the reporter? For some reason when I move this bugs, the reporter gets changed in automatic and I can't edit them later. </li>
<li>Tim Poulsen 2014-09-11

   I need further info to proceed. Starting with this as an example:
   
   <code><pre>
   &lt;Alloy&gt;
   	&lt;Collection src="test" /&gt;
   	&lt;Window id="index" platform="ios" formFactor="tablet"&gt;
   		&lt;TableView dataCollection="test" dataFunction="render"&gt;
   		&lt;/TableView&gt;
   	&lt;/Window&gt;
   	&lt;Window id="index" platform="ios" formFactor="handheld"&gt;
   		&lt;TableView dataCollection="test" dataFunction="render"&gt;
   		&lt;/TableView&gt;
   	&lt;/Window&gt;
   &lt;/Alloy&gt;
   </pre></code>
   
   What should happen if the developer:
   
   - uses a different dataFunction name for each of the form factor "branches"?
   - uses a custom dataFunction name for one form factor, but not the other (omits <code>dataFunction="render"</code>)?
   - uses different UI components in the two "branches" (e.g. TableView in one, ScrollableView in the other)? And does that affect the preceding dataFunction name questions?
   
   Which of those are error conditions that should be caught vs. which need to be made to work?</li>
<li>Tim Poulsen 2014-09-30

   PR <a href="https://github.com/appcelerator/alloy/pull/580" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/580</a>
   
   Functional test:
   
   1. Run the included ALOY\-1127 test app for a handset. You should get a table with blue labels in the rows.
   2. Run it again for a tablet. Rows should have red labels.
   3. Edit index.xml to remove or rename the dataFunction for either of the form factors (e.g. for the handheld window, change to <code>dataFunction="renderMe"</code>). Then, re-run for both form factors.
   
   In all cases, the app should run without error and display the appropriately colored rows.</li>
<li>Feon Sua Xin Miao 2014-10-07

   PR merged.</li>
<li>Feon Sua Xin Miao 2015-01-13

   Backport to 1_6_X : <a href="https://github.com/appcelerator/alloy/pull/651" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/651</a></li>
<li>Eric Wieber 2015-03-26

   Verified fixed using:
   
   Titanium SDK 4.0.0.v20150325201813
   Studio 4.0.0.201503232213
   Appc NPM: 0.3.35
   Appc CLI 0.2.192
   Xcode 6.2
   Alloy 1.6.0-alpha
   
   On:
   iPhone 6 Sim, iOS 8.2
   iPad 2 Sim, iOS 8.2
   
   Styling and data binding perform as expected across the two platforms.</li>
</ol>


<p><a href="/ALOY/ALOY-1127.json">JSON Source</a></p>