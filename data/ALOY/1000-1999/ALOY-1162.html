---
title: "[ALOY-1162] Backbone 1.1.2 : <model/property> sample returning unexpected data for model attributes"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-10-24T15:29:37.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.6.0</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.6.0</td></tr>
<tr><th>Components</th><td>Models</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Federico Casali</td></tr>
<tr><th>Assignee</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Created</th><td>2014-10-13T22:42:00.000+0000</td></tr>
<tr><th>Updated</th><td>2015-03-30T21:06:30.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem description</h4>
Using Backbone 1.1.2, sample app included in <model/properties> returns unexpected data values when fetching for stored persistent Model data (using properties adapter).

<h4>Steps to reproduce</h4>
Currently working on narrowing down the sample code. However it can be reproduced by getting the alloy sample for model/properties (<a href="https://github.com/appcelerator/alloy/tree/master/test/apps/models/properties" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/models/properties</a> )

1. Import the sample code
2. Add backbone support in config.json and in the 'exports.definition = {}' add:
<code><pre>
{
	"sourcemap": false,
	"adapters": ["properties"],
	"backbone": "1.1.2"
}
</pre></code>
3. Edit models/modelTab.js and add
<code><pre>
extendCollection : function(Collection) {
        _.extend(Collection.prototype, {

			// For Backbone v1.1.2, uncomment this to override the fetch method
			
			fetch: function(options) {
				options = options ? _.clone(options) : {};
				options.reset = true;
				return Backbone.Collection.prototype.fetch.call(this, options);
			},
			

            comparator: function(singleModel) {
				return singleModel.get('done');
			}
        });

        return Collection;
    }
</pre></code>
4. Run
5. Click on Increment a few times. Then close the app.
Result: label is updated accordingly as expected, incrementing the count. Displayed label is something like:
<code><pre>
model: {"id":"instance", "count":2}
</pre></code>
6. Reopen the app
Displayed label is now different than expected, returning a new model with count 0 and the previous created/incremented models. 
See attachment.




<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/ALOY/ALOY-1162_51956/Screen Shot 2014-10-13 at 3.41.19 PM.png">Screen Shot 2014-10-13 at 3.41.19 PM.png</td></td><td>2014-10-13T22:42:00.000+0000</td><td>28976</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Feon Sua Xin Miao 2014-10-20

   PR : <a href="https://github.com/appcelerator/alloy/pull/593" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/593</a>
   
   Function Test:
   1. Run the sample app included in <model/properties> on Backbone 1.1.2
   2. Follow the steps to reproduce listed above, the content of the label content should be the same before and after reopen.</li>
<li>Tim Poulsen 2014-10-21

   PR merged</li>
<li>Feon Sua Xin Miao 2014-10-24

   1_6_X: <a href="https://github.com/appcelerator/alloy/pull/600" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/600</a></li>
<li>Tim Poulsen 2014-10-24

   PR merged</li>
<li>Eric Wieber 2015-03-30

   Verified fixed using:
   
   Titanium SDK 4.0.0.v20150325201813
   Studio 4.0.0.201503271912
   Appc NPM: 0.3.37
   Appc CLI 0.2.204
   Alloy 1.6.0-alpha2
   
   Label content and list items are maintained through app closures, as described.</li>
</ol>


<p><a href="/ALOY/ALOY-1162.json">JSON Source</a></p>