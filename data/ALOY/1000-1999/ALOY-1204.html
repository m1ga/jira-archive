---
title: "[ALOY-1204] Override L behavior and id attributes in views"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2014-12-17T17:05:37.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>I18N</td></tr>
<tr><th>Labels</th><td>i18n</td></tr>
<tr><th>Reporter</th><td>Shuo Liang</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2014-12-15T08:48:32.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-07T22:28:28.000+0000</td></tr>
</table>

<h3>Description</h3>

You can't override *L*, but you can override *Ti.Locale.getString*.
Here's an example in the alloy.js :

<code><pre>
var getString = Ti.Locale.getString;
Ti.Locale.getString = function() {
    return '@' + getString.apply(this, arguments) + '@';
};
</pre></code>

Now a little strings.xml :

<code><pre>
<?xml version="1.0" encoding="UTF-8"?>
<resources>
  <string name="test1">I am test 1</string>
  <string name="test2">I am test 2</string>
  <string name="test3">I am test 3</string>
</resources>
</pre></code>

An now a simple view :

<code><pre>
<Alloy>
    <Window class="container">
        <Label text="L('test1')" />
        <Label>L('test2')</Label>
        <Label textid="test3" />
    </Window>
</Alloy>
</pre></code>

The output of this views will be : 

<code><pre>
@I am test 1@
@I am test 2@
I am test 3
</pre></code>

When you use an id attribute in a view (textid, titleid, etc ...), it doesn't call *Ti.Locale.getString*. So you can't override completely the behavior of L.

<h3>Comments</h3>

<ol>
<li>Tim Poulsen 2014-12-17

   The fact that you can do this at all in Alloy must be a quirk of Alloy. This Classic example demonstrates that you cannot extend Ti.Locale.getString() outside of Alloy.
   
   <code><pre>
   var win = Ti.UI.createWindow({
       layout:'vertical',
       backgroundColor: 'white'
   });
   
   var getString = Ti.Locale.getString;
   Ti.Locale.getString = function() {
   	console.log('extending getString');
       return '@' + getString.apply(this, arguments) + '@';
   };
   
   win.add(Ti.UI.createLabel({
   	top: 20,
   	text: Ti.Locale.getString('lbl1')
   }));
   win.add(Ti.UI.createLabel({
   	top: 10,
   	text: L('lbl2')
   }));
   win.add(Ti.UI.createLabel({
   	top: 10,
   	textid: 'lbl3'
   }));
   
   win.open();
   </pre></code>
   
   <code><pre>
   <?xml version="1.0" encoding="UTF-8"?>
   <resources>
       <string name="lbl1">Label 1</string>
       <string name="lbl2">Label 2</string>
       <string name="lbl3">Label 3</string>
   </resources>
   </pre></code>
   
   The app shows three labels with the text Label 1, Label 2, and Label 3.
   
   Our guides specifically say [don't extend the Titanium proxies](<a href="http://docs.appcelerator.com/titanium/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/latest/#</a>!/guide/Coding_Best_Practices-section-30082362_CodingBestPractices-Don%27tExtendTitaniumPrototypes). The best way to override Ti.Locale.getString is to wrap it in a helper function. Something like:
   
   <code><pre>
   exports.getString = function(key) {
   	if(typeof key === 'string') {
   		return "@" + Ti.Locale.getString(key) + "@";
   	}
   	return '';
   }
   </pre></code>
   
   <code><pre>
   var getString = require('localehelper').getString;
   
   win.add(Ti.UI.createLabel({
   	top: 20,
   	text: getString('lbl1')
   }));
   </pre></code></li>
<li>Tim Poulsen 2014-12-17

   Goes against best practices. Proper technique demonstrated in the comment.</li>
<li>Tim Poulsen 2014-12-17

   Reopening to change resolution type</li>
<li>Eric Merriman  2018-03-07

   Closing as invalid. If this is incorrect, please reopen.</li>
</ol>


<p><a href="/ALOY/ALOY-1204.json">JSON Source</a></p>