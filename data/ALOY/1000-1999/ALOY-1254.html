---
title: "[ALOY-1254] Alloy: Support model transform() method for collection-view binding"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-03-21T17:21:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.5.1, Alloy 1.6.0, Alloy 1.7.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.2.1, alloy 1.8.1</td></tr>
<tr><th>Components</th><td>XML</td></tr>
<tr><th>Labels</th><td>data-binding</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Fokke Zandbergen</td></tr>
<tr><th>Created</th><td>2015-02-20T15:25:03.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-30T09:07:04.000+0000</td></tr>
</table>

<h3>Description</h3>

While undocumented, with model-view binding the model is tried for a <code>transform()</code> method. With collection-view binding you have to use the <code>dataTransform</code> attribute in the view.

If the user doesn't use the <code>dataTransform</code> attribute we should try the model for a <code>transform()</code> method as well.

<h4>Current situation</h4>

*index.xml*
<code><pre>
&lt;Alloy&gt;
  &lt;Model src="foo" /&gt;
  &lt;Collection src="foo" /&gt; 
  &lt;Window class="container"&gt;
    &lt;Label text="{foo.name}" /&gt;
    &lt;TableView dataCollection="foo"&gt;
      &lt;TableViewRow title="{name}" /&gt;
    &lt;/TableView&gt;
  &lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>

*index.js* (compiled)
<code><pre>
    function __alloyId10(e) {
        // ..
            __alloyId6.__transform = {};
            var __alloyId8 = Ti.UI.createTableViewRow({
                title: "undefined" != typeof __alloyId6.__transform["name"] ? __alloyId6.__transform["name"] : __alloyId6.get("name")
            });
        // ..
    }
    // ..
    var __alloyId11 = function() {
        $.__alloyId4.text = _.isFunction(Alloy.Models.foo.transform) ? Alloy.Models.foo.transform()["name"] : _.template("&lt;%=foo.name%&gt;", {
            foo: Alloy.Models.foo.toJSON()
        });
    };
</pre></code>

<h4>Suggested change</h4>

The model's <code>transform()</code> method could be supported by changing the 3rd line off the compiled example to:

<code><pre>
__alloyId6.__transform = _.isFunction(__alloyId6.transform) ? __alloyId6.transform() : {};
</pre></code>

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2015-02-20

   I've updated the documentation with the missing <code>transform()</code> function:
   <a href="https://wiki.appcelerator.org/display/guides2/Alloy+Data+Binding" rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/guides2/Alloy+Data+Binding</a></li>
<li>Fokke Zandbergen 2016-03-16

   PR: <a href="https://github.com/appcelerator/alloy/pull/768" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/768</a></li>
<li>Hazem Khaled 2016-03-27

   I’m facing issue since Alloy 1.8.1 maybe related to here ALOY-1254, i've to add transform method extended in the model, and not working without it
   
   <code><pre>
   &lt;Alloy&gt;
   	&lt;Model src="store_selected”/&gt;
   	&lt;Window&gt;
   		&lt;Label text="{store_selected.logo}"/&gt;
   	&lt;/Window&gt;
   &lt;/Alloy&gt;
   </pre></code>
   
   <code><pre>
   Alloy.Globals.Models.store_selected.fecth();
   index.open();
   </pre></code>
   
   <code><pre>
   exports.definition = {
   	config: {
   		columns: {
   			"store_id": "INTEGER",
   			"name": "TEXT",
   			"displayname": "TEXT",
   			"logo": "TEXT",
   			"lang": "TEXT",
   			"website_id": "INTEGER",
   			"sort_order": "INTEGER",
   			"group_id": "INTEGER",
   			"root_category_id": "INTEGER"
   		},
   		adapter: {
   			type: "sql",
   			collection_name: "store_selected",
   			idAttribute: "store_id"
   		}
   	},
   	extendModel: function(Model) {
   		_.extend(Model.prototype, {
   			transform: function transform() {
   				return this.toJSON();
   			}
   		});
   		return Model;
   	},
   	extendCollection: function(Collection) {
   		_.extend(Collection.prototype, {});
   		return Collection;
   	}
   };
   </pre></code></li>
<li>Fokke Zandbergen 2016-03-28

   [~hazemkhaled] thanks for reporting, I've logged this under ALOY-1474 and a fix is in ready soon.</li>
</ol>


<p><a href="/ALOY/ALOY-1254.json">JSON Source</a></p>