---
title: "[ALOY-1262] a directory ending with ".js" causes Alloy compiler error"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-05-28T06:11:57.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.6.0</td></tr>
<tr><th>Fix Version/s</th><td>Alloy 1.7.0</td></tr>
<tr><th>Components</th><td>Runtime</td></tr>
<tr><th>Labels</th><td>defect</td></tr>
<tr><th>Reporter</th><td>Xavier Lacot</td></tr>
<tr><th>Assignee</th><td>Radamantis Torres-Lechuga</td></tr>
<tr><th>Created</th><td>2015-04-13T10:03:46.000+0000</td></tr>
<tr><th>Updated</th><td>2015-09-04T21:00:18.000+0000</td></tr>
</table>

<h3>Description</h3>

This bug is related to [ALOY-920], which introduced a fix for the specific case of <code>should.js</code>.

When building an Alloy project containg a library directory named with a <code>.js</code> suffix, the compiler fails:

<code><pre>
[INFO]  ----- OPTIMIZING -----
[INFO]  - iphone/vendor/validator.js
[ERROR] Error generating AST for "/Users/xavier/titanium/DemoApp/Resources/iphone/vendor/validator.js"
[ERROR] EISDIR, illegal operation on a directory
[ERROR] Alloy compiler failed
</pre></code>

The <code>getJsFiles()</code> Alloy compiler method filters which files have to be optimized, as in <a href="https://github.com/appcelerator/alloy/blob/master/Alloy/commands/compile/index.js#L1017" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/Alloy/commands/compile/index.js#L1017</a>
This method fails to exclude items which are directories ending with <code>.js</code>, and <code>uglifyjs.parse()</code> then throws an error.

A pull request has been submitted at <a href="https://github.com/appcelerator/alloy/pull/683" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/683</a>

<h3>Comments</h3>

<ol>
<li>Feon Sua Xin Miao 2015-05-28

   PR merged.</li>
<li>Ewan Harris 2015-09-04

   Verified using:
   
   Mac OS 10.10.5
   Appc NPM 4.2.0-1
   Appc CLI Core 5.0.0-41 (Alloy 1.7.X)
   Ti SDK 5.0.0.v20150903221516
   
   Directories ending in .js no longer cause compiler errors
   
   Closing ticket</li>
</ol>


<p><a href="/ALOY/ALOY-1262.json">JSON Source</a></p>