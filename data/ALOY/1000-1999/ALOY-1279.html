---
title: "[ALOY-1279] Android: Battery event listener causes a crash after open and close multiple windows"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2015-10-27T18:45:39.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.6.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Shuo Liang</td></tr>
<tr><th>Assignee</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Created</th><td>2015-06-08T07:02:00.000+0000</td></tr>
<tr><th>Updated</th><td>2015-11-10T22:52:57.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Reproduce Steps:</h4>
Simply run the following alloy project(attached views, styles and controllers folder)

<h4>Expect Result:</h4>
Should display a screen with battery and network info.

<h4>Actual Result:</h4>
Return a error, like following:
<code><pre>
[ERROR] TiApplication: (main) [8069,13162] Sending event: exception on thread: main msg:java.lang.NullPointerException; Titanium 4.0.0,2015/05/18 15:42,9239ff9 
[ERROR] TiApplication: java.lang.NullPointerException 
[ERROR] TiApplication: at ti.modules.titanium.platform.PlatformModule.registerBatteryReceiver(PlatformModule.java:292) 
[ERROR] TiApplication: at ti.modules.titanium.platform.PlatformModule.registerBatteryStateReceiver(PlatformModule.java:231) 
[ERROR] TiApplication: at ti.modules.titanium.platform.PlatformModule.eventListenerAdded(PlatformModule.java:244) 
[ERROR] TiApplication: at org.appcelerator.kroll.KrollProxy.handleMessage(KrollProxy.java:1096) 
[ERROR] TiApplication: at android.os.Handler.dispatchMessage(Handler.java:98) 
[ERROR] TiApplication: at android.os.Looper.loop(Looper.java:136) 
[ERROR] TiApplication: at android.app.ActivityThread.main(ActivityThread.java:5050) 
[ERROR] TiApplication: at java.lang.reflect.Method.invokeNative(Native Method) 
[ERROR] TiApplication: at java.lang.reflect.Method.invoke(Method.java:515) 
[ERROR] TiApplication: at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:780) 
[ERROR] TiApplication: at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:596) 
[ERROR] TiApplication: at dalvik.system.NativeStart.main(Native Method) 
</pre></code>

<h4>Note:</h4>
If reduce the number of dummyWindow to 2, it works well,
And I can only reproduce it on Samsung Galaxy on Android 4.2.2, 
it works as expected on Motorola on Android 4.4.2 

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1279_55758/dummyWindow.js">dummyWindow.js</td></td><td>2015-06-08T07:01:54.000+0000</td><td>733</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1279_55761/dummyWindow.tss">dummyWindow.tss</td></td><td>2015-06-08T07:01:42.000+0000</td><td>168</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1279_55764/dummyWindow.xml">dummyWindow.xml</td></td><td>2015-06-08T07:01:27.000+0000</td><td>96</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1279_55756/index.js">index.js</td></td><td>2015-06-08T07:01:54.000+0000</td><td>134</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1279_55759/index.tss">index.tss</td></td><td>2015-06-08T07:01:42.000+0000</td><td>548</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1279_55762/index.xml">index.xml</td></td><td>2015-06-08T07:01:27.000+0000</td><td>488</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1279_55757/infoWindow.js">infoWindow.js</td></td><td>2015-06-08T07:01:54.000+0000</td><td>2796</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1279_55760/infoWindow.tss">infoWindow.tss</td></td><td>2015-06-08T07:01:42.000+0000</td><td>548</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1279_55763/infoWindow.xml">infoWindow.xml</td></td><td>2015-06-08T07:01:27.000+0000</td><td>488</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/ALOY/ALOY-1279.json">JSON Source</a></p>