---
title: "[ALOY-1306] AttributedString proxy property doesn't work if there's whitespace"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2017-02-24T01:12:20.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.7.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>XML</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Bruce Wayne</td></tr>
<tr><th>Created</th><td>2015-09-23T12:09:16.000+0000</td></tr>
<tr><th>Updated</th><td>2017-02-24T01:12:20.000+0000</td></tr>
</table>

<h3>Description</h3>

The <code><AttributedString></code> described in the [docs](<a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/guide/Alloy_XML_Markup-section-35621528_AlloyXMLMarkup-ProxyProperties) does not work if there's whitespace between the <code><Label></code> and <code><AttributedString></code> elements because of TIMOB-19168.

*XML*
<code><pre>
<Alloy>
	<Window>
		<Label>
			<AttributedString class="ATTRIBUTE_LINE_BREAK_BY_CHAR_WRAPPING">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam venenatis vel orci sit amet facilisis. Sed lobortis ante et sapien sagittis, eu mattis libero suscipit.</AttributedString>
		</Label>
	</Window>
</Alloy>
</pre></code>

*TSS*
<code><pre>
".ATTRIBUTE_LINE_BREAK_BY_CHAR_WRAPPING" : {
	attributes: [
		{
			type: Ti.UI.ATTRIBUTE_LINE_BREAK,
			value: Ti.UI.ATTRIBUTE_LINE_BREAK_BY_CHAR_WRAPPING,
			range: [0, 164]
		}
	]
}
</pre></code>

*compiled*
<code><pre>
    $.__views.__alloyId14 = Ti.UI.createAttributedString({
        attributes: [ {
            type: Ti.UI.ATTRIBUTE_LINE_BREAK,
            value: Ti.UI.ATTRIBUTE_LINE_BREAK_BY_CHAR_WRAPPING,
            range: [ 0, 164 ]
        } ],
        text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam venenatis vel orci sit amet facilisis. Sed lobortis ante et sapien sagittis, eu mattis libero suscipit.",
        id: "__alloyId14"
    });
    $.__views.__alloyId13 = Ti.UI.createLabel({
        font: {
            fontSize: 17
        },
        text: "",
        attributedString: $.__views.__alloyId14,
        id: "__alloyId13"
    });
</pre></code>

As you can see the <code>text</code> property is set to <code>""</code> which because of TIMOB-19168 results in an empty label. The workaround is to do:

<code><pre>
<Alloy>
	<Window>
		<Label><AttributedString class="ATTRIBUTE_LINE_BREAK_BY_CHAR_WRAPPING">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam venenatis vel orci sit amet facilisis. Sed lobortis ante et sapien sagittis, eu mattis libero suscipit.</AttributedString></Label>
	</Window>
</Alloy>
</pre></code>

But Alloy should take care of this since it doesn't make sense to set a text and attributedString at the same time, in particular because of TIMOB-19168 and that all samples in the documentation include spacing.

I was also wondering why do we have 2 alternate (the other being ALOY-961) implementations for attributedStrings in Alloy?

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2015-09-23

   Checking the [PR](<a href="https://github.com/appcelerator/alloy/pull/644/files)" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/644/files)</a> for ALOY-961 I see that the description of that ticket is not what was in the end implemented, but it *IS* what we have in the release notes:
   <a href="https://github.com/appcelerator/alloy/releases/tag/1.7.8" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/releases/tag/1.7.8</a>
   
   The documentation seems OK because that only speaks about the proxy property, but the release notes need to be fixed [~bhatfield]</li>
<li>Feon Sua Xin Miao 2017-02-24

   alloy@1.9.8
   
   *Compiled*
   <code><pre>
       $.__views.__alloyId1 = Ti.UI.createAttributedString({
           attributes: [ {
               type: Ti.UI.ATTRIBUTE_LINE_BREAK,
               value: Ti.UI.ATTRIBUTE_LINE_BREAK_BY_CHAR_WRAPPING,
               range: [ 0, 164 ]
           } ],
           text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam venenatis vel orci sit amet facilisis. Sed lobortis ante et sapien sagittis, eu mattis libero suscipit.",
           id: "__alloyId1"
       });
       $.__views.__alloyId0 = Ti.UI.createLabel({
           font: {
               fontSize: 15
           },
           attributedString: $.__views.__alloyId1,
           id: "__alloyId0"
       });
   </pre></code></li>
</ol>


<p><a href="/ALOY/ALOY-1306.json">JSON Source</a></p>