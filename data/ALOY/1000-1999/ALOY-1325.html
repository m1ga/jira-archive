---
title: "[ALOY-1325] Add PreviewContext element to XML views"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-11-12T18:22:38.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>alloy 1.7.24</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.2.0, alloy 1.7.25</td></tr>
<tr><th>Components</th><td>XML</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Created</th><td>2015-11-04T11:51:27.000+0000</td></tr>
<tr><th>Updated</th><td>2016-02-02T22:47:55.000+0000</td></tr>
</table>

<h3>Description</h3>

Alloy should support the new <code>Ti.UI.iOS.createPreviewContext</code>.

* A PreviewContext can be added to most views via their <code>previewContext</code> property.
* The PreviewContext itself has a <code>preview</code> property which must be assigned a single View.
* The PreviewContext also has an <code>actions</code> property for one or more actions or action groups.

<code><pre>
&lt;Alloy&gt;
	&lt;View&gt;
		&lt;PreviewContext onPeek="fn1" onPop="fn2" contentHeight="300"&gt;
			&lt;Preview&gt;
				&lt;View&gt;
					&lt;Label&gt;Hello&lt;/Label&gt;
				&lt;/View&gt;
			&lt;/Preview&gt;
		&lt;/PreviewContext&gt;
	&lt;View&gt;
	&lt;ListView&gt;
		&lt;PreviewContext onPeek="fn"&gt;
			&lt;Preview&gt;
				&lt;View&gt;
					&lt;Label&gt;Hello&lt;/Label&gt;
				&lt;/View&gt;
			&lt;/Preview&gt;
			&lt;Actions&gt;
				&lt;Action title="Email" onClick="fn" /&gt;
				&lt;ActionGroup title="Delete"&gt;
					&lt;Action title="Confirm" onClick="fn" /&gt;
					&lt;Action title="Cancel" onClick="fn" /&gt;
				&lt;/ActionGroup&gt;
			&lt;/Actions&gt;
		&lt;/PreviewContext&gt;
		&lt;ListSection&gt;
			&lt;ListItem title="Hello" /&gt;
		&lt;/ListSection&gt;
	&lt;/ListView&gt;
&lt;/Alloy&gt;
</pre></code>

<h3>Comments</h3>

<ol>
<li>Feon Sua Xin Miao 2015-11-06

   How about something like this:
   <code><pre>
   &lt;Alloy&gt;
   	&lt;Window&gt;
   		&lt;View&gt;
   			&lt;PreviewContext&gt;
   				&lt;View&gt;
   					&lt;Label&gt;Hello&lt;/Label&gt;
   				&lt;/View&gt;
   				&lt;PreviewAction title='Preview Action' style='Ti.UI.iOS.PREVIEW_ACTION_STYLE_DESTRUCTIVE'/&gt;
   				&lt;PreviewActionGroup&gt;
   					&lt;PreviewAction id='action1' /&gt;
   					&lt;PreviewAction id='action2' /&gt;
   					&lt;PreviewAction id='action3' /&gt;
   				&lt;/PreviewActionGroup&gt;
   			&lt;/PreviewContext&gt;
   		&lt;/View&gt;
   	&lt;/Window&gt;
   &lt;/Alloy&gt;
   </pre></code></li>
<li>Hans Knöchel 2015-11-06

   [~fmiao] The preview actions should be surrounded by <code>&lt;Actions&gt;</code> just like we do it with <code>&lt;ButtonNames&gt;</code> etc. Overall, I would just suggest [~fokkezb]'s proposal.</li>
<li>Feon Sua Xin Miao 2015-11-06

   Sure, that's fine with me.</li>
<li>Fokke Zandbergen 2015-11-06

   I also recommend wrapping the contextpreview preview view in a contentview or maybe better preview element. Just like the popover.</li>
<li>Hans Knöchel 2015-11-06

   Semantically right would be the <code>&lt;Preview&gt;</code> tag to have parity with the API.</li>
<li>Feon Sua Xin Miao 2015-11-06

   I agree with [~hansknoechel], semantically it should be <code>Preview</code>.  Although I would prefer to have less tags that don't correspond to a Ti.UI.* object. <code>preview, actions</code> are after all properties of <code>Ti.UI.iOS.PreviewContext</code>. 
   
   [~fokkezb]'s initial proposal looks good to me,  
   
   </li>
<li>Feon Sua Xin Miao 2015-11-10

   PR: <a href="https://github.com/appcelerator/alloy/pull/739" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/739</a>
   Test app: <a href="https://github.com/feons/alloy/tree/ALOY-1325-1/test/apps/testing/ALOY-1325" rel="nofollow" target="_blank">https://github.com/feons/alloy/tree/ALOY-1325-1/test/apps/testing/ALOY-1325</a></li>
<li>Fokke Zandbergen 2015-11-11

   Found 2 more typos but with those fixed in my local version it works.</li>
<li>Feon Sua Xin Miao 2015-11-12

   PR merged.</li>
<li>Fokke Zandbergen 2015-11-21

    This has nothing to do with the SDK version but with Alloy. If you run from OSS CLI you need 1.7.25 of Alloy. If you run from AppC CLI then 5.1.0-63+ has the correct Alloy version.</li>
<li>Eric Wieber 2016-02-02

    Verified implemented, using:
    
    MacOS 10.11.3 (15D21)
    Studio 4.5.0.201601262138
    Ti SDK 5.2.0.v20160202103508
    Appc NPM 4.2.3-1
    Appc CLI 5.2.0-239
    Alloy 1.7.33
    Xcode 7.2 (7C68)
    iPhone 6S
    
    PreviewContext element is now usable and behaves as expected. Tested using the app provided at: <a href="https://github.com/feons/alloy/tree/ALOY-1325-1/test/apps/testing/ALOY-1325" rel="nofollow" target="_blank">https://github.com/feons/alloy/tree/ALOY-1325-1/test/apps/testing/ALOY-1325</a>, and simple modifications to the default sample app.</li>
</ol>


<p><a href="/ALOY/ALOY-1325.json">JSON Source</a></p>