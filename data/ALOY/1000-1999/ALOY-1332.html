---
title: "[ALOY-1332] Alloy.version does not match actual version"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-11-25T17:19:44.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>alloy 1.7.27</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.2.0, alloy 1.7.28</td></tr>
<tr><th>Components</th><td>Runtime</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Created</th><td>2015-11-20T07:45:21.000+0000</td></tr>
<tr><th>Updated</th><td>2016-01-20T23:08:29.000+0000</td></tr>
</table>

<h3>Description</h3>

<code>Alloy.version</code> is [hard-coded](<a href="https://github.com/appcelerator/alloy/blob/master/Alloy/lib/alloy.js#L30)" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/Alloy/lib/alloy.js#L30)</a> and not up to date with the actual version in [package.json](<a href="https://github.com/appcelerator/alloy/blob/master/package.json#L17)." rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/package.json#L17).</a>

For sample apps I need to check that the user is using a supported Alloy version, which because of this I can not.

I suggest we do a hacky RegEx replace [here](<a href="https://github.com/appcelerator/alloy/blob/master/Alloy/commands/compile/index.js#L164)" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/Alloy/commands/compile/index.js#L164)</a> or maybe better move [lib/alloy.js](<a href="https://github.com/appcelerator/alloy/blob/master/Alloy/lib/alloy.js)" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/Alloy/lib/alloy.js)</a> to the templates folder and properly replace a placeholder for the version with the one in <code>package.json</code>. That way we don't have to update the version in two places.

<h3>Comments</h3>

<ol>
<li>Feon Sua Xin Miao 2015-11-24

   PR: <a href="https://github.com/appcelerator/alloy/pull/743" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/743</a>
   
   Functional Test:
   1. Create a project
   2. Print out <code>Alloy.version</code> from the controller, eg. index.js
   3. The version should match package.json version.</li>
<li>Feon Sua Xin Miao 2015-11-25

   PR merged.</li>
<li>Eric Wieber 2016-01-20

   Verified fixed, using:
   
   MacOS 10.11.3 (15D21)
   Studio 4.4.0.201511241829
   Ti SDK 5.2.0.v20160114021251
   Appc NPM 4.2.3-1
   Appc CLI 5.2.0-232
   Alloy 1.7.33
   Xcode 7.2 (7C68)
   Node v0.12.7
   Java 1.7.0_80
   
   Alloy.version now prints the correct version of the Alloy package. Used the provided steps to create and check a test case</li>
</ol>


<p><a href="/ALOY/ALOY-1332.json">JSON Source</a></p>