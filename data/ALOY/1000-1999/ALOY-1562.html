---
title: "[ALOY-1562] iOS: TextArea can't get focus or blur if it is located in two different TableViewSections"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2017-05-09T17:53:49.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Titanium SDK</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Shuo Liang</td></tr>
<tr><th>Assignee</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Created</th><td>2017-04-20T12:02:33.000+0000</td></tr>
<tr><th>Updated</th><td>2017-05-09T17:53:49.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Reproduce</h4>
1. Run the attached files in a new Alloy project.
2. Click the first row of tableview

<h4>Problem</h4>
The textArea does not get focus and keyboard does not show up

<h4>Note</h4>
If there is only one tableViewSection with those two tableViewRows (instead of one row in each section), TextArea will get focused and keyboard will display well. 

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1562_62110/AlloyFiles.zip">AlloyFiles.zip</td></td><td>2017-04-26T10:48:16.000+0000</td><td>2992</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1562_62069/index.js">index.js</td></td><td>2017-04-20T12:02:20.000+0000</td><td>261</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1562_62066/index.tss">index.tss</td></td><td>2017-04-20T12:02:21.000+0000</td><td>432</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1562_62064/index.xml">index.xml</td></td><td>2017-04-20T12:02:21.000+0000</td><td>173</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1562_62158/multipleSectionTesting1.zip">multipleSectionTesting1.zip</td></td><td>2017-05-04T13:32:56.000+0000</td><td>7538</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1562_62068/tableRow.js">tableRow.js</td></td><td>2017-04-20T12:02:20.000+0000</td><td>199</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1562_62067/tableRow.tss">tableRow.tss</td></td><td>2017-04-20T12:02:20.000+0000</td><td>1818</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1562_62065/tableRow.xml">tableRow.xml</td></td><td>2017-04-20T12:02:21.000+0000</td><td>1045</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Vijay Singh 2017-04-25

   I tried with following classic app test code -
   
   <code><pre>
   var win = Ti.UI.createWindow({
       backgroundColor: '#fff'
   });
   
   var label = Ti.UI.createLabel({
     text: 'test focus'
   });
   var textArea = Ti.UI.createTextArea({
     value:'test test test',
     height:80,
     backgroundColor:'gray',
     width:Ti.UI.FILL
   });
   
   var row1 = Ti.UI.createTableViewRow({
     height: 100
   
   });
   row1.add(label);
   
   var row2 = Ti.UI.createTableViewRow({
     height: 100
   });
   row2.add(textArea);
   
   var section1 = Ti.UI.createTableViewSection({
   
   });
   section1.add(row1);
   //section1.add(row2);
   
   var section2 = Ti.UI.createTableViewSection({
   
   });
   section2.add(row2);
   
   var table = Ti.UI.createTableView({
     data: [section1, section2]
   });
   
   row1.addEventListener('click', function(e) {
   hidekeyboard();
   });
   function hidekeyboard(){
     Ti.API.info("hide keyboard");
     Ti.API.info(textArea.value);
     textArea.focus(); 
   }
   
   win.add(table);
   win.open();
   </pre></code>
   
   It is working fine . But when I am trying with given alloy code, it is giving wrong behavior as mentioned in ticket.
   [~htbryant] Can you please help me in reproducing with help of simple test case . It will help me in debugging more efficiently.</li>
<li>Harry Bryant 2017-04-25

   [~vijaysingh] Sure, I'll investigate the issue and post my findings here. </li>
<li>Vijay Singh 2017-04-26

   [~sliang] The workaround which worked for me is, in xml file TableView tag should be withTableViewSection. So I have attached "AlloyFiles.zip" which have updated index.xml, tableRow.xml, index.js . Please check with customer if this will resolve their problem.</li>
<li>Feon Sua Xin Miao 2017-04-28

   [~vijaysingh], could you try replace the loadData function under index.js with these:
   
   <code><pre>
   function loadData(){
   	var formrow = [];
   
   	var tbl = Alloy.createController('tableRow');
   	formrow.push(tbl.getView('timeDataSection'));
   	formrow.push(tbl.getView('commentsSection'));
   
   	$.formDetails.setData(formrow);
   }
   </pre></code></li>
<li>Feon Sua Xin Miao 2017-05-02

   [~sliang], do these work for the customer?
   <code><pre>
   var tbl = Alloy.createController('tableRow', [arg1, arg2]);
   // or 
   var tbl = Alloy.createController('tableRow', {a: arg1, b: arg2});
   </pre></code></li>
<li>Shuo Liang 2017-05-04

   [~fmiao]
   
   Just get customer's feedback.
   
   "Yes it working fine in sample application. But in our case it is not working. Since we are sending dynamic arguments to each section in loop. 
   
   Example :
   
   formrow.push(Alloy.createController('tableRow', {a: arg1, b: arg2}).getView('commentsSection'))
   
   Attached the multipleSectionTesting1.zip file which has sample application. I have hard coded the arguments values but in our case it comes from database. Also i have small icon in first labour time row, if i click that new section of labour and travel row will append using insertSectionAfter API . That functionality i didn't mentioned in sample. Basically we are passing arguments dynamically to tableRow file. So we cannot set the arguments like shown below. 
   
   var tbl = Alloy.createController('tableRow', [arg1, arg2]);
   
   If i click the Travel Time row, the comments field is not focusing. The focus and blur API is not working if we have TextArea in separate section. "</li>
<li>Feon Sua Xin Miao 2017-05-04

   [~sliang]
   The issue here is not that the focus or blur API is not working when a view is in different section.
   
   Each <code>Alloy.createController('tableRow')</code> call creates an instance of the controller <code>tableRow</code>, and the <code>loadData</code> event triggered by the instance will access the view <code>$.REPAIR_COMMENT</code> within that instance. 
   
   To access controller object B's view in object A, pass a reference of the view in B to A.</li>
</ol>


<p><a href="/ALOY/ALOY-1562.json">JSON Source</a></p>