---
title: "[ALOY-1570] Alloy: exports.baseController does not work since 1.10.0 (Regression)"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-06-22T18:18:55.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.10.0</td></tr>
<tr><th>Fix Version/s</th><td>CLI Release 6.3.0, Alloy 1.10.3</td></tr>
<tr><th>Components</th><td>Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Sergey Nosenko</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2017-06-20T12:58:39.000+0000</td></tr>
<tr><th>Updated</th><td>2017-10-10T19:26:15.000+0000</td></tr>
</table>

<h3>Description</h3>

since 1.10.0 exports.baseController = 'name' does not work.

I attached simple project with three controllers 
* Base
* BasedOnBase with exports.baseController = 'base' in js
* BasedOnBaseXML with <Alloy baseController="Base"> in xml

With Alloy 1.9.11 I got correct result in both cases:
<code><pre>
function Controller() {
    require("/alloy/controllers/Base").apply(this, Array.prototype.slice.call(arguments));
...
</pre></code>

but with Alloy 1.10.x I get correct code only for  BasedOnBaseXML

for BasedOnBase I get:
<code><pre>
	require('/alloy/controllers/' + 'BaseController').apply(this, Array.prototype.slice.call(arguments));
	this.__controllerPath = 'BasedOnBase';
	this.args = arguments[0] || {};

	if (arguments[0]) {
		var __parentSymbol = __processArg(arguments[0], '__parentSymbol');
		var $model = __processArg(arguments[0], '$model');
		var __itemTemplate = __processArg(arguments[0], '__itemTemplate');
	}
	var $ = this;
	var exports = {};
	var __defers = {};

	$.__views.BasedOnBase = Ti.UI.createView({ id: "BasedOnBase" });
	$.__views.BasedOnBase && $.addTopLevelView($.__views.BasedOnBase);
	exports.destroy = function () {};

	_.extend($, $.__views);

	var args = $.args;
	exports.baseController = 'Base';
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/ALOY/ALOY-1570_62703/app.zip">app.zip</td></td><td>2017-06-20T12:54:38.000+0000</td><td>7419</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2017-06-20

   Likely related to move to babylon/babel. I modified <a href="https://github.com/appcelerator/alloy/blob/master/Alloy/commands/compile/ast/controller.js" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/Alloy/commands/compile/ast/controller.js</a> and it seems maybe it's not grabbing the controller name properly now? I think it may be a simple typo: 'export.baseController' vs 'exports.baseController'</li>
<li>Christopher Williams 2017-06-20

   <a href="https://github.com/appcelerator/alloy/pull/832" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/832</a></li>
<li>Sergey Nosenko 2017-06-20

   If you release 6.20 without this it will be broken. :(</li>
<li>Ewan Harris 2017-06-22

   [~darknos] The 'Release 6.3.0' refers to the Appcelerator CLI release version, it is currently at 6.2.2, as opposed to the 6.1.0 of Titanium SDK. If you are not using the Appc CLI, (Titanium CLI+Alloy) this change will be in Alloy 1.10.3</li>
<li>Abir Mukherjee 2017-10-10

   Node Version: 6.10.3
   NPM Version: 3.10.10
   Mac OS: 10.13
   Appc CLI: 6.3.0-master.7
   Appc CLI NPM: 4.2.9
   Titanium SDK version: 6.2.2
   Validated with the environment. I tested with the attached app, and app functioned as expected. No errors were seen.
   </li>
</ol>


<p><a href="/ALOY/ALOY-1570.json">JSON Source</a></p>