---
title: "[ALOY-1612] CLI: Be able to use Alloy source-maps in Safari Debugger / Chrome Dev-Tools"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-07-12T23:23:30.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>CLI Release 7.1.0, Alloy 1.14.0</td></tr>
<tr><th>Components</th><td>Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2018-03-26T09:35:33.000+0000</td></tr>
<tr><th>Updated</th><td>2019-07-12T23:23:30.000+0000</td></tr>
</table>

<h3>Description</h3>

Based on a recent discussion with [~cbowley]! Currently, when debugging Alloy in Safari / Chrome, the dev-experience is pretty bad, because the developer sees the generated spaghetti code instead of the actual Alloy code. But there is help! We generate proper [source-maps](<a href="https://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)" rel="nofollow" target="_blank">https://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)</a> already (look into <code>build/map/*</code>, but it seems like they are not actively used. In addition, it seems like they are indeed used during compile time - for compilation errors when using Babel, where they are doing a great job in indicating the actual line number and character of the error. 

If we could adapt source-maps to the Safari- and Chrome-debugger, we could enable a whole new debugging experience, e.g. by integrating it into our editor plugins and be able to create web-based debuggers like some others do.

Thoughts welcome!

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2018-03-27

   In theory, all we need to do is adding the <code>//# sourceMappingURL=path/to/source.map</code> to the generated files and the debuggers will pick it up via their source map protocol. Read more [here](<a href="https://developers.google.com/web/updates/2013/06/sourceMappingURL-and-sourceURL-syntax-changed)." rel="nofollow" target="_blank">https://developers.google.com/web/updates/2013/06/sourceMappingURL-and-sourceURL-syntax-changed).</a> [~fmiao], do you think this is a change possible in Alloy? I am just reading through the source where we are [copying the generated files](<a href="https://github.com/appcelerator/alloy/blob/master/Alloy/utils.js#L248-L301)" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/Alloy/utils.js#L248-L301)</a> and thought that we could eventually simply inject the source-map command during generation and be good to go. The benefit for the whole platform would be huge!
   
   *EDIT*: I hacked the comment into the generated files, but it seems like absolute paths may not work? [Here](<a href="https://abload.de/img/bildschirmfoto2018-04wpo0m.png)" rel="nofollow" target="_blank">https://abload.de/img/bildschirmfoto2018-04wpo0m.png)</a> is a screenshot of the hack in its current state.
   </li>
<li>Christopher Williams 2019-06-19

   <a href="https://github.com/appcelerator/alloy/pull/893" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/893</a></li>
<li>Satyam Sekhri 2019-06-21

   [~cwilliams][~eharris] When debugging an Alloy project using the Safari/Chrome debugger on mac the original JS file from the alloy project is shown int he debugger. The breakpoints in those JS files works fine.
   However on a windows machine the debug of Alloy project in chrome debugger does not show the project JS files.
   Test Env:
   Mac OS 10.14.3, Win 10 Pro
   Ti SDK: 8.1.0.v20190619134801
   Appc CLI: 7.1.0-master.22
   Node: 10.13.0
   Alloy: 1.14.0-1
   JDK: 1.8.0_144
   Xcode: 10.2.1 </li>
<li>Satyam Sekhri 2019-07-10

   </li>
<li>Satyam Sekhri 2019-07-12

   Verified on:
   Mac OS 10.14.3
   Ti SDK: 8.1.0.v20190709083308
   Appc CLI: 7.1.0-master.24
   Node: 8.16.0
   Alloy: 1.14.0-1
   JDK: 1.8.0_144
   Xcode: 10.2.1</li>
</ol>


<p><a href="/ALOY/ALOY-1612.json">JSON Source</a></p>