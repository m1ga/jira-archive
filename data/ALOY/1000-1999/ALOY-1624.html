---
title: "[ALOY-1624] Alloy: moment is not a function. (In 'moment(myDate)', 'moment' is an instance of Object)"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Alberto Marcone</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2018-07-12T17:17:04.000+0000</td></tr>
<tr><th>Updated</th><td>2019-08-20T21:07:59.000+0000</td></tr>
</table>

<h3>Description</h3>

When I try to use moment, like I always did:

<code><pre>
var moment = require('/alloy/moment');
var date = moment(myDate).format('DD/MM/YYYY - HH:mm');
</pre></code>

I get the error from the title:

moment is not a function. (In 'moment(myDate)', 'moment' is an instance of Object)

where moment is actually an object:

<code><pre>
 {
       id = "alloy/moment.js";
       uri = "app://alloy/moment.js";
  }
</pre></code>

<h3>Comments</h3>

<ol>
<li>Rene Pot 2018-07-16

   Hi [~a.marcone], just checked myself with 7.2.0.GA with the code you provided and it seems to be working. Are you overriding moment in your app anywhere? 
   
   </li>
<li>Alberto Marcone 2018-07-18

   Hi, moment is not overridden anywhere.
   
   I just noticed that I get the same error with other alloy libraries:
   
   <code><pre>var animation = require('alloy/animation');</pre></code>
   
   <code><pre>
   [INFO] :   animation :  {
   [INFO] :       id = "alloy/animation.js";
   [INFO] :       uri = "app://alloy/animation.js";
   [INFO] :   }
   </pre></code>
   
   this doesn't happen on an empty project indeed. Not sure where to look for, any idea?</li>
<li>Feon Sua Xin Miao 2018-07-18

   [~topener], [~a.marcone], I can't reproduce either on both iOS and Android. SDK 7.2.0.GA and CLI 7.0.4.
   
   [~a.marcone] 
   1. Does this only happen to <code>requiring</code> alloy builtins?
   2. Does <code>require</code> not work for both iOS and Android for you?
   3. Which SDK works/worked for you?
   
   It will help greatly if you could upload an app that we can use to reproduce the issue.
   
   
   </li>
<li>Alberto Marcone 2018-07-19

   We tested it on 3 different workstations, it works on one (where the project was initially developed - linux) but it doesn't work on other two ( linux - mac). This happens on either Android or iOS.
   The projects are checked out from our repository in the same way, there are no differences. It's not a matter of SDK because it works with the same SDK on one workstation but it doesn't on another.
   This happens only with the alloy builtins, we have other commonjs libs in the lib/ folder and they work as expected. We can't reproduce the same problem with another mock project because, as noted above, it only happens with this project.
   
   At this point we're not asking for a complete solution, just if you give us enough pointers to understand where to look at during the alloy requiring. 
   
   Thank you very much</li>
<li>Hans Kn√∂chel 2018-07-19

   Can you send a copy of your project (confidential of course) to our core team via hknoechel@axway.com? We will then try to reproduce and check if we can fix up the project.</li>
<li>Aleksey Gureiev 2018-09-10

   This also happens to our project sporadically. I discovered that when it happens, <code>build/iphone/assets/alloy/moment_js</code> and <code>.../dialogs_js</code> are completely empty. However <code>widget_js</code> and <code>underscore_js</code> are alright. Hope it helps.
   
   I seem can't find how to make it work again. It just restores itself after a couple of times removing build, app, and platform folders. Sometimes I even reinstall all node_modules.</li>
<li>Nirmal 2019-06-05

   This usually happens after an attempt to build has failed with a compiler error.
   Subsequent builds will throw this runtime error not able to find built-in library - in my case moment.
   
   Resetting the build cache using <code>appc clean</code> makes this error go away.</li>
<li>Nikita Radaev 2019-08-20

   Leaving a comment in case this ever gets solved. </li>
</ol>


<p><a href="/ALOY/ALOY-1624.json">JSON Source</a></p>