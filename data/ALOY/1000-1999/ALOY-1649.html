---
title: "[ALOY-1649] Creating a collection or model with leading slash throw error on require"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Alloy 1.13.8</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Runtime</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Bruce Wayne</td></tr>
<tr><th>Created</th><td>2019-03-12T11:41:28.000+0000</td></tr>
<tr><th>Updated</th><td>2019-03-12T20:00:35.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

Calling <code>createModel()</code> or <code>createCollection()</code> where the argument is prefixed with a leading slash, or the model is in a directory. This looks to be down to the uppercasing of models done by Alloy on the create call.

<code><pre>
// Controller creation
runCode('Controller', 'test/name');
runCode('Controller', '/test/name');
runCode('Controller', 'name');
runCode('Controller', '/name');
// Collection creation
runCode('Collection', 'test/people');
runCode('Collection', '/test/people');
runCode('Collection', 'othermodel');
runCode('Collection', '/othermodel');
// Model creation
runCode('Model', 'test/people');
runCode('Model', '/test/people');
runCode('Model', 'othermodel');
runCode('Model', '/othermodel');

$.index.open();

function runCode(type, path) {
	try {
		const functionName = <code>create${type}</code>;
		const thing = Alloy[functionName](path);
		console.log(<code>Made ${type} with ${path}</code>);
	} catch (error) {
		console.error(error);
		console.error(<code>${type} with ${path} threw</code>)
	}
}
</pre></code>

<h4>Steps to reproduce</h4>

1. Create the following files
** <code>controllers/name.js</code>
** <code>controllers/test/name.js</code>
** <code>models/othermodel.js</code>
** <code>models/test/people.js</code>
2. Add the code above to your <code>controllers/index.js</code> file
3. Run on any device or sim

<h4>Actual</h4>

Logs like below

<code><pre>
[INFO]  Made Controller with test/name
[INFO]  Made Controller with /test/name
[INFO]  Made Controller with name
[INFO]  Made Controller with /name
[ERROR] Couldn't find module: /alloy/models/Test/people for architecture: x86_64
[ERROR] Collection with test/people threw
[ERROR] Couldn't find module: /alloy/models//test/people for architecture: x86_64
[ERROR] Collection with /test/people threw
[INFO]  No config.adapter.idAttribute specified for table "othermodel"
[INFO]  Adding "alloy_id" to uniquely identify rows
[INFO]  Made Collection with othermodel
[ERROR] Couldn't find module: /alloy/models//othermodel for architecture: x86_64
[ERROR] Collection with /othermodel threw
[ERROR] Couldn't find module: /alloy/models/Test/people for architecture: x86_64
[ERROR] Model with test/people threw
[ERROR] Couldn't find module: /alloy/models//test/people for architecture: x86_64
[ERROR] Model with /test/people threw
[INFO]  Made Model with othermodel
[ERROR] Couldn't find module: /alloy/models//othermodel for architecture: x86_64
[ERROR] Model with /othermodel threw
</pre></code>

<h4>Expected</h4>

Logging should have no "x with y threw" error logs

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2019-03-12

   A note from when I was playing around with testing this, I don't think models are actually supported in folders by Alloy, so part of this might be irrelevant</li>
</ol>


<p><a href="/ALOY/ALOY-1649.json">JSON Source</a></p>