---
title: "[ALOY-1653] Runtime error on Android when using optiondialog and not declaring destructive or cancel properties"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-06-19T14:49:42.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>CLI Release 7.1.0, Alloy 1.14.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>regression</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2019-03-20T17:34:45.000+0000</td></tr>
<tr><th>Updated</th><td>2019-06-19T14:49:42.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

When running kitchensink on Android and clicking an option dialog button I'm getting the below error. It looks to be because the destructive/cancel properties aren't defined so we're setting them to null, we shouldn't set these properties if they aren't defined in the xml

<code><pre>
[ERROR] InputEventReceiver: Exception dispatching input event.
[ERROR] E/MessageQueue-JNI: Exception in MessageQueue callback: handleReceiveCallback
[ERROR] E/MessageQueue-JNI: java.lang.NumberFormatException: Unable to convert null
[ERROR] E/MessageQueue-JNI: 	at org.appcelerator.titanium.util.TiConvert.toInt(TiConvert.java:419)
[ERROR] E/MessageQueue-JNI: 	at ti.modules.titanium.ui.widget.TiUIDialog.handleEvent(TiUIDialog.java:364)
[ERROR] E/MessageQueue-JNI: 	at ti.modules.titanium.ui.widget.TiUIDialog$1.onClick(TiUIDialog.java:122)
</pre></code>

<h4>Steps to reproduce</h4>

1. Build kitchensink
2. Click option dialog
3. Open the option dialog
4. Select an option

<h4>Actual</h4>

Above error

<h4>Expected</h4>

No error

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2019-03-21

   <a href="https://github.com/appcelerator/alloy/pull/926" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/926</a></li>
<li>Samir Mohammed 2019-06-19

   *Closing ticket*, Fix verified in CLI Version <code>7.1.0-master.21</code> No runtime error was seen on KitchenSink-v2 when testing the 'option dialog' section. 
   
   *Test Steps*
   1. Built kitchensink-v2
   2. Clicked on the option dialog 
   3. Opened the option dialog
   4. Selected an option
   5. Able to see no run time error and the console displayed its index number  (selected each option)
   <code><pre>
   [INFO]   Ti.UI.OptionDialog selected option at index: 1
   [INFO]   Ti.UI.OptionDialog selected option at index: 2
   [INFO]   Ti.UI.OptionDialog selected option at index: 0
   </pre></code>
   
   *Test Environment*
   <code><pre>
   SDK: 8.0.2.GA
   Operating System
     Name                        = Mac OS X
     Version                     = 10.14.4
     Architecture                = 64bit
     CPUs                      = 8
     Memory                      = 16.0GB
   Node.js
     Node.js Version             = 10.13.0
     npm Version                 = 6.4.1
   Appcelerator CLI
     Installer                   = 4.2.14-3
     Core Package                = 7.1.0-master.21
   Titanium CLI
     CLI Version                 = 5.2.1
     node-appc Version           = 0.2.49
   </pre></code>
   
   </li>
</ol>


<p><a href="/ALOY/ALOY-1653.json">JSON Source</a></p>