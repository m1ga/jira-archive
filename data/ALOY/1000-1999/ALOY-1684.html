---
title: "[ALOY-1684] Calling sort for a collection does not call the dataFunction as of backbone 1.1.2 and above"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-06-19T14:21:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.13.9</td></tr>
<tr><th>Fix Version/s</th><td>CLI Release 7.1.0, Alloy 1.14.0</td></tr>
<tr><th>Components</th><td>Builtins, Models</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2019-04-30T13:26:25.000+0000</td></tr>
<tr><th>Updated</th><td>2019-06-19T14:21:46.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

<a href="https://github.com/appcelerator-developer-relations/appc-sample-databinding" rel="nofollow" target="_blank">https://github.com/appcelerator-developer-relations/appc-sample-databinding</a> is the sample used to demo this

When calling <code>.sort()</code> on a collection the dataFunction should be called, however when using backbone 1.1.2 or above, this is not called. This is because (as noted in the [migration guide](<a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/guide/Alloy_Backbone_Migration-section-src-43290758_AlloyBackboneMigration-EventAPIs)), sort no longer triggers a reset event but a sort event, and we don't listen for a sort event [at all](<a href="https://github.com/appcelerator/alloy/blob/master/Alloy/common/constants.js#L69)" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/Alloy/common/constants.js#L69)</a>, to fix this we need to add "sort" to that array (probably conditionally when using 1.1.2 or greater), but this will potentially introduce an unexpected behaviour change for users

<h4>Steps to reproduce</h4>

1. Download <a href="https://github.com/appcelerator-developer-relations/appc-sample-databinding" rel="nofollow" target="_blank">https://github.com/appcelerator-developer-relations/appc-sample-databinding</a>
2. Build the app to any platform
3. Click on "orange"
4. Click the "+" button
5. Go back to the main view
6. Click "Sort: name"
7. Select "Amount"
8. Now add <code>"backbone": "1.1.2"</code> to your <code>app/config.json</code>, clean the project and repeat steps 2-7

<h4>Expected</h4>

When changing the sort type to amount, orange should go to the top of the list

<h4>Actual</h4>

When using backbone 1.1.2, the list is not sorted when changing the sort type

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2019-04-30

   cc [~bhouse] [~topener], I ran into this while performing the backbone 1.4.0 upgrade. Do you think this is something we can fix safely, or would the potential behaviour change be problematic for users?</li>
<li>Ewan Harris 2019-06-05

   Included in the PR for the backbone 1.4.0 inclusion
   <a href="https://github.com/appcelerator/alloy/pull/929/commits/22ac957bbfd6e696a10cbb8a10726951d2254061" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/929/commits/22ac957bbfd6e696a10cbb8a10726951d2254061</a></li>
<li>Samir Mohammed 2019-06-19

   *Closing ticket*, Fix verified in CLI Version <code>7.1.0-master.21</code> tested using the test case mentioned in the description. When changing the sort type to amount, orange was able to go to the top of the list
   
   *Test Environment*
   <code><pre>
   SDK: 8.0.2.GA
   Operating System
     Name                        = Mac OS X
     Version                     = 10.14.4
     Architecture                = 64bit
     CPUs                      = 8
     Memory                      = 16.0GB
   Node.js
     Node.js Version             = 10.13.0
     npm Version                 = 6.4.1
   Appcelerator CLI
     Installer                   = 4.2.14-3
     Core Package                = 7.1.0-master.21
   Titanium CLI
     CLI Version                 = 5.2.1
     node-appc Version           = 0.2.49
   </pre></code>
   
   </li>
</ol>


<p><a href="/ALOY/ALOY-1684.json">JSON Source</a></p>