---
title: "[ALOY-1688] Android: ActionBar Subtitle not working when using both Alloy & NavigationWindow"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2019-06-19T12:14:09.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Adam Armstrong</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2019-04-09T13:12:34.000+0000</td></tr>
<tr><th>Updated</th><td>2019-06-19T12:14:09.000+0000</td></tr>
</table>

<h3>Description</h3>

Using these conditions:
* SDK 8.0.0.GA
* Alloy
* NavigationWindow (cross-platform newly implemented in SDK 8.x)
* Android
* ActionBar
* Subtitle (of ActionBar)

With all of those set, when I try to set the subtitle I get the following error:
{color:red}[WARN]  ActionBarProxy: (main) [201,14240] ActionBar is not enabled
{color}
and no subtitle is set.

* It doesnt matter whether I try to set the subtitle in the .tss file or whether I set in the onOpen Method.  In either case setting the subtitle fails with the above error.
* Joshua Quick said "subtitle" works for him if he uses Classic Ti (not Alloy).
* If I simply, only, remove the parent NavigationWindow, then the "subtitle" works for me in Alloy.

*+From index.js, I open my Alloy Window with this code:+*
<code><pre>
var settingsView = Alloy.createController('settings').getView();
settingsView.open();
</pre></code>

And here is my Alloy code for my settings view:
*+settings.xml+*
<code><pre>
<Alloy>
	<NavigationWindow>
		<Window id="settings" title="Settings" onOpen="onWindowOpen">
			<ActionBar displayHomeAsUp="true" onHomeIconItemSelected="closeWindow" platform="android" />

			<View width="Ti.UI.FILL" height="Ti.UI.FILL" layout="vertical">
				<Label text="Settings Here" />
			</View>
		</Window>
	</NavigationWindow>
</Alloy>
</pre></code>

*+settings.js+*
<code><pre>
function onWindowOpen(){
     var actionBar = $.settings.activity.actionBar;
     actionBar.subtitle = "Subtitle Here";
}
</pre></code>


And I even thought it might be an issue with trying to update in the onOpen method so I removed the section in my settings.js and moved the subtitle piece to my settings.tss file like this
<code><pre>
"ActionBar": {
	subtitle: "subtitle text here"
}
</pre></code>
and I still got the same error.


And then, again, to reiterate....if I simply remove <NavigationWindow></NavigationWindow> from my .xml then everything works fine.

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2019-04-09

   This might be an Alloy issue. After doing a build, we need to double check the JS code that Alloy generates under the project's "Resources" directory to see what's going wrong.
   
   Because the below works fine in a Classic app. So, we know it's possible to set the ActionBar's subtitle when launched via NavigationWindow.
   <code><pre>
   var parentWindow = Ti.UI.createWindow({
   	title: "My Title",
   	barColor: "blue",
   });
   parentWindow.add(Ti.UI.createLabel({ text: "Hello World!" }));
   parentWindow.addEventListener("open", function() {
   	var actionBar = parentWindow.activity.actionBar;
   	if (actionBar) {
   		actionBar.subtitle = "My Subtitle";
   	}
   });
   var navigationWindow = Ti.UI.createNavigationWindow({
   	window: parentWindow,
   });
   navigationWindow.open();
   </pre></code>
   
   Thanks for reporting the issue [~amwinsauto].</li>
<li>Adam Armstrong 2019-05-17

   Its been well over a month with no update....has anyone @ AppC at least been able to identify where/what this issue is?</li>
<li>Ewan Harris 2019-05-20

   Hey [~amwinsauto], 
   
   Looking at the compiled sourcecode, this looks to be because as there's no id set on the NavigationWindow alloy gives it a default id, which is the filename <code>settings</code>. Which classes with your Window id. So then when the onWindowOpen function is called <code>$.settings</code> references the NavigationWindow and not the Window instance. You can fix this by either changing the id for the Windows, or creating a throwaway id for the NavigationWindow. 
   
   Based off the compile code and my observations locally, when alloy is processing the view there _should_ be a warning in the log output <code>\[WARN\]  <Window> at line 3 is using this view's default ID "settings". Only a top-level element in a view should use the default ID</code>, which is super easy to miss</li>
<li>Joshua Quick 2019-06-04

   [~amwinsauto],
   
   I'm just following-up on this since the ticket is still open.
   
   Based on [~eharris]'s findings, the issue is that there is variable name collision. Alloy automatically creates a variable based on the XML file you have. In this case, a "settings" variable for your "settings.xml" file which references <code><NavigationWindow/></code>. This variable name is colliding with your <code><Window/></code> variable "settings".
   
   The solution is to change your <code><Window/></code> "id" to a different name, such as "settingsWindow", and fetch the activity from that variable. This will solve the issue.
   
   Sorry about the delay. I hope this helps.</li>
<li>Ewan Harris 2019-06-19

   Closing as not our bug</li>
</ol>


<p><a href="/ALOY/ALOY-1688.json">JSON Source</a></p>