---
title: "[ALOY-1689] Optimize model "change" and "remove" data-binding with ListView/TableView"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Models</td></tr>
<tr><th>Labels</th><td>ListView, TableView, change, data-binding, events, optimization, remove</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2019-05-24T02:06:22.000+0000</td></tr>
<tr><th>Updated</th><td>2019-05-24T02:44:47.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
When data-binding a model to a <code>ListView</code> or <code>TableView</code>, the model's "change" and "remove" events cause all of the rows to be removed and recreated. This is very expensive if the model collection is very large. This should be optimized so that if only 1 model has been changed, then we replace its 1 row in the UI instead. And if only 1 model has been removed, then delete its 1 row from the UI.

*Recommended Solution:*
When the Alloy generated code populates an array of rows to be added to the <code>ListView</code> or <code>TableView</code>, it should also set up a dictionary which maps the model IDs to their respective row indexes. We can then use this dictionary for fast lookup when a "change" or "remove" event happens.

*Note:*
We cannot do the above optimization if a "dataFilter" has been assigned to the <code>ListView</code> or  <code>TableView</code>. A "dataFilter" is a function that takes the source model array and returns a new array to be turned into rows in the UI. This "dataFilter" function is intended to be used to exclude elements (ex: a search filter) and/or sort elements. Since it's capable of sorting, we have to assume that a changed model needs to be repositioned in the UI. Unfortunately, this means preserving the old behavior where we destroy all rows and recreate them.


<h3>Comments</h3>

<p>No comments</p>

<p><a href="/ALOY/ALOY-1689.json">JSON Source</a></p>