---
title: "[ALOY-1720] Version string comparison will break for SDK 10.0.0"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-08-13T15:36:10.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>CLI Release 8.1.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>alloy, sdk, version</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2020-02-15T02:52:02.000+0000</td></tr>
<tr><th>Updated</th><td>2020-08-13T15:36:10.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
There are places in Alloy's code which compares Titanium SDK versions by string. While this works for now, this will eventually break when the Titanium version has been update to 10.0.0.

*Example:*
<code><pre>
if (Ti.version &gt;= '8.0.0') {
    // Will NOT land here if version is 10.0.0 or higher. (This is the bug.)
}
</pre></code>

*Areas To Be Fixed:*
<a href="https://github.com/appcelerator/alloy/blob/master/Alloy/template/lib/alloy.js" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/Alloy/template/lib/alloy.js</a>
<code><pre>
var MW320_CHECK = OS_MOBILEWEB && TI_VERSION &gt;= '3.2.0';
var IDENTITY_TRANSFORM = OS_ANDROID ? (Ti.version &gt;= '8.0.0' ? Ti.UI.createMatrix2D() : Ti.UI.create2DMatrix()) : undefined;
</pre></code>

<a href="https://github.com/appcelerator/alloy/blob/master/Alloy/builtins/animation.js" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/Alloy/builtins/animation.js</a>
<code><pre>
const create3DMatrix = Ti.version &gt;= '8.0.0' ? Ti.UI.createMatrix3D : Ti.UI.create3DMatrix;
const create2DMatrix = Ti.version &gt;= '8.0.0' ? Ti.UI.createMatrix2D : Ti.UI.create2DMatrix;
</pre></code>

*Solution:*
Use semver <code>gte()</code> method instead.


<h3>Comments</h3>

<ol>
<li>Ewan Harris 2020-06-30

   PR: <a href="https://github.com/appcelerator/alloy/pull/960" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/960</a></li>
<li>Ewan Harris 2020-07-20

   Test steps:
   
   Use the [builtins sample](<a href="https://github.com/appcelerator/alloy/tree/master/samples/apps/basics/builtins)" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/samples/apps/basics/builtins)</a> and make sure the functionality still works, if you're feeling adventurous bump the SDK version to 10.0.0 and create a build via the build scripts, it should still work on that SDK</li>
<li>Samir Mohammed 2020-08-13

   Closing ticket, using CLI version 8.1.0-master.11, Tested using the instructions above.
   
   NOTE* once a SDK Branch exists this can be retested. </li>
</ol>


<p><a href="/ALOY/ALOY-1720.json">JSON Source</a></p>