---
title: "[ALOY-1721] Styles: Alloy global can no longer be accessed in styles"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-02-25T18:37:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Alloy 1.14.5</td></tr>
<tr><th>Fix Version/s</th><td>CLI Release 8.0.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2020-02-20T16:25:36.000+0000</td></tr>
<tr><th>Updated</th><td>2020-02-25T18:37:21.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

SDK 9 removes the implicit global scope in app.js. We tried to handle this in ALOY-1633, but there was an oversight that the Alloy global can be used in styles which does not get touched by the babel plugin.

We need to either figure out how we can inject Alloy if needed, or just fallback to forcing the Alloy global to exist

<h4>Steps to reproduce</h4>

1. Copy the below contents to the right files

<code><pre>
Alloy.Globals.color = 'blue'
</pre></code>

<code><pre>
&lt;Alloy&gt;
	&lt;Window id="win" onClick="onClick"&gt;
		&lt;Label text="foo"/&gt;
	&lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>

<code><pre>
function onClick() {
	$.UI.create('Window');
}
$.win.open();
</pre></code>

<code><pre>
'Window': {
	backgroundColor: Alloy.Globals.color
}
</pre></code>
2. Build for any platform/device
3. Tap the window


<h4>Actual</h4>

Runtime error

<h4>Expected</h4>

Blue window with the label foo

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2020-02-20

   <a href="https://github.com/appcelerator/alloy/pull/955" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/955</a></li>
<li>Ewan Harris 2020-02-20

   Alloy PR merged, should be in a preprod CLI (expecting 8.0.0-master.10) in around an hour</li>
<li>Lokesh Choudhary 2020-02-25

   Verified the fix in CLI 8.0.0-master.10.
   Closing.
   
   Studio Ver:       6.0.0.201911251516
   SDK Ver:          9.0.0.v20200224113949
   OS Ver:           10.14.5
   Xcode Ver:        Xcode 11.3.1
   Appc NPM:         5.0.0-2
   Appc CLI:         8.0.0-master.10
   Daemon Ver:       3.2.0
   Ti CLI Ver:       5.2.2
   Alloy Ver:        1.14.6
   Node Ver:         12.13.1
   NPM Ver:          6.12.1
   Java Ver:         11.0.1
   Android Devices:  ⇨ google Pixel (Android 10)
   IOS Simulator:    ⇨ iPhone 11 Pro iOS 13.3
   </li>
</ol>


<p><a href="/ALOY/ALOY-1721.json">JSON Source</a></p>