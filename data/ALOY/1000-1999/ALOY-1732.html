---
title: "[ALOY-1732] Add ability to run in the background without UI"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-08-12T14:28:28.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>CLI Release 8.1.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>alloy, android, background, ios</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2020-06-03T02:55:54.000+0000</td></tr>
<tr><th>Updated</th><td>2020-08-12T14:28:28.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
We plan on adding a new "tiapp.xml" property "run-in-background", when set <code>true</code>, will allow the "app.js" to be executed while the app is in the background and is unable to host UI. This means we have to defer root window creation until the app is ready to host UI. On Android, we also need to support recreation of the root window when user backs out of the app and re-launches it.

See Titanium SDK ticket [TIMOB-27896] for details.

*To-Do:*
The "app.js" generated by Alloy needs to be changed to the following...
<code><pre>
// Open root window if a new UI session has started. Can happen more than once in app's lifetime.
// Event can only be fired if "tiapp.xml" property "run-in-background" is set true.
Ti.UI.addEventListener('sessionbegin', function () {
	Alloy.createController('index');
});

// Open the root window immediately if an active UI session exists.
// Note: The Ti.UI.hasSession property was added as of Titanium 9.1.0.
if ((typeof Ti.UI.hasSession === 'undefined') || Ti.UI.hasSession) {
	Alloy.createController('index');
}
</pre></code>

*Note:*
We need to release this Alloy change via CLI 8.1.0 before we release Titanium 9.1.0. The new Titanium backgrounding feature won't work correctly on Alloy without it. The plan is to have the Titanium 9.1.0 build system check that CLI 8.1.0 is installed when the backgrounding feature is enabled in the "tiapp.xml" or else we'll trigger a build failure.


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2020-06-03

   PR (master): <a href="https://github.com/appcelerator/alloy/pull/959" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/959</a></li>
<li>Ewan Harris 2020-07-20

   Test steps:
   
   This isn't really testable until TIMOB-27896  is merged, but for now just testing that apps launch fine with this change will do</li>
<li>Samir Mohammed 2020-08-12

   Closing ticket, fix verified in CLI version 8.1.0-master.10, app launches just fine. 
   
   </li>
</ol>


<p><a href="/ALOY/ALOY-1732.json">JSON Source</a></p>