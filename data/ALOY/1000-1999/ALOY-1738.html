---
title: "[ALOY-1738] CLI 8.1.0: crash when to listening backbone.events on required controller in ScrollableView"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-09-14T18:27:05.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>CLI Release 8.1.0, Alloy 1.15.1</td></tr>
<tr><th>Fix Version/s</th><td>CLI Release 8.1.1</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>regression</td></tr>
<tr><th>Reporter</th><td>Teun Klijn</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2020-08-28T07:56:26.000+0000</td></tr>
<tr><th>Updated</th><td>2021-06-16T14:13:34.000+0000</td></tr>
</table>

<h3>Description</h3>

When you add a backbone event listener to a required controller that's nested in a ScrollableView the app will crash. This was working with CLI 8.0.0 and still works correctly with 8.1.0 when the require isn't nested in a ScrollableView.

*To reproduce*

Run the example below with CLI 8.1.0.

+index.js+
<code><pre>
function doSomething(e) {
  console.log('do something!');
}

$.index.open();
</pre></code>

+index.xml+
<code><pre>
&lt;Alloy&gt;
  &lt;Window class="container"&gt;
    &lt;ScrollableView&gt;
      &lt;Require id="label" src="label" onNotify="doSomething" /&gt;
    &lt;/ScrollableView&gt;
  &lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>

+label.js+
<code><pre>
var args = $.args;

function passClick(e) {
  $.trigger('notify');
}
</pre></code>

+label.xml+
<code><pre>
&lt;Alloy&gt;
  &lt;Label id="label" onClick="passClick"&gt;Hello, World&lt;/Label&gt;
&lt;/Alloy&gt;
</pre></code>

*Expected behavior*

The app will run without crashing and the event is handled correctly.

*Actual behavior*

The app crashes with the following crash message:

<code><pre>
"$.__views[\"label\"].on is not a function. (In '$.__views[\"label\"].on('notify', doSomething)', '$.__views[\"label\"].on' is undefined)";
</pre></code>

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2020-08-28

   [~teunklijn@telfort.nl] thanks for the comprehensive issue, I'll move this over to the ALOY project</li>
<li>Ewan Harris 2020-08-28

   PR: <a href="https://github.com/appcelerator/alloy/pull/967" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/967</a>
   
   [~teunklijn@telfort.nl], if you wanted to try and patch your CLI locally you can do the following:
   
   1. Open up the appc CLI directory in explorer/finder
   * Windows: C:\Users\<User>\.appcelerator\install\8.1.0\package\
   * MacOS: ~/.appcelerator/install/8.1.0/package/
   
   2. Open <code>node_modules/alloy/Alloy/commands/compile/parsers/Alloy.Require.js</code>
   3. Apply the changes in the above PR</li>
<li>Ewan Harris 2020-08-28

   Notes for testing, verify the test case from ALOY-1256 still works, as well as <a href="https://github.com/ewanharris/ALOY-1256-test" rel="nofollow" target="_blank">https://github.com/ewanharris/ALOY-1256-test</a>, the test case from this ticket and maybe try the PKO/Community apps as they use the Require tag
   
   Edit:
   
   Also check out the following widgets test apps [nl.fokkezb.infiniteScroll](<a href="https://github.com/Topener/nl.fokkezb.infiniteScroll/tree/test)" rel="nofollow" target="_blank">https://github.com/Topener/nl.fokkezb.infiniteScroll/tree/test)</a> and [nl.fokkezb.pullToRefresh](<a href="https://github.com/Topener/nl.fokkezb.pullToRefresh/tree/test)" rel="nofollow" target="_blank">https://github.com/Topener/nl.fokkezb.pullToRefresh/tree/test)</a></li>
<li>Teun Klijn 2020-08-28

   Thanks! This does fix my issue.</li>
<li>Lokesh Choudhary 2020-09-14

   Verified the fix with 8.1.1-master.8.
   Closing.</li>
</ol>


<p><a href="/ALOY/ALOY-1738.json">JSON Source</a></p>