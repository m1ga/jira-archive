---
title: "[DAEMON-120] appcd: calling appcd start when daemon is running does not log anything"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-11-06T21:55:39.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Appc Daemon 1.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Appc Daemon 1.0.0</td></tr>
<tr><th>Components</th><td>appcd</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2017-11-06T20:37:47.000+0000</td></tr>
<tr><th>Updated</th><td>2017-11-06T21:55:39.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

When calling <code>appcd start</code> when the daemon is already running, the process just exits with no logging, it also appears that the appropriate error code is not set (although I think this could be a separate issue as we don't appear to process.exit).

If I remove the [unref](<a href="https://github.com/appcelerator/appc-daemon/blob/master/packages/appcd-nodejs/src/nodejs.js#L435)" rel="nofollow" target="_blank">https://github.com/appcelerator/appc-daemon/blob/master/packages/appcd-nodejs/src/nodejs.js#L435)</a> or [dont spawn as detached](<a href="https://github.com/appcelerator/appc-daemon/blob/master/packages/appcd/src/common.js#L152)" rel="nofollow" target="_blank">https://github.com/appcelerator/appc-daemon/blob/master/packages/appcd/src/common.js#L152)</a> then I get the correct logging

<h3>Comments</h3>

<ol>
<li>Chris Barber 2017-11-06

   Not sure about Windows, but on macOS removing the "detached" fixes the issue and things appear to daemonize as expected. Does Windows still work if we only remove "detached", but leave the unref()?</li>
<li>Ewan Harris 2017-11-06

   I think we added that due to the process not hanging around for the daemon to start? <a href="https://github.com/appcelerator/appc-daemon/pull/95" rel="nofollow" target="_blank">https://github.com/appcelerator/appc-daemon/pull/95</a></li>
<li>Ewan Harris 2017-11-06

   <a href="https://github.com/appcelerator/appc-daemon/pull/112" rel="nofollow" target="_blank">https://github.com/appcelerator/appc-daemon/pull/112</a></li>
</ol>


<p><a href="/DAEMON/DAEMON-120.json">JSON Source</a></p>