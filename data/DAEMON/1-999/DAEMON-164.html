---
title: "[DAEMON-164] appcd-plugin-android: Device tracking does not reinit when adb is installed/restarted"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-01-11T16:04:37.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Appc Daemon 1.1.0</td></tr>
<tr><th>Components</th><td>appcd-plugin-android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2017-11-17T17:43:24.000+0000</td></tr>
<tr><th>Updated</th><td>2018-01-11T16:04:37.000+0000</td></tr>
</table>

<h3>Description</h3>

If <code>adb</code> is not found, it cannot track devices. The Android plugin will watch for an Android SDK to be added, but then it needs start tracking devices using the installed <code>adb</code>.

As a workaround, the Android plugin can be manually stopped or be unloaded after 1 hour of inactivity. On the next request, it'll start and detect <code>adb</code> and begin tracking devices.

<h3>Comments</h3>

<ol>
<li>Chris Barber 2018-01-05

   PR: <a href="https://github.com/appcelerator/appcd-plugin-android/pull/6" rel="nofollow" target="_blank">https://github.com/appcelerator/appcd-plugin-android/pull/6</a>
   
   To test and for simplicity, only have 1 Android SDK discoverable on your machine. Go into the sdk's platform tools directory. Run <code>appcd exec /android/latest/info/devices --subscribe</code> and then rename <code>adb</code> to <code>adb2</code> which will trigger <code>adb</code> disappearing. Change it back and it'll redetect Android devices. This should also work if you move the entire Android SDK directory from some undiscoverable directories such as subdir on your desktop, then move it to a discoverable directory such as <code>/opt</code>.
   
   The list of devices should become empty if <code>adb</code> disappears.
   
   Note that on macOS and Linux, if <code>adb</code> is running, then you can do whatever you want to the executable on disk and <code>adb</code> will still be running. This is fine.
   
   Another thing to test is subscribe to devices and then run <code>adb kill-server</code>. The daemon will say the devices are empty, then attempt to restart adb in 2 seconds. After a few more seconds, the list of devices will be refreshed.</li>
</ol>


<p><a href="/DAEMON/DAEMON-164.json">JSON Source</a></p>