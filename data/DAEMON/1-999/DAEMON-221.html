---
title: "[DAEMON-221] gulp upgrade: Run 'yarn' in top-level after updates and 'yarn upgrade' for each package"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-01-19T23:48:06.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Appc Daemon 1.1.0</td></tr>
<tr><th>Components</th><td>Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2018-01-16T16:40:44.000+0000</td></tr>
<tr><th>Updated</th><td>2018-01-19T23:48:07.000+0000</td></tr>
</table>

<h3>Description</h3>

The <code>gulp upgrade</code> task does a good job of updating all of the npm dependencies in each package's <code>package.json</code>, but the top-level doesn't actually install the new deps. I think we simply need to remove the call to <code>lerna bootstrap</code> and call <code>yarn</code>.

Also, we never upgrade the dependencies of dependencies. We need to write temporary <code>package.json</code> files with no <code>appcd-*</code> deps, run <code>yarn upgrade</code>, then restore the original <code>package.json</code>. This will update the <code>yarn.lock</code> files.

<h3>Comments</h3>

<ol>
<li>Chris Barber 2018-01-19

   PR: <a href="https://github.com/appcelerator/appc-daemon/pull/266" rel="nofollow" target="_blank">https://github.com/appcelerator/appc-daemon/pull/266</a></li>
</ol>


<p><a href="/DAEMON/DAEMON-221.json">JSON Source</a></p>