---
title: "[DAEMON-272] appcd-subprocess: Remove HTTP source check"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-02-15T03:31:19.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Appc Daemon 2.0.0</td></tr>
<tr><th>Components</th><td>appcd-subprocess</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2019-02-14T23:28:36.000+0000</td></tr>
<tr><th>Updated</th><td>2019-02-15T03:31:19.000+0000</td></tr>
</table>

<h3>Description</h3>

The <code>SubprocessManager</code> has a false security measure where only requests from internal routes and plugins and requests from WebSockets can spawn commands. Requests from HTTP are forbidden.

Since WebSockets requests are essentially HTTP requests, there's no point blocking HTTP requests. The daemon's web server listens on localhost only, so there's no way for an outside actor to spawn a command.

To make things worse, the check to see if the source is indeed "http" is broken. It checks if <code>ctx.request.source</code> is "http" when it should be checking <code>ctx.source</code>.

This restriction is pointless and does not work. It should just be removed.

<h3>Comments</h3>

<ol>
<li>Chris Barber 2019-02-14

   <a href="https://github.com/appcelerator/appc-daemon/pull/353" rel="nofollow" target="_blank">https://github.com/appcelerator/appc-daemon/pull/353</a></li>
</ol>


<p><a href="/DAEMON/DAEMON-272.json">JSON Source</a></p>