---
title: "[DAEMON-329] node_winreglib.node is not a valid Win32 application"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2020-03-31T20:12:07.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Appc Daemon 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Appc Daemon 4.0.0</td></tr>
<tr><th>Components</th><td>winreglib</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2020-02-26T23:13:24.000+0000</td></tr>
<tr><th>Updated</th><td>2020-03-31T20:12:11.000+0000</td></tr>
</table>

<h3>Description</h3>

User installs Appc Daemon 3.2.0 with Node.js 10.13.0. When the daemon starts up, the Windows plugin cannot load winreglib:

<code><pre>
{
  "stack": "PluginError: Failed to load plugin: \\\\?\\C:\\Users\\Test\\.appcelerator\\install\\8.0.0-master.10\\package\\node_modules\\winreglib\\build\\Release\\node_winreglib.node is not a valid Win32 application.\r\n\\\\?\\C:\\Users\\Test\\.appcelerator\\install\\8.0.0-master.10\\package\\node_modules\\winreglib\\build\\Release\\node_winreglib.node\n    at Object.Module._extensions..node (internal/modules/cjs/loader.js:807:18)\n    at PluginModule.load (internal/modules/cjs/loader.js:653:32)\n    at Function.load (C:\\Users\\Test\\.appcelerator\\install\\8.0.0-master.10\\package\\node_modules\\appcd-plugin\\dist\\plugin-module.js:71:11)\n    at PluginModule.require (C:\\Users\\Test\\.appcelerator\\install\\8.0.0-master.10\\package\\node_modules\\appcd-plugin\\dist\\plugin-module.js:142:23)\n    at require (C:\\Users\\Test\\.appcelerator\\install\\8.0.0-master.10\\package\\node_modules\\appcd-plugin\\dist\\plugin-module.js:181:36)\n    at load (C:\\Users\\Test\\.appcelerator\\install\\8.0.0-master.10\\package\\node_modules\\node-gyp-build\\index.js:21:10)\n    at Object.apply (C:\\Users\\Test\\.appcelerator\\install\\8.0.0-master.10\\package\\node_modules\\winreglib\\src\\index.js:2:46)\n    at PluginModule._compile (C:\\Users\\Test\\.appcelerator\\install\\8.0.0-master.10\\package\\node_modules\\appcd-plugin\\dist\\plugin-module.js:196:19)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:789:10)\n    at PluginModule.Module.load (internal/modules/cjs/loader.js:653:32)",
  "message": "Failed to load plugin: \\\\?\\C:\\Users\\Test\\.appcelerator\\install\\8.0.0-master.10\\package\\node_modules\\winreglib\\build\\Release\\node_winreglib.node is not a valid Win32 application.\r\n\\\\?\\C:\\Users\\Test\\.appcelerator\\install\\8.0.0-master.10\\package\\node_modules\\winreglib\\build\\Release\\node_winreglib.node",
  "status": 400,
  "statusCode": "400.1",
  "type": "error"
}
</pre></code>

Note that winreglib uses N-API and is compatible with Node.js 10.2.0 and newer and that the Appc Daemon 3.2.0's core runs Node 10.16.3.

This might be a Windows-only issue as Windows is general the only platform in which plugins are installed at daemon install time, Mac/Linux run into permission issues and have to resort to installing plugins at runtime. This behavior will change in DAEMON-311

<h3>Comments</h3>

<ol>
<li>Chris Barber 2020-03-04

   Neither I nor [~ssekhri] can reproduce this now that DAEMON-330 has been fixed.</li>
<li>Chris Barber 2020-03-31

   Reopened to change fix version.</li>
</ol>


<p><a href="/DAEMON/DAEMON-329.json">JSON Source</a></p>