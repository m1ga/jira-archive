---
title: "[DAEMON-340] Plugins fail on startup on Windows"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2021-04-15T02:57:57.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Appc Daemon 4.0.3</td></tr>
<tr><th>Components</th><td>appcd-util</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2021-04-14T22:37:38.000+0000</td></tr>
<tr><th>Updated</th><td>2021-04-15T14:12:57.000+0000</td></tr>
</table>

<h3>Description</h3>

It's erroring during redaction because process.env.HOME isn't always set on Windows, so it should use os.homedir most likely

'TypeError: Cannot read property 'replace' of undefined
    at addReplacement (C:\Users\awam\AppData\Roaming\npm\node_modules\appcd\node_modules\appcd-util\dist\util.js:764:40)
    at redact (C:\Users\awam\AppData\Roaming\npm\node_modules\appcd\node_modules\appcd-util\dist\util.js:681:2)
    at map (C:\Users\awam\AppData\Roaming\npm\node_modules\appcd\node_modules\appcd-plugin\dist\tunnel-stream.js:40:14)
    at Array.map (<anonymous>)
    at TunnelStream._write (C:\Users\awam\AppData\Roaming\npm\node_modules\appcd\node_modules\appcd-plugin\dist\tunnel-stream.js:34:33)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at TunnelStream.write (internal/streams/writable.js:303:10)
    at SnoopLogg.dispatch (C:\Users\awam\AppData\Roaming\npm\node_modules\appcd\node_modules\snooplogg\dist\index.js:451:14)
    at process.onSnoopMessage (C:\Users\awam\AppData\Roaming\npm\node_modules\appcd\node_modules\snooplogg\dist\index.js:625:10)
    at process.emit (events.js:315:20)

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2021-04-14

   PR: <a href="https://github.com/appcelerator/appc-daemon/pull/525" rel="nofollow" target="_blank">https://github.com/appcelerator/appc-daemon/pull/525</a></li>
</ol>


<p><a href="/DAEMON/DAEMON-340.json">JSON Source</a></p>