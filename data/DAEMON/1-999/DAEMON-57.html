---
title: "[DAEMON-57] appcd: Add support to config handler to change settings at runtime"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-05-09T19:52:04.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Appc Daemon 1.0.0</td></tr>
<tr><th>Components</th><td>appcd-config, appcd-config-service</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2017-02-27T17:05:22.000+0000</td></tr>
<tr><th>Updated</th><td>2017-10-26T03:07:25.000+0000</td></tr>
</table>

<h3>Description</h3>

The config handler currently only returns the config. The handler should also support a "data" payload to change the daemon's config at runtime.

Note that only a single config setting can be changed per call. Use the path to determine what is being changed. HTTP methods can be used to determine how the key should be changed. The handler returns the new value. Use the status code to determine if successful.

The appcd CLI is responsible for persisting the settings to the user's config file <code>~/.appcelerator/appcd/config.json</code>. The daemon does not modify the config file. The appcd CLI will validate the config change, then persist it to disk. After that, it will check if the daemon is running and attempt to change it at runtime. If the daemon is not running or it is running and the setting is changeable during runtime, then everything succeeds. If the daemon is running and the change is rejected, then the CLI will alert the user that the daemon must be restarted for the setting to take effect. If the CLI as a TTY, it can prompt to restart the daemon. Note that the CLI should also support a <code>\-\-no\-prompt</code> flag and a <code>\-\-auto\-restart</code> flag.

<h4>Examples:</h4>

<h4>Getting a value:</h4>

<code><pre>
appcd exec /appcd/config/analytics/enabled

appcd exec /appcd/config/analytics/enabled '{ "action": "get" }'

appcd exec /appcd/config '{ "action": "get", "key": "/analytics/enabled" }'

appcd exec /appcd/config '{ "action": "get", "key": "analytics.enabled" }'
</pre></code>

<h4>Setting a value:</h4>

<code><pre>
appcd exec /appcd/config '{ "action": "set", "key": "analytics.enabled", "value": true }'

appcd exec /appcd/config/analytics/enabled '{ "action": "set", "value": true }'
</pre></code>

<h4>Deleting a value:</h4>

<code><pre>
appcd exec /appcd/config '{ "action": "delete", "key": "analytics.enabled" }'

appcd exec /appcd/config/analytics/enabled '{ "action": "delete" }'
</pre></code>

<h4>Array examples:</h4>

<code><pre>
appcd exec /appcd/config '{ "action": "set", "key": "foo", "value": ["bar", "baz"] }'
</pre></code>

Delete will remove the entire value.

<code><pre>
appcd exec /appcd/config '{ "action": "delete", "key": "foo" }'
</pre></code>

<h3>Comments</h3>

<ol>
<li>Chris Barber 2017-05-09

   <a href="https://github.com/appcelerator/appc-daemon/pull/11" rel="nofollow" target="_blank">https://github.com/appcelerator/appc-daemon/pull/11</a></li>
</ol>


<p><a href="/DAEMON/DAEMON-57.json">JSON Source</a></p>