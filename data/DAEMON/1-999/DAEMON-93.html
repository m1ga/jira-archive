---
title: "[DAEMON-93] Persist logs to disk"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-09-10T04:51:15.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Appc Daemon 3.1.0</td></tr>
<tr><th>Components</th><td>appcd-core</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2017-08-11T21:57:06.000+0000</td></tr>
<tr><th>Updated</th><td>2019-09-10T04:51:15.000+0000</td></tr>
</table>

<h3>Description</h3>

The daemon needs to persist the log to disk. We can do this pretty easily by introducing a listener to the logger and writing the data to a log file. Every time the daemon is started, a fresh log file is created in <code>~/.appcelerator/appcd/log</code>.

We still need to determine a few things:
* Should we rotate old logs? Keep last 5 logs? gzip older logs?
* How should we handle log files that could potentially be huge?

The log messages should be streamed as objects containing metadata such as timestamps, etc. This structure should be preserved when written to disk.

<h3>Comments</h3>

<ol>
<li>Chris Barber 2017-11-17

   As of v1.0.0, the daemon has a <code>appcd dump</code> command which generates a dump file including the logs.</li>
<li>Chris Barber 2019-09-10

   Added <code>server.persistDebugLog</code> config setting. Defaults to <code>false</code> because there's no logrotate functionality and we don't want logs to eat up a bunch of space.
   
   <a href="https://github.com/appcelerator/appc-daemon/commit/efeb91690dd2b15c3ece3f53c1dd51e596a0f25d" rel="nofollow" target="_blank">https://github.com/appcelerator/appc-daemon/commit/efeb91690dd2b15c3ece3f53c1dd51e596a0f25d</a></li>
</ol>


<p><a href="/DAEMON/DAEMON-93.json">JSON Source</a></p>