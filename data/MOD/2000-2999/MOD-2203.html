---
title: "[MOD-2203] Facebook: Module should inject tiapp.xml requirements for user"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 5.2.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Facebook</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2016-03-02T10:17:19.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-06T18:52:39.000+0000</td></tr>
</table>

<h3>Description</h3>

To use the Facebook module the user has to add a whole set of properties to <code>tiapp.xml</code>:
<a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Modules.Facebook

However, except for maybe those that depend on the linked Facebook app (ID, name) all of this should be injected by the module itself using the <code>timodule.xml</code>.

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2016-03-02

   {quote}
   Right now, the timodule.xml is only used in Android, and it supports all of the tags listed in the Android section above. Any custom metadata your Android module defines in it's timodule.xml <android> section will automatically be merged with a Titanium application that installs your module.
   {quote}
   
   <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/guide/tiapp.xml_and_timodule.xml_Reference-section-29004921_tiapp.xmlandtimodule.xmlReference-timodule.xml
   
   That's why it's currently not implemented.</li>
<li>Fokke Zandbergen 2016-03-02

   So for Android we could still do this right?</li>
<li>Hans Knöchel 2016-03-02

   Yes, but there are no android-specific manifest settings required by ti.facebook as far as I know.</li>
<li>Fokke Zandbergen 2016-03-02

   We do at <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Modules.Facebook :
   
   <code><pre>
   <ti:app>
       <android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>">
           <manifest>
               <application>
                   <activity android:label="@string/app_name"
                       android:name="com.facebook.LoginActivity" android:theme="@android:style/Theme.Translucent.NoTitleBar"/>
                   <meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/facebook_app_id"/>
               </application>
           </manifest>
       </android>
   <ti:app>
   </pre></code></li>
<li>Hans Knöchel 2016-03-02

   But those are user-specific values that we cannot pre-fill. :-) Tell me that exactly can be added and I'll add it. Simple as that.</li>
<li>Fokke Zandbergen 2016-03-02

   They are not user-specific. The only user-specific thing is the value of <code>@string/facebook_app_id</code> which you set via <code>strings.xml</code>. See the linked doc.</li>
<li>Hans Knöchel 2016-03-09

   PR: <a href="https://github.com/appcelerator-modules/ti.facebook/pull/44" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.facebook/pull/44</a>
   
   We need to ensure the values get merged with the values set in the <code>tiapp.xml</code> correctly.</li>
<li>Fokke Zandbergen 2016-03-09

   Well, there's one way to find out ;)</li>
<li>Chris Barber 2016-03-09

   As stated on Flowdock, the <code>timodule.xml</code> and <code>tiapp.xml</code> are not merged and nor will they ever be. Only in the Android builds will the <code>timodule.xml</code>'s <code><application><android><manifest></code> be scrubbed and merged with the final <code>AndroidManifest.xml</code>.
   
   I'm not sold that setting the <code>@string/facebook_app_id</code> via <code>strings.xml</code> is a good idea. First it's Android only. Second we should have all settings in one place, namely the <code>tiapp.xml</code>. Since this is a module, it must not modify the Titanium app. The module's documentation should be clear as to what settings the user must add to the <code>tiapp.xml</code>.</li>
<li>Fokke Zandbergen 2016-03-10

    [~cbarber] we actually do the same with modules like [ti.map](<a href="https://github.com/appcelerator-modules/ti.map/blob/master/android/timodule.xml)" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/blob/master/android/timodule.xml)</a> and it's much more user friendly (and less likely to give errors) then letting the user add those.
    
    I agree it shouldn't use string though. Just like the linked ti.map it should refer to a tiapp property.</li>
<li>Fokke Zandbergen 2016-03-10

    Plus.. iOS modules should be able to do the same: TIMOB-20542</li>
<li>Hans Knöchel 2016-04-17

    Removing from review, since it's currently not technically possible to inject it properly.</li>
</ol>


<p><a href="/MOD/MOD-2203.json">JSON Source</a></p>