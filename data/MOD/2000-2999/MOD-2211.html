---
title: "[MOD-2211] TouchId: Add alternative login method using passcode"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-12-28T18:23:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Components</th><td>TouchID</td></tr>
<tr><th>Labels</th><td>VMWare, iOS</td></tr>
<tr><th>Reporter</th><td>Mostafizur Rahman</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-03-18T10:14:06.000+0000</td></tr>
<tr><th>Updated</th><td>2017-02-14T18:09:05.000+0000</td></tr>
</table>

<h3>Description</h3>

In Touch Id module, users can login using Touch ID only but if add another alternative method using passcode in this module then users can log in easily. This login features already available in native code.

So customer request this features as a alternative login method.

<h3>Comments</h3>

<ol>
<li>Shak Hossain 2016-03-18

   *Here is the exact use case:*
   
   - For all the iPhone users who have the Touch ID enable on their phone:
   - Whenever user launches the App, it should prompt the user for Touch ID.
   - If the Touch ID authentication fails after 'n' or 3 number of re-tries, we should have the user to enter his device passcode. </li>
<li>Shak Hossain 2016-03-18

   *Customer Sample Code:*
   
   <code><pre>
   TouchId.authenticate({
   reason : L("touchId.loginMessage"),
   callback : callback
    
   });
   
   //where callback is below function -
    
   function touchAuthCallback(obj) {
   log.trace("[login] &gt;&gt; [touchAuthCallback] &gt;&gt; TouchId callback execution started...");
    
   if (obj.error == undefined) {
   if (obj["success"] === true) {
   log.trace("[login] &gt;&gt; [touchAuthCallback] &gt;&gt; Calling doClick to initiate Login...");
    
   setTimeout(
   function() {
   doClick();
   },
   200);
   }
   } else {
   log.error("[login] &gt;&gt; [touchAuthCallback] &gt;&gt; err:", obj.error);
   $.password.setValue("");
   Alloy.Globals.touchIdOnResume = false ;
   Alloy.Globals.touchIdInAction = false ;
    
   }
   }
   
   </pre></code></li>
<li>Shak Hossain 2016-03-18

   *Related Post:*
   
   This was proposed but not acceptable by customer <a href="https://gist.github.com/csemrm/df08876d2bf09fe4785a" rel="nofollow" target="_blank">https://gist.github.com/csemrm/df08876d2bf09fe4785a</a></li>
<li>Hans Knöchel 2016-03-20

   As discussed on Flowdock, I'm pretty sure it's not exposed by iOS (for now). Anyway, if they can provide a native example that does it, we'd be able to solve that easily.</li>
<li>Hans Knöchel 2016-12-28

   I got something. More soon.</li>
<li>Hans Knöchel 2016-12-28

   Fixed as part of TIMOB-20547. Example:
   
   <code><pre>
   // Or: AUTHENTICATION_POLICY_BIOMETRICS for the default behavior
   TiTouchId.setAuthenticationPolicy(TiTouchId.AUTHENTICATION_POLICY_PASSCODE); 
   
   // Check device support and  authenticate like before ...
   </pre></code>
   </li>
<li>Lee Morris 2017-02-14

   Verified that this works fine, tested with;
   iPhone 7 (10.2)
   MacOS 10.11.6 (15G31)
   Studio 4.8.1.201612050850
   Ti SDK 6.1.0.v20170213134957
   Appc NPM 4.2.8
   Appc CLI 6.2.0-12
   Ti CLI 5.0.11
   Alloy 1.9.6
   Arrow 1.10.2
   Xcode 8.2 (8C38)
   Node v4.6.0
   Java 1.7.0_80</li>
</ol>


<p><a href="/MOD/MOD-2211.json">JSON Source</a></p>