---
title: "[MOD-2249] Appcelerator module events stop firing"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2017-07-28T19:26:48.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>derick alt</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2016-04-18T18:49:00.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:37:00.000+0000</td></tr>
</table>

<h3>Description</h3>

* Create a native iOS module
* In the module, fire an event, as seen below:
<code><pre>
- (void) imageCaptured:(NSNotification *) notification
{
    NSLog(@"[INFO] module notified of image capture event");
    if ([self _hasListeners:'imageCaptured'])
        [self fireEvent:'imageCaptured' withObject:notification.userInfo];
    else
        NSLog(@"[INFO] if an image is captured, and there is no one there to listen for it, does an event get fired?");
}
</pre></code>

* In Appcelerator, listen for this event:
<code><pre>
mymodule.addEventListener('imageCaptured', function(e){
    Ti.API.info('image capture event caught in JS.);
});
</pre></code>

* Sometimes the event will catch. You will see both lines in the console. Other times, you will see the first line in the console, but nothing else. No error, and no response in JS. 



<a href="http://stackoverflow.com/questions/36655410/appcelerator-module-events-stop-firing?noredirect=1#comment60966343_36655410" rel="nofollow" target="_blank">http://stackoverflow.com/questions/36655410/appcelerator-module-events-stop-firing?noredirect=1#comment60966343_36655410</a>

<h3>Comments</h3>

<ol>
<li>derick alt 2016-04-20

   I was able to work around this issue for the time being by moving all events to my custom view, using [[self proxy] fireevent...]</li>
<li>Sharif AbuDarda 2016-04-20

   Hello, 
   
   Thanks for creating the JIRA ticket. Please attach the module project to this ticket for us to test it in our environment. It will be helpful to understand the issue properly if we were to investigate the project code. Also, please provide the full list of steps to follow. 
   
   Regards,
   Sharif.</li>
<li>derick alt 2016-04-20

   I am not permitted to share the full source code, as it is proprietary. The steps to reproduce should be quite simple.
   1. Create a native iOS module
   2. Create a view and view proxy in the module
   3. From the view, post a notification like so... "[[NSNotificationCenter defaultCenter] 
           postNotificationName:@"TestNotification" 
           object:self];"
   4. In your module, add an observer for that notification, that will fire off an event. like so... "[[NSNotificationCenter defaultCenter] addObserver:self
           selector:@selector(receiveTestNotification:) 
           name:@"TestNotification"
           object:nil];"
   -(void)receiveTestNotification:(NSNotification*)notification
   {
   NSLog(@"[INFO] module notified "); 
   [self fireEvent:'test' withObject:notification.userInfo]; 
   }
   5. add a listener in JS for this event.
   
   The line "module notified" will fire every time, telling you that the notification was processed and caught by the module. The event in JS will randomly not fire.</li>
<li>Sharif AbuDarda 2016-04-26

   Hello, 
   
   Please create a module only with the section that causing the issue. And provide the module in the ticket. You need to provide a test case which we can use to reproduce the issue. We need a test case and steps to reproduce the issue.
   
   Regards,
   Sharif.</li>
<li>Hans Kn√∂chel 2017-07-28

   This is no Titanium issue but an issue with the way you implement the module. The reason why it is not firing is a race-condition caused by posting the notification and sending the event asynchronously. An easy fix would be to have a protocol that is implemented by the module and triggered by the view, that's how there won't be any issues. We had similar problems in the <code>MediaModule</code> core-class and fixed it by waiting until the actual action was done and fire the event afterwards. It might be worth checking the source [here](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/MediaModule.m)." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/MediaModule.m).</a></li>
<li>Eric Merriman  2018-08-06

   Closing as invalid. If incorrect, please reopen.</li>
</ol>


<p><a href="/MOD/MOD-2249.json">JSON Source</a></p>