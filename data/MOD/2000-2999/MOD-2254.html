---
title: "[MOD-2254] iOS: Upload crash reports to crash server"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-05-19T08:58:17.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>ACA 1.0.0</td></tr>
<tr><th>Components</th><td>ACA</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chee Kiat Ng</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2016-02-03T05:20:31.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:49:19.000+0000</td></tr>
</table>

<h3>Description</h3>

Using KSCrash lib, we should replace our crittercism module and upload crash reports as analytic events to our own PEM crash server.

here's a quick idea of what the JSON should look like:
<code><pre>
id          - random event id
sid         - session of the app (if you can get it, otherwise no worries)
event       - "crash.native"
ts          - timestamp of the event
data.stack  - this seems better than just "value"
mid         - the device id, if you can get it
aguid       - the app guid
platform    - the platform of the app
app_version - the version of the app
</pre></code>

and some references:
<a href="https://github.com/appcelerator/nodeable/blob/master/common-test/src/main/resources/crash_event.json" rel="nofollow" target="_blank">https://github.com/appcelerator/nodeable/blob/master/common-test/src/main/resources/crash_event.json</a>
<a href="https://github.com/appcelerator/crash-analytics-server/blob/master/lib/consumer.js#L39-L55" rel="nofollow" target="_blank">https://github.com/appcelerator/crash-analytics-server/blob/master/lib/consumer.js#L39-L55</a>

This is .crash that is uploaded, and not the dSYM file. A separate ticket will be created on how to symbolicate the crash file. But for this case, we can deal with allowing the developer to download the relevant crash file from our dashboard, and symbolicate on their local machine.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/MOD/MOD-2254_58297/ios-unsymbolicated-sample-json.json">ios-unsymbolicated-sample-json.json</td></td><td>2016-02-23T06:45:56.000+0000</td><td>38952</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/MOD/MOD-2254_59309/nodeServer.js">nodeServer.js</td></td><td>2016-05-19T08:58:04.000+0000</td><td>776</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Srikanth Sombhatla 2016-02-22

   -[~iwhitfield] Attached a sample crash report json [^test_crash_report_ios.json]. Note that the crash stack is unformatted. -</li>
<li>Isaac Whitfield 2016-02-22

   [~ssombhatla] Am I correct that this stack trace does need decrypting with dSYM?</li>
<li>Srikanth Sombhatla 2016-02-23

   [~iwhitfield] The sample stack trace I supplied is from debug build. So the symbols are not stripped. But the final stack trace requires symbolicating with dSYM file on the developer end. cc [~cng]</li>
<li>Chee Kiat Ng 2016-02-23

   Yes let me explain this. This is what I envision as a developer standpoint.
   1. I log into appcelerator dashboard
   2. I check out the crash analytics page (replace crittercism)
   3. I can see the stats (number of crashes per month on android, on ios etc)
   4. I can choose to see a specific crash. If it's ios, it allows me to download the file as well (.crash file)
   5. I take that file and drag into my Xcode in my local machine, it will de-symbolicate automatically and show me the stack trace. (this can be done via command line too)
   
   So ya. all the crash server gets is a .crash file coupled with some json parameters if there's a native crash.
   
   [~ssombhatla] you should really consider giving [~iwhitfield] the stack trace from release build since that's what we are using when this is deployed.
   
   [~pkclark] ^ </li>
<li>Srikanth Sombhatla 2016-02-23

   [~iwhitfield] attached [^ios-unsymbolicated-sample-json.json]. This is without symbols from a release build running on device. 
   Also note that the iOS report sizes will be on average of ~40KB. </li>
<li>Patrick Clark 2016-02-23

   [~cng] is this still for version 6.0.0 or will this be pulled in for 5.4.0? CC [~iwhitfield]</li>
<li>Chee Kiat Ng 2016-02-24

   [~pkclark] 5.4.0. and 5.4.0 is scheduled to release on 13 June 2016.</li>
<li>Srikanth Sombhatla 2016-02-29

   Changed event to <code>crash.native</code></li>
<li>Srikanth Sombhatla 2016-04-27

   iOS PR: <a href="https://github.com/appcelerator/aps_sdk/pull/291" rel="nofollow" target="_blank">https://github.com/appcelerator/aps_sdk/pull/291</a>
   
   This is merged to a temporary working branch 3_0_X_sriks. Once finalised this branch can be merged to master. </li>
<li>Eric Merriman  2018-08-06

    Cleaning up older fixed issues. If this issue should not have been closed as fixed, please reopen.</li>
</ol>


<p><a href="/MOD/MOD-2254.json">JSON Source</a></p>