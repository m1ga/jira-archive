---
title: "[MOD-2255] Android: Upload crash reports to crash server"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-05-19T08:21:36.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>ACA 1.0.0</td></tr>
<tr><th>Components</th><td>ACA</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chee Kiat Ng</td></tr>
<tr><th>Assignee</th><td>Ashraf Abu</td></tr>
<tr><th>Created</th><td>2016-02-03T05:23:30.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:49:37.000+0000</td></tr>
</table>

<h3>Description</h3>

Using ACRA lib, we should replace our crittercism module and upload crash reports as analytic events to our own PEM crash server.

here's a quick idea of what the JSON should look like:
<code><pre>
id          - random event id
sid         - session of the app (if you can get it, otherwise no worries)
event       - "native.crash"
ts          - timestamp of the event
data.stack  - this seems better than just "value"
mid         - the device id, if you can get it
aguid       - the app guid
platform    - the platform of the app
app_version - the version of the app
</pre></code>

and some references:
<a href="https://github.com/appcelerator/nodeable/blob/master/common-test/src/main/resources/crash_event.json" rel="nofollow" target="_blank">https://github.com/appcelerator/nodeable/blob/master/common-test/src/main/resources/crash_event.json</a>
<a href="https://github.com/appcelerator/crash-analytics-server/blob/master/lib/consumer.js#L39-L55" rel="nofollow" target="_blank">https://github.com/appcelerator/crash-analytics-server/blob/master/lib/consumer.js#L39-L55</a>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/MOD/MOD-2255_58292/android_sample1.json">android_sample1.json</td></td><td>2016-02-22T03:22:10.000+0000</td><td>463</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/MOD/MOD-2255_58291/android_sample2.json">android_sample2.json</td></td><td>2016-02-22T03:22:10.000+0000</td><td>4644</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/MOD/MOD-2255_59308/sampleNodeServer.js">sampleNodeServer.js</td></td><td>2016-05-19T08:29:26.000+0000</td><td>777</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ashraf Abu 2016-02-22

   [~iwhitfield] Sample from Android: [^android_sample2.json] [^android_sample1.json]
   
   It's similar to iOS.</li>
<li>Isaac Whitfield 2016-02-22

   [~msamah] cool thanks! Minor point - dates and stuff will skew unique crash stacks - can they be stripped out? (they start each line)</li>
<li>Ashraf Abu 2016-02-23

   [~iwhitfield] Which part are you referring to? The dates inside the "data.stack"? The logs?
   
   Hmmm... I'll have to check if it's easy to strip them out. It's bad for end point?
   
   Will update you.</li>
<li>Ashraf Abu 2016-02-29

   Events to be named: "crash.native" rather than "native.crash" (From [~iwhitfield])
   [~ssombhatla] Fyi.</li>
<li>Ashraf Abu 2016-03-01

   Just a note:-
   Crittercism is able to catch NDK crashes.
   
   ACRA's NDK crash catching is very limited:-
   
   <a href="https://github.com/ACRA/acra/issues/129" rel="nofollow" target="_blank">https://github.com/ACRA/acra/issues/129</a>
   {quote}
   Only if that NDK crash bubbles up as a Java RuntimeException/Error.
   It can catch a segmentation fault.
   {quote}
   
   <a href="https://github.com/acra/acra/wiki/AdvancedUsage#catching-native-code-errors" rel="nofollow" target="_blank">https://github.com/acra/acra/wiki/AdvancedUsage#catching-native-code-errors</a>
   {quote}
   Catching Native Code errors
   ACRA does not catch errors occurring in native code. We currently don't know any stable solution to catch native errors with ACRA.
   {quote}
   </li>
<li>Ashraf Abu 2016-03-01

   Putting another sample crash here for ref:-
   <code><pre>
   {
     "id": "af6fa75d-3a12-421f-84dc-f34204abac60",
     "event": "crash.native",
     "ts": "2016-02-29T23:49:55.604-08:00",
     "data": {
       "stack": "java.lang.Throwable: Uncaught Error: throw with null exception (APM.crashApp();)\n\tat Unknown.Unknown(app.js:12)\n"
     },
     "aguid": "205adfa3-9587-423b-9aaa-bb61a58ac976",
     "platform": "android",
     "app_version": "1.0"
   }
   </pre></code>
   
   <code>sid</code> and <code>mid</code> are not included.</li>
<li>Eric Merriman  2018-08-06

   Cleaning up older fixed issues. If this issue should not have been closed as fixed, please reopen.</li>
</ol>


<p><a href="/MOD/MOD-2255.json">JSON Source</a></p>