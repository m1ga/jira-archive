---
title: "[MOD-2257] Android 6 : Appcelerator Geofence Module (version 1.1.4) and ti.map throwing error"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-06-30T08:30:02.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Components</th><td>Geofence</td></tr>
<tr><th>Labels</th><td>Android6.0, geofence</td></tr>
<tr><th>Reporter</th><td>Aminul Islam</td></tr>
<tr><th>Assignee</th><td>Ashraf Abu</td></tr>
<tr><th>Created</th><td>2016-05-17T18:49:33.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:49:21.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>description</h4>
when we run our app with " Appcelerator Geofence Module (version 1.1.4) " in Android (Android 6.0.1) throwing  errors.

<h4>Error Log </h4>
<code><pre>
[INFO] :   No aidl files to compile, continuing
[INFO] :   Generating i18n files
[INFO] :   Generating /Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/build/android/res/values/theme.xml
[INFO] :   Packaging application: /Users/Raju/Library/android-sdk-macosx/build-tools/23.0.0/aapt "package" "-f" "-m" "-J" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/build/android/gen" "-M" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/build/android/AndroidManifest.xml" "-A" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/build/android/bin/assets" "-S" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/build/android/res" "-I" "/Users/Raju/Library/android-sdk-macosx/platforms/android-23/android.jar" "-F" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/build/android/bin/app.ap_" "--auto-add-overlay" "--extra-packages" "ti.modules.titanium.ui:android.support.v7.appcompat:android.support.v7.cardview" "-S" "/var/folders/47/ql8m2gld20g474cjx82w5fdr0000gp/T/116419-1300-136d6pk/res" "-S" "/var/folders/47/ql8m2gld20g474cjx82w5fdr0000gp/T/116419-1300-vyo89i/res" "-S" "/var/folders/47/ql8m2gld20g474cjx82w5fdr0000gp/T/116419-1300-muden0/res"
[INFO] :   Building Java source files: /Library/Java/JavaVirtualMachines/jdk1.7.0_25.jdk/Contents/Home/bin/javac "-J-Xmx1024M" "-encoding" "utf8" "-bootclasspath" "/Users/Raju/Library/android-sdk-macosx/platforms/android-23/android.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/kroll-v8.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-analytics.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/aps-analytics.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-android.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/jaxen-1.1.1.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/ti-commons-codec-1.3.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/kroll-common.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/titanium.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-app.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-ui.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/nineoldandroids-appc-2.4.0.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-filesystem.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-media.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-appcompat.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/android-support-v4.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/android-support-v7-appcompat.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-cardview.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/cardview-v7-23.0.1.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-locale.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-network.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-xml.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-platform.jar:/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/modules/android/ti.geofence/1.1.4/geofence.jar:/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/modules/android/ti.geofence/1.1.4/lib/google-play-services.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/kroll-apt.jar:/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/lib/titanium-verify.jar:R.class:AssetCryptImpl.class:Soastabd6Activity.class:Soastabd6AppInfo.class:Soastabd6Application.class" "-d" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/build/android/bin/classes" "-proc:none" "-target" "1.6" "-source" "1.6" "@/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/build/android/java-sources.txt"
[INFO] :   Running dexer: /Library/Java/JavaVirtualMachines/jdk1.7.0_25.jdk/Contents/Home/bin/java "-Xmx512M" "-XX:-UseGCOverheadLimit" "-Djava.ext.dirs=/Users/Raju/Library/android-sdk-macosx/platform-tools" "-jar" "/Users/Raju/Library/android-sdk-macosx/build-tools/23.0.0/lib/dx.jar" "--dex" "--output=/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/build/android/bin/classes.dex" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/build/android/bin/classes" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/lib/titanium-verify.jar" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/modules/android/ti.geofence/1.1.4/geofence.jar" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/modules/android/ti.geofence/1.1.4/lib/google-play-services.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/kroll-v8.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-analytics.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/aps-analytics.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-android.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/jaxen-1.1.1.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/ti-commons-codec-1.3.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/kroll-common.jar" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/plugins/com.soasta.touchtest.android/soasta/sdk/titanium.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-app.jar" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/plugins/com.soasta.touchtest.android/soasta/sdk/titanium-ui.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/nineoldandroids-appc-2.4.0.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-filesystem.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-media.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-appcompat.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/android-support-v4.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/android-support-v7-appcompat.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-cardview.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/cardview-v7-23.0.1.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-locale.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-network.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-xml.jar" "/Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/android/modules/titanium-platform.jar" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/plugins/com.soasta.touchtest.android/lib/aspectjrt.jar" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/plugins/com.soasta.touchtest.android/lib/TouchTestDriver.jar" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/plugins/com.soasta.touchtest.android/lib/TouchTestDriver-APIv11.jar" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/plugins/com.soasta.touchtest.android/lib/TouchTestDriver-APIv12.jar" "/Users/Raju/Documents/Appcelerator_Studio_Workspace/soastabd6/plugins/com.soasta.touchtest.android/lib/TouchTestDriver-Titanium.jar"
[ERROR] :  Failed to run dexer:
[ERROR] :  
[ERROR] :  UNEXPECTED TOP-LEVEL ERROR:
[ERROR] :  java.lang.OutOfMemoryError: Java heap space

</pre></code>

Test Code : Example code in module.
*Steps to reproduce:*
1. Create a simple project.
2. Add Appcelerator Geofence Module in tiapp.xml
3. Add the test code from example folder.
4. Test it on android 6.0.1

<h4>Environment</h4>
<code><pre>
Appcelerator Studio, build: 5.1.0.201508271018
Operating System
  Name                        = Mac OS X
  Version                     = 10.11.2
  Architecture                = 64bit
  # CPUs                      = 4
  Memory                      = 8589934592
Node.js
  Node.js Version             = 5.9.0
  npm Version                 = 3.7.3
Titanium CLI
  CLI Version                 = 5.0.6
Titanium SDK
  SDK Version                 = 5.2.2.GA

Node.js
  ✓  node               installed (v5.9.0)
  ✓  npm                installed (v3.7.3)
Java Development Kit
  ✓  jdk                installed (v1.7.0)
  ✓  java               installed /Library/Java/JavaVirtualMachines/jdk1.7.0_25.jdk/Contents/Home/bin/java
  ✓  javac              installed /Library/Java/JavaVirtualMachines/jdk1.7.0_25.jdk/Contents/Home/bin/javac
  ✓  keytool            installed /Library/Java/JavaVirtualMachines/jdk1.7.0_25.jdk/Contents/Home/bin/keytool
  ✓  jarsigner          installed /Library/Java/JavaVirtualMachines/jdk1.7.0_25.jdk/Contents/Home/bin/jarsigner

Connected Android Devices
  htc_melsuhl
  SDK Version                 = 6.0.1 (android-23)

</pre></code>
<h4>Actual behavior: </h4>
Geofence module throwing error on android 6.0 with SDK 5.2.2 GA. 

<h4>Expected behavior</h4>
Geofence module should build  properly  on android 6.0 with SDK 5.2.2 GA 

Thanks



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/MOD/MOD-2257_59368/appc info.txt">appc info.txt</td></td><td>2016-05-23T21:04:34.000+0000</td><td>27931</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/MOD/MOD-2257_59305/log.txt">log.txt</td></td><td>2016-05-19T04:55:55.000+0000</td><td>6540709</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/MOD/MOD-2257_59304/Screen Shot 2016-05-19 at 10.53.25 AM.png">Screen Shot 2016-05-19 at 10.53.25 AM.png</td></td><td>2016-05-19T04:54:26.000+0000</td><td>144132</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/MOD/MOD-2257_59303/Test Code.zip">Test Code.zip</td></td><td>2016-05-19T04:40:49.000+0000</td><td>4766</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ashraf Abu 2016-05-18

   [~aislam] Is that all that is needed to reproduce this?
   
   Basically, create a new project and add in the module and test on Android 6.0.1?</li>
<li>Ashraf Abu 2016-05-18

   Seems to be some sort of compilation error.</li>
<li>Ashraf Abu 2016-05-19

   Could you try using Node 4.2.x as mentioned here: <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/guide/Titanium_Compatibility_Matrix
   
   I want to rule out that to be the cause of the error since it's mentioned that Node 5.9.0 was used in the initial error report.</li>
<li>Ajith Rohini 2016-05-20

   [~jnaher] Did you get a chance to look at what Ash is asking? Pls get us an update asap since client needs it soon</li>
<li>Ajith Rohini 2016-05-23

    [~msamah] So as per the notes, we tested Appcelerator Geofence Module using Node 4.2.0 and Node 4.4.4 , still getting same dexer error. ( this was on HTC one m8, Android 6.0.1)  but with Nexus 7, and node version 4.2.0 (android :6) we found no error</li>
<li> Ricardo Ramirez 2016-05-23

   Added the appc info 
   
   Also this is not exclusive from Android 6, this is happening on other android versions. </li>
<li>Ashraf Abu 2016-05-25

   Based on the logs, the error occurs during compile time. The issue here is compiling.
   In the original log, you can see in the log writes <code>Running dexer: /Library/Java/JavaVirtualMachines/jdk1.7.0_25.jdk/Contents/Home/bin/java "-Xmx512M"</code> This Heap size is not enough and thus, it throws a <code>java.lang.OutOfMemoryError: Java heap space</code> error.
   
   Please increase the heap size used by adding these properties in your tiapp.xml. It should be contained in the <code><ti:app></code> tag.
   <code><pre>
       <property name="android.javac.maxmemory" type="string">1024M</property>
       <property name="android.dx.maxmemory" type="string">2048M</property>
   </pre></code>
   If it still fails, try increasing the amount of Max Memory used.</li>
<li>Ashraf Abu 2016-05-25

   [~arohini] [~rramirez] Let me know if this works. If it does, I'll resolve this ticket.</li>
<li>Hieu Pham 2016-05-25

   This is probably because GeoFence still uses the whole google-services-library: <a href="https://github.com/appcelerator-modules/ti.geofence/tree/master/android/lib" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.geofence/tree/master/android/lib</a>, while maps is using just the responsible parts of the lib. We need to update GeoFence libs to fix this</li>
<li>Ashraf Abu 2016-05-31

    Just a note, you can try ti.map 2.3.1 with ti.geofence 1.1.4 while this is being worked on.
    One more step is needed, you need to go to modules/android/ti.geofence/lib/google-play-services.jar and copy and replace that to modules/android/ti.map/lib/google-play-services.jar.
    
    </li>
<li>Ashraf Abu 2016-06-30

    [~pkclark] fyi, once everything is okay, this module needs to be updated in the dashboard.</li>
<li>Ajith Rohini 2016-07-19

    [~pkclark]Client needs to know when this will be released . Please update</li>
<li>Patrick Clark 2016-07-19

    [~arohini] updating modules on dashboard requires an APPTS ticket.  
    
    [~msamah] [~cng] if the module is ready, please file an APPTS ticket linking the module zip AYC.  Thanks.</li>
<li>Ashraf Abu 2016-07-20

    -I'll create the APPTS ticket.-
    Ticket was created earlier.
    
    Ticket is APPTS-8759</li>
<li>Eric Merriman  2018-08-06

    Cleaning up older fixed issues. If this issue should not have been closed as fixed, please reopen.</li>
</ol>


<p><a href="/MOD/MOD-2257.json">JSON Source</a></p>