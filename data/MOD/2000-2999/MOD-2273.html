---
title: "[MOD-2273] Facebook Module: Can't login another FB account once logged in first."
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2016-07-18T10:37:30.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Facebook</td></tr>
<tr><th>Labels</th><td>different_account, facebook, login</td></tr>
<tr><th>Reporter</th><td>Shuo Liang</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-07-14T10:44:55.000+0000</td></tr>
<tr><th>Updated</th><td>2016-07-18T10:37:30.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Reproduce Step.</h4>
1. Copy the following code to app.js file.
<code><pre>
var fb = require('facebook');

var win = Ti.UI.createWindow({
	title : 'Login/Logout',
	backgroundColor: "white"
});

//fb module listener
fb.addEventListener('login', function(e) {
	if (e.success) {
		alert('login from uid: ' + e.uid + ', name: ' + JSON.parse(e.data).name);
	} else if (e.cancelled) {
		// user cancelled
		alert('cancelled');
	} else {
		alert(e.error);
	}
});

fb.addEventListener('logout', function(e) {
	alert('logged out');
});

var loginButton = fb.createLoginButton({
	readPermissions : ['read_stream', 'email'],
	height: 100,
	width: 100,
	top : 260
});
win.add(loginButton);

var CurrentStatus = Ti.UI.createButton({
	title : 'Current Status',
	top : 50,
	width : 160,
	height : 40
});
win.add(CurrentStatus);

CurrentStatus.addEventListener('click', function() {
	if (fb.getLoggedIn()) {
		alert("Current UID: " + fb.getUid());
	} else {
		alert('Not logged in.');
	}
});

win.open();
</pre></code>
2. Setting all the necessary key pair for facebook (ref: our doc)
3. Run the app.

<h4>Problem.</h4>
1. If you run it first time, it will be fine. Then if you click the same button to logout. Then click login again. You will not able to login another account. Always the same one.
2. Even you set the facebook account in device ->  setting, it will not impact the result. Change the account in setting, does not help too.

<h4>Note.</h4>
Sometimes, clean the browser will help. But not all the time, not sure why.

Help advise. 

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2016-07-14

   [~sliang] please change the title to better indicate the problem</li>
<li>Hans Knöchel 2016-07-15

   [~sliang] As discussed on Flowdock, I am 90 % sure that this is the native behavior of the Facebook SDK. As [~jvennemann] noted, the logout method is not used to logout the user from Facebook, but only from the current app that used the Facebook SDK. In detail that means that - as long as the user a) has the Facebook app installed or b) is logged into Facebook in Safari / native browser, the "xxxx already authorized <my-app>" will appear. If really necessary, I would create a native Xcode-project to demonstrate the behavior, but that be obsolete. Please let me know what they need here.</li>
</ol>


<p><a href="/MOD/MOD-2273.json">JSON Source</a></p>