---
title: "[MOD-2291] Android : SQLite Database Encryption Module version 1.3.1 throwing error with example ToDo Alloy Apps "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-09-01T07:49:20.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Fix Version/s</th><td>appcelerator.encrypteddatabase 1.3.2, appcelerator.encrypteddatabase 2.0.1</td></tr>
<tr><th>Components</th><td>Encrypted SQLite DB</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Aminul Islam</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2016-08-30T17:28:31.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:49:32.000+0000</td></tr>
</table>

<h3>Description</h3>

Hi,
SQLite Database Encryption Module version 1.3.1 throwing error with example ToDo Alloy Apps on Android 6.0.1 with TiSDK 5.4.0 GA.

Steps to reproduce :
1. Create a simple Alloy Apps.
2. Add example ToDo Alloy Apps code
3. Add Database Encryption Module in tiapp.xml
4. Build apps in android 6.0 with TiSDK 5.4.0.GA

You will get following error when you add items in list :

Error Log :

<code><pre>
[ERROR] :  TiExceptionHandler: (main) [12488,52776] ----- Titanium Javascript Runtime Error -----
[ERROR] :  TiExceptionHandler: (main) [0,52776] - In alloy/sync/enc.db.js:113,36
[ERROR] :  TiExceptionHandler: (main) [0,52776] - Message: Uncaught TypeError: Object #<Encrypteddatabase> has no method 'cipherUpgrade'
[ERROR] :  TiExceptionHandler: (main) [0,52776] - Source:     var cipherUpgraded = _database.cipherUpgrade(dbName);
[ERROR] :  V8Exception: Exception occurred at alloy/sync/enc.db.js:113: Uncaught TypeError: Object #<Encrypteddatabase> has no method 'cipherUpgrade'
[ERROR] :  E/MP-Decision( 4024): Update arg 1
[ERROR] :  D/NetworkController.WifiSignalController( 2868): Change in state from: connected=true,enabled=true,level=4,inetCondition=1,iconGroup=IconGroup(Wi-Fi Icons),activityIn=false,activityOut=false,rssi=-62,lastModified=08-30 09:14:31,ssid="aminul"
[ERROR] :  D/NetworkController.WifiSignalController( 2868): 	to: connected=true,enabled=true,level=4,inetCondition=1,iconGroup=IconGroup(Wi-Fi Icons),activityIn=false,activityOut=true,rssi=-62,lastModified=08-30 09:14:31,ssid="aminul"
[ERROR] :  D/StatusBar.NetworkController( 2868): dumpIcon[(gone) stat_sys_5signal_5|null stat_sys_wifi_signal_out_4 (gone) F]
[ERROR] :  D/NetworkController.WifiSignalController( 2868): Change in state from: connected=true,enabled=true,level=4,inetCondition=1,iconGroup=IconGroup(Wi-Fi Icons),activityIn=false,activityOut=true,rssi=-62,lastModified=08-30 09:14:34,ssid="aminul"
[ERROR] :  D/NetworkController.WifiSignalController( 2868): 	to: connected=true,enabled=true,level=4,inetCondition=1,iconGroup=IconGroup(Wi-Fi Icons),activityIn=false,activityOut=false,rssi=-62,lastModified=08-30 09:14:34,ssid="aminul"
[ERROR] :  D/StatusBar.NetworkController( 2868): dumpIcon[(gone) stat_sys_5signal_5|null stat_sys_wifi_signal_connected_4 (gone) F]
[ERROR] :  D/NetworkController.WifiSignalController( 2868): Change in state from: connected=true,enabled=true,level=4,inetCondition=1,iconGroup=IconGroup(Wi-Fi Icons),activityIn=false,activityOut=false,rssi=-62,lastModified=08-30 09:14:35,ssid="aminul"
[ERROR] :  D/NetworkController.WifiSignalController( 2868): 	to: connected=true,enabled=true,level=4,inetCondition=1,iconGroup=IconGroup(Wi-Fi Icons),activityIn=false,activityOut=true,rssi=-62,lastModified=08-30 09:14:35,ssid="aminul"
[ERROR] :  D/StatusBar.NetworkController( 2868): dumpIcon[(gone) stat_sys_5signal_5|null stat_sys_wifi_signal_out_4 (gone) F]
[ERROR] :  D/NetworkController.WifiSignalController( 2868): Change in state from: connected=true,enabled=true,level=4,inetCondition=1,iconGroup=IconGroup(Wi-Fi Icons),activityIn=false,activityOut=true,rssi=-62,lastModified=08-30 09:14:36,ssid="aminul"
[ERROR] :  D/NetworkController.WifiSignalController( 2868): 	to: connected=true,enabled=true,level=4,inetCondition=1,iconGroup=IconGroup(Wi-Fi Icons),activityIn=false,activityOut=false,rssi=-62,lastModified=08-30 09:14:36,ssid="aminul"
[ERROR] :  D/StatusBar.NetworkController( 2868): dumpIcon[(gone) stat_sys_5signal_5|null stat_sys_wifi_signal_connected_4 (gone) F]
[ERROR] :  D/StatusBar.NetworkController( 2868): dumpIcon[(gone) stat_sys_5signal_5|null stat_sys_wifi_signal_connected_4 (gone) F]
[ERROR] :  D/NetworkController.WifiSignalController( 2868): Change in state from: connected=true,enabled=true,level=4,inetCondition=1,iconGroup=IconGroup(Wi-Fi Icons),activityIn=false,activityOut=false,rssi=-62,lastModified=08-30 09:14:38,ssid="aminul"
[ERROR] :  D/NetworkController.WifiSignalController( 2868): 	to: connected=true,enabled=true,level=4,inetCondition=1,iconGroup=IconGroup(Wi-Fi Icons),activityIn=true,activityOut=true,rssi=-62,lastModified=08-30 09:14:38,ssid="aminul"
[ERROR] :  D/StatusBar.NetworkController( 2868): dumpIcon[(gone) stat_sys_5signal_5|null stat_sys_wifi_signal_inandout_4 (gone) F]
[ERROR] :  D/NetworkController.WifiSignalController( 2868): Change in state from: connected=true,enabled=true,level=4,inetCondition=1,iconGroup=IconGroup(Wi-Fi Icons),activityIn=true,activityOut=true,rssi=-62,lastModified=08-30 09:14:49,ssid="aminul"
[ERROR] :  D/NetworkController.WifiSignalController( 2868): 	to: connected=true,enabled=true,level=4,inetCondition=1,iconGroup=IconGroup(Wi-Fi Icons),activityIn=false,activityOut=false,rssi=-62,lastModified=08-30 09:14:49,ssid="aminul"
</pre></code>

Environment 
<code><pre>
Operating System
  Name                        = Mac OS X
  Version                     = 10.11.5
  Architecture                = 64bit
  # CPUs                      = 4
  Memory                      = 8589934592
Node.js
  Node.js Version             = 4.4.4
  npm Version                 = 2.15.1
Titanium CLI
  CLI Version                 = 5.0.9
Titanium SDK
  SDK Version                 = 5.4.0.GA
</pre></code>

Thanks

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/MOD/MOD-2291_60163/Studio log.txt">Studio log.txt</td></td><td>2016-08-30T17:34:21.000+0000</td><td>9409564</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ashraf Abu 2016-08-31

   The error looks like it's trying to use <code>cipherUpgrade</code> method in Android. Related: MOD-2259
   
   <code>cipherUpgrade</code> is an iOS only method. <a href="https://github.com/appcelerator-modules/appcelerator.encrypteddatabase/blob/cfe5d8b06fc51c913ff7b61cb6e82c324effe19e/apidoc/EncryptedDatabase.yml#L48-L59" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/appcelerator.encrypteddatabase/blob/cfe5d8b06fc51c913ff7b61cb6e82c324effe19e/apidoc/EncryptedDatabase.yml#L48-L59</a>
   
   There is no errors here. In this case, the example is not updated correctly (incorrect).</li>
<li>Ashraf Abu 2016-08-31

   [~aislam] I would say that this is not a real issue in the Module except for that the example needs updating.</li>
<li>Ashraf Abu 2016-08-31

   [~aislam] in the example app, in the file
   <code>app/assets/alloy/sync/enc.db.js</code> at line 164 to 170, you need to check if it is iOS or Android. If it is iOS, you do the code in that block, otherwise, if it is Android, you don't.</li>
<li>Chee Kiat Ng 2016-09-01

   PR merged for 1.3.2. release can be obtained here, <a href="https://github.com/appcelerator-modules/appcelerator.encrypteddatabase/releases/tag/1.3.2" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/appcelerator.encrypteddatabase/releases/tag/1.3.2</a>
   This PR is just an update to the example code. No changes to module.</li>
<li>Ashraf Abu 2016-09-01

   PR <a href="https://github.com/appcelerator-modules/appcelerator.encrypteddatabase/pull/14" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/appcelerator.encrypteddatabase/pull/14</a> was merged for this. (Version 1.3.1)</li>
<li>Ashraf Abu 2016-09-01

   Master PR: <a href="https://github.com/appcelerator-modules/appcelerator.encrypteddatabase/pull/15" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/appcelerator.encrypteddatabase/pull/15</a> (Version 2.0.1)</li>
<li>Eric Merriman  2018-08-06

   Cleaning up older fixed issues. If this issue should not have been closed as fixed, please reopen.</li>
</ol>


<p><a href="/MOD/MOD-2291.json">JSON Source</a></p>