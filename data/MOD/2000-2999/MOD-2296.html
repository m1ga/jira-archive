---
title: "[MOD-2296] iOS10: Ti.SafariDialog - tintColor on iOS 10 broken, new barColor property available"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-09-15T20:01:45.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Components</th><td>SafariDialog</td></tr>
<tr><th>Labels</th><td>qe-6.0.0</td></tr>
<tr><th>Reporter</th><td>Christy Thomas</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-09-08T18:14:23.000+0000</td></tr>
<tr><th>Updated</th><td>2016-09-28T13:12:00.000+0000</td></tr>
</table>

<h3>Description</h3>

The tint color we set for SafariDialog no longer seems to be affecting the ti.safaridialog module.

I found this in the ios 10 release notes: <a href="http://adcdownload.apple.com/Documentation/Xcode_GM_seed_SDK_Release_Notes/iOS_10_GM_Seed_Release_Notes.pdf" rel="nofollow" target="_blank">http://adcdownload.apple.com/Documentation/Xcode_GM_seed_SDK_Release_Notes/iOS_10_GM_Seed_Release_Notes.pdf</a>

• The SFSafariViewControllerConfiguration and -[SFSafariViewController
initWithURL:configuration:] APIs have been removed, and -
[SFSafariViewController initWithURL:entersReaderIfAvailable:] is no longer
marked as deprecated. The preferredBarTintColor property has been moved to
SFSafariViewController, along with a new property preferredControlTintColor
which clients should use instead of setting tintColor directly on the view. Apps linked on
iOS 10 or later will no longer forward their view's tint color to SFSafariViewController

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/MOD/MOD-2296_60362/screenshot-1.png">screenshot-1.png</td></td><td>2016-09-28T12:41:59.000+0000</td><td>11596</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Christy Thomas 2016-09-09

   Repo:
   
   <code><pre>
           var safariDialog = require('ti.safaridialog');
           safariDialog.open({
               url : URL,
               entersReaderIfAvailable : false,
               // this doesn't work on iOS 10
               tintColor : '#d8d8d8'
           });
   </pre></code></li>
<li>Hans Knöchel 2016-09-11

   New API's to be exposed:
   - <code>preferredControlTintColor</code>: Used for <code>tintColor</code> in iOS 10
   - <code>barTintColor</code>: Exposed as a new API in iOS 10
   - <code>load</code> event: Available since iOS 9, but not exposed, yet
   
   The changes are already implemented, but the PR needs to be shifted due to priority for fixing more critical iOS 10 issues first. Thanks!
   
   *EDIT*: Changed the fix-version to 6.0.0, but the module itself will be available next week already. This fix-version is just used for determinating the prepackaged version of the module.</li>
<li>Hans Knöchel 2016-09-11

   PR: <a href="https://github.com/appcelerator-modules/ti.safaridialog/pull/9" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.safaridialog/pull/9</a>
   PR (titanium_mobile/master): <a href="https://github.com/appcelerator/titanium_mobile/pull/8344" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8344</a>
   PR (titanium_mobile(6_0_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/8345" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8345</a></li>
<li>Chee Kiat Ng 2016-09-11

   6,0,0 backport is fine.</li>
<li>Chee Kiat Ng 2016-09-15

   <h4>Steps to test</h4>
   1. *appc new --classic*
   2. add ti.safaridialog module in tiapp.xml
   3. use this sample code
   <code><pre>
   var safari = require('ti.safaridialog');
   
   var win = Ti.UI.createWindow({
       backgroundColor: 'white'
   })
   
   var btn = Ti.UI.createButton({
       title: "Open safari dialog"
   });
   
   btn.addEventListener("click", function() {
       safari.open({
           url:"<a href="http://google.com" rel="nofollow" target="_blank">http://google.com</a>",
           title:"Hello World",
           tintColor:"blue",
           barColor:"red"
       });
   });
   
   safari.addEventListener("load", function(e) {
       var pageurl = e.url;
       var success = e.success;
       Ti.API.warn(pageurl + ' loaded with success value ' + success);
   });
   
   win.add(btn);
   win.open();
   
   </pre></code>
   4. *appc run -p ios*
   5. Click button
   
   <h4>Expected result</h4>
   Safari Dialog shows with a red bar and a blue tint. and after webpage is loaded, you will see some information on console.
   </li>
<li>Chee Kiat Ng 2016-09-15

   CR and FT passed. APPROVED. PRs merged.</li>
<li>Harry Bryant 2016-09-28

   the new barColor property works as expected with iOS10, as well as tintColor with the latest ti.safaridialog module (1.1.0). However tintColor no longer works with iOS9, and a simple revert to ti.safaridialog (1.0.5) fixes that. Please see the matrix below:
   
   !screenshot-1.png!
   
   As the matrix shows that tintColor and the new barColor property for iOS10 have been implemented correctly, the ticket has been satisfied. *Closing* this ticket and created a new one in regards to iOS9: MOD-2300
   
   Tested On:
   iPhone 6 Plus 10.0.1 Device
   iPhone 5S 9.3.5 Device & Simulator
   Mac OSX El Capitan 10.11.6
   Ti SDK:  6.0.0.v20160927221257
   Appc Studio: 4.8.0.201609232005
   Appc NPM: 4.2.8-7
   App CLI: 6.0.0-54
   Xcode 8.0 
   Node v4.4.7
   </li>
</ol>


<p><a href="/MOD/MOD-2296.json">JSON Source</a></p>