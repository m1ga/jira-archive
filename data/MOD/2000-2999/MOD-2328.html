---
title: "[MOD-2328] iOS: Refactor Ti.URLSession, allow background uploads"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-05-14T11:38:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Ti.URLSession 2.1.0</td></tr>
<tr><th>Components</th><td>UrlSession</td></tr>
<tr><th>Labels</th><td>ios, urlsession</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2017-03-08T09:54:37.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:49:21.000+0000</td></tr>
</table>

<h3>Description</h3>

This is an improvements I was working on a few months ago. It allows people to perform background uploads (together with the already existing background download functionality). While working on it, I also deprecated the old API to have a unifies URLSession api that does it's operations on "Session" objects instead of having all methods on the module top level. I also exposed all other possible properties and methods around it, so people can use all the sugar from the NSURLSession API in Titanium.

Thankfully, [~rlustemberg] also did a PR to the core to receive the upload responses from the uploads in [here](<a href="https://github.com/appcelerator/titanium_mobile/pull/8860)." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8860).</a> Together with my module PR [here](<a href="https://github.com/appcelerator-modules/ti.urlsession/pull/9)" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.urlsession/pull/9)</a>, the functionality is completely implemented by now and can be reviewed.

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2017-03-08

   PR (titanium_mobile/master): <a href="https://github.com/appcelerator/titanium_mobile/pull/8860" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8860</a>
   PR (ti.urlsession/master): <a href="https://github.com/appcelerator-modules/ti.urlsession/pull/9" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.urlsession/pull/9</a>
   
   Test-Case (deprecated - should still work): <a href="https://github.com/appcelerator-modules/ti.urlsession/blob/master/ios/example/app.js" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.urlsession/blob/master/ios/example/app.js</a>
   
   Test-Case (new one - should be no deprecation warnings: <a href="https://github.com/hansemannn/ti.urlsession/blob/ba8c3075f663787219b68e0de4fc817fddf26f1c/ios/example/app.js" rel="nofollow" target="_blank">https://github.com/hansemannn/ti.urlsession/blob/ba8c3075f663787219b68e0de4fc817fddf26f1c/ios/example/app.js</a></li>
<li>Hans Knöchel 2017-03-15

   [~ewieber] [~amukherjee] This PR is now labeled for QE-testing.</li>
<li>Eric Merriman  2018-08-06

   Cleaning up older fixed issues. If this issue should not have been closed as fixed, please reopen.</li>
</ol>


<p><a href="/MOD/MOD-2328.json">JSON Source</a></p>