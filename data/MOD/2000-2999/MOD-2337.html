---
title: "[MOD-2337] (Android) When removing a pin from the map and then add it back, the application throws an error"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-05-25T19:07:15.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>qe-6.1.0, regression</td></tr>
<tr><th>Reporter</th><td>Samir Mohammed</td></tr>
<tr><th>Assignee</th><td>Yordan Banev</td></tr>
<tr><th>Created</th><td>2017-05-18T23:24:23.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:49:37.000+0000</td></tr>
</table>

<h3>Description</h3>

When adding pins on to a map using the <code>ti.map</code> module after they have been removed the application throws an error. 
*Test Steps:*

<h4>Create a Titanium project </h4>
<h4>Copy the the following files in the attachments section from this ticket in to the project (<code>app.js</code> and <code>CurvyRoutes.JS</code>) under the resources directory</h4>
<h4>Download the map module from <a href="https://github.com/appcelerator-modules/ti.map" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map</a></h4>
<h4>Build the android module from the repo you just downloaded (This can be done by going in to <code>ti.map/android</code> from the <code>CLI</code> and running the following command <code>appc run --build-only</code></h4>
<h4>Go to the <code>dist</code> folder which will be created and then extract the module and add it to your existing modules</h4>
<h4>Add the <code>ti.map</code> module in to your project </h4>
<h4>Run the application </h4>
<h4>Go to <code>annotation test</code></h4>
<h4>press the <code>RM ALL</code> button</h4>
<h4>You should see all pins being removed</h4>
<h4>Press the <code>ADD ALL</code> button  </h4>
<h4>Application will crash </h4>

*Expected result*
Pins should be added without any issues. 

*Actual result*
Application crashes and the following error is shown: 
<code><pre>
[ERROR] :  TiExceptionHandler: (main) [4126,11648] ----- Titanium Javascript Runtime Error -----
[ERROR] :  TiExceptionHandler: (main) [0,11648] - In /app.js:416,6
[ERROR] :  TiExceptionHandler: (main) [0,11648] - Message: Uncaught Attempt to invoke virtual method 'com.google.android.gms.maps.model.MarkerOptions com.google.android.gms.maps.model.MarkerOptions.position(com.google.android.gms.maps.model.LatLng)' on a null object reference
[ERROR] :  TiExceptionHandler: (main) [0,11648] - Source: 	map.addAnnotations([anno, anno2, anno3, anno4]);
[ERROR] :  V8Exception: Exception occurred at /app.js:416: Uncaught Attempt to invoke virtual method 'com.google.android.gms.maps.model.MarkerOptions com.google.android.gms.maps.model.MarkerOptions.position(com.google.android.gms.maps.model.LatLng)' on a null object reference
[ERROR] :  V8Exception: Attempt to invoke virtual method 'com.google.android.gms.maps.model.MarkerOptions com.google.android.gms.maps.model.MarkerOptions.position(com.google.android.gms.maps.model.LatLng)' on a null object reference
</pre></code>


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/MOD/MOD-2337_62252/app.js">app.js</td></td><td>2017-05-18T22:54:28.000+0000</td><td>52816</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/MOD/MOD-2337_62251/CurvyRoutes.js">CurvyRoutes.js</td></td><td>2017-05-18T22:54:30.000+0000</td><td>3382</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2017-05-21

   ti.map: <a href="https://github.com/appcelerator-modules/ti.map/pull/202" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/202</a></li>
<li>Samir Mohammed 2017-05-25

   FR Passed, test and other information can be found at: <a href="https://github.com/appcelerator-modules/ti.map/pull/202" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/202</a></li>
<li>Eric Merriman  2018-08-06

   Cleaning up older fixed issues. If this issue should not have been closed as fixed, please reopen.</li>
</ol>


<p><a href="/MOD/MOD-2337.json">JSON Source</a></p>