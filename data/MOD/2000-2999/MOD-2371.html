---
title: "[MOD-2371] iOS: ti.map module crashes application when selecting different map annotations rapidly"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-10-17T09:20:52.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.3.0, Ti.Map iOS 2.12.1, Ti.Map iOS 3.0.1</td></tr>
<tr><th>Components</th><td>Map</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>rlarmore@gmail.com</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2017-10-16T15:57:19.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:49:19.000+0000</td></tr>
</table>

<h3>Description</h3>

When opening a map view with multiple annotations rapidly clicking between them crashes the application. This was introduced in 2.12 version of ti.map and still and issue with 3.0.0. I have tested version 2.11 of ti.map and have been unable to recreate the issue.

Steps to reproduce:
Create a window with a button, on button click open a window in a navigation flow with a map
Populate the map with pins/annotations
Select annotations and deselect them by clicking on map.
the application will crash on the 4 or 5 click.

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2017-10-16

   Hey there! Was it 2.12.0 or 2.12.1 / 2.12.2? If it was 2.12.0, the ticket causing it was TIMOB-24375, which is kind of unrelated. If it was MOD-2357, it would make more sense. We'll try to create a test-case for you if you are not able to provide one.
   
   *EDIT*: Reproducible with this test-case:
   <code><pre>
   var Map = require('ti.map');
    
   var win = Titanium.UI.createWindow();
   
   var ann = [];
    
   for (var i = 0; i < 10; i++) {
    
     ann.push(Map.createAnnotation({
       title: 'Title',
       subtitle: 'subtitle',
       latitude: Math.random() * 10 + 40,
       longitude: Math.random() * 10,
     }));
   }
    
   var mapview = Map.createView({
     annotations: ann
    
   });
   
   win.add(mapview);
   win.open();
   </pre></code>
   
   *EDIT 2*: It's definitely 2.12.2 and [this commit](<a href="https://github.com/appcelerator-modules/ti.map/commit/e64d01021bf81078ca92df165426aeef28125487)." rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/commit/e64d01021bf81078ca92df165426aeef28125487).</a> Not sure how to fix the race-condition so far, so this might need more time for investigation.</li>
<li>Hans Knöchel 2017-10-16

   Hey there, would you mind to test [this build](<a href="https://www.dropbox.com/s/br7cgoh3xqe7tmc/ti.map-iphone-2.12.3.zip?dl=0)" rel="nofollow" target="_blank">https://www.dropbox.com/s/br7cgoh3xqe7tmc/ti.map-iphone-2.12.3.zip?dl=0)</a> (2.1.3) and try to reproduce it? I was not anymore but would like to await your feedback before setting up the PR. Thanks!</li>
<li>Hans Knöchel 2017-10-17

   Fixed in Ti.Map [2.12.3](<a href="https://github.com/appcelerator-modules/ti.map/releases/tag/ios-2.12.3)" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/releases/tag/ios-2.12.3)</a> and [3.0.1](<a href="https://github.com/appcelerator-modules/ti.map/releases/tag/ios-3.0.1)." rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/releases/tag/ios-3.0.1).</a></li>
<li>Eric Merriman  2018-08-06

   Cleaning up older fixed issues. If this issue should not have been closed as fixed, please reopen.</li>
</ol>


<p><a href="/MOD/MOD-2371.json">JSON Source</a></p>