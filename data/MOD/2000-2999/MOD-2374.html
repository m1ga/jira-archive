---
title: "[MOD-2374] iOS: Ti.Map - Crash when updating multiple annotations"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-05-20T06:37:42.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Map</td></tr>
<tr><th>Labels</th><td>ios, ti.map</td></tr>
<tr><th>Reporter</th><td>Luc-Edmond Gaspard </td></tr>
<tr><th>Assignee</th><td>Vikas Goyal</td></tr>
<tr><th>Created</th><td>2017-11-24T21:11:14.000+0000</td></tr>
<tr><th>Updated</th><td>2020-05-20T06:37:42.000+0000</td></tr>
</table>

<h3>Description</h3>

When updating a large number of annotations, the application closes without any message.

I attached an example, after 2 or 3 click on the update button, the app will crash.


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/MOD/MOD-2374_63691/map_ios_crash.js">map_ios_crash.js</td></td><td>2017-11-24T20:54:41.000+0000</td><td>1334</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/MOD/MOD-2374_67405/MOD-2374_log.txt">MOD-2374_log.txt</td></td><td>2020-05-20T06:37:30.000+0000</td><td>40284</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2017-11-24

   Hello, This is a valid bug, I was able to reproduce the issue with Map 3.0.1 version in SDK 6.3.0.GA in iOS 11 Simulator. The app crash with updating annotation without showing any error in the log. Thanks.</li>
<li>Hans Kn√∂chel 2017-11-26

   I just validated the issue and it was never supposed to work in the past as well. The reason is because (different to Android), iOS annotations cannot change their latitude / longitude but should re-add the annotations to redraw the map. This may work for a few annotations where Titanium tries to re-append each of them, but it was never implemented to work for multiple annotations, as the re-adding will occur for each latitude / longitude setter, so in this case 600 times.
   
   We can consider supporting this, but until now, re-add the annotations with the updated location properties.
   
   Read more about this common native iOS behavior here:
     - <a href="https://stackoverflow.com/questions/14131345/ios-refresh-annotations-on-mapview" rel="nofollow" target="_blank">https://stackoverflow.com/questions/14131345/ios-refresh-annotations-on-mapview</a> </li>
<li>Vikas Goyal 2020-04-16

   PR: <a href="https://github.com/appcelerator-modules/ti.map/pull/292" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/292</a></li>
<li>Saumya Rai 2020-05-20

   Verified on below environment:
   *Mac OS X *= 10.15
   *Node.js Version* = 12.16.0
   *CLI Version* = 5.2.2
   *iOS Simulator* = iPhone 11 Pro Max
   *iOS Version* = 13.3
   *Xcode*=11.3.1
   *SDK Version *= 9.1.0.v20200514121733
   *ti.map version*= 3.3.1 (ios)
   
   Working fine so closing this ticket. (Attached log for reference)</li>
</ol>


<p><a href="/MOD/MOD-2374.json">JSON Source</a></p>