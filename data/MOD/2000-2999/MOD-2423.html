---
title: "[MOD-2423] Android: Add non-personalized ads support to "ti.admob""
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-05-25T12:59:51.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.2.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>admob, android</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2018-05-21T22:04:20.000+0000</td></tr>
<tr><th>Updated</th><td>2018-06-05T22:41:51.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
By default, AdMob provides targeted ads based on user identifiable information. In order to comply with the EU GDPR, we need to be able to provide "non-personalized ads" (aka: "npa") if the end-user has not consented to targeted ads.
<a href="https://developers.google.com/admob/android/eu-consent" rel="nofollow" target="_blank">https://developers.google.com/admob/android/eu-consent</a>

*Recommended Solution:*
Modify the following AdMob <code>requestAd()</code> to accept a dictionary of properties (method currently does not support arguments). The property we need is <code>extras</code>, which must be a dictionary of strings. The item needed is "npa".
<code><pre>
admob.requestAd({
	extras: { npa: '1' }
});
</pre></code>

This "extras" dictionary of strings will then be blindly copied to an Android <code>Bundle</code> when requesting an ad, as documented here...
<a href="https://developers.google.com/admob/android/eu-consent#forward_consent_to_the_google_mobile_ads_sdk" rel="nofollow" target="_blank">https://developers.google.com/admob/android/eu-consent#forward_consent_to_the_google_mobile_ads_sdk</a>

The advantage of creating an "extras" dictionary is because it'll then behave the same as "ti.admob" for iOS and there are other documented Google extras that can be used.

Also, adding a dictionary of properties to <code>requestAd()</code> leaves room for the possibility to support interstitial ad support in the future.


<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2018-05-22

   PR: <a href="https://github.com/appcelerator-modules/ti.admob/pull/77" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.admob/pull/77</a></li>
<li>Lokesh Choudhary 2018-06-05

   Closing as PR's are merged & a community member has verified the working.</li>
</ol>


<p><a href="/MOD/MOD-2423.json">JSON Source</a></p>