---
title: "[MOD-2426] Ti.Map: Android - Marker Clustering"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-05-29T15:28:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.4.0</td></tr>
<tr><th>Components</th><td>Map</td></tr>
<tr><th>Labels</th><td>android, clustering, feature, maps, mapview, ti.map</td></tr>
<tr><th>Reporter</th><td>Ralf Pfeiffer</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2011-04-15T03:30:17.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:57:53.000+0000</td></tr>
</table>

<h3>Description</h3>

Ti needs a way to easily cluster markers within the native MapView used in [Ti.Map](<a href="https://github.com/appcelerator-modules/ti.map)." rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map).</a>

<h3>Comments</h3>

<ol>
<li>Zarir Bhesania 2015-10-30

   This is a commonly used feature in Map. Please include it for iOS and Android</li>
<li>Sebastian Klaus 2016-01-06

   +1</li>
<li>Hans Knöchel 2016-01-30

   There is an experimental support for iOS clustering using Google Maps available [here](<a href="https://github.com/hansemannn/Ti.GoogleMaps/tree/clustering)." rel="nofollow" target="_blank">https://github.com/hansemannn/Ti.GoogleMaps/tree/clustering).</a> 
   
   For Ti.Map:
   - iOS: As far as I know, MapKit (which is used by ti.map iOS) does not have an API for clustering, there are only 3rd-party solutions / algorithms available.
   - Android: There is an [API](<a href="https://developers.google.com/maps/documentation/android-api/utility/marker-clustering?hl=en)" rel="nofollow" target="_blank">https://developers.google.com/maps/documentation/android-api/utility/marker-clustering?hl=en)</a> by Google Maps (which is used by ti.map Android) that could be implemented. If someone from the community is interesting in contributing this functionality, feel free to create a pull request!</li>
<li>Hans Knöchel 2016-02-08

   Update on this feature: I just implemented a proof of concept of iOS MKMapKit annotation clustering. It uses the native FBAnnotationClustering library to group the annotations. The result can be found here: <a href="https://github.com/hansemannn/ti.map/tree/Clustering." rel="nofollow" target="_blank">https://github.com/hansemannn/ti.map/tree/Clustering.</a> Note: This feature is still very experimental, I tested it using 10000 annotations using this demo:
   <code><pre>
   var map = require("ti.map");
   var mapView = map.createView({
       clusterCellSizeFactor: 0.5,
       clusterTintColor: "red"
       clusterTextColor: "white"
   });
   var annotations = [];
   
   for(var i = 0; i &lt; 10000;i++) {
       annotations.push(map.createAnnotation({
           latitude: 52.695348 +i,
           longitude: 7.299401 + Math.sin(i),
           title: "Annotation"
       }));
   }
   
   mapView.setAnnotations(annotations);
   mapView.cluster();
   
   var window = Ti.UI.createWindow();
   window.add(mapView);
   window.open();
   </pre></code>
   
   We may can consider to bring this into the master branch some time, but not without the Android equivalent.</li>
<li>Hans Knöchel 2016-02-08

   Added some more functionality and docs, so everyone who already needs the functionality can grab it from this PR: <a href="https://github.com/appcelerator-modules/ti.map/pull/149" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/149</a></li>
<li>Sebastian Klaus 2016-02-09

   I tried your cluster branch, but on mapView.cluster(), all pins are gone and no cluster marker appear.</li>
<li>Hans Knöchel 2016-02-09

   Interesting, can you provide a demo to reproduce? Also, are you using custom pins and/or overlays? Early tests have only been done with "native" pins.</li>
<li>Hans Knöchel 2017-04-18

   Side note: Stable clustering is also available in [Ti.GoogleMaps](<a href="https://github.com/hansemannn/ti.googlemaps/)" rel="nofollow" target="_blank">https://github.com/hansemannn/ti.googlemaps/)</a> for the ones interested!</li>
<li>Hans Knöchel 2017-06-06

   iOS 11 finally supports native clustering! This could be considered for Ti.Map on both iOS and Android by now.</li>
<li>Michael Gangolf 2017-09-17

    Started a fork for Ti.Map Android at <a href="https://github.com/m1ga/ti.map/tree/cluster" rel="nofollow" target="_blank">https://github.com/m1ga/ti.map/tree/cluster</a>
    The click-events are not working (infobox) but the clustering is handled by <code>android-maps-utils-release.aar</code></li>
<li>Hans Knöchel 2017-10-12

    The iOS-part is now merged and part of Ti.Map iOS 3.0.0. Android will likely follow once the review-comments are cleared.</li>
<li>Hans Knöchel 2018-05-25

    PR (community, thanks to [~michael]): <a href="https://github.com/appcelerator-modules/ti.map/pull/215" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/215</a></li>
<li>Hans Knöchel 2018-05-29

    All PR's merged. New release available: <a href="https://github.com/appcelerator-modules/ti.map/releases/tag/android-4.3.0" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/releases/tag/android-4.3.0</a></li>
<li>Eric Merriman  2018-08-06

    Cleaning up older fixed tickets from 2016 and earlier. If this ticket should not have been closed, please reopen it.</li>
</ol>


<p><a href="/MOD/MOD-2426.json">JSON Source</a></p>