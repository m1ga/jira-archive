---
title: "[MOD-2487] iOS: Ti.Identity can't find keychain items with empty label or description"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Identity</td></tr>
<tr><th>Labels</th><td>ios, keychain-access, ti.identity</td></tr>
<tr><th>Reporter</th><td>Andrea Jonus</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2018-11-23T15:32:08.000+0000</td></tr>
<tr><th>Updated</th><td>2020-01-28T21:55:08.000+0000</td></tr>
</table>

<h3>Description</h3>

While trying to share a keychain item with a native app using Ti.Identity, I noticed that, while the native app could read items created by my Titanium app, the opposite wasn't working at all.

Looking at the code of Ti.Identity, I found this at line 197 of APSKeychainWrapper.m:

<code><pre>
    baseAttributes = [NSMutableDictionary dictionaryWithDictionary:@{
        (id)kSecClass: (id)kSecClassGenericPassword,
        (id)kSecAttrAccount: _identifier,
        (id)kSecAttrService: _service,
        (id)kSecAttrAccount: @"",
        (id)kSecAttrLabel: @"",
        (id)kSecAttrDescription: @""
    }];
</pre></code>

"kSecAttrLabel" and "kSecAttrDescription" are both passed as empty strings. The resulting query to the keychain filters only the items that have both their label and description set to empty string. Ti.Identity.KeychainItem has no "label" or "description" attributes, so there is no way to control this behavior.

"kSecAttrAccount" is also assigned both the value of _identifier and empty string. This works fine anyway, since only the first assignment is kept, but it's confusing.

I've created [a pull request](<a href="https://github.com/appcelerator-modules/titanium-identity/pull/22)" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/titanium-identity/pull/22)</a> to solve this issue.

<h3>Comments</h3>

<ol>
<li>Rakhi Mitro 2018-11-28

   
   [~ajonus],
   Thanks for reporting this. Can you please test this on 7.5.0.GA ans let us know how it goes.</li>
<li>Hans Kn√∂chel 2019-01-13

   Can please someone move the ticket to TIMOB, merge the PR and release a new version?</li>
<li>Lokesh Choudhary 2020-01-28

   FR Passed.
   PR Merged.</li>
</ol>


<p><a href="/MOD/MOD-2487.json">JSON Source</a></p>