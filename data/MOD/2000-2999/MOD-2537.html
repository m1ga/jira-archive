---
title: "[MOD-2537] ti.facebook: crash on iOS 13"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-09-12T19:07:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.2.0</td></tr>
<tr><th>Components</th><td>Facebook</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2019-09-11T14:57:27.000+0000</td></tr>
<tr><th>Updated</th><td>2019-09-17T18:02:06.000+0000</td></tr>
</table>

<h3>Description</h3>

The Facebook libs once again need to be updated, especially on iOS to support iOS 13+.

<a href="https://github.com/appcelerator-modules/ti.facebook/pull/103" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.facebook/pull/103</a>

Edit -  This ticket include a part of fix from above PR to fix iOS 13 crash. For other changes we will go with MOD-2534

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/MOD/MOD-2537_66938/image1.png">image1.png</td></td><td>2019-09-13T03:46:43.000+0000</td><td>273996</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2019-09-11

   <a href="https://github.com/appcelerator-modules/ti.facebook/pull/108" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.facebook/pull/108</a></li>
<li>Abir Mukherjee 2019-09-11

   [~lchoudhary] can someone in QE please validate before closing?</li>
<li>Vijay Singh 2019-09-12

   Facebook has [login issue](<a href="https://github.com/facebook/facebook-objc-sdk/issues/1013)" rel="nofollow" target="_blank">https://github.com/facebook/facebook-objc-sdk/issues/1013)</a> with iOS 13 and they fixed it in their SDK 5.4.1.
   If we use their latest SDK, they have removed FBSDKMessengerShareKit.framework (in 5.0.0). In our module we give functionality to create facebook [messenger button](<a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/api/Modules.Facebook.MessengerButton) which uses FBSDKMessengerShareKit.framework. So  if we use latest Facebook SDK, we have to make breaking change.
   
   Solution is - Include FBSDKMessengerShareKit.framework from older Facebook SDK in our facebook module and give the facebook [messenger button](<a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/api/Modules.Facebook.MessengerButton) to developer. Remove it in major SDK release, 9.0.0.
   
   So I have created [PR-109](<a href="https://github.com/appcelerator-modules/ti.facebook/pull/109)" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.facebook/pull/109)</a> base to <a href="https://github.com/appcelerator-modules/ti.facebook/pull/103" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.facebook/pull/103</a>, included FBSDKMessengerShareKit.framework and restored facebook messenger button functionality.
   
   cc [~cwilliams]</li>
<li>Christopher Williams 2019-09-12

   [~lchoudhary] Here's the PR that Vijay has put together with the updated Facebook libraries and the messenger button retained: <a href="https://github.com/appcelerator-modules/ti.facebook/pull/109" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.facebook/pull/109</a>
   
   There are (very) basic unit tests around the messenger button that run but they basically just rove the API exists, not functionality. I think the concern here is to ensure that the messenger stuff still works with Vijay's changes and the new FB libraries. if not, then we'd probably be forced to take the breaking changes introduced by Han's original PR for MOD-2534</li>
<li>Keerthi Mahalingam 2019-09-13

   [~cwilliams]  tested the example app  in facebook module with the fix. facebook messenger did not work.on clicking messenger button throws “error :undefined and code :undefined”  in device iOS 13 as well as lesser than that. Not getting any error in console. Also tried with older facebook module 6.0.0.same thing happened   !image1.png|thumbnail! </li>
<li>Keerthi Mahalingam 2019-09-13

   Tested with the PR <a href="https://github.com/appcelerator-modules/ti.facebook/pull/103." rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.facebook/pull/103.</a> login with facebook  works fine on iOS 13</li>
<li>Keerthi Mahalingam 2019-09-17

   Verified the fix on sdk 8.2.0.v20190917100859. Facebook module works. able to login with facebook successfully .
   
   </li>
</ol>


<p><a href="/MOD/MOD-2537.json">JSON Source</a></p>