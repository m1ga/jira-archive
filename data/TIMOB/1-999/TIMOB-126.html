---
title: "[TIMOB-126] HTTPClient status appears to be incorrect"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:52:05.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 0.8.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>network</td></tr>
<tr><th>Reporter</th><td>jeff.larkin (at gmail)</td></tr>
<tr><th>Assignee</th><td>Reggie Seagraves</td></tr>
<tr><th>Created</th><td>2011-04-15T02:24:02.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:52:05.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>When I try to check this.status (or this.getStatus()) from
within a onreadystatechange function, I always seem to get 0,
although I believe that I should be getting either 200 or 401.
Consider the following example using the twitter API:</p>
<p>$('#login').click(function()</p>
<pre>
<code>{
  notify("Login Clicked");
  var query = "twitter.com/account/verify_credentials.json";
  var xhr = Titanium.Network.createHTTPClient();
  xhr.onreadystatechange = function(){
    if (this.readyState == 4 )
    {
      notify("Status: "+this.status);
    }
  };
  xhr.open('GET',
    "http://"+$('#username').val()+":"+$('#password').val()+"@"+query);
  xhr.send();
});</code>
</pre>
<p>Based on the HTTPClient documentation, I'd expect to get either
200 or 401 for a status, depending on whether the authentication
was successful. Judging from the JSON response, I can tell that I
authenticate correctly or incorrectly for a given username or
password, but the status code does not seem to reflect what twitter
returns.</p>
<p>Thanks.</p></div>

<h3>Comments</h3>

<ol>
<li>Jeff Haynie 2011-04-15

   <div><p>is this for iphone, android or both?</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>this has been fixed for iphone but still wrong on android.</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/a6f6295b1efc296cad22d2710cac094d6b8c921e"
   title=
   "Changeset [a6f6295b1efc296cad22d2710cac094d6b8c921e]">[a6f6295b1efc296cad22d2710cac094d6b8c921e]</a>)
   [<a href="/projects/32238/tickets/126" title="Ticket #126">#126</a>
   state:resolved] Added check for no header value. Was getting NPE on
   trying to access a header that didn't exist. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/a6f6295b1efc296cad22d2710cac094d6b8c921e" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/a6f6295b1efc296cad22d2710cac094d6b8c921e</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/a6f6295b1efc2..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/a6f6295b1efc2...</a></a></p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-126.json">JSON Source</a></p>