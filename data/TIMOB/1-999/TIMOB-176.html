---
title: "[TIMOB-176] API - Contacts Dialog"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:52:14.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 0.8.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>feature, ios, iphone</td></tr>
<tr><th>Reporter</th><td>Nolan Wright</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-04-15T02:24:48.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:52:14.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><h2>Description</h2>
<p>The purpose of this API is to display a contacts dialog and
allow a user to select a contact</p>
<h2>Examples</h2>
<pre>
<code class="javascript">
//
// show contact picker
//

//
//  if array of details is specified, the detail view will be shown
//  when the contact is selected.  this will also trigger e.key, and e.index in the success callback
//
Titanium.Contacts.showContactPicker({

   success:function(event)
   {
        // e.contact
        // e.key
        // e.index

   },
   cancel:function()
   {
    // user canceled
   },
   details:[array of constants]
);

//
// Supported Contact property names 
//
firstName
lastName
middleName
prefix
suffix
nickname
firstNamePhonetic
lastNamePhonetic
middleNamePhonetic
organization
jobTitle
department
birthday
note
creationDate
modificationDate
imageData
phoneNumber
address
email

//
//  get all contacts
//
var contacts = Titanium.Contacts.getAllContacts()
var c = contacts[0];
var birthday = c.birthday

// remove contact
Titanium.Contacts.removeContact(c);

// modify contact
c.firstName = 'Fred';
Titanium.Contacts.saveContact(c);


//
// create new contact
//
var c = Titanium.Contacts.createContact({
    firstName:'Fred',
    lastName:'Smith'

})

Titanium.Contacts.addContact(c);

//
// create new contact using multi-value fields like email, phone and address
//
var c = Titanium.Contacts.createContact({
    email:[{label:'home', value:'foo@foo.com'}],
    phone:[{label:'home', value:'3032223333'}],
    address:[{label:'home', value:[{city:'Foo', state:'GA', zip:'40344', street1:'value', street2:'value'}]
})</code>
</pre></div>

<h3>Comments</h3>

<ol>
<li>Blain Hamon 2011-04-15

   <div><p>We'll probably want to add functionality later on for being able
   to pick not only a person, but other UI features:</p>
   <p>Pick a person and a property (IE, phone number out of several),
   complete with a filter of what to show.<br>
   (See <a href=
   "<a href="http://developer.apple.com/IPhone/library/documentation/AddressBookUI/Reference/ABPeoplePickerNavigationControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/ABPeoplePickerNavigationControllerDelegate/peoplePickerNavigationController:shouldContinueAfterSelectingPerson:property:identifier" rel="nofollow" target="_blank">http://developer.apple.com/IPhone/library/documentation/AddressBookUI/Reference/ABPeoplePickerNavigationControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/ABPeoplePickerNavigationControllerDelegate/peoplePickerNavigationController:shouldContinueAfterSelectingPerson:property:identifier</a>">
   <a href="http://developer.apple.com/IPhone/library/documentation/AddressBook..." rel="nofollow" target="_blank">http://developer.apple.com/IPhone/library/documentation/AddressBook...</a></a>:
   )</p>
   <p>View a person that's been chosen from the database, filter of
   what to show, allow editing of it, etc. The callback should return
   a boolean on whether to act on user input. (IE, if the user touched
   the phone number, to launch the phone)<br>
   (See <a href=
   "<a href="http://developer.apple.com/IPhone/library/documentation/AddressBookUI/Reference/ABPersonViewController_Class/Reference/Reference.html" rel="nofollow" target="_blank">http://developer.apple.com/IPhone/library/documentation/AddressBookUI/Reference/ABPersonViewController_Class/Reference/Reference.html</a>">
   <a href="http://developer.apple.com/IPhone/library/documentation/AddressBook..." rel="nofollow" target="_blank">http://developer.apple.com/IPhone/library/documentation/AddressBook...</a></a>
   )</p>
   <p>Present an 'add a person' dialog, with prepopulated properties,
   and let them add it to the address book.<br>
   (See <a href=
   "<a href="http://developer.apple.com/IPhone/library/documentation/AddressBookUI/Reference/ABNewPersonViewController_Class/Reference/Reference.html" rel="nofollow" target="_blank">http://developer.apple.com/IPhone/library/documentation/AddressBookUI/Reference/ABNewPersonViewController_Class/Reference/Reference.html</a>">
   <a href="http://developer.apple.com/IPhone/library/documentation/AddressBook..." rel="nofollow" target="_blank">http://developer.apple.com/IPhone/library/documentation/AddressBook...</a></a>
   )</p>
   <p>Present an 'unknown person' (IE, could be new person, could be
   old person and the data needs merging) which has the new person
   dynamicness as well as the ability to launch actions like view a
   person.<br>
   (See <a href=
   "<a href="http://developer.apple.com/IPhone/library/documentation/AddressBookUI/Reference/ABUnknownPersonViewController_Class/Reference/Reference.html" rel="nofollow" target="_blank">http://developer.apple.com/IPhone/library/documentation/AddressBookUI/Reference/ABUnknownPersonViewController_Class/Reference/Reference.html</a>">
   <a href="http://developer.apple.com/IPhone/library/documentation/AddressBook..." rel="nofollow" target="_blank">http://developer.apple.com/IPhone/library/documentation/AddressBook...</a></a>
   )</p></div></li>
<li>Blain Hamon 2011-04-15

   <div><p>Notes to self:</p>
   <p>More flies in the ointment. While the properties are integers on
   the native side, accessing images are done with a completely
   different function. Fetching this all for getAllContacts is
   prohibitive. The image blobs alone would take too much memory all
   at one time.</p>
   <p>Not only that, but it's unlikely that Android will have the same
   values. So perhaps we should use string values and do the mapping
   native-side.</p>
   <p>So the data sent to the callback must be an array of
   lazy-loading objects with the following properties:</p>
   <p>_REFID:,</p>
   <p>_CACHE:{dict of fetched values},</p>
   <p>_DELTA:{dict of js-set values},</p>
   <p>getFoo:function(){</p>
   <p>if(this.<em>DELTA.foo)return this.</em>DELTA.foo;</p>
   <p>if(this.<em>CACHE.foo===undefined)this.</em>CACHE.foo =
   Ti.<em>TIDO('contacts','getContactProperty',[this.</em>REFID,'foo']);</p>
   <p>return this._CACHE.foo;</p>
   <p>},</p>
   <p>setFoo:function(newFoo){this._DELTA.foo=newFoo;}</p>
   <p>appropriate setters and getters for every foo. I'm thinking
   making an object class for this. The win here also is that there
   need not be any native-side caching contacts, and when saving a
   contact, only the delta need be sent back.</p>
   <p>Actually, this pattern may be very useful in other objects.</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>this is mostly implemented and tested for iphone.</p>
   <p>however, it crashes when you pass <code>@</code> symbol to email
   property when creating a contact.</p></div></li>
<li>Blain Hamon 2011-04-15

   <div><p>Ready for testing.</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>add read only properties w/ getters.</p>
   <p>displayLabel (map to display value in "pick list" style, e.g.
   Company if no person name)<br>
   displayName (constructed from Person Name Attributes Prefix, First,
   Middle, Last Suffix)<br>
   displayAddress (Address String a concatenation of the pieces)<br>
   displayPhoneticName (same as displayName using phonetic values,
   does not include prefix and suffix)</p></div></li>
<li>Blain Hamon 2011-04-15

   <div><p>Ready for testing.</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-176.json">JSON Source</a></p>