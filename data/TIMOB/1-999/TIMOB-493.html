---
title: "[TIMOB-493] implement background image for navbar"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:53:16.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.4.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios, iphone, navbar</td></tr>
<tr><th>Reporter</th><td>Nolan Wright</td></tr>
<tr><th>Assignee</th><td>Jeff Haynie</td></tr>
<tr><th>Created</th><td>2011-04-15T02:30:11.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:53:16.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>this was in 0.8 - just need to add it back to 0.9</p></div>

<h3>Comments</h3>

<ol>
<li>majman 2011-04-15

   <div><p>Crossing my fingers that this doesn't get pushed to 1.4</p></div></li>
<li>majman 2011-04-15

   <div><p>ack! :(</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/1c21cf4ddb0d2a3b1bcf7f385ea9bc2f1b3e4ba9"
   title=
   "Changeset [1c21cf4ddb0d2a3b1bcf7f385ea9bc2f1b3e4ba9]">[1c21cf4ddb0d2a3b1bcf7f385ea9bc2f1b3e4ba9]</a>)
   Closes <a href="/projects/32238/tickets/493" title=
   "Ticket #493">#493</a> . window now supports a barImage property,
   and the window_navbar.js has a button to reflect this new feature.
   <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/1c21cf4ddb0d2a3b1bcf7f385ea9bc2f1b3e4ba9" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/1c21cf4ddb0d2a3b1bcf7f385ea9bc2f1b3e4ba9</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/1c21cf4ddb0d2..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/1c21cf4ddb0d2...</a></a></p></div></li>
<li>Justin 2011-04-15

   <div><p>When a window constructor url contains a subdirectory, the bar
   image url is relative to the subdirectory.</p>
   <p>My initial expectation was for the bar image url to be relative
   to the parent file (app.js) and not the sub-context (win1.js).</p>
   <p>If possible, having the url be relative to the parent may be a
   little more intuitive.</p>
   <pre>
   <code>// from within app.js
   var win2 = Ti.UI.createWindow({
       titleImage:'appcelerator_small.png',
       url:'hello/win1.js'
   });
   
   // this doesn't work
   win1.barImage = 'corkboard.jpg';
   // but this does
   win1.barImage = '../corkboard.jpg';
   });</code>
   </pre></div></li>
<li>Justin 2011-04-15

   <div><p>When the bar image is defined in the constructor, it causes nav
   bar buttons to not display. Refreshing the nav bar area by changing
   tabs restores the buttons (and bar image).</p></div></li>
<li>Justin 2011-04-15

   <div><p>The title of an opening window's navbar normally fades and
   slides into view. When using a barImage, it appears to break this
   animation. Observations:</p>
   <ol>
   <li>
   <p>When a new window uses a barImage, the title of the new window
   does not display. Workaround,: setTimeout 10 ms, set barImage to
   null, then to actual image and setTitle. This causes title to
   display, but without animation. Instead, it appears abruptly.</p>
   </li>
   <li>
   <p>If the new window does not use a barImage, the title is
   rendered, but again, without animation.</p>
   </li>
   </ol></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/a38ad774baa02dd59218a2aaf2a0216d31e4e550"
   title=
   "Changeset [a38ad774baa02dd59218a2aaf2a0216d31e4e550]">[a38ad774baa02dd59218a2aaf2a0216d31e4e550]</a>)
   Closes <a href="/projects/32238/tickets/493" title=
   "Ticket #493">#493</a> (again) -- Setting the nav button now will
   cause the barImage to refresh (and be properly located) and more
   so, setting the barImage causes the url to be resolved at assign
   time. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/a38ad774baa02dd59218a2aaf2a0216d31e4e550" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/a38ad774baa02dd59218a2aaf2a0216d31e4e550</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/a38ad774baa02..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/a38ad774baa02...</a></a></p></div></li>
<li>Justin 2011-04-15

   <div><p>Assign-time barImage url resolution works great. Thanks
   Blain!</p>
   <p>During a barImage'd window's opening animation, the title
   appears abruptly rather than sliding in from the left. Can you add
   support for this animation?</p></div></li>
<li>Nolan Wright 2011-04-15

   <div><p>re-opening see Justin's comment</p></div></li>
<li>Stephen Tramer 2011-04-15

    <div><p>This can actually be handled in the JS. You need to set the
    barImage when opening the window, NOT in the JS that lays out the
    window. Example:</p>
    <pre>
    <code>win = Titanium.UI.createWindow({
      url:'test.js',
      title:'Test',
      backgroundColor:'#fff',
      barImage:'../images/corkboard.jpg'
    });
    Titanium.UI.currentTab.open(win,{animated:true});</code>
    </pre></div></li>
<li>Justin 2011-04-15

    <div><p>I'm doing this, but it does not appear to be working. When I
    remove the barImage from both windows, upon opening the 2nd window,
    the title slides and fades in. Whereas without it, the title does
    not slide and simply appears.</p></div></li>
<li>Stephen Tramer 2011-04-15

    <div><p>Okay, it doesn't work when you have a different barImage set
    previously. I'm not sure we can have any control over this but will
    look at it.</p></div></li>
<li>Justin 2011-04-15

    <div><p>Appreciate you looking into it, thanks Stephen!</p></div></li>
<li>Jeff Haynie 2011-04-15

    <div><p>(from <a href=
    "/projects/32238/changesets/3e56a1be575abe034f0062d68f7002e071136f03"
    title=
    "Changeset [3e56a1be575abe034f0062d68f7002e071136f03]">[3e56a1be575abe034f0062d68f7002e071136f03]</a>)
    Closes <a href="/projects/32238/tickets/493" title=
    "Ticket #493">#493</a>: barImage backgrounds are removed from the
    view before focusing the new window. <a href=
    "<a href="http://github.com/appcelerator/titanium_mobile/commit/3e56a1be575abe034f0062d68f7002e071136f03" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/3e56a1be575abe034f0062d68f7002e071136f03</a>">
    <a href="http://github.com/appcelerator/titanium_mobile/commit/3e56a1be575ab..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/3e56a1be575ab...</a></a></p></div></li>
<li>Justin 2011-04-15

    <div><p>That was impressively fast. Grazie!</p></div></li>
<li>Justin 2011-04-15

    <div><p>I hate to do this, but I noticed another possible issue.
    openPhotoGallery() causes the bar image to disappear.</p></div></li>
<li>Stephen Tramer 2011-04-15

    <div><p>This bug is getting too long and I don't want to reopen/rename
    it again. See <a href="/projects/32238/tickets/1091" title=
    "Ticket #1091">#1091</a>.</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-493.json">JSON Source</a></p>