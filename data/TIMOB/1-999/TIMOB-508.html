---
title: "[TIMOB-508] cannot access org.appcelerator.titanium.TiRootActivity upon trying to deploy KitchenSink demo app on Android"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2012-07-25T13:18:20.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, class-not-found, deployment, droid, emulator, kitchensink</td></tr>
<tr><th>Reporter</th><td>Chris Wolf</td></tr>
<tr><th>Assignee</th><td>Neeraj Gupta</td></tr>
<tr><th>Created</th><td>2011-04-15T02:30:32.000+0000</td></tr>
<tr><th>Updated</th><td>2012-07-26T20:55:04.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>I cannot deploy the <em>KitchenSink</em> demo app on any form of
Android emulator. I downloaded the<br>
app via the download button (not git) which offered a zip or tar
archive. The base directory<br>
of the archive is:</p>
<pre>
<code>ls -l appcelerator-KitchenSink-4d0db58/
total 32
drwxr-xr-x  3 cwolf  cwolf    102 Mar  2 00:49 0.8.1
drwxr-xr-x  2 cwolf  cwolf     68 Mar  2 00:48 0.9.x
-rwxr-xr-x  1 cwolf  cwolf  11485 Feb 26 09:39 LICENSE
-rwxr-xr-x  1 cwolf  cwolf    709 Feb 26 09:39 README.md</code>
</pre>
<p>I imported the project into the Titanium IDE and set the log
filter to "debug" and pressed<br>
"launch" it seems to always have a class-not-found upon compilation
phase. The relavant log output is:</p>
<pre>
<code>[DEBUG] javac -classpath /opt/android-sdk/platforms/android-1.6/android.jar:/Library/Application Support/Titanium/mobilesdk/osx/0.9.3/android/titanium.jar -d /Users/cwolf/Desktop/Downloads/appcelerator-KitchenSink-4d0db58/0.8.1/KitchenSink/build/android/bin/classes -sourcepath /Users/cwolf/Desktop/Downloads/appcelerator-KitchenSink-4d0db58/0.8.1/KitchenSink/build/android/src /Users/cwolf/Desktop/Downloads/appcelerator-KitchenSink-4d0db58/0.8.1/KitchenSink/build/android/src/com/appcelerator/kitchensink/KitchensinkActivity.java /Users/cwolf/Desktop/Downloads/appcelerator-KitchenSink-4d0db58/0.8.1/KitchenSink/build/android/src/com/appcelerator/kitchensink/KitchensinkAppInfo.java /Users/cwolf/Desktop/Downloads/appcelerator-KitchenSink-4d0db58/0.8.1/KitchenSink/build/android/src/com/appcelerator/kitchensink/KitchensinkApplication.java /Users/cwolf/Desktop/Downloads/appcelerator-KitchenSink-4d0db58/0.8.1/KitchenSink/build/android/src/com/appcelerator/kitchensink/R.java
[ERROR] javac /Users/cwolf/Desktop/Downloads/appcelerator-KitchenSink-4d0db58/0.8.1/KitchenSink/build/android/src/com/appcelerator/kitchensink/KitchensinkActivity.java:3: cannot access org.appcelerator.titanium.TiRootActivity</code>
</pre>
<p>I tried both the "0.9.x" and "0.8.1" version of the
<em>KitchenSink</em> app and got the same error.<br>
Next, I looked at the <em>javac</em> command line (above) to see
what jars were being referenced and<br>
looked in the <em>titanium.jar</em> and see the class that's
reported not found is, in fact, in the jar:</p>
<pre>
<code>$ cd /Library/Application Support/Titanium/mobilesdk/osx/0.9.3/android
$ jar tvf titanium.jar | grep TiRoot
   414 Mon Mar 01 20:14:56 EST 2010 org/appcelerator/titanium/TiRootActivity$TiActivityRef.class
   918 Mon Mar 01 20:14:56 EST 2010 org/appcelerator/titanium/TiRootActivity$1.class
  6043 Mon Mar 01 20:14:56 EST 2010 org/appcelerator/titanium/TiRootActivity.class</code>
</pre>
<p>I have MacOS 10.5.8. Java version <em>1.5.0_22</em> (apple). I
tried using all Android SDK emulations,<br>
1.5, 1.6 and 2.0 (it would be helpful if a "readme" in
<em>KitchenSink</em> indicated which to use)</p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-508_17860/kitchensink_eclipse.png">kitchensink_eclipse.png</td></td><td>2011-04-15T02:30:34.000+0000</td><td>148453</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-508_17859/mobiles.py">mobiles.py</td></td><td>2011-04-15T02:30:33.000+0000</td><td>910</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Chris Wolf 2011-04-15

   <div><p>Changing assignment from "none" to "Kevin Whinnery", since
   that's the submitter I see in the git log.</p></div></li>
<li>Chris Wolf 2011-04-15

   <div><p>I ran the Android SDK and AVD manager and updated to the latest
   versions and still get the problem.</p></div></li>
<li>Chris Wolf 2011-04-15

   <div><p>I tried loading the Eclipse project in the <em>build</em>
   subdirectory, just to see what would happen and got the result show
   in the attached screen shot.</p></div></li>
<li>Chris Wolf 2011-04-15

   <div><p>I cut&amp;paste the <em>javac</em> command from the log (above)
   and used it to create a shell script to run the compiler from the
   command line and was able to see additional error info not
   displayed in the Titanium log:</p>
   <pre>
   <code>./build/android/src/com/appcelerator/KitchenSink/KitchensinkActivity.java:3: cannot access org.appcelerator.titanium.TiRootActivity
   bad class file: /Library/Application Support/Titanium/mobilesdk/osx/0.9.3/android/titanium.jar(org/appcelerator/titanium/TiRootActivity.class)
   class file has wrong version 50.0, should be 49.0
   Please remove or make sure it appears in the correct subdirectory of the classpath.
   import org.appcelerator.titanium.TiRootActivity;</code>
   </pre>
   <p>The class version mismatch indicated that I should be using
   JDK-1.6, not 1.5, which is the default setting on <em>MacOS</em>
   10.5.8. I then used the Apple <em>Java Preferences.app</em> to
   change the JDK search order to try 1.6 first. This resolves the
   issue of building and running <em>KitchenSink</em> in the
   emulator.</p>
   <p>Unfortunately, I am now unable to deploy <em>KitchenSink</em> on
   a real device, in my case, a Motorola Droid running
   Android-2.0.</p></div></li>
<li>Chris Wolf 2011-04-15

   <div><p>I changed the phone setting to allow non-Marketplace apps, and
   this still does not help. There's no log or indication that the
   deployment failed. Although I see this in the
   <code>/var/log/system.log</code>:</p>
   <pre>
   <code>Mar  2 10:11:51 clozaril-2 [0x0-0xa25a25].com.appcelerator.titanium.developer[96952]: [15:11:51:841] [Titanium.API] [Information] (JavaScript.KKJSList) [ "/Library/Application Support/Titanium/mobilesdk/osx/0.9.3/android/builder.py", "install", ""KitchenSink"", ""/opt/android-sdk"", ""/Users/cwolf/src/appcelerator-KitchenSink-4d0db58/0.9.x/KitchenSink"", ""com.nolanwright.kitchensink"", ""3"", ]</code>
   </pre>
   <p>...if that means anything.</p></div></li>
<li>Chris Wolf 2011-04-15

   <div><p>I tried to run that <em>builder.py</em> from the command
   line:</p>
   <pre>
   <code>"/Library/Application Support/Titanium/mobilesdk/osx/0.9.3/android/builder.py" \
    install, KitchenSink, /opt/android-sdk, \
    /Users/cwolf/src/appcelerator-KitchenSink-4d0db58/0.9.x/KitchenSink, \
    com.nolanwright.kitchensink, 3</code>
   </pre>
   <p>...but got the following except stack trace:</p>
   <pre>
   <code>Traceback (most recent call last):
     File "/Library/Application Support/Titanium/mobilesdk/osx/0.9.3/android/builder.py", line 16, in ?
       from android import Android
     File "/Library/Application Support/Titanium/mobilesdk/osx/0.9.3/android/android.py", line 9, in ?
       from mako.template import Template
     File "/Library/Application Support/Titanium/mobilesdk/osx/0.9.3/android/mako/template.py", line 10, in ?
       from mako.lexer import Lexer
     File "/Library/Application Support/Titanium/mobilesdk/osx/0.9.3/android/mako/lexer.py", line 10, in ?
       from mako import parsetree, exceptions
     File "/Library/Application Support/Titanium/mobilesdk/osx/0.9.3/android/mako/parsetree.py", line 9, in ?
       from mako import exceptions, ast, util, filters
     File "/Library/Application Support/Titanium/mobilesdk/osx/0.9.3/android/mako/ast.py", line 9, in ?
       from mako import exceptions, pyparser, util
     File "/Library/Application Support/Titanium/mobilesdk/osx/0.9.3/android/mako/pyparser.py", line 25, in ?
       from compiler import parse as compiler_parse
   ImportError: cannot import name parse</code>
   </pre>
   <p>...but when I tried to run those lines in <em>pyparser.py</em>
   from the interpreter, everything looked fine:</p>
   <pre>
   <code>$ python
   Python 2.4.4 (#1, Oct 18 2006, 10:34:39) 
   [GCC 4.0.1 (Apple Computer, Inc. build 5341)] on darwin
   &gt;&gt;&gt; from compiler import parse as compiler_parse
   &gt;&gt;&gt; from compiler import visitor
   &gt;&gt;&gt; print compiler_parse
   &lt;function parse at 0x76eb0&gt;
   &gt;&gt;&gt;</code>
   </pre>
   <p>Any ideas how I can debug this device deployment problem?</p></div></li>
<li>Chris Wolf 2011-04-15

   <div><p>I'm going to try reassigning to Nolan Wright, since it appears
   he was the original developer of KitchenSink.</p></div></li>
<li>Chris Wolf 2011-04-15

   <div><p>I guess I should have watched the videos first. (I did read the
   "getting started guide") One of the videos<br>
   points out that in addition to setting "allow installation of
   non-market apps", you also need<br>
   "usb debug" turned on. This allowed me to install the app. Before I
   saw this, I tried modifying <strong>mobiles.py</strong> to add my
   Motorola Droid's vendor and product code to the device lookup
   table.<br>
   It turns out not to matter, but I'll attach it anyway since
   <em>usbprobe</em> returns with zero exit<br>
   status (device was found).</p>
   <p>Feel free to close this ticket. Thanks and sorry for the
   noise...</p></div></li>
<li>Chris Wolf 2011-04-15

   <div><p>I should add that one of the videos incorrectly states that
   java-5 (1.5) can be used, but I found that<br>
   java 1.6 is the minimum (at least for Android).</p></div></li>
<li>Ping Wang 2012-07-25

    Cannot reproduce.</li>
</ol>


<p><a href="/TIMOB/TIMOB-508.json">JSON Source</a></p>