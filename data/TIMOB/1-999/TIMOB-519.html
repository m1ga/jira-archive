---
title: "[TIMOB-519] problem with this in callbacks for XHR"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:53:22.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0 M04</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios, iphone, xhr</td></tr>
<tr><th>Reporter</th><td>Jeff Haynie</td></tr>
<tr><th>Assignee</th><td>Jeff Haynie</td></tr>
<tr><th>Created</th><td>2011-04-15T02:30:51.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:53:22.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p><a href=
"<a href="http://support.appcelerator.net/discussions/support/1990-getresponseheader-for-set-cookie" rel="nofollow" target="_blank">http://support.appcelerator.net/discussions/support/1990-getresponseheader-for-set-cookie</a>">
<a href="http://support.appcelerator.net/discussions/support/1990-getrespons..." rel="nofollow" target="_blank">http://support.appcelerator.net/discussions/support/1990-getrespons...</a></a></p>
<p>looks like this.responseHeader isn't getting correctly
dispatched through this pointer proxy.</p></div>

<h3>Comments</h3>

<ol>
<li>Brion Vibber 2011-04-15

   <div><p>Sample code to reproduce:</p>
   <pre>
   <code>var client = Titanium.Network.createHTTPClient();
   client.onload = function() {
       Titanium.API.info("Loaded! Status: " + this.status);
   
       var contentType = this.getResponseHeader('Content-Type');
       Titanium.API.info("Content-Type: " + contentType);
   };
   client.open("GET", "<a href="http://example.com/" rel="nofollow" target="_blank">http://example.com/</a>");
   client.send();</code>
   </pre>
   <p>got on iphone:<br>
   <a href="/projects/32238/changesets/INFO" title=
   "Changeset [INFO]">[INFO]</a> Loaded! Status: 200 <a href=
   "/projects/32238/changesets/INFO" title=
   "Changeset [INFO]">[INFO]</a> Content-Type: null &lt;- BROKEN</p>
   <p>got on android:<br>
   I/TiAPI (11249): (kroll$1) [23,606] Loaded! Status: 200<br>
   I/TiAPI (11249): (kroll$1) [13,619] Content-Type: text/html;
   charset=UTF-8 &lt;- fine</p></div></li>
<li>Brion Vibber 2011-04-15

   <div><p>Several related issues also mentioned on <a href=
   "<a href="https://appcelerator.lighthouseapp.com/projects/32238-titanium-mobile/tickets/1502-httpclient-problems-with-header-parsing-and-responsedata-in-onerror-handler" rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238-titanium-mobile/tickets/1502-httpclient-problems-with-header-parsing-and-responsedata-in-onerror-handler</a>">
   <a href="https://appcelerator.lighthouseapp.com/projects/32238-titanium-mobi..." rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238-titanium-mobi...</a></a></p></div></li>
<li>Jake Howerton 2011-04-15

   <div><p>Isn't this somewhat critical? Does anyone have a patch for
   it?</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/074c3e8c9cd6bc80af9ca53256a23ba24d1e09dc"
   title=
   "Changeset [074c3e8c9cd6bc80af9ca53256a23ba24d1e09dc]">[074c3e8c9cd6bc80af9ca53256a23ba24d1e09dc]</a>)
   [<a href="/projects/32238/tickets/519" title="Ticket #519">#519</a>
   state:fixed-in-qa] Set response headers correctly in HTTP response.
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/074c3e8c9cd6bc80af9ca53256a23ba24d1e09dc" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/074c3e8c9cd6bc80af9ca53256a23ba24d1e09dc</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/074c3e8c9cd6..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/074c3e8c9cd6...</a></a></p></div></li>
<li>Pedro Enrique 2011-04-15

   <div><p>Just checked the sample code provided by Brion Vibber against
   1.5 on simulator with the following address:<br>
   <a href=
   "<a href="http://developer.appcelerator.com/apidoc/mobile/1.4/api.json" rel="nofollow" target="_blank">http://developer.appcelerator.com/apidoc/mobile/1.4/api.json</a>"><a href="http://developer.appcelerator.com/apidoc/mobile/1.4/api.json" rel="nofollow" target="_blank">http://developer.appcelerator.com/apidoc/mobile/1.4/api.json</a></a></p>
   <p>The console returs:<br>
   <a href="/projects/32238/changesets/INFO" title=
   "Changeset [INFO]">[INFO]</a> Loaded! Status: 200 <a href=
   "/projects/32238/changesets/INFO" title=
   "Changeset [INFO]">[INFO]</a> Content-Type: text/json</p>
   <p>Ticket resolved</p></div></li>
<li>Conrad 2011-04-15

   <div><p>Using mobile sdk 1.6.1 and iOS (any version), this problem
   persists depending on which version of Apache is running on the
   server. Is there any way to collect the raw headers and parse them
   myself? I believe getAllHeaders is not supported in iOS still.</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-519.json">JSON Source</a></p>