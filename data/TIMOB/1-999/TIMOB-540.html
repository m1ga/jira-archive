---
title: "[TIMOB-540] Tableview.insertRowBefore(index, row, options) Inserts in wrong Index"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-10-27T15:52:02.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.6.2, Release 1.7.1</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-31, Release 1.8.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>tableview, tableviewrow</td></tr>
<tr><th>Reporter</th><td>Dawson Toth</td></tr>
<tr><th>Assignee</th><td>Sabil Rahim</td></tr>
<tr><th>Created</th><td>2011-04-15T02:31:27.000+0000</td></tr>
<tr><th>Updated</th><td>2011-10-27T15:52:02.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>
insertRowBefore adds rows at the incorrect spot.

<h4>Reproduction</h4>
Drop the following in an app.js.
1. It has a table with two rows: A and C.
2. It attempts to insert a row B before C.
3. The rows end up being BAC, instead of the expected ABC.
<code><pre>
var win = Ti.UI.createWindow({ backgroundColor: '#fff' });
win.open();

var data = [
    { title: 'A', name: 'A' },
    { title: 'C', name: 'C' }
];

var tableview = Ti.UI.createTableView({ data: data });
win.add(tableview);

function checkIndex(name, expected) {
    var actual = tableview.getIndexByName(name);
    Ti.API.info(name + "'s Index: " + actual);
    if (actual != expected) {
        alert(name + ' has an inaccurate index! expected: ' + expected + ', actual: ' + actual);
    }
}

setTimeout(function() {
    tableview.insertRowBefore(tableview.getIndexByName('C'), { title: 'B', name: 'B' });

    checkIndex('A', 0);
    checkIndex('B', 1);
    checkIndex('C', 2);
}, 1000);
</pre></code>

<h4>Expected Behavior</h4>
Calling "insertRowBefore" a row should insert the row before the specified row. It should _not_ insert the row two rows before the specified row.

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2011-04-15

   <div><p>This is expected behavior.</p></div></li>
<li>Andrew Kulinich 2011-06-13

   In this case following code behaves the same:
   <code><pre>
   tableview.insertRowBefore(0, { title: '0' });
   tableview.insertRowBefore(1, { title: '1' });
   </pre></code>
   It insert both lines before the first record.
   What is worse - it is impossible to insert row before last row.
   So as a developer I expect that following two lines must behave the same for i > 0:
   <code><pre>
   tableview.insertRowBefore(i, { title: '0' });
   tableview.insertRowAfter(i-1, { title: '0' });
   </pre></code>
   As for me this is a bug and should be fixed</li>
<li>Dawson Toth 2011-07-14

   Updated ticket for better formatting and clarity of purpose.</li>
<li>Sabil Rahim 2011-07-27

   pull # 298 pending</li>
<li>Natalie Huynh 2011-08-25

   Tested with 1.8.0.v20110819142548
   iPhone 4.3.4
   iPad2 4.3.2
   Motorola Xoom 3.2
   Nexus One 2.2.2
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-540.json">JSON Source</a></p>