---
title: "[TIMOB-56] Android: Race condition in HTTPClient when invoking readystate callback"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:51:50.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 0.6.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, fa_0_5_0</td></tr>
<tr><th>Reporter</th><td>Don Thorp</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T02:23:09.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:51:50.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>A race condition exists where the readyState function
invocations were being queued up by the WebViewCoreThread and only
executing after readyState had been set to 4. So in normal usage
patterns the code executed when the document was loaded was getting
run 3 or 4 times depending on whether the callback was set before
or after open.</p></div>

<h3>Comments</h3>

<ol>
<li>Don Thorp 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/12a8718043d27d211b9d2ce399c5659388bb0a6b"
   title=
   "Changeset [12a8718043d27d211b9d2ce399c5659388bb0a6b]">[12a8718043d27d211b9d2ce399c5659388bb0a6b]</a>)
   [<a href="/projects/32238/tickets/56" title="Ticket #56">#56</a>
   state:resolved] Extened logging to show thread name, added support
   for synchronus callbacks in TitaniumWebView. Added sync callbacks
   to HTTPClient to call handler synchronously. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/12a8718043d27d211b9d2ce399c5659388bb0a6b" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/12a8718043d27d211b9d2ce399c5659388bb0a6b</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/12a8718043d27..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/12a8718043d27...</a></a></p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-56.json">JSON Source</a></p>