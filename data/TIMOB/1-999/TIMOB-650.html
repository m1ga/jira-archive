---
title: "[TIMOB-650] when changing from auto to fix height label does not display properly"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:53:48.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.2.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Nolan Wright</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-04-15T02:33:45.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:53:48.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>run this code in a app.js and click on any of the labels to
toggle their height:</p>
<p>var win = Titanium.UI.createWindow();</p>
<p>var y = 20;</p>
<p>var scrollView = Titanium.UI.createScrollView({<br></p>
<pre>
<code>contentWidth:'auto',
contentHeight:'auto'</code>
</pre>
<p>}); scrollView.layout = 'vertical';</p>
<p>function addText(txt)<br>
{<br></p>
<pre>
<code>label = Ti.UI.createLabel({
    width:290,
    height:'auto',
    text:txt,
    font:{fontSize:16}
});
view = Ti.UI.createView({
    width:310,
    height:'auto',
    backgroundColor:'#22FFFF',
    borderWidth:1,
    top:5,
    bottom:5
});
view.add(label);

scrollView.add(view);

label.addEventListener('click',function(e) {
    if (e.source.height == 38)
    {
        e.source.height = 'auto';
    }
    else 
    {
        e.source.height = 38;
    }
});</code>
</pre>
<p>}</p>
<p>addText("1. A b c d e f g h i j k l m n o p q r s t u v w x y z
aa bb cc dd ee ff gg hh ii jj kk ll mm nn oo pp qq rr ss tt uu vv
ww xx yy zz. ");<br>
addText("2. Now is the time for all good men to come to the aid of
their country. Now is the time for all good men to come to the aid
of their country. Now is the time for all good men to come to the
aid of their country. ");<br>
addText("3. Now is the time for all good men to come to the aid of
their country. Now is the time for all good men to come to the aid
of their country. ");<br>
addText("4. Now is the time for all good men to come to the aid of
their country. Now is the time for all good men to come to the aid
of their country. Now is the time for all good men to come to the
aid of their country. Now is the time for all good men to come to
the aid of their country. Now is the time for all good men to come
to the aid of their country. Now is the time for all good men to
come to the aid of their country. Now is the time for all good men
to come to the aid of their country. Now is the time for all good
men to come to the aid of their country. Now is the time for all
good men to come to the aid of their country. Now is the time for
all good men to come to the aid of their country. ");<br>
addText("5. Now is the time for all good men to come to the aid of
their country. Now is the time for all good men to come to the aid
of their country. Now is the time for all good men to come to the
aid of their country. Now is the time for all good men to come to
the aid of their country. ");</p>
<p>win.add(scrollView);</p>
<p>win.open()</p></div>

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2011-04-15

   <div><p>Bug doesn't affect just autoresize; it affects going from any
   larger size to a smaller size. In this case, text appears to be
   truncated to start at height 38 of the original label contents (at
   font size 16, this means it always starts at the second line), and
   then proceed for another 38.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Slight correction - the text is drawn based on the new center
   point from the resize. So from the center point we are drawn (width
   / 2) on either side, and (height/2) above/below the center point.
   Has to be a way to change this.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>This one was sneaky. The view wasn't being redrawn on resize,
   and in fact this bug may affect other views which rely on the same
   behavior. The solution is to set</p>
   <p><code>view.contentMode = UIViewContentModeRedraw</code></p>
   <p>Which forces a redraw whenever the bounds/frame/center are
   changed. It's also worth noting that setting a view's
   bounds/frame/center also resets these other values, so a call to
   more than one method may not be necessary (especially since it
   triggers multiple redraws for UILabels now).</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/02900cc0c0d03deacc1d021bdd1e27df94a1b348"
   title=
   "Changeset [02900cc0c0d03deacc1d021bdd1e27df94a1b348]">[02900cc0c0d03deacc1d021bdd1e27df94a1b348]</a>)
   Closes <a href="/projects/32238/tickets/650" title=
   "Ticket #650">#650</a>: Set contentMode to redraw on boundary
   change. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/02900cc0c0d03deacc1d021bdd1e27df94a1b348" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/02900cc0c0d03deacc1d021bdd1e27df94a1b348</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/02900cc0c0d03..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/02900cc0c0d03...</a></a></p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-650.json">JSON Source</a></p>