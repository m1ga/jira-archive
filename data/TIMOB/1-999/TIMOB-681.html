---
title: "[TIMOB-681] Android: Improve SDK detection and reporting."
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:53:54.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android</td></tr>
<tr><th>Reporter</th><td>Don Thorp</td></tr>
<tr><th>Assignee</th><td>Marshall Culpepper</td></tr>
<tr><th>Created</th><td>2011-04-15T02:34:19.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:53:54.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>To help cut down on the number of support requests, it would be
helpful to have builder.py detect and report more information.</p>
<p>1) The SDK field is filled in, if not display a message
directing them to the profile page to set the location.</p>
<p>2) If the SDK directory is specified, insure that its directory
contains<br></p>
<pre>
<code>a) addons
b) platforms
c) tools</code>
</pre>
<p>If not, walk backward up the directory tree and reperform the
test until you're at the root directory, don't have permissions, or
a matching directory is found. If a matching directory is found,
display a message that it is configured incorrectly and show the
path they should use insted. If not found, ask them to set the path
manually and direct them to the profile page.</p>
<p>3) If the SDK directory is correct, verify that the tools
directory contains<br></p>
<pre>
<code>a) adb
b) android</code>
</pre>
<p>If not then display a message saying that the directory does not
have the tools required for and they may need to install.</p>
<p>4) If the SDK directory is correct, test for required platform
for building. Using the directory mapper test for the presence of
aapt and/or dx.</p>
<p>5) Validate the version of Java. Several people are still on
Leopard and have 1.5 and not 1.6.</p>
<p>It might be beneficial to output a message for each of the tests
that pass (e.g. <a href="/projects/32238/changesets/INFO" title=
"Changeset [INFO]">[INFO]</a> adb : OK, or <a href=
"/projects/32238/changesets/ERROR" title=
"Changeset [ERROR]">[ERROR]</a> dx : FAIL)</p></div>

<h3>Comments</h3>

<ol>
<li>Don Thorp 2011-04-15

   <div><p>Also test for valid versions of tools <a href=
   "<a href="http://developer.appcelerator.com/question/15151/windows-xp-and-classnotfoundexception-with-titanium-dev-121" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/15151/windows-xp-and-classnotfoundexception-with-titanium-dev-121</a>">
   Q&amp;A</a></p></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/9d6b034b42c14af2a2126e30b65b1663eed082fa"
   title=
   "Changeset [9d6b034b42c14af2a2126e30b65b1663eed082fa]">[9d6b034b42c14af2a2126e30b65b1663eed082fa]</a>)
   added better device/emulator detection in the AndroidSDK module
   [<a href="/projects/32238/tickets/681" title=
   "Ticket #681">#681</a>] <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/9d6b034b42c14af2a2126e30b65b1663eed082fa" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/9d6b034b42c14af2a2126e30b65b1663eed082fa</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/9d6b034b42c14..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/9d6b034b42c14...</a></a></p></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/b9bfce3a14a62b8cebb0bbe53199e87e1b84e650"
   title=
   "Changeset [b9bfce3a14a62b8cebb0bbe53199e87e1b84e650]">[b9bfce3a14a62b8cebb0bbe53199e87e1b84e650]</a>)
   use more tolerant classname / activity name generation (this should
   strip dots, spaces, and generally anything not allowed in a
   classname) [<a href="/projects/32238/tickets/681" title=
   "Ticket #681">#681</a>] <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/b9bfce3a14a62b8cebb0bbe53199e87e1b84e650" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/b9bfce3a14a62b8cebb0bbe53199e87e1b84e650</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/b9bfce3a14a62..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/b9bfce3a14a62...</a></a></p></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>This commit to developer does most of the validation work:<br>
   <a href=
   "<a href="http://github.com/appcelerator/titanium_developer/commit/23b84ff94dbabdc09f4904a182b690d1a481010a" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_developer/commit/23b84ff94dbabdc09f4904a182b690d1a481010a</a>">
   <a href="http://github.com/appcelerator/titanium_developer/commit/23b84ff94d..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_developer/commit/23b84ff94d...</a></a></p></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/50bfa0b298c29e6a4fc364261233a882139856f2"
   title=
   "Changeset [50bfa0b298c29e6a4fc364261233a882139856f2]">[50bfa0b298c29e6a4fc364261233a882139856f2]</a>)
   check java version on each launch, get prereq back to working like
   it should (and also check for java 1.6) [<a href=
   "/projects/32238/tickets/681" title="Ticket #681">#681</a>
   state:resolved] <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/50bfa0b298c29e6a4fc364261233a882139856f2" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/50bfa0b298c29e6a4fc364261233a882139856f2</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/50bfa0b298c29..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/50bfa0b298c29...</a></a></p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-681.json">JSON Source</a></p>