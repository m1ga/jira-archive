---
title: "[TIMOB-71] Implement TableView data updating (Android)"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:51:53.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 0.6.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android</td></tr>
<tr><th>Reporter</th><td>Don Thorp</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T02:23:20.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:51:53.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Here are commits <a href=
"<a href="http://github.com/appcelerator/titanium_mobile/commit/00022a41e290a6b22a21f2f12b42527a5343b2c0" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/00022a41e290a6b22a21f2f12b42527a5343b2c0</a>">
<a href="http://github.com/appcelerator/titanium_mobile/commit/00022a41e290a..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/00022a41e290a...</a></a><br>
<a href=
"<a href="http://github.com/appcelerator/titanium_mobile/commit/dfaf1ed0c05c7eea0cac0e53291a75fff040a920" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/dfaf1ed0c05c7eea0cac0e53291a75fff040a920</a>">
<a href="http://github.com/appcelerator/titanium_mobile/commit/dfaf1ed0c05c7..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/dfaf1ed0c05c7...</a></a><br>
And and email to try and figure out what the API is.</p>
<p>These are all the features that we can access for the iPhone.
Whether or not we do is what I'd like to consider.
ReloadRowsAtIndexPaths would be useful for single or several rows'
data changing, in an animated way. Insert rows and delete rows are
similarly important to expose. I'd really not want to simply change
the javascript object and bulk upload again, because 1) the JSON
encoding is expensive, 2) the JSON decoding is expensive, 3)
-[reloadData] on a UITableView is expensive, 4) doing -[reloadData]
during an animation or user interaction puts the UITableView into a
very strange/buggy/unresponsive state.</p>
<p>However, it might be good to not expose beginUpdates and
endUpdates, unless doing multiple row animated edits simultaneously
causes crashing.<br>
- Hide quoted text -</p>
<p>On Jul 28, 2009, at 9:26 PM, Don Thorp wrote:</p>
<blockquote>
<p>it seems complex, could we not simply do a setData and take in a
new model? Maybe with a selected item?</p>
<p>On Tue, Jul 28, 2009 at 11:18 PM, Blain Hamon
<a>bhamon@appcelerator.com</a> wrote:</p>
<pre>
<code>I started working on allowing modification of TableView after its creation. I found and squished a few bugs that were introduced when I added views to userWindows.
Here are the native iPhone commands:

- (void)reloadRowsAtIndexPaths:(NSArray*)indexPaths withRowAnimation:(UITableViewRowAnimation)animation
- (void)insertRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation
- (void)deleteRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation

These are obvious ones to keep, but importance should be placed in that these actions, if not atomic or are delayed, are kept properly serial as to avoid race conditions.

- (void)reloadSections:(NSIndexSet*)sectionswithRowAnimation:(UITableViewRowAnimation)animation
- (void)insertSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation
- (void)deleteSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation

These I'm not so sure about how to expose them, or if they are only for sectioned views, or are they done automatically, but they would be needed when the header and footer are changed.

- (void)selectRowAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated scrollPosition:(UITableViewScrollPosition)scrollPosition
- (void)deselectRowAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated

These might be useful, although for the most part, we already control this (The deselection is done during a click, and selection is only by the user's actions)

- (void)beginUpdates
- (void)endUpdates

This becomes a sticky wicket, as beginUpdates delay all the actions/animations as well as the reindexing.

So given rows of [A, B, C]
and delete of index 0 and 1, without beginUpdates and endUpdates, would be:
[A,B,C] -&gt; delete index 0
[B,C] -&gt; delete index 1
[B]

vs.

[A,B,C] -&gt; beginUpdates
[A,B,C] -&gt; delete index 0
[A,B,C] -&gt; delete index 1
[A,B,C] -&gt; endUpdates
[C]</code>
</pre></blockquote></div>

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-71.json">JSON Source</a></p>