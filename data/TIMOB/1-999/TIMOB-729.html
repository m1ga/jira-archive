---
title: "[TIMOB-729] Android: KS auth error in twitter / mashup example"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:54:03.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android</td></tr>
<tr><th>Reporter</th><td>Marshall Culpepper</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T02:35:16.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:54:03.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Relevant error from log:<br>
04-06 03:12:54.182: WARN/DefaultRequestDirector(17082):
Authentication error: Unable to respond to any of these challenges:
{}</p></div>

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-04-15

   <div><p>I'm havin a go at this (just mentioning so we don't duplicate
   effort)</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>Kudos to Don for suggesting to me to comment-out the
   TiHTTPClient.java line that sets
   setRequestHeader("X-Requested-With","XMLHttpRequest");. Twitter
   works after that.</p>
   <p>i checked the Ti iPhone SDK. In TiNetworkHTTPClientProxy.m, the
   user agent is set, but not X-Requested-With. Do we really need
   X-Requested-With?</p>
   <p>(Interestingly, this command line works for me, so Im not sure
   what is going on at the Twitter end to reject the calls we were
   making):</p>
   <p>curl -H "X-Requested-With: XMLHttpRequest" "<a href=
   "<a href="http://username:password@twitter.com/statuses/friends_timeline.json?count=5&quot" rel="nofollow" target="_blank">http://username:password@twitter.com/statuses/friends_timeline.json?count=5&quot</a>;;"><a href="http://username:password@twitter.com/statuses/friends_timeline.json..." rel="nofollow" target="_blank">http://username:password@twitter.com/statuses/friends_timeline.json...</a></a>"</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>Addendum: Worried as I was that maybe there also might be an
   angle involved with the Apache HTTP client (which Android uses), I
   changed Ti iphone sdk's TiNetworkHTTPClientProxy.m to set the
   "X-Requested-With", and indeed it failed. So that just confirms
   that the Apache HTTP client is NOT the culprit. The error occurs
   "cross-platform" when that X-Requested-With header is included.</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/c6731d8c21f8485795ab32bc1fba97a73dbd40ec"
   title=
   "Changeset [c6731d8c21f8485795ab32bc1fba97a73dbd40ec]">[c6731d8c21f8485795ab32bc1fba97a73dbd40ec]</a>)
   [<a href="/projects/32238/tickets/729" title="Ticket #729">#729</a>
   state:resolved] Auth failure with twitter is fixed by removing the
   the X-Request-With header. Thanks to @billdawson for tracking this
   down. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/c6731d8c21f8485795ab32bc1fba97a73dbd40ec" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/c6731d8c21f8485795ab32bc1fba97a73dbd40ec</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/c6731d8c21f84..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/c6731d8c21f84...</a></a></p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/c883ec4ec485ea88552d8eb33d29b2383abce66e"
   title=
   "Changeset [c883ec4ec485ea88552d8eb33d29b2383abce66e]">[c883ec4ec485ea88552d8eb33d29b2383abce66e]</a>)
   [<a href="/projects/32238/tickets/729" title="Ticket #729">#729</a>
   state:resolved] Updated to conditionally not send the
   X-Requested-With header if twitter.com <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/c883ec4ec485ea88552d8eb33d29b2383abce66e" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/c883ec4ec485ea88552d8eb33d29b2383abce66e</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/c883ec4ec485e..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/c883ec4ec485e...</a></a></p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-729.json">JSON Source</a></p>