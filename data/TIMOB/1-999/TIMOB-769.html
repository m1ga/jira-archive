---
title: "[TIMOB-769] searchBar issues"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:54:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.3.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>apidoc, documentation</td></tr>
<tr><th>Reporter</th><td>Nolan Wright</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-04-15T02:36:00.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:54:11.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>showCancel is being ignored - the cancel button is shown on
focus of the search bar</p>
<p>search bar also hides after row selection even when searchHidden
is false. if searchHidden is false, the search bar should be always
visible.</p></div>

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2011-04-15

   <div><p>Part (2) seems to be false (a 'works for me'). Part (1) might be
   illegal; the 'cancel' button stops the search and unloads the table
   view. Even if showsCancel is set to 0 on the search bar, the table
   seems to want to display it anyway. Would have to look more into
   it.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>First part of the bug is, in fact, illegal.
   UISearchDisplayController autosets the showsCancelButton to YES,
   and although we can cache the original value, set it, and
   redisplay, the 'cancel' button still shows up for a second,
   creating an inconsistent (and ugly) UI. We'll just have to say that
   this is a misfeature.</p>
   <p>Second part is still a 'works for me.'</p>
   <p>Marking as invalid. Please inform me if there are additional
   problems.</p></div></li>
<li>Nolan Wright 2011-04-15

   <div><p>run this example:</p>
   <p>it does look like the hide went away. but the showCancel:false
   is not working and now search does not seem to work - i.e., the
   results are not limited by matching rows</p>
   <p>var win = Titanium.UI.createWindow();</p>
   <p>// create table view data object var data = [];</p>
   <p>data[0] = Ti.UI.createTableViewRow({hasChild:true,title:'Row
   1'});<br>
   data[1] = Ti.UI.createTableViewRow({hasDetail:true,title:'Row
   2'});<br>
   data[2] = Ti.UI.createTableViewRow({hasCheck:true,title:'Row
   3'});<br>
   data[3] = Ti.UI.createTableViewRow({title:'Row 4'});</p>
   <p>var search = Titanium.UI.createSearchBar({<br></p>
   <pre>
   <code>barColor:'#385292',
   showCancel:false</code>
   </pre>
   <p>}); search.addEventListener('change', function(e)<br>
   { e.value // search string as user types });
   search.addEventListener('return', function(e)<br>
   { search.blur(); }); search.addEventListener('cancel',
   function(e)<br>
   { search.blur(); });</p>
   <p>// create table view var tableview =
   Titanium.UI.createTableView({<br></p>
   <pre>
   <code>data:data,
   search:search,</code>
   </pre>
   <p>});</p>
   <p>// create table view event listener
   tableview.addEventListener('click', function(e)<br>
   {</p>
   <pre>
   <code>// event data
   var index = e.index;
   var section = e.section;
   var row = e.row;
   var rowdata = e.rowData;
   Titanium.UI.createAlertDialog({title:'Table View',message:'row ' + row + ' index ' + index + ' section ' + section  + ' row data ' + rowdata}).show();</code>
   </pre>
   <p>});</p>
   <p>win.add(tableview);<br>
   win.open();</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>You're right, search doesn't appear to work - but this might be
   a more general issue where search just doesn't work (meaning it
   could have difficulty pulling certain information out of a
   tableview; I'd have to look into it). Feel free to create a bug for
   this and I'll look into it.</p>
   <p>As mentioned above, setting showCancel:false is overridden by
   the UISearchDisplayControl for (probably bad) reasons, but it's set
   at a point before we can interact with the search bar and clear the
   'cancel' button out - and the button is already displayed at this
   point. This creates an ugly UI inconsistency where the search bar
   appears to have a 'cancel' option, but then suddenly doesn't. I can
   change this if you'd like.</p>
   <p>There might be an undocumented API for this but undocumented
   APIs are bad juju. Keeping the bug 'invalid' until we've got an
   answer.</p></div></li>
<li>Nolan Wright 2011-04-15

   <div><p>the search within the table view has always worked - so
   something has changed recently (since 1.2.0) to break it.</p>
   <p>the showCancel problem is also a new problem (since 1.2.0).</p>
   <p>both need to be addressed</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Reopening. Didn't see Nolan's comment earlier in the month.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Okay, this really does appear to have been fixed now. I tested
   Nolan's JS and it worked.</p></div></li>
<li>Ygor Lemos 2011-04-15

   <div><p>searchHidden parameter work but it is still not documented on
   official API !</p>
   <p>Check: <a href=
   "<a href="http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.UI.SearchBar-object" rel="nofollow" target="_blank">http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.UI.SearchBar-object</a>">
   <a href="http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.UI...." rel="nofollow" target="_blank">http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.UI....</a></a></p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-769.json">JSON Source</a></p>