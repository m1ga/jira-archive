---
title: "[TIMOB-786] crash using 'this' in removeEventListener"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2011-04-15T02:36:25.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.4.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Nolan Wright</td></tr>
<tr><th>Assignee</th><td>Jeff Haynie</td></tr>
<tr><th>Created</th><td>2011-04-15T02:36:22.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-02T18:40:41.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>add this code to app.js</p>
<p>Ti.App.addEventListener('hello', function(){<br></p>
<pre>
<code>Ti.API.info('Hello event fired!');
Ti.App.removeEventListener('hello', this);</code>
</pre>
<p>});</p>
<p>Ti.App.fireEvent('hello');</p></div>

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2011-04-15

   <div><p>Worse than expected. The 'this' symbol does not play nice in a
   lot of situations.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Okay, see <a href=
   "<a href="http://www.quirksmode.org/js/this.html" rel="nofollow" target="_blank">http://www.quirksmode.org/js/this.html</a>"><a href="http://www.quirksmode.org/js/this.html" rel="nofollow" target="_blank">http://www.quirksmode.org/js/this.html</a></a>.
   Apparently 'this' is supposed to screw up if you don't use it when
   a function is bound to an object, but we should still consider it a
   (low-priority) issue.</p></div></li>
<li>Justin 2011-04-15

   <div><p>I have windows with events that I would like to fire only once.
   I'm using the code pattern above to remove the event promptly, but
   it crashes at removeEventListener. Know of a workaround?</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>I think this will do what you want (let me know if it
   doesn't):</p>
   <pre>
   <code>a.addEventListener('action', function(e) {
      // Do stuff
      Ti.App.removeEventListener('action', e.source);
   }</code>
   </pre>
   <p>This will probably have to be the pattern you use in the future
   as well. 'this' support in event listeners was erroneous in 0.8
   because an event listener isn't REALLY a function attached to an
   object (see the link in the above comments for more).</p></div></li>
<li>Justin 2011-04-15

   <div><p>That works. Thanks Stephen!</p></div></li>
<li>Justin 2011-04-15

   <div><p>Whoops, I take that back. It doesn't seem to work.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Can you give me any additional information about the failure, or
   is it just that the event listener isn't removed? I can create a
   bug for this if there isn't one already.</p></div></li>
<li>Justin 2011-04-15

   <div><p>The event listener appeared not to be removed.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Thanks for the information. I've created <a href=
   "/projects/32238/tickets/1043" title="Ticket #1043">#1043</a> and
   will address the issue as quickly as I can.</p></div></li>
<li>Justin 2011-04-15

    <div><p>Thanks Stephen</p></div></li>
<li>Stephen Tramer 2011-04-15

    <div><p>Justin, I updated <a href="/projects/32238/tickets/1043" title=
    "Ticket #1043">#1043</a> with some sample code that shows how to
    appropriately remove an event listener. Please let me know if it
    doesn't work for you in that ticket, and re-open it if
    necessary.</p></div></li>
<li>Justin 2011-04-15

    <div><p>Currently using that, thanks Stephen.</p></div></li>
<li>Stephen Tramer 2011-04-15

    <div><p>See <a href="/projects/32238/tickets/1043" title=
    "Ticket #1043">#1043</a>. Also, functions in event listeners do not
    belong to an object; they're callbacks. Marking this invalid.</p></div></li>
<li>Lee Morris 2017-03-02

    Closing as invalid.</li>
</ol>


<p><a href="/TIMOB/TIMOB-786.json">JSON Source</a></p>