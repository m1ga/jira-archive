---
title: "[TIMOB-846] iOS: Dynamically setting row header (or removing) in table view = not work"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2017-06-07T22:28:05.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Nolan Wright</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2011-04-15T02:37:45.000+0000</td></tr>
<tr><th>Updated</th><td>2017-06-07T22:28:05.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>from premium ticket:</p>
<p><a href=
"<a href="http://helpdesk.appcelerator.net/tickets/1467" rel="nofollow" target="_blank">http://helpdesk.appcelerator.net/tickets/1467</a>"><a href="http://helpdesk.appcelerator.net/tickets/1467" rel="nofollow" target="_blank">http://helpdesk.appcelerator.net/tickets/1467</a></a></p>
<p>code:</p>
<p>var data = [];<br>
var win = Ti.UI.createWindow();<br>
// Add filler data. // sort1 = index for this row if sorted by row
number // sort2 = index for this row if reverse sorted by row
number</p>
<p>for(var i = 0; i &lt; 100; i++)<br>
{</p>
<pre>
<code>data.push({title:'Row '+i, sort1:i, sort2:(99 - i)});</code>
</pre>
<p>}</p>
<p>// Add headers for default view based on first digit of row
number.</p>
<p>var prev = -1;</p>
<p>for(i = 0; i &lt; data.length; i++)<br>
{</p>
<pre>
<code>var v = Math.floor(parseInt(data[i].sort1, 10) / 10);

if(v != prev)
{
    prev = v;
    data[i].header = ''+v;
}</code>
</pre>
<p>}</p>
<p>// Create table view.</p>
<p>var tableView = Ti.UI.createTableView({data:data,
top:50,height:300});<br>
win.add(tableView);</p>
<p>// Create button to swap between sorted data sets.</p>
<p>var b =
Ti.UI.createButton({title:'Sort',top:10,height:30,width:300});<br>
b.addEventListener('click', function(e)<br>
{</p>
<pre>
<code>sortData(tableView);</code>
</pre>
<p>}); win.add(b);</p>
<p>// Swap between data sets for specified tableView.</p>
<p>function sortData(tv)<br>
{</p>
<pre>
<code>var newdata = [];
var sections = tv.data;

// Retrieve current data set.

for(var i = 0; i &lt; sections.length; i++)
{
    var section = sections[i];

    for(var j = 0; j &lt; section.rowCount; j++)
    {
        var row = section.rows[j];

        // Insert old row at the correct sorted position in the new array.
        newdata[row.sort2] = row;

        // Delete any existing header for this row so we don't munge headers from both data sets.
        delete newdata[row.sort2].header;
    }
}

// Add headers for newdata based on first digit of sort2.
var prev = -1;

for(i = 0; i &lt; newdata.length; i++)
{
    var v = Math.floor(parseInt(newdata[i].sort2, 10) / 10);

    if(v != prev)
    {
        prev = v;
        newdata[i].header = ''+v;
    }
}

// Update tableView with newdata.
tv.setData(newdata);</code>
</pre>
<p>}</p>
<p>win.open();</p></div>

<h3>Comments</h3>

<ol>
<li>Thomas Huelbert 2011-04-15

   <div><p>valid, needs testcase</p></div></li>
<li>Vikramjeet Singh 2011-08-04

   Bug Scrub: Valid. No test Case exists
   
   Note: Row header does not change dynamically after sorting the rows in a reverse order.
   
   Tested On: 
   Mac OSX Lion 
   TiMob Version: 1.7.2 
   TiStud Version: 1.0.2 
   
   Devices used: 
   iPhone 4.3.4</li>
<li>Lee Morris 2017-06-07

   Closing ticket due to time passed and lack of work.</li>
</ol>


<p><a href="/TIMOB/TIMOB-846.json">JSON Source</a></p>