---
title: "[TIMOB-923] Android: Test getCurrentPosition() w/o Location enabled"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2012-07-25T15:27:42.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect</td></tr>
<tr><th>Reporter</th><td>Don Thorp</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-04-15T02:39:16.000+0000</td></tr>
<tr><th>Updated</th><td>2012-07-27T08:59:41.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>See <a href=
"<a href="http://developer.appcelerator.com/question/24571/get-user-location-not-working" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/24571/get-user-location-not-working</a>">
Q&amp;A</a></p>
<p>Basically he put a try/catch around getCurrentPosition() because
it throws an error if Location is not available. This may be
working correctly. Just needs to be verified.</p>
<p>If working as it should, mark ticket invalide.</p></div>

<h3>Comments</h3>

<ol>
<li>Matthew Lenton 2011-04-15

   <div><p>This appears to be quite valid, since the exception is raised
   due to:<br>
   (from ti.modules.titanium.geolocation.TiLocation.java)</p>
   <ul>
   <li>
   <p>precondition: GPS is switched off on device</p>
   </li>
   <li>
   <p>getCurrentPosition is called in the TiLocation module</p>
   </li>
   <li>
   <p>getLastKnownLocation is null, since GPS is off</p>
   </li>
   <li>
   <p>resulting location variable is null</p>
   </li>
   <li>
   <p>exception "location currently unavailable' is raised</p>
   </li>
   </ul>
   <p>..and rightly so: the result of getLastKnownLocation is null, so
   an exception is raised. Seems logical to me.</p>
   <p>If this kind of call is allowed and the exception should not be
   raised, suggest removing the exception in this case.</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>Look through the iPhone classes and see if you can locate what
   they do in a similar instance. IIRC this "worked" as in didn't
   throw an exception on iPhone, but did on Android. The expected
   behavior is probably to never throw an exception but to put any
   errors into the error object and call it instead.</p></div></li>
<li>Matthew Lenton 2011-04-15

   <div><p>I've verified that in Geolocation.m there is no exception
   thrown.</p></div></li>
<li>Ping Wang 2012-07-25

   Cannot reproduce.</li>
</ol>


<p><a href="/TIMOB/TIMOB-923.json">JSON Source</a></p>