---
title: "[TIMOB-1066] Window.remove does not remove the view from memory"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:55:06.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.4.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>defect, ios, iphone, remove, view</td></tr>
<tr><th>Reporter</th><td>ctredway</td></tr>
<tr><th>Assignee</th><td>Reggie Seagraves</td></tr>
<tr><th>Created</th><td>2011-04-15T02:43:02.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:55:06.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>A customer reported that if he created a view in a window and
then removed that view, he could add it back. I tried the following
code provided from the customer and it does only remove the view
from view, not from memory.</p>
<p>var room = Ti.UI.createView({<br>
borderRadius:5,borderWidth:1,borderColor:'#336699',<br>
backgroundColor:'#ffffff',<br>
width:Titanium.App.Properties.getString("rwidth"),<br>
height:Titanium.App.Properties.getString("rlength"),<br>
left:5,<br>
top:5<br>
}); SplitViewPlain.detailWindow.add(room);</p>
<p>var alt2 = Ti.UI.createButton({<br>
left:100,<br>
bottom:5,<br>
height:70,<br>
width:70,<br>
borderRadius:35,<br>
title:'alt2',<br>
backgroundColor:'#ff0000'<br>
}); alt2.addEventListener('click', function()<br>
{ SplitViewPlain.detailWindow.remove(room);<br>
Ti.API.info(alt2);<br>
}); var alt3 = Ti.UI.createButton({<br>
left:180,<br>
bottom:5,<br>
height:70,<br>
width:70,<br>
borderRadius:35,<br>
title:'alt2',<br>
backgroundColor:'#ff0000'<br>
}); alt3.addEventListener('click', function()<br>
{ SplitViewPlain.detailWindow.add(room);<br>
Ti.API.info(alt3);<br>
});</p></div>

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2011-04-15

   <div><p>Okay, there are two ways to take this:</p>
   <ul>
   <li>Removing a view should destroy it forever, and it should never
   come back</li>
   <li>Removing a view should release the memory associated with
   it</li>
   </ul>
   <p>(1) should never happen. (2) should only happen on a memory
   panic.</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/c910323037d1ce1ef5d8cba6c816d77961beb1b6"
   title=
   "Changeset [c910323037d1ce1ef5d8cba6c816d77961beb1b6]">[c910323037d1ce1ef5d8cba6c816d77961beb1b6]</a>)
   Closes <a href="/projects/32238/tickets/1066" title=
   "Ticket #1066">#1066</a> (sort of): Views released on memory panic
   if we're able. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/c910323037d1ce1ef5d8cba6c816d77961beb1b6" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/c910323037d1ce1ef5d8cba6c816d77961beb1b6</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/c910323037d1c..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/c910323037d1c...</a></a></p></div></li>
<li>ctredway 2011-04-15

   <div><p>Here is my opinion on <a href="/projects/32238/tickets/1" title=
   "Ticket #1">#1</a>. coming from a flex background, when I removed
   an object from a container, view, etc, I wanted it gone, not just
   partially removed. I know lots of people want this same
   functionality as well. Here is scenario. If I have a rather
   complex, heavy view/window, and I want it removed to free up
   memory, I want it gone, destroyed etc..</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>If you want to free up the memory that way, here's how it
   happens.</p>
   <ul>
   <li>I remove the view from the screen with remove(). At this point,
   I can ASSUME, but do not need to know, that it has been removed
   from memory.</li>
   <li>The view stays in memory, so that if it is re-added as a
   subview, there is no delay in doing so.</li>
   <li>IF there is a memory panic, THEN the view is deallocated (as
   long as it's not being displayed somewhere).</li>
   </ul>
   <p>Even if we immediately deallocated the view upon remove(), this
   does NOT invalidate the object which was removed. If the user truly
   wishes to do that, they can use a remove()/delete combination.</p>
   <p>Think of remove() as lazy-unload. Unloading a view on demand is
   dangerous and could lead to performance problems.</p></div></li>
<li>Blain Hamon 2011-04-15

   <div><p>The lazy unload is actually very common, if not essential for
   the iPhone. That is, it's a perfectly valid action to remove a
   view, yet hold onto it, to put it into a different view, or to
   re-add it at a later time, releasing ONLY when there's a memory
   panic.</p>
   <p>You can see this in action in Apple's own code, such as tab
   views and navigation views, where the underlying action for a tab
   change or pushing or popping a view literally is to remove the
   previous view from, er, view, signaled by a -[viewDidDisappear:]
   method. The owning viewcontroller does not release the unattached
   views until a memory panic, triggering the -[viewDidUnload] method,
   which may never need to happen.</p></div></li>
<li>ctredway 2011-04-15

   <div><p>Ok, then remove is not really a true remove, but rather a hide
   until the os decides it needs to go.</p>
   <p>Tab and Navigation views are the exception in my mind. I relate
   those to a ViewStack or a TabNavigator in Flex in which we have a
   stack of views and each controls their own children. but if inside
   one of the stacks, I need to remove something, then it's gone.</p>
   <p>I can see not destroying windows, especially if they are linked
   to any type of navigation type group. I am mainly thinking of Views
   and controls. I will chalk this one up to just being a different
   platform and treat it as such.</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-1066.json">JSON Source</a></p>