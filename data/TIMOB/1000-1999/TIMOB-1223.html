---
title: "[TIMOB-1223] Dynamic properties not carried across contexts"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:55:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, blackberry, defect</td></tr>
<tr><th>Reporter</th><td>Bill Dawson</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T02:46:58.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:55:34.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>By "dynamic properties" here we mean "unofficial" (unregistered)
properties, such as if a developer just sets a property in JS on
one of our proxies, like:</p>
<pre>
<code class="javascript">var win = Ti.UI.createWindow();
win.secret = "my secret message";</code>
</pre>
<p>"secret" is not a registered property of WindowProxy. In
Android/BB, we handle the assignment by passing it on to the
scriptable -- we don't give it to the proxy. Later, if the proxy is
wrapped again into a different KrollObject, and code tries to get
the property value, it will fail.</p>
<p>This happens with currentWindow, for example, when a new context
is created for a window and then Ti.UI.currentWindow is set to a
wrapped instance of that window proxy. Here's a complete fail case
example:</p>
<p>File: app.js<br></p>
<pre>
<code class="javascript">// ....
var win = Ti.UI.createWindow({url:'win1.js'});
win.secret = "My secret message";
Ti.API.info(win.secret); // ok -- .secret is on the scriptable
win.open(); // causes new context win1.js</code>
</pre>
<p>File: win1.js<br></p>
<pre>
<code class="javascript">var win = Ti.UI.currentWindow;
Ti.API.info(win.secret); // fails -- currentWindow is different scriptable than win was in previous context</code>
</pre>
<p>In our iPhone/iPad implementation, these unregistered properties
are put right into the proxy's (target's) dynprops collection and
are therefore available even if the proxy gets wrapped into a
different scriptable.</p></div>

<h3>Comments</h3>

<ol>
<li>Don Thorp 2011-04-15

   <div><p>This is related to <a href="/projects/32238/tickets/1005" title=
   "Ticket #1005">#1005</a> as well.</p></div></li>
<li>Matthew Lieder 2011-04-15

   <div><p>To help with prioritizing, I just want to note that I (and
   others too) are currently being stymied by this problem and are
   eagerly looking forward to "Passing Data" being supported on
   Android and BlackBerry (see <a href=
   "<a href="http://developer.appcelerator.com/helpdesk/view/28391)" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/28391)</a>"><a href="http://developer.appcelerator.com/helpdesk/view/28391)" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/28391)</a></a>.</p></div></li>
<li>bxgrant 2011-04-15

   <div><p>+1 for prioritizing this in 1.5. It makes it difficult to create
   meaningful abstractions for enterprise apps without this
   functionality.</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>There are a few cases where this will work. We are adding
   features for Android where this will absolutely not work by design.
   Please don't rely on it as a silver bullet. Blackberry may have
   some of the same restrictions but in different areas.</p></div></li>
<li>Matthew Lieder 2011-04-15

   <div><p>So how will child contexts be able to access data from their
   parent context? Only through manual Ti.API.Properties calls? Or
   will I need to have it fire an event on the parent that fires an
   event back on the child, passing it the data? Neither of those two
   options seems like something that should be done (let alone the
   only way to get something done) in a modern framework...</p></div></li>
<li>Matthew Lieder 2011-04-15

   <div><p>Do you have any guess yet as to when you'll be able to code a
   fix for this? Trying to gauge if it's worth waiting for the fix or
   if we'll need to make the time to rearchitect our code around this
   problem.</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>Marshall is actively working on the required refactor to support
   this capability.</p></div></li>
<li>dailynerd 2011-04-15

   <div><p>Thank you for increasing the priority, a fix for this would be
   great!</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>This should be fixed by <a href="/projects/32238/tickets/915"
   title="Ticket #915">#915</a></p></div></li>
<li>Matthew Lieder 2011-04-15

    <div><p>Thank you! Confirmed fixed on Android 2.1.</p></div></li>
<li>Thomas Huelbert 2011-04-15

    <div><p>confirmed iOS 4.0.2 and 3.1.2. Android 2.2. Thanks for
    confirming 2.1 Matthew!</p></div></li>
<li>Matthew Lieder 2011-04-15

    <div><p>FYI parts of this fix appear to have regressed in master
    (1.5.0); see <a href="/projects/32238/tickets/2221" title=
    "Ticket #2221">#2221</a>.</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-1223.json">JSON Source</a></p>