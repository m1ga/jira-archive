---
title: "[TIMOB-1242] iOS: Drag and drop map pin annotations"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-04-23T12:18:33.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.2, Release 2.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.0, Sprint 2012-09 API</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>api, dr-list, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Roger Chapman</td></tr>
<tr><th>Assignee</th><td>Neeraj Gupta</td></tr>
<tr><th>Created</th><td>2011-04-15T02:47:30.000+0000</td></tr>
<tr><th>Updated</th><td>2012-06-07T11:38:06.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>MKAnnotationView has support for allowing a map annotation to be
draggable (in iOS 4).<br>
Boolean property on Annotation object - draggable:true/false<br>
Add associated Events - e.g. DragStart &amp; DragEnd etc.</p></div>

<h3>Comments</h3>

<ol>
<li>yury 2011-04-15

   <div><p>blocking feature</p></div></li>
<li>yury 2011-04-15

   <div><p>Fix in pull request <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/pull/53" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/53</a>"><a href="https://github.com/appcelerator/titanium_mobile/pull/53" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/53</a></a><br>
   Currently iOS &gt;= 4.0 only.</p></div></li>
<li>examp 2011-04-15

   <div><p>Is this confirmed to work? I just tested it and the demo does
   not work in simulator or iphone 4 OS4.3. SDK 4.2, Titanium 1.6</p></div></li>
<li>Borming 2011-04-15

   <div><p>Works in 1.6.0 with yury fix, but not in 1.6.1</p>
   <p>Any news on this feature, our project depends on it.</p></div></li>
<li>Aaron K. Saunders 2011-07-15

   wondering what it is going to take to get some movement on this issue</li>
<li>Anirudh Nagesh 2011-08-12

   <h4>Associated Helpdesk ticket</h4>
   <a href="http://support-admin.appcelerator.com/display/10619" rel="nofollow" target="_blank">http://support-admin.appcelerator.com/display/10619</a></li>
<li>Paul Dowsett 2011-12-02

   Reassigning this ticket with several watchers, due to Reggie's absence.</li>
<li>Kevin Whinnery 2012-01-17

   Community pull request is <a href="https://github.com/appcelerator/titanium_mobile/pull/1193" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/1193</a>
   
   As of today still needs:
   - Code review
   - docs
   - tests</li>
<li>Onur YALAZI 2012-01-30

   I've written android drag/drop annotation support on github. But I think it's still buggy and colliding with onTap events. Could anybody review the code and give ideas to work out it's problems? 
   
   the diff is at: <a href="https://github.com/fsniper/titanium_mobile/commit/a29b1c858161ff54d9aaad10c0c90a7bb1ff653e" rel="nofollow" target="_blank">https://github.com/fsniper/titanium_mobile/commit/a29b1c858161ff54d9aaad10c0c90a7bb1ff653e</a></li>
<li>Nikolai Derzhak 2012-02-06

    This issue latest notification was not sent due to JIRA mail setting. Fixed now. Please check the issue for latests changes.</li>
<li>Rafael Kellermann Streit 2012-02-09

    I made this pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/1193" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/1193</a>
    
    Why didn't was accepted yet? :-(</li>
<li>Neeraj Gupta 2012-02-09

    This pull request has been scheduled to be reviewed in next 2 weeks.</li>
<li>Rafael Kellermann Streit 2012-02-10

    Nice, thanks Neeraj! :-)</li>
<li>Rafael Kellermann Streit 2012-02-10

    Just one observation: Since I made that pull request, some files were changed (TiMapView.h, for example). But, if you put my different lines in the new file,  will work fine.</li>
<li>Neeraj Gupta 2012-02-14

    Estimated effort includes defining and implementing the same behavior on both iOS and Android platforms.</li>
<li>MAIRDUMONT GmbH & Co. KG 2012-02-15

    Hello Neeraj or Rafael,
    
    a question to better understand this feature:
    Will one result of drag&dropping the map pin annotation be the geocode of the new location visualized by the pin?
    I imagine the annotation's properties latitude and longitude then will be updated so one can use them for let's say forward geocoding or so.</li>
<li>Rafael Kellermann Streit 2012-02-15

    Hello MAIRDUMONT,
    
    Yes, the latitude/longitude of annotation will be updated when the user drag&drop the annotation.
    
    The user have to click in the annotation by 1 second and drop in another place. Then, the annotation will have the latitude/longitude from the other place. :-)</li>
<li>Rafael Kellermann Streit 2012-02-23

    Neeraj, is missing something to apply this PR?
    
    Thanks,</li>
<li>Neeraj Gupta 2012-02-23

    @Rafael - we are a little behind processing these pull requests. We hope to get to your pull request in a week or so.</li>
<li>Neeraj Gupta 2012-03-09

    This PR only covers iOS functionality so we need to design and implement the same functionality for Android and Mobile Web platforms. We will process this PR once we scope it out for all platforms.</li>
<li>Rafael Kellermann Streit 2012-03-14

    I made a new pull request to it.
    
    Link: <a href="https://github.com/appcelerator/titanium_mobile/pull/1670" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/1670</a></li>
<li>Vishal Duggal 2012-04-17

    Test Code
    <code><pre>
    
    var win = Ti.UI.createWindow({});
    
    var mountainView = Titanium.Map.createAnnotation({
        latitude:37.390749,
        longitude:-122.081651,
        title:"Appcelerator Headquarters",
        subtitle:'Mountain View, CA',
        pincolor:Titanium.Map.ANNOTATION_RED,
        animate:true,
        draggable:true,
        leftButton: '../images/appcelerator_small.png',
        myid:1 // Custom property to uniquely identify this annotation.
    });
     
    var mapview = Titanium.Map.createView({
        mapType: Titanium.Map.STANDARD_TYPE,
        region: {latitude:37.39, longitude:-122.08, 
                latitudeDelta:0.01, longitudeDelta:0.01},
        animate:true,
        regionFit:true,
        userLocation:true,
        annotations:[mountainView]
    });
     
    win.add(mapview);
    
    mapview.addEventListener('pinchangedragstate', function(evt) {
     
        Ti.API.info("Annotation " + evt.title + " clicked, id: " + evt.annotation.myid+" Old State "+evt.oldState+" New State "+evt.newState);
    });
    
    win.open();
    </pre></code></li>
<li>Rafael Kellermann Streit 2012-04-19

    The code was accepted: <a href="https://github.com/appcelerator/titanium_mobile/pull/1670." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/1670.</a>
    
    Can this feature enter in the SDK 2.0?</li>
<li>Vishal Duggal 2012-04-23

    PR merged for IOS. Tickets created for Android, MobileWeb and documentation</li>
<li>Natalie Huynh 2012-06-07

    Tested with 2.1.0.v20120606162652 on iPod 3rd gen 4.0.2 and iPad Sim 5.0</li>
</ol>


<p><a href="/TIMOB/TIMOB-1242.json">JSON Source</a></p>