---
title: "[TIMOB-1250] table row className scroll crashing"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:55:38.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>classname, tableviewrow</td></tr>
<tr><th>Reporter</th><td>creston froats</td></tr>
<tr><th>Assignee</th><td>Reggie Seagraves</td></tr>
<tr><th>Created</th><td>2011-04-15T02:47:42.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:55:38.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>className setting for TableViewRow can cause crashing when
scrolling. className should be the same name for rows that have the
same structural layout, as described by Don Thorpe in this ticket:
<a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/26271#c115691" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/26271#c115691</a>"><a href="http://developer.appcelerator.com/helpdesk/view/26271#c115691" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/26271#c115691</a></a>.
However, currently we are forced to use unique className's for
every row regardless if the layout is the same. Otherwise, we get
the scroll crash as described in the above ticket.</p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-1250_17959/scrollcrash">scrollcrash</td></td><td>2011-04-15T02:47:42.000+0000</td><td>79655</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>netpro2k 2011-04-15

   <div><p>Want to second this one. I am seeing all sorts of odd behavior
   with table views as they are scrolling. I am using classname as it
   is intended, where classNames are unique per layout of a cell, not
   content. This was working on 1.3.0 and 1.3.2 (though in 1.3.2 I was
   having issues with imageViews laoding, that seem to have been
   resolved in 1.3.3)</p></div></li>
<li>Andrew Gioia 2011-04-15

   <div><p>I'd also like to throw another comment on this one. All of my
   tableviews crash when I use setData([]) to clear them and then
   attempt to repopulate the table with rows using tableView.setData
   again, but only when I'm using 1.3.3 from head. This issue is not
   present in 1.3.2 (RC1), though I was having other issues with
   random table crashing in that as well.</p></div></li>
<li>ctredway 2011-04-15

   <div><p>assigning but I think this has been fixed already</p></div></li>
<li>Luke Melia 2011-04-15

   <div><p>In github master as of August 2nd, I'm experiencing similar
   things. When I have TableRowViews with an ImageView child and
   classnames for rows with matching structure, the ImageViews often
   show images from other rows.</p></div></li>
<li>lansea90 2011-04-15

   <div><p>I also experiencing the same things with Luke Melia in github
   master!</p></div></li>
<li>lansea90 2011-04-15

   <div><p>I found the bug in TiUIImageView.h</p>
   <p>[self setImage_:[self scaleImageIfRequired:[imageView image]]];
   it reset the image url string with a UIImage* !!!!!<br>
   should be<br>
   [imageView setImage:[self scaleImageIfRequired:[imageView
   image]]];</p>
   <p>-(void)setWidth<em>:(id)width</em> {</p>
   <pre>
   <code>width = TiDimensionFromObject(width_);
   if (imageView != nil) {
       [self setImage_:[self scaleImageIfRequired:[imageView image]]];
   }</code>
   </pre>
   <p>}</p>
   <p>-(void)setHeight<em>:(id)height</em> {</p>
   <pre>
   <code>height = TiDimensionFromObject(height_);
   if (imageView != nil) {
       [self setImage_:[self scaleImageIfRequired:[imageView image]]];
   }</code>
   </pre>
   <p>}</p></div></li>
<li>lansea90 2011-04-15

   <div><p>anybody commit this bug???????</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>I'm no longer seeing any of the crashes described and the image
   behavior (if it still exists) belongs in a separate bug. Thom, can
   you confirm?</p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>Hey Stephen, I am unable to repro the crash. The image behavior
   is logged as <a href=
   "<a href="https://appcelerator.lighthouseapp.com/projects/32238/tickets/1156-imageview-in-createtable" rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238/tickets/1156-imageview-in-createtable</a>">
   <a href="https://appcelerator.lighthouseapp.com/projects/32238/tickets/1156-..." rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238/tickets/1156-...</a></a><br>
   and now assigned to you.</p>
   <p>I'm closing the crash as resolved.</p></div></li>
<li>gero 2011-04-15

    <div><p>OK, here some code to reproduce the issue. Scroll a bit up and
    down and the layout will be messed up soon (log output: "[WARN]
    Orphaned child found during proxy transfer!"). Some more scrolling
    and the app will freeze.</p>
    <p>API 1.4.0; iPhone SDK 4.0.1; Simulator</p>
    <pre>
    <code class="javascript">var max = 100;
    var data = [];
    
    for (var c=0; c&lt;max; c++) {
        
        var row = Ti.UI.createTableViewRow({
            className: 'feedlist',
            height: 'auto'
        });
        
        var textview = Ti.UI.createView({
            layout: 'vertical',
            height: 'auto'
    
        });
    
        var h1 = Ti.UI.createLabel({
            text: 'Title title title #'+c,
            height: 'auto'
        });
        textview.add(h1);
        
        var cre = Ti.UI.createLabel({
            text: 'Creator creator creator#'+c,
            height: 'auto',
            color: '#ccc'
        });
        textview.add(cre);
    
        row.add(textview);
        data[c] = row;
    }
    
    var win = Ti.UI.createWindow();
    var tableview = Ti.UI.createTableView();
    tableview.setData(data);
    win.add(tableview);
    win.open();</code>
    </pre></div></li>
<li>Thomas Huelbert 2011-04-15

    <div><p>thanks for the code gero - Back to you Stephen, console log
    attached (no crash log produced on device, app stays in a hung
    state after a few scrolls)</p></div></li>
<li>Stephen Tramer 2011-04-15

    <div><p>No longer crashes, but there are serious redraw issues. Working
    on it.</p></div></li>
<li>Jeff Haynie 2011-04-15

    <div><p>(from <a href=
    "/projects/32238/changesets/790ec1961c1783718a283f91ff38ec500d37c2d6"
    title=
    "Changeset [790ec1961c1783718a283f91ff38ec500d37c2d6]">[790ec1961c1783718a283f91ff38ec500d37c2d6]</a>)
    [<a href="/projects/32238/tickets/1250" title=
    "Ticket #1250">#1250</a> state:fixed-in-qa]: Fix for deadlock that
    occured when requesting a relayout while laying out. - Many
    className reuse speed improvements - Fixed draw problem caused by
    reproxying <a href=
    "<a href="http://github.com/appcelerator/titanium_mobile/commit/790ec1961c1783718a283f91ff38ec500d37c2d6" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/790ec1961c1783718a283f91ff38ec500d37c2d6</a>">
    <a href="http://github.com/appcelerator/titanium_mobile/commit/790ec1961c178..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/790ec1961c178...</a></a></p></div></li>
<li>lansea90 2011-04-15

    <div><p>still have the following probilem, Luke Melia and I found, and I
    found the bug in TiUIImageView.h, please check.<br>
    "When I have TableRowViews with an ImageView child and same
    classnames for rows with matching structure, the ImageViews often
    show images from other rows."</p></div></li>
<li>Thomas Huelbert 2011-04-15

    <div><p>lansea90 - does lighthouse ticket 1156 cover the behavior you
    are describing? if not, it may be worth logging a new ticket to
    make sure the issue does not get lost.</p>
    <p>In this bug - I am no longer able to crash, but am seeing some
    scrolling performance issues as well as some redraw. I've opened
    ticket 1693 to address the scroll performance and redraw.</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-1250.json">JSON Source</a></p>