---
title: "[TIMOB-1257] KS XML DOM test fails for Android."
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:55:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M06</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect, release-1.6.0</td></tr>
<tr><th>Reporter</th><td>Bill Dawson</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T02:47:55.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:55:40.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Second part of the test (result should be true, is false).
Reason not known at this time.</p></div>

<h3>Comments</h3>

<ol>
<li>Brion Vibber 2011-04-15

   <div><p>The tests make assumptions about whitespace handling; this is
   the bit that fails:</p>
   <pre>
   <code>testResult = testResult &amp;&amp; (elements!=null &amp;&amp; elements.length==3);</code>
   </pre>
   <p>elements.length returns 7, which makes sense:</p>
   <pre>
   <code>'            &lt;node id="node 1"&gt;'+
   '                &lt;node id="node 2"&gt;'+
   '                    &lt;node id="node 3"/&gt;'+
   '                &lt;/node&gt;'+
   '                &lt;node id="node 4"&gt;'+
   '                    &lt;node id="node 5"/&gt;'+
   '                &lt;/node&gt;'+
   '                &lt;node id="node 6"&gt;'+
   '                    &lt;node id="node 7"/&gt;'+
   '                &lt;/node&gt;'+
   '            &lt;/node&gt;'+</code>
   </pre>
   <p>This gives 7 child nodes when including the whitespace:</p>
   <pre>
   <code>whitespace element whitespace element whitespace element whitespace</code>
   </pre>
   <p>whereas the 3 if the whitespace is stripped out during
   parsing:</p>
   <pre>
   <code>element element elmeent</code>
   </pre></div></li>
<li>Brion Vibber 2011-04-15

   <div><p>(I should say that's the <em>first</em> bit that fails, probably
   more similar miscounts follow. :)</p></div></li>
<li>Opie Cyrus 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/a2079f4872f27847a7ff777993472aa81e123afb"
   title=
   "Changeset [a2079f4872f27847a7ff777993472aa81e123afb]">[a2079f4872f27847a7ff777993472aa81e123afb]</a>)
   [<a href="/projects/32238/tickets/1257" title=
   "Ticket #1257">#1257</a> state:fixed-in-qa] Remove XML DOM test
   from KS</p>
   <p>Removed the XML DOM test from KS as there is an updated XML DOM
   test in drillbit and is no longer needed in KS.<br>
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/a2079f4872f27847a7ff777993472aa81e123afb" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/a2079f4872f27847a7ff777993472aa81e123afb</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/a2079f4872f2..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/a2079f4872f2...</a></a></p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>Verified on G1/1.6 and Nexus One/2.2.1 using build #e1cb22a</p>
   <p>drillbit tests passed on Monday.</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-1257.json">JSON Source</a></p>