---
title: "[TIMOB-1267] Android: Allow Setting HomeScreen Wallpaper"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-05-04T10:55:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.7.0, Sprint 2011-18</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, feature, release-1.7.0, rplist</td></tr>
<tr><th>Reporter</th><td>Don Thorp</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-04-15T02:48:07.000+0000</td></tr>
<tr><th>Updated</th><td>2011-05-04T10:55:58.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Feature request.</p></div>

<h3>Comments</h3>

<ol>
<li>Eric Beach 2011-04-15

   <div><p>The ability to do this is one of the main reasons for my mobile
   development. Hope this can be escalated to some extent. Thanks.</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>Moving out of future into TBS.</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/f1f5cedd3d383687c571367bbdbfd18ddacbab03"
   title=
   "Changeset [f1f5cedd3d383687c571367bbdbfd18ddacbab03]">[f1f5cedd3d383687c571367bbdbfd18ddacbab03]</a>)
   New Titanium.Media method to setSystemWallpaper, including apidoc.
   Also, change erroneous name "peakBounds" to "peekBounds". [<a href=
   "/projects/32238/tickets/1267" title="Ticket #1267">#1267</a>]
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/f1f5cedd3d383687c571367bbdbfd18ddacbab03" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/f1f5cedd3d383687c571367bbdbfd18ddacbab03</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/f1f5cedd3d38..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/f1f5cedd3d38...</a></a></p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/aaaa80fc7cb96429076e4054139b4c9077f6ceb4"
   title=
   "Changeset [aaaa80fc7cb96429076e4054139b4c9077f6ceb4]">[aaaa80fc7cb96429076e4054139b4c9077f6ceb4]</a>)
   Move setSystemWallpaper from Ti.Media to Ti.Media.Android [<a href=
   "/projects/32238/tickets/1267" title="Ticket #1267">#1267</a>]
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/aaaa80fc7cb96429076e4054139b4c9077f6ceb4" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/aaaa80fc7cb96429076e4054139b4c9077f6ceb4</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/aaaa80fc7cb9..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/aaaa80fc7cb9...</a></a></p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>QE Testing:</p>
   <p>You want to run this on a phone, so you can try the camera and
   if you have some photos in your Gallery on your phone, then that's
   good too.</p>
   <p>A good sample app.js:</p>
   <pre>
   <code class="javascript">Titanium.UI.setBackgroundColor('#000');
   var win = Titanium.UI.createWindow({  
       title:'Test',
       backgroundColor:'#000',
       fullscreen:false,
       exitOnClose: true
   });
   var cb =function(data){
       var blob = data.media;
       Ti.API.info(blob);
       Ti.Media.Android.setSystemWallpaper(blob, true);
   };
   var err = function(e) {
       Ti.API.error(e);
   };
   var cancel =function() {
       Ti.API.warn('Cancelled');
   };
   
   var btn = Ti.UI.createButton({
       title: 'Camera',
       top: 0, height: "40dp", left: 0, right: 0
   });
   win.add(btn);
   btn.addEventListener('click', function(){
       Ti.Media.showCamera({
           success:cb,
           error: err,
           cancel: cancel
       });
   });
   
   var gallery = Ti.UI.createButton({
       title: 'Gallery',
       top: "45dp", height: "40dp", left: 0, right: 0
   });
   gallery.addEventListener('click', function(){
       Ti.Media.openPhotoGallery({
           success:cb,
           error:err,
           cancel:cancel
       });
   });
   win.add(gallery);
   
   var file = Ti.UI.createButton({
       title: 'File',
       top: "90dp", height: "40dp", left: 0, right: 0
   });
   file.addEventListener('click', function(){
       var f = Ti.Filesystem.getFile('KS_nav_ui.png');
       var blob = f.read();
       Ti.Media.Android.setSystemWallpaper(blob, true);
   });
   win.add(file);
   
   win.open();</code>
   </pre>
   <p>Run the app, and you can try three different ways of setting the
   homescreen wallpaper -- one by using the camera directly, one by
   selecting an existing photo from the Gallery, and one by setting it
   from the filesystem (just using the ugly KS_nav_ui.png file that is
   by default in your project's Resources folder.</p>
   <p><strong>NOTE:</strong> When you take a photo or select from the
   gallery, don't be surprised if it takes a minute before the
   homescreen wallpaper actually gets updated. The system doesn't
   necessarily do it immediately.</p></div></li>
<li>Don Thorp 2011-05-03

   The permission for set wallpaper isn't being added. I used your test app in a new project.</li>
<li>Bill Dawson 2011-05-04

   Added wallpaper permission code to builder.py</li>
<li>Don Thorp 2011-05-04

   Tested on Nexus One 2.3.3</li>
</ol>


<p><a href="/TIMOB/TIMOB-1267.json">JSON Source</a></p>