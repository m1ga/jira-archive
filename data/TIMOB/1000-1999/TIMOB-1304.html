---
title: "[TIMOB-1304] Android: Strange wrapping in TableView on Higher Res Screens"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:55:48.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect</td></tr>
<tr><th>Reporter</th><td>Don Thorp</td></tr>
<tr><th>Assignee</th><td>Marshall Culpepper</td></tr>
<tr><th>Created</th><td>2011-04-15T02:48:57.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:55:48.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>On the N1 the controls tab exhibits the problem.</p>
<p>See <a href=
"<a href="http://developer.appcelerator.com/question/38981/wrap-bug-in-labels--tableview" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/38981/wrap-bug-in-labels--tableview</a>">
Q&amp;A</a> for more information.</p>
<p>Also:</p>
<p>base UI&gt;Views&gt;Table Views (Go to P and see Pari with s on
next line)</p></div>

<h3>Comments</h3>

<ol>
<li>hal 2011-04-15

   <div><p>I vote +1 for fixing this!<br>
   Another example, KS -&gt; Controls -&gt; "Butto" with "n"
   wrapped</p></div></li>
<li>hal 2011-04-15

   <div><p>I think this is to do with auto-detecting the width. As a
   workaround, you can explicitly set a large enough width and the
   text won't wrap. Obviously, this is not ideal, though.</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>This is being worked on. It's a rounding error having to do with
   scaling and having int's instead of float in the API.</p></div></li>
<li>hal 2011-04-15

   <div><p>Thanks for the note, Don.<br>
   Another workaround is to change the fontsize. Increasing/decreasing
   by just one point can correct the problem</p></div></li>
<li>hal 2011-04-15

   <div><p>Sorry, mistake - I should not have re-assigned. Reassigning back
   to Marshall</p></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/82d1161f123fb7a31699e07c8c76240471e46a4e"
   title=
   "Changeset [82d1161f123fb7a31699e07c8c76240471e46a4e]">[82d1161f123fb7a31699e07c8c76240471e46a4e]</a>)
   grow the content area / auto generated label for tables, this fixes
   the text cutoff problem in higher-density devices [<a href=
   "/projects/32238/tickets/1304" title="Ticket #1304">#1304</a>
   state:resolved] <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/82d1161f123fb7a31699e07c8c76240471e46a4e" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/82d1161f123fb7a31699e07c8c76240471e46a4e</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/82d1161f123fb..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/82d1161f123fb...</a></a></p></div></li>
<li>hal 2011-04-15

   <div><p>Note: Using the latest Android build at <a href=
   "<a href="http://builds.appcelerator.com.s3.amazonaws.com/mobile/mobilesdk-1.3.3-20100722034659-linux.zip" rel="nofollow" target="_blank">http://builds.appcelerator.com.s3.amazonaws.com/mobile/mobilesdk-1.3.3-20100722034659-linux.zip</a>">
   <a href="http://builds.appcelerator.com.s3.amazonaws.com/mobile/mobilesdk-1...." rel="nofollow" target="_blank">http://builds.appcelerator.com.s3.amazonaws.com/mobile/mobilesdk-1....</a></a></p>
   <p>Marshall<br>
   I'm afraid this bug is not completely fixed.</p>
   <p>If you update the Kitchen
   Sink/Resources/examples/table_view_api_basic.js with the following
   code, you will see what I mean:<br>
   <a href=
   "<a href="http://gist.github.com/485832" rel="nofollow" target="_blank">http://gist.github.com/485832</a>"><a href="http://gist.github.com/485832" rel="nofollow" target="_blank">http://gist.github.com/485832</a></a></p>
   <p>Cheers</p></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>Verified hal's test case.. The workaround I posted only really
   works in the "default" table view case, because it involves growing
   the content area of the default TableViewRow layout + The default
   label we create. AFAICT, This is still related to how fonts are
   measured when application scale is enabled, and looks very much
   like an actual Android bug.</p></div></li>
<li>hal 2011-04-15

   <div><p>Marshall, setting a static width for the container label could
   still cause the text to wrap in some cases where the margin between
   the text and the edge of the container is small. I feel when
   percentages for widths is working properly, it will allow a little
   bit of flexibility and flux to prevent this happening. Do you
   agree? Are percentages scheduled for the 1.5 release?</p></div></li>
<li>Don Thorp 2011-04-15

    <div><p>Full fix won't be ready in 1.4</p></div></li>
<li>Jick Steen 2011-04-15

    <div><p>Please, also have a look at labels within views. I have this
    issue there, too.</p></div></li>
<li>hal 2011-04-15

    <div><p>Jick</p>
    <p>Marshall, the personable guy that he is, kindly explained to me
    via IRC that the issue of auto-sizing views within a tableviewrow
    is not so simple to resolve. Now I have some background, the
    reasons are more understandable. Here's the transcript:</p>
    <pre>
    <code>2010-07-22 16:01:12 &lt;marshall_law&gt;  hal: i'm not sure if there's a way to solve this one, other than forcing the label to be a larger size
    2010-07-22 16:01:36 &lt;marshall_law&gt;  in this case it's actually android that has the bug.. i worked around it by auto-growing the content area for default table views
    2010-07-22 16:01:55 &lt;marshall_law&gt;  the problem is when you start adding your own widgets, Titanium no longer controls the view group
    2010-07-22 16:02:14 &lt;marshall_law&gt;  so i could hack it, and force it to grow, but that isn't what you want either
    2010-07-22 16:02:21 &lt;marshall_law&gt;  because then it's the entire size of the row
    2010-07-22 16:02:27 &lt;marshall_law&gt;  you just want it to be the size of the text right?
    2010-07-22 16:02:42 &lt;hal&gt;   yes, I'd imagine so
    2010-07-22 16:04:29 &lt;hal&gt;   marshall_law: can the width of the label just depend on the size of the text?
    2010-07-22 16:05:04 &lt;marshall_law&gt;  hal: that's what it's trying to do already, the problem is the app scaling
    2010-07-22 16:04:47 &lt;hal&gt;   marshall_law: surely it already does that at the moment, with the height?
    2010-07-22 16:05:09 &lt;marshall_law&gt;  it's a bug in the scaling code
    2010-07-22 16:05:15 &lt;marshall_law&gt;  deep inside android, not public to me
    2010-07-22 16:05:24 &lt;marshall_law&gt;  i have to hack to even see the values they're playing with
    2010-07-22 16:04:42 &lt;marshall_law&gt;  so for now your best bet is to just manually size it.. there's a _ton_ of custom logic in TextView.layout that I'm afraid I won't be able to circumvent
    2010-07-22 16:05:42 &lt;marshall_law&gt;  hal: i wrote a mini blog post about it actually lol
    2010-07-22 16:05:43 &lt;marshall_law&gt;  <a href="http://www.arcaner.com/2010/07/20/querying-applicationscale-in-android/" rel="nofollow" target="_blank">http://www.arcaner.com/2010/07/20/querying-applicationscale-in-android/</a>
    2010-07-22 16:05:46 &lt;hal&gt;   marshall_law: then the next course of action surely should be to escalate it to google. Does appcelerator have a direct support contact with them?
    2010-07-22 16:06:29 &lt;marshall_law&gt;  we have some contacts i'm not sure about support though. they don't support android like we do titanium that i'm aware of. we can open a bug though
    2010-07-22 16:06:50 &lt;marshall_law&gt;  i'd need to boil down the example to pure java / android
    2010-07-22 16:06:55 &lt;marshall_law&gt;  it might take me some time</code>
    </pre>
    <p>Bearing in mind that there may not me a resolution soon, I think
    when dimensions in percentages work throughout the environment,
    they will provide a workaround to this in most situations.</p></div></li>
<li>Marshall Culpepper 2011-04-15

    <div><p>The workaround for this is to use static sizes for now, with
    some supporting code to fix it in most cases. The root cause is
    android scaling (which can also be solved by setting
    anyDensity="false", and using Platform.displayCaps). Our new JSS
    support should also help alleviate density / resolution specific
    issues</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-1304.json">JSON Source</a></p>