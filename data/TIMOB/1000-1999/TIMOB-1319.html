---
title: "[TIMOB-1319]  [PATCH] Class cast exception in TableViewRowProxy.java in fireEvent"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:55:51.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.4.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect, tableview</td></tr>
<tr><th>Reporter</th><td>Joel Boehland</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T02:49:15.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:55:51.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>TableViewRowProxy.fireEvent assumes that its parent is a
TableViewProxy, when it can also be a TableViewSectionProxy object.
If you fire an event from a row contained in a TableViewSection, it
will cause a ClassCastException to be raised and the app will die.
The following changes in my local repo fixed the problem:</p>
<p>diff --git
a/android/modules/ui/src/ti/modules/titanium/ui/TableViewRowProxy.java
b/android/modules/ui/src/ti/modules/titanium/ui/TableViewRowProxy.java<br>
index a415c32..f1842db 100644<br>
---
a/android/modules/ui/src/ti/modules/titanium/ui/TableViewRowProxy.java
+++
b/android/modules/ui/src/ti/modules/titanium/ui/TableViewRowProxy.java
@@ -87,8 +87,14 @@ public class TableViewRowProxy extends
TiViewProxy</p>
<pre>
<code>@Override
public boolean fireEvent(String eventName, TiDict data) {
    if (eventName.equals("click")) {</code>
</pre>
<ul>
<li>
<pre>
<code>                 TableViewProxy table = null;
    // inject row click data for events coming from row children</code>
</pre></li>
<li>
<pre>
<code>    TableViewProxy table = (TableViewProxy)getParent();</code>
</pre></li>
<li>
<pre>
<code>                 if(getParent() instanceof TableViewProxy) {</code>
</pre></li>
<li>
<pre>
<code>                     table = (TableViewProxy)getParent();</code>
</pre></li>
<li>
<pre>
<code>                 }</code>
</pre></li>
<li>
<pre>
<code>    if(getParent() instanceof TableViewSectionProxy) {</code>
</pre></li>
<li>
<pre>
<code>                     table = (TableViewProxy)getParent().getParent();</code>
</pre></li>
<li>
<pre>
<code>                 }
    Item item = tableViewItem.getRowData();
    if (table != null &amp;&amp; item != null) {
        TableViewModel model = table.getTableView().getModel();</code>
</pre></li>
</ul></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-1319_17968/gdiff.txt">gdiff.txt</td></td><td>2011-04-15T02:49:15.000+0000</td><td>1154</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Joel Boehland 2011-04-15

   <div><p>Apologies for the badly-formatted patch that I inlined in the
   original message. Please see the attached patch instead.</p></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/c580ff0f0ed719c35f65a7db75236540b7d8b187"
   title=
   "Changeset [c580ff0f0ed719c35f65a7db75236540b7d8b187]">[c580ff0f0ed719c35f65a7db75236540b7d8b187]</a>)
   go up the tree to find the row's TableView parent (sometimes the
   immediate parent is a section) [<a href=
   "/projects/32238/tickets/1319" title="Ticket #1319">#1319</a>
   state:resolved] <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/c580ff0f0ed719c35f65a7db75236540b7d8b187" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/c580ff0f0ed719c35f65a7db75236540b7d8b187</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/c580ff0f0ed71..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/c580ff0f0ed71...</a></a></p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-1319.json">JSON Source</a></p>