---
title: "[TIMOB-1374] Android: Events are not working on Android 2.2 device, but working on simulator"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2011-04-15T02:50:42.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, event, webview</td></tr>
<tr><th>Reporter</th><td>Alper Dincer</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T02:50:41.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-09T23:47:30.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>This sniplets are working under all versions of simulator, but
when I install the application on Android 2.2 (Nexus One), events
are not working.<br>
So I can't pass data between windows and webviews.</p>
<h2>win.js</h2>
<p>var win = Ti.UI.currentWindow;</p>
<p>var webCurView = Ti.UI.createWebView({url:'web2.html'});</p>
<p>webCurView.addEventListener('load', function() {<br></p>
<pre>
<code>Titanium.App.fireEvent('pageReady',{latx:39.92, lngx:32.80, laty:39.86, lngy: 32.85});</code>
</pre>
<p>});</p>
<p>win.add(webCurView);</p>
<h2>web2.html</h2></div>

<h3>Comments</h3>

<ol>
<li>Brion Vibber 2011-04-15

   <div><p>The problem I have is that the Titanium object (and thus
   Titanium.App.addEventListener) is undefined in the web view's
   JavaScript when launched on a Nexus One running the official
   Android 2.2 release. As with Alper's report, everything works fine
   in the emulator (2.2-APIs).</p></div></li>
<li>Brion Vibber 2011-04-15

   <div><p>I was able to work around this for my case by re-including the
   system's binding.js in my HTML file; I think there's some order of
   operations problem where it's getting evaluated when the WebView is
   set up, but before the TiApp and TiAPI objects are fully available
   yet:</p>
   <p>E/Web Console( 2106): Uncaught ReferenceError: TiAPI is not
   defined at :3</p>
   <p>I've simply copied binding.js from here:<br>
   <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/blob/master/android/modules/ui/src/ti/modules/titanium/ui/widget/webview/binding.js" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/blob/master/android/modules/ui/src/ti/modules/titanium/ui/widget/webview/binding.js</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/blob/master/android/..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/blob/master/android/...</a></a></p>
   <p>and dropped it into my HTML before my own scripts:</p>
   &lt;!-- hack for initialization bug on Android --&gt; Since it
   checks for the short-form 'Ti' already being set up in the global
   namespace, it's a no-op when everything's already been set up for
   us so it doesn't interfere with iPhone, or with a correctly
   established namespace.</div></li>
<li>Brion Vibber 2011-04-15

   <div><p>That'll be a &lt;script src="binding.js"&gt;&lt;/script&gt; of
   course... formatting ate the tag in post above. :)</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>dupe <a href="/projects/32238/tickets/1635" title=
   "Ticket #1635">#1635</a> and <a href="/projects/32238/tickets/2153"
   title="Ticket #2153">#2153</a> and <a href=
   "/projects/32238/tickets/2514" title="Ticket #2514">#2514</a></p>
   <p>fixed with this commit to master (1.5.1):<br>
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/12d7bf6a90db72fa0aebe538c95128c8a0cdc625" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/12d7bf6a90db72fa0aebe538c95128c8a0cdc625</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/12d7bf6a90db..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/12d7bf6a90db...</a></a></p></div></li>
<li>Lee Morris 2017-03-09

   Closing ticket as duplicate.</li>
</ol>


<p><a href="/TIMOB/TIMOB-1374.json">JSON Source</a></p>