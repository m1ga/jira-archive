---
title: "[TIMOB-1461] HTTP PUT method fails with SDK 1.4.0 due to url-encoded path"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:56:14.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>encoded, encoding, get, httpclient, ios, method, percent, put, url</td></tr>
<tr><th>Reporter</th><td>Martin Lasak</td></tr>
<tr><th>Assignee</th><td>Jeff Haynie</td></tr>
<tr><th>Created</th><td>2011-04-15T02:53:28.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:56:14.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>We upgraded to Titanium Mobile SDK from 1.3.0 to 1.4.0 and use
the same code base, but the effect differs.</p>
<p>Trying to perform a HTTP request with PUT method fails and
results always in call of onerror and in a 404 errorcode.<br>
Due to Wireshark analysis of HTTP request, we figured out that the
path part of uri is url-encoded now.</p>
<p>Requests towards uris like<br>
<a href=
"<a href="http://www.ourdomain.com/our" rel="nofollow" target="_blank">http://www.ourdomain.com/our</a>,comma,separated,path/"><a href="http://www.ourdomain.com/our" rel="nofollow" target="_blank">http://www.ourdomain.com/our</a>,comma,separated,path/</a><br>
will not work anymore in titanium mobile sdk 1.4.0</p>
<p>Following code snippet works with 1.3.0 on iOS 3.1.3 and does
not work with 1.4.0 on iOS 4.0.1</p>
<pre>
<code>        var xhrPut = Titanium.Network.createHTTPClient();
        xhrPut.onload = function()
        {
            if (this.status===204){
                log("calling succes callback.");
            }else{
                log("error loading "+this.status+" "+this.responseData);
            }
        };
        xhrPut.onerror = function()
        {
            log("error loading "+this.status+" "+this.responseData);
        };

        xhrPut.open("PUT",baseuri+uri);
        xhrPut.setRequestHeader('Authorization','Basic '+authstrPut);
        xhrPut.setRequestHeader('Content-Type', 'application/json; charset=utf-8');
        xhrPut.setRequestHeader('Accept', 'application/json');
        xhrPut.send(JSON.stringify(params));

        //variables: baseuri, uri, authstrPut, params</code>
</pre>
<p>With regards.</p></div>

<h3>Comments</h3>

<ol>
<li>Damien Elmes 2011-04-15

   <div><p>I believe this is fixed in the latest git already.</p></div></li>
<li>Hugo Josefson 2011-04-15

   <div><p>I have this problem too in Titanium SDK 1.4.0.</p>
   <p>For me, it's when I do a GET like this:</p>
   <pre>
   <code class=
   "javascript">var url = '<a href="http://www.ourdomain.com/page?Einstein=E%3Dmc2&amp" rel="nofollow" target="_blank">http://www.ourdomain.com/page?Einstein=E%3Dmc2&amp</a>;paramWithSlashInIt=asd%2Fasd';</code>
   </pre>
   <p>When the xhr fetches that, it becomes:</p>
   <pre>
   <code><a href="http://www.ourdomain.com/page?Einstein=E%253Dmc2&amp" rel="nofollow" target="_blank">http://www.ourdomain.com/page?Einstein=E%253Dmc2&amp</a>;paramWithSlashInIt=asd%252Fasd</code>
   </pre>
   <p>...because the percent characters are encoded again. For us this
   makes it impossible to do OAuth signed GET requests, which are
   vital for our application.</p>
   <p><strong>I can confirm that nightly build from Aug 3 fixes the
   problem.</strong></p>
   <p>!! Please cut a 1.4.1 release soon :) !!</p>
   <p>Thanks for all your hard work.<br>
   /Hugo</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>I know that this is a duplicate of a bug that either Jeff or I
   have fixed; we fiddled with URL encoding for a while. ','
   characters are no longer escaped. Checked 1.6.0RC1.</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-1461.json">JSON Source</a></p>