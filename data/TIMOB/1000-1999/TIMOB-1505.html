---
title: "[TIMOB-1505] Ti.JSON.stringify missing from WebView JS context"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:56:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Backlog</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>injection, ios, json, webview</td></tr>
<tr><th>Reporter</th><td>Carmen Wick</td></tr>
<tr><th>Assignee</th><td>Reggie Seagraves</td></tr>
<tr><th>Created</th><td>2011-04-15T02:54:37.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:56:21.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Ti.JSON.stringify used to be injected into all WebView
Javascript contexts. See this commit from last year: <a href=
"<a href="http://github.com/appcelerator/titanium_mobile/commit/9510dc89620677ba615a8a70904b51c4ab711959" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/9510dc89620677ba615a8a70904b51c4ab711959</a>">
<a href="http://github.com/appcelerator/titanium_mobile/commit/9510dc89620677ba615a8a70904b51c4ab711959" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/9510dc89620677ba615a8a70904b51c4ab711959</a></a></p>
<p>But now, it's missing. We were able to fix it by adding the
following JS code to our web view:</p>
<pre>
<code class=
"javascript">Ti.JSON = { stringify: function(x) { return Ti.App._JSON(x, 0); }};</code>
</pre>
<p>It looks like this line should be added to the
<code>kTitaniumJavascript</code> constant in
iphone/Classes/TiUIWebView.m and probably to
iphone/Classes/bridge.txt. It looks like
<code>kTitaniumJavascript</code> is being generated from
bridge.txt, but we couldn't find anything in the build process that
would do this.</p></div>

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2011-04-15

   <div><p>Tested 1.6.0RC1, resolved. Updated KS local HTML test to include
   a check for this.</p>
   <p>UPDATE TO KS QA PASS:<br>
   - Base UI-&gt;Views-&gt;Web Views-&gt;Local URL - Check log; should
   contain <code>JSON injection: ["foo", "bar"]</code></p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Forgot to resolve.</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/6d6769cbe0f46e8a761db66d7fb74c42a6b78b7a"
   title=
   "Changeset [6d6769cbe0f46e8a761db66d7fb74c42a6b78b7a]">[6d6769cbe0f46e8a761db66d7fb74c42a6b78b7a]</a>)
   [<a href="/projects/32238/tickets/1505" title=
   "Ticket #1505">#1505</a>] Addition of KS test for JSON injection
   into webviews <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/6d6769cbe0f46e8a761db66d7fb74c42a6b78b7a" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/6d6769cbe0f46e8a761db66d7fb74c42a6b78b7a</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/6d6769cbe0f4..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/6d6769cbe0f4...</a></a></p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-1505.json">JSON Source</a></p>