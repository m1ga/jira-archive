---
title: "[TIMOB-1613] iOS: ImageView not releasing memory when image reassigned"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2017-08-08T18:47:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>core</td></tr>
<tr><th>Reporter</th><td>dhpublic (at gmail)</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2011-04-15T02:57:20.000+0000</td></tr>
<tr><th>Updated</th><td>2017-08-08T18:47:46.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>I think my problem only occurs when ran from inside a
setInterval. If I simply load 150 images sequentially into an
imageview's image, then only 15 MB of real memory is used. However,
when performed inside the setInterval's callback, the real memory
usage escalates to nearly 60 MB if 100 images are used, and up to
about 100 MB if 150 images are used. It will stay at that level
throughout subsequent loops until the app is shut down. I obtained
these numbers by running Instruments with Activity Monitor.</p>
<p>I have attached a sample project with the relevant 10-12 lines
of code in the app.js file and 100 images of 20 KB each.</p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-1613_18025/testimageview.zip">testimageview.zip</td></td><td>2011-04-15T02:57:22.000+0000</td><td>1847849</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>dhpublic (at gmail) 2011-04-15

   <div><p>For quick reference, here are the relevant lines of
   code.<br></p>
   <pre>
   <code class="javascript">var animationStep = 1;
   var animationView = Titanium.UI.createImageView({<br>
   <br>
   
   
   </code>
   </pre>
   <pre>
   <code class=
   "javascript"><code>                width: 320, height: 385, top: 0});</code></code>
   </pre>
   <pre>
   
   
   <br>
   win1.add(animationView);
   
   <br>
   function updateAnimationCallback() {
   
   </pre>
   <pre>
   <code>animationView.image =
               Ti.Filesystem.getFile(
                      Titanium.Filesystem.resourcesDirectory, 
                      'images/' + animationStep + '.jpg');
   if (animationStep &amp;lt;= 100) {
       animationStep++;
   } else {
       animationStep = 1;
   }</code>
   </pre>
   <pre>
   
   
   <br>
   }
   
   <br>
   setInterval(updateAnimationCallback, 100);
   </pre></div></li>
<li>dhpublic (at gmail) 2011-04-15

   <div><p>Assigned this to Kevin, since he's the one who asked for the
   ticket on the Q&amp;A.</p></div></li>
<li>kevinwhinnery 2011-04-15

   <div><p>Thanks for creating the test case, that's very helpful.</p></div></li>
<li>dhpublic (at gmail) 2011-04-15

   <div><p>I assume no one's had a chance to look at this?</p></div></li>
<li>dhpublic (at gmail) 2011-04-15

   <div><p>Since I'm not a paying customer, I certainly have no right to
   complain. But my inability to get answers here or in Q&amp;A tells
   me I need to abandon the Appcelerator platform.</p></div></li>
<li>Stephen Tramer 2012-07-25

   Tested SDK 2.2.0.f9e938d, still a valid test case. It is highly likely that this is caused by image caching and disabling it (especially for larger images like the ones in this test) is undesirable. Further investigation outside of scrub is required.</li>
<li>Lee Morris 2017-08-08

   Closing due to inactivity. If this issue still exists, please raise a new ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-1613.json">JSON Source</a></p>