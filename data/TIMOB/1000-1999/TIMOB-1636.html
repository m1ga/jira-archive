---
title: "[TIMOB-1636] Two switches cause repeated event firing"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2011-04-15T02:58:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>defect, ios, iphone, switch</td></tr>
<tr><th>Reporter</th><td>ctredway</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-04-15T02:57:59.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-02T19:05:18.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>A customer reported that they were trying to have 2 switches be
linked to each other so that when one value changed the other
switch changed. The below code, when run, causes many many events
to fire when the window is opened. This was run on the iphone, sdk
4.0.2 &amp; 1.4.1</p>
<p>var win = Titanium.UI.currentWindow;</p>
<p>var sw1= Titanium.UI.createSwitch({ value:false,
left:215,top:100});<br>
win.add(sw1);</p>
<p>var sw2= Titanium.UI.createSwitch({ value:true,
left:215,top:200});<br>
win.add(sw2);</p>
<p>sw1.addEventListener('change',function(e){<br></p>
<pre>
<code>sw2.value = !sw2.value;</code>
</pre>
<p>});</p>
<p>sw2.addEventListener('change',function(e){<br></p>
<pre>
<code>sw1.value = !sw1.value;</code>
</pre>
<p>});</p></div>

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2011-04-15

   <div><p>The problem is that this causes an infinite loop, REGARDLESS of
   when the event is triggered. Switch value 'change' events are fired
   whenever the value is set, and this includes creating a switch with
   a 'value' property.</p>
   <p>Every time a switch was flicked for this window, the following
   would happen, regardless of when:</p>
   <p>s1 -&gt; s2 -&gt; s1 -&gt; s2 -&gt; s1 -&gt;...</p>
   <p>The customer needs additional logic in their code to ensure that
   no switch is flipped twice by this requirement.</p></div></li>
<li>ctredway 2011-04-15

   <div><p>This happens when just loading the window, without touching a
   switch. So you are saying that just by having 2 switches with
   listeners to each other, and not touching either one, this will
   happen?</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>I am saying two things.</p>
   <ul>
   <li>Setting 'value' on a control at any time causes the change
   event to be fired. There are certain circumstances where this might
   actually be a bug.</li>
   <li>The customer's logic is wrong to begin with, and even if the
   event was not fired at window load, flipping a switch would produce
   exactly the same result.</li>
   </ul></div></li>
<li>ctredway 2011-04-15

   <div><p>I can see how the listeners would cause an infinite loop, but
   when a control is created and a value is set, IMO, should not fire
   the change event. This is backwards from what most expect.</p></div></li>
<li>Lee Morris 2017-03-02

   Closing as invalid.</li>
</ol>


<p><a href="/TIMOB/TIMOB-1636.json">JSON Source</a></p>