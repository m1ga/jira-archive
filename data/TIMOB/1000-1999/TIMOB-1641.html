---
title: "[TIMOB-1641] Android: Support Event Handlers on Hardware Buttons"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:56:44.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, feature</td></tr>
<tr><th>Reporter</th><td>Don Thorp</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T02:58:06.000+0000</td></tr>
<tr><th>Updated</th><td>2011-06-21T14:30:30.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Add support for overriding hardware buttons on Android devices.
Not all devices will have all buttons. The following buttons should
be supported.</p>
<p>Back, Camera, Focus (Half-Press of Camera), Search, Volume Up,
and Volume Down.</p>
<p>If an event is added for any of these buttons, it takes sole
responsibility for the action of the button. There will be no
method to conditionally forward to the original handler. Removal of
the event listener will restore default handling.</p>
<p>These handlers are allowed on Ti.UI.Window and will only
function when attached to "heavyweight" windows. When
<code>Ti.Android.Activity</code> is released handlers will be
settable on <code>Ti.Android.currentActivity</code>.</p>
<p>No additional data is passed in the event object.</p>
<p>Example.</p>
<pre>
<code>win.addEventListener('android:back', function(e) {
    Ti.API.Info("Pressing Back Will Not Close The Activity/Window");
});</code>
</pre>
<p>Event Names:<br>
android:back, android:camera, android:focus, android:search,
android:volup, android:voldown</p></div>

<h3>Comments</h3>

<ol>
<li>Don Thorp 2011-04-15

   <div><p>Sample used during dev. <a href=
   "<a href="http://github.com/donthorp/androidng/blob/b078177e2386bf4149fb7f37b607147921eb21bf/assets/Resources/android-keyboard.js" rel="nofollow" target="_blank">http://github.com/donthorp/androidng/blob/b078177e2386bf4149fb7f37b607147921eb21bf/assets/Resources/android-keyboard.js</a>">
   android-keyboard.js</a></p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/b59fa44d54329b101c639252792968b10ba1113b"
   title=
   "Changeset [b59fa44d54329b101c639252792968b10ba1113b]">[b59fa44d54329b101c639252792968b10ba1113b]</a>)
   [<a href="/projects/32238/tickets/1641" title=
   "Ticket #1641">#1641</a> state:fixed-in-qa] implemented. Events are
   fired on key up, down and repeat are ignored. Adding a listener
   shortcuts the key being passed on for default processing. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/b59fa44d54329b101c639252792968b10ba1113b" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/b59fa44d54329b101c639252792968b10ba1113b</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/b59fa44d54329..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/b59fa44d54329...</a></a></p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/d62b2f33f5d5397758b06a33637e92ecd88694f6"
   title=
   "Changeset [d62b2f33f5d5397758b06a33637e92ecd88694f6]">[d62b2f33f5d5397758b06a33637e92ecd88694f6]</a>)
   [<a href="/projects/32238/tickets/1641" title=
   "Ticket #1641">#1641</a> state:fixed-in-qa] implemented. Events are
   fired on key up, down and repeat are ignored. Adding a listener
   shortcuts the key being passed on for default processing. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/d62b2f33f5d5397758b06a33637e92ecd88694f6" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/d62b2f33f5d5397758b06a33637e92ecd88694f6</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/d62b2f33f5d53..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/d62b2f33f5d53...</a></a></p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>thanks for the test content. Confirmed on simulator and device
   (though on the nexus I did not have a camera button, so camera and
   focus were not tested).</p></div></li>
<li>Paul Dowsett 2011-06-21

   For those that need it, here's a working example:
   
   <code><pre>
   Ti.UI.setBackgroundColor('#000');
   
   var tabGroup = Ti.UI.createTabGroup();
   
   var win1 = Ti.UI.createWindow({
     backgroundColor:'white'
   });
   var tab1 = Ti.UI.createTab({
     title:'Tab 1',
     window:win1
   });
   
   var label1 = Ti.UI.createLabel({
     color:'#999',
     text:'click me',
     top:20
   });
   win1.add(label1);
   
   label1.addEventListener('click', function(){
     var winHeavy = Ti.UI.createWindow({
       title:'Heavywight Window',
       backgroundColor:'blue',
       fullscreen:false // this causes the window to be heavyweight
     });
     winHeavy.addEventListener('android:back', function(e) {
       Ti.API.info("Pressing Back Will Not Close The Activity/Window");
     });
     var label2 = Ti.UI.createLabel({
       color:'white',
       text:'Pressing the back button will test the Android back button event. Click this label to close this heavyweight window',
       top:20
     });
     winHeavy.add(label2);
     winHeavy.open();
   });
   var win2 = Ti.UI.createWindow({
     title:'Tab 2',
     backgroundColor:'green'
   });
   var tab2 = Ti.UI.createTab({
     title:'Tab 2',
     window:win2
   });
   
   tabGroup.addTab(tab1);
   tabGroup.addTab(tab2);
   
   tabGroup.open();
   </pre></code></li>
</ol>


<p><a href="/TIMOB/TIMOB-1641.json">JSON Source</a></p>