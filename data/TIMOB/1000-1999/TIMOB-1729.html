---
title: "[TIMOB-1729] Android: Setting zIndex fails on Views"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-11-05T13:38:12.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.2</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-37, Release 1.8.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Don Thorp</td></tr>
<tr><th>Assignee</th><td>Natalie Huynh</td></tr>
<tr><th>Created</th><td>2011-04-15T03:00:42.000+0000</td></tr>
<tr><th>Updated</th><td>2011-11-05T13:38:12.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>When zIndex is passed as a creation argument it works. Runtime
does not. It looks like there might be a setZIndex method that's in
the way.</p></div>

<h3>Comments</h3>

<ol>
<li>hal 2011-04-15

   <div><p>In the latest build, changing the zindex at runtime actually
   causes an exception.</p></div></li>
<li>Eduardo Gomez 2011-07-25

   <h4>Associated HD ticket</h4>
   <a href="http://appc.me/c/APP-764736" rel="nofollow" target="_blank">http://appc.me/c/APP-764736</a>
   
   <h4>Environment</h4>
   {noformat}
   Product: Mobile
   Titanium SDK: Mobile 1.7.1
   Platform OS: Android
   Platform OS Version: 2.2
   {noformat}
   
   <h4>Console Log output</h4>
   {panel}
   07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): (main) [241,422] Sending event: exception on thread: main msg:java.lang.NumberFormatException: unable to parse '1.0' as integer; Titanium 1.7.1,2011/06/13 15:34,4a68cc... 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): java.lang.NumberFormatException: unable to parse '1.0' as integer 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at java.lang.Integer.parse(Integer.java:433) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at java.lang.Integer.parseInt(Integer.java:422) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at java.lang.Integer.parseInt(Integer.java:382) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at org.appcelerator.titanium.util.TiConvert.toInt(TiConvert.java:253) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at org.appcelerator.titanium.view.TiUIView.propertyChanged(TiUIView.java:325) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at org.appcelerator.kroll.KrollPropertyChange.fireEvent(KrollPropertyChange.java:21) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at org.appcelerator.kroll.KrollProxy.handleMessage(KrollProxy.java:487) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at org.appcelerator.titanium.proxy.TiViewProxy.handleMessage(TiViewProxy.java:272) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at android.os.Handler.dispatchMessage(Handler.java:95) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at android.os.Looper.loop(Looper.java:123) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at android.app.ActivityThread.main(ActivityThread.java:4627) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at java.lang.reflect.Method.invokeNative(Native Method) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at java.lang.reflect.Method.invoke(Method.java:521) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 07-23 08:18:01.658: ERROR/TiUncaughtHandler(1143): at dalvik.system.NativeStart.main(Native Method) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): FATAL EXCEPTION: main 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): java.lang.NumberFormatException: unable to parse '1.0' as integer 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at java.lang.Integer.parse(Integer.java:433) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at java.lang.Integer.parseInt(Integer.java:422) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at java.lang.Integer.parseInt(Integer.java:382) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at org.appcelerator.titanium.util.TiConvert.toInt(TiConvert.java:253) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at org.appcelerator.titanium.view.TiUIView.propertyChanged(TiUIView.java:325) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at org.appcelerator.kroll.KrollPropertyChange.fireEvent(KrollPropertyChange.java:21) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at org.appcelerator.kroll.KrollProxy.handleMessage(KrollProxy.java:487) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at org.appcelerator.titanium.proxy.TiViewProxy.handleMessage(TiViewProxy.java:272) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at android.os.Handler.dispatchMessage(Handler.java:95) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at android.os.Looper.loop(Looper.java:123) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at android.app.ActivityThread.main(ActivityThread.java:4627) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at java.lang.reflect.Method.invokeNative(Native Method) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at java.lang.reflect.Method.invoke(Method.java:521) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 07-23 08:18:01.918: ERROR/AndroidRuntime(1143): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
   {panel}
   
   <h4>Workaround</h4>
   Set an index value to establish the position relative to other sibling views within an event listener. 
   <code><pre>
   var win = Ti.UI.createWindow({
   	backgroundColor:'white'
   });
   
   var scrollView = Ti.UI.createScrollView({height:200,top:0});
   win.add(scrollView);
   
   var myLastIndex = 9;
   
   var view1 = Ti.UI.createView({
   	backgroundColor:'pink',
   	zIndex: myLastIndex++,
   	width:200,
   	height:30,
   	top:10,
   	left:10
   });
   
   var view2 = Ti.UI.createView({
   	backgroundColor:'blue',
   	zIndex:myLastIndex++,
   	width:200,
   	height:30,
   	top:15,
   	left:15
   });
   
   var view3 = Ti.UI.createView({
   	backgroundColor:'red',
   	zIndex:myLastIndex++,
   	width:200,
   	height:30,
   	top:20,
   	left:20
   });
   
   scrollView.add(view3);
   scrollView.add(view2);
   scrollView.add(view1);
   
   var l = Ti.UI.createLabel({
   	text:'scroll view: red on top, blue in the middle, pink below, Click the RED one to sit on top the YELLOW one',
   	color:'#777',
   	width:300,
   	height:30,
   	top:50,
   	left:10,
   	font:{fontSize:12}
   });
   scrollView.add(l);
   
   view3.addEventListener('click',function()
   {	
   	var newView = Ti.UI.createView({
   		backgroundColor:parseInt ('#ff'+myLastIndex),
   		zIndex: myLastIndex++,	
   			width:200,
   			height:30,
   			top: 25,
   			left:25
   	});
   	
   	win.add(newView);
   	Ti.API.info('setting zIndex'+myLastIndex);
   });
   
   win.open();
   </pre></code>
   </li>
<li>Don Thorp 2011-09-12

   Test code for dynamic zIndex changes
   
   <code><pre>
   var win = Ti.UI.createWindow({
   	backgroundColor:'white'
   });
   
   var myLastIndex = 3;
   
   var view1 = Ti.UI.createView({
   	backgroundColor:'yellow',
   	zIndex: 1,
   	width:200,
   	height:50,
   	top:10,
   	left:10
   });
   
   var view2 = Ti.UI.createView({
   	backgroundColor:'blue',
   	zIndex:2,
   	width:200,
   	height:50,
   	top:35,
   	left:15
   });
   
   var view3 = Ti.UI.createView({
   	backgroundColor:'red',
   	zIndex:myLastIndex++,
   	width:200,
   	height:50,
   	top:60,
   	left:20
   });
   
   win.add(view3);
   win.add(view2);
   win.add(view1);
   
   var l = Ti.UI.createLabel({
   	text:'scroll view: red on top, blue in the middle, yellow below, Click the RED one to bring YELLOW forward. Click the YELLOW one to send it back.',
   	color:'#777',
   	width:300,
   	height:60,
   	top:150,
   	left:10,
   	font:{fontSize:12}
   });
   win.add(l);
   
   view1.addEventListener('click', function() {
   	if (view1.zIndex != 1) {
   		view1.setZIndex(1);
   	}
   });
   
   view3.addEventListener('click',function() {	
   	view1.zIndex = myLastIndex++;
   });
   
   win.open();
   </pre></code></li>
<li>Natalie Huynh 2011-09-14

   Tested with 1.8.0.v20110914092150 on 
   Nexus S 2.3.4
   Hero 2.1
   Gslate 3.1</li>
<li>Don Thorp 2011-11-05

   Fixing labels.</li>
</ol>


<p><a href="/TIMOB/TIMOB-1729.json">JSON Source</a></p>