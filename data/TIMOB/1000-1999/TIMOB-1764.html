---
title: "[TIMOB-1764] xcode 4.1 and Ti - unexpected debug output"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:57:06.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>4.1, ios, xcode</td></tr>
<tr><th>Reporter</th><td>Thomas Huelbert</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-04-15T03:01:35.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:57:06.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Encountered when launching the simulator or installing the app
after installing the xcode 4.1.</p>
<p>output:</p>
<p>Detected an attempt to call a symbol in system libraries that is
not present on the iPhone:</p>
<p>munmap$UNIX2003 called from function
_ZN2TI14ExecutablePool13systemReleaseERKNS0_10AllocationE in image
KitchenSink.</p>
<p>pthread_cond_init$UNIX2003 called from function
_ZN3WTI17TCMalloc_PageHeap4initEv in image KitchenSink.</p>
<p>Detected an attempt to call a symbol in system libraries that is
not present on the iPhone:</p>
<p>pthread_cond_wait$UNIX2003 called from function
_ZN3WTI17TCMalloc_PageHeap15scavengerThreadEv in image
KitchenSink.</p>
<p>Detected an attempt to call a symbol in system libraries that is
not present on the iPhone:</p>
<p>mmap$UNIX2003 called from function _Z20TCMalloc_SystemAllocmPmm
in image QAtests.</p>
<p>Detected an attempt to call a symbol in system libraries that is
not present on the iPhone:</p>
<p>pthread_cond_init$UNIX2003 called from function
_ZN3WTI17TCMalloc_PageHeap4initEv in image QAtests.</p>
<p>Detected an attempt to call a symbol in system libraries that is
not present on the iPhone:</p>
<p>pthread_cond_wait$UNIX2003 called from function
_ZN3WTI17TCMalloc_PageHeap15scavengerThreadEv in image QAtests.</p>
<p>Detected an attempt to call a symbol in system libraries that is
not present on the iPhone:</p>
<p>mprotect$UNIX2003 called from function
<em>ZN2TI3JIT35privateCompileCTIMachineTrampolinesEPN3WTI6RefPtrINS_14ExecutablePoolEEEPNS_12TiGlobalDataEPNS_21MacroAssemblerCodePtrES9_S9_S9</em>
in image QAtests.</p></div>

<h3>Comments</h3>

<ol>
<li>Robby 2011-04-15

   <div><p>Getting this same problem (as are others on the Q&amp;A pages).
   I'm wondering if this will prevent apps that are built up against
   4.1 from being approved in the app store, as Apple's static
   analysis tools may see these calls out to 'undefined' system
   functions as a violation of some sort?</p></div></li>
<li>Blain Hamon 2011-04-15

   <div><p>Note to self WRT what's going on here.</p>
   <p>The methods are in TiJSCore, the webkit javascript engine we
   use. mmap$UNIX2003 is a call to mmap compiled with the default
   settings (IE, since 2003, the API supports POSIX calls). The odd
   bit is that this header file is the same in 4.1, and the copyrights
   date back to 2009. Trying to recreate on my end to see if it's some
   fluke.</p>
   <p>In the mean time, considering that these are well-documented
   posix, Apple shouldn't be giving any problem, especially since it
   doesn't look like there's any related crashes.</p></div></li>
<li>Blain Hamon 2011-04-15

   <div><p>Indeed, this is due to Apple tweaking things, but shouldn't be a
   worry.</p>
   <p>Detailed reason:<br>
   The reason that the method was called "mmap$UNIX2003" was for
   backwards compatibility-- So Apple could have two versions of mmap
   due to behavior changes. These changes don't really matter for us,
   so we used the default. Both versions are present in iOS, but
   default chosen for us by Apple changed between 4.0 and 4.1, with
   the intent that the older version will be phaseed out (thus the
   warning). It was 'fixed' by recompiling libTiCore to 4.1 with nary
   a code change.</p>
   <p>Cut to the chase:<br>
   This won't be problem, has been fixed, and works fine with
   3.1.3-4.1 with no complaints, sim or device.</p>
   <p>For those of you playing the home game:<br>
   This will be in the next release, but if you truly need to get the
   newer libTiCore, it'll be at <a href=
   "<a href="http://timobile.appcelerator.com.s3.amazonaws.com/libTiCore-8.a.gz" rel="nofollow" target="_blank">http://timobile.appcelerator.com.s3.amazonaws.com/libTiCore-8.a.gz</a>">
   <a href="http://timobile.appcelerator.com.s3.amazonaws.com/libTiCore-8.a.gz" rel="nofollow" target="_blank">http://timobile.appcelerator.com.s3.amazonaws.com/libTiCore-8.a.gz</a></a>
   .</p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>back to you Blain. The fix was removed from 1.4.2 as it was
   creating the crash on launch issue.</p></div></li>
<li>Blain Hamon 2011-04-15

   <div><p>The trick was pulling the jit. <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/b09e53c04e8bd704c058b06961e5598632026296" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/b09e53c04e8bd704c058b06961e5598632026296</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/b09e53c04e8b..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/b09e53c04e8b...</a></a></p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>1.5.0.3ee6a97</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-1764.json">JSON Source</a></p>