---
title: "[TIMOB-1773] Kitchensink opens on wrong tab"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2011-04-15T03:01:54.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Backlog</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>api, ios, regression, scrub, setactivetab</td></tr>
<tr><th>Reporter</th><td>Thomas Huelbert</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-04-15T03:01:49.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-03T07:01:01.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>1.using todays pull, build and install KS on device or
simulator<br>
2.launch and note which tab is opened</p>
<p>results: opens to PLatform tab (tab3), when the script indicates
it should open controls (tab 1)</p>
<p>tabGroup.setActiveTab(1);</p>
<p>this just broke</p></div>

<h3>Comments</h3>

<ol>
<li>Thomas Huelbert 2011-04-15

   <div><p>changed erroneous title</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>This is an order of operations problem. Here's the issue:</p>
   <pre>
   <code>var tab4 = Titanium.UI.createTab({
   ...
       active:true
   });
   ...
   tabGroup.addTab(tab4);
   ...
   tabGroup.setActiveTab(1);
   ...
   tabGroup.open(...)</code>
   </pre>
   <p>tab4 is explicitly set as 'active', but then before opening the
   tab group itself, we set the actual active tab. So which takes
   precedence? What if there's more than one tab marked as 'active'
   when it's added to the tab group before opening? Currently, the
   first tab in the bar with 'active:true' is focused.</p>
   <p>We need some clarification on the issue. The reason order
   started changing is probably because of an iOS change, where one
   property was being set before the other - wasn't this around when a
   new 4.1b/4.1 was released?</p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>I'm not sure I can answer these question (I'm not 100% sure
   about the timing relative to 4.1), assigning to Ralf. If the
   current behavior is correct, should android change its to reflect
   this for parity?</p></div></li>
<li>Ralf Pfeiffer 2011-04-15

   <div><p>I don't know much but my expectation would be that the active
   tab is set to 1, and that should be the active tab, which seems to
   be the old behavior on IOS and the current behavior on Android.</p>
   <p>To keep compatibility and just my instinct tells me we should
   honor the "last" setActiveTab execution, if more than one
   exists.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Here's the problem. I do the following, instead of what's
   described above:</p>
   <pre>
   <code>tabGroup.setActiveTab(0);
   tabGroup.add(Ti.UI.createTab({
     active:true
   })
   tabGroup.open()</code>
   </pre>
   <p>Which one gets respected? We have no way to tell which was set
   first upon opening. We should simply say that the order is
   undefined.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Sorry, changing back to needs-more-info.</p></div></li>
<li>Ralf Pfeiffer 2011-04-15

   <div><p>Steve, it is always the last.</p>
   <p>Fundamentally whether by setActiveTab or via tab.group.add(...
   active:true), the last one wins before the tabGroup.open()</p>
   <p>At the point of tabGroup.open() it should be the tab that was
   created and added in your latest example.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>My point is that we don't KNOW which change was last when the
   tab is opened. It's obvious in the user's JS, but that's not how
   Titanium works internally - all properties are, for all intents and
   purposes, set in a specific order all the time always (there are in
   fact a lot of features which depend on this) upon certain
   operations (in this case, opening the tab group causes all of them
   to be set "for real").</p>
   <p>So we can't determine that information from property settings on
   either the tab or the tab group. The order is thus indeterminate
   and we should document it as such.</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/aa66687741d962455f0d191e06e872b628f85ff9"
   title=
   "Changeset [aa66687741d962455f0d191e06e872b628f85ff9]">[aa66687741d962455f0d191e06e872b628f85ff9]</a>)
   [<a href="/projects/32238/tickets/1773" title=
   "Ticket #1773">#1773</a> state:fixed-in-qa] Documentation updated
   to reflect ambiguous ordering of tab activation. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/aa66687741d962455f0d191e06e872b628f85ff9" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/aa66687741d962455f0d191e06e872b628f85ff9</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/aa66687741d96..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/aa66687741d96...</a></a></p></div></li>
<li>Blain Hamon 2011-04-15

    <div><p>Question:</p>
    <pre>
    <code>tabGroup = Ti.UI.createTabGroup({
        activeTab:1,
        tabs:[
            tabGroup.add(Ti.UI.createTab({active:true}),
            tabGroup.add(Ti.UI.createTab({})
            ]
        })
    tabGroup.open()</code>
    </pre>
    <p>Entries in a dict/object are unordered. Who wins?</p></div></li>
<li>Ralf Pfeiffer 2011-04-15

    <div><p>OK, let's take a deep breath everyone. :)</p>
    <p>Let's all think the rationale for having an "active: boolean"
    property on Tab.</p>
    <p>Why do we need it?</p>
    <p>I think the undefined issue (above) would go away if it was
    either "deprecated" or "read-only".</p>
    <p>Why don't we think about this, and "do the right thing" if we
    can.<br></p>
    <p>Steve, I'll take it back and change the state.</p>
    <p>When we understand the rationale and arguments, we'll have to
    make a call make it part of the "spec" that doesn't exist now but
    will exist sometime soon. :)</p></div></li>
<li>Stephen Tramer 2011-04-15

    <div><p>That sounds good. For now, I'm leaving the documentation change
    in.</p>
    <p>That's a good question. Tabs should have 'active' as a read-only
    property to determine whether or not they're the currently
    displayed tab.</p></div></li>
<li>Blain Hamon 2011-04-15

    <div><p>What did we choose on this, again?</p></div></li>
<li>Ralf Pfeiffer 2011-04-15

    <div><p>The comments above are relevant. I will have some interesting
    observations in our upcoming API scrub.</p>
    <p>If we see this as an "ordering issue", please make sure that our
    KS code is "fixed" to launch to the first tab on both
    platforms.</p>
    <p>Assigning to Steve to fix KS ASAP!</p></div></li>
<li>Jeff Haynie 2011-04-15

    <div><p>(from <a href=
    "/projects/32238/changesets/e3c8d2a13c626d84582035d4217bd4ec7ab8508f"
    title=
    "Changeset [e3c8d2a13c626d84582035d4217bd4ec7ab8508f]">[e3c8d2a13c626d84582035d4217bd4ec7ab8508f]</a>)
    [<a href="/projects/32238/tickets/1773" title=
    "Ticket #1773">#1773</a>] Updated KS to always start on 1st (Base
    UI) tab, unambiguously. <a href=
    "<a href="https://github.com/appcelerator/titanium_mobile/commit/e3c8d2a13c626d84582035d4217bd4ec7ab8508f" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/e3c8d2a13c626d84582035d4217bd4ec7ab8508f</a>">
    <a href="https://github.com/appcelerator/titanium_mobile/commit/e3c8d2a13c62..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/e3c8d2a13c62...</a></a></p></div></li>
<li>Stephen Tramer 2011-04-15

    <div><p>Setting to TBS because the requested KS change was made.</p></div></li>
<li>Thomas Huelbert 2011-04-15

    <div><p>Hey Stephen - I believe we need to keep line 90. If we comment
    out both 90 and 57 we get default tab set, which gets rid of the
    test in KS. I ran this by Blain and he agrees. Ralfs at lunch right
    now, wanted to send this back.</p>
    <p>tabGroup.setActiveTab(1);</p></div></li>
<li>Jeff Haynie 2011-04-15

    <div><p>(from <a href=
    "/projects/32238/changesets/cf498dde5a379ec9b361ff20bc8e694c1e83177e"
    title=
    "Changeset [cf498dde5a379ec9b361ff20bc8e694c1e83177e]">[cf498dde5a379ec9b361ff20bc8e694c1e83177e]</a>)
    [<a href="/projects/32238/tickets/1773" title=
    "Ticket #1773">#1773</a>] Provided requested fix. NOT marking this
    bug fixed because the underlying issue is not resolved. <a href=
    "<a href="https://github.com/appcelerator/titanium_mobile/commit/cf498dde5a379ec9b361ff20bc8e694c1e83177e" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/cf498dde5a379ec9b361ff20bc8e694c1e83177e</a>">
    <a href="https://github.com/appcelerator/titanium_mobile/commit/cf498dde5a37..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/cf498dde5a37...</a></a></p></div></li>
<li>Ralf Pfeiffer 2011-04-15

    <div><p>The observations are correct that the order cannot be determined
    esp when using the activetab property.</p>
    <p>In a future API scrub, we will discuss this property. If it
    should exist at all maybe it should be read-only.</p>
    <p>The only remaining question is setActiveTab().</p>
    <p>My opinion is that if multiple calls exist, the last call to
    this function should be the tab that is active. Again, fodder for
    our API scrub.</p>
    <p>Our KitchenSink example is fixed and works the same on both
    platforms as it should right now.</p>
    <p>My action is to place it in the TBS release, with
    needs-more-info state and another tag stating it is due for API
    scrub.</p></div></li>
<li>Lee Morris 2017-03-03

    Closing ticket due to time passed and irrelevance. </li>
</ol>


<p><a href="/TIMOB/TIMOB-1773.json">JSON Source</a></p>