---
title: "[TIMOB-1778] Android: Add Method to TiBlob for Retrieving Underlying File"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:57:08.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0 M03</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, feature</td></tr>
<tr><th>Reporter</th><td>Don Thorp</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-04-15T03:02:00.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:57:08.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>See <a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/42281" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/42281</a>">Helpdesk
42281</a>. Add a method to TiBlob.getFile() that returns the
underlying file if it exists. If the TiBlob is not a reference to a
file return <code>null</code>.</p></div>

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-04-15

   <div><p>From the developer-facing API perspective, the right thing to do
   here would be to return a FileProxy. However, TiBlob lives in the
   titanium project (non-module), which to date has no references to
   our modules.</p>
   <p>What do you think is the right way to handle this? Return a
   TiFile, which lacks API documentation?</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>Maybe we should just documenting returning a path that can be
   passed to the filesystem API to get a file object. Would that
   suffice?</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>.nativePath it is.</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>Setting back to "new" while not working on it. Still have no
   idea how to get a file path from a content url, and sick of looking
   for it for now.</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/c5979f87e17694a280d1181d6aafeda399c42d52"
   title=
   "Changeset [c5979f87e17694a280d1181d6aafeda399c42d52]">[c5979f87e17694a280d1181d6aafeda399c42d52]</a>)
   [<a href="/projects/32238/tickets/1778" title=
   "Ticket #1778">#1778</a> state:open] Give TiBlob a nativePath
   property, but still need it to handle content:// urls in such a way
   as to be useful to users wnating to create file proxies with it.
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/c5979f87e17694a280d1181d6aafeda399c42d52" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/c5979f87e17694a280d1181d6aafeda399c42d52</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/c5979f87e176..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/c5979f87e176...</a></a></p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/36832a4b1976704db3bc1c37120a6950d157039d"
   title=
   "Changeset [36832a4b1976704db3bc1c37120a6950d157039d]">[36832a4b1976704db3bc1c37120a6950d157039d]</a>)
   [<a href="/projects/32238/tickets/1778" title=
   "Ticket #1778">#1778</a> state:fixed-in-qa] New .nativePath
   property will resolve content urls to paths <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/36832a4b1976704db3bc1c37120a6950d157039d" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/36832a4b1976704db3bc1c37120a6950d157039d</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/36832a4b1976..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/36832a4b1976...</a></a></p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>Bear with me while I make a test case - coming soon</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>QA: here is an app.js you can use to test this. I'm morphing it
   into a drillbit test as well, to be committed soon:</p>
   <pre>
   <code class="javascript">Titanium.UI.setBackgroundColor('#000');
   var win = Titanium.UI.createWindow({  
       title:'Test',
       backgroundColor:'#fff',
       exitOnClose: true
   });
   win.open()
   
   var console = Ti.UI.createLabel({
       left:0, right:0, top: 0, height: 400,
       backgroundColor: 'black', color: 'white',
       font: {fontSize: 12}, verticalAlign: 'top'
   });
   win.add(console);
   
   function w(s){
       if (console.text &amp;&amp; console.text.length &gt; 0) {
           console.text = console.text+ '\n\n* ' + s;
       } else {
           console.text = '* ' + s;
       }
   }
   
   var filename = 'blobtest';
   var testphrase = 'Revenge of the Blob';
   
   w('getting file with path segments ' + Ti.Filesystem.applicationDataDirectory + ', ' + filename);
   
   var file = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, filename);
   
   if (file.exists()) {
       w('file exists.  deleting it.');
       file.deleteFile();
   } else {
       w('file did not exist -- no need to delete it.');
   }
   
   w('putting text "' + testphrase + '" into file');
   
   file.write(testphrase);
   
   w('getting blob based on file');
   
   var blob = file.read();
   
   w('destroying original file variable instance to test getting it back via blob');
   
   file = null;
   
   var path = blob.nativePath;
   
   w("blob says file's path is " + path);
   w("getting new file instance based on that path");
   file = Ti.Filesystem.getFile(path);
   if (file.exists()) {
       w("Good - file is said to exist when I get it from that path.");
       w("Will read contents and see if they match the phrase we put in earlier.");
       var readphrase = file.read().text;
       w('Read this text: "' + readphrase + '"');
       if (testphrase === readphrase) {
           w('Yay! The phrases match.  TEST SUCCESSFUL');
       } else {
           w('FAIL!  The phrases do not match.  Something is wrong.');
       }
   } else {
       w("FAIL - file is said to not exist.  Something is wrong.");
   }</code>
   </pre></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/49374740a28357a89073e187edd5d57a99b0d296"
   title=
   "Changeset [49374740a28357a89073e187edd5d57a99b0d296]">[49374740a28357a89073e187edd5d57a99b0d296]</a>)
   [<a href="/projects/32238/tickets/1778" title=
   "Ticket #1778">#1778</a>][<a href="/projects/32238/tickets/2553"
   title="Ticket #2553">#2553</a>] Unit test for new blob.nativePath
   property <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/49374740a28357a89073e187edd5d57a99b0d296" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/49374740a28357a89073e187edd5d57a99b0d296</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/49374740a283..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/49374740a283...</a></a></p></div></li>
<li>Bill Dawson 2011-04-15

    <div><p>(from <a href=
    "/projects/32238/changesets/cad3cbee2789d5bb34454a80e85d81bf451f73c4"
    title=
    "Changeset [cad3cbee2789d5bb34454a80e85d81bf451f73c4]">[cad3cbee2789d5bb34454a80e85d81bf451f73c4]</a>)
    [<a href="/projects/32238/tickets/1778" title=
    "Ticket #1778">#1778</a>][<a href="/projects/32238/tickets/2553"
    title="Ticket #2553">#2553</a>] Unit test for new blob.nativePath
    property <a href=
    "<a href="https://github.com/appcelerator/titanium_mobile/commit/cad3cbee2789d5bb34454a80e85d81bf451f73c4" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/cad3cbee2789d5bb34454a80e85d81bf451f73c4</a>">
    <a href="https://github.com/appcelerator/titanium_mobile/commit/cad3cbee2789..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/cad3cbee2789...</a></a></p></div></li>
<li>Thomas Huelbert 2011-04-15

    <div><p>G2 2.2 RC2. Bill you rock</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-1778.json">JSON Source</a></p>