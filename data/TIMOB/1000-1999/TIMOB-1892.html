---
title: "[TIMOB-1892] Ask again for geolocation on device"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:57:28.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>defect, geolocation, ios, ipad, iphone, rplist</td></tr>
<tr><th>Reporter</th><td>ctredway</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-04-15T03:04:50.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:57:28.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>When asking permission to use the users location on a device, if
they refuse, we need to ask again instead of throwing an error.
This is what happens when running in the simulator, but not on the
device. iphone, ipad.</p></div>

<h3>Comments</h3>

<ol>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/4f30af9bc90694ac299fff4b8123ef25094f0012"
   title=
   "Changeset [4f30af9bc90694ac299fff4b8123ef25094f0012]">[4f30af9bc90694ac299fff4b8123ef25094f0012]</a>)
   [<a href="/projects/32238/tickets/1892" title=
   "Ticket #1892">#1892</a> state:fixed-in-qa] Added
   Ti.Geolocation.restart() function to reset the geolocation system.
   Allows for multiple location usage prompts when using 'location'
   listeners. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/4f30af9bc90694ac299fff4b8123ef25094f0012" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/4f30af9bc90694ac299fff4b8123ef25094f0012</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/4f30af9bc9069..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/4f30af9bc9069...</a></a></p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>1.4.2.4c5cd4a 4.1 4th gen ipod touch, 3.1.2 3g iphone</p></div></li>
<li>ziggamon 2011-04-15

   <div><p>Running Ti.Geolocation.restart() actually stops all execution of
   the app - nothing more is run after that. Tested on device running
   1.5.1 nightly.</p>
   <p>Basic Testcase:</p>
   <p>function updateUserPosition(e){<br>
   if (e.error){</p>
   <pre>
   <code>Ti.Geolocation.restart();</code>
   </pre>
   <p>} }
   Titanium.Geolocation.getCurrentPosition(updateUserPosition);</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/0aa7b139acfca905e2d47ed4d4b71760493bd840"
   title=
   "Changeset [0aa7b139acfca905e2d47ed4d4b71760493bd840]">[0aa7b139acfca905e2d47ed4d4b71760493bd840]</a>)
   [<a href="/projects/32238/tickets/1892" title=
   "Ticket #1892">#1892</a>] restart() was causing deadlock. <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/0aa7b139acfca905e2d47ed4d4b71760493bd840" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/0aa7b139acfca905e2d47ed4d4b71760493bd840</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/0aa7b139acfc..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/0aa7b139acfc...</a></a></p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/aac216b9ebad433e12df036886b052cec2e8b985"
   title=
   "Changeset [aac216b9ebad433e12df036886b052cec2e8b985]">[aac216b9ebad433e12df036886b052cec2e8b985]</a>)
   [<a href="/projects/32238/tickets/1892" title=
   "Ticket #1892">#1892</a>] Whoops, forgot to change the alloc. Note
   that as of 4.2 (at least) restart() does not perform the expected
   ask-again because it's now codified in HIG that CL only asks once.
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/aac216b9ebad433e12df036886b052cec2e8b985" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/aac216b9ebad433e12df036886b052cec2e8b985</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/aac216b9ebad..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/aac216b9ebad...</a></a></p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-1892.json">JSON Source</a></p>