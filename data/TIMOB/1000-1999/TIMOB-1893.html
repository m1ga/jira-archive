---
title: "[TIMOB-1893] XHR call fails after network switching"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2011-04-15T03:04:54.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>defect, ios, iphone, rplist, xhr</td></tr>
<tr><th>Reporter</th><td>ctredway</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-04-15T03:04:53.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-02T19:32:23.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>on iOS 3 &amp; iOS 4 when the device switches from wifi to
cellular or vice versa the xhr call errors.</p>
<p>see this ticket.<br>
<a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/43581" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/43581</a>"><a href="http://developer.appcelerator.com/helpdesk/view/43581" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/43581</a></a></p></div>

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2011-04-15

   <div><p>There is a very good reason why this behaves the way it does,
   and the behavior is "correct" and something we have no control over
   as it happens at the system and hardware level.</p>
   <p>WiFi (en0) and data (some other device, I forget) are different
   interfaces. Say that we have an HTTP request which starts on en0,
   which is then terminated. This means that the connection to the
   actual hardware interface has been terminated, which
   <strong>SHOULD</strong> be a cancel error. In addition, sometimes
   hardware is very bad about reporting its status as having the
   network terminated. In particular, there's the following
   scenario:</p>
   <ul>
   <li>An HTTP request goes through on WiFi and negotiations are
   started</li>
   <li>WHILE the request is being processed, WiFi goes down</li>
   <li>But since the request has "completed", timeout doesn't take
   effect - instead we wait for the response for an indeterminate
   amount of time</li>
   </ul>
   <p>Here is what the user should do instead.</p>
   <ul>
   <li>Watch for reachability changes on their own</li>
   <li>When reachability changes, CANCEL AND RESTART any outgoing HTTP
   requests</li>
   </ul>
   <p>Remember: When using HTTP, you are responsible for managing all
   of your connection information, up to and including monitoring for
   reachability changes.</p></div></li>
<li>Lee Morris 2017-03-02

   Closed as invalid.</li>
</ol>


<p><a href="/TIMOB/TIMOB-1893.json">JSON Source</a></p>