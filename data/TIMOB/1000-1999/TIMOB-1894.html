---
title: "[TIMOB-1894] Android: support read-write contacts"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-06-15T21:53:18.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.0, Sprint 2012-12 API</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>api, look1, parity</td></tr>
<tr><th>Reporter</th><td>Bill Dawson</td></tr>
<tr><th>Assignee</th><td>Hieu Pham</td></tr>
<tr><th>Created</th><td>2011-04-15T03:04:55.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-16T22:52:13.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Currently the android implementation of our contacts api is
read-only. We don't support modifications of contacts or creation
of new contacts. We should.</p></div>

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-04-15

   <div><p>assigning to Herr T for milestoning.</p></div></li>
<li>Moshe Marciano 2011-04-15

   <div><p>for me the priority should be upgraded to high, this situation
   leaves cross-platform apps crippled on one platform</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>Research for M04</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>This was put into M04 only for research purposes to try to scope
   the effort. After review, my assessment is that this is will be a
   fairly major effort.<br></p>
   <ul>
   <li>iOS has it "easy" -- each Person is backed by a ref to an
   actual address book object, an <code>ABRecordRef</code>
   (<code>AB</code> being the prefix for address book stuff). So when
   properties are changed on Titanium's <code>TiContactsPerson</code>,
   the properties are then just changed on that object. Android
   doesn't do this provider stuff with objects, rather via queries in
   provider database system. So when changes are made to properties of
   a <code>PersonProxy</code> in Titanium Android, we can't just turn
   around and update an in-memory object.</li>
   <li>Similarly, iOS has it "easy" because when it comes time to save
   any and all changes made to one or more contact persons during the
   session -- i.e., when the Titanium JS code calls
   <code>Titanium.Contacts.save()</code> -- they just need to call
   <code>ABAddressBookSave</code> and all changes to
   <code>ABRecordRef</code>s up to that point are committed. In the
   case of Android, we'll have to work harder in the sense of somehow
   caching changes and applying them at <code>save()</code> time.</li>
   <li>Android, since 2.0, has the notion of aggregated contacts. When
   you present the contacts picker to the user, for example, you get a
   listing of aggregated contacts. When the user selects a contact,
   they get an aggregated contact record in our
   <code>PersonProxy</code>. If the Titanium JS code then modifies
   properties on that <code>PersonProxy</code> and
   <code>Titanium.Contacts.save()</code> is called, which of the
   aggregated contact entries should be updated? We have to think
   about that carefully. (Note: If I use my Android 2.2 phone and go
   to People, pick a contact which I know is an aggregate and click
   the menu and choose "Edit", I'm prompted with a list of the
   underlying (non-aggregate) entries and asked to select which one I
   want to edit. So you can see this is an issue.)</li>
   <li>We're currently supporting pre-2.0 contacts because we support
   Android 1.6. (Android Contacts API went through a major overhaul
   starting in 2.0.) This is already a PITA and will be more so for
   writable contacts. For example, the most straightforward way to try
   to cache changes and apply them later with
   <code>Titanium.Contacts.save()</code> would be to cache them in an
   array list containing Android <code>ContentProviderOperation</code>
   instances and then use <code>ContentResolver.applyBatch</code> when
   <code>Titanium.Contacts.save()</code> is called. <strong>None of
   that stuff is available in Android 1.6.</strong></li>
   </ul>
   <p>Assigning for further milestoning.</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>This is a natural fit for the next release when we drop support
   for Api Level 4.</p></div></li>
<li>Alan Leard 2011-07-29

   Customer's would like to see this implemented as soon as it's possible.  Bumping priority to gain visibility.</li>
<li>Eduardo Gomez 2011-08-01

   <h4>Associated HD ticket</h4>
   Another Customer relies on this, <a href="http://appc.me/c/APP-673928" rel="nofollow" target="_blank">http://appc.me/c/APP-673928</a></li>
<li>Moshe Marciano 2011-08-12

   I think google offers a migration plan with code to code samples on how to move from the pre 2.0 release to the new contact model.
   
   <a href="http://developer.android.com/resources/articles/contacts.html" rel="nofollow" target="_blank">http://developer.android.com/resources/articles/contacts.html</a>
   </li>
<li>Michael Gangolf 2012-05-06

   is there a fallback solution at the moment or is it not possible to save contacts at all for now?</li>
<li>Vishal Duggal 2012-06-15

    Raised a separate ticket for modify contact functionality. TIMOB-9589</li>
<li>Lee Morris 2017-03-16

    Closing ticket as fixed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-1894.json">JSON Source</a></p>