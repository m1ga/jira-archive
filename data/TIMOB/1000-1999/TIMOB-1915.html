---
title: "[TIMOB-1915] iOS: Analytics crash (SIGABRT) when using featureEvent"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2012-10-31T00:29:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Fix Version/s</th><td>2012 Sprint 22 Core, 2012 Sprint 22</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>core</td></tr>
<tr><th>Reporter</th><td>Robby</td></tr>
<tr><th>Assignee</th><td>Max Stepanov</td></tr>
<tr><th>Created</th><td>2011-04-15T03:05:29.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-08T23:59:56.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>SDK 1.4.1.1 on iOS SDK 4.1. I figured I'd use Ti.Analytics
custom events to get more info out of my app. So, I added a number
of them around my codebase, using syntax such as:</p>
<p>Ti.Analytics.featureEvent("myevent1");<br>
Ti.Analytics.featureEvent("myevent2", {extraData: "test"});<br>
(seems pretty sane, along what the docs say).</p>
<p>However, when I start my app up, after the first analytics call
the app will predictably crash within 30 seconds with EXC_CRASH
(SIGABRT) and a reason of "NSMutableArray insertObject:atIndex:]:
attempt to insert nil object at 0'". This crash happens in both the
simulator, and on a device (both iOS 3.1.3 and 4.1). Removing just
these calls and deleting/reinstalling the app on the
phone/simulator makes the app run fine without crashes, and adding
them back in starts the crashes again.</p>
<p>I've tried removing the build directory and regenerating it, and
am going from a fresh install of Titanium that works fine with
everything else.</p>
<p>A full trace of the crashes is at: <a href=
"<a href="http://pastebin.com/Gvf39NLg" rel="nofollow" target="_blank">http://pastebin.com/Gvf39NLg</a>"><a href="http://pastebin.com/Gvf39NLg" rel="nofollow" target="_blank">http://pastebin.com/Gvf39NLg</a></a></p>
<p>P.S. Looking at AnalyiticsModule.m (<a href=
"<a href="http://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/AnalyticsModule.m" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/AnalyticsModule.m</a>"><a href="http://github.com/appcelerator/titanium_mobile/blob/master/iphone/C..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/blob/master/iphone/C...</a></a>)
line 164 could be the culprit...if for some reason what's coming
back in line 163 is nil (as no validation is done to it).</p></div>

<h3>Comments</h3>

<ol>
<li>Robby 2011-04-15

   <div><p>Wanted to add that the crashes will begin after I've hit one of
   those fireEvent lines. If I actually remove the calls, I need to
   delete and reinstall the app on my phone to get rid of the SQL
   database that Analytics has. Otherwise, I'll just start it up again
   and it will crash again within 20-30 seconds. With a fresh install
   on the device then, things work fine as long as I don't hit a
   fireEvent line.</p></div></li>
<li>Robby 2011-04-15

   <div><p>Marshall: Just wanted to make this ticket aware to you guys, as
   some other folks have created some analytics-crashing related
   tickets. Analytics may need some TLC. :)</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Probably fixed along with many other analytics bugs.</p></div></li>
<li>Stephen Tramer 2012-07-26

   Confirmed SDK 2.2.0.014b86f. Code snippet alone is enough to reproduce on simulator.</li>
<li>Max Stepanov 2012-10-31

   Was able to reproduce with build 014b86f. Cannot reproduce on master/3_0_X/2_1_X branches.</li>
<li>Lee Morris 2017-03-08

   Closing ticket as the issue cannot be reproduced.</li>
</ol>


<p><a href="/TIMOB/TIMOB-1915.json">JSON Source</a></p>