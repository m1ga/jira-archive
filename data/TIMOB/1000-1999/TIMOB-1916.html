---
title: "[TIMOB-1916] randomly xhr requests do not kill the loading indicator"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:57:32.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>defect, ios, ipad, iphone, rplist, xhr</td></tr>
<tr><th>Reporter</th><td>ctredway</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-04-15T03:05:30.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:57:32.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>On the iphone, sdks 4.x and Ti sdk 1.4.x at random xhr requests
do not kill the loading indicator when the onload event fires.
Customer reproduced this using the KS xhr examples.</p></div>

<h3>Comments</h3>

<ol>
<li>Gunther Brunner 2011-04-15

   <div><p>Hi, I have to add that on Android 2.1/Ti 1.4.2 I've had the same
   problem.<br>
   But I just cannot reproduce it most of the times. I think there's
   some problem with the events firing. I've had to replace most of my
   code with callback functions because of this.</p></div></li>
<li>Greg Pierce 2011-04-15

   <div><p>This is not random in trunk as of this week. It's consistent on
   every HTTPClient request on iOS SDK 4.1/1.4.2. Both in simulator
   and on the device. I can't release an app with this, it's
   unprofessional to leave that spinner flying.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Able to reproduce in KS: KS-&gt;Platform-&gt;XHR-&gt;File
   Download-&gt;Large File Download. Ignore earlier requests for more
   information, sorry guys.</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/67c9341488bf72b0f066978cc4ca860daa2ee788"
   title=
   "Changeset [67c9341488bf72b0f066978cc4ca860daa2ee788]">[67c9341488bf72b0f066978cc4ca860daa2ee788]</a>)
   [<a href="/projects/32238/tickets/1916" title=
   "Ticket #1916">#1916</a> state:fixed-in-qa] Proper return value
   check for stopNetwork, use OS barrier methods now to ensure order
   of ops. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/67c9341488bf72b0f066978cc4ca860daa2ee788" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/67c9341488bf72b0f066978cc4ca860daa2ee788</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/67c9341488bf7..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/67c9341488bf7...</a></a></p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Thom, assigning this to you so that you can confirm and I can
   patch into 1_4_X ASAP.</p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>Using 1.5.0.62c1cae I am still seeing the spinner persist using
   KS-&gt;Platform-&gt;XHR-&gt;File Download-&gt;Large File Download
   4.1 4th gen ipod touch</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/ff572d3112aab7152833835e71988245a66cb6fa"
   title=
   "Changeset [ff572d3112aab7152833835e71988245a66cb6fa]">[ff572d3112aab7152833835e71988245a66cb6fa]</a>)
   [<a href="/projects/32238/tickets/1916" title=
   "Ticket #1916">#1916</a> state:fixed-in-qa] For real this time, as
   the in/decrements are atomic, the if statement is not. It's easier
   and faster to do this all on the main thread instead of locks.
   <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/ff572d3112aab7152833835e71988245a66cb6fa" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/ff572d3112aab7152833835e71988245a66cb6fa</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/ff572d3112aab..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/ff572d3112aab...</a></a></p></div></li>
<li>Blain Hamon 2011-04-15

   <div><p>Closing as per Thom. After fix, could not recreate, and the new
   logic should be rather robust in this.</p></div></li>
<li>Marko Perutovic 2011-04-15

   <div><p>well, in today nightly it's still broken in KS</p></div></li>
<li>Sj101 2011-04-15

    <div><p>Still an issue here from nightly build.</p></div></li>
<li>Sj101 2011-04-15

    <div><p>My comment is referring to iPhone 4 and stimulator, have not
    tested on iPad.</p></div></li>
<li>Stephen Tramer 2011-04-15

    <div><p>Nightly builds are done off of 1_4_X, our guaranteed stable
    branch. Fixes are checked into a different branch. I will put the
    patch into the appropriate branch and then you should be able to
    get an updated nightly build. If you require the latest Titanium
    you may always obtain it from <a href=
    "<a href="http://github.com/appcelerator/titanium_mobile/tarball/master" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/tarball/master</a>"><a href="http://github.com/appcelerator/titanium_mobile/tarball/master" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/tarball/master</a></a>.</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-1916.json">JSON Source</a></p>