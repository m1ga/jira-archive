---
title: "[TIMOB-1964] Android: kitchensink opens on a blank window after being backgrounded and device sleeps."
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-07-08T09:36:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-22, Release 1.7.2</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, background, defect, reported-1.4.0, rplist, sleep, tbs-1.7.1</td></tr>
<tr><th>Reporter</th><td>Thomas Huelbert</td></tr>
<tr><th>Assignee</th><td>Opie Cyrus</td></tr>
<tr><th>Created</th><td>2011-04-15T03:06:40.000+0000</td></tr>
<tr><th>Updated</th><td>2013-05-10T19:53:13.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>pastie of logcat:<br>
<a href=
"<a href="http://pastie.org/1192004" rel="nofollow" target="_blank">http://pastie.org/1192004</a>"><a href="http://pastie.org/1192004" rel="nofollow" target="_blank">http://pastie.org/1192004</a></a></p>
<p>I've sen this a few times recently.<br>
1.Launch KS (seen on a G1 running 1.6).<br>
2.background it, let the device fall asleep for some time (more
than a few minutes anyway)<br>
3.wake device, launch app from app drawer</p>
<p>results: blank window with "kitchen sink" header. Pressing the
back button quits the app (next launch will show the app
splash)</p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-1964_18600/AndroidManifest.xml">AndroidManifest.xml</td></td><td>2011-05-31T13:39:45.000+0000</td><td>3104</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Thomas Huelbert 2011-04-15

   <div><p>Moving to 1.5.1 as per Don</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>First step is to get a reproduction sequence and determine
   cause. This may take more than one milestone to fix.</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>Still don't have a good reproduction sequence.</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>Duplicates</p>
   <ul>
   <li><a href="/projects/32238/tickets/3013" title=
   "Ticket #3013">#3013</a> - Android: Leaving app in background for
   several hours causes next run to hang</li>
   <li><a href="/projects/32238/tickets/3037" title=
   "Ticket #3037">#3037</a> - Android: Pressing Home and resuming
   application gives black screen</li>
   </ul></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>Commit:</p>
   <p><a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/566bdf31b8916b7323fc01fd98ecfedf8b83d2a6" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/566bdf31b8916b7323fc01fd98ecfedf8b83d2a6</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/566bdf31b891..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/566bdf31b891...</a></a></p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>This is caused by Android telling the Activities to restart
   <em>without finishing</em>. Our lifecycle implementation can't
   currently handle that, and a much bigger ticket will be created for
   that. In the meantime, to get past the blank screen, we detect this
   and simply restart the app.</p>
   <p>In my testing, it actually took several hours to "fall asleep",
   so to speak -- i.e, to be in the background long enough for Android
   to tell the activities to restart the next time the user brings the
   application forward. In order to save testing time, you can
   re-create a failcase and test the fix by doing something else on
   the device (either emulator or handset) which leads Android to do
   this special "restart without finish" sequence which we were
   failing to handle. Namely, you can change the language of the
   device.</p>
   <p>Follow these steps to test:</p>
   <ul>
   <li>
   <p>Launch Kitchen Sink</p>
   </li>
   <li>
   <p>After KS loads, press the device Home button to keep Kitchen
   Sink running in the background.</p>
   </li>
   <li>
   <p>Go to Settings - Language and Keyboard (whatever it's called)
   and change the language, i.e., from English to Spanish.</p>
   </li>
   <li>
   <p>After the language has been changed, press and hold the device's
   Home button to show the list of recently used apps, then select
   KitchenSink. In the failcase you'll get a (mostly) blank screen.
   After my changes, the app should simply restart.</p>
   </li>
   </ul></div></li>
<li>dermike 2011-04-15

   <div><p>Sounds great Bill! How does the detection work?<br>
   I'm getting a white screen most of the time, so I hope it's got
   nothing to do with colour. ;)</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>Yeah, I should've said "blank". :) It's not related to colour.
   It simply detects that Android is asking the application's Android
   Activities to destroy &amp; restart without "finishing"
   (isFinishing() == false).</p></div></li>
<li>dermike 2011-04-15

   <div><p>I downloaded the build from Apr 12 2011 11:18 r61371d3f and it's
   still not working for my project. Neither when waiting for a while
   or changing the language.</p></div></li>
<li>Ben Bahrenburg 2011-04-17

    Using the latest build from April 15th and still get the issue when the app is clicked on after being in the background for a few hours.
    
    There is a notable change though.  It used to have a blank screen, now it displays the splash screen and seems to hang until you press the back button.
    
    I've used KS and a simple demo app to test.  It doesn't seem App related.
    
    Is it possible that it gets catch in the restart Bill mentions?  It seems like it is trying to restart but getting locked somehow.
    
    Tested on a Nexus S with 2.3
    </li>
<li>Eric Merriman  2011-05-03

    [INFO] Titanium SDK version: 1.7.0 (05/03/11 10:31 41a577e)
    
    Verified with Nexus S with Android OS 2.3.2, Galaxy Tab with 2.2.1, Droid with 2.2.1, and the emulator running 2.1.</li>
<li>Thomas Huelbert 2011-05-04

    reopened issue as per Bill/Don
    pastie link to logcat pulled from droid1
    
    <a href="http://pastie.org/1862127" rel="nofollow" target="_blank">http://pastie.org/1862127</a></li>
<li>Opie Cyrus 2011-05-31

    Issue can be resolved by adding 'android:alwaysRetainTaskState="true"' to the root activity for the application in a custom AndroidManifest.xml and including that in the <project>/platform/android directory.
    
    An example AndroidManifest.xml for KitchenSink has been included for reference.</li>
<li>Opie Cyrus 2011-05-31

    Example AndroidManifest.xml for KitchenSink that resolves black screen</li>
<li>Opie Cyrus 2011-05-31

    moving to sprint 22</li>
<li>Natalie Huynh 2011-07-11

    Tested with 1.7.2.v20110706211037 on Droid 2.2.1 and Nexus one 2.2.2</li>
<li>Jake H 2012-01-30

    I'm seeing this in my apps as well.  I just downloaded Kitchen Sink and experienced the same issue.  This was using SDK 1.8.0.1 and the device was a Motorola Xoom.</li>
</ol>


<p><a href="/TIMOB/TIMOB-1964.json">JSON Source</a></p>