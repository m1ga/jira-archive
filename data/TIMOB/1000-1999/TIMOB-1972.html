---
title: "[TIMOB-1972] click event inside tableview click event causes exception"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-18T23:10:14.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect, emulator</td></tr>
<tr><th>Reporter</th><td>Paul Dowsett</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:06:56.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-18T23:10:14.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Adding a click event inside another click event causes an
exception.</p>
<p>I have just found this bug in the latest build, 1.4.2 /
30.09.2010. The 1.4.2 CI build released 21.09.2010 did not have
this issue.</p>
<p>To see the issue in action, replace
Resources/examples/animation.js in the KitchenSink with the
following code:</p>
<p><a href=
"<a href="http://gist.github.com/605647" rel="nofollow" target="_blank">http://gist.github.com/605647</a>">Resources/examples/animation.js</a></p>
<p>Here is the error output:</p>
<pre>
<code>2087           KrollContext  D  (kroll$4) [550,44126] eval file: app://examples/animation.js
2087               dalvikvm  D  GC_FOR_MALLOC freed 4800 objects / 266512 bytes in 124ms
60     InputManagerService  W  Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@44fc6370
60     InputManagerService  W  Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@44fa11c0
2087          KrollCallback  E  (kroll$4) [23525,67651] Error evaluating source: Wrapped java.lang.NullPointerException (app://examples/animation.js#40)
2087          KrollCallback  E  org.mozilla.javascript.WrappedException: Wrapped java.lang.NullPointerException (app://examples/animation.js#40)
2087          KrollCallback  E      at org.mozilla.javascript.Context.throwAsScriptRuntimeEx(Unknown Source)
2087          KrollCallback  E      at org.appcelerator.titanium.kroll.KrollMethod.call(KrollMethod.java:96)
2087          KrollCallback  E      at org.mozilla.javascript.Interpreter.interpretLoop(Unknown Source)
2087          KrollCallback  E      at script(app://examples/animation.js:40)
2087          KrollCallback  E      at org.mozilla.javascript.Interpreter.interpret(Unknown Source)
2087          KrollCallback  E      at org.mozilla.javascript.InterpretedFunction.call(Unknown Source)
2087          KrollCallback  E      at org.mozilla.javascript.ContextFactory.doTopCall(Unknown Source)
2087          KrollCallback  E      at org.mozilla.javascript.ScriptRuntime.doTopCall(Unknown Source)
2087          KrollCallback  E      at org.mozilla.javascript.InterpretedFunction.call(Unknown Source)
2087          KrollCallback  E      at org.appcelerator.titanium.kroll.KrollCallback$1.run(KrollCallback.java:70)
2087          KrollCallback  E      at android.os.Handler.handleCallback(Handler.java:587)
2087          KrollCallback  E      at android.os.Handler.dispatchMessage(Handler.java:92)
2087          KrollCallback  E      at android.os.Looper.loop(Looper.java:123)
2087          KrollCallback  E      at android.os.HandlerThread.run(HandlerThread.java:60)
2087          KrollCallback  E  Caused by: java.lang.NullPointerException
2087          KrollCallback  E      at org.appcelerator.titanium.proxy.TiViewProxy.setClickable(TiViewProxy.java:589)
2087          KrollCallback  E      at org.appcelerator.titanium.proxy.TiViewProxy.eventListenerAdded(TiViewProxy.java:569)
2087          KrollCallback  E      at org.appcelerator.titanium.TiContext.dispatchOnEventChange(TiContext.java:362)
2087          KrollCallback  E      at org.appcelerator.titanium.TiContext.addEventListener(TiContext.java:409)
2087          KrollCallback  E      at org.appcelerator.titanium.TiProxy.addEventListener(TiProxy.java:232)
2087          KrollCallback  E      at java.lang.reflect.Method.invokeNative(Native Method)
2087          KrollCallback  E      at java.lang.reflect.Method.invoke(Method.java:521)
2087          KrollCallback  E      at org.appcelerator.titanium.kroll.KrollMethod.call(KrollMethod.java:84)
2087          KrollCallback  E      ... 11 more</code>
</pre></div>

<h3>Comments</h3>

<ol>
<li>hal 2011-04-15

   <div><p>Oh I forgot to mention what will result when running the usecase
   code:</p>
   <p>In KS, open the BaseUI tab, click Animation, then click Basic
   (or any of the table rows), and an exception will result before
   showing the alert dialog</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/25b72fafef8cfa461ae2f4d3b2c6d844e9c9f2a6"
   title=
   "Changeset [25b72fafef8cfa461ae2f4d3b2c6d844e9c9f2a6]">[25b72fafef8cfa461ae2f4d3b2c6d844e9c9f2a6]</a>)
   [<a href="/projects/32238/tickets/1972" title=
   "Ticket #1972">#1972</a> state:fixed-in-qa] Assumed the nativeView
   was set and shouldn't have. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/25b72fafef8cfa461ae2f4d3b2c6d844e9c9f2a6" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/25b72fafef8cfa461ae2f4d3b2c6d844e9c9f2a6</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/25b72fafef8cf..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/25b72fafef8cf...</a></a></p></div></li>
<li>hal 2011-04-15

   <div><p>Don<br>
   I can confirm that this resolved the problems I was having.<br>
   Thanks for fixing so quickly!<br>
   Hal</p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>1.4.2.4ce7ff G1 running 1.6, 2.2 simulator</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-1972.json">JSON Source</a></p>