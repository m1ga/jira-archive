---
title: "[TIMOB-10001] iOS: Adding multi-line label with width: Ti.UI.FILL and height: Ti.UI.SIZE to tableviewrow results in incorrect layout and use of \"...\""
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-07-20T16:14:17.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-15 Core, Release 3.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>core, qe-port</td></tr>
<tr><th>Reporter</th><td>Jeroen van Vianen</td></tr>
<tr><th>Assignee</th><td>Max Stepanov</td></tr>
<tr><th>Created</th><td>2012-05-06T15:02:16.000+0000</td></tr>
<tr><th>Updated</th><td>2012-10-09T16:17:28.000+0000</td></tr>
</table>

<h3>Description</h3>

See attached app.js. I have a couple of labels that span multiple lines of text which should be added to a tableviewrow. Depending on the label length sometimes "..." are added to the end and the last part of the text is not shown as expected.

In my example: the first row is missing "sit" which should be on a new line, the second row is missing the entire line "Last line", the third row is correct.

I assume it has something to do with me specifying left, right, top and bottom on the label to correctly place it inside the tableviewrow. If I remove those layout properties all labels won't show "...", but it looks of course ugly ;-)

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-10001_27800/app_5_1_1.js">app_5_1_1.js</td></td><td>2012-05-18T14:48:20.000+0000</td><td>3021</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-10001_27547/app.js">app.js</td></td><td>2012-05-06T15:02:16.000+0000</td><td>1713</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-10001_27546/incorrect_multiline_label_in_tableviewrow.png">incorrect_multiline_label_in_tableviewrow.png</td></td><td>2012-05-06T15:02:16.000+0000</td><td>133504</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-10001_27802/screenshot_511_landscape.png">screenshot_511_landscape.png</td></td><td>2012-05-18T14:48:20.000+0000</td><td>110368</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-10001_27801/screenshot_511_portrait.png">screenshot_511_portrait.png</td></td><td>2012-05-18T14:48:20.000+0000</td><td>121639</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Jeroen van Vianen 2012-05-07

   I was able to work around this issue by setting the TableViewRow's layout to 'vertical' and adding a postlayout event listener on every label to update the height of its containing TableViewRow:
   
   <code><pre>
   var postLayout = function(event) {
       label.removeEventListener("postlayout", postLayout);
       row.height = label.rect.height + 20; /* label.top + label.bottom */
   };
   
   label.addEventListener("postlayout", postLayout);
   </pre></code>
   
   
   This is of course a very tedious solution...</li>
<li>Jeroen van Vianen 2012-05-15

   I upgraded to iOS 5.1.1 and now the postlayout event is no longer fired. Specifying SDK 5.0 or 5.1 doesn't make a difference.
   
   I reverted back to row and label height: 'auto' and everything works again as expected.</li>
<li>Jeroen van Vianen 2012-05-18

   I worked on this issue some more. It's very frustrating on an iOS 5.1.1 device, but I managed to get it working with the following set-up:
   
   * TableViewRow has layout 'vertical'
   * TableViewRow has child View with top and bottom specified
   * View has child Label with left and right specified
   * label has a postlayout event listener that updates the height of the row based upon the height of the view containing the label.
   
   Note that it doesn't work:
   * If the TableViewRow does not have layout 'vertical'
   * if View or Label has all four positions set; only carefully setting top and bottom on the View and left and right on the Label (and not vice versa!)
   * When adding a postlayout eventlistener on the view or row results in an endless loop.
   
   As far as I'm concerned this is *a lot of work* for just a multi-line TableViewRow...
   
   Additionally, I noticed that the postlayout event is *not* fired on orientationchange and I would consider that a serious bug.</li>
<li>Jeroen van Vianen 2012-05-18

   Here is my updated app.js for iOS 5.1.1 and two screenshots which show it works for portait, but not for landscape mode. The postlayout event is not fired on orientationchange. Therefore the row's height is still the one set in the portrait postlayout event.</li>
<li>Max Stepanov 2012-07-19

   PR pending <a href="https://github.com/appcelerator/titanium_mobile/pull/2611" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2611</a></li>
<li>Olga Romero 2012-08-14

   Verified fix with:
   Titanium Studio, build: 2.1.1.201207271312
   Titanium SDK: 2.2.0.v20120813184911
   Devices:
   iPhone 4s 5.0.1
   iPad1 5.1.1
   Simulator 5.1
   
   Note: works as shown on a screenshot_511.png</li>
</ol>


<p><a href="/TIMOB/TIMOB-10001.json">JSON Source</a></p>