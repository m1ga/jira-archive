---
title: "[TIMOB-10003] Android: Ti.UI.SIZE does not work well with nested views"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-09-07T13:38:44.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-16 Core, Release 2.1.2, Release 3.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>core, layout, module_view, qe-review, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Ivan Skugor</td></tr>
<tr><th>Assignee</th><td>Allen Yeung</td></tr>
<tr><th>Created</th><td>2012-05-15T05:55:53.000+0000</td></tr>
<tr><th>Updated</th><td>2012-09-21T00:24:29.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>The problem</h4>

It seems that view component does not size itself well when nested views are present. To see this issue, run this example:

<code><pre>
(function() {
	
    var win = Ti.UI.createWindow({ navBarHidden: true, backgroundColor: '#999' });
    
    var parentView = Ti.UI.createView({
    	backgroundColor: '#000',
    	width: Ti.UI.FILL,
    	height: Ti.UI.SIZE,
    	backgroundColor: '#f00'
    });
    
    function createContent() {
    	
    	var view = Ti.UI.createView({
    		top: 0,
    		layout: 'horizontal',
    		width: Ti.UI.FILL,
    		height: Ti.UI.SIZE,
    		backgroundColor: '#0f0'
    	});
    	
    	var header = Ti.UI.createView({
    		width: '90%',
    		height: '75dp',
    		backgroundColor: '#00f'
    	});
    	
    	var label = Ti.UI.createLabel({
    		top: 0,
    		height: '75dp',
    		width: '50%',
    		text: 'Testing ...'
    	});
    	
    	var active = Ti.UI.createSwitch({
    		top: 0,
    		style: Ti.UI.Android.SWITCH_STYLE_CHECKBOX
    	});
    	
    	header.add(label);
    	header.add(active);
    	
    	view.add(header);
    	
    	return view;
    }
    
    for (var i = 0; i &lt; 3; ++i) {
    	parentView.add(createContent());
    }
    
    win.add(parentView);
    
    
    win.open();

})();
</pre></code>

You should see only one nested view (one label and one switch).

<h4>Expected behavior</h4>


"parentView" should size itself according to the size of its content. So, all three child views should be visible (and not only one).
This works fine on iOS.

<h3>Comments</h3>

<ol>
<li>Allen Yeung 2012-07-19

   I tried on 2.0.1GA2, 2.0.2GA, 2.1.0GA, and they look the same in both iOS and android.  Closing as can't reproduce. Feel free to reopen if this still occurs.</li>
<li>Ivan Skugor 2012-07-20

   Hi Allen.
   
   
   I'm still seeing this issue. I modified test example a bit:
   
   <code><pre>
   (function() {
        
       var win = Ti.UI.createWindow({ navBarHidden: true, backgroundColor: '#999' });
        
       var parentView = Ti.UI.createView({
   	layout: 'horizontal',
           width: Ti.UI.FILL,
           //height: 350,
   	height: Ti.UI.SIZE,
           backgroundColor: '#f00'
       });
        
       function createContent() {
            
           var view = Ti.UI.createView({
               top: 10,
               layout: 'horizontal',
               width: Ti.UI.FILL,
   	    height: Ti.UI.SIZE,
               backgroundColor: '#0f0'
           });
            
           var header = Ti.UI.createView({
               width: '90%',
               height: '75dp',
   	    layout: 'horizontal',
               backgroundColor: '#00f'
           });
            
           var label = Ti.UI.createLabel({
               top: 0,
               height: '75dp',
               width: '50%',
               text: 'Testing ...',
   	    backgroundColor: '#ff0'
           });
            
           var active = Ti.UI.createSwitch({
               top: 0
           });
            
           header.add(label);
           header.add(active);
            
           view.add(header);
            
           return view;
       }
        
       for (var i = 0; i &lt; 3; ++i) {
           parentView.add(createContent());
       }
        
       win.add(parentView);
        
        
       win.open();
    
   })();
   </pre></code>
   
   
   Tested on 4.0.3 ICS tablet (Thinkpad tablet) with latest CI build: Titanium SDK version: 2.2.0 (07/19/12 16:01 6d95a75)
   
   Here is screenshot.
   <a href="http://i48.tinypic.com/5dkzo3.png" rel="nofollow" target="_blank">http://i48.tinypic.com/5dkzo3.png</a>
   
   
   As you can see, only first child is visible (and there should be three).
   
   
   I also tested with x86 emulator (with newly created project in Titanium Studio) and I got same result.
   
   
   On iPhone simulator, everything works fine.</li>
<li>Neeraj Gupta 2012-07-20

   Reopening this issue based on last comment.</li>
<li>Allen Yeung 2012-07-20

   This works on the master branch, it looks like <a href="https://github.com/appcelerator/titanium_mobile/pull/2613" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2613</a> may have fixed it.</li>
<li>Ivan Skugor 2012-07-22

   Yes, I can confirm this works fine with latest master build. Thanks.</li>
<li>Ivan Skugor 2012-07-31

   Please do not close this issue. The issue still exists (but it is not covered with this test case). I'm working on better test case, but it will take some time. Thanks.</li>
<li>Ivan Skugor 2012-07-31

   This issue turned out to be more simpler and more serious than I thought.
   
   
   Here is simple test case that fails:
   
   <code><pre>
   (function() {
         
       var win = Ti.UI.createWindow({
   		navBarHidden: true,
   		backgroundColor: '#000'
   	});
       
   	var topView = Ti.UI.createView({
       	backgroundColor: '#00f',
   		height: Ti.UI.SIZE,
   		top: 0,
   		width: Ti.UI.DIMENSION_FILL,
   		layout: 'horizontal'
       });
   
   	topView.add(Ti.UI.createLabel({ text: 'Label 1', width: '50%', backgroundColor: '#f00' }));
   	topView.add(Ti.UI.createSwitch({ value: false }));
   	topView.add(Ti.UI.createLabel({ text: 'Label 2', width: '50%', backgroundColor: '#0f0' }));
   	topView.add(Ti.UI.createSwitch({ value: true }));
   	
   	win.add(topView);
   	
   	win.open();
   	
   })();
   </pre></code>
   
   Tested with latest CI build (Titanium SDK version: 2.2.0 (07/30/12 21:21 e382067)), v8, Android 4.0.3 (Thinkpad tablet), Mountain Lion.
   
   
   
   This works fine on iOS simulator and mobile web.</li>
<li>Allen Yeung 2012-07-31

   @Ivan FYI there is no Ti.UI.DIMENSION_FILL constant.  It should be Ti.UI.FILL
   
   PR Ready:
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/2663" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2663</a></li>
<li>Ivan Skugor 2012-08-01

   Yes, you're right, sorry about that - I use that constant name in the framework that I use so I accidentally used it here also.
   
   
   
   Thanks for the fix.</li>
<li>Ivan Skugor 2012-08-03

    Just tried this fix in my complex app and now layout works much-much better. :)
    
    
    Excellent! Thanks.</li>
<li>Ivan Skugor 2012-08-03

    Actually, there are still some minor issues (when content is table view), I'll make new test case soon.</li>
<li>Ivan Skugor 2012-08-06

    I commented issue with table view in TIMOB-9966.</li>
<li>Evgenii Tcarev 2012-08-13

    Verified fixed with:
    Titanium Studio, build: 2.1.1.201207271312
    SDK version: 2.2.0.v20120810194112
    Devices:
    LG VS910 4G (2.3.6)
    LG-V909 (3.1)</li>
<li>Ping Wang 2012-08-14

    PR for 2_1_X branch: <a href="https://github.com/appcelerator/titanium_mobile/pull/2741" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2741</a></li>
<li>Ping Wang 2012-08-14

    Reopen to update fix version.</li>
<li>Anshu Mittal 2012-09-06

    Reopening to update labels</li>
<li>Quang Pham 2012-09-06

    This fix broke my app.
    when the View have 
    width: Ti.UI.SIZE, its width should be the total width of its contents
    but now, it act the same as width: Ti.UI.FILL (its width fill all the space)
    
    
    
    
    var win = Ti.UI.createWindow({ backgroundColor: 'white' });
    var view = Ti.UI.createView({ width: Ti.UI.SIZE, height: 30, layout: 'horizontal', backgroundColor: 'red' });
    view.add(Ti.UI.createLabel({ text: 'Hello', height: 30, top: 0, color: 'white' }));
    view.add(Ti.UI.createLabel({ text: 'From Titanium', height: 30, top: 0, color: 'blue', left: 5 }));
    win.add(view);
    win.open();
    </li>
<li>Allen Yeung 2012-09-07

    Reopening since it seems to have caused a regression with size behavior on width and horizontal layout</li>
<li>Allen Yeung 2012-09-07

    </li>
</ol>


<p><a href="/TIMOB/TIMOB-10003.json">JSON Source</a></p>