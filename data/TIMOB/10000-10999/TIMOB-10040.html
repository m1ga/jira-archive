---
title: "[TIMOB-10040] Android: XML: v8- Application crashes with out of memory error."
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-08-23T20:09:30.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.1, Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-16 API, Release 3.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>core, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Evgenii Tcarev</td></tr>
<tr><th>Assignee</th><td>Josh Roesslein</td></tr>
<tr><th>Created</th><td>2012-07-19T12:17:55.000+0000</td></tr>
<tr><th>Updated</th><td>2012-09-05T13:22:47.000+0000</td></tr>
</table>

<h3>Description</h3>

Application crashes with out of memory error. On some occasions the ed "runtime error" is displayed, other times, the "application has stopped unexpectedly" dialog is shown.

The screenshots of each are attached. Logcat output is also attached.

This is a regression it doesn't occur on SDK 2.1.0
 
Steps to reproduce: 
1) Launch Kitchen Sink > Platform > XHR > XML Properties.
2)  Tap back button on the phone.
3) Repeat 1 and 2 steps 10 times.

Result:
1) The application crashes.


Expected Result:
1) The application shouldn't crash.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-10040_29883/device-2012-07-19-104854.png">device-2012-07-19-104854.png</td></td><td>2012-07-19T12:17:55.000+0000</td><td>117354</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-10040_29882/device-2012-07-19-105547.png">device-2012-07-19-105547.png</td></td><td>2012-07-19T12:17:55.000+0000</td><td>70059</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-10040_29884/Logcat.rtf">Logcat.rtf</td></td><td>2012-07-19T12:17:55.000+0000</td><td>6257</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Josh Roesslein 2012-07-20

   This actually looks like a memory leak caused by us not releasing our
   persistent handles (aka references) to the V8 function callbacks (ex: onload, ondatastream).
   
   The bug probably has existed for some time now (possibly back to 1.8), but only came forth in
   this test case due to us fixing the decoding to always return something when you access "responseText".
   Since the label is referenced inside the callbacks, it would never get collected and neither would the
   response text/data it references.</li>
<li>Josh Roesslein 2012-08-23

   Memory leaks have all been fixed in master. Test case no longer crashes due to out of memory.</li>
<li>Rima Umbrasas 2012-09-05

   Tested as fixed:
   SDK-version 2.2.0.v20120904103252
   Titanium Studio, builds: 2.1.2.201208301612,
   2.2.0.v20120904103252
   Devices: iPone4 version 5.0.1
   Nexus Android tablet version 4.1.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-10040.json">JSON Source</a></p>