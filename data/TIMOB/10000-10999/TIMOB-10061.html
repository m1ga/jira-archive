---
title: "[TIMOB-10061] iOS: If we base64 encode and then decode an image blob, the blob loses the height and width property"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2012-07-23T10:29:37.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.2, Release 2.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>core</td></tr>
<tr><th>Reporter</th><td>Betty Tran</td></tr>
<tr><th>Assignee</th><td>Max Stepanov</td></tr>
<tr><th>Created</th><td>2012-07-20T11:23:15.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-09T23:12:54.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>

When we use Ti.Utils.base64encode() to encode an image blob and then use Ti.Utils.base64decode(), the height and width of the blob are 0. Prior to base 64 encoding the blob, we are able to get the correct height and width properties from the blob.

<h4>Test case</h4>

<code><pre>


var win = Ti.UI.createWindow({
	backgroundColor : 'pink'
});

win.open();

var img = Titanium.Filesystem.getFile(Titanium.Filesystem.resourcesDirectory, 'test.png');

var str_blob = img.read();
alert(str_blob.width);
alert(str_blob.height);

var str_64 = Ti.Utils.base64encode(str_blob);
var decoded = Ti.Utils.base64decode(str_64);

alert('Height: ' + decoded.height + 'Width: ' + decoded.width);

</pre></code>

<h4>Expected behavior</h4>

The height and width properties should be available.

<h3>Comments</h3>

<ol>
<li>Max Stepanov 2012-07-23

   base64decode returns a raw data(blob), no mime-type information available.</li>
<li>Stephen Tramer 2012-07-23

   Occurs because when you base64-encode an image, what you're storing is the image's ORIGINAL size along with the blob, which is what is available. It would be possible to store a modified image as the blob, but that may not always be desired behavior for a number of reasons.</li>
<li>Max Stepanov 2012-07-23

   Pedro,
   encode/decode !== serialize/deserialize
   
   Technically, what you need to do prior to reading width/height properties is decoded.mimeType = str_blob.mimeType, but we have no setter for mimeType in the platform.
   For the File.read, we get mimeType from file name, but it's not stored during encode/decode.
   
   </li>
<li>Lee Morris 2017-03-09

   Closing ticket as invalid.</li>
</ol>


<p><a href="/TIMOB/TIMOB-10061.json">JSON Source</a></p>