---
title: "[TIMOB-10091] Android: Window URL contexts never freed after window has closed."
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-08-23T19:05:43.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-16 API, Release 3.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>core, module_window, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Josh Roesslein</td></tr>
<tr><th>Assignee</th><td>Josh Roesslein</td></tr>
<tr><th>Created</th><td>2012-07-23T12:50:17.000+0000</td></tr>
<tr><th>Updated</th><td>2013-09-26T10:20:17.000+0000</td></tr>
</table>

<h3>Description</h3>

When opening a window with an "url" script, the context created for this window is never
released after the window has been closed. This can lead to memory leaks if the script
kept global references to values in that context.

See the attached app.js and test.js scripts to reproduce this bug.
Create a project with both of these files in the Resources folder.

1. Run application and monitor heap with DDMS.
2. Click "Open Window".
3. Hit the back button to close the window.
4. Repeat steps 2 - 3. Watch the heap size and see if it grows.

Actual: Heap size continues to grow in size.
Expected: The memory allocated in the new context should be released
          and eventually collected. Heap size should reach a ceiling and remain stable.


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-10091_29958/app.js">app.js</td></td><td>2012-07-23T12:50:43.000+0000</td><td>297</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-10091_29959/test.js">test.js</td></td><td>2012-07-23T12:51:02.000+0000</td><td>351</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Josh Roesslein 2012-07-23

   This is one of the causes of the memory leak seen in TIMOB-10040.</li>
<li>Josh Roesslein 2012-08-13

   Created [PR #2720](<a href="https://github.com/appcelerator/titanium_mobile/pull/2720)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2720)</a> to resolve issue.</li>
<li>Shyam Bhadauria 2012-08-29

   Environment used for verification -
   Tested with Titanium SDK: 2.2.0.v20120828153312
   Tested with Titanium Â Studio: 2.1.2.201208201549
   Device - Android 2.2 emulator
   Machine OS - MAC 10.8</li>
</ol>


<p><a href="/TIMOB/TIMOB-10091.json">JSON Source</a></p>