---
title: "[TIMOB-10220] iOS: Annotations caret is offset from pin top and overlaps pin top"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-08-14T11:02:30.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-16 API, Release 2.1.2, Release 3.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>SupportTeam, api, module_map, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Varun Joshi</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2012-07-27T15:06:27.000+0000</td></tr>
<tr><th>Updated</th><td>2012-08-14T18:01:14.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue</h4>

In iOS the annotations on both retina and non-retina devices are offset from the pins top and they also overlap the pin. The annotation should be directly above the pin with no overlap like iOS does in its native maps application. 

The screenshots illustrate this issue. Notice in the native maps application the caret is directly above the pin. It does not overlap the pin and it is not offset. 

<h4>Sample Code</h4>

{noformat}

var win = Ti.UI.createWindow();
win.open();

    //create object instance, a parasitic subclass of Observable
    var self = Ti.UI.createView();
    
    var mapObject = Titanium.Map.createView({
            mapType: Titanium.Map.STANDARD_TYPE,
            animate:true,
            regionFit:true,
            userLocation:true,
            height:Ti.UI.FILL,
            zoomEnabled:true,
            region: {latitude:37.77501, longitude:-122.419, 
            latitudeDelta:0.01, longitudeDelta:0.01},
        });
        

        
    var selectAnnotations = Ti.UI.createButton({
        title:"Select Annotations",
        bottom:'20dp',
        height:'35dp',
        width:'180dp'
    });
        
     
    var annotation = Titanium.Map.createAnnotation({
        animate:true,
        title: 'Hello I am an annotation with lots of information:',
        subtitle: 'This is a subtitle to an large annotation', 
        pincolor:Titanium.Map.ANNOTATION_RED,
        latitude:parseFloat(37.776),
        longitude:parseFloat(-122.419)
      });
      
      var annotation2 = Titanium.Map.createAnnotation({
        animate:true,
        title: '#2 Hello I am an annotation with lots of information:',
        subtitle: 'This is a subtitle to an large annotation', 
        pincolor:Titanium.Map.ANNOTATION_RED,
        latitude:parseFloat(37.77501),
        longitude:parseFloat(-122.419)
     });
      
      var annotation3 = Titanium.Map.createAnnotation({
        animate:true,
        title: '#3 Hello I am an annotation with lots of information:',
        subtitle: 'This is a subtitle to an large annotation', 
        pincolor:Titanium.Map.ANNOTATION_RED,
        latitude:parseFloat(37.770),
        longitude:parseFloat(-122.419)
      });
      
      
      var annotation4 = Titanium.Map.createAnnotation({
        animate:true,
        title: '#4 Hello I am an annotation with lots of information:',
        subtitle: 'This is a subtitle to an large annotation', 
        pincolor:Titanium.Map.ANNOTATION_RED,
        latitude:parseFloat(37.770),
        longitude:parseFloat(-122.43)
      });
     
      
      
    mapObject.addAnnotation(annotation);
    mapObject.addAnnotation(annotation2);
    mapObject.addAnnotation(annotation3);
    mapObject.addAnnotation(annotation4);
        
    self.add(mapObject);
    self.add(selectAnnotations);
    
    
    var thisObj = this;
    selectAnnotations.addEventListener('click', function(e) {
        mapObject.selectAnnotation({annotation: annotation2, center: false});

    });

win.add(self);

{noformat} 


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-10220_30126/iOS-Native.png">iOS-Native.png</td></td><td>2012-07-27T21:34:38.000+0000</td><td>745671</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-10220_30127/iOS-Titanium.png">iOS-Titanium.png</td></td><td>2012-07-27T21:34:38.000+0000</td><td>172938</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Vishal Duggal 2012-07-31

   Pull pending <a href="https://github.com/appcelerator/titanium_mobile/pull/2662" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2662</a></li>
<li>Sabil Rahim 2012-08-14

   <h4>NOTE</h4>
   Test case select Annotation click event listener is wrong. It should be calling.
   <code><pre>mapObject.selectAnnotation(annotation2);</pre></code></li>
<li>Sabil Rahim 2012-08-14

   Reopening to update Fixversion to Release 2.1.2 label</li>
</ol>


<p><a href="/TIMOB/TIMOB-10220.json">JSON Source</a></p>