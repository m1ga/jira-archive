---
title: "[TIMOB-10232] Android: Capturing onKeyPress from the hardware keyboard"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-10-10T18:10:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.0.0, Release 3.1.0, 2012 Sprint 21 API, 2012 Sprint 21</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>SupportTeam, api, module_view, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Varun Joshi</td></tr>
<tr><th>Assignee</th><td>Ping Wang</td></tr>
<tr><th>Created</th><td>2012-07-30T10:46:21.000+0000</td></tr>
<tr><th>Updated</th><td>2013-07-12T10:52:21.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Requirement</h4>

There is a request of a new feature to support the hardware keyboard on Android apart. The only way to capture keystrokes on the device is via a focus event on a textfield or textarea. 

It has been requested to expose the onKeyPress native Android method (primarily on a view) so the hardware keyboard can be accessed from outside the textfield/textarea.



<h3>Comments</h3>

<ol>
<li>Ping Wang 2012-10-02

   Test case:
   <code><pre>
   var win = Ti.UI.createWindow({
   	backgroundColor : "white"
   });
   
   var v1 = Ti.UI.createView({
   	backgroundColor : "red",
   	top : 0,
   	left: 250,
   	height : 100,
   	width : 100,
   	focusable : true
   });
   
   v1.addEventListener("keypressed", function(e) {
   	Ti.API.info("************** Red view keypressed: keyCode = " + e.keyCode);
   });
   
   v1.addEventListener("click", function(e) {
   	Ti.API.info("************** Red view clicked");
   });
   
   var l1 = Ti.UI.createLabel({
   	top: 0,
   	left: 10,
   	width: 240,
   	text: "Red view: focusable = " + v1.focusable
   });
   
   var b1 = Ti.UI.createButton({
   	top: 0,
   	left: 360,
   	title: "Toggle 'focusable' for Red View"
   });
   
   b1.addEventListener("click", function(){
   	v1.focusable = !v1.focusable;
   	l1.text = "Red view: focusable = " + v1.focusable
   });
   
   
   var v2 = Ti.UI.createView({
   	backgroundColor : "blue",
   	top : 110,
   	left: 250,
   	height : 100,
   	width : 100,
   	focusable : false
   });
   
   v2.addEventListener("keypressed", function(e) {
   	Ti.API.info("************** Blue view keypressed: keyCode = " + e.keyCode);
   });
   
   v2.addEventListener("click", function(e) {
   	Ti.API.info("************** Blue view clicked");
   });
   
   var l2 = Ti.UI.createLabel({
   	top: 110,
   	left: 10,
   	width: 240,
   	text: "Blue view: focusable = " + v2.focusable
   });
   
   var b2 = Ti.UI.createButton({
   	top: 110,
   	left: 360,
   	title: "Toggle 'focusable' for Blue View"
   });
   
   b2.addEventListener("click", function(){
   	v2.focusable = !v2.focusable;
   	l2.text = "Blue view: focusable = " + v2.focusable
   });
   
   
   win.add(l1);
   win.add(l2);
   win.add(b1);
   win.add(b2);
   win.add(v1);
   win.add(v2);
   win.open();
   </pre></code>
   Steps for FR:
   1. Run the above test case.
   2. Use hardware key to focus the red view. Should see the output in the console, like:
   <code><pre>
   I/TiAPI   ( 6118):  ************** Red view keypressed: keyCode = 19
   </pre></code>
   3. Click the button "Toggle 'focusable' for Blue View" so that Blue View's focusable is true. (The "keypressed" event can only be fired when focusable=true).
   4. Use hardware key to focus the blue view. Should see a similar output in the console.</li>
<li>Ping Wang 2012-10-02

   PR <a href="https://github.com/appcelerator/titanium_mobile/pull/3095" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3095</a></li>
<li>Ping Wang 2012-11-12

   3_0_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/3410" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3410</a></li>
<li>Natalie Huynh 2012-11-26

   Tested with 3.0.0.v20121121161553 on Droid 1 2.2.3</li>
</ol>


<p><a href="/TIMOB/TIMOB-10232.json">JSON Source</a></p>