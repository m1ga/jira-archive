---
title: "[TIMOB-10309] Android: Ti.Geolocation.forwardGeocoder() callback is not called for a bad address"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-08-14T18:23:04.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.1</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-16 API, Release 2.1.2, Release 3.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>SupportTeam, api, module_geolocation, parity, qe-manualtest</td></tr>
<tr><th>Reporter</th><td>Varun Joshi</td></tr>
<tr><th>Assignee</th><td>Ping Wang</td></tr>
<tr><th>Created</th><td>2012-08-03T11:55:29.000+0000</td></tr>
<tr><th>Updated</th><td>2014-08-14T18:23:04.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue</h4>

When an address is passed into Ti.Geolocation.forwardGeocoder() the callback function is not called and it gets stuck in an infinite loop. It should behave just like it does on iOS where the callback is called upon success/failure. The sample code is attached. On iOS we receive both alerts that the callback was successful and the finished alert. On Android we do not see the alert that the callback was successful just that we started the fowardGeocoder().

<h4>Sample Code</h4>

{noformat}
var win = Ti.UI.createWindow({
    backgroundColor : 'white'
});
//create object instance, a parasitic subclass of Observable
var self = Ti.UI.createView();
win.add(self);

win.open();

var addr = '94302';

setTimeout(function() {
    alert('Start forwardGeocoder for: ' + addr);
    try {
        Ti.Geolocation.forwardGeocoder(addr, function(evt) {
            alert('Foward Geocoder Callback for 94302 Successful');
        });
    } catch(err) {
        alert("Error");
    }

}, 2000);

setTimeout(function() {
    addr = 'hhhhhhgggggg';
    alert('Start forwardGeocoder for: ' + addr);
    try {
        Ti.Geolocation.forwardGeocoder(addr, function(evt) {
            alert('Foward Geocoder Callback for ' + addr + ' Successful');
            setTimeout(function() {
                alert('finished');
            }, 2000);
        });
    } catch(err) {
        alert("Error 2");
    }

}, 8000); 
{noformat}

<h3>Comments</h3>

<ol>
<li>Ping Wang 2012-08-08

   PR <a href="https://github.com/appcelerator/titanium_mobile/pull/2700" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2700</a></li>
<li>Ping Wang 2012-08-09

   Steps for functional test:
   1. Run the test case in the ticket description on Android. Should see 5 alert dialogs. (before the fix, can only see 2 alert dialogs).
   2. Run the test case below on both Android and iOS to see the parity.
   
   <code><pre>
   var win = Ti.UI.createWindow({
       backgroundColor : 'white'
   });
   //create object instance, a parasitic subclass of Observable
   var self = Ti.UI.createView();
   win.add(self);
    
   win.open();
    
   var addr = 'san jose';
    
   setTimeout(function() {
       alert('Start forwardGeocoder for: ' + addr);
       try {
           Ti.Geolocation.forwardGeocoder(addr, function(evt) {
           	var message = 'Foward Geocoder for ' + addr + ': evt.success = ' + evt.success + ', evt.error = ' + evt.error;
               alert(message);
           });
       } catch(err) {
           alert("Error");
       }
    
   }, 2000);
    
   setTimeout(function() {
       addr = 'hhhhhhgggggg';
       alert('Start forwardGeocoder for: ' + addr);
       try {
           Ti.Geolocation.forwardGeocoder(addr, function(evt) {
               var message = 'Foward Geocoder for ' + addr + ': evt.success = ' + evt.success + ', evt.error = ' + evt.error;
               alert(message);
               setTimeout(function() {
                   alert('finished');
               }, 2000);
           });
       } catch(err) {
           alert("Error 2");
       }
    
   }, 8000); 
   </pre></code></li>
<li>Sabil Rahim 2012-08-14

   Reopening to add fixversion <code>Release 2.1.2</code></li>
</ol>


<p><a href="/TIMOB/TIMOB-10309.json">JSON Source</a></p>