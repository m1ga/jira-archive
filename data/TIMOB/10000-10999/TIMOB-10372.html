---
title: "[TIMOB-10372] TiAPI: event system: Bubble architecture"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Sub-task</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-10-29T19:15:15.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.1.0, 2012 Sprint 22 API, 2012 Sprint 22</td></tr>
<tr><th>Components</th><td>TiAPI</td></tr>
<tr><th>Labels</th><td>api</td></tr>
<tr><th>Reporter</th><td>Blain Hamon</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2012-08-09T11:33:29.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-21T18:57:01.000+0000</td></tr>
</table>

<h3>Description</h3>

Event bubbling is to happen in the following way:

Views shall have a boolean, 'bubbleParent', (readwrite) that indicates whether or not the view will bubble up events.

Internally, views, at a class level, should provide a way to indicate which view is next to receive the event. NULL is a valid response, when the view is not connected, has no parent otherwise, or is not a view that bubbles.

An event shall have a boolean, 'bubbles', that is set at creation time only, that indicates if the event will bubble or not. This is to allow custom events to also bubble as well.

An event shall also have a boolean, 'cancelBubble', that starts false but can be set during event handling.

As such, an event bubbles if the following is true:
event.bubbles && !event.cancelBubble && view.bubbleParent && ((next view to get event) is not NULL or similar)

NOTE that event bubbling happens after the fact. That is, the native handling (such as indicating highlight) have already happened before any event fires.

ALSO NOTE that multiple events of different types are treated separately. That is, if the user lifting their finger triggers 'touchup', 'tap', and 'click' events, any actions done on the touchup event (such as setting cancelBubble) do not affect bubbling nor firing of either tap or click.

By having the spec this open and not specific, we can implement this independent of specific event specs.

Sub-tasks that are for each OS will happen after this spec is approved.

<h3>Comments</h3>

<ol>
<li>Bryan Hughes 2012-08-09

   I don't know if I like having 'bubbles' also be on the event object. Would the user be able to see this? It doesn't quite feel right to me for some reason.</li>
<li>Blain Hamon 2012-08-10

   The bubbles read-only property is taken from the W3C spec and is to indicate that the event may bubble, not necessarily that it will (due to the view having nothing to bubble to, etc.)</li>
<li>Ingo Muschenetz 2012-10-29

   TIMOB-10464 has been moved to a separate story. Going to resolve this for now.</li>
<li>Lee Morris 2017-03-21

   Closing ticket as fixed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-10372.json">JSON Source</a></p>