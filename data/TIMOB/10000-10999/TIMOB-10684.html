---
title: "[TIMOB-10684] iOS: Ti.App.getArguments() fails when opening the app from a local notification"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-07-19T11:52:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.0.0, Sprint 2012-19 Core, 2012 Sprint 19</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>SupportTeam, core, module_notification_manager, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Federico Casali</td></tr>
<tr><th>Assignee</th><td>Max Stepanov</td></tr>
<tr><th>Created</th><td>2012-08-28T02:50:19.000+0000</td></tr>
<tr><th>Updated</th><td>2013-07-19T11:52:58.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem description</h4>
Error when opening an app from local notification using Ti.App.getArguments() 

<h4>Sample code and steps to reproduce</h4>

Run the sample code.
Local notification is correctly received. When clicking on the notification, everything works fine if the app is backgrounded. If the app is closed, an error is thrown and the app is not opened (see attached error log)

<code><pre>
// this sets the background color of the master UIView (when there are no windows/tab groups on it)
Titanium.UI.setBackgroundColor('#000');

//
// create base UI tab and root window
//
var win1 = Titanium.UI.createWindow({  
    title:'Tab 1',
    backgroundColor:'#fff'
});

var textArea = Ti.UI.createLabel({
	text:'Launch Arguments: '+ Ti.App.getArguments(),
	top:200
});

win1.add(textArea);

var button = Ti.UI.createButton({
	width:200,
	height:150,
	title:'Create Notification'
});

win1.add(button);

var context = this;
button.addEventListener('click', function(e){
	
	var notificationDate = new Date(new Date().getTime() + (20*1000));

	context.notification = Ti.App.iOS.scheduleLocalNotification({
		alertBody:'This is a sample notification',
		date:notificationDate,
		sound:'/alert.caf',
		userInfo : {"reportId":3,"savedId":5},
		alertAction:'View Report'
	});
	
	alert('Leave and kill this app, you will receive a notification in 60 secs');
					
});


win1.open();
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-10684_30774/timob10681.log">timob10681.log</td></td><td>2012-08-28T02:50:19.000+0000</td><td>4656</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Max Stepanov 2012-09-14

   Test instructions (on device):
   1. Launch app, press button, wait 20 secs to get text area updated with "Notification: This is a sample notification"
   2. Close and kill the app.
   3. Launch app again, press button, press Home, kill app.
   4. Wait 20 secs to on-screen notification to appear.
   5. Click on notification to open the app.
   6. Text area should be updated with "Notification: This is a sample notification" on start.
   
   Updated test case:
   <code><pre>
   // this sets the background color of the master UIView (when there are no windows/tab groups on it)
   Titanium.UI.setBackgroundColor('#000');
   
   //
   // create base UI tab and root window
   //
   var win1 = Titanium.UI.createWindow({  
       title:'Tab 1',
       backgroundColor:'#fff'
   });
   
   var textArea = Ti.UI.createLabel({
       text:'Launch Arguments: '+ Ti.App.getArguments(),
       top:100
   });
   
   Ti.App.iOS.addEventListener('notification', function(e) {
   	textArea.text = textArea.text + " Notification: "+e.alertBody;
   }); 
   
   win1.add(textArea);
   
   var button = Ti.UI.createButton({
   	width:200,
   	height:150,
   	title:'Create Notification'
   });
   
   win1.add(button);
   
   var context = this;
   button.addEventListener('click', function(e){
   	
   	var notificationDate = new Date(new Date().getTime() + (20*1000));
   
   	context.notification = Ti.App.iOS.scheduleLocalNotification({
   		alertBody:'This is a sample notification',
   		date:notificationDate,
   		sound:'/alert.caf',
   		userInfo : {"reportId":3,"savedId":5},
   		alertAction:'View Report'
   	});
   	
   	alert('Leave and kill this app, you will receive a notification in 20 secs');
   					
   });
   
   
   win1.open();
   </pre></code></li>
<li>Natalie Huynh 2012-12-04

   Tested with 3.0.0.v20121130200208 on iPhone 4 5.1.1</li>
<li>Anshu Mittal 2013-07-19

   Reopening to update labels</li>
<li>Anshu Mittal 2013-07-19

   Tested with: 
   SDK:3.1.2.v20130718094558
   Appcelerator Studio: 3.1.2.201307121651
   OS: OSX 10.7.5
   Device:iPhone5(ios6)
   Xcode: 4.6</li>
</ol>


<p><a href="/TIMOB/TIMOB-10684.json">JSON Source</a></p>