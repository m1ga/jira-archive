---
title: "[TIMOB-10739] iOS: change annotation position works only once, unless the map zoom changes"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-09-21T16:36:57.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.0.0, Sprint 2012-19 API, 2012 Sprint 19</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>api</td></tr>
<tr><th>Reporter</th><td>Davide Cassenti</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2012-09-03T07:16:19.000+0000</td></tr>
<tr><th>Updated</th><td>2012-09-21T17:27:29.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem description</h4>
Changing an annotation position (setLatitude/setLongitude) does not reflect in the map, unless the map is resized. However, the first time the position is changed, it works.

<h4>Steps to reproduce</h4>
Use the following code to test the behavior. The app changes the position of the annotation every 5 seconds, but only the first time it works. Try to resize the view, and see the annotation position is updated.

<code><pre>
var win = Titanium.UI.createWindow({
});
var POI1 = [53.5439796, 9.9524117], CENTER = [53.5459431, 9.9598360], POI2 = [53.5450506, 9.9674320];
var map = Ti.Map.createView({
  mapType : Titanium.Map.HYBRID_TYPE,
  region : {
    latitude : CENTER[0],
    longitude : CENTER[1],
    latitudeDelta : 0.03,
    longitudeDelta : 0.03
  }
});
var poi = Ti.Map.createAnnotation({
  latitude : POI1[0],
  longitude : POI1[1],
  title : 'FISCHMARKT',
});
map.addAnnotation(poi);
map.selectAnnotation(poi);
win.add(map);
win.open();
setInterval(function() {
  if (poi.title == 'FISCHMARKT') {
    poi.setLatitude(POI2[0]);
    poi.setLongitude(POI2[1]);
    poi.title = 'LANDUNGSBRÜCKEN';
    Ti.API.log('POI moved to Landungsbrücken');
  } else {
    poi.setLatitude(POI1[0]);
    poi.setLongitude(POI1[1]);
    poi.title = 'FISCHMARKT';
    Ti.API.log('POI moved to Fischmarkt');
  }
}, 5000);
</pre></code>

<h4>Additional note</h4>
Adding these 2 lines to simulate the zoom in/out works, although it is an ugly workaround:

<code><pre>
map.zoom(0.1);
map.zoom(-0.1);
</pre></code>

<h3>Comments</h3>

<ol>
<li>Vishal Duggal 2012-09-10

   Pull pending <a href="https://github.com/appcelerator/titanium_mobile/pull/2900" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2900</a></li>
<li>Ryan 2012-09-19

   I tried updating my SDK but it seems it still doesn't work. How can I use this fix as soon as possible? Thank you, hope somebody can answer...</li>
<li>Davide Cassenti 2012-09-19

   @Ryan: which version of the SDK did you try?</li>
<li>Vishal Duggal 2012-09-21

   Reopened by mistake. resolving</li>
</ol>


<p><a href="/TIMOB/TIMOB-10739.json">JSON Source</a></p>