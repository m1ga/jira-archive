---
title: "[TIMOB-10783] Android: Window url is assumed relative to calling js file directory, causes FileNotFoundException"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-10-02T16:20:38.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.0.0, Sprint 2012-20 Core, 2012 Sprint 20</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>core, module_window, qe-testadded, regression, titanbeta</td></tr>
<tr><th>Reporter</th><td>Shawn Lipscomb</td></tr>
<tr><th>Assignee</th><td>Opie Cyrus</td></tr>
<tr><th>Created</th><td>2012-09-05T11:00:14.000+0000</td></tr>
<tr><th>Updated</th><td>2013-09-25T05:53:54.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem </h4>
When a window is created with the *url* property, that url used to be (2.1.2 and earlier) treated as relative to the Resources directory. Now (2.2.0.v20120904164912) it is treated as relative to the directory of the calling js file. If the calling js file is in a subdirectory, an error (java.io.FileNotFoundException) is generated. This is going to break a lot of existing code. 

Works in 2.1.2 
Broken in 2.2.0.v20120904164912 

<h4>Testcase </h4>
Note in this example that the "loader.js" file is in a "ui" subdirectory. 

{panel:title=app.js} 
<code><pre> 
Ti.UI.setBackgroundColor('#000'); 
Ti.include('ui/loader.js'); 
</pre></code> 
{panel} 

{panel:title=ui/loader.js} 
<code><pre> 
var win1=Ti.UI.createWindow({ 
    title:'Window 1', 
    backgroundColor:'#fff', 
    url:'win1.js' 
}); 
win1.open(); 
</pre></code> 
{panel} 

{panel:title=win1.js} 
<code><pre> 
var winOne = Ti.UI.currentWindow; 

var label1 = Ti.UI.createLabel({ 
  color:'#999', 
  text:'I am Window 1', 
  font:{fontSize:20,fontFamily:'Helvetica Neue'}, 
  textAlign:'center', 
  width:'auto' 
}); 

winOne.add(label1); 
</pre></code> 
{panel} 


<h4>Error log </h4>
... 
[ERROR][TiAssetHelper( 345)] Error while reading asset "Resources/ui/win1.js": 
[ERROR][TiAssetHelper( 345)] java.io.FileNotFoundException: Resources/ui/win1.js 
[ERROR][TiAssetHelper( 345)] at android.content.res.AssetManager.openAsset(Native Method) 
[ERROR][TiAssetHelper( 345)] at android.content.res.AssetManager.open(AssetManager.java:313) 
[ERROR][TiAssetHelper( 345)] at android.content.res.AssetManager.open(AssetManager.java:287) 
[ERROR][TiAssetHelper( 345)] at org.appcelerator.kroll.util.KrollAssetHelper.readAsset(KrollAssetHelper.java:77) 
[ERROR][TiAssetHelper( 345)] at org.appcelerator.kroll.runtime.v8.V8Runtime.nativeRunModule(Native Method) 
[ERROR][TiAssetHelper( 345)] at org.appcelerator.kroll.runtime.v8.V8Runtime.doRunModule(V8Runtime.java:140) 
[ERROR][TiAssetHelper( 345)] at org.appcelerator.kroll.KrollRuntime.handleMessage(KrollRuntime.java:284) 
[ERROR][TiAssetHelper( 345)] at org.appcelerator.kroll.runtime.v8.V8Runtime.handleMessage(V8Runtime.java:166)
[ERROR][TiAssetHelper( 345)] at android.os.Handler.dispatchMessage(Handler.java:95) 
[ERROR][TiAssetHelper( 345)] at android.os.Looper.loop(Looper.java:123) 
[ERROR][TiAssetHelper( 345)] at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:108)

{panel}

<h3>Comments</h3>

<ol>
<li>Shawn Lipscomb 2012-09-10

   Helpdesk ticket: [APP-983576](<a href="http://support.appcelerator.com/tickets/APP-983576)" rel="nofollow" target="_blank">http://support.appcelerator.com/tickets/APP-983576)</a></li>
<li>Opie Cyrus 2012-09-26

   PR submitted: <a href="https://github.com/appcelerator/titanium_mobile/pull/3057" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3057</a>
   </li>
<li>Natalie Huynh 2012-12-05

   Tested with 3.0.0.20121204144658 on Droid 1 2.2.3</li>
<li>Shawn Lipscomb 2013-02-20

   Verified fixed with SDK 3.0.2.v20130124164131.  Thanks!</li>
</ol>


<p><a href="/TIMOB/TIMOB-10783.json">JSON Source</a></p>