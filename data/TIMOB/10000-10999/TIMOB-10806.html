---
title: "[TIMOB-10806] Android: Ti.UI.Button.image property is not working for density specific images"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-11-13T23:38:54.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.3, Release 3.0.0, Sprint 2012-19 API, 2012 Sprint 19, 2013 Sprint 23, 2013 Sprint 23 Core, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>SupportTeam, api, module_button, qe-closed-3.2.0, qe-port, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Varun Joshi</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2012-09-06T15:22:16.000+0000</td></tr>
<tr><th>Updated</th><td>2013-11-18T21:51:13.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue</h4>

The Ti.UI.Button's image property does not work if the images are under the density specific Android image folders (res-port-hdpi etc.) It works if we put the image in the default image dir. 

<h4>Sample Test Case</h4>

1. Run the attached test project
2. The density specific images are placed under Resources/android/images folder.
3. In the sample code, if we swap the Ti.UI.Button with a view or an imageview, the appropriate images are used.



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-10806_31570/android_search.tiff">android_search.tiff</td></td><td>2012-09-20T12:17:27.000+0000</td><td>6546</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-10806_31571/ios_search.tiff">ios_search.tiff</td></td><td>2012-09-20T12:17:27.000+0000</td><td>5880</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-10806_31053/T13975.zip">T13975.zip</td></td><td>2012-09-06T15:22:16.000+0000</td><td>2380189</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-10806_31142/timob10806.zip">timob10806.zip</td></td><td>2012-09-10T13:53:03.000+0000</td><td>2392426</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ping Wang 2012-09-10

   PR <a href="https://github.com/appcelerator/titanium_mobile/pull/2902" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2902</a>
   
   For functional test:
   1. Download the attached test project "timob10806.zip".
   2. Run the test project. Should see an image on the button. 
   3. Click the button. Should see the image is changed.
   </li>
<li>Fokke Zandbergen 2012-09-13

   Also found in SDK 2.1.1.GA</li>
<li>Ping Wang 2012-09-14

   PR for 2_1_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/2968" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2968</a></li>
<li>Satyam Sekhri 2012-09-17

   Verified on:
   Titanium Studio: 2.1.2.201208301612
   Titanium SDK: 2.1.3.v20120915120319
   Android Device: Samsung Note (v2.3.6), Galaxy Nexus (v4.0.2)</li>
<li>Olga Romero 2012-09-21

   Verified fix with:
   
   osx Mountain Lion 10.8.1
   Titanium Studio, build: 2.1.2.201208301612
   Titanium SDK: 2.1.3.v20120920154617
   Titanium SDK: 3.0.0.v20120921144915
   
   Device: Nexus S3 4.0.4</li>
<li>Danny Pham 2013-11-11

   I am using SDK 3.13 and this bug still occurs in the emulator (e.g. WXGA720). However on a real device (Samsung Galaxy S3, same xhdpi) the button image is correctly loading from the density specific Android image folder.
   
   Is this only an emulator related bug or can this also happen on production release?
   
   </li>
<li>Ping Wang 2013-11-13

   Tested with 3.1.3.GA. The image shows fine on emulator.
   But when tested with the latest master(3.2.0), this bug still occurs. The log is
   <code><pre>
   D/TiFileFactory( 5544): (main) [3,118] getting initial from parts: app://images/Tab1.png
   E/TiRHelper( 5544): (main) [4,122] Error looking up resource: tab1_c9dd4dedd9
   E/TiRHelper( 5544): java.lang.NoSuchFieldException: tab1_c9dd4dedd9
   E/TiRHelper( 5544): 	at java.lang.Class.getDeclaredField(Class.java:631)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.util.TiRHelper.lookupResource(TiRHelper.java:77)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.util.TiRHelper.getResource(TiRHelper.java:105)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.util.TiUIHelper.getResourceId(TiUIHelper.java:770)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.view.TiDrawableReference.fromUrl(TiDrawableReference.java:185)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.view.TiDrawableReference.fromUrl(TiDrawableReference.java:168)
   E/TiRHelper( 5544): 	at ti.modules.titanium.ui.widget.TiUIButton.processProperties(TiUIButton.java:68)
   E/TiRHelper( 5544): 	at org.appcelerator.kroll.KrollProxy.setModelListener(KrollProxy.java:1185)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.proxy.TiViewProxy.realizeViews(TiViewProxy.java:482)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.proxy.TiViewProxy.handleGetView(TiViewProxy.java:473)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.java:451)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.proxy.TiViewProxy.realizeViews(TiViewProxy.java:489)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.proxy.TiViewProxy.handleGetView(TiViewProxy.java:473)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.java:451)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.proxy.TiViewProxy.handleAdd(TiViewProxy.java:568)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.proxy.TiViewProxy.add(TiViewProxy.java:546)
   E/TiRHelper( 5544): 	at ti.modules.titanium.ui.WindowProxy.windowCreated(WindowProxy.java:280)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.TiActivityWindows.windowCreated(TiActivityWindows.java:32)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.TiBaseActivity.windowCreated(TiBaseActivity.java:451)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.TiBaseActivity.onCreate(TiBaseActivity.java:527)
   E/TiRHelper( 5544): 	at org.appcelerator.titanium.TiActivity.onCreate(TiActivity.java:18)
   E/TiRHelper( 5544): 	at android.app.Activity.performCreate(Activity.java:5008)
   E/TiRHelper( 5544): 	at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
   E/TiRHelper( 5544): 	at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
   E/TiRHelper( 5544): 	at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
   E/TiRHelper( 5544): 	at android.app.ActivityThread.access$600(ActivityThread.java:130)
   E/TiRHelper( 5544): 	at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
   E/TiRHelper( 5544): 	at android.os.Handler.dispatchMessage(Handler.java:99)
   E/TiRHelper( 5544): 	at android.os.Looper.loop(Looper.java:137)
   E/TiRHelper( 5544): 	at android.app.ActivityThread.main(ActivityThread.java:4745)
   E/TiRHelper( 5544): 	at java.lang.reflect.Method.invokeNative(Native Method)
   E/TiRHelper( 5544): 	at java.lang.reflect.Method.invoke(Method.java:511)
   E/TiRHelper( 5544): 	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
   E/TiRHelper( 5544): 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
   E/TiRHelper( 5544): 	at dalvik.system.NativeStart.main(Native Method)
   W/TiDrawableReference( 5544): (main) [93,215] Could not open stream to get bitmap
   W/TiDrawableReference( 5544): (main) [0,215] Could not open stream to get bitmap
   </pre></code>
   In /build/android/res/drawable-xxx/, I can see the image file "tab1_94b63d84cf.png". But when I use 3.1.3.GA to build the project, I can see the image file "tab1_c9dd4dedd9.png". Seems the hash of the file are calculated differently in the master CLI.
   Re-opened the ticket. Seems like the same issue with TC-3259.</li>
<li>Chris Barber 2013-11-13

   Pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/4961" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4961</a></li>
<li>Samuel Dowse 2013-11-18

   Verified fixed on:
   Mac OSX 10.9 Mavericks
   Titanium Studio, build: 3.2.0.201311160316
   Titanium SDK, build: 3.2.0.v20131117001643
   CLI: 3.2.0-alpha
   Alloy: 1.3.0
   Android Emulator: 2.3.3, 4.4
   Android Device: Xperia Arc S (4.0.4)
   
   No error is thrown in the console log.
   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-10806.json">JSON Source</a></p>