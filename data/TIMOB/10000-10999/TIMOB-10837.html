---
title: "[TIMOB-10837] Android: webView throws on evalJS when string starts with `var`"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Reopened</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 2.1.2</td></tr>
<tr><th>Fix Version/s</th><td>2014 Sprint 07, 2014 Sprint 07 SDK, Release 3.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>core, module_webview, qe-3.4.1, qe-closed-3.3.0, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Sindre Sorhus</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2012-09-09T14:56:25.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:03:39.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>

When trying to evalJS a string with code that starts with <code>var</code> it doesn't work and I get this error message in Console:

<code><pre>
[INFO][TiWebChromeClient.console( 1229)] (main) [493,23278] Uncaught SyntaxError: Unexpected token var (1:<a href="http://www.google.com/)" rel="nofollow" target="_blank">http://www.google.com/)</a>
</pre></code>

<h4>Expected Behavior</h4>

Should not throw and instead replace the site contents with "test". Works on iOS.


<h4>Test case</h4>


<code><pre>
var win = Ti.UI.createWindow();

var webView = Ti.UI.createWebView({
	url: '<a href="http://google.com" rel="nofollow" target="_blank">http://google.com</a>',
	top: 0,
	bottom: 0,
	height: Ti.UI.FILL,
});

win.add(webView);

win.open({
     modal: true,
     animated: false
});

webView.addEventListener('load', function() {
	webView.evalJS('var a="test";document.body.innerHTML=a'); // doesn't works
	//webView.evalJS('document.body.innerHTML="test"'); // works
});
</pre></code>


<h3>Comments</h3>

<ol>
<li>Sindre Sorhus 2013-03-01

   bump</li>
<li>Sindre Sorhus 2013-08-19

   bump</li>
<li>Sunila 2014-01-11

   
   If passed in value is not an expression but a statement block, extract the last statement and add prepend 'return'.
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/5210" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5210</a></li>
<li>Pragya Rastogi 2014-04-28

   Verified the fix using:
   OSX: 10.9.2
   Xcode: 5.1.1
   Studio - 3.3.0.201404251359
   SDK - 3.3.0.v20140425191906
   acs-1.0.14
   alloy-1.4.0-dev
   npm-1.3.2
   titanium-3.3.0-dev
   titanium-code-processor-1.1.1-beta1
   Device: LG-P970 (4.0.4) & ipod touch 2 (7.1)</li>
<li>Ingo Muschenetz 2014-09-07

   Based on the regressions caused by this issue, reopening. We need to find a solution with less side effects.</li>
</ol>


<p><a href="/TIMOB/TIMOB-10837.json">JSON Source</a></p>