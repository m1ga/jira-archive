---
title: "[TIMOB-11187] iOS : Opening iAD in landscape orientation & closing it crashes the app."
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-09-27T23:13:52.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.3</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.3, Release 3.0.0, Sprint 2012-20 API, 2012 Sprint 20</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>api, qe-ios090112, qe-ios6</td></tr>
<tr><th>Reporter</th><td>Lokesh Choudhary</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2012-09-27T00:40:18.000+0000</td></tr>
<tr><th>Updated</th><td>2012-10-03T20:09:06.000+0000</td></tr>
</table>

<h3>Description</h3>

Building the app using iOS 6 & running it on Iphone running iOS 6 causes it to crash.
Whereas, building the app using iOS 6 & running it on iphone running iOS 5.1 does not cause the crash.
Building the app using iOS 5.1 sdk  & running it on iphone running iOS 5.1 & 6.0 does not crash the app.
 
Description:
1.Replace your code in app.js with the code below.

<code><pre>
var win1 = Ti.UI.createWindow();
 
win1.orientationModes = [
    Titanium.UI.LANDSCAPE_RIGHT,
    Titanium.UI.LANDSCAPE_LEFT,
    Titanium.UI.PORTRAIT
];
 
var adView = Ti.UI.iOS.createAdView({
    width: 'auto',
    height: 'auto',
    bottom:-100,
    zIndex:100
});
adView.addEventListener('load', function(){
    adView.animate({bottom:0, duration:750});
});
win1.add(adView);
adView.show();
 
win1.open();
</pre></code>

2.Run the app on Iphone 5.
3.You will see the iAd in portrait mode.
4.Change the orientation to landscape.
5.Tap on the IAd.
6.You will see the test advertisement come up in portrait mode.
7.Now keeping the device in landscape mode close the iAd.


Expected Result:
1.The app should not crash & we should get back to the previous screen .


Actual Results:
1.The app crashes.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-11187_32097/iads_log.crash">iads_log.crash</td></td><td>2012-09-27T00:44:52.000+0000</td><td>33181</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sabil Rahim 2012-09-27

   The test case code is wrong .
   Please use the either of the codes below:
   //With Animation
   <code><pre>
   var win1 = Ti.UI.createWindow();
   var focused = false;  
   win1.orientationModes = [
       Titanium.UI.LANDSCAPE_RIGHT,
       Titanium.UI.LANDSCAPE_LEFT,
       Titanium.UI.PORTRAIT
   ];
     
   var adView = Ti.UI.iOS.createAdView({
       width: 'auto',
       height: 'auto',
       bottom:-100,
       zIndex:100
   });
   adView.addEventListener('load', function(){
       if(focused){
   		adView.animate({bottom:0, duration:750});
   	}
   	else
   	{
   		setTimeout(adView.fireEvent('load'), 100);
   	}
   	
   });
   win1.add(adView);
   win1.addEventListener('focus',function(){
   	focused = true;
   });
     
   win1.open();
   
   adView.show();
   </pre></code>
   
   //Without animation
   
   <code><pre>
   var win1 = Ti.UI.createWindow();
   win1.orientationModes = [
       Titanium.UI.LANDSCAPE_RIGHT,
       Titanium.UI.LANDSCAPE_LEFT,
       Titanium.UI.PORTRAIT
   ];
     
   var adView = Ti.UI.iOS.createAdView({
       width: 'auto',
       height: 'auto',
       bottom:0,
       zIndex:100
   });
   
   win1.add(adView);
   
   win1.open();
   
   adView.show();
   </pre></code></li>
<li>Sabil Rahim 2012-09-27

   MASTER PR <a href="https://github.com/appcelerator/titanium_mobile/pull/3064" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3064</a>
   2_1_X PR <a href="https://github.com/appcelerator/titanium_mobile/pull/3065" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3065</a></li>
<li>Lokesh Choudhary 2012-09-28

   Verified the fix with:
   Titanium studio : 2.1.2.201208301612
   SDK version : 2.1.3.v20120927151612
   Iphone 5 iOS 6
   Iphone 4 (5.1.1)
   xcode 4.5
   Mac OSX 10.8.2</li>
<li>Lokesh Choudhary 2012-09-28

   forgot to add master branch version.
   Verified the fix with:
   Titanium studio : 2.1.2.201208301612
   SDK version : 2.1.3.v20120927151612 , 3.0.0.v20120927164913
   Iphone 5 iOS 6
   Iphone 4 (5.1.1)
   xcode 4.5
   Mac OSX 10.8.2</li>
</ol>


<p><a href="/TIMOB/TIMOB-11187.json">JSON Source</a></p>