---
title: "[TIMOB-11213] iOS: orientation - iOS 6 only: Forcing landscape on a window then opening an email dialog in portrait will result in your original window allowed to rotate to portrait"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-10-06T02:44:15.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.3, Release 3.0.0, Sprint 2012-20 API, 2012 Sprint 20</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>qe-ios090112, qe-ios6, qe-nfc, qe-port</td></tr>
<tr><th>Reporter</th><td>Eric Merriman </td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2012-09-28T22:30:48.000+0000</td></tr>
<tr><th>Updated</th><td>2012-10-06T02:44:15.000+0000</td></tr>
</table>

<h3>Description</h3>

While investigating an issue posted on the Q&A, I was unable to reproduce the exact problem, but did discover another:

When you allow only portrait in Tiapp.xml:
<code><pre>


</pre></code>

And then open a window with landscape left allowed and attempt to send a mail, the email dialog can rotate as you wish. If you close the email dialog and return to your window in portrait, the win will be in portrait - which shouldn't be allowed.

Sample code:
<code><pre>
var win= Ti.UI.createWindow({
	orientationModes:[Ti.UI.LANDSCAPE_LEFT],
	backgroundColor:'red'
	});
	
var button = Ti.UI.createButton({title:"Click me", height:60, width:200});

button.addEventListener('click', function(){
	Titanium.Media.takeScreenshot(function(event)
	{
		// set blob on image view
		var myImage = event.media;
	
	
		var emailDialog = Titanium.UI.createEmailDialog();
				if (!emailDialog.isSupported()) {
					Ti.UI.createAlertDialog({
						title:'Error',
						message:'Email not available'
					}).show();
					return;
				}
				emailDialog.setSubject('Hello from Titanium!');
				emailDialog.setToRecipients(['foo@yahoo.com']);
				emailDialog.setMessageBody('<b>Appcelerator Titanium Rocks!</b>Ã¥');
				emailDialog.setHtml(true);
				emailDialog.setBarColor('#336699');
					
				// attach a blob
				emailDialog.addAttachment(event.media);
				
				
				emailDialog.addEventListener('complete',function(e)
				{
					if (e.result == emailDialog.SENT)
					{
						if (Ti.Platform.osname != 'android') {
							// android doesn't give us useful result codes.
							// it anyway shows a toast.
							alert("message was sent");
						}
					}
					else
					{
						alert("message was not sent. result = " + e.result);
					}
				});
				emailDialog.open();
				
			});
});

win.add(button);
win.open();
</pre></code>

Steps to reproduce:
1) Create a new application
2) Set tiapp.xml to portrait orientation as above
3) Use sample code
4) Launch sample app in portrait orientation, not splash is portrait as desired
5) Note window is locked landscape left - Click the "Click me" button
5) note email dialog comes up in portrait
6) Cancel email

Result:
The red window is now displayed in portrait - any orientation change returns it to its only approved orientation

Expected:
The red window does not change orientation

Note: this does not occur on iOS 5 devices

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-11213_32186/dismissed_alert.png">dismissed_alert.png</td></td><td>2012-10-01T23:05:56.000+0000</td><td>26398</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-11213_32143/expected.png">expected.png</td></td><td>2012-09-28T22:30:48.000+0000</td><td>24340</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-11213_32187/force_rotation_landscape_locked.png">force_rotation_landscape_locked.png</td></td><td>2012-10-01T23:05:56.000+0000</td><td>23973</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-11213_32185/force_rotation_portrait.png">force_rotation_portrait.png</td></td><td>2012-10-01T23:05:56.000+0000</td><td>134515</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-11213_32184/left_landscape_email_cancel.png">left_landscape_email_cancel.png</td></td><td>2012-10-01T23:05:56.000+0000</td><td>130933</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-11213_32144/unexpected.png">unexpected.png</td></td><td>2012-09-28T22:30:48.000+0000</td><td>25396</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Olga Romero 2012-10-01

   Adding screenshots for a different behavior dated 01/Oct.
   Steps to reproduce:
   1) Create a new application
   2) Set tiapp.xml to portrait orientation as above
   3) Use sample code
   4) Launch sample app in portrait orientation
   5) Note window is locked landscape left - Click the "Click me" button
   5) note email dialog comes up in portrait
   6) Cancel email
   7) The red window with an Alert "message was not sent, result=0" is displayed in landscape left
   8) Rotate device or put it down and pick it up
   9) The red window with an Alert "message was not sent, result=0" is displayed in portrait
   10)Click OK
   11) Rotate device anyhow
   
   Result:
   The red window is now displayed in locked landscape left orientation
   Expected:
   The red window does not change orientation
   *Note: this does not occur on iOS 5 devices*
   Tested on:
   Titanium Studio, build: 2.1.2.201208301612
   Titanium SDK: 3.0.0.v20120929141713
   Titanium SDK: 2.1.3.v20120928203111
   Devices:
   iPhone5 ios 6.0
   
   </li>
<li>Olga Romero 2012-10-02

   Closing as fixed.
   Confirmed with:
   Titanium Studio, build: 2.1.2.201208301612
   Titanium SDK: 3.0.0.v20121002114914
   Titanium SDK: 2.1.3.v20121002110115
   Xcode 4.5
   Titanium Studio, build: 2.1.2.201208301612
   Titanium SDK: 2.1.2GA
   Xcode 4.4.1
   iPhone5 ios 6.0</li>
<li>Ingo Muschenetz 2012-10-06

   Reopened to adjust remaining estimate.</li>
</ol>


<p><a href="/TIMOB/TIMOB-11213.json">JSON Source</a></p>