---
title: "[TIMOB-11450] CLI: Scons fails if no write access to npm directory"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-10-13T20:50:50.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.0.0, Release 3.1.0, 2012 Sprint 21 JS, 2012 Sprint 21</td></tr>
<tr><th>Components</th><td>CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2012-10-13T02:15:48.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-08T00:46:45.000+0000</td></tr>
</table>

<h3>Description</h3>

When scons runs npm, it will fail if it can't write to the npm directory. This might be caused if installing the Titanium CLI first using sudo which might write lock files to the real user's npm directory as root.

<code><pre>
[ERROR] Failed to npm install dependencies

npm WARN package.json titanium-mobile-deps@3.1.0 No README.md file found!
npm ERR! Error: EACCES, open '/Users/vjoshi/.npm/463e1c03-async-0-1-x.lock'
npm ERR!  { [Error: EACCES, open '/Users/vjoshi/.npm/463e1c03-async-0-1-x.lock']
npm ERR!   errno: 3,
npm ERR!   code: 'EACCES',
npm ERR!   path: '/Users/vjoshi/.npm/463e1c03-async-0-1-x.lock' }
npm ERR! 
npm ERR! Please try running this command again as root/Administrator.

npm ERR! System Darwin 11.4.2
npm ERR! command "node" "/usr/local/bin/npm" "install"
npm ERR! cwd /Users/vjoshi/Documents/titanium_mobile/support
npm ERR! node -v v0.8.12
npm ERR! npm -v 1.1.63
npm ERR! path /Users/vjoshi/.npm/463e1c03-async-0-1-x.lock
npm ERR! code EACCES
npm ERR! errno 3
npm ERR! stack Error: EACCES, open '/Users/vjoshi/.npm/463e1c03-async-0-1-x.lock'
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/vjoshi/Documents/titanium_mobile/support/npm-debug.log
npm ERR! not ok code 0

scons: *** [dummy-sdk-target] Explicit exit, status 1
scons: building terminated because of errors.
</pre></code>

This might be as simple as checking if the files are writeable and if not erroring.

<h3>Comments</h3>

<ol>
<li>Chris Barber 2012-10-13

   Master pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/3204" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3204</a>
   3.0.x pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/3205" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3205</a></li>
<li>Lee Morris 2017-03-08

   Closing ticket as resolved.</li>
</ol>


<p><a href="/TIMOB/TIMOB-11450.json">JSON Source</a></p>