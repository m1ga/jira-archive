---
title: "[TIMOB-11502] Android: TableView - Application crashes when adding a TableViewSection with headerView"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-10-30T17:22:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.3</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.0.0, Release 3.1.0, 2012 Sprint 22 Core, 2012 Sprint 22</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>Android, TableView, TableViewSection, core, module_tableview, notable, qe-review, qe-testadded, triage</td></tr>
<tr><th>Reporter</th><td>Lucian Pacurar</td></tr>
<tr><th>Assignee</th><td>Allen Yeung</td></tr>
<tr><th>Created</th><td>2012-10-04T11:08:02.000+0000</td></tr>
<tr><th>Updated</th><td>2012-12-20T00:09:55.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>
I have a fairly simple TableView in my app which crashes only when compiled with SDK 2.1.3. Inside the DDMS log attached you can find the exception thrown. The cause of the crash seems to be the headerView of the TableViewSection. Using the following test case the app crashes in the Android Emulators 4.0.3 and 4.1 on both WVGA800 and WXGA720 screen, but inside my app this code crashes only when ran on the WXGA720 screen.

<h4>Test case</h4>
<code><pre>
var self = Ti.UI.createWindow({
		backgroundColor: "#ffffff",
		tabBarHidden: true
	});

var tableViewData = [];
	
var tableView = Ti.UI.createTableView({
	style:Titanium.UI.iPhone.TableViewStyle.GROUPED,
});

self.add(tableView);

var headerView = Ti.UI.createView({
	height: 90,
	borderColor: 'transparent',
	borderWidth: 0,
});

var headerImageContainer = Ti.UI.createView({
	left: 19,
	height: 64,
	width: 64
});
	
headerImageContainer.add(Ti.UI.createView({
	backgroundImage: '/images/person.png',
	width: 64,
	height: 64,
	borderColor: '#a9a9a9',
	borderRadius: 4,
	borderWidth: 1,
	
}));

headerView.add(headerImageContainer);

tableViewData.push(Ti.UI.createTableViewSection({
	headerView: headerView,
}));

tableView.data = tableViewData;

self.add(tableView);

self.open();
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-11502_32281/crash log.txt">crash log.txt</td></td><td>2012-10-04T11:08:02.000+0000</td><td>10176</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Karl Rowley 2012-10-16

   When these two lines of Javascript code are removed, there is no failure:
   
       borderColor: 'transparent',
       borderWidth: 0,
   
   
   This is the first place I see a problem:
   
   Thread [<1> main] (Suspended (exception IllegalStateException))	
   	<VM does not provide monitor information>	
   	ListView.layoutChildren() line: 1662	
   	ListView(AbsListView).onLayout(boolean, int, int, int, int) line: 1147	
   	ListView(View).layout(int, int, int, int) line: 7035	
   	TiTableView(FrameLayout).onLayout(boolean, int, int, int, int) line: 333	
   	TiTableView.onLayout(boolean, int, int, int, int) line: 555	
   	TiTableView(View).layout(int, int, int, int) line: 7035	
   	TiCompositeLayout.onLayout(boolean, int, int, int, int) line: 583	
   	TiCompositeLayout(View).layout(int, int, int, int) line: 7035	
   	TiCompositeLayout.onLayout(boolean, int, int, int, int) line: 583	
   	TiCompositeLayout(View).layout(int, int, int, int) line: 7035	
   	FrameLayout.onLayout(boolean, int, int, int, int) line: 333	
   	FrameLayout(View).layout(int, int, int, int) line: 7035	
   	LinearLayout.setChildFrame(View, int, int, int, int) line: 1249	
   	LinearLayout.layoutVertical() line: 1125	
   	LinearLayout.onLayout(boolean, int, int, int, int) line: 1042	
   	LinearLayout(View).layout(int, int, int, int) line: 7035	
   	PhoneWindow$DecorView(FrameLayout).onLayout(boolean, int, int, int, int) line: 333	
   	PhoneWindow$DecorView(View).layout(int, int, int, int) line: 7035	
   	ViewRoot.performTraversals() line: 1045	
   	ViewRoot.handleMessage(Message) line: 1727	
   	ViewRoot(Handler).dispatchMessage(Message) line: 99	
   	Looper.loop() line: 123	
   	ActivityThread.main(String[]) line: 4627	
   	Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]	
   	Method.invoke(Object, Object...) line: 521	
   	ZygoteInit$MethodAndArgsCaller.run() line: 868	
   	ZygoteInit.main(String[]) line: 626	
   	NativeStart.main(String[]) line: not available [native method]	
   </li>
<li>Karl Rowley 2012-10-17

   Someone in the Core Team needs to look at this ticket</li>
<li>Allen Yeung 2012-10-26

   Updated test case:
   
   <code><pre>
   var self = Ti.UI.createWindow({
   	backgroundColor : "#ffffff",
   	tabBarHidden : true
   });
   
   var tableViewData = [];
   
   var tableView = Ti.UI.createTableView({
   	// style:Titanium.UI.iPhone.TableViewStyle.GROUPED,
   });
   
   self.add(tableView);
   
   var headerView = Ti.UI.createView({
   	height : 90,
   	borderColor : 'green',
   	borderWidth : 5,
   	backgroundColor : 'red'
   });
   
   var headerImageContainer = Ti.UI.createView({
   	left : 19,
   	height : 64,
   	width : 64,
   	backgroundColor : 'blue'
   });
   
   headerImageContainer.add(Ti.UI.createView({
   	backgroundColor : 'yellow',
   	width : 64,
   	height : 64,
   	borderColor : '#a9a9a9',
   	borderRadius : 4,
   	borderWidth : 1,
   }));
   
   headerView.add(headerImageContainer);
   
   tableViewData.push(Ti.UI.createTableViewSection({
   	headerView : headerView,
   }));
   
   tableView.data = tableViewData;
   
   self.add(tableView);
   
   self.open();
   </pre></code>
   
   Expected Results:
   There should be a red view with a green border for the row.  Inside the red view, there is a yellow view.</li>
<li>Allen Yeung 2012-10-26

   PR Ready: <a href="https://github.com/appcelerator/titanium_mobile/pull/3333" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3333</a></li>
<li>Max Stepanov 2012-11-21

   3_0_X PR <a href="https://github.com/appcelerator/titanium_mobile/pull/3468" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3468</a></li>
<li>Tamila Smolich 2012-12-04

   Closing as fixed. Tested on: 
   Titanium Studio, build: 3.0.0.201211301903
   Titanium SDK, builds: 3.0.0.v20121130200208; 3.1.0.v20121203181001
   Devices: Samsung Galaxy S III (4.0.4)</li>
</ol>


<p><a href="/TIMOB/TIMOB-11502.json">JSON Source</a></p>