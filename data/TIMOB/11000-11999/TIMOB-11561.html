---
title: "[TIMOB-11561] keyboardToolbar of textField not being displayed on textField.focus()"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-10-31T00:04:29.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.3</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.4, Release 3.0.0, Release 3.1.0, 2012 Sprint 22 API, 2012 Sprint 22</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>api, developer-preview, module_textfield, qe-testadded, regression</td></tr>
<tr><th>Reporter</th><td>Amuktha Akkinepally</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2012-10-23T23:17:55.000+0000</td></tr>
<tr><th>Updated</th><td>2013-10-04T07:22:26.000+0000</td></tr>
</table>

<h3>Description</h3>

The Keyboard Toolbar on top of the key board does not appear once the textField is blurred and then re focussed. This works fine on 2.1.0, 2.1.1, 2.1.2 GAs.

<h4>Steps to reproduce:</h4>
1. Load the app with below app.js
2. Make sure the app on Ti SDK 2.1.3GA
3. Enter a value greater than 10.
4. Click on the 'button'

Actual Result: The Keyboard toolbar just disappears.

Expected Result: The Keyboard toolbar should not disappear like on 2.1.2 SDK.

app.js:
<code><pre>
var  win = Titanium.UI.createWindow({
                    backgroundColor:'white',
                    title:'window',
                    barColor:'#ff7b01',
                    top:0
                });

var b = Titanium.UI.createButton({
        title:'Button',
        style:Titanium.UI.iPhone.SystemButtonStyle.DONE
    });
    b.addEventListener('click',function(){
        txtField.blur();
    })
    var flexSpace = Titanium.UI.createButton({
        systemButton:Titanium.UI.iPhone.SystemButton.FLEXIBLE_SPACE
    });
var txtField = Titanium.UI.createTextField({
            color : '#ff7c00',
            font : {
                fontSize : 16,
                fontWeight : 'bold',
                fontFamily : 'Helvetica Neue'
            },
            top : 19,
            textAlign : 'right',
            height : 50,
            left:'65%',
            right : '10%',
            keyboardType : Titanium.UI.KEYBOARD_NUMBER_PAD,
            returnKeyType : Titanium.UI.RETURNKEY_DEFAULT,
            borderStyle : Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
            keyboardToolbarColor:'#898989',
            keyboardToolbar:[flexSpace,b,flexSpace]
        });
txtField.addEventListener('blur',function(e){
    if(e.value &gt; 10){
        txtField.value = '';
        /*setTimeout(function(){
            txtField.focus()},1000)*/
        txtField.focus();
    }

})

win.add(txtField);


win.open()
</pre></code>

<h3>Comments</h3>

<ol>
<li>Vishal Duggal 2012-10-24

   Focusing inside blur events and blurring inside focus events is a really bad design so no we will not fix race conditions.
   Anyways from what I can see of the app, the whole value verification can be done on the click listener of the button. </li>
<li>Blain Hamon 2012-10-26

   Not only that, but disallowing the user to change fields is a [direct violation of Apple's HIG and grounds for app rejection](<a href="https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/Principles/Principles.html#//apple_ref/doc/uid/TP40006556-CH5-SW6)" rel="nofollow" target="_blank">https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/Principles/Principles.html#//apple_ref/doc/uid/TP40006556-CH5-SW6)</a>
   bq. People, not apps, should initiate and control actions. Although an app can suggest a course of action or warn about dangerous consequences, itâ€™s usually a mistake for the app to take decision-making away from the user.
   
   Moving to mark as invalid.</li>
<li>Vishal Duggal 2012-10-30

   Will see if tis can be handled. </li>
<li>Vishal Duggal 2012-10-30

   master PR <a href="https://github.com/appcelerator/titanium_mobile/pull/3355" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3355</a>
   3_0_X PR <a href="https://github.com/appcelerator/titanium_mobile/pull/3365" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3365</a>
   2_1_X PR <a href="https://github.com/appcelerator/titanium_mobile/pull/3366" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3366</a></li>
<li>Natalie Huynh 2012-11-01

   Tested with 2.1.4.v20121030173408 on iPhone 4s 6.0</li>
</ol>


<p><a href="/TIMOB/TIMOB-11561.json">JSON Source</a></p>