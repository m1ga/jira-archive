---
title: "[TIMOB-11587] iOS: Facebook cookies are not deleted on logging out from facebook in iOS"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2013-01-14T13:17:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.3</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 01 API, 2013 Sprint 01</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Anirudh Nagesh</td></tr>
<tr><th>Assignee</th><td>Sabil Rahim</td></tr>
<tr><th>Created</th><td>2012-10-26T23:49:20.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-27T20:57:49.000+0000</td></tr>
</table>

<h3>Description</h3>

Run the Kitchen Sink App.
On Mashups tab, run Login-Logout test.
Click the login button. An authorization window is shown where credentials can be entered
Click the logout button.
Click the login button again. No authorization window is shown and user is logged in directly using the Ti.Facebook.UID.

On Android, upon logout, the authorization window is shown again and is the proper behavior. ( Cookies get deleted on logout ).

WorkAround for iOS:
In Logout callback, include the below code snippet
<code><pre>
var client = Titanium.Network.createHTTPClient();
    client.clearCookies('<a href="https://login.facebook.com" rel="nofollow" target="_blank">https://login.facebook.com</a>');
</pre></code>

<h3>Comments</h3>

<ol>
<li>Ygor Lemos 2013-01-02

   Any news on this one????</li>
<li>Olga Romero 2013-01-14

   Cannot reproduce. An authorization window appears every time after the user logged out and wants to log back in again.
   Test environment 
   Kitchen Sink:
   d8593b9f7 from github
   Mountain Lion 10.8.2
   Titanium Studio, build: 3.0.1.201212181159
   Titanium SDK, build: 3.0.0.GA
   Titanium SDK, build:3.0.1.v20130111165328
   Titanium SDK, build:3.1.0.v20130111163212
   Titanium SDK, build:2.1.3.GA
   Titanium SDK, build:2.1.4.GA
   iPhone5 iOS 6.0
   iPhone4S iOS 5.0.1
   iPad2 iOS 5.1
   iPad4 iOS 6.0.1</li>
<li>Sabil Rahim 2013-01-14

   Tried on the latest master branch .. Cannot reproduce this issue. It might have been solved as a part of Facebook API that we have done over the last 6 months
   </li>
<li>Eric Merriman  2013-01-14

   @Ygor or Anirudh, we are unable to repro this. Since both facebook and the KitchenSink test samples have changed since 2.1.3 and we also don't know the source of the KS used in this test, we need additional info. If anyone can provide additional data, we will try again.</li>
<li>Daniel Mahon 2013-01-25

   I am having the same problem in the iOS Simulator. Very odd behavior, it only seems to happen when I login (via facebook) using another account than my personal one. If I use my personal account the login and logout works fine, I get the authDialog everytime. If I use another account (Ive only tested on these 2 accounts) login works fine but logout doesnt seem to clear the session properly as the next time I login the authDialog is skipped and I am unable to change the facebook credentials. Maybe this has something to do with unique facebook security settings? Anirudh's workaround seems to have solved the issue for now.
   
   You should be able to reproduce testing with the CodeStrong Alloy app as I used this as the base for my app.
   
   --
   
   OSX 10.8.2
   Titanium SDK Version: 3.0.1
   Titanium CLI Version: 3.0.23
   Alloy Version: 0.3.6
   iOS Simulator
   iPhone5 iOS 6
   
   
   </li>
<li>Blain Hamon 2013-01-25

   @Daniel: Just as a data point, have you tested with device? Sometimes the simulator gets wonky, and as useful as the simulator is, the real test for your users will be on device.</li>
<li>Daniel Mahon 2013-01-25

   @Blain Same results when running on iPhone, not sure if this is related but I have been also getting a "Email is already taken" error when trying to login with that account on phone and sim.</li>
<li>Lee Morris 2017-03-27

   Closing ticket as I am unable to reproduce this issue with the following environment;
   iPhone 7 (10.2)
   MacOS 10.11.6 (15G31)
   Studio 4.8.1.201612050850
   Ti SDK 6.0.3 GA
   Appc NPM 4.2.8
   Appc CLI 6.1.0
   Ti CLI 5.0.11
   Alloy 1.9.5
   Arrow 1.10.1
   Xcode 8.2 (8C38)
   Node v4.6.0
   Java 1.7.0_80</li>
</ol>


<p><a href="/TIMOB/TIMOB-11587.json">JSON Source</a></p>