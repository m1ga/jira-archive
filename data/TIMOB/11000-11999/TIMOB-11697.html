---
title: "[TIMOB-11697] Android: Support SSL certificate store with HTTP Client"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Sub-task</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-12-04T00:39:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.1.0, 2012 Sprint 25, 2012 Sprint 25 Core</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Allen Yeung</td></tr>
<tr><th>Assignee</th><td>Allen Yeung</td></tr>
<tr><th>Created</th><td>2012-11-08T00:43:25.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-09T18:16:11.000+0000</td></tr>
</table>

<h3>Description</h3>



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-11697_36643/com.certificatestore-android-0.1.zip">com.certificatestore-android-0.1.zip</td></td><td>2013-03-26T02:53:53.000+0000</td><td>33827</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-11697_33500/sslTest.zip">sslTest.zip</td></td><td>2012-11-16T02:50:00.000+0000</td><td>3739730</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-11697_33501/webserver.zip">webserver.zip</td></td><td>2012-11-16T02:50:00.000+0000</td><td>461978</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Vishal Duggal 2012-11-15

   For android it will require the user be able to configure the SSL context. So we need to expose hooks in the HTTPClient for the user to specify the keyManagers and trustManagers to be used for the request. The actual parsing and loading of certificate data and implementation of the managers can be done in a module.</li>
<li>Allen Yeung 2012-11-16

   Testing Steps:
   
   To test this issue, you will need to setup a local webserver that supports ssl.  There is some nodejs code attached to this ticket that will act as a webserver.  You will need to have node.js installed for this to work.  I have node v0.8.14 installed, but a relatively recent version should work.
   
   First you will need to set up the web server:
   1. Unzip the webserver.zip
   2. Inside the zip you will find a server.js
   3. run the server.js:  'node server.js'
   4. when prompted for a password, just use 'password'
   5. leave the webserver running while running the app
   
   Running the app:
   1. Import the attached project into studio
   2. Open up app.js and modify the url <a href="https://192.168.1.10:5678" rel="nofollow" target="_blank">https://192.168.1.10:5678</a> You will need to change 192.168.1.10 to the IP address of your computer.  You can find this info under System Preferences > Network
   3. Install the app to the device and run it.  (If you are running this on device, you will need to connect to the same network as your computer)
   4. You should see a success message
   
   Additional test cases:
   We also want to test to make sure not specifying a certificate fails and using an invalid certificate fails.
   
   - Inside app.js, change the addCertificate() call to use 'server2.p12' instead of 'server.p12'.  Run the app, and you should see an error message.
   
   - Inside app.js, comment out the line: 
   client.addTrustManager(certificateStore.getTrustManager());
   
   This should make it so we don't use the certificate store. Run the app, and you should see an error message.</li>
<li>Allen Yeung 2012-11-16

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/3433" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3433</a>  This is to expose hooks for the SSL cert module</li>
<li>Vishal Duggal 2012-11-27

   Above PR was closed. Changes are incorporated into this PR 
   <a href="https://github.com/appcelerator/titanium_mobile/pull/3429" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3429</a></li>
<li>Federico Casali 2013-04-08

   Verified as working as expected.
   
   TiSDK 3.1.0.v20130405170202
   CLI version 3.1.0-cr
   Android Google Nexus One and Android emulator
   </li>
<li>Lee Morris 2017-03-09

   Closing ticket as fixed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-11697.json">JSON Source</a></p>