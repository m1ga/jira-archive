{
	"id": "104035",
	"key": "TIMOB-11747",
	"fields": {
		"issuetype": {
			"id": "1",
			"description": "A problem which impairs or prevents the functions of the product.",
			"name": "Bug",
			"subtask": false
		},
		"project": {
			"id": "10153",
			"key": "TIMOB",
			"name": "Titanium SDK/CLI",
			"projectCategory": {
				"id": "10100",
				"description": "Titanium and related SDKs used in application development",
				"name": "Client"
			}
		},
		"fixVersions": [
			{
				"id": "14162",
				"description": "Release 3.1.0",
				"name": "Release 3.1.0",
				"archived": true,
				"released": true,
				"releaseDate": "2013-04-16"
			},
			{
				"id": "15396",
				"description": "2013 Sprint 07 Core",
				"name": "2013 Sprint 07 Core",
				"archived": true,
				"released": true,
				"releaseDate": "2013-04-08"
			},
			{
				"id": "15105",
				"description": "2013 Sprint 07",
				"name": "2013 Sprint 07",
				"archived": true,
				"released": true,
				"releaseDate": "2013-04-08"
			}
		],
		"resolution": {
			"id": "1",
			"description": "A fix for this issue is checked into the tree and tested.",
			"name": "Fixed"
		},
		"resolutiondate": "2013-03-26T21:16:16.000+0000",
		"created": "2012-10-29T15:26:29.000+0000",
		"priority": {
			"name": "High",
			"id": "2"
		},
		"labels": [
			"triage"
		],
		"versions": [
			{
				"id": "14137",
				"description": "Release 2.1.3",
				"name": "Release 2.1.3",
				"archived": true,
				"released": true,
				"releaseDate": "2012-10-03"
			},
			{
				"id": "13505",
				"description": "Release 3.0.0",
				"name": "Release 3.0.0",
				"archived": true,
				"released": true,
				"releaseDate": "2012-12-14"
			}
		],
		"issuelinks": [],
		"assignee": {
			"name": "mstepanov",
			"key": "mstepanov",
			"displayName": "Max Stepanov",
			"active": true,
			"timeZone": "America/Los_Angeles"
		},
		"updated": "2013-04-06T10:05:59.000+0000",
		"status": {
			"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
			"name": "Closed",
			"id": "6",
			"statusCategory": {
				"id": 3,
				"key": "done",
				"colorName": "green",
				"name": "Done"
			}
		},
		"components": [
			{
				"id": "10206",
				"name": "iOS",
				"description": "iOS Platform"
			}
		],
		"description": "*Problem description*\r\nAfter creating and showing Titanium.UI.iPad.DocumentViewer, tapping done button between 2-4 times crashes the app.\r\n\r\n*Note*\r\n- Tested and confirmed on iOS 6, TiSDK 2.1.3 GA and latest 3.0.0.\r\n- Does not crash on iOS 5.1, TiSDK 2.1.3 GA\r\n\r\n*Log generated by 3.0.0*\r\n{code}\r\n[INFO] DocumentViewer/1.0 (3.0.0.v20121112140159.b7beec5)\r\n[WARN] Titanium.UI.iPad.createDocumentViewer DEPRECATED in 2.1.1: REMOVED in Ti.Ui.iOS.createDocumentViewer()\r\n[WARN] Titanium.UI.iPad.createDocumentViewer DEPRECATED in 2.1.1: REMOVED in Ti.Ui.iOS.createDocumentViewer()\r\n[WARN] Titanium.UI.iPad.createDocumentViewer DEPRECATED in 2.1.1: REMOVED in Ti.Ui.iOS.createDocumentViewer()\r\n[WARN] Titanium.UI.iPad.createDocumentViewer DEPRECATED in 2.1.1: REMOVED in Ti.Ui.iOS.createDocumentViewer()\r\n2012-11-12 15:14:16.382 DocumentViewer[22493:1b203] -[__NSMallocBlock__ documentInteractionControllerDidEndPreview:]: unrecognized selector sent to instance 0xb26cbe0\r\n[ERROR] The application has crashed with an uncaught exception 'NSInvalidArgumentException'.\r\nReason:\r\n-[__NSMallocBlock__ documentInteractionControllerDidEndPreview:]: unrecognized selector sent to instance 0xb26cbe0\r\nStack trace:\r\n0   CoreFoundation                      0x03552012 __exceptionPreprocess + 178\r\n1   libobjc.A.dylib                     0x02fa4e7e objc_exception_throw + 44\r\n2   CoreFoundation                      0x035dd4bd -[NSObject(NSObject) doesNotRecognizeSelector:] + 253\r\n3   CoreFoundation                      0x03541bbc ___forwarding___ + 588\r\n4   CoreFoundation                      0x0354194e _CF_forwarding_prep_0 + 14\r\n5   UIKit                               0x00f523f7 -[UIDocumentInteractionController(QLPreviewController) previewControllerDidDismiss:] + 97\r\n6   QuickLook                           0x096c365d -[QLPreviewController viewDidDisappear:] + 397\r\n7   UIKit                               0x00c81753 -[UIViewController _setViewAppearState:isAnimating:] + 146\r\n8   UIKit                               0x00c81c62 -[UIViewController __viewDidDisappear:] + 157\r\n9   UIKit                               0x00c81d54 -[UIViewController _endAppearanceTransition:] + 235\r\n10  UIKit                               0x00c8f5c9 -[UIViewController(UIContainerViewControllerProtectedMethods) endAppearanceTransition] + 41\r\n11  UIKit                               0x00e8c882 -[UIWindowController transitionViewDidComplete:fromView:toView:removeFromView:] + 1940\r\n12  UIKit                               0x00c5e594 -[UITransitionView notifyDidCompleteTransition:] + 520\r\n13  UIKit                               0x00c5e21c -[UITransitionView _didCompleteTransition:] + 1297\r\n14  UIKit                               0x00c60563 -[UITransitionView _transitionDidStop:finished:] + 107\r\n15  UIKit                               0x00bdc3b6 -[UIViewAnimationState sendDelegateAnimationDidStop:finished:] + 237\r\n16  UIKit                               0x00bdc554 -[UIViewAnimationState animationDidStop:finished:] + 68\r\n17  QuartzCore                          0x021527d8 _ZN2CA5Layer23run_animation_callbacksEPv + 284\r\n18  libdispatch.dylib                   0x03874014 _dispatch_client_callout + 14\r\n19  libdispatch.dylib                   0x038647d5 _dispatch_main_queue_callback_4CF + 296\r\n20  CoreFoundation                      0x034f8af5 __CFRunLoopRun + 1925\r\n21  CoreFoundation                      0x034f7f44 CFRunLoopRunSpecific + 276\r\n22  CoreFoundation                      0x034f7e1b CFRunLoopRunInMode + 123\r\n23  GraphicsServices                    0x0326a7e3 GSEventRunModal + 88\r\n24  GraphicsServices                    0x0326a668 GSEventRun + 104\r\n25  UIKit                               0x00b9e65c UIApplicationMain + 1211\r\n26  DocumentViewer                      0x00006518 main + 456\r\n27  DocumentViewer                      0x00002e05 start + 53\r\n2012-11-12 15:14:16.559 DocumentViewer[22493:1b203] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSMallocBlock__ documentInteractionControllerDidEndPreview:]: unrecognized selector sent to instance 0xb26cbe0'\r\n*** First throw call stack:\r\n(0x3552012 0x2fa4e7e 0x35dd4bd 0x3541bbc 0x354194e 0xf523f7 0x96c365d 0xc81753 0xc81c62 0xc81d54 0xc8f5c9 0xe8c882 0xc5e594 0xc5e21c 0xc60563 0xbdc3b6 0xbdc554 0x21527d8 0x3874014 0x38647d5 0x34f8af5 0x34f7f44 0x34f7e1b 0x326a7e3 0x326a668 0xb9e65c 0x6518 0x2e05)\r\n[INFO] Application has exited from Simulator\r\n{code}",
		"attachment": [
			{
				"id": "33401",
				"filename": "DocumentViewer.zip",
				"author": {
					"name": "tonylewis",
					"key": "tonylewis",
					"displayName": "Tony Lewis",
					"active": true,
					"timeZone": "America/Los_Angeles"
				},
				"created": "2012-11-12T16:41:25.000+0000",
				"size": 4247421,
				"mimeType": "application/zip"
			}
		],
		"flagged": false,
		"summary": "iOS 6: Titanium.UI.iPad.DocumentViewer crashes when tapping done button",
		"creator": {
			"name": "tonylewis",
			"key": "tonylewis",
			"displayName": "Tony Lewis",
			"active": true,
			"timeZone": "America/Los_Angeles"
		},
		"subtasks": [],
		"reporter": {
			"name": "tonylewis",
			"key": "tonylewis",
			"displayName": "Tony Lewis",
			"active": true,
			"timeZone": "America/Los_Angeles"
		},
		"environment": "OS X Mountain Lion (10.8.2)\r\nTitanium Studio, build: 2.1.2.201208301612\r\nTitanium SDK 2.1.3 GA\r\n",
		"comment": {
			"comments": [
				{
					"id": "226939",
					"author": {
						"name": "dsefton",
						"key": "dsefton",
						"displayName": "Daniel Sefton",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Can you provide a reproducible test case in the form of an app.js? Thanks.",
					"updateAuthor": {
						"name": "dsefton",
						"key": "dsefton",
						"displayName": "Daniel Sefton",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2012-11-09T22:17:13.000+0000",
					"updated": "2012-11-09T22:17:13.000+0000"
				},
				{
					"id": "226987",
					"author": {
						"name": "tonylewis",
						"key": "tonylewis",
						"displayName": "Tony Lewis",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Sample app has been uploaded.",
					"updateAuthor": {
						"name": "tonylewis",
						"key": "tonylewis",
						"displayName": "Tony Lewis",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2012-11-12T16:41:42.000+0000",
					"updated": "2012-11-12T16:41:42.000+0000"
				},
				{
					"id": "227081",
					"author": {
						"name": "dsefton",
						"key": "dsefton",
						"displayName": "Daniel Sefton",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Thanks Tony.\nSo I confirmed this with iOS 6, TiSDK 2.1.3 GA and latest 3.0.0 on both device (iPad 3) and simulator. It crashes when tapping 'Done' between 2-4 times. I tested it on iOS 5.1, TiSDK 2.1.3 GA and it does not crash.\nWhen running it with 3.0.0 I got an extensive log about what the error actually is. I will add it to the description. I will now move this to TiMob for engineering to take a look.",
					"updateAuthor": {
						"name": "dsefton",
						"key": "dsefton",
						"displayName": "Daniel Sefton",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2012-11-12T23:23:16.000+0000",
					"updated": "2012-11-12T23:23:16.000+0000"
				},
				{
					"id": "233849",
					"author": {
						"name": "creativejunky",
						"key": "creativejunky",
						"displayName": "Daniel Mahon",
						"active": true,
						"timeZone": "America/New_York"
					},
					"body": "+1 Same issue with studio and sdk @ latest release on iOS 6",
					"updateAuthor": {
						"name": "creativejunky",
						"key": "creativejunky",
						"displayName": "Daniel Mahon",
						"active": true,
						"timeZone": "America/New_York"
					},
					"created": "2013-01-10T13:53:31.000+0000",
					"updated": "2013-01-10T13:53:31.000+0000"
				},
				{
					"id": "238574",
					"author": {
						"name": "alresave",
						"key": "alresave",
						"displayName": "Alberto Gonzalez",
						"active": true,
						"timeZone": "America/Mexico_City"
					},
					"body": "+1 I have an app that uses DocumentViewer and it keeps crashing.",
					"updateAuthor": {
						"name": "alresave",
						"key": "alresave",
						"displayName": "Alberto Gonzalez",
						"active": true,
						"timeZone": "America/Mexico_City"
					},
					"created": "2013-02-14T17:55:17.000+0000",
					"updated": "2013-02-14T17:55:17.000+0000"
				},
				{
					"id": "244031",
					"author": {
						"name": "mstepanov",
						"key": "mstepanov",
						"displayName": "Max Stepanov",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Simplified test instructions:\r\n1. Launch the attached app on 6.0 iPad Simulator\r\n2. Press \"View Document\"\r\n3. Simulate memory warning\r\n4. Press \"Done\" button or wait 5 seconds to get it closed with timeout set.",
					"updateAuthor": {
						"name": "mstepanov",
						"key": "mstepanov",
						"displayName": "Max Stepanov",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2013-03-25T23:10:45.000+0000",
					"updated": "2013-03-25T23:35:11.000+0000"
				},
				{
					"id": "244034",
					"author": {
						"name": "mstepanov",
						"key": "mstepanov",
						"displayName": "Max Stepanov",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Test case:\n{code}\nvar win = Titanium.UI.createWindow({\n\t\ttitle:'Window',\n    \tbackgroundColor:'#fff',\n\t\tclassName:'navBarColor',\n\t\ttranslucent:false\n\t});\n\t\nvar scrollingView = Ti.UI.createScrollView({\n\t\ttop:0,\n\t\tleft:0,\n\t\tright:0,\n\t\tbottom:0\n\t});\n\twin.add(scrollingView);\n\t\nvar docButton = Titanium.UI.createButton({\n\t\ttop: 10,\n\t\tright:10,\n\t\theight:30,\n\t\twidth: 200,\n\t\tstyle:Titanium.UI.iPhone.SystemButtonStyle.BORDERED,\n\t\ttitle:'View Document'\n\t});\n\tscrollingView.add(docButton);\n\t\nvar displayProposal = function() {\n\t\t\tvar downloadDir = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,'');\n\t\t\tvar downloadFile = Titanium.Filesystem.getFile(downloadDir.nativePath,'doc.pdf');\n\t\t\tvar downloadFilePath = downloadFile.nativePath;\n\t \t\tvar docViewer = Titanium.UI.iPad.createDocumentViewer({url:'doc.pdf'});\n\t\t\tdocViewer.show();\n\t\t\tsetTimeout(function(){\n\t\t\t\tdocViewer.hide();\n\t\t\t},5000);\n\t}\ndocButton.addEventListener('click', function(e) {\n\t\t\tdisplayProposal();\n\t});\n\nwin.open();\n\n{code}",
					"updateAuthor": {
						"name": "mstepanov",
						"key": "mstepanov",
						"displayName": "Max Stepanov",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2013-03-25T23:34:37.000+0000",
					"updated": "2013-03-25T23:34:37.000+0000"
				},
				{
					"id": "244035",
					"author": {
						"name": "mstepanov",
						"key": "mstepanov",
						"displayName": "Max Stepanov",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "PR https://github.com/appcelerator/titanium_mobile/pull/4030",
					"updateAuthor": {
						"name": "mstepanov",
						"key": "mstepanov",
						"displayName": "Max Stepanov",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2013-03-25T23:36:55.000+0000",
					"updated": "2013-03-25T23:36:55.000+0000"
				},
				{
					"id": "246139",
					"author": {
						"name": "pmishra",
						"key": "pmishra",
						"displayName": "Paras Mishra",
						"active": true,
						"timeZone": "Asia/Kolkata"
					},
					"body": "Tapping done button, Titanium.UI.iPad.DocumentViewer doesn't crashes.\r\n\r\nVerified on:\r\nDevice : iPad mini, iOS version: 6+\r\nSDK: 3.1.0.v20130405170202\r\nCLI version : 3.1.0-beta\r\nOS : MAC OSX 10.7.5\r\nAppcelerator Studio, build: 3.1.0.201304011603\r\nXCode : 4.5.1\r\n",
					"updateAuthor": {
						"name": "pmishra",
						"key": "pmishra",
						"displayName": "Paras Mishra",
						"active": true,
						"timeZone": "Asia/Kolkata"
					},
					"created": "2013-04-06T10:05:59.000+0000",
					"updated": "2013-04-06T10:05:59.000+0000"
				}
			],
			"maxResults": 9,
			"total": 9,
			"startAt": 0
		}
	}
}