---
title: "[TIMOB-11751] Android: HTTPClient.onreadystatechange not dispatched"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-11-14T00:33:17.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.0.0, Release 3.1.0, 2012 Sprint 24, 2012 Sprint 24 API</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>3.0.0beta2, module_network, qe-testadded, regression, triage</td></tr>
<tr><th>Reporter</th><td>Josh Roesslein</td></tr>
<tr><th>Assignee</th><td>Ping Wang</td></tr>
<tr><th>Created</th><td>2012-11-13T18:56:11.000+0000</td></tr>
<tr><th>Updated</th><td>2013-10-03T07:30:19.000+0000</td></tr>
</table>

<h3>Description</h3>

The HTTPClient on Android is not dispatching the callback "onreadystatechange".

There appears to be a typo in TiHTTPClient.java with the callback
being named "onreadystatechanged" (notice the 'd' at the end).

Along with fixing this typo we should create a new Anvil test
case to catch future regressions in the HTTP callbacks. At least
verify each one fires at the correct time.

<h3>Comments</h3>

<ol>
<li>Ping Wang 2012-11-13

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/3420" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3420</a>
   Steps for FR:
   1. Run the test case below on both rhino and v8:
   <code><pre>
   var xhr = Titanium.Network.createHTTPClient();
   xhr.onreadystatechange = function()
   {
      Ti.API.info("************************** xhr.onreadystatechange");
   }
   // open the client
   xhr.open('GET','<a href="http://www.appcelerator.com/assets/The_iPad_App_Wave.pdf" rel="nofollow" target="_blank">http://www.appcelerator.com/assets/The_iPad_App_Wave.pdf</a>');
   	
   // send the data
   xhr.send();
   </pre></code>
   2. Check the console. Should see the log:
   <code><pre>
   I/TiAPI   (27676): ************************** xhr.onreadystatechange
   </pre></code>
   3. Run Anvil -> network_httpclient -> callbackTestForGETMethod/callbackTestForPOSTMethod. The tests should pass on v8. They fail on rhino for now. Already filed TIMOB-11758 for this issue.</li>
<li>Ping Wang 2012-11-14

   3_0_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/3423" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3423</a></li>
<li>Tamila Smolich 2012-12-05

   Closing as fixed. Tested on: 
   Titanium Studio, build: 3.0.0.201211301903
   Titanium SDK, builds: 3.0.0.v20121204181658; 3.1.0.v20121203181001
   Devices: Motorola RAZR i XT890 (4.0.4)</li>
</ol>


<p><a href="/TIMOB/TIMOB-11751.json">JSON Source</a></p>