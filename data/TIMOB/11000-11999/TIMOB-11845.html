---
title: "[TIMOB-11845] Android: support the 'longpress' event on MapView"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-03-30T00:41:56.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.4, Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.1.0, 2013 Sprint 04 API, 2013 Sprint 04, 2013 Sprint 07 Core</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>exalture, module_map, parity, qe-testadded, triage</td></tr>
<tr><th>Reporter</th><td>Carlo Hermus</td></tr>
<tr><th>Assignee</th><td>Allen Yeung</td></tr>
<tr><th>Created</th><td>2012-11-21T16:03:54.000+0000</td></tr>
<tr><th>Updated</th><td>2013-03-30T18:33:05.000+0000</td></tr>
</table>

<h3>Description</h3>

*Actual Result*
No results. The event is only fired the first time you touch the screen when window is opened. It states in version 1.8.0.1 this feature was available. But in version 2.1.3, 2.1.4 and the new 3.0 SDK this feature is not available. 

*Expected Result*
Being able to detect longpress event on a mapview and return the appropriate parameters.

*Notes*
When you run this on a iOS device it works.

*Test case*
<code><pre>
var mapView = Ti.Map.createView({
	mapType : Ti.Map.STANDARD_TYPE,
	animate : true,
	regionFit : true,
	region : {
		latitudeDelta : 0.02,
		longitudeDelta : 0.02,
	},
	userLocation : true,
	width : '100%',
	height : '100%',
	top : 0,
});

// open a single window
var window = Ti.UI.createWindow({
	backgroundColor : 'white'
});

mapView.addEventListener('longpress', function(e) {
	alert(e);
});

window.add(mapView);
window.open();
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-11845_33621/.log">.log</td></td><td>2012-11-21T16:04:03.000+0000</td><td>153460</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-11845_33622/diagnostic3006535850083081922.log">diagnostic3006535850083081922.log</td></td><td>2012-11-21T16:04:13.000+0000</td><td>1743</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Daniel Sefton 2012-11-21

   Tested and confirmed on Samsung Galaxy S2 2.3.6 device and Android emulator 2.3.3 on both 2.1.4 GA and latest 3.0.0 build.</li>
<li>Carlo Hermus 2012-11-25

   Any ETA on this?</li>
<li>Carlo Hermus 2012-12-16

   Any ETA on this?</li>
<li>Ben Scofield 2012-12-22

   Hi. Also wondering if there was an movement on this. Thanks.</li>
<li>Ben Scofield 2013-02-07

   Hi Vivekr, I was wondering if you could tell me if, included in the scope of this ticket, is the issue that the "longpress" event is fired on a quick tap. Thanks.</li>
<li>Carlo Hermus 2013-02-13

   Can you please give us an ETA? My android launch is depending on this and so is my paycheque</li>
<li>Ben Scofield 2013-02-13

   x2</li>
<li>Sunila 2013-02-14

   Since the TIUIView touch handlers get the event only once, I implemented this in the native MapView by handling touch. I have returned false for 'allowRegisterForTouch' so that TIView handlers don't get registered and we don't get duplicate event fired at the first time.</li>
<li>Ping Wang 2013-02-15

   The 'longpress' event is never supported on MapView on Android. This event is not documented either. Change the ticket to New Feature.</li>
<li>Michael Pauley 2013-02-15

    If I remember correctly this was a feature in 1.8</li>
<li>Carlo Hermus 2013-02-20

    Dear Ping,
    
    Please change it back to bug. We are waiting for 3 months until it was picked up and after a few weeks in review it is now a feature?? And this "feature" was available in 1.8 versions and also documented. Even so it is working in iPhone. This is a bug and not a new feature request. Besides there is also a pull request from november.</li>
<li>Arthur Evans 2013-02-20

    On testing, the Android behavior on 1.8 is identical to the current behavior, so this is not a regression. The 1.8 doc is wrong.
    
    So we have a documentation issue here as well as a parity issue.
    
    When we transitioned to a new doc format in 1.8, a number of spurious events were introduced by the new documentation inheritance mechanism. Between 1.8 and 2.0, we spent a lot of time testing controls and correcting the doc for events etc., that were not actually supported. In this case, it appears that we were overzealous and removed the doc for the "longpress" event, although it appears to be supported on iOS.
    
    I'll open a doc ticket to correct the event support info.
    </li>
<li>Ping Wang 2013-02-20

    PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/3871" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3871</a></li>
<li>Ben Scofield 2013-02-21

    Can someone help me out with this? I'm having trouble keeping up. Will this be added in 3.1 or will documentation be updated to reflect that it is not available for Android?
    
    Thanks.</li>
<li>Ping Wang 2013-02-21

    Hi Ben, this feature will be in 3.1 and the doc will show that it is added on Android since 3.1.</li>
<li>Ben Scofield 2013-02-21

    Thanks, Ping.</li>
<li>Carlo Hermus 2013-02-28

    Thanks Ping. I tested and the longpress works...
    
    I have only 2 questions or requests.
    
    The longpress is activated after 4 seconds pressing and then releasing. On the iPhone it is activated after 2 seconds and still pressing on the map.
    Is it possible to implement this as the iPhone so give it only 2 seconds (because it is hard not to move the map while pressing for 4 seconds). 
    And is it possible to implement this as the iPhone that the event is triggered when still pressing and not on the up event.
    
    TIA,
    Carlo</li>
<li>Arthur Evans 2013-03-06

    I agree the longpress ought to be fired while the user is still pressing. This allows the app to update the UI and cue the user that something has happened. Otherwise, the user doesn't know they've pressed long enough until they lift their finger.</li>
<li>Ben Scofield 2013-03-06

    Agreed. 
    
    Also, I've never encountered an app where a longpress takes 4 seconds. I'm not sure that a user could be convinced to press for that long.</li>
<li>Shyam Bhadauria 2013-03-12

    Closing it as it has been implemented.Test case added.</li>
<li>Arthur Evans 2013-03-13

    Carlo, if you have test code handy, could you open a bug for the parity differences between Android and iOS? </li>
<li>Ben Scofield 2013-03-28

    Hi. Can we get an update on what this additional activity is for? Is the release going to stay the same and has the timing been addressed or is it still 4 seconds?
    
    Thanks.</li>
<li>Allen Yeung 2013-03-28

    PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/4054" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4054</a>
    
    The long press event does not take 4 seconds to activate, it's most likely masked by the fact that you need to lift your finger to trigger the event.
    
    I've changed it so the long press event activates even when the user does not perform and action up event.</li>
<li>Eric Merriman  2013-03-30

    Ok, verified the feature has been implemented as follows:
    Longpress fires after approx 2 seconds while finger down, without "up" event. Verified on the following with the sample code above:
    
    Mac OS 10.8.3
    SDK: 3.1.0.v20130329175112
    Titanium Studio, build: 3.1.0.201303261815
    CLI 3.0.25-alpha
    node-appc 1.0.29-alpha
    
    Nexus 4 OS 4.2.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-11845.json">JSON Source</a></p>