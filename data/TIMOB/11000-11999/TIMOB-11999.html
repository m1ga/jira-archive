---
title: "[TIMOB-11999] Android: localStorage not persistent in WebView when loading local resources"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-08-15T23:34:28.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.4, Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.1.0, 2013 Sprint 04 Core, 2013 Sprint 04</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>module_webview, qe-manualtest, triage</td></tr>
<tr><th>Reporter</th><td>Brian Burgess</td></tr>
<tr><th>Assignee</th><td>Sunila</td></tr>
<tr><th>Created</th><td>2012-11-30T13:44:57.000+0000</td></tr>
<tr><th>Updated</th><td>2014-08-15T23:34:28.000+0000</td></tr>
</table>

<h3>Description</h3>

*Problem description*
LocalStorage in the webview component on Android is not persisting data across app sessions when loading the HTML and related files as local resources.   This is not consistent with iOS webview.

*Suggestion*
Seems like adding a 'WebSettings' property to the WebView to allow the settings of 'DomStorageEnabled' and 'DatabasePath' would do the trick simply enough.

*Test case*
See attachment.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-11999_33939/localStorageTest.zip">localStorageTest.zip</td></td><td>2012-12-05T03:05:55.000+0000</td><td>3661795</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Daniel Sefton 2012-11-30

   Could you put together a test case for this? Thanks.</li>
<li>Brian Burgess 2012-12-04

   was my test case not enough?</li>
<li>Daniel Sefton 2012-12-04

   </li>
<li>Brian Burgess 2012-12-04

   I included a test case project in a zip file as a response to your email generated by your first comment.  I figured that was easiest since it involved HTML5 in a webview on a titanium app.</li>
<li>Brian Burgess 2012-12-04

   Also, I forgot to add that I did research this in Q&A first .. as well as posting my own Q&A question at:
   <a href="http://developer.appcelerator.com/question/145236/android-webview-localstorage" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/145236/android-webview-localstorage</a></li>
<li>Daniel Sefton 2012-12-04

   Hmm odd, I can't see a zip attachment. I've re-opened the issue. Could you try uploading again? Cheers.</li>
<li>Brian Burgess 2012-12-05

   Did the localStorageTest.zip come across?</li>
<li>Daniel Sefton 2012-12-05

   Am I right in assuming that you replied to the email generated by JIRA? If so, then that wouldn't have come through, no. You need to upload it on the issue page itself through More Actions -> Attach Files.</li>
<li>Brian Burgess 2012-12-05

   ah I finally found the place to upload attachments.   DOHH!
   My apologies for being so dense.
   -B</li>
<li>Brian Burgess 2012-12-05

    I found it under Edit .. before I had only seen 'Create Sub-task' and 'Clone' in 'More Actions' :-S
    anyway .. is done .. finally.
    
    Thx
    
    -B</li>
<li>Daniel Sefton 2012-12-07

    Tested and confirmed on Android Samsung Galaxy S2 2.3.6 with TiSDK 2.1.4 GA and 3.0 RC. Does not persist the values when you kill the app. Works as expected in iOS 6 simulator.</li>
<li>Sunila 2013-02-08

    Set the properties DatabaseEnabled and DatabasePath on WebSettings to enable local storage. Tested in device and in emulator.</li>
<li>Allen Yeung 2013-02-13

    Test steps:
    
    1. Launch the app
    2. Type in 'pizza' for value, and 'food' for name
    3. Click on the 'setItem' button
    4. Close the app completely (on 4.X devices, you can do this by using the recent app button, and swipe to the left to remove it.  Otherwise, you will need to go to Settings > Applications > Manage Applications > localStorageTest > Force Stop)
    5. Relaunch the app and verify that the food item is in the items list.
    
    Expected Result:
    The food item should be on the item list after relaunch
    
    Actual Result:
    The food item is not on the list</li>
<li>Allen Yeung 2013-02-13

    PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/3854" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3854</a></li>
<li>Paras Mishra 2013-02-22

    Localstorage is persistent.
    
    Verified on :
    device : google nexus, android version :4.1
    SDK version:  3.1.0.v20130220200300
    CLI version : 3.0.24
    OS : MAC OSX 10.7.5
    XCode : 4.5.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-11999.json">JSON Source</a></p>