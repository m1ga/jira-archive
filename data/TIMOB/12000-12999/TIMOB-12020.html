---
title: "[TIMOB-12020] Android: audio file in application data directory does not play on certain devices"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2013-03-21T01:33:09.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 06 API, 2013 Sprint 06</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Davide Cassenti</td></tr>
<tr><th>Assignee</th><td>Ping Wang</td></tr>
<tr><th>Created</th><td>2012-12-11T12:30:57.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-21T19:17:38.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem description</h4>
When playing a sound downloaded in the application data directory, on certain devices (e.g. HTC Desire HD) the sound doesn't play. Everything works fine with other devices, or with the same device using the external directory.

<h4>Steps to reproduce</h4>
Use this code to reproduce the issue:

<code><pre>
// Create a window
var win = Ti.UI.createWindow({
    backgroundColor : 'white',
    layout: 'vertical'
});

function download() {
    var xhr = Ti.Network.createHTTPClient({
        onload: function() {
            var data = this.responseData;
            var file = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, 'test.mp3');
            file.write(data);

            alert("File downloaded");
        }
    });
    xhr.open('GET', '[MP3 URL HERE]');
    xhr.send();
}


function play() {
    // load from application directory
    var file = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, 'test.mp3');
    Ti.API.info(file.nativePath);
    var sound = Titanium.Media.createSound({url:file.nativePath});
    sound.play();
    sound.addEventListener('error', function(e) {
        dialog = Ti.UI.createAlertDialog({
            message : "Audio playback failed",
            buttonNames : ['OK']
        });
        dialog.show();
    });    
}

var btn1 = Ti.UI.createButton({
    title: "Download"
});
btn1.addEventListener('click', download);

var btn2 = Ti.UI.createButton({
    title: "Play"
});
btn2.addEventListener('click', play);

win.add(btn1);
win.add(btn2);

win.open();
</pre></code>

Running the code on HTC devices does not play the sound.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-12020_34238/log.txt">log.txt</td></td><td>2012-12-18T12:39:51.000+0000</td><td>3544</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Betty Tran 2012-12-18

   Tested with a HTC Desire HD and attaching a log file.</li>
<li>Ingo Muschenetz 2013-01-03

   Also, does this happen with all sound files or just ones of a certain type?</li>
<li>jithinpv 2013-03-15

   device specific
   
   jithinpv</li>
<li>Ping Wang 2013-03-21

   Based on the [doc](<a href="http://docs.appcelerator.com/titanium/3.0/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/3.0/#</a>!/api/Titanium.Filesystem-property-applicationDataDirectory), the sound file in the application data directory cannot be accessed by the android media player which is “another” application and requires world-readable permissions for the application’s local media files. “World-readable” means another application can see it. Therefore, the downloaded sound file should be stored in externalStorageDirectory if the user wants to play it. Mark the ticket as invalid.</li>
<li>Eduardo Silva 2014-11-03

   I have the same issue in the Galaxy Nexus device.
   
   [ERROR] :  MediaPlayer: error (1, -2147483648)</li>
<li>Lee Morris 2017-03-21

   Closing ticket as invalid.</li>
</ol>


<p><a href="/TIMOB/TIMOB-12020.json">JSON Source</a></p>