---
title: "[TIMOB-12079] Android: Data retrived from a socket is corrupt when writing to file"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2013-04-25T15:50:30.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.3, Release 2.1.4, Release 3.0.0, Release 3.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>exalture</td></tr>
<tr><th>Reporter</th><td>Daniel Sefton</td></tr>
<tr><th>Assignee</th><td>Sunila</td></tr>
<tr><th>Created</th><td>2012-12-12T22:36:15.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-24T17:53:13.000+0000</td></tr>
</table>

<h3>Description</h3>

*Problem description*
When writing an image obtained from a TCP socket to file, the file is becoming corrupt and the image isn't displayed. The binary data that we are receiving from the socket is proper in size but after writing to the file the size is greater than the actual image.

*Log*
<code><pre>
12-12 14:28:02.150: I/TiAPI(29051): Successfully total read. 83122
12-12 14:28:02.150: I/TiFileProxy(29051): (KrollRuntimeThread) [2,1061] Unable to write to an unrecognized file type
</pre></code>

*Test case*
Attached.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-12079_34125/zTCP.zip">zTCP.zip</td></td><td>2012-12-12T22:36:15.000+0000</td><td>755070</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Daniel Sefton 2012-12-12

   Tested and confirmed on Samsung Galaxy S2 2.3.6 and Android Emulator Ti SDK 3.0.0, 2.1.3 GA, and 2.1.4 GA.</li>
<li>jithinpv 2013-03-21

   Issue reproduces 
   
   Tested with
   
   Titanium Studio, build: 3.0.1.201212181159
   Titanium SDK version: 3.1.0 (03/11/13 15:43 0c88429)
   Titanium SDK version: 3.0.2 (02/07/13 16:46 a4def81)
   Device: Samsung galaxy s duos Android version: 4.0.4
   
   jithinpv</li>
<li>Sunila 2013-04-25

   Couple of issues with the sample.
   
   1. The error "Unable to write to an unrecognized file type" is because the tmpFile.write(e.buffer, true) where e.buffer is of Titanium.Buffer and File.Write doesn't support this Buffer type
   2. The file size is too large because the file is not binary. Use FileStream(Ti.Filesystem.openStream) instead of File to write the binary data</li>
<li>Lee Morris 2017-03-24

   Closing ticket as invalid with reference to the above comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-12079.json">JSON Source</a></p>