---
title: "[TIMOB-12094] CLI : iOS: When invalid code is used in an app.js the pre-compilation phase will fail on iOS device builds"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-12-20T16:21:48.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.0.1, Release 3.1.0, 2012 Sprint 26 JS, 2012 Sprint 26</td></tr>
<tr><th>Components</th><td>CLI</td></tr>
<tr><th>Labels</th><td>qe-ios100112, qe-port, qe-testadded, regression</td></tr>
<tr><th>Reporter</th><td>Michael Pettiford</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2012-12-14T00:15:01.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-31T22:03:58.000+0000</td></tr>
</table>

<h3>Description</h3>

*Note* The previous behavior is for device builds the app would successfully build, but crash when run on device.

Steps to reproduce:
1. Create a default Titanium mobile project in studio
2. Add the following snippet of code to app.js
<code><pre>
var win = Ti.UI.createWindow();
     
win.crash(arg){};
</pre></code>
3. Build the app for iOS device

Actual result:
The pre-compilation phase will fail (As per Chris Barber's investigation)
but XCode will continue on and install on device. Then an error message will be displayed saying app.js can't be found

Expected result:
A compilation error should be generated in the uglify step

<h3>Comments</h3>

<ol>
<li>Chris Barber 2012-12-14

   Master pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/3598" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3598</a>
   3.0.x pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/3599" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3599</a></li>
<li>Bert Grantges 2012-12-19

   ALso noticing this with Alloy compilation. 
   
   When Alloy pre-compile fails, the build execution is not halted.</li>
<li>Ingo Muschenetz 2012-12-20

   For those experiencing the issue, please download the following build of the SDK:
   
   * OSX: <a href="http://nightlies.s3.amazonaws.com/mobile/mobilesdk-3.0.1.v20121218130634-osx.zip" rel="nofollow" target="_blank">http://nightlies.s3.amazonaws.com/mobile/mobilesdk-3.0.1.v20121218130634-osx.zip</a>
   * Linux: <a href="http://nightlies.s3.amazonaws.com/mobile/mobilesdk-3.0.1.v20121218130634-linux.zip" rel="nofollow" target="_blank">http://nightlies.s3.amazonaws.com/mobile/mobilesdk-3.0.1.v20121218130634-linux.zip</a>
   * Windows: <a href="http://nightlies.s3.amazonaws.com/mobile/mobilesdk-3.0.1.v20121218130634-win32.zip" rel="nofollow" target="_blank">http://nightlies.s3.amazonaws.com/mobile/mobilesdk-3.0.1.v20121218130634-win32.zip</a>
   
   You may install these manually into your SDK folder, or using Studio's *Help > Install Titanium SDK...* menu option</li>
<li>Olga Romero 2013-01-22

   OSX 10.8.2
   Ti Studio build: 3.0.1.201212181159
   Ti Mobile SDK build: 3.0.2.v20130121140213
   Ti Mobile SDK build: 3.1.0.v20130114171802
   CLI build version 3.0.23</li>
<li>Olga Romero 2013-01-22

   Closing as fixed.
   A compilation Error:
   [TRACE] :  Command /bin/sh failed with exit code 1
   [ERROR] :  ** BUILD FAILED **
   [ERROR] :  The following build commands failed:
   [ERROR] :  	PhaseScriptExecution Pre-Compile build/test.build/Debug-iphoneos/test-universal.build/Script-DABB369F12E8CB280026A6EA.sh
   [ERROR] :  (1 failure)</li>
<li>Priya Agarwal 2013-12-20

   Tested Environment:
   
   Appcelerator Studio: 3.2.0.201312191455
   SDK:3.2.0.v20131218153242
   alloy: 1.3.0-cr2
   acs: 1.0.11
   npm: 1.3.2
   titanium: 3.2.0-cr3
   titanium-code-processor: 1.1.0-cr2
   Xcode:5.0.2
   OS: Mac OSX 10.9
   
   When the above code snippet is added the not getting any precompilation error.
   But the Simulator gets launched and after that error appears CLI as 
   <code><pre>
   [ERROR] Script Error {
   [ERROR]     line = 3;
   [ERROR]     message = "Parse error";
   [ERROR]     name = SyntaxError;
   [ERROR]     sourceId = 292371200;
   [ERROR]     sourceURL = "file:///Users/p.agarwal/Library/Application%20Support/iPhone%20Simulator/7.0.3/Applications/BBE0F93C-CB86-48F9-92FD-59B1B7DFBBEA/defaultProject.app/app.js";
   [ERROR] } 
   </pre></code></li>
<li>Chris Barber 2013-12-20

   Syntax checking ONLY happens when performing device and distribution builds.
   
   If you are building for simulator/emulator, you won't see any JS errors until the app is launched. I've filed TIMOB-16058 to add support for syntax error checking.</li>
<li>Lee Morris 2017-03-31

   Closing ticket as fixed, if there are any problems, please file a new ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-12094.json">JSON Source</a></p>