---
title: "[TIMOB-12095] Android: EvalJS does not work before a webview is loaded"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2012-12-14T00:54:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Allen Yeung</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2012-12-14T00:41:52.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-02T01:37:49.000+0000</td></tr>
</table>

<h3>Description</h3>

Example:

<code><pre>
var win = Ti.UI.createWindow({
	
});
var webview = Ti.UI.createWebView({
	url: 'test.html'
});

webview.evalJS('var phrases = {}');
webview.evalJS('phrases.breakfast = "' + L('breakfast') + '"');
webview.evalJS('phrases.nutritional_values = "' + L('nutritional_values') + '"');

win.add(webview);

win.open();
</pre></code>

test.html file:

<code><pre>
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "<a href="http://www.w3.org/TR/html4/strict.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/html4/strict.dtd</a>"&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;title&gt;local webview&lt;/title&gt;
&lt;/head&gt;
&lt;body id="mybody" style="height:500px;background-color:#999;background-image:url(../images/bg.png)"&gt;
	This is a test
	&lt;script&gt;
		Titanium.API.info("--------------------------------");
		Titanium.API.info(phrases.breakfast);
	&lt;/script&gt;

	
&lt;/body&gt;
&lt;/html&gt;
</pre></code>

Expected result:
You should see the value 'breakfast' printed out as it does in iOS

Actual result:
The value is undefined and nothing prints out.



<h3>Comments</h3>

<ol>
<li>Allen Yeung 2012-12-14

   This can't be fixed in android since we rely on the webview to run evalJS.  We use loadURL('javascript:') to run the javascript code.  If we do this before we actually load the webpage, it won't work since the previous javascript context will be wiped out once the actual webpage loads.</li>
<li>Eric Merriman  2013-01-10

   Closing based on Allen's comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-12095.json">JSON Source</a></p>