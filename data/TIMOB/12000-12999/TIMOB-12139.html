---
title: "[TIMOB-12139] Android: Textfield change event behaves differently in 2.1.4 and 3.0.0 SDK"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-04-09T22:05:02.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 08 API, 2013 Sprint 08, Release 3.1.1, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>SupportTeam, exalture, qe-testadded, regression</td></tr>
<tr><th>Reporter</th><td>Varun Joshi</td></tr>
<tr><th>Assignee</th><td>Ping Wang</td></tr>
<tr><th>Created</th><td>2012-12-20T19:48:06.000+0000</td></tr>
<tr><th>Updated</th><td>2013-10-04T10:44:04.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue</h4>

The textfield change event listener in 2.1.4 is fired differently from 3.0.0.GA SDK.

<h4>Steps to Reproduce</h4>

Run the sample below:

<code><pre>

var win = Ti.UI.createWindow({
    backgroundColor : 'white'
});

win.open();

var view = Ti.UI.createView({
    backgroundColor : 'red',
    top : 20,
    left : 20,
    height : 400,
    width : 300,
    layout: 'vertical'
});

win.add(view);

var textfield = Ti.UI.createTextField({
    left: 20,
    right: 20,
    height: 40,
    //maxLength: 6,
    borderColor: 'black',
    borderWidth: 2,
    value: 'Hello'
});
view.add(textfield);

var countChangeEvents = 0;
textfield.addEventListener('change', function(_evt){
    countChangeEvents++;
    Ti.API.info('change event fired: ' + countChangeEvents);
    var value = _evt.source.value; 
    if (value == 'HelloA'){
        Ti.API.info('replace');
        textfield.value = value.replace('Hello', '*****');
    }
});

</pre></code>

2. Enter the letter "A" at the end of the text in the textfield.

3. Notice the characters before A turn to "*".

4. If you look at the logs the API info statements show 2 change events fired for the above steps in 3.0.0.GA while in 2.1.4.GA, 3 events were fired.


Is this an intentional behavior?

<h3>Comments</h3>

<ol>
<li>Olga Romero 2013-03-13

   Tested with:
   Titanium Studio, build: 3.0.3.201302201202
   Titanium SDK, build: 3.1.0.v20130312161655
   Device:
   Nexus7 Android version: 4.2
   
   Test steps:
   1. Ran App and added "A" in the end of the text
   console output is: 
   I/TiAPI(2913):  change event fired: 1
    I/TiAPI(2913):  replace
    W/IInputConnectionWrapper(2913): endBatchEdit on inactive InputConnection
   2. Each click on the keyboard's key fires event
    I/TiAPI(2913):  change event fired: 2
    I/TiAPI(2913):  change event fired: 3
    I/TiAPI(2913):  change event fired: 4
    I/TiAPI(2913):  change event fired: 5
   
   Identical result for 3.0.2.GA</li>
<li>Ping Wang 2013-04-04

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/4072" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4072</a>
   For FR:
   1. Run the above test case.
   2. Add "A" at the end of the text. Check the log, it should fire three "change" events (before the fix, it only fired one "change" event).
   3. Uncomment Line 22 in the above test case {quote}maxLength: 6{quote} and then run the test case again.
   4. Input more characters in the text field. It should not crash (before the fix, it crashed on 4.x devices if the total characters > 6). Check the log, the "change" event should be fired when the shown text is changed.
   5. Please also follow the test instruction in TIMOB-5810.</li>
<li>Ping Wang 2013-04-22

   3_1_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/4193" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4193</a></li>
<li>Anshu Mittal 2013-05-07

   Tested with: 
   SDK:3.1.1.v20130503173050
   Appcelerator Studio: 3.1.1.201305031846
   OS: OSX 10.7.5
   Device: Google nexus7(v 4.1)
   
   Logs change event successfully every time a character is added or deleted from textfield.</li>
</ol>


<p><a href="/TIMOB/TIMOB-12139.json">JSON Source</a></p>