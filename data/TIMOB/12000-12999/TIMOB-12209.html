---
title: "[TIMOB-12209] Android: Accessing properties from contacts crashes the app"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-01-15T14:20:03.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.1.0, 2013 Sprint 02 API, 2013 Sprint 02</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>SupportTeam, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Nikhil Sharma</td></tr>
<tr><th>Assignee</th><td>Ping Wang</td></tr>
<tr><th>Created</th><td>2013-01-04T16:51:34.000+0000</td></tr>
<tr><th>Updated</th><td>2013-10-04T07:43:50.000+0000</td></tr>
</table>

<h3>Description</h3>

The application crashes when accessing the properties from contacts. The test case is provided below and crash logs are attached.
<h4>Steps to Repo</h4>
1. Run the below code in the app.js of your project.
2. The application crashes while trying to access the device contacts.

<code><pre>
var win1 = Titanium.UI.createWindow({
		title : 'Tab 1',
		backgroundColor : '#fff'
	});

var people = Ti.Contacts.getAllPeople();
Ti.API.info('Total contacts: ' + people.length);
Ti.API.info('All contacts: ' + JSON.stringify(people));

win1.open(); 
</pre></code>

<h4>Additional details</h4>
tc2 attachment reproduces the issue as well. Target environment has been already in summary.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-12209_34559/tc1_log">tc1_log</td></td><td>2013-01-04T16:51:34.000+0000</td><td>38580</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-12209_34560/tc2">tc2</td></td><td>2013-01-04T17:00:31.000+0000</td><td>44891</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>John V Pataki 2013-01-04

   Per the details in tc2, the property in question here is most certainly the "image" property. If you comment out the last 3 lines of the code in the tc2 content so it never attempts person["image"], then the crash will go away. This is not as apparent if you only review the code block listed in the "Steps to Repo" portion of this ticket.
   
   </li>
<li>Josh Roesslein 2013-01-10

   Accessing the image property will trigger memory allocations. If the image is large it could lead out of memory crashes.
   If you wish to serialize the contact you may need to filter only the properties you care about.
   
   Example:
   
   <code><pre>
     JSON.stringify(contacts, ['phone', 'address', ...]);  // array specifies properties to serialize
   </pre></code>
   </li>
<li>John V Pataki 2013-01-11

   1) Stringifying the entire contacts array is not the only way this problem shows up - please review the code block in tc2 where the image property is attempting to be accessed in a loop and the problem will show up eventually.
   
   2) Being able to access the image properties is a requirement so we can't solve the issue by avoiding the image property as a long term solution
   </li>
<li>Ping Wang 2013-01-14

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/3707" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3707</a></li>
<li>Shyam Bhadauria 2013-02-25

   Not crashing any more.
   Environment used for verification -
   Titanium SDK: 3.1.0.v20130223030327
   Titanium Â Studio:3.0.2.201302141201
   Device: Samsung GALAXY Note Android 2.3.6</li>
</ol>


<p><a href="/TIMOB/TIMOB-12209.json">JSON Source</a></p>