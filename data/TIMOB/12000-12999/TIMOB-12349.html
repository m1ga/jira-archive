---
title: "[TIMOB-12349] CLI: Allow Android builds to disable minification"
---
<table>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-01-23T19:02:30.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.0.2, Release 3.1.0, 2013 Sprint 02 JS, 2013 Sprint 02</td></tr>
<tr><th>Components</th><td>CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ingo Muschenetz</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2013-01-19T20:17:47.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-24T21:04:00.000+0000</td></tr>
</table>

<h3>Description</h3>

Using the new CLI, Android builds need to respect the "skip-js-minify" flag.

It has been suggested we do this via an environment variable the Node.js code sets before calling the relevant Python scripts.

In order to disable minification in Android, we need to adjust the following:

Android: support/android/compiler.py, line 211

<code><pre>
def compile_into_bytecode(self, paths):
for fullpath in paths:
<h4>skip any JS found inside HTML <script></h4>
if fullpath in self.html_scripts: continue
-
self.compile_javascript(fullpath)
+
if false: self.compile_javascript(fullpath) 
self.compiled_files.append(fullpath)

<h4>Pack JavaScript sources into an asset crypt.</h4>
jspacker.pack(self.project_dir, self.compiled_files, self.appid, self.gen_dir)
</pre></code>

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2013-01-19

   Note, there is a trivial related item to relocate the "skip-js-minify" flag which is included in this ticket.</li>
<li>Chris Barber 2013-01-23

   Master pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/3765" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3765</a>
   3.0.x pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/3766" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3766</a></li>
<li>Lee Morris 2017-03-24

   Closing ticket as fixed with reference to previous comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-12349.json">JSON Source</a></p>