---
title: "[TIMOB-12625] iOS: TableView.updateSection argument order is wrong"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-05-01T17:47:42.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>2014 Sprint 09, 2014 Sprint 09 SDK, Release 3.3.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>module_tableview, parity, qe-closed-3.3.0, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Arthur Evans</td></tr>
<tr><th>Assignee</th><td>Pedro Enrique</td></tr>
<tr><th>Created</th><td>2013-02-07T22:29:44.000+0000</td></tr>
<tr><th>Updated</th><td>2016-02-25T21:57:32.000+0000</td></tr>
</table>

<h3>Description</h3>

The TableView updateSection method on iOS has the arguments in the wrong order. Unlike the other platforms (and updateRow), it expects the first argument to be a section object and the second argument to be an index.

The following code runs on Android and Mobile Web, but fails on iOS.

<code><pre>
var win = Ti.UI.createWindow({
	backgroundColor : "#eee"
});
win.open();

var section = Ti.UI.createTableViewSection({
	headerView : (function() {
		var view = Ti.UI.createView();
		var label = Ti.UI.createLabel({
			text : "Some Section"
		});
		view.add(label);

		return view;
	})()
});

var row = Ti.UI.createTableViewRow({
	title : "Row"
});

section.add(row);
var section2 = Ti.UI.createTableViewSection({
	headerView : (function() {
		var view = Ti.UI.createView();
		var label = Ti.UI.createLabel({
			text : "Different Section"
		});
		view.add(label);

		return view;
	})()
});

var row2 = Ti.UI.createTableViewRow({
	title : "Row 2"
});

section2.add(row2);
var table = Ti.UI.createTableView({
	data: [ section ]
});

table.updateSection(0, section2);

table.addEventListener("click", function(event) {
	alert("TableView Clicked");
	Ti.API.debug(event.row);
});

win.add(table);
</pre></code>


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-12625_36614/iOS Simulator Screen shot Mar 25, 2013 3.00.39 PM.png">iOS Simulator Screen shot Mar 25, 2013 3.00.39 PM.png</td></td><td>2013-03-25T09:31:45.000+0000</td><td>49842</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Arthur Evans 2013-02-07

   Methinks:
   
   <code><pre>
   --- a/iphone/Classes/TiUITableViewProxy.m
   +++ b/iphone/Classes/TiUITableViewProxy.m
   @@ -1084,9 +1084,9 @@ DEFINE_DEF_PROP(scrollsToTop,[NSNumber numberWithBool:YES]);
           }
           
           int sectionIndex;
   -       ENSURE_INT_AT_INDEX(sectionIndex, args, 1);
   +       ENSURE_INT_AT_INDEX(sectionIndex, args, 0);
           
   -       id sectionObject = [args objectAtIndex:0];
   +       id sectionObject = [args objectAtIndex:1];
           TiUITableViewSectionProxy * section = [self tableSectionFromArg:sectionObject];
           
           if (section == nil) {
   </pre></code>
   </li>
<li>Pedro Enrique 2014-04-25

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/5646" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5646</a></li>
<li>Vishal Duggal 2014-05-01

   PR Merged</li>
<li>Paras Mishra 2014-05-05

   Clicking the tableview, section gets updated
   Verified the fix on:
   Device : iPhone 5c , iOS version : 7.1
   SDK: 3.3.0.v20140502133323
   CLI version : 3.3.0-dev
   OS : MAC OSX 10.9.2
   Alloy:  1.4.0-dev
   ACS: 1.0.14
   npm:1.3.2
   Appcelerator Studio, build: 3.3.0.201405011408
   titanium-code-processor: 1.1.1
   XCode : 5.1.1
   
   Testcase used:
   <code><pre>
   var win = Ti.UI.createWindow({
       backgroundColor : "#eee"
   });
   win.open();
    
   var section = Ti.UI.createTableViewSection({
       headerView : (function() {
           var view = Ti.UI.createView();
           var label = Ti.UI.createLabel({
               text : "Some Section"
           });
           view.add(label);
    
           return view;
       })()
   });
    
   var row = Ti.UI.createTableViewRow({
       title : "Row"
   });
    
   section.add(row);
   var section2 = Ti.UI.createTableViewSection({
       headerView : (function() {
           var view = Ti.UI.createView();
           var label = Ti.UI.createLabel({
               text : "Different Section"
           });
           view.add(label);
    
           return view;
       })()
   });
    
   var row2 = Ti.UI.createTableViewRow({
       title : "Row 2"
   });
    
   section2.add(row2);
   var table = Ti.UI.createTableView({
       data: [ section ]
   });
    
   
    
   table.addEventListener("click", function(event) {
       alert("TableView Clicked");
       Ti.API.debug(event.row);
       table.updateSection(0, section2);
   });
    
   win.add(table);
   </pre></code></li>
</ol>


<p><a href="/TIMOB/TIMOB-12625.json">JSON Source</a></p>