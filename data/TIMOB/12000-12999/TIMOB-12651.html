---
title: "[TIMOB-12651] Android: Standardize error reporting in callbacks and events"
---
<table>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-03-29T21:38:28.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.1.0, 2013 Sprint 07 API, 2013 Sprint 07</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>api</td></tr>
<tr><th>Reporter</th><td>Ingo Muschenetz</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2013-02-08T22:32:22.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-22T00:16:56.000+0000</td></tr>
</table>

<h3>Description</h3>



<h3>Comments</h3>

<ol>
<li>Blain Hamon 2013-02-13

   Progress tracker: <a href="https://github.com/BlainHamon/titanium_mobile/compare/timob-12651" rel="nofollow" target="_blank">https://github.com/BlainHamon/titanium_mobile/compare/timob-12651</a></li>
<li>Allen Yeung 2013-02-28

   </li>
<li>Allen Yeung 2013-03-04

   Another test case to verify the new events are working correctly:
   
   1. Run the following code and click 'launch camera'
   <code><pre>
   // this sets the background color of the master UIView (when there are no windows/tab groups on it)
   Titanium.UI.setBackgroundColor('#000');
    
   // create base UI tab and root window
   //
   var win1 = Titanium.UI.createWindow({  
       title:'Tab 1',
       backgroundColor:'#fff'
   });
   
   var button = Ti.UI.createButton({
       title:'launch camera',
       width:200,
       height:100
   });
   button.addEventListener('click', function(){
   	Titanium.Media.showCamera({
   	
   		success:function(event)
   		{
   		},
   		cancel:function(e)
   		{
   			Ti.API.info('---------- keys: ' + Object.keys(e));
   			Ti.API.info('---------- code: ' + e.code);
   			Ti.API.info('---------- success: ' + e.success);
   		},
   		error:function(error)
   		{
   		},
   		saveToPhotoGallery:true,
   		allowEditing:true,
   		mediaTypes:[Ti.Media.MEDIA_TYPE_VIDEO,Ti.Media.MEDIA_TYPE_PHOTO]
   	});
   });
   win1.add(button);
    
   win1.open();
   </pre></code>
   2. After the camera launches, push cancel
   3. Look at logcat for results
   
   
   Expected Result:
   <code><pre>
   I/TiAPI   ( 9991):  ---------- keys: code,success
   I/TiAPI   ( 9991):  ---------- code: 0
   I/TiAPI   ( 9991):  ---------- success: true
   </pre></code>
   
   Actual results:
   Runtime error since e is undefined before this change.</li>
<li>Allen Yeung 2013-03-04

   Another test case as a sanity check to make sure events aren't broken after this change:
   
   1. Run the following code and click on 'play sound'
   <code><pre>
   var win1 = Titanium.UI.createWindow({  
       title:'Tab 1',
       backgroundColor:'#fff'
   });
   
   var button = Ti.UI.createButton({
       title:'play sound',
       width:200,
       height:100
   });
   button.addEventListener('click', function(){
   	var player = Ti.Media.createSound({url:"cricket.wav"});
   	player.addEventListener('complete', function(e){
   		Ti.API.info('------------------------' + e.type);
   		Ti.API.info('------------------------' + e.source);
   		Ti.API.info('------------------------' + e.bubbles);
   		Ti.API.info('------------------------' + e.cancelBubble);
   	})
   	player.play();
   });
   win1.add(button);
    
   win1.open();
   </pre></code>
   2. After the sound completes, look at logcat and you should see the following:
   
   <code><pre>
   I/TiAPI   (13949):  ------------------------complete
   I/TiAPI   (13949):  ------------------------[object Sound]
   I/TiAPI   (13949):  ------------------------false
   I/TiAPI   (13949):  ------------------------false
   </pre></code></li>
<li>Blain Hamon 2013-03-23

   After looking through the docs, there are some places where Android doesn't generate error issues even though it should have.</li>
<li>Allen Yeung 2013-03-23

   Looks like the 'heading' event from geolocation module, and 'completed' event from sound proxy doesn't have have the error codes.</li>
<li>Blain Hamon 2013-03-25

   Furthermore, Ti.Media.VideoPlayerProxy has the following issues:
   * Error event is missing code, success, and error. (MW, MW and Android documentation)
   * Complete event is missing code, success, and error. (Android, iOS, MW, and all documentation)
   </li>
<li>Blain Hamon 2013-03-28

   <a href="https://github.com/appcelerator/titanium_mobile/pull/4034" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4034</a></li>
<li>Allen Yeung 2013-03-29

   test case with video player to verify that it has the correct event properties after the change:
   
   <code><pre>
   var win1 = Titanium.UI.createWindow({  
       title:'Tab 1',
       backgroundColor:'#fff'
   });
    
    var videoPlayer = Titanium.Media.createVideoPlayer({
       top : 2,
       autoplay : true,
       backgroundColor : 'blue',
       height : 300,
       width : 300,
       mediaControlStyle : Titanium.Media.VIDEO_CONTROL_DEFAULT,
       scalingMode : Titanium.Media.VIDEO_SCALING_ASPECT_FIT
   });
   
   videoPlayer.url = 'movie.mp4';
   
       videoPlayer.addEventListener('complete', function(e){
           Ti.API.info('------------------------' + e.type);
           Ti.API.info('------------------------' + e.source);
           Ti.API.info('------------------------' + e.bubbles);
           Ti.API.info('------------------------' + e.cancelBubble);
           Ti.API.info('------------------------' + Object.keys(e));
       })
   
   win1.add(videoPlayer);
     
   win1.open();
   </pre></code>
   
   Expected Result:
   <code><pre>
   I/TiAPI   (13216):  ------------------------complete
   I/TiAPI   (13216):  ------------------------[object VideoPlayer]
   I/TiAPI   (13216):  ------------------------true
   I/TiAPI   (13216):  ------------------------false
   I/TiAPI   (13216):  ------------------------type,source,reason,bubbles,success,code,error,cancelBubble
   </pre></code></li>
<li>Vishal Duggal 2013-03-29

    Pull <a href="https://github.com/appcelerator/titanium_mobile/pull/4034" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4034</a> merged</li>
<li>Allen Yeung 2013-04-04

    Follow-up PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/4069" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4069</a></li>
<li>Lee Morris 2017-03-22

    Closing ticket as fixed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-12651.json">JSON Source</a></p>