---
title: "[TIMOB-13099] Android: In a module, using UI component method on callback from a broadcast receiver event causes crash"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2013-05-13T20:18:43.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.2</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 10 Core, 2013 Sprint 10</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>broadcastReceiver, exalture, module, titanium</td></tr>
<tr><th>Reporter</th><td>Ashish Nigam</td></tr>
<tr><th>Assignee</th><td>jithinpv</td></tr>
<tr><th>Created</th><td>2013-03-18T14:22:26.000+0000</td></tr>
<tr><th>Updated</th><td>2013-11-07T17:57:18.000+0000</td></tr>
</table>

<h3>Description</h3>

App crashes when we create any UI component inside the eventFired from this particular module and trying to access UI component method after pressing back button and launching again.

sample app and module code is attached.

Steps:

1: Launch the app in android any version (preferred is 4.2 or 2.2).
2: click on Add device button.
3: Click on red view add and an alert will be shown, click ok.
4: press the back button, and app will go in background.
5: launch the app again.
6: Press the Add Device button again.
7: App crashes.

Another thing to try.

1: Go to sample app's app.js at line number 71-72 and comment the view1 addEventListener.
2: Launch the app again and now repeat the above process.
3: app won't crash.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-13099_36384/addEventListener1.zip">addEventListener1.zip</td></td><td>2013-03-18T14:22:26.000+0000</td><td>829983</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-13099_36385/TestModule.zip">TestModule.zip</td></td><td>2013-03-18T14:22:26.000+0000</td><td>1656149</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>jithinpv 2013-04-22

   
   Cannot reproduce 
   
   Tested with
   Titanium Studio, build: 3.0.1.201212181159
   Titanium SDK version: 3.1.0 
   Titanium SDK version: 3.0.2 
   Android Emulator: Android SDK version: 2.2 </li>
<li>Shyam Bhadauria 2013-05-08

   Cannot reproduce the issue each time on android 2.2.2.Once it got reproduced in fourth attempt for 3.0.2.GA build only but never after that.
   Environment used for verification-
   SDK - 3.0.2.GA,3.1.0.GA,3.1.1.v20130503173050
   Appcelerator studio - 3.1.1.201305031846
   Device : LG-P970 Android 2.2.2
   
   But it was reproducible every time on android 4.1 with below environment
   SDK - 3.0.2.GA,3.1.0.GA,3.1.1.v20130503173050
   Appcelerator studio - 3.1.1.201305031846
   Device : nexus 7 Android 4.1 
   
   Same behaviour as above is shown on titanium studio build : 3.1.0.201304171607.Working fine for android 2.2.2 but crashing on android 4.1.</li>
<li>Allen Yeung 2013-05-13

   This bug is not valid.  When using broadcast receivers the runtime needs to be kept alive from the module end.  You would need to call something like 		KrollRuntime.incrementServiceReceiverRefCount(); when registering, and then the corresponding when you want to ungregister the broadcast receiver.
   
   Also, there isn't really a need to create a module for broadcast receivers.  You can accomplish the same thing with a titanium API: <a href="http://docs.appcelerator.com/titanium/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/latest/#</a>!/api/Titanium.Android.BroadcastReceiver</li>
<li>Shyam Bhadauria 2013-05-14

   Closing it as per the comment by Allen, its being invalid.</li>
</ol>


<p><a href="/TIMOB/TIMOB-13099.json">JSON Source</a></p>