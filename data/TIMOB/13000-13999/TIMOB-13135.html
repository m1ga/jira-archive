---
title: "[TIMOB-13135] Android: Enable/disable tab navigation for Action Bar"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-07-03T22:21:51.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 15 API, 2013 Sprint 15, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>3.0.2GA, actionbar, android, exalture, module_actionbar, qe-testadded, tabGroup, triage</td></tr>
<tr><th>Reporter</th><td>Carter Lathrop</td></tr>
<tr><th>Assignee</th><td>Hieu Pham</td></tr>
<tr><th>Created</th><td>2013-03-14T22:23:08.000+0000</td></tr>
<tr><th>Updated</th><td>2014-09-09T15:08:13.000+0000</td></tr>
</table>

<h3>Description</h3>

We need the capability in Action Bar to turn tab navigation on/off [<a href="http://developer.android.com/reference/android/app/ActionBar.html#setNavigationMode(int)" rel="nofollow" target="_blank">http://developer.android.com/reference/android/app/ActionBar.html#setNavigationMode(int)</a>]
This is important since if we open a lightweight window on top of the tab group which has an action bar, it's wrong to keep the tabs in view. This would make Android action bar navigation similar to iOS, which hides the tabs when opening a new window form the tab group. The current workaround is to hide() the entire action bar, and paint a "fake" action bar (title and icon only) on the lightweight window. Note it's not always possible to open a new activity with a heavyweight window - e.g. I have an ongoing process running in inside a webview which must be capable of firing/receiving events to other windows, thus the whole app must be one activity.
Please enable the setNavigationMode method for the action bar API.
Thanks
Edited to add: it's not just a visual issue - if the action bar is disabled for a lightweight window (in order to hide the tab group) then the lightweight window will lose menu functionality. Titanium needs to embrace more of the Action Bar API ASAP in order to keep up with Android development.

<h3>Comments</h3>

<ol>
<li>Carter Lathrop 2013-03-20

   Hi Mark,
   Thanks for the feature request. Moving to Ti-Mobile, keep a watch on this to see the progression. Also it may help to add example code to show the limitations of the current action bar support.
   Regards,
   Carter</li>
<li>Mark Mokryn 2013-03-20

   I'm not sure if code can help, but here's a comparison between iPhone and Android:
   iPhone: assume you have a tab group with three tabs A, B, C, open a new window from C and you will still see the three tabs, and you can navigate between them. Anytime you are on "C" you will see the new window until you click "Back". Very intuitive....
   Android: If you open a lightweight window over the tab group the 3 tabs are still showing, but you cannot navigate between them until you go "back" - this is clearly illogical behavior as the tabs appear "frozen". So the only current options in Ti are to do actionBar.hide() which is visually bad since you also lose the title bar portion of the action bar which you probably want to keep on the new window. The second option is to open a heavyweight window which starts a new activity with a new action bar - and this may not be good for the logic of the application (e.g. you must have something ongoing in the tab group, and can't allow it to be paused). So in many cases the best solution is to open a lightweight window and just change the navigation mode - this is what's done in many Android apps. You can view this as "parity" with iOS - iOS gives you tab group functionality after you open a child window, and changing the navigation mode in Android will give "similar" behavior, with full flexibility to the designer. It's a key feature!</li>
<li>Carter Lathrop 2013-03-20

   Thank you for the clarification, you will be notified when engineering reviews this new feature request. You might want to add your past comment to the new feature description to solidify your point.</li>
<li>Mark Mokryn 2013-03-20

   Here's an example showing how tabs can be toggled in Android:
   [tab examples](<a href="http://www.coderzheaven.com/2012/10/08/dynamically-adding-removing-toggling-removing-actionbar-tabs-android-part-2/)" rel="nofollow" target="_blank">http://www.coderzheaven.com/2012/10/08/dynamically-adding-removing-toggling-removing-actionbar-tabs-android-part-2/)</a>
   Eventually probably the entire Action Bar API should be covered by Ti, but IMHO setNavigationMode is the most urgent.</li>
<li>Mark Mokryn 2013-03-29

   This was urgent for me so I submitted a [pull request](<a href="https://github.com/appcelerator/titanium_mobile/pull/4058)." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4058).</a>
   Hopefully you can approve it in time for 3.1.0
   Here is the code to test, tested on iPhone, Android 2.x and ICS. Note that drop down list navigation is not yet supported by Titanium, but there is a need to hide/show the tab bar, and this does the job. The only thing I did not do is add NAVIGATION_MODE_STANDARD, NAVIGATION_MODE_LIST, NAVIGATION_MODE_TABS, to the Ti constants since I wasn't sure on your desired conventions - thus I'm just using 0 and 2 per the Android specs.
   
   Index.xml:
   <code><pre> 
   &lt;Alloy&gt;
   	&lt;TabGroup id="myTabs" backgroundColor="white" &gt;
   		&lt;Tab id="tab1" title="Tab 1" icon="KS_nav_views.png"&gt;
   			&lt;Window id="win1" title="Tab 1"&gt;
   				&lt;Label top=10 color="black"&gt;Check with iPhone, Android 2.x and 3+&lt;/Label&gt;
   				&lt;Button id="list" top=70 title="open childWin (same activity)" onClick="openChild"/&gt;
   				&lt;Button id="getNavMode" top=170 title="getNavigationMode()" onClick="getNavMode"/&gt;
   			&lt;/Window&gt;
   		&lt;/Tab&gt;
   		&lt;Tab id="tab2" title="Tab 2" icon="KS_nav_views.png"&gt;
   			&lt;Window id="win2" title="Tab 2"&gt;
   				&lt;Label color="#999"&gt;All the fun is in the other window&lt;/Label&gt;
   			&lt;/Window&gt;
   		&lt;/Tab&gt;
   	&lt;/TabGroup&gt;
   &lt;/Alloy&gt;
   </pre></code> 
   
   childWin.xml:
   <code><pre> 
   &lt;Alloy&gt;
   	&lt;Window id="childWin" backgroundColor="white"&gt;
   		&lt;Label top=10 color="black"&gt;In iOS the tabs work&lt;/Label&gt;
   		&lt;Label top=30 color="black"&gt;in Android 2.x they are hidden&lt;/Label&gt;
   		&lt;Label top=50 color="black"&gt;in Android 3+, I hid them&lt;/Label&gt;
   		&lt;Button id="set0" top=100 title="Hide the Tabs" onClick="setStandard"/&gt;
   		&lt;Button id="set0" top=150 title="Show the Tabs" onClick="setTabs"/&gt;
   		&lt;Button id="getNavMode" top=200 title="getNavigationMode()" onClick="getNavMode"/&gt;
   	&lt;/Window&gt;
   &lt;/Alloy&gt;
   </pre></code> 
   
   index.js:
   <code><pre>
   var actionBar = null;
   
   function openChild() {
   	var win = Alloy.createController("childWin");
   	win.init(actionBar);
   	
   	if (Ti.Platform.name === 'android') {
   		if (actionBar) {
   			//made sure both property and setter work :)
   			//actionBar.setNavigationMode(0);
   			actionBar.navigationMode = 0;
   		}
   		win.getView().open();
   	} else {
   		$.tab1.open(win.getView());	
   	}
   }
   
   function getNavMode() {
   	if (actionBar) {
   		alert('The navigation mode is: ' + actionBar.getNavigationMode());
   	}
   }
   $.myTabs.addEventListener('open', function() {
   	if (Ti.Platform.name === 'android') {
   		var tabGroupAct = $.myTabs.getActivity();
   		actionBar = tabGroupAct.actionBar;
   		if (actionBar){
   			actionBar.title = "Rock n' Roll";
   		}
   	}
   });
   
   $.myTabs.open();
   </pre></code>
   
   childWin.js
   <code><pre>
   var actionBar = null;
   
   exports.init = function(bar) {
   	actionBar = bar;
   };
   		
   function setStandard() {
   	if (actionBar) {
   		actionBar.setNavigationMode(0);
   	}
   }
   
   function setTabs() {
   	if (actionBar) {
   		actionBar.setNavigationMode(2);
   	}	
   }
   
   function getNavMode() {
   	if (actionBar) {
   		// Made sure both property and getter work
   		//alert('The navigation mode is: ' + actionBar.getNavigationMode());
   		alert('The navigation mode is: ' + actionBar.navigationMode);
   	}
   }
   
   $.childWin.addEventListener('androidback', function() {
   	if (actionBar) {
   		actionBar.setNavigationMode(2);
   	}
   	$.childWin.close();
   });
   </pre></code>
   
   And your course don't forget to modify tiapp.xml to include this:
   <code><pre>
   &lt;android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt;
       &lt;tool-api-level&gt;16&lt;/tool-api-level&gt;
       &lt;manifest android:installLocation="preferExternal"&gt;
           &lt;supports-screens android:anyDensity="false"/&gt;
           &lt;uses-sdk android:minSdkVersion="8" android:targetSdkVersion="14"
           &lt;/manifest&gt;
   &lt;/android&gt;
   </pre></code></li>
<li>Mark Mokryn 2013-03-31

   </li>
<li>Mark Mokryn 2013-07-16

   If testing this on 3.2.0 then you need to add the following line to tiapp.xml to try my test code:
   <code><pre>
   &lt;property name="ti.android.useLegacyWindow" type="bool"&gt;true&lt;/property&gt;
   </pre></code>
   Since in 3.2.0 all windows are heavyweight and my demo code uses lightweight windows. Nevertheless - this doesn't affect the feature or the pull request - we still sometimes need to hide/show the tabs on Android, the "useLegacyWindow" is due to my demo code, not the code in the pull request. Additionally, obviously for SDK >= 3.1.1 must set android:minSdkVersion to at least 10.</li>
<li>Hieu Pham 2013-07-29

   master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/4058" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4058</a></li>
<li>Mark Mokryn 2014-07-02

   </li>
<li>Eric Merriman  2014-07-03

    Since this particular ticket is for a feature, we will re-close it since it was implemented. The error mentioned will be tracked in the linked ticket: TIMOB-17084. I will move Mark M's comments to preserve them.</li>
</ol>


<p><a href="/TIMOB/TIMOB-13135.json">JSON Source</a></p>