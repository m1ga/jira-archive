---
title: "[TIMOB-13163] iOS: HTTPClient setRequestHeader does not work for some headers"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>api, ios</td></tr>
<tr><th>Reporter</th><td>Stefan Hes</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2013-03-21T11:33:04.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:04:07.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem description</h4>

When I create a HTTPClient and use the setRequestHeader method this doesn't have effect for some headers.

Headers that are nog being set:
Accept-Encoding (in the code example i set this to 'gzip, deflate', in the sniffer the value is 'gzip'.)
Connection (in the code example i set this to 'Keep-Alive', in the sniffer the value is 'close'.)
(maybe there are more headers that are not being set but I tested with this 2 headers)

Headers that are set correctly:
Accept
Accept-Language
User-Agent

In the attachment you can find the code as well as a screenprint of fiddler (the http sniffer tool i use)
 

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-13163_36522/fiddler2.PNG">fiddler2.PNG</td></td><td>2013-03-21T11:33:04.000+0000</td><td>72109</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-13163_36521/httpclient code.txt">httpclient code.txt</td></td><td>2013-03-21T11:33:04.000+0000</td><td>480</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>James Hardwick 2014-02-03

   Seeing similar behavior on iOS only. Works as expected on Android (TC-3707)</li>
</ol>


<p><a href="/TIMOB/TIMOB-13163.json">JSON Source</a></p>