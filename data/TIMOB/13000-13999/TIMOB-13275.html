---
title: "[TIMOB-13275] Android: HTTPClient not sending POST vars"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2013-03-29T21:07:59.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 07 API, 2013 Sprint 07</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>HttpClient, android, ipass1, sdk2.1.4, triage</td></tr>
<tr><th>Reporter</th><td>Patrick Jongmans</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2012-11-15T15:47:11.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:37:06.000+0000</td></tr>
</table>

<h3>Description</h3>

When using the current SDK 2.1.4 the POST DATA is not sending on Android.
A normal json format post is being send:

<code><pre>
    //THIS IS NOT RECEIVED ON THE SERVER (ONLY ANDROID) ---
    var orderOptions = {};
    orderOptions.username = 'USERNAME';
    orderOptions.password = 'PASSWORD';
    orderOptions.somevar  = 'Some data';

    var client = Ti.Network.createHTTPClient({
		onload : function(e) {
			
    		}
			
        },
        onerror : function(e) {
        	
        	if(errorCallback != null) {
    			errorCallback(false);
    		}

        },
        timeout : 5000
	});
	
    client.open("POST", '<a href="http://www.somedomain.com/afile.php" rel="nofollow" target="_blank">http://www.somedomain.com/afile.php</a>');
    client.setRequestHeader('Content-Type', 'text/html; charset=utf-8;');
    client.send(orderOptions);
</pre></code>

<h3>Comments</h3>

<ol>
<li>Francis Meetze 2012-12-27

   Is this issue being escalated?
   
   Reference: <a href="http://developer.appcelerator.com/question/146006/google-app-engine-seems-to-confuse-android-post-with-get-over-httpclient#answer-253222" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/146006/google-app-engine-seems-to-confuse-android-post-with-get-over-httpclient#answer-253222</a></li>
<li>Pedro Enrique 2013-03-29

   Tested this and confirming bug. (works as expected on android)
   
   <h4>Code on my server:</h4>
   <code><pre>
   <?php 
      header('Content-Type: text/html; charset=utf-8');
   ?>
   
   { username: "<?php echo $_POST["username"]; ?>", password: "<?php echo $_POST["password"]; ?>" }
   </pre></code>
   
   <h4>Titanium code:</h4>
   <code><pre>
   var win = Ti.UI.createWindow({
   	backgroundColor: 'white'
   });
   
   var btn = Ti.UI.createButton({
   	title: 'here'
   });
   
   win.add(btn);
   
   win.open();
   
   btn.addEventListener('click', function(){
   	var xhr = Ti.Network.createHTTPClient();
   	xhr.onload = function() {
   		alert(this.responseText);
   	}
   	xhr.onerror = function() {
   		alert(this.responseText);
   	}
   	xhr.open('POST', '<a href="http://pec1985.com/me/test.php" rel="nofollow" target="_blank">http://pec1985.com/me/test.php</a>');
   
   	xhr.setRequestHeader('Content-Type', 'text/html; charset=utf-8;');
   	
   	xhr.send({
   		username: 'some_user_name',
   		password: 'some_password'
   	});
   });
   </pre></code>
   
   <h4>Expected response from server:</h4>
   <code><pre>
   { username: "some_user_name", password: "some_password" }
   </pre></code>
   
   <h4>Real response from server on Android</h4>
   <code><pre>
   { username: "", password: "" }
   </pre></code>
   </li>
<li>Pedro Enrique 2013-03-29

   Same happens on 3.0.2.GA</li>
<li>Vishal Duggal 2013-03-29

   [~penrique] Shouldn't the content type signify form encoded data (eg:application/x-www-form-urlencoded). Can you retry with the new content type.</li>
<li>Vishal Duggal 2013-03-29

   Resolving this as invalid since I suspect this is due to the wrong content type.
   
   If it is not so, please reopen ticket.</li>
<li>Francis Meetze 2013-04-23

   It would be great if this was re-opened. There seems to be some intermittent issues with the POST method being confused with GET and that is why the POST parameters aren't being received properly.
   
   I am able to duplicate this with applications running with the latest Android ICS OS.
   
   Something this simple:
   xhr.open('POST', '<a href="http://www.some-web-site.com/mobileupdate/masterstack" rel="nofollow" target="_blank">http://www.some-web-site.com/mobileupdate/masterstack</a>');
   xhr.setRequestHeader('Content-Type', 'application/json; charset=utf-8');
   xhr.send();
   
   Although no data is being sent in this example, it should still be read as a POST.  It is not:
   
   [22/Apr/2013:16:58:06 -0700] "GET /mobileupdate/masterstack/ HTTP/1.1" 200 146036 - - "www.my_website.com" ms=58 cpu_ms=21 cpm_usd=0.016321 app_engine_release=1.7.7 
   
   However, the POST works fine on devices running Gingerbread.  See reference: <a href="http://developer.appcelerator.com/question/146006/google-app-engine-seems-to-confuse-android-post-with-get-over-httpclient" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/146006/google-app-engine-seems-to-confuse-android-post-with-get-over-httpclient</a>
   
   Titanium 3.1; SDK 3.0.2.GA</li>
<li>Eric Merriman  2017-03-28

   [~jquick] Could you see if the POST is working as expected for you.
   </li>
<li>Eric Merriman  2018-08-06

   Closing as invalid. If incorrect, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-13275.json">JSON Source</a></p>