---
title: "[TIMOB-13338] Ti API: implement features to add several listeners to a proxy in one call "
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>TiAPI</td></tr>
<tr><th>Labels</th><td>API, Titanium, listeners</td></tr>
<tr><th>Reporter</th><td>Vincent </td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2012-10-26T09:44:19.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:03:30.000+0000</td></tr>
</table>

<h3>Description</h3>

for example, it would be nice to have a method like  Titanium.Proxy.addEventListeners( {   } );

<code><pre>
var self = Ti.UI.createWindow({
		
	}); 


self.addEventListeners(
	{
	 blur : function(e) { Ti.API.warn( JSON.stringify (e) ) } ,
	
	focus: function(e) { Ti.API.warn( JSON.stringify (e)) },

	myEvent : function(e) { Ti.API.warn(  JSON.stringify (e)) },
	}


);
</pre></code>
to be clear I know, this can be done in Javascript ( but this means adding a method to Titanium.Proxy  ) , and the idea here is not to call addEventListener in a loop but rather cross the bridge only once receiving a NSDictionary to transform callbacks in KrollCallbacks ( something like applyProperties()).


for IOS my first try was to do : 
<code><pre>
-(void)addEventListeners:(id)args
{
    
    ENSURE_SINGLE_ARG(args, NSDictionary);
    
    for (NSString * currentKey in args)
    {
        KrollCallback*  currentListener = [args objectForKey:currentKey];
        ENSURE_TYPE(currentListener,KrollCallback);
        
        [self addEventListener: [NSArray arrayWithObjects:currentKey, currentListener, nil] ];
        
    }
    
}
</pre></code>
This seems to work, but i'm safe to do that ?





-Moreover would it be possible to pass a Dictionary of eventListeners in the Ti factory methods ?
<code><pre>
Ti.UI.createXXX({
propertyX : value
...
eventListeners : { .... } // is this possible for UI events ? custom events ? 

})
</pre></code>
In some case , this could ensure that the listeners are registered before the events occur ( Ti.UI.Window events for example )




- I saw that Alloy implement the on(..) off(..) method with event listeners, so another solution could be to use the same syntax in the Proxy create method:
<code><pre>
Ti.UI.createXXX({
propertyX : value
...
onClick = function(){}
...

})

</pre></code>



<h3>Comments</h3>

<ol>
<li>Ivan Skugor 2013-04-04

   Maybe array of event listeners would be better since there can be multiple event listeners per event type.
   
   
   For example:
   
   <code><pre>
   self.addEventListeners([
       { click : function(e) { Ti.API.warn( JSON.stringify (e) ) } },
        
       { click: function(e) { Ti.API.warn( JSON.stringify (e)) } }, 
    
       { myEvent : function(e) { Ti.API.warn(  JSON.stringify (e)) } }
   ]);
   </pre></code></li>
<li>Bryan Hughes 2013-04-04

   We have been considering making the templating system that ListView uses available for all controls, and this dovetails nicely since templates already support listing multiple event listeners. Even if we don't make templates general purpose, this call should probably conform to the ListView template spec for uniformity's sake.</li>
<li>Ingo Muschenetz 2014-03-04

   We will revisit this at a later point when there is significant customer requests.</li>
</ol>


<p><a href="/TIMOB/TIMOB-13338.json">JSON Source</a></p>