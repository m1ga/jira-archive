---
title: "[TIMOB-13339] Android: Add support for onUserLeaveHint for activities"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-09-09T20:50:09.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 19, 2013 Sprint 19 API, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>community, module_api, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Jesper Jonsson</td></tr>
<tr><th>Assignee</th><td>Sunila</td></tr>
<tr><th>Created</th><td>2013-02-28T15:44:47.000+0000</td></tr>
<tr><th>Updated</th><td>2013-10-23T23:15:19.000+0000</td></tr>
</table>

<h3>Description</h3>

There isn't any good way to know if the user "pauses" an Android app. For example by hitting the home button. Listening for activity pause/resume for a multiple activity app can be really messy.

Maybe also hook this feature into the Ti.App.pause(d) event?

<a href="http://developer.android.com/reference/android/app/Activity.html#onUserLeaveHint()" rel="nofollow" target="_blank">http://developer.android.com/reference/android/app/Activity.html#onUserLeaveHint()</a>

<code><pre>
	var win = Ti.UI.createWindow({
		   backgroundColor : 'red',
		   orientationModes : [Titanium.UI.PORTRAIT],
		   exitOnClose : true,
		   navBarHidden : true
		});
	
	win.addEventListener('open', function(){
		win.getActivity().addEventListener('userleavehint', function()
				{
			Ti.API.info("Activity USER_LEAVE_HINT!!!!");
			});
	});
		 
	win.addEventListener('click', function()
	{	
	   var secondWin = Ti.UI.createWindow({
	      backgroundColor : 'blue',
	      orientationModes : [Titanium.UI.PORTRAIT],
	      navBarHidden : true
	   });
	  
	   secondWin.open();
	});
	win.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Jesper Jonsson 2013-04-04

   Pause/resume should only be called when you leave the app, for example pressing the home buttom.
   
   <code><pre> 
   var win = Ti.UI.createWindow({
      backgroundColor : 'red',
      orientationModes : [Titanium.UI.PORTRAIT],
      exitOnClose : true,
      navBarHidden : true
   });
   
   win.addEventListener('click', function()
   {
      var secondWin = Ti.UI.createWindow({
         backgroundColor : 'blue',
         orientationModes : [Titanium.UI.PORTRAIT],
         navBarHidden : true
      });
    
      secondWin.open(); // Ti.App pause/resume will NOT fire here! Good!
   });
   win.open();
   
   Ti.App.addEventListener('pause', function()
   {
      Ti.API.log("PAUSE!!!!");
   });
   
   Ti.App.addEventListener('resume', function()
   {
      Ti.API.log("RESUME!!!!");
   });
   </pre></code></li>
<li>Sunila 2013-08-10

   This event is for the activity and will be fired when the activity goes to the background when opening the 'secondWin' which won't help providing the 'app' 'pause' event.</li>
<li>Sunila 2013-09-04

   A new event 'userleavehint' is added to the activity
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/4647" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4647</a></li>
<li>Paras Mishra 2013-10-10

   Verified fix on:
   Device : HTC desire V , Android version : 4.0.3
   SDK: 3.2.0.v20131008154043
   CLI version : 3.2.0
   OS : MAC OSX 10.8.4
   Alloy : 1.2.2
   Appcelerator Studio, build: 3.2.0.201310092427
   XCode : 5</li>
</ol>


<p><a href="/TIMOB/TIMOB-13339.json">JSON Source</a></p>