---
title: "[TIMOB-13342] Profiler: Android: results are inconsistent and lacking some function calls"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2013-06-11T18:52:41.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.0, Release 3.1.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android, Tooling</td></tr>
<tr><th>Labels</th><td>qe-3.1.0, qe-3.1.1</td></tr>
<tr><th>Reporter</th><td>Dustin Hyde</td></tr>
<tr><th>Assignee</th><td>Max Stepanov</td></tr>
<tr><th>Created</th><td>2013-04-03T03:43:28.000+0000</td></tr>
<tr><th>Updated</th><td>2013-06-11T18:52:41.000+0000</td></tr>
</table>

<h3>Description</h3>

If you run more than one to three snapshots for Android, all results are one node: (program) 100%

The other nodes only appear on the creation of the first few snapshots.

Test Steps:

1. Run code (app.js) in Android Profiler:

<code><pre>
var string = '0123456789';

function complexity_constant()
{
	console.log(string);
}

function complexity_linear()
{
	for(i in string)
		console.log(string[i]);
}

function complexity_quadratic()
{
	for(i in string)
		for(j in string)
			console.log(string[i] + ',' + string[j]);
}

var win = Ti.UI.createWindow({
	layout:'vertical',
	backgroundColor:'white'
});

function createButton(title, e)
{
	var button = Ti.UI.createButton({
		title:title
	});
	
	button.addEventListener('click', e);
	
	win.add(button);
}

createButton('constant', complexity_constant);
createButton('linear', complexity_linear);
createButton('quadratic', complexity_quadratic);

win.open();
</pre></code>

2. Create a few snapshots and click on some of the buttons.

Test Results:

After a few snapshots, all data stops appearing.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-13342_39601/alloy_android_device_session_1.hprof">alloy_android_device_session_1.hprof</td></td><td>2013-06-07T22:34:24.000+0000</td><td>598</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-13342_39602/alloy_android_device_session_2.hprof">alloy_android_device_session_2.hprof</td></td><td>2013-06-07T22:34:24.000+0000</td><td>263</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-13342_39603/alloy_android_device_session_3.hprof">alloy_android_device_session_3.hprof</td></td><td>2013-06-07T22:34:24.000+0000</td><td>598</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-13342_39604/alloy_android_device_session_4.hprof">alloy_android_device_session_4.hprof</td></td><td>2013-06-07T22:34:24.000+0000</td><td>493</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-13342_39605/alloy_android_device_session_5.hprof">alloy_android_device_session_5.hprof</td></td><td>2013-06-07T22:34:24.000+0000</td><td>361</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-13342_39606/alloy_android_device_session_6.hprof">alloy_android_device_session_6.hprof</td></td><td>2013-06-07T22:34:24.000+0000</td><td>500</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Michael Xia 2013-04-03

   This doesn't appear to be a Studio issue. We display the data for what we get for each profiling session, and the data here only contains the idle entry. Need Max to take a look at it.
   </li>
<li>Max Stepanov 2013-04-03

   I turned on profiler logging and here is what reported from underlying V8 profiler APIs:
   <code><pre>
   [ERROR][TiProfiler(  384)] --down
   [ERROR][TiProfiler(  384)] func = (program), source = , lineNo = 0, cost = 0.200000
   [ERROR][TiProfiler(  384)] --up
   [ERROR][TiProfiler(  384)] --done
   </pre></code>
   This might be related to JIT optimizations, or a bug in V8 profiler.
   
   The issue is only seen on Emulator, cannot reproduce on device.</li>
<li>Dustin Hyde 2013-06-07

   I am attaching some alloy profile sessions on the default alloy project.
   
   For each session, I clicked on the hello world button three times.
   
   I seem to get the results as time progresses, so I don't see this issue (of the results disappearing over time) for alloy on android device.
   
   However, the results are different each time, possibly related to the time being too close to zero, and thus not showing up.</li>
<li>Ingo Muschenetz 2013-06-07

   Reclosing as not our bug for now. Perhaps upgrading V8 might help.</li>
<li>Dustin Hyde 2013-06-07

   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-13342.json">JSON Source</a></p>