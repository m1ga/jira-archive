---
title: "[TIMOB-13357] Android: Titanium does not properly handle arrays in form-encoded POSTs"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>form-encoded, httpclient, post</td></tr>
<tr><th>Reporter</th><td>Matt Baxter</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2012-11-12T17:36:02.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:03:38.000+0000</td></tr>
</table>

<h3>Description</h3>

When using the HTTPClient in Titanium Mobile, the documentation (<a href="http://docs.appcelerator.com/titanium/2.1/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/2.1/#</a>!/api/Titanium.Network.HTTPClient-method-send) says that if you pass a serializable JavaScript object, it will automatically turn it into form-encoded POST data. However, this breaks when your data contains an array.

Using the free service httpbin (<a href="http://httpbin.org/)" rel="nofollow" target="_blank">http://httpbin.org/)</a> to view the POST data that is sent, you can see that the array is not properly encoded. By sending POST data to httpbin.org/post, we can see the POST data that Titanium sends.

Example code: 

<code><pre>
var xhr = Ti.Network.createHTTPClient();
xhr.onload = function(ev) {
  Ti.API.info(this.responseText);
};
xhr.open('POST','<a href="http://httpbin.org/post" rel="nofollow" target="_blank">http://httpbin.org/post</a>');
xhr.send({
  'test_text': 'testing',
  'test_array': ['one','two','three']
});
</pre></code>

The response received looks like this:

<code><pre>
{
   "files": {},
   "form": {
      "test_array": "[Ljava.lang.Object;@41a6e560",
      "test_text": "testing"
   },
   "url": "<a href="http://httpbin.org/post" rel="nofollow" target="_blank">http://httpbin.org/post</a>",
   "args": {},
   "headers": {
      "Content-Length": "63",
      "Connection": "keep-alive",
      "User-Agent": "",
      "Host": "httpbin.org",
      "X-Requested-With": "XMLHttpRequest",
      "Content-Type": "application/x-www-form-urlencoded"
   },
   "json": null,
   "data": ""
}
</pre></code>

You will see the "test_array" has a value of "[Ljava.lang.Object;@41a6e560".

However, sending the data as a url encoded string by changing the send statement to this:

<code><pre>
xhr.send('test_text=testing&test_array=one&test_array=two&test_array=three');
</pre></code>

Creates the correct post data:

<code><pre>
{
   "origin": "64.128.22.8",
   "files": {},
   "form": {
      "test_array": [
         "one",
         "two",
         "three"
      ],
      "test_text": "testing"
   },
   "url": "<a href="http://httpbin.org/post" rel="nofollow" target="_blank">http://httpbin.org/post</a>",
   "args": {},
   "headers": {
      "Content-Length": "64",
      "Connection": "keep-alive",
      "User-Agent": "",
      "Host": "httpbin.org",
      "X-Requested-With": "XMLHttpRequest",
      "Content-Type": "application/x-www-form-urlencoded"
   },
   "json": null,
   "data": ""
}
</pre></code>

<h3>Comments</h3>

<ol>
<li>Kevin Purnelle 2013-05-23

   I had the same problem. @matt Thanks for the current tip to solve this problem :)
   
   <a href="http://developer.appcelerator.com/question/152751/how-can-i-see-the-request-headers-in-http-client-along-with-the-post-message--httpclient-problem#answer-263243" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/152751/how-can-i-see-the-request-headers-in-http-client-along-with-the-post-message--httpclient-problem#answer-263243</a></li>
<li>josh rose 2013-12-16

   Just hit this as well and finally realized it was this bug after a bunch of debugging.
   
   This seems like an important scenario (Android + POSTing and array) in an essential module.
   
   Any chance this can get some traction after a year of being an issue?</li>
<li>josh rose 2013-12-16

   Thanks Ingo!</li>
</ol>


<p><a href="/TIMOB/TIMOB-13357.json">JSON Source</a></p>