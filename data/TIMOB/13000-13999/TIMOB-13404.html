---
title: "[TIMOB-13404] Android: TextField update value on Return event"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-05-03T10:16:36.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 08 API, 2013 Sprint 08, Release 3.1.1, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>SupportTeam, qe-testadded, regression</td></tr>
<tr><th>Reporter</th><td>Damien Laureaux</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2013-04-05T14:01:18.000+0000</td></tr>
<tr><th>Updated</th><td>2013-10-31T23:00:06.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description of the problem</h4>
Using an app with username and password fields, when a text is entered in the first, then the cursor goes to the second, the value of the first text field is not valid anymore (it takes the password's value).

<h4>Steps to reproduce</h4>
- Run the following code on Android
- See the logs with adb logcat
- Enter something in the username field (e.g. "foo") - you will see "foo/" in the log
- Click the return button, and start writing something in the password field (e.g. "bar") - you will see "bar/bar" in the log

<code><pre>
var win1 = Titanium.UI.createWindow({
    backgroundColor:'#fff'
});

var usernameRow = Ti.UI.createTableViewRow({
    height: "45dp",
    backgroundColor: "#fff",
    className: "loginRow",
    id: "usernameRow"
});

var __alloyId1 = [];
__alloyId1.push(usernameRow);

var usernameLabel = Ti.UI.createLabel({
    left: "5dp",
    width: "100dp",
    height: Ti.UI.SIZE,
    color: "#333",
    font: {
        fontSize: "16dp"
    },
    text: "Username",
    id: "usernameLabel"
});
usernameRow.add(usernameLabel);

var usernameField = Ti.UI.createTextField({
    left: "110dp",
    right: "10dp",
    width: Ti.UI.FILL,
    height: Ti.UI.FILL,
    color: "#333",
    backgroundColor: "#fff",
    autocorrect: !1,
    returnKeyType: Titanium.UI.RETURNKEY_NEXT,
    id: "usernameField"
});
usernameRow.add(usernameField);

var passwordRow = Ti.UI.createTableViewRow({
    height: "45dp",
    backgroundColor: "#fff",
    className: "loginRow",
    id: "passwordRow"
});

__alloyId1.push(passwordRow);

var passwordLabel = Ti.UI.createLabel({
    left: "5dp",
    width: "100dp",
    height: Ti.UI.SIZE,
    color: "#333",
    font: {
        fontSize: "16dp"
    },
    text: "Password",
    id: "passwordLabel"
});
passwordRow.add(passwordLabel);

var passwordField = Ti.UI.createTextField({
    left: "110dp",
    right: "10dp",
    width: Ti.UI.FILL,
    height: Ti.UI.FILL,
    color: "#333",
    backgroundColor: "#fff",
    passwordMask: !0,
    returnKeyType: Titanium.UI.RETURNKEY_DONE,
    id: "passwordField"
});
passwordRow.add(passwordField);

var formView = Ti.UI.createTableView({
    left: "10dp",
    right: "10dp",
    width: Ti.UI.FILL,
    backgroundColor: "transparent",
    top: "10dp",
    height: Ti.UI.SIZE,
    borderWidth: "1dp",
    borderRadius: 10,
    borderColor: "#999",
    selectedBackgroundColor: "transparent",
    data: __alloyId1,
    id: "formView"
});

win1.add(formView);

usernameField.addEventListener("change", function(e) {
    Ti.API.info("[---Login---] Connection: " + usernameField.value + "/" + passwordField.value);
});
usernameField.addEventListener("return", function() {
    Ti.API.info("[---Login---] Connection: " + usernameField.value + "/" + passwordField.value);
    passwordField.focus();
});
passwordField.addEventListener("return", function(e) {
    Ti.API.info("[---Login---] Connection: " + usernameField.value + "/" + passwordField.value);
});

win1.open();
</pre></code>

<h4>Additional info</h4>
The code above is what is generated by Alloy - the bug was found using it. Using SDK 2.1.4 the problem is not visible.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-13404_37068/titanium-bug-android-textfield-value.zip">titanium-bug-android-textfield-value.zip</td></td><td>2013-04-05T14:01:18.000+0000</td><td>7399602</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Davide Cassenti 2013-04-05

   The problem does not seem to be related with Alloy. Updated the bug with a code that replicates the issue with the SDK 3.0.2. I cannot replicate switching back to 2.1.4</li>
<li>Vishal Duggal 2013-04-05

   Problem is related to className property of the tableView row. If you remove the className from the TableViewRow proxies it works fine</li>
<li>Vishal Duggal 2013-04-05

   Pull pending against master
   <a href="https://github.com/appcelerator/titanium_mobile/pull/4102" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4102</a></li>
<li>Vishal Duggal 2013-04-05

   Pull pending 
   <a href="https://github.com/appcelerator/titanium_mobile/pull/4102" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4102</a></li>
<li>Vishal Duggal 2013-04-22

   Backport to 3_1_X
   <a href="https://github.com/appcelerator/titanium_mobile/pull/4205" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4205</a></li>
<li>Anshu Mittal 2013-05-03

   Tested with:
    
   SDK:3.1.1.v20130502180055
   Appcelerator Studio: 3.1.1.201305020729
   OS: OSX 10.7.5
   Device: htc desire(4.0.3)
   Xcode: 4.6
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-13404.json">JSON Source</a></p>