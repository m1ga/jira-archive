---
title: "[TIMOB-13443] Android: Deprecate incrementServiceRefCount, decrementServiceRefCount and getServiceRefCount before removing them"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-04-08T22:47:14.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.1.0, 2013 Sprint 07 Core, 2013 Sprint 07, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>qe-closed-3.1.0, regression</td></tr>
<tr><th>Reporter</th><td>Martin Guillon</td></tr>
<tr><th>Assignee</th><td>Allen Yeung</td></tr>
<tr><th>Created</th><td>2013-04-06T07:25:51.000+0000</td></tr>
<tr><th>Updated</th><td>2013-04-09T23:35:34.000+0000</td></tr>
</table>

<h3>Description</h3>

this [commit](<a href="https://github.com/appcelerator/titanium_mobile/commit/48fd5c12f6f7b4941affd5ce8d6a0ab9f65113fc)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/48fd5c12f6f7b4941affd5ce8d6a0ab9f65113fc)</a> broke backward compatibility of modules when using :
incrementServiceRefCount
decrementServiceRefCount
getServiceRefCount

Method names have changed without supporting deprecated. As a consequence a module built before will crash using a newer sdk and vice versa

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-13443_37247/com.service-android-0.1.zip">com.service-android-0.1.zip</td></td><td>2013-04-08T22:06:30.000+0000</td><td>44969</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2013-04-07

   [~farfromrefuge] Those APIs are private and not listed as being supported from release to release. Is there a reason you are relying on them?</li>
<li>Martin Guillon 2013-04-08

   </li>
<li>Allen Yeung 2013-04-08

   Test case:
   1. Create a titanium project
   2. Include the attached project
   3. Run the following app.js
   <code><pre>
   var win = Ti.UI.createWindow({
   	backgroundColor:'white'
   });
   var label = Ti.UI.createLabel();
   win.add(label);
   win.open();
   
   // TODO: write your module tests here
   var service = require('com.service');
   Ti.API.info("module is =&gt; " + service);
   
   label.text = service.example();
   
   Ti.API.info("module exampleProp is =&gt; " + service.exampleProp);
   service.exampleProp = "This is a test value";
   
   alert(service.getServiceRefCount());
   if (Ti.Platform.name == "android") {
   	var proxy = service.createExample({
   		message: "Creating an example Proxy",
   		backgroundColor: "red",
   		width: 100,
   		height: 100,
   		top: 100,
   		left: 150
   	});
   
   	proxy.printMessage("Hello world!");
   	proxy.message = "Hi world!.  It's me again.";
   	proxy.printMessage("Hello world!");
   	win.add(proxy);
   }
   </pre></code>
   
   
   Expected Result:
   You should get an alert with '0' as its message
   
   Actual Result:
   The app hangs on splash screen with a class not found exception in log.
   </li>
<li>Allen Yeung 2013-04-08

   <a href="https://github.com/appcelerator/titanium_mobile/pull/4125" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4125</a>
   
   
   EDIT: 
   backport: <a href="https://github.com/appcelerator/titanium_mobile/pull/4127" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4127</a></li>
<li>Vishal Duggal 2013-04-08

   Need backport to 3_1_X as well</li>
<li>Eric Merriman  2013-04-09

   Verified fixed with:
   Mac OS 10.8.3
   Xcode 4.6
   CLI: 3.1.0-cr
   Alloy: 1.1.0-cr
   Appcelerator Studio, build: 3.1.0.201304082106
   Titanium SDK version 3.1.0.v20130409124549
   
   Nexus 4 4.2.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-13443.json">JSON Source</a></p>