---
title: "[TIMOB-13476] iOS 5: Image resize broken"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-04-11T20:53:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 08 API, 2013 Sprint 08, Release 3.2.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Martin Guillon</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2013-01-02T11:27:43.000+0000</td></tr>
<tr><th>Updated</th><td>2013-10-25T18:31:15.000+0000</td></tr>
</table>

<h3>Description</h3>

Since this commit: <a href="https://github.com/vishalduggal/titanium_mobile/commit/a5b7828d980a36d298cb48ecba79971426f6a162" rel="nofollow" target="_blank">https://github.com/vishalduggal/titanium_mobile/commit/a5b7828d980a36d298cb48ecba79971426f6a162</a>

The resize of background image for button has changed on iOS 5. It does not resize the center by stretching but by tiling it.

Looking at the commit there should be a test for uisGreater than 5 but only for the respondToSelector which follows.

<h3>Comments</h3>

<ol>
<li>Davide Cassenti 2013-04-05

   Can you post a sample code? Which version(s) of the SDK do work for you, and which ones don't?</li>
<li>Martin Guillon 2013-04-06

   it s been fixed:
   <a href="https://github.com/vishalduggal/titanium_mobile/commit/5d8a5edcb48aba8ed2580bfb4edc5b850f980ebc" rel="nofollow" target="_blank">https://github.com/vishalduggal/titanium_mobile/commit/5d8a5edcb48aba8ed2580bfb4edc5b850f980ebc</a>
   But if I may it s 2 "if" when only one was necessary
   Just test for the method and not ios5 and you are good</li>
<li>Daniel Sefton 2013-04-06

   Resolved as fixed.. I doubt we'll have time to change if statements for the sake of cleanliness, as long as it works.
   
   Not sure what you meant by "Just test for the method and not ios5 and you are good".</li>
<li>Martin Guillon 2013-04-07

   I get it s not a priority and i did it in my branch, so i am good ;)
   
   In the code we have 2 nested if case
   <code><pre>
   if ([TiUtils isIOS5OrGreater]) {
   ...
       if ([theImage respondsToSelector:@selector(resizableImageWithCapInsets:resizingMode:)]) {
            ...
            stretchableImage = [[theImage resizableImageWithCapInsets:UIEdgeInsetsMake(top, left, bottom, right) resizingMode:1] retain];
       }
       else {
       ...
       stretchableImage = [[theImage resizableImageWithCapInsets:UIEdgeInsetsMake(top, left, bottom, right)] retain];
       }
   }
   else {
   ...
   stretchableImage = [[theImage resizableImageWithCapInsets:UIEdgeInsetsMake(top, left, bottom, right)] retain];
   }
   ...
   </pre></code>
   
   There s redondancy
   
   you can simply do it that way
   
   <code><pre>
   if ([theImage respondsToSelector:@selector(resizableImageWithCapInsets:resizingMode:)]) {
      ...
      stretchableImage = [[theImage resizableImageWithCapInsets:UIEdgeInsetsMake(top, left, bottom, right) resizingMode:1] retain];
   }
   else {
      ...
      stretchableImage = [[theImage resizableImageWithCapInsets:UIEdgeInsetsMake(top, left, bottom, right)] retain];
   }
   ...
   </pre></code></li>
<li>Vishal Duggal 2013-04-11

   This is the inner if condition right now with all the calculation in the outer if loop. 
   <code><pre>
               if ([theImage respondsToSelector:@selector(resizableImageWithCapInsets:resizingMode:)]) {
                   //1 = UIImageResizingModeStretch
                   stretchableImage = [[theImage resizableImageWithCapInsets:UIEdgeInsetsMake(top, left, bottom, right) resizingMode:1] retain];
               }
               else {
                   stretchableImage = [[theImage resizableImageWithCapInsets:UIEdgeInsetsMake(top, left, bottom, right)] retain];
               }
   
   </pre></code>
   </li>
<li>Martin Guillon 2013-04-12

   Yes Vishal but you dont need the ios5 test on top of it</li>
</ol>


<p><a href="/TIMOB/TIMOB-13476.json">JSON Source</a></p>