---
title: "[TIMOB-13499] iOS: ListView row still selected when returning to the window"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-04-09T19:42:37.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.1.0, 2013 Sprint 08 Core, 2013 Sprint 08, Release 3.2.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios, listview, listviewitem, qe-closed-3.1.0, qe-testadded, release-note, triage</td></tr>
<tr><th>Reporter</th><td>Carter Lathrop</td></tr>
<tr><th>Assignee</th><td>Max Stepanov</td></tr>
<tr><th>Created</th><td>2013-04-09T04:01:32.000+0000</td></tr>
<tr><th>Updated</th><td>2014-12-01T02:39:14.000+0000</td></tr>
</table>

<h3>Description</h3>

*Problem*
When selecting a row and navigating to the next screen then tapping back to the window with the listview the selected row is still selected.  Apple will reject apps with this behavior.  

*Expected Behavior*
The listview should be deselected when returning to the window.

*Requested Feature*
This control also needs to a method to support deselectItem 

*Steps to Reproduce*
1. Copy and paste code provided below into app.js
2. Run on 3.1.xx or higher on iOS
3. Click "Open ListView Tests" button
4. Click "Basic" ListViewRow
5. Click on any row
6. Click back nav button
7. Notice "Basic" is still selected


<code><pre>
var rootWin;
var isAndroid = Ti.Platform.osname == 'android';

function createAndroidNavGroup() {
	return {
		open : function(openWin, props) {
			openWin.fullscreen = true;
			openWin.backgroundColor = 'blue';
			openWin.open();
		}
	}
}

var navGroup = isAndroid ? createAndroidNavGroup() : Ti.UI.iPhone.createNavigationGroup({
	window : rootWin = Ti.UI.createWindow()
});

var button = Ti.UI.createButton({
    title: 'Open ListView Tests'
});
button.addEventListener('click', function() {
	openTestsWindow();
});
var label = Ti.UI.createLabel({
	text: "Return to this screen to check for memory leaks.\nEnsure garbage collection by doing 'Simulate Memory Warning'",
	left: 5,
	color: 'red',
	bottom: 20
});
if (isAndroid) {
	var navWin = Ti.UI.createWindow({ backgroundColor: 'white' });

	navWin.add(button);
	navWin.add(label);
} else {
	rootWin.add(button);
	rootWin.add(label);

	var navWin = Ti.UI.createWindow();
	navWin.add(navGroup);
}
navWin.open();


function openTestsWindow() {
	var win = Ti.UI.createWindow({
		title : 'ListView Tests'
	});
	var listView = Ti.UI.createListView();

	var section = Ti.UI.createListSection({
		headerTitle : 'Items'
	});
	section.setItems([{
		properties : {
			title : 'Basic',
			itemId : 'basic',
			accessoryType : Ti.UI.LIST_ACCESSORY_TYPE_DISCLOSURE
		}
	}]);
	listView.appendSection(section);

	listView.addEventListener('itemclick', function(e) {
		var f = tests[e.itemId];
		if (f)
			f();
	});
	win.add(listView);
	navGroup.open(win, {
		animated : true
	});
}

var tests = {};

tests.basic = function() {
	var win = Ti.UI.createWindow({
		title : 'Basic'
	});
	var section = Ti.UI.createListSection();
	var items = [];
	for (var i = 0; i < 1000; ++i) {
		items.push({
			properties : {
				title : 'Item ' + i
			}
		});
	}
	section.setItems(items);
	var listView = Ti.UI.createListView({
		sections : [section]
	});
	win.add(listView);
	navGroup.open(win, {
		animated : true
	});
}
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-13499_37272/app.js">app.js</td></td><td>2013-04-09T17:50:26.000+0000</td><td>1944</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-13499_37274/listview.tiff">listview.tiff</td></td><td>2013-04-09T17:52:31.000+0000</td><td>317744</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Carter Lathrop 2013-04-09

   Darren, 
   In order for a bug to be reviewed, we need to see a test case that explicitly shows the issue. By this I mean a simple piece of code that can be copy and pasted into an app.js that shows the problem. Please refer to: 
   <a href="https://wiki.appcelerator.org/display/guides/How+to+Submit+a+Bug+Report" rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/guides/How+to+Submit+a+Bug+Report</a>
   on how to write an acceptable bug report.
   Thanks,
   Carter</li>
<li>Darren Haligas 2013-04-09

   I have added a simple test case and screenshot showing the row still selected after navigating back to the list view.</li>
<li>Carter Lathrop 2013-04-09

   @Darren, confirmed bug. I have moved along to engineering. Please keep a watch on this for the fix. Thank you for bringing this to our attention.
   Regards,
   Carter
   </li>
<li>Max Stepanov 2013-04-09

   PR <a href="https://github.com/appcelerator/titanium_mobile/pull/4132" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4132</a>
   3_1_X PR <a href="https://github.com/appcelerator/titanium_mobile/pull/4133" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4133</a></li>
<li>Vishal Duggal 2013-04-09

   Merged</li>
<li>Eric Merriman  2013-04-09

   Verified fixed in simulator and on device:
   Mac OS 10.8.3
   Xcode 4.6
   CLI: 3.1.0-cr
   Alloy: 1.1.0-cr
   Appcelerator Studio, build: 3.1.0.201304082106
   Titanium SDK version 3.1.0.v20130409124549
   iPhone 5 6.0 </li>
<li>Hans Knöchel 2013-04-10

   The selection of the cell item seems to be ok. Unfortunately, the cell stays selected until the opened window is closed (in contrast to the older API, where the selection was blured when opening the window). 
   
   Combined with this problem, after closing a window, the color of the rows stays default and not reacts to the highlightedColor property, although it is set. 
   
   Should i wrap it up in a single entry?</li>
<li>Darren Haligas 2013-04-11

   I am getting an error trying the deselect function.  My app has a custom navigation using views appears to not call the will show function.  Was this function not exposed??
   
   [ERROR] :      message = "'undefined' is not a function (evaluating 'listView.deselectAll(false)')";
   [ERROR] :      name = TypeError;
   [ERROR] :      sourceId = 233103680;</li>
<li>Vishal Duggal 2013-04-12

   deselectAll is not exposed to the JS side. Private API</li>
<li>Hans Knöchel 2013-04-13

    Shouldn't the ListItems be deselected by default when receiving a click event? The native UITableView-API does that and the "old" Ti.UI.TableView as well.</li>
<li>Danny Pham 2013-04-20

    Agree with Hans. I open an optionDialog on click instead of a child window, in this case the row always stays selected.
    
    So in TiUIListView.m I have added:
    
    <code><pre>
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    </pre></code></li>
<li>Mark Mokryn 2013-07-10

    Any update on deselecting ListItems? Thanks.</li>
<li>Vishal Duggal 2013-07-10

    [~mokesmokes] DeselectItem was implemented as part of TIMOB-13417</li>
<li>Marco Seguri 2013-09-03

    I just copied and pasted the "List View Sections" example from [Titanium.UI.ListView](<a href="http://docs.appcelerator.com/titanium/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/latest/#</a>!/api/Titanium.UI.ListView), the deselectItem bug is not fixed in 3.2.0.
    
    [<a href="http://i.imgur.com/csxk2uj.png" rel="nofollow" target="_blank">http://i.imgur.com/csxk2uj.png</a>]</li>
<li>Marco Seguri 2013-09-03

    And this is a screenshot of the sample in this ticket: [screenshot](<a href="http://i.imgur.com/HWXv9Pq.png)" rel="nofollow" target="_blank">http://i.imgur.com/HWXv9Pq.png)</a></li>
<li>Þórhallur Helgason 2013-10-11

    I can confirm that this worked fine in 3.1.2GA but stopped working properly in 3.1.3GA.  A fix would be greatly appreciated...</li>
<li>Silambarasan Raman 2014-05-26

    Hi All,
    I am facing the similar issue. I have posted my question on forum.<a href="http://developer.appcelerator.com/question/174326/listview-background-color" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/174326/listview-background-color</a>
    Please look into that and help me to sort out this.
    Thanks in advance.</li>
<li>Silambarasan Raman 2014-05-28

    Hi All, When i use ,
    myList.addEventListener('itemclick', function(e){
        myList.deselectItem(e.sectionIndex, e.itemIndex);
    });
    
    It's working fine on iOS. But Android giving the error of "deselect is not a method" .
    Is there any solutions.?</li>
<li>Silambarasan Raman 2014-05-28

    I have Coded for separate os by checking the Ti.Platform.osname. And for android deselectItem is no need. Because already its looks like deselecteditem. Thanks</li>
<li>Kiley Williams 2014-12-01

    What's the latest on this fix? The stopgap solution is a bit slower than desired...</li>
</ol>


<p><a href="/TIMOB/TIMOB-13499.json">JSON Source</a></p>