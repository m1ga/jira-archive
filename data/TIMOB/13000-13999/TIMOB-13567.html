---
title: "[TIMOB-13567] Android: Textfield cursor not visible when setting API level to 11 or above"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-07-29T23:31:14.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 08 Core, 2013 Sprint 08</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Allen Yeung</td></tr>
<tr><th>Assignee</th><td>Allen Yeung</td></tr>
<tr><th>Created</th><td>2013-04-15T21:32:04.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-31T22:23:21.000+0000</td></tr>
</table>

<h3>Description</h3>

Steps to reproduce:

1. Add the following in your tiapp.xml:

<code><pre>
    &lt;android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt;
        &lt;manifest&gt;
            &lt;uses-sdk android:minSdkVersion="14" android:targetSdkVersion="14"/&gt;
        &lt;/manifest&gt;
    &lt;/android&gt;
</pre></code>

2. Use the following app.js:

<code><pre>
Titanium.UI.setBackgroundColor('#000');
var win1 = Titanium.UI.createWindow({
	title : 'Tab 1',
	navBarHidden : true
});

var pw = Ti.UI.createTextField({
	top : 20,
	left : 10,
	right : 10,
	passwordMask : true,
	backgroundColor : 'white'
});
win1.add(pw);

win1.open(); 
</pre></code>

3. Click on the text field when the app is launched, and the cursor is white by default, which makes it nearly invisible.

NOTE:  This is related to heavyweight windows.  If you comment out navBarHidden, this bug does not appear.

<h3>Comments</h3>

<ol>
<li>Shannon Hicks 2013-04-16

   The same problem exists with Ti.UI.Picker. If you substitute the TextField for a Picker, the default text is White with no way to change the color.</li>
<li>Allen Yeung 2013-04-16

   Another test case that seems to be related to this:
   
   <code><pre>
   var win1 = Titanium.UI.createWindow({
   	title : 'Tab 1',
   	backgroundColor : '#000',
   	backgroundImage : '/default.png',
   	navBarHidden : true,
   });
   
   scoreTypePicker = Ti.UI.createPicker({
   	backgroundColor : '#fff',
   	font : {
   		fontSize : 18,
   		fontWeight : 'bold',
   	},
   	textAlign : 'center',
   	selectionIndicator : true,
   	type : Titanium.UI.PICKER_TYPE_PLAIN
   }); 
   
   scoreTypePicker.add([
   Ti.UI.createPickerRow({title:'test 1'}),
   Ti.UI.createPickerRow({title:'test 2'}),
   Ti.UI.createPickerRow({title:'test 3'}),
   Ti.UI.createPickerRow({title:'test 4'}),
   ]);
   win1.add(scoreTypePicker);
   
   win1.open();
   </pre></code></li>
<li>Joseph Sachs 2013-04-16

   I am having a similar issue when I tap into the TextField it highlights for less than a second, then looses focus.
   Ti SDK 3.1.0.v20130409124549
   Mac OSX for an Android App (Target Android SDK 2.3.3 & 3.0 both cause this issue)
   
   <code><pre>
   var loginTableView = Titanium.UI.createTableView({top:'0dp', left:'0dp', headerView: loginTableHeader, backgroundColor:'transparent',scrollable: false});
   
   var userEmailrow = Ti.UI.createTableViewRow({height:'44dp', className:'accountLogin', backgroundColor:'white'});
                   var userLabel = Ti.UI.createLabel({
                       text : L('usernameEmail'),
                       color : '#2b3931',
                       font : {fontSize:'15dp'}, left : 0, width: '131dp', height: '30dp',
                       textAlign : 'right'
                   });
                   userEmailrow.add(userLabel);
                   var userTF = Titanium.UI.createTextField({
                       height:'auto', top:'0dp', left:'141dp', width:'179dp',
                       font: {fontSize: '15dp', fontColor:'#000000'},
                       hintText:L('usernameemail'), autocorrect: false, //autocapitalization: false,
                       keyboardType : Ti.UI.KEYBOARD_EMAIL, returnKeyType : Ti.UI.RETURNKEY_NEXT, 
                       softKeyboardOnFocus: Titanium.UI.Android.SOFT_KEYBOARD_SHOW_ON_FOCUS,
                   });
                   userTF.addEventListener('focus',function(){
                       setTimeout(function(){ userTF.focus(); },300);
                   });
                   userTF.addEventListener('return', function(e) {
                       passwordTF.focus();
                   });
                   userEmailrow.add(userTF);
                   LoginDataRows[0] = userEmailrow;
                    
                   var passwordRow = Ti.UI.createTableViewRow({height:'44dp', className:'accountLogin', backgroundColor:'white'});
                   var passwordLabel = Ti.UI.createLabel({
                       text : L('Password'),
                       color : '#2b3931',
                       font : {fontSize:'15dp'}, left : 0, width: '131dp', height: '30dp',
                       textAlign : 'right'
                   });
                   passwordRow.add(passwordLabel);
                   var passwordTF = Titanium.UI.createTextField({
                       height:'auto', top:'0dp', left:'141dp', width:'179dp',
                       passwordMask: true,
                       font: {fontSize: '15dp', fontWeight: 'bold', fontColor:'#000000'},
                       hintText:L('password'),
                       //returnKeyType : Ti.UI.RETURNKEY_JOIN, 
                   });
                   passwordTF.addEventListener('focus',function(){
                       setTimeout(function(){ passwordTF.focus(); },300);
                   });
   </pre></code></li>
<li>Allen Yeung 2013-04-16

   [~underlabs] The code that you provided does not run.  I had to change it to get it running:
   
   <code><pre>
   var win = Ti.UI.createWindow({
   	navBarHidden:true,
   	windowSoftInputMode: Ti.UI.Android.SOFT_INPUT_ADJUST_PAN
   
   });
   
   var loginTableView = Titanium.UI.createTableView({
   	top : '0dp',
   	left : '0dp',
   	backgroundColor : 'transparent',
   	scrollable : false
   });
   
   var userEmailrow = Ti.UI.createTableViewRow({
   	height : '44dp',
   	className : 'accountLogin',
   	backgroundColor : 'white'
   });
   var userLabel = Ti.UI.createLabel({
   	text : 'usernameEmail',
   	color : '#2b3931',
   	font : {
   		fontSize : '15dp'
   	},
   	left : 0,
   	width : '131dp',
   	height : '30dp',
   	textAlign : 'right'
   });
   userEmailrow.add(userLabel);
   var userTF = Titanium.UI.createTextField({
   	height : 'auto',
   	top : '0dp',
   	left : '141dp',
   	width : '179dp',
   	font : {
   		fontSize : '15dp',
   		fontColor : '#000000'
   	},
   	hintText : L('usernameemail'),
   	autocorrect : false, //autocapitalization: false,
   	keyboardType : Ti.UI.KEYBOARD_EMAIL,
   	returnKeyType : Ti.UI.RETURNKEY_NEXT,
   	softKeyboardOnFocus : Titanium.UI.Android.SOFT_KEYBOARD_SHOW_ON_FOCUS,
   });
   userTF.addEventListener('focus', function() {
   	setTimeout(function() {
   		userTF.focus();
   	}, 300);
   });
   userTF.addEventListener('return', function(e) {
   	passwordTF.focus();
   });
   userEmailrow.add(userTF);
   
   var passwordRow = Ti.UI.createTableViewRow({
   	height : '44dp',
   	className : 'accountLogin',
   	backgroundColor : 'white'
   });
   var passwordLabel = Ti.UI.createLabel({
   	text : 'Password',
   	color : '#2b3931',
   	font : {
   		fontSize : '15dp'
   	},
   	left : 0,
   	width : '131dp',
   	height : '30dp',
   	textAlign : 'right'
   });
   passwordRow.add(passwordLabel);
   var passwordTF = Titanium.UI.createTextField({
   	height : 'auto',
   	top : '0dp',
   	left : '141dp',
   	width : '179dp',
   	passwordMask : true,
   	font : {
   		fontSize : '15dp',
   		fontWeight : 'bold',
   		fontColor : '#000000'
   	},
   	hintText : 'password',
   	//returnKeyType : Ti.UI.RETURNKEY_JOIN,
   });
   passwordTF.addEventListener('focus', function() {
   	setTimeout(function() {
   		passwordTF.focus();
   	}, 300);
   });
   
   passwordRow.add(passwordTF);
   loginTableView.appendRow(userEmailrow);
   loginTableView.appendRow(passwordRow);
   
   win.add(loginTableView);
   win.open();
   </pre></code>
   
   Anyways, the focus issue is a known native android issue with list views. When using textfields inside a tableview, you should always set the windowSoftInputMode to Ti.UI.Android.SOFT_INPUT_ADJUST_PAN (Like I have done in the test case above.  When the soft keyboard comes up, it causes the table view to resize, and lose focus.  It does not regain focus correctly after this.  The workaround is to use soft input adjust pan to prevent it from resizing.
   </li>
<li>Vishal Duggal 2013-04-17

   For editText cursor not being visible see
   <a href="http://stackoverflow.com/questions/7238450/set-edittext-cursor-color" rel="nofollow" target="_blank">http://stackoverflow.com/questions/7238450/set-edittext-cursor-color</a></li>
<li>Allen Yeung 2013-04-18

   This is native android behavior where the cursor color is automatically set by the Holo theme.  If you want to avoid this behavior, you would essentially need to adjust the theme.  
   
   You can still use the holo theme and explicitly adjust the cursor color to match the text color by changing the theme. To do this, you need to set the 'android:textCursorDrawable' property (this property is only available on API 12 and above) to '@null'. To have your own custom theme, create a the theme.xml file under platform/android/res/values/theme.xml
   
   The theme.xml file would look something like:
   
   <code><pre>
   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;resources&gt;
   	&lt;style name="Theme.Titanium" parent="android:Theme"&gt;
   		&lt;item name="android:windowBackground"&gt;@drawable/background&lt;/item&gt;
   	&lt;/style&gt;
   	&lt;style name="Theme.MyTheme" parent="@android:style/Theme.Holo"&gt;
   		&lt;item name="android:editTextStyle"&gt;@style/editText&lt;/item&gt;
   	&lt;/style&gt;
   	&lt;style name="editText" parent="@android:style/Widget.EditText"&gt;
   		&lt;item name="android:textCursorDrawable"&gt;@null&lt;/item&gt;
   	&lt;/style&gt;
   &lt;/resources&gt;
   </pre></code>
   
   NOTE: I still have a Theme.Titanium entry there since that is the default theme used for the main activity.  If you leave this out, you will get a build error.
   
   Then in your tiapp.xml you will need to add the following entry to specify that your application will use the theme that you created:
   
   <code><pre>
       &lt;android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt;
           &lt;manifest&gt;
               &lt;application android:theme="@style/Theme.MyTheme"/&gt;
               &lt;uses-sdk android:minSdkVersion="14" android:targetSdkVersion="14"/&gt;
           &lt;/manifest&gt;
       &lt;/android&gt;
   </pre></code>
   
   This workaround will allow your app to have a cursor that inherits the color of your text.  This will apply to all widgets in general if you plan on using the holo theme.  For example, you may want to do something similar with the picker if there is an issue with that.</li>
<li>Allen Yeung 2013-04-18

   Marking as invalid.  This is actually native android behavior, and developers should be using their own themes if they don't want the default holo theme.  If they want the holo theme, the theme.xml should be changed as mentioned to modify the holo theme.</li>
<li>Ivan Skugor 2014-01-19

   To hide title bar below <item name="android:windowBackground">@drawable/background</item> 
   
   add: <item name="android:windowNoTitle">true</item>
   
   
   (someone might find it useful :) )</li>
<li>Ivan Skugor 2014-03-31

   Hi.
   
   
   I found one issue with custom themes on Nexus 5 phone with Android 4.4.2 version. If text field's height is defined, text or cursor is not visible (actually, you can see one dot only). So, to see this issue, change original code:
   
   <code><pre>
   var pw = Ti.UI.createTextField({
       top : 20,
       left : 10,
       right : 10,
       height: 20, // this makes cursor disappear 
       passwordMask : true,
       backgroundColor : 'white'
   });
   </pre></code>
   
   
   and run code.
   
   
   
   Can this issue be reopened until some workaround is provided? Setting text field's height seems pretty common use case. Thanks!</li>
<li>Shannon Hicks 2014-03-31

    I suspect you don't see a cursor because the font is bigger than the field's hight... Can you try setting the font size to 12 or 13 (14 will be too big)?</li>
<li>Ivan Skugor 2014-04-01

    I tried that before but it didn't work. :(</li>
<li>Christofer Wesseling 2014-04-26

    i have the same issue. no workaround yet. That't painful because i wouldn't have the problem if i develop android native.
    so it could be an issue for TI.</li>
<li>Ingo Muschenetz 2014-07-23

    [~ivanskugor] is there anything special about your custom theme? Just want to make sure we have all the steps to reproduce.</li>
<li>Nikolai Derzhak 2014-07-23

    [~ingo], I am afraid Ivan will not reply, because his account has been migrated from lighthouse account and I had to fill my email in JIRA account. So I have got your question in email in result.</li>
<li>Ivan Skugor 2014-07-23

    I got email :)
    
    
    Here is whole theme:
    
    <code><pre>
    &lt;?xml version="1.0" encoding="utf-8"?&gt;
    &lt;resources&gt;
        &lt;style name="Theme.Titanium" parent="android:Theme"&gt;
            &lt;item name="android:windowBackground"&gt;@drawable/background&lt;/item&gt;
            &lt;item name="android:windowNoTitle"&gt;true&lt;/item&gt;
        &lt;/style&gt;
        &lt;style name="Theme.MyTheme" parent="@android:style/Theme.Holo"&gt;
            &lt;item name="android:editTextStyle"&gt;@style/editText&lt;/item&gt;
        &lt;/style&gt;
        &lt;style name="editText" parent="@android:style/Widget.EditText"&gt;
            &lt;item name="android:textCursorDrawable"&gt;@null&lt;/item&gt;
        &lt;/style&gt;
    &lt;/resources&gt;
    </pre></code></li>
<li>Allen Yeung 2014-07-23

    '20' for the height of a text field is too small to even see the text.  If you change it to something like 100, the cursor shows up fine.  Note that by default the cursor inherits the color from the theme, so I changed the color to 'black' so I could see the cursor better.
    
    I tried this on a Nexus 5 with 3.3.0.GA</li>
<li>Ivan Skugor 2014-07-24

    Hello.
    
    Can you explain why this works on every Android phone that I have (like 10 pieces)? It even works on Nexus 7 tablet and Nexus 5 emulator. The only device on which this doesn't work is Nexus 5.
    Are all other devices buggy?! :D
    
    
    Sorry, but your workaround is just unacceptable, I can't change text field's height to 4 times bigger size - it will look ridiculous!
    
    
    Why fontSize doesn't work? Why can't I change it so text fits to 20px height?
    
    
    I'm testing with 3.2.2.GA because 3.3.0.GA is buggy! I'll get to that when I catch some time :)
    
    
    Ivan</li>
<li>Ingo Muschenetz 2014-07-24

    Reopening issue.</li>
<li>Allen Yeung 2014-07-29

    After some investigation from Ivan (thanks for your help). It looks like the cause was related to <supports-screens android:anyDensity="false”/>.  In our docs we do mention setting this as the default which is a bug in the documentation.  We have a ticket open to fix this.  Otherwise, we don't really support the 'anydensity' value to be false since this is not recommended by google anyways: <a href="http://developer.android.com/guide/topics/manifest/supports-screens-element.html#any" rel="nofollow" target="_blank">http://developer.android.com/guide/topics/manifest/supports-screens-element.html#any</a>
    </li>
<li>Damiano Hernando Rodriguez 2014-08-29

    @Ivan Skugor
    Is there a workaround for this?
    I have AnyDensity=false in my TiApp.xml too.
    A first workaround for the cutted text is to set de height of the TextField to "Ti.UI.SIZE".
    But the cursor is not visibile with this fix.
    
    Do you have found any other way?</li>
<li>Ivan Skugor 2014-09-01

    Hi.
    
    
    Unfortunately I haven't found a workaround except changing anyDensity setting. That shouldn't be too hard to change, just make sure you use "dip" (density independent pixels) as default unit in tiapp.xml. That should solve lots of issues, you just need to be careful if you use platformWidth/Height (you'll need to make your own calculation by dividing that value with "logicalDensityFactor").
    
    
    
    Ivan</li>
<li>Louis Quaintance 2014-09-08

    Hi there,
    
    We're getting the cursor to display on 3.3 using the following code:
    
    <?xml version="1.0" encoding="utf-8"?>
    <resources>
        
        <style name="Theme.NoActionBar" parent="@style/Theme.AppCompat.Fullscreen">
           <item name="android:editTextStyle">@style/editText</item>
        </style>
        
        <style name="editText" parent="@android:style/Widget.EditText">
            <item name="android:textCursorDrawable">@null</item>
            <item name="android:textColor">#000000</item>
        </style>
        
    </resources>
    
    However it will not allow me to specify a drawable for the cursor.
    
    If I create a drawable in platform/android/res/drawable called cursor_drawable.xml
    
    <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>" android:shape="rectangle" >
        <size android:width="4dp" />
        <stroke android:color="@color/orange"/>
    </shape>
    
    And then create a color.xml with the orange defined.
    
    And then specify in the theme, the android:textCursorDrawable to be drawable/cursor_drawable then it does not appear.
    
    Am I doing something wrong?</li>
<li>Lee Morris 2017-03-31

    Closing ticket as fixed, if there are any problems, please file a new ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-13567.json">JSON Source</a></p>