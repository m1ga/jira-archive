---
title: "[TIMOB-13600] BlackBerry: JSON Parser is not parsing extended character like used in Arabic correctly"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2013-04-20T06:07:29.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>BlackBerry</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Russell McMahon</td></tr>
<tr><th>Assignee</th><td>Josh Roesslein</td></tr>
<tr><th>Created</th><td>2013-04-17T01:04:52.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-16T20:23:13.000+0000</td></tr>
</table>

<h3>Description</h3>

<code><pre>
var MyGlobalVars = {
token: null,
userid: null,
city: null
};

// create first window - login window -
// if success in login redirect to home window
var windowLogin = Ti.UI.createWindow({
backgroundColor : "#A8111B",
});
// create form login
var username = Ti.UI.createTextField({
color : '#336699',
top : 10,
width : 200,
textAlign : 'center',
height : 40,
hintText : 'اسم المستخدم'
});

var password = Ti.UI.createTextField({
color : '#336699',
top : 40,
width : 200,
height : 40,
textAlign : 'center',
passwordMask : true,
hintText : 'كلمة المرور'

});

var buttonLogin = Ti.UI.createButton({ title : 'تسجيل الدخول', textAlign : 'center', top : 90, height : 40, width : 100, right : 20 });

var buttonRegister = Ti.UI.createButton({ title : 'مستخدم جديد', textAlign : 'center', top : 130, height : 40, width : 100, right : 20 });

var buttonForget = Ti.UI.createButton({ title : 'نسيت كلمة المرور', textAlign : 'center', top : 170, width : 100, height : 40, right : 20 });

// redirect to show window on click
buttonRegister.addEventListener("click", function() { Titanium.include('ui/register.js'); });

// redirect to show window on click
buttonForget.addEventListener("click", function() { Titanium.include('ui/forget.js'); });

var loginReq = Titanium.Network.createHTTPClient();
buttonLogin.addEventListener('click', function(e) {

if (username.value != '' && password.value != '') {
loginReq.open("POST", "<a href="http://demoo.smaris.net/keftaltareq/user_json/login" rel="nofollow" target="_blank">http://demoo.smaris.net/keftaltareq/user_json/login</a>");
var params = { username : username.value, password : password.value };
loginReq.send(params);

} else { alert("username and password are required"); }

});

loginReq.onload = function() {

var json = this.responseText;
var response = JSON.parse(json);
if (response.success == 1) { //windowLogin.close() MyGlobalVars.token = response.token; MyGlobalVars.userid = response.id; Titanium.include('ui/index.js'); } else if (response.success == 2) { alert("خطأ باسم المستخدم أو كلمة المرور"); }

};

windowLogin.add(username);
windowLogin.add(password);
windowLogin.add(buttonLogin);
windowLogin.add(buttonRegister);
windowLogin.add(buttonForget);

windowLogin.open();

// and this is my code for data returned from server

openCityBtn.addEventListener('click', function(e) {
var getCity = Titanium.Network.createHTTPClient({
onerror : function(e) { Ti.API.debug(e.error); alert('حدث خطأ اثناء الاتصال'); },
timeout : 5000,
});

getCity.open('GET', '<a href="http://demoo.smaris.net/keftaltareq/user_json/city_blackberry/" rel="nofollow" target="_blank">http://demoo.smaris.net/keftaltareq/user_json/city_blackberry/</a>' + MyGlobalVars.userid + '/' + MyGlobalVars.token);
getCity.send();
getCity.onload = function() {
var json = JSON.parse(this.responseText);
dataArray = [];
for (var i = 0; i &lt; json.length; i++) {
var row = Ti.UI.createTableViewRow({ title : json[i].city_name_en });
dataArray.push(row);
};
tableX.setData(dataArray);
};

var view = Titanium.UI.createView({ backgroundColor : '#3D3D3D', borderColor : '#fff', borderWidth : 4, width : 200, top : 5, height : 150 });

var tableX = Titanium.UI.createTableView({ backgroundColor : 'transparent', separatorColor : 'black', textAlign : 'right', });

view.add(tableX);
winHome.add(view);

tableX.addEventListener('click', function(e) { view.hide(tableX); MyGlobalVars.city = e.rowData.title; });

});
</pre></code>

<h3>Comments</h3>

<ol>
<li>Josh Roesslein 2013-04-20

   I believe the issue was with TableViewRow.title not handling the unicode characters, not the JSON parsing.
   There is a fix that was just pushed that fixes the issue with "title".
   
   I am not able to run this sample since it requires credentials.
   A CI build should appear shortly [here](<a href="http://builds.appcelerator.com.s3.amazonaws.com/index.html#master)" rel="nofollow" target="_blank">http://builds.appcelerator.com.s3.amazonaws.com/index.html#master)</a> with this fix included. If you could verify the issue goes away the latest build. If the issue persists please re-open.</li>
<li>Josh Roesslein 2013-04-20

   Duplicate of TIMOB-13638.</li>
<li>Lee Morris 2017-03-16

   Closing ticket as BlackBerry is no longer supported by us.</li>
</ol>


<p><a href="/TIMOB/TIMOB-13600.json">JSON Source</a></p>