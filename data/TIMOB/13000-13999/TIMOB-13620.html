---
title: "[TIMOB-13620] Android: Proxies in modules are not disposed correctly"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-04-19T23:51:25.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.0, Release 3.1.0</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 08 Core, 2013 Sprint 08, Release 3.1.1, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>qe-closed-3.1.1</td></tr>
<tr><th>Reporter</th><td>Allen Yeung</td></tr>
<tr><th>Assignee</th><td>Josh Roesslein</td></tr>
<tr><th>Created</th><td>2013-04-18T21:37:01.000+0000</td></tr>
<tr><th>Updated</th><td>2013-06-07T16:46:03.000+0000</td></tr>
</table>

<h3>Description</h3>

The app.js in the example folder demonstrates the issue:
<h4>Unzip the module</h4>
<h4>Build the module ('ant')</h4>
<h4>Create a new Titanium application in Studio</h4>
<h4>Copy the app.js from the module's example folder into your application</h4>
<h4>Run the application</h4>
<h4>Notice that the label displays 'Jeff 555-1212'. The 'Jeff' comes from the propertyAccessor and the '555-1212' comes from the custom property.</h4>
<h4>Hit the Android Back button (the activity closes but the process is still active)</h4>
<h4>Tap on the application in the Android app launcher</h4>
<h4>Notice that the label displays 'undefined 555-1212'. You can also see the 'E/Proxy   ( 2221): Unable to lookup Proxy.prototype.getProperty' error message in the log.</h4>

For further weirdness, uncomment lines 29-31 in the app.js file and re-run steps 5-8 again. This time you will notice that everything works correctly. The only difference here is that a 2nd instance of the proxy is being created with a call from JS rather than the one that is being created internally.

A couple of observations:
The onStop and onDestroy methods are getting called when the activity closes (check the messages output to the log file)
The process is still active after closing the activity
On the 2nd launch of the main activity you will notice a log message that it is registering an existing module again even though the module was supposedly destroyed. Probably expected behavior, but perhaps not.
I've tried a number of different things but have not been able to change this behavior.  Any clues, suggestions, etc. are greatly appreciated.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-13620_37639/property.zip">property.zip</td></td><td>2013-04-18T21:37:01.000+0000</td><td>15040</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Josh Roesslein 2013-04-18

   Created [PR #4186](<a href="https://github.com/appcelerator/titanium_mobile/pull/4186)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4186)</a> for master.</li>
<li>Josh Roesslein 2013-05-16

   Created [PR #4280](<a href="https://github.com/appcelerator/titanium_mobile/pull/4280)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4280)</a> to backport fix into 3_1_X.</li>
<li>Federico Casali 2013-06-07

   Verified as fixed.
   
   Environment:
     Appcelerator Studio 3.1.1.201306061938
     Titanium SDK 3.1.1.v20130606121419
     CLI 3.1.1-cr
     Alloy 1.1.3-cr
     Titanium-Code-Processor 1.1.3-cr3
   
   Closing.
   
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-13620.json">JSON Source</a></p>