---
title: "[TIMOB-13628] Android Maps v2: Support the native zOrderOnTop option"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-05-08T17:53:28.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.0</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 22, 2013 Sprint 22 API, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>exalture, module_androidmapv2, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Jesper Jonsson</td></tr>
<tr><th>Assignee</th><td>Hieu Pham</td></tr>
<tr><th>Created</th><td>2013-04-19T15:01:52.000+0000</td></tr>
<tr><th>Updated</th><td>2014-05-12T10:40:19.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>

When the map is placed in a view hierarchy it can sometimes be placed below all views (even below the window background color). This happens for example when you animate the parent view position. But when placed in a quite large view hierarchy I've noted that it randomly can behave the same as described above. This can be prevented if the [zOrderOnTop](<a href="http://developer.android.com/reference/com/google/android/gms/maps/GoogleMapOptions.html#zOrderOnTop(boolean))" rel="nofollow" target="_blank">http://developer.android.com/reference/com/google/android/gms/maps/GoogleMapOptions.html#zOrderOnTop(boolean))</a> is set to true and the maps view will be placed above all other views in the Activity.


Run the code on 4.2.x device with Google Play installed.
<code><pre> 
var win = Ti.UI.createWindow({ 
   backgroundColor : 'transparent', 
   orientationModes : [Titanium.UI.PORTRAIT], 
   exitOnClose : true, 
   navBarHidden : true 
}); 
win.open(); 

var view2 = Ti.UI.createView({ 
width : Ti.UI.FILL, 
height : Ti.UI.FILL, 
backgroundColor : 'transparent' 
}); 

var view3 = Ti.UI.createView({ 
top : 0, 
left : 0, 
width : Ti.UI.FILL, 
height : 200, 
backgroundColor : 'yellow' 
}); 
var label = Ti.UI.createLabel({ 
color:'black', 
text: "I'm under the map, and should never be visible! But am I?", 
textAlign: Ti.UI.TEXT_ALIGNMENT_LEFT, 
font: { fontSize: 30 }, 
top: 0, 
left : 0 
}); 
view3.add(label); 
view2.add(view3); 

var MapModule = require('ti.map'); 
var mapview = MapModule.createView({ 
    mapType:MapModule.NORMAL_TYPE, 
    //zOrderOnTop: true 
}); 
view2.add(mapview); 

win.add(view2); 

setTimeout(function() 
{ 
var dialog = Ti.UI.createAlertDialog({ 
message: 'Going to animate, bye bye maps! :/', 
title: 'Notification', 
ok: 'Okay', 
}); 
dialog.addEventListener('click', function() 
{ 
view2.animate({ 
left : 200, 
duration : 150 
}); 
dialog.removeEventListener('click', arguments.callee); 
}); 
dialog.show(); 
}, 5000); 
</pre></code> 

1. Run the above code, click the alert after 5 seconds 
2. Uncomment zOrderOnTop line, repeat step 1. 

Fail case: yellow label on top of map 
Expected case: should not see yellow label.

<h3>Comments</h3>

<ol>
<li>Hieu Pham 2013-07-15

   PR: <a href="https://github.com/appcelerator/titanium_modules/pull/125" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_modules/pull/125</a></li>
<li>Hieu Pham 2013-09-02

   PR in new repo: <a href="https://github.com/appcelerator-modules/ti.map/pull/4" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/4</a></li>
<li>Ping Wang 2013-10-18

   The PR does not fix the original test case reliably. Closed the PR. We need more investigation.</li>
<li>Hieu Pham 2013-10-25

   Test case: 
   <code><pre>
   var MapModule = require("ti.map");
   var win = Titanium.UI.createWindow({
       backgroundColor : "white"
   });
    
   var mapContainer = Ti.UI.createView({
       id : 'mapContainer',
       top : "50%",
       width : "95%",
       bottom : "15dip",
       visible : true,
       layout : "vertical",
       backgroundImage : "/images/map_bg.png"
   });
   win.add(mapContainer);
   
   var mapview = MapModule.createView({
       mapType : MapModule.NORMAL_TYPE,
       region : {
           latitude : 33.74511,
           longitude : -84.38993,
           latitudeDelta : 0.01,
           longitudeDelta : 0.01
       },
       animate : true,
       regionFit : true,
       userLocation : true,
       top : "5dip",
       bottom : "10dp",
       width : "98%",
   });
    
   mapContainer.add(mapview);
   win.open();
   </pre></code>
   1. Run code on pre Jelly Bean device.
   2. With zOrderOnTop not set, you should see a black area where the map is for ~200ms before map renders.
   3. With zOrderOnTop set to true, you should NOT see the black area. You should NOT see myLocation button, as well as zoom buttons.</li>
<li>Farouk Mokrani 2014-05-12

   I have the same issue any solution for this problem ?</li>
</ol>


<p><a href="/TIMOB/TIMOB-13628.json">JSON Source</a></p>