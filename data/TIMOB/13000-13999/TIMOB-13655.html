---
title: "[TIMOB-13655] Android: Photo with camera overlay not uploading to ACS"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2013-04-29T23:13:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.0, Release 3.1.0</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 09 API, 2013 Sprint 09</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>ipass1, regression, triage</td></tr>
<tr><th>Reporter</th><td>Freddy Montano</td></tr>
<tr><th>Assignee</th><td>Ping Wang</td></tr>
<tr><th>Created</th><td>2013-04-15T17:18:25.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-28T20:32:01.000+0000</td></tr>
</table>

<h3>Description</h3>

When you use an overlay to take a picture using Ti.Media.showCamera, the resulting photo can't be upload to ACS. This is the debug message I get: <a href="http://pastebin.com/3ENbdsW9." rel="nofollow" target="_blank">http://pastebin.com/3ENbdsW9.</a> It works if you use 2.1.4

To replicate, just create a new Titanium project (no alloy) with ACS enabled, and then replace app.js with the attached app.js.

Open the app, and click on the button Take Photo With Overlay.

If you build the app using SDK 2.1.4 it works just fine.
If you build with any SDK > 3.0 you get an error and a debug message like the one above.


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-13655_37485/app.js">app.js</td></td><td>2013-04-15T17:18:25.000+0000</td><td>3566</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-13655_37752/cameraOverlayFailure300GA">cameraOverlayFailure300GA</td></td><td>2013-04-23T18:27:04.000+0000</td><td>19243</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-13655_37753/cameraOverlayFailure310GA">cameraOverlayFailure310GA</td></td><td>2013-04-23T18:27:04.000+0000</td><td>22783</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Eric Merriman  2013-04-23

   Mukesh investigated this from the ACS side, and it seems ok there (fails, but not ACS), but the image is empty. I will look now at the SDK side to see if the image is not formed correctly.</li>
<li>Eric Merriman  2013-04-23

   Verified failure with 3.0.0.GA and 3.1.0.GA.
   Does not occur on 2.1.4 GA, does not occur on iOS.
   
   While clicking the "take photo (no overlay)" works as expected, "with overlay" fails when clicked.
   
   Attaching logs for both SDKs.</li>
<li>Ping Wang 2013-04-25

   Hi Eric, can you add "saveToPhotoGallery: true" to the options which is used to showCamera()? A big change ([PR#2475| <a href="https://github.com/appcelerator/titanium_mobile/pull/2475" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2475</a>]) in camera from 2.1.4 to 3.0 is we don't write the photo to the SD card any more if using overlay camera and setting saveToPhotoGalley to false.</li>
<li>Ping Wang 2013-04-29

   Just tested the attached the test case "with overlay". It fails no matter setting saveToPhotoGallery to true or false. This is because the e.media in the callback of showCamera() is a non-file blob type on 3.0 or above while it is a file blob type before 3.0. 
   Based on the [Cloud doc](<a href="http://docs.appcelerator.com/cloud/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/cloud/latest/#</a>!/api/Photos-method-create), the "photo" parameter in the cloud.Photos.create() method should be a file not a blob. Don't think the attached test case is a valid test. Resolve the ticket as Invalid.</li>
<li>Aaron K. Saunders 2013-05-02

   We were told this was an issue and would be fixed, now this issues is closed as not a bug with no explanation or workaround
   
   To me it is pretty simple, code worked in previous releaseâ€¦ stopped working in new release.
   
   Either it is a bug OR the documentation should be provided to tell us the correct implementation, but to just close the bug when we have been waiting for a solution is completely unacceptable from a support perspective IMHO.
   
   Can we at least have a more appropriate response?
   </li>
<li>Ping Wang 2013-05-02

   There used to have a security issue on the Titanium Android Camera, which is described in TIMOB-9580. We fixed that on 3.0.0 and the fix required the change of the blob type that is returned from the camera.
   A workaround for the attached app is to write the blob to a file and then use the file as the parameter to call cloud.Photos.create().
   BTW, from our [doc](<a href="http://docs.appcelerator.com/cloud/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/cloud/latest/#</a>!/api/Photos-method-create), the parameter "photo" has to be a binary file.
   {quote}
   photo : FileUpload REQUIRED
   The attached binary file.
   {quote}</li>
<li>Eric Merriman  2017-03-28

   Closing</li>
</ol>


<p><a href="/TIMOB/TIMOB-13655.json">JSON Source</a></p>