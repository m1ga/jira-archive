---
title: "[TIMOB-13659] iOS: Date() value gets changed when passed via events"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>reprod</td></tr>
<tr><th>Reporter</th><td>Joel Margolese</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2013-04-23T18:39:20.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:03:23.000+0000</td></tr>
</table>

<h3>Description</h3>

*Problem description*
I have built a simple Alloy test case that passes a date object between two controllers by firing Ti.App.fireEvent. Tested in iOS 6.1 simulator on Mountain Lion. Titantium 3.1.0.GA. But this occurs with 3.0.2.GA as well.

*Test case*
<code><pre>
function buttonClick() {
	var time = new Date('4/21/2013 11:45 am');

	var argInfo = {
		eventTime : time
	};
	Ti.API.info('starting time: ' + JSON.stringify(argInfo));

	Ti.App.fireEvent("testEvent", argInfo);
}

Ti.App.addEventListener('testEvent', function(info) {
	Ti.API.info(" in event time: " + info.eventTime.toString());
});

var win = Ti.UI.createWindow({
	backgroundColor : "#FFF"
});

var button = Titanium.UI.createButton({
	title : 'Fire Event',
	top : 10,
	width : 100,
	height : 50
});
button.addEventListener('click', buttonClick);

win.add(button);
win.open();
</pre></code>

*Console output*
<code><pre>
[INFO] starting time: {"eventTime":"2013-04-21T15:45:00.000Z"}
[INFO]  in event time: Sun Apr 21 2013 11:46:02 GMT-0400 (EDT)
</pre></code>

*Note*
The time prior to firing the event is 15:45, but when it arrives the minutes are now: 46.02
I presume this is a problem with the serializing of the date object.
Perhaps Data() objects are not legal for events, but they used to work, this is old code that has now stopped working.
If they are not legal, Titanium should throw an error or it should be documented.

*Workaround*
Pass the date as:
<code><pre>newDate().toString()</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-13659_37754/test.zip">test.zip</td></td><td>2013-04-23T18:42:08.000+0000</td><td>8914514</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Joel Margolese 2013-04-23

   deleted build folder, not sure why, but it was 90MB.</li>
<li>Daniel Sefton 2013-04-23

   Tested and sort of confirmed on iOS 6 simulator, Ti SDK 3.1 GA. This is the output I get:
   
   <code><pre>[INFO] :   starting time: {"eventTime":"2013-04-21T18:45:00.000Z"}
   [INFO] :   in event time: Sun Apr 21 2013 11:45:10 GMT-0700 (PDT)</pre></code>
   
   So there's about 10 seconds difference here...</li>
<li>Lee Morris 2017-07-10

   I am able to reproduce this issue with the following environment;
   iPhone 6 (10.0)
   Studio 4.9.0.201705302345
   Ti SDK 6.1.1 GA
   Appc NPM 4.2.9
   Appc CLI 6.2.2
   Ti CLI 5.0.14
   Alloy 1.9.11
   Xcode 8.2 (8C38)
   Node v4.8.2
   Java 1.8.0_131</li>
</ol>


<p><a href="/TIMOB/TIMOB-13659.json">JSON Source</a></p>