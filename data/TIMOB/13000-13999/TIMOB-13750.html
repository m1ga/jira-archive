---
title: "[TIMOB-13750] Android: Google Map v2 Module - Current Location button doesn't work. Nothing happened."
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2017-07-21T05:38:48.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, mapv2</td></tr>
<tr><th>Reporter</th><td>Jong Eun Lee</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2013-04-28T15:24:57.000+0000</td></tr>
<tr><th>Updated</th><td>2017-07-21T05:38:53.000+0000</td></tr>
</table>

<h3>Description</h3>

[Android Google Map v2 Module
<a href="https://github.com/appcelerator/titanium_modules/tree/master/map" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_modules/tree/master/map</a>].
If I use the Run command from Studio to build and example application for an Android Device, Current Location button doesn't work. Nothing happened.

expected result : 
After touch current location button on right top map, we can see current position on the map.


tested source (example/app.js in module):
<code><pre>

var MapModule = require('ti.map');



var win = Ti.UI.createWindow();
var table = Ti.UI.createTableView();
var tableData = [];

var multiMapRow = Ti.UI.createTableViewRow({title: 'Multi Map'});
tableData.push(multiMapRow);
multiMapRow.addEventListener('click', function(e) {
   multiMapTest();
});


var annotationRow = Ti.UI.createTableViewRow({title:'AnnotationTest'});
tableData.push(annotationRow);
annotationRow.addEventListener('click', function(e) {
   annotationTest();
});


var routeRow = Ti.UI.createTableViewRow({title:'Routes Test'});
tableData.push(routeRow);
routeRow.addEventListener('click', function(e) {
   routeTest();
});


table.setData(tableData);
win.add(table);
win.open();




/************************************************************************************/
/************************************************************************************/
									//Multi Maps
/************************************************************************************/
function multiMapTest() {
var win = Ti.UI.createWindow({fullscreen: false});

var map1 = MapModule.createView({
	userLocation: true,
	mapType: MapModule.NORMAL_TYPE,
	animate: true,
	region: {latitude: -33.87365, longitude: 151.20689, latitudeDelta: 0.1, longitudeDelta: 0.1 }, //Sydney
	height: '50%',
	top: 0,
	left: 0,
	width: '50%'
});
var map2 = MapModule.createView({
	userLocation: true,
	mapType: MapModule.NORMAL_TYPE,
	animate: true,
	region: {latitude: -33.87365, longitude: 151.20689, latitudeDelta: 0.1, longitudeDelta: 0.1 }, //Sydney
	height: '50%',
	top: 0,
	right: 0,
	width: '50%'
});
var map3 = MapModule.createView({
	userLocation: true,
	mapType: MapModule.NORMAL_TYPE,
	animate: true,
	region: {latitude: -33.87365, longitude: 151.20689, latitudeDelta: 0.1, longitudeDelta: 0.1 }, //Sydney
	height: '50%',
	bottom: 0,
	left: 0,
	width: '50%'
});
var map4 = MapModule.createView({
	userLocation: true,
	mapType: MapModule.NORMAL_TYPE,
	animate: true,
	region: {latitude: -33.87365, longitude: 151.20689, latitudeDelta: 0.1, longitudeDelta: 0.1 }, //Sydney
	height: '50%',
	bottom: 0,
	right: 0,
	width: '50%'
});

win.add(map1);
win.add(map2);
win.add(map3);
win.add(map4);
win.open();
}


/************************************************************************************/
/************************************************************************************/
									//ANNOTATIONS
/************************************************************************************/
function annotationTest() {
var win = Ti.UI.createWindow({fullscreen: false});
var anno = MapModule.createAnnotation({latitude: -33.87365, image: 'map_pin.png', longitude: 151.20689, title: "Sydney", subtitle: "Sydney is quite chill", draggable: true});
var anno2 = MapModule.createAnnotation({latitude: -33.86365, pincolor: MapModule.ANNOTATION_BLUE, longitude: 151.21689, title: "Anno2", subtitle: "This is anno2", draggable: true});
var anno3 = MapModule.createAnnotation({latitude: -33.85365, longitude: 151.20689, title: "Anno3", subtitle: "This is anno3", draggable: false});
var anno4 = MapModule.createAnnotation({latitude: -33.86365, longitude: 151.22689, title: "Anno4", subtitle: "This is anno4", draggable: true});

Ti.API.info ("Latitude:" + anno.latitude);
Ti.API.info ("Title:" + anno.title);

var map = MapModule.createView({
	userLocation: true,
	mapType: MapModule.NORMAL_TYPE,
	animate: true,
	annotations: [anno, anno2, anno4],
	region: {latitude: -33.87365, longitude: 151.20689, latitudeDelta: 0.1, longitudeDelta: 0.1 }, //Sydney
	top: '30%'
});
Ti.API.info("userLocation: " + map.userLocation);
win.add(map);

map.addEventListener('click', function(e) {
	Ti.API.info("Latitude: " + e.latitude);
	Ti.API.info("Source: " + e.clicksource);
});
var button = Ti.UI.createButton({top: 0, left: 0, title: "Go Mt. View"});
button.addEventListener('click', function(e) {
	map.region = {latitude: 37.3689, longitude: -122.0353, latitudeDelta: 0.1, longitudeDelta: 0.1 }; //Mountain View
});

var button2 = Ti.UI.createButton({top: 0, right: 0, title: "add anno3"});
button2.addEventListener('click', function(e) {
	map.addAnnotation(anno3);
});

var button3 = Ti.UI.createButton({top: 0, title: "rm anno3"});
button3.addEventListener('click', function(e) {
	map.removeAnnotation(anno3);
});

var button4 = Ti.UI.createButton({top: '10%', title: "rm all"});
button4.addEventListener('click', function(e) {
	map.removeAllAnnotations();
});

var button5 = Ti.UI.createButton({top: '10%', left: 0, title: "remove annos"});
button5.addEventListener('click', function(e) {
	Ti.API.info(anno.getTitle());
	map.removeAnnotations(["Sydney", anno2]);
});

var button6 = Ti.UI.createButton({top: '10%', right: 0, title: "select anno2"});
button6.addEventListener('click', function(e) {
	map.selectAnnotation(anno2);
});

var button7 = Ti.UI.createButton({top: '20%', left: 0, title: "desel anno2"});
button7.addEventListener('click', function(e) {
	map.deselectAnnotation(anno2);
});

var button8 = Ti.UI.createButton({top: '20%', right: 0, title: "modify anno2"});
button8.addEventListener('click', function(e) {
	anno2.title = "Hello";
	anno2.subtitle = "Hi there.";
	anno2.longitude = 151.27689;
});

win.add(button);
win.add(button2);
win.add(button3);
win.add(button4);
win.add(button5);
win.add(button6);
win.add(button7);
win.add(button8);
win.open();
}

/********************************************************************************/
							//Routes
/********************************************************************************/
function routeTest() {

var win = Ti.UI.createWindow({fullscreen: false});
var map = MapModule.createView({
	userLocation: true,
	mapType: MapModule.NORMAL_TYPE,
	animate: true,
	region: {latitude: -33.87365, longitude: 151.20689, latitudeDelta: 0.02, longitudeDelta: 0.02 }, //Sydney
	top: '30%'
});
win.add(map);

var route1 = [{latitude: -33.87365, longitude: 151.20689}, {latitude: -33.87469, longitude: 151.20689}, {latitude: -33.87375, longitude: 151.20589}];
var route2 = [{latitude: -33.87565, longitude: 151.20789}, {latitude: -33.87469, longitude: 151.20689}, {latitude: -33.86375, longitude: 151.20589}];

var route = MapModule.createRoute({
    points: route1,
    color: "blue",
    width: 5.0
});

map.addRoute(route);

var button = Ti.UI.createButton({top: 0, left: 0, title: "+1 width"});
var w = 5.0;
button.addEventListener('click', function(e) {
	route.width = w + 1.0;
	w = w + 1.0;
});

var button2 = Ti.UI.createButton({top: 0, title: "change color"});
button2.addEventListener('click', function(e) {
	route.color = 'red';
});

var button3 = Ti.UI.createButton({top: 0, right: 0, title: "change routes"});
button3.addEventListener('click', function(e) {
	route.points = route2;
});

var button4 = Ti.UI.createButton({top: '10%', title: "remove route"});
button4.addEventListener('click', function(e) {
	map.removeRoute(route);
});

var button5 = Ti.UI.createButton({top: '10%', left: 0, title: "add route"});
button5.addEventListener('click', function(e) {
	map.addRoute(route);
});

win.add(button);
win.add(button2);
win.add(button3);
win.add(button4);
win.add(button5);
win.open();
}
</pre></code> 


tiapp.xml
<code><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ti:app xmlns:ti="<a href="http://ti.appcelerator.org" rel="nofollow" target="_blank">http://ti.appcelerator.org</a>"&gt;
    &lt;id&gt;net.codjong.sandbox&lt;/id&gt;
    &lt;name&gt;Sandbox&lt;/name&gt;
    &lt;version&gt;1.0&lt;/version&gt;
    &lt;publisher&gt;yomybaby&lt;/publisher&gt;
    &lt;url&gt;http://&lt;/url&gt;
    &lt;description&gt;not specified&lt;/description&gt;
    &lt;copyright&gt;2013 by yomybaby&lt;/copyright&gt;
    &lt;icon&gt;appicon.png&lt;/icon&gt;
    &lt;persistent-wifi&gt;false&lt;/persistent-wifi&gt;
    &lt;prerendered-icon&gt;false&lt;/prerendered-icon&gt;
    &lt;statusbar-style&gt;default&lt;/statusbar-style&gt;
    &lt;statusbar-hidden&gt;false&lt;/statusbar-hidden&gt;
    &lt;fullscreen&gt;false&lt;/fullscreen&gt;
    &lt;navbar-hidden&gt;false&lt;/navbar-hidden&gt;
    &lt;analytics&gt;true&lt;/analytics&gt;
    &lt;guid&gt;0f53e3ab-471e-4e0d-bf6a-34fdc57d108b&lt;/guid&gt;
    &lt;property name="ti.ui.defaultunit" type="string"&gt;system&lt;/property&gt;
    &lt;iphone&gt;
        &lt;orientations device="iphone"&gt;
            &lt;orientation&gt;Ti.UI.PORTRAIT&lt;/orientation&gt;
        &lt;/orientations&gt;
        &lt;orientations device="ipad"&gt;
            &lt;orientation&gt;Ti.UI.PORTRAIT&lt;/orientation&gt;
            &lt;orientation&gt;Ti.UI.UPSIDE_PORTRAIT&lt;/orientation&gt;
            &lt;orientation&gt;Ti.UI.LANDSCAPE_LEFT&lt;/orientation&gt;
            &lt;orientation&gt;Ti.UI.LANDSCAPE_RIGHT&lt;/orientation&gt;
        &lt;/orientations&gt;
    &lt;/iphone&gt;
    &lt;android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt;
        &lt;manifest&gt;
            &lt;!-- Allows the API to download data from Google Map servers --&gt;
            &lt;uses-permission android:name="android.permission.INTERNET"/&gt;
            &lt;!-- Allows the API to cache data --&gt;
            &lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;
            &lt;!-- Use GPS for device location --&gt;
            &lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/&gt;
            &lt;!-- Use Wi-Fi or mobile connection for device location --&gt;
            &lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/&gt;
            &lt;!-- Allows the API to access Google web-based services --&gt;
            &lt;uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/&gt;
            &lt;!-- Specify OpenGL ES 2.0 as a requirement --&gt;
            &lt;uses-feature android:glEsVersion="0x00020000" android:required="true"/&gt;
            &lt;!-- Replace &lt;com.domain.appid&gt; with your application ID --&gt;
            &lt;uses-permission android:name="net.codjong.sandbox.permission.MAPS_RECEIVE"/&gt;
            &lt;permission
                android:name="net.codjong.sandbox.permission.MAPS_RECEIVE" android:protectionLevel="signature"/&gt;
                
            
            &lt;application&gt;
                &lt;!-- Replace "PASTE YOUR GOOGLE MAPS API KEY HERE" with the Google API key you obtained --&gt;
                &lt;!-- for my security, jus replace with ---- --&gt;
                &lt;meta-data
                    android:name="com.google.android.maps.v2.API_KEY" android:value="-----------"/&gt;
            &lt;/application&gt;
            
             
        &lt;/manifest&gt;
    &lt;/android&gt;
    &lt;mobileweb&gt;
        &lt;precache/&gt;
        &lt;splash&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
            &lt;inline-css-images&gt;true&lt;/inline-css-images&gt;
        &lt;/splash&gt;
        &lt;theme&gt;default&lt;/theme&gt;
    &lt;/mobileweb&gt;
    &lt;modules&gt;
        &lt;module platform="android"&gt;ti.map&lt;/module&gt;
    &lt;/modules&gt;
    &lt;deployment-targets&gt;
        &lt;target device="blackberry"&gt;false&lt;/target&gt;
        &lt;target device="android"&gt;true&lt;/target&gt;
        &lt;target device="ipad"&gt;true&lt;/target&gt;
        &lt;target device="iphone"&gt;true&lt;/target&gt;
        &lt;target device="mobileweb"&gt;true&lt;/target&gt;
        &lt;target device="tizen"&gt;false&lt;/target&gt;
    &lt;/deployment-targets&gt;
    &lt;sdk-version&gt;3.1.0.GA&lt;/sdk-version&gt;
&lt;/ti:app&gt;

</pre></code>

<h3>Comments</h3>

<ol>
<li>Eduardo Gomez 2013-05-01

   JongEun Lee,
   
   Thanks for submit this report. What Android OS was this tested on?
   
   Just to make sure I'm on the same page: is the "Current Location button" the my-location button of a Map?
   
   e.g. <a href="http://developer.android.com/reference/com/google/android/gms/maps/UiSettings.html#isMyLocationButtonEnabled()" rel="nofollow" target="_blank">http://developer.android.com/reference/com/google/android/gms/maps/UiSettings.html#isMyLocationButtonEnabled()</a>
   
   It should be reproducible either MultiMap, AnnotationTest or Routes Test snippet but if you can confirm reproducible steps will be quicker to replicate on our end, thanks again. </li>
<li>Jong Eun Lee 2013-05-02

   Hi Eduardo Gomez,
   
   <h4>Create New Mobile Project on Titanium Studio</h4>
   <h4>Select Classic templates, Single Window Application</h4>
   <h4>titanium SDK Version 3.1.0GA, app id : com.test.mapv2, click finish.</h4>
   <h4>Download ti.map-android-2.1.0.zip from <a href="https://github.com/appcelerator/titanium_modules/blob/master/map/mobile/android/dist/ti.map-android-2.1.0.zip" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_modules/blob/master/map/mobile/android/dist/ti.map-android-2.1.0.zip</a> </h4>
   <h4>copy zip file to Project Root</h4>
   <h4>edit tiapp.xml</h4>
   <code><pre>
   &lt;android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt;
       &lt;manifest&gt;
           &lt;!-- Allows the API to download data from Google Map servers --&gt;
           &lt;uses-permission android:name="android.permission.INTERNET"/&gt;
           &lt;!-- Allows the API to cache data --&gt;
           &lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;  
           &lt;!-- Use GPS for device location --&gt;
           &lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/&gt;
           &lt;!-- Use Wi-Fi or mobile connection for device location --&gt;
           &lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/&gt;
           &lt;!-- Allows the API to access Google web-based services --&gt;
           &lt;uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/&gt;
           &lt;!-- Specify OpenGL ES 2.0 as a requirement --&gt;
           &lt;uses-feature android:glEsVersion="0x00020000" android:required="true"/&gt;
           &lt;!-- Replace &lt;com.domain.appid&gt; with your application ID --&gt;
           &lt;uses-permission android:name="com.test.mapv2.permission.MAPS_RECEIVE"/&gt;
           &lt;permission android:name="com.test.mapv2.permission.MAPS_RECEIVE" android:protectionLevel="signature"/&gt;
           &lt;application&gt;
               &lt;!-- Replace "PASTE YOUR GOOGLE MAPS API KEY HERE" with the Google API key you obtained --&gt;
               &lt;meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="AIzaSyArH9AKXlck-Mqpb75ibER2AqenPgxNoF8"/&gt;
           &lt;/application&gt;
       &lt;/manifest&gt;
   &lt;/android&gt;
   </pre></code>
   <h4>copy & past  app.js from <a href="https://github.com/appcelerator/titanium_modules/blob/master/map/mobile/android/example/app.js" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_modules/blob/master/map/mobile/android/example/app.js</a> to Resource folder.</h4>
   <h4> On Titanium Studio, click Run - android Device.</h4>
   
   *Result*
   Everything works except user-location(my location) Button.
   When I click location button on MultiMap, AnnotationTest or Routes Test snippe, nothing happened.
   Check this snapshot : <a href="http://cl.ly/image/2H3N292D2q2d" rel="nofollow" target="_blank">http://cl.ly/image/2H3N292D2q2d</a> 
   Project Files : <a href="http://cl.ly/3a200y332O3j" rel="nofollow" target="_blank">http://cl.ly/3a200y332O3j</a>
   
   - Studio Preference Android SDK : Google API (Android 4.1.2) [armeabi-v7a]
   - Test Phone : Nexus S (4.1.1)
   
   I hope that this comment helps to fix problem.
   Thanks.</li>
<li>Jong Eun Lee 2013-05-03

   Oops. It's work properly today. I don't know why. (I didn't build today. It's yesterday version. same phone, same app, same internet connection)  :(</li>
<li>Eric Merriman  2017-07-21

   Going to close this as unable to reproduce. If it still occurs, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-13750.json">JSON Source</a></p>