---
title: "[TIMOB-13815] Blackberry: Can't identify functions via JS on Titanium proxy objects"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-05-31T23:09:54.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.0</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 11 BB, 2013 Sprint 11, Release 3.2.0</td></tr>
<tr><th>Components</th><td>BlackBerry</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Josh Roesslein</td></tr>
<tr><th>Created</th><td>2013-05-10T15:19:18.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-19T12:43:59.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>problem</h4>

When creating runtime unit tests for Alloy, I have a common expectation that I can identify an object as a Titanium proxy, and in certain cases can tell (roughly) what type of component that proxy is. The very basic code for this is as below:

<code><pre>
// using a recent underscore.js
var _ = require('underscore')._

var someObject = Ti.UI.createWindow();

// (roughly) identify a Ti.UI.Window
if (_.isFunction(someObject.open)) {
    // this and other criteria ID this object as a Ti.UI.Window
}
</pre></code>

The above code successfully identifies the 2 conditions on iOS, Android, and Mobileweb. On Blackberry though the conditions always return false. This has the dual problem of introducing a parity issue between BB and the other platforms, and it also breaks many of Alloy's runtime unit tests, making it very difficult to reliably test Blackberry builds.

<h4>expected</h4>

Blackberry should behave as the other platforms and return true for the function-based Titanium proxy checks.

<h3>Comments</h3>

<ol>
<li>Josh Roesslein 2013-05-10

   applyProperties is not implemented on BlackBerry right now, so it will be undefined.
   addEventListener might be a better choice for detecting proxies at this moment for all platforms.
   
   We could probably implement this method (or at least stub it out) on BlackBerry as well
   which can be our action item for this ticket.</li>
<li>Tony Lukasavage 2013-05-10

   Josh, this doesn't explain why it returns false though when I do isFunction() on a Window's open() function.</li>
<li>Josh Roesslein 2013-05-10

   Looked into the typeof check of window.open() and it seems we are just returning a
   callable object rather than a normal function object instance. This is wrong and something
   we should address.</li>
<li>Tony Lukasavage 2013-05-10

   thanks for digging in so quickly josh, much appreciated</li>
<li>Josh Roesslein 2013-05-20

   <h4>Test Case</h4>
   <code><pre>
   var win = Ti.UI.createWindow();
   Ti.API.info('typeof win.open = ' + typeof(win.open));
   </pre></code>
   
   Expected: This log statement should be printed: "typeof win.open = function"</li>
<li>Josh Roesslein 2013-05-20

   Created pull request [#43](<a href="https://github.com/appcelerator/titanium_mobile_blackberry/pull/43)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_blackberry/pull/43)</a> for master.</li>
<li>Samuel Dowse 2013-11-13

   Verified fixed on:
   Mac OSX 10.9 Mavericks
   Titanium Studio, build: 3.2.0.201311122225
   Titanium SDK, build: 3.2.0.v20131113094843
   CLI: 3.2.0
   Alloy: 1.3.0
   BlackBerry Simulator: 10.2.0.1791
   
   BlackBerry identifies functions via JavaScript using Test Case provided in comments.
   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-13815.json">JSON Source</a></p>