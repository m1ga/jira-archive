---
title: "[TIMOB-13869] CLI: Version in tiapp.xml is stripped to a maximum of 3 dot separated groups"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2017-03-30T21:22:15.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.0.2, Release 3.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>CLI</td></tr>
<tr><th>Labels</th><td>ft</td></tr>
<tr><th>Reporter</th><td>Mihai Bojin</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2013-05-15T11:36:31.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-30T21:23:07.000+0000</td></tr>
</table>

<h3>Description</h3>

If specifying a version including a build number as well, ie in tiapp.xml:
<code><pre><version>1.2.3.1000</version></pre></code>

When building the project with 'titanium build', the Info.plist that gets generated will only contain a maximum of 3 groups, ie:
<code><pre><key>CFBundleShortVersionString</key>
<string>1.2.3</string>
<key>CFBundleVersion</key>
<string>1.2.3</string></pre></code>

In fact the resulting plist should contain something like:
<code><pre><key>CFBundleShortVersionString</key>
<string>1.2.3</string>
<key>CFBundleVersion</key>
<string>1.2.3.1000</string></pre></code>

This is useful to identify the build number in the final installed app.

This can be fixed in: iphone/cli/commands/_build.js
<code><pre>plist.CFBundleVersion = appc.version.format(this.tiapp.version, 3, 3);</pre></code>

should in fact be:
<code><pre>plist.CFBundleVersion = appc.version.format(this.tiapp.version, 3, 4);</pre></code>

<h3>Comments</h3>

<ol>
<li>Chris Barber 2013-06-05

   @Mihai, we strip the version to 3 numbers based on the requirements defined by Apple. They explicitly state:
   
   {quote}
   The build version number should be a string comprised of three non-negative, period-separated integers with the first integer being greater than zero. The string should only contain numeric (0-9) and period (.) characters. Leading zeros are truncated from each integer and will be ignored (that is, 1.02.3 is equavalent to 1.2.3). This key is not localizable.
   {quote}
   
   Link: <a href="https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-102364-TPXREF106" rel="nofollow" target="_blank">https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-102364-TPXREF106</a>
   
   I could add a CLI config setting that allows you to override this or possibly just allow it for non-distribution/production builds, but I guess I don't fully understand why it matters setting it in the CFBundleVersion. You can set whatever version you want in the tiapp.xml and it'll show up identically in the Ti.app.version property.</li>
<li>Ingo Muschenetz 2013-10-31

   Awaiting better guidance on how to solve this. Bumping to 3.2.1.</li>
<li>Ingo Muschenetz 2014-04-28

   Out of bandwidth for 3.3.0. Bumping to next version.</li>
<li>Ingo Muschenetz 2014-08-12

   [~cbarber] believes this might be fixed with 3.3.0. Can we confirm?</li>
<li>Tim Poulsen 2014-08-20

   With 3.3.0.GA, the CFBundleVersion preserves the four version parts. Here's what I did:
   
   1. Used <code>ti create</code> to create a new Classic project
   2. Edited the tiapp.xml to set version number to 1.2.3.1000
   3. Built for the iOS simulator
   4. Opened build/iphone/Info.plist, which shows:
   
   <code><pre>
   <key>CFBundleVersion</key>
   <string>1.2.3.1000</string>
   <key>CFBundleShortVersionString</key>
   <string>1.2.3</string>
   </pre></code>
   
   </li>
<li>Lee Morris 2017-03-30

   Closing ticket as I am unable to reproduce the issue.</li>
</ol>


<p><a href="/TIMOB/TIMOB-13869.json">JSON Source</a></p>