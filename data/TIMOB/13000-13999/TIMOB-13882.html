---
title: "[TIMOB-13882] iOS: When dynamically adding route points to a map over time causes app to crash "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2017-06-22T20:04:44.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Paras Mishra</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2013-05-16T11:45:25.000+0000</td></tr>
<tr><th>Updated</th><td>2017-06-22T20:04:44.000+0000</td></tr>
</table>

<h3>Description</h3>

iOS: When dynamically adding route points to a map over time causes app to crash 

Steps to reproduce:
1. Run the following app.
<code><pre>
                var win1 = Titanium.UI.createWindow({  
                 title:'window 1',
                 backgroundColor:'#fff'
                  });

 
		var maproute = {
		    name : 'runtrackerroute',
		    points : [{
		        latitude : 42.3353,
		        longitude : -71.1715
		    }, {
		        latitude : 42.3355,
		        longitude : -71.1725
		    }, {
		        latitude : 42.3359,
		        longitude : -71.1735
		    }],
		    color : 'blue',
		    width : 4
		};
		 
		var map = Titanium.Map.createView({
		    mapType : Titanium.Map.STANDARD_TYPE,
		    region : {
		        latitude : 42.3366,
		        longitude : -71.1689,
		        latitudeDelta : 0.01,
		        longitudeDelta : 0.01
		    }
		});
		map.addRoute(maproute);
		 
		function UpdateMapRoute(lat, lon)
		{
		    //remove route
		    map.removeRoute(maproute);
		 
		    //add new points
		    maproute.points.push({
		        'latitude' : lat,
		        'longitude' : lon
		    });
		 
		    //add route
		    map.addRoute(maproute);
		     
		    map.setLocation({
		        latitude : lat,
		        longitude : lon,
		        animate : true,
		        latitudeDelta : 0.001,
		        longitudeDelta : 0.004
		    });
		 
		}
		 
		var lat = 42.3359;
		var lon = -71.1735;
		 
		setInterval(function(){
		    UpdateMapRoute(lat,lon);
		    lat = lat + .002;
		    lon = lon + .002;
		},500);
		 
		 
		 
		win1.add(map);
                win1.open();
</pre></code>

Expected:
App should not crash. It should display a map and the map should keep on adding route points.

Actual:
App crashes on execution.
		

<h3>Comments</h3>

<ol>
<li>Lee Morris 2017-06-22

   I am unable to reproduce this issue with the following environment;
   iPhone 7 (10.2)
   Studio 4.9.0.201705302345
   Ti SDK 6.1.1.v20170620103414
   Appc NPM 4.2.9
   Appc CLI 6.2.1
   Ti CLI 5.0.13
   Alloy 1.9.11
   Arrow 2.0.0
   Xcode 8.2 (8C38)
   Node v4.8.2
   Java 1.8.0_131</li>
</ol>


<p><a href="/TIMOB/TIMOB-13882.json">JSON Source</a></p>