---
title: "[TIMOB-13930] Android: HttpClient calls onerror instead of onload if autoRedirect is set to false"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.1.0, Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>parity</td></tr>
<tr><th>Reporter</th><td>Nasif</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2013-04-25T08:13:44.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:03:29.000+0000</td></tr>
</table>

<h3>Description</h3>

*Problem description*
On Android, setting the property autoRedirect to false causes onerror to be called instead of onload. It works as expected on iOS.

*Actual result*
HttpClient is calling onerror instead of onload

*Expected result*
onload should be called on Android even if it is a HTTP redirect (302 or 304), since these are not errors.

*Test case*
<code><pre>
var win = Ti.UI.createWindow({
	backgroundColor : "#FFF"
});

var onload = function(e) {
	alert(this.test_type + ": RETURN CODE:" + this.status);
};
var onerror = function(e) {
	alert(this.test_type + ": ERROR CODE:" + this.status);
};
var xhr = Ti.Network.createHTTPClient({
	onload : onload,
	onerror : onerror,
	test_type : "DEFAULT"
});
xhr.open('GET', '<a href="https://support.appcelerator.com" rel="nofollow" target="_blank">https://support.appcelerator.com</a>');
xhr.send();

var xhr1 = Ti.Network.createHTTPClient({
	onload : onload,
	onerror : onerror,
	test_type : "REDIRECT OFF"
});
xhr1.open('GET', '<a href="https://support.appcelerator.com" rel="nofollow" target="_blank">https://support.appcelerator.com</a>');
xhr1.autoRedirect = false;
xhr1.send();

var xhr2 = Ti.Network.createHTTPClient({
	onload : onload,
	onerror : onerror,
	test_type : "REDIRECT ON"
});
xhr2.open('GET', '<a href="https://support.appcelerator.com" rel="nofollow" target="_blank">https://support.appcelerator.com</a>');
xhr2.autoRedirect = true;
xhr2.send();

win.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Mauro Parra-Miranda 2013-04-26

   Hello!
   
   In order to promote this bug into Mobile SDK, can you please provide more info? Please follow this guideline: 
   
   <a href="https://wiki.appcelerator.org/display/guides/How+to+Submit+a+Bug+Report" rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/guides/How+to+Submit+a+Bug+Report</a>
   
   If you have a small testcase showing this, will be awesome!
   
   Best,
   Mauro </li>
<li>Nasif 2013-04-27

   var onload = function(e) {
       Ti.API.info(this.test_type + ": RETURN CODE:" + this.status);
   };
   var onerror = function(e) {
       Ti.API.info(this.test_type + ": ERROR CODE:" + this.status);
   };
   var xhr = Ti.Network.createHTTPClient({
       onload: onload,
       onerror: onerror,
       test_type: "DEFAULT"
   });
   xhr.open('GET','<a href="https://support.appcelerator.com" rel="nofollow" target="_blank">https://support.appcelerator.com</a>');
   xhr.send();
   
   var xhr1 = Ti.Network.createHTTPClient({
       onload: onload,
       onerror: onerror,
       test_type: "REDIRECT OFF"
   });
   xhr1.open('GET','<a href="https://support.appcelerator.com" rel="nofollow" target="_blank">https://support.appcelerator.com</a>');
   xhr1.autoRedirect = false;
   xhr1.send();
   
   var xhr2 = Ti.Network.createHTTPClient({
       onload: onload,
       onerror: onerror,
       test_type: "REDIRECT ON"
   });
   xhr2.open('GET','<a href="https://support.appcelerator.com" rel="nofollow" target="_blank">https://support.appcelerator.com</a>');
   xhr2.autoRedirect = true;
   xhr2.send();
   
   </li>
<li>Daniel Sefton 2013-05-20

   Tested and confirmed on Android 4.1.2 x86 emulator with Ti SDK 3.2 CI. Works as expected on iOS.</li>
</ol>


<p><a href="/TIMOB/TIMOB-13930.json">JSON Source</a></p>