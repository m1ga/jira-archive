---
title: "[TIMOB-13987] Code Processor: Alloy hook validation needs to happen after logging redirection, not before"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-05-24T22:41:04.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.1</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 11 JS, 2013 Sprint 11, Release 3.1.1, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Code Processor</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Bryan Hughes</td></tr>
<tr><th>Assignee</th><td>Bryan Hughes</td></tr>
<tr><th>Created</th><td>2013-05-24T22:18:16.000+0000</td></tr>
<tr><th>Updated</th><td>2013-06-17T17:47:32.000+0000</td></tr>
</table>

<h3>Description</h3>

Right now, the alloy hook is validated before the logger is redirected when using a configuration file. This means that when a configuration file is used on an alloy project with an out of date hook and the output type is stream or JSON, the warning is printed which makes the output unparseable.

<h3>Comments</h3>

<ol>
<li>Bryan Hughes 2013-05-24

   PR: <a href="https://github.com/appcelerator/titanium-code-processor/pull/202" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-code-processor/pull/202</a>
   1_0_X PR: <a href="https://github.com/appcelerator/titanium-code-processor/pull/203" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-code-processor/pull/203</a></li>
<li>Eric Merriman  2013-06-14

   Is there a way we can test this?</li>
<li>Bryan Hughes 2013-06-15

   To test/verify:
   <h4>Get an alloy project created with 1.1.2 or older (it must have the old hook in plugins/)</h4>
   <h4>Run the code processor from the command line against the project: "ti analyze -F <path/to/config/file> -o json"</h4>
   <h4>Without the fix, you will see some output before the JSON is output, meaning that it isn't valid JSON</h4>
   <h4>With the fix, you will only see JSON output</h4></li>
<li>Federico Casali 2013-06-17

   Verified as fixed.
   
   Environment:
   	Titanium SDK 3.1.1.v20130615160957
   	Appcelerator Studio 3.1.1.201306131423
   	CLI 3.1.1-cr
   	Code Processor 1.0.1-cr5
   	Alloy 1.1.3-cr
   	Node 0.8.22
   
   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-13987.json">JSON Source</a></p>