---
title: "[TIMOB-13998] Android: add setCameraFlashMode feature for custom overlays in Ti.Media "
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-03-06T20:36:06.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2014 Sprint 05, 2014 Sprint 05 API, Release 3.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>module_media, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Assignee</th><td>Biju pm</td></tr>
<tr><th>Created</th><td>2013-05-28T00:38:49.000+0000</td></tr>
<tr><th>Updated</th><td>2014-07-22T22:52:30.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem Description</h4>
When users sets a custom overlay in the camera, there is no way to set the flash on or off.

<h4>More info</h4>
<a href="https://developer.appcelerator.com/question/152715/flash-mode-in-camera" rel="nofollow" target="_blank">https://developer.appcelerator.com/question/152715/flash-mode-in-camera</a>

<h3>Comments</h3>

<ol>
<li>Alex Bernier 2013-08-08

   +1 on this feature request</li>
<li>Biju pm 2013-11-05

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/4912" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4912</a></li>
<li>Alex Bernier 2014-01-22

   Is this ready to go? Would love to start using it.</li>
<li>Biju pm 2014-02-05

   Test case
   <code><pre>
   var overlay = Ti.UI.createView();
   var button = Titanium.UI.createButton({
       color : '#fff',
       bottom : 10,
       width : 301,
       height : 57,
       font : {
           fontSize : 20,
           fontWeight : 'bold',
           fontFamily : 'Helvetica Neue'
       },
       title : 'Take Picture'
   });
     
   button.addEventListener('click', function() {
       Ti.Media.takePicture();
   });
    
   overlay.add(button);
    
   Titanium.Media.showCamera({
    
       overlay : overlay,
       flashMode : true ,
       mediaTypes : Ti.Media.MEDIA_TYPE_PHOTO,
       saveToPhotoGallery : true
   }); 
   </pre></code></li>
<li>Biju pm 2014-02-05

   New PR :
   <a href="https://github.com/appcelerator/titanium_mobile/pull/5322" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5322</a></li>
<li>Alex Bernier 2014-02-05

   Will we be able to toggle flashMode from the overlay while the camera is open? Use case would be:
   
   1. Camera preview starts
   2. The user sees the scene is too dark without flash and wants to turn flash on
   3. A button on the camera overlay would allow the user to set flashMode to turn flash on
   
   This use case seems to be the inspiration for the [feature request](<a href="https://developer.appcelerator.com/question/152715/flash-mode-in-camera)." rel="nofollow" target="_blank">https://developer.appcelerator.com/question/152715/flash-mode-in-camera).</a> It may, in fact, be possible in your pull request, Biju, but I wanted to clarify. And if it is possible in your pull request, could you add toggle to your test case?
   
   Excited for flash control - thank you for your contribution to this ticket!</li>
<li>Biju pm 2014-02-06

   Test Case
   <code><pre>
   var overlay = Ti.UI.createView();
   
   var button = Titanium.UI.createButton({
       color : '#fff',
       bottom : 10,
       width : 200,
       height : 57,
       font : {
           fontSize : 20,
           fontWeight : 'bold',
           fontFamily : 'Helvetica Neue'
       },
       title : 'Take Picture'
   });
   
   var buttonChange = Titanium.UI.createButton({
       color : '#fff',
       bottom : 90,
       width : 200,
       height : 57,
       font : {
           fontSize : 20,
           fontWeight : 'bold',
           fontFamily : 'Helvetica Neue'
       },
       title : 'change flashmode'
   });
      
     var label = Ti.UI.createLabel({
     color:'blue',
       textAlign: Ti.UI.TEXT_ALIGNMENT_LEFT,
       text : "FlashMode OFF" ,
     top: 30,
     width: 200, height: 100
   }); 
   buttonChange.addEventListener('click', function() {
     	Ti.Media.flashMode = !Ti.Media.getFlashMode() ;
     	if(Ti.Media.flashMode)
     	{
     	label.text = "FlashMode ON" ;
     	}
     	else
     	{
     	label.text = "FlashMode OFF" ;
     	}
    });
     button.addEventListener('click', function() {
       Ti.Media.takePicture();
   });
    
   overlay.add(button);
   overlay.add(label);
   overlay.add(buttonChange);
      	 Titanium.Media.showCamera({
       overlay : overlay , 
     flashMode : false 
   }); 
   </pre></code></li>
<li>Alex Bernier 2014-02-06

   Oh awesome! Our users are going to be so excited. Right now they have to take a photo with normal camera then open the app then select photo from gallery. This will save them so much time. Thank you, again.</li>
<li>Shannon Hicks 2014-02-06

   Wait, Ti.Media.flashMode is a boolean? On the (undocumented) iOS side, we use constants. We need to make sure that it's the same for both platforms, please.</li>
<li>Biju pm 2014-02-07

    Test Case
    <code><pre>
    var overlay = Ti.UI.createView();
     
    var button = Titanium.UI.createButton({
        color : '#fff',
        bottom : 10,
        width : 200,
        height : 57,
        font : {
            fontSize : 20,
            fontWeight : 'bold',
            fontFamily : 'Helvetica Neue'
        },
        title : 'Take Picture'
    });
     
    var buttonChange = Titanium.UI.createButton({
        color : '#fff',
        bottom : 90,
        width : 200,
        height : 57,
        font : {
            fontSize : 20,
            fontWeight : 'bold',
            fontFamily : 'Helvetica Neue'
        },
        title : 'change flashmode'
    });
        
      var label = Ti.UI.createLabel({
      color:'blue',
        textAlign: Ti.UI.TEXT_ALIGNMENT_LEFT,
        text : "FlashMode OFF" ,
      top: 30,
      width: 200, height: 100
    }); 
    buttonChange.addEventListener('click', function() {
        Ti.Media.cameraFlashMode = !Ti.Media.getCameraFlashMode() ;
        if(Ti.Media.cameraFlashMode)
        {
        label.text = "FlashMode ON" ;
        }
        else
        {
        label.text = "FlashMode OFF" ;
        }
     });
      button.addEventListener('click', function() {
        Ti.Media.takePicture();
    });
      
    overlay.add(button);
    overlay.add(label);
    overlay.add(buttonChange);
         Titanium.Media.showCamera({
        overlay : overlay , 
      flashMode : false 
    }); 
    </pre></code></li>
<li>Hieu Pham 2014-04-01

    Modify 'flashMode' to 'cameraFlashMode' for parity with iOS: <a href="https://github.com/appcelerator/titanium_mobile/pull/5567" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5567</a></li>
<li>Alex Bernier 2014-07-22

    On iOS, Titanium SDK 3.3.0.GA, setting Ti.Media.cameraFlashMode to false seems to set the camera flash to an "auto" mode; the flash still fires if you cover the light sensor with your hand.
    
    Is this expected, and if so, will there be functionality in the future to allow flash to be turned off, overriding auto flash mode?</li>
<li>Alex Bernier 2014-07-22

    Whoops, this ticket is for Android...can't edit/delete comments any more?</li>
<li>Alex Bernier 2014-07-22

    Nevermind, I see the constants in the documentation now. I was using the code snippet above which doesn't use the constants so I'm assuming that's why it's using "auto" behavior.</li>
</ol>


<p><a href="/TIMOB/TIMOB-13998.json">JSON Source</a></p>