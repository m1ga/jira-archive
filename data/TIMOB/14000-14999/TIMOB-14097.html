---
title: "[TIMOB-14097] BlackBerry: Proxies are never collected by GC"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-08-28T17:44:18.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.1, Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 15 API, 2013 Sprint 15, Release 3.1.2, Release 3.2.0</td></tr>
<tr><th>Components</th><td>BlackBerry</td></tr>
<tr><th>Labels</th><td>qe-3.1.2, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Josh Roesslein</td></tr>
<tr><th>Assignee</th><td>Pedro Enrique</td></tr>
<tr><th>Created</th><td>2013-06-04T00:47:35.000+0000</td></tr>
<tr><th>Updated</th><td>2013-10-01T21:32:02.000+0000</td></tr>
</table>

<h3>Description</h3>

The proxy objects are never being collected by the V8 engine.
We appear to be using Persistent handles, but never make them weak
or setup callbacks to properly dispose of them once the JS object is unreachable.

<h4>Test Case</h4>
<code><pre>
setInterval(function() {
  Ti.UI.createView();
}, 500);
</pre></code>

If you run the above test case and monitor the memory usage, you
will see it continue to go up with out any collections.


<h3>Comments</h3>

<ol>
<li>Josh Roesslein 2013-06-13

   Here's another test case which opens / closes a window with a bunch of labels:
   
   <code><pre>
   var win = Ti.UI.createWindow();
   
   function openWin() {
   	var win = Ti.UI.createWindow({
   		backgroundColor: 'red'
   	});
   	
   	for (var i = 0; i < 100; i++) {
   		var label = Ti.UI.createLabel({
   			text: 'Label #' + i
   		});
   		win.add(label);
   	}
   	
   	setTimeout(function() {
   		win.close();
   		win = null;
   	}, 1000);
   	
   	win.open();
   }
   
   setInterval(openWin, 3000);
   
   win.open();
   
   </pre></code></li>
<li>Lokesh Choudhary 2013-08-13

   Verified the fix by running the test code provided & its working as expected.
   Thus closing.
   
   Environment:
   Appcel Studio : 3.1.2.201308091728
   Ti SDK : 3.1.2.v20130809141556
   Mac OSX : 10.8.4
   Alloy : 1.2.0-alpha6
   CLI - 3.1.2-alpha
   win 7 
   Win 8 
   Z10 BB simulator : 10.0.10.822
   Z10 device running 10.0.10.88
   
   Q10 Simulator : 10.1.0.1720
   Q10 Dev alpha C device running 10.1.0.138</li>
<li>Ingo Muschenetz 2013-08-29

   Re-closing. Reopened to fix priority.</li>
<li>Samuel Dowse 2013-10-01

   Verified the fix, app does exactly what is expected.
   
   Environment:
   Titanium Studio, build: 3.1.3.201309132423
   Titanium SDK: 3.1.3.GA
   BB SDK: 10.2.1
   Mac OSX : 10.8.5
   Alloy : 1.2.2
   Z10 BB simulator : 10.2.1
   Z10 device running 10.0.10.88</li>
</ol>


<p><a href="/TIMOB/TIMOB-14097.json">JSON Source</a></p>