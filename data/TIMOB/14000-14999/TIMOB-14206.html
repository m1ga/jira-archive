---
title: "[TIMOB-14206] BlackBerry: ResultSet.isValidRow() and ResultSet.rowCount failed when there is no records in table (Ti SDK 3.1.1)"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-08-13T17:17:41.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 14, 2013 Sprint 14 API, Release 3.1.2, Release 3.2.0</td></tr>
<tr><th>Components</th><td>BlackBerry</td></tr>
<tr><th>Labels</th><td>BlackBerry, qe-3.1.2, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Bharat Panthee</td></tr>
<tr><th>Assignee</th><td>Pedro Enrique</td></tr>
<tr><th>Created</th><td>2013-06-13T15:42:25.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-19T12:43:24.000+0000</td></tr>
</table>

<h3>Description</h3>

*Problem*
The isValidRow method and rowCount property of ResultSet failed when the table is empty for BlackBerry.

*Test case*
<code><pre>
if (Ti.version &lt; 1.8 ) {
	alert('Sorry - this application template requires Titanium Mobile SDK 1.8 or later');
}

// This is a single context application with mutliple windows in a stack
(function() {
	//determine platform and form factor and render approproate components
	var osname = Ti.Platform.osname,
		version = Ti.Platform.version,
		height = Ti.Platform.displayCaps.platformHeight,
		width = Ti.Platform.displayCaps.platformWidth;
	
	//considering tablet to have one dimension over 900px - this is imperfect, so you should feel free to decide
	//yourself what you consider a tablet form factor for android
	var isTablet = osname === 'ipad' || (osname === 'android' && (width &gt; 899 || height &gt; 899));
	
	    var db = Ti.Database.open("testBB2");
        var sSQL = "Create table if not exists testBB2(key text, value text)";
        db.execute(sSQL);
         db.execute("delete from testBB2");
        //sSQL = "insert into testBB2(key,value) values('1', 'testBB77777')";
        //db.execute(sSQL);
        var rs = db.execute("select * from testBB2");

        if(rs.isValidRow())
        {
            alert(rs.fieldByName('value'));
            rs.next();
        }
 
        alert('completed!');
        rs.close();
        db.close();
	
	/*
	var Window;
	if (isTablet) {
		Window = require('ui/tablet/ApplicationWindow');
	}
	else {
		Window = require('ui/handheld/ApplicationWindow');
	}

	var ApplicationTabGroup = require('ui/common/ApplicationTabGroup');
	new ApplicationTabGroup(Window).open();
	*/
})();
</pre></code>

*BlackBerry emulator log*
<code><pre>
app.js:38
        if(rs.isValidRow())
              ^
TypeError: Cannot call method 'isValidRow' of undefined
    at app.js:38:15
    at app.js:60:3
</pre></code>

<h3>Comments</h3>

<ol>
<li>Pedro Enrique 2013-08-12

   Sample code:
   <code><pre>
   var db = Ti.Database.open("testBB2");
   var sSQL = "Create table if not exists testBB2(key text, value text)";
   db.execute(sSQL);
   db.execute("delete from testBB2");
   
   var rs = db.execute("select * from testBB2");
    
   if(rs.isValidRow())
   {
       alert(rs.fieldByName('value'));
       rs.next();
   }
   
   alert('completed!');
   rs.close();
   db.close();
   </pre></code></li>
<li>Lokesh Choudhary 2013-08-12

   Running the sample test code given by pedro crashes the app at "rs.close()".
   Reopening</li>
<li>Pedro Enrique 2013-08-13

   PR for master: <a href="https://github.com/appcelerator/titanium_mobile_blackberry/pull/159" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_blackberry/pull/159</a>
   PR for 3.1.x : <a href="https://github.com/appcelerator/titanium_mobile_blackberry/pull/160" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_blackberry/pull/160</a></li>
<li>Lokesh Choudhary 2013-08-13

   verified the fix & the app works as expected & does not crash at "re.close()".
   
   Environment:
   Appcel Studio : 3.1.2.201308091728
   Ti SDK : 3.1.2.v20130809141556
   Mac OSX : 10.8.4
   Alloy : 1.2.0-alpha6
   CLI - 3.1.2-alpha
   win 7 
   Win 8 
   Z10 BB simulator : 10.0.10.822
   Z10 device running 10.0.10.88
   
   Q10 Simulator : 10.1.0.1720
   Q10 Dev alpha C device running 10.1.0.138</li>
</ol>


<p><a href="/TIMOB/TIMOB-14206.json">JSON Source</a></p>