---
title: "[TIMOB-14270] Android: Add support for New Relic module"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-06-21T23:52:52.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 13 Core, 2013 Sprint 13, Release 3.1.2, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>module_android, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Ingo Muschenetz</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2013-06-18T18:02:00.000+0000</td></tr>
<tr><th>Updated</th><td>2013-07-10T09:04:21.000+0000</td></tr>
</table>

<h3>Description</h3>

This change modifies the Android builder script to look for the New Relic module, and if present passes an additional argument to the dx command when it is called. This allows New Relic to do bytecode rewriting for instrumentation.

The Java agent argument to dx is passed via a temporary file to avoid issues the dx command has with spaces in file paths. This temporary file is cleaned up after dx runs.

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2013-06-18

   PR is <a href="https://github.com/appcelerator/titanium_mobile/pull/4399." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4399.</a> The module is located for <a href="https://www.dropbox.com/s/ql7znupcmbamoqn/ti.newrelic-android-0.1.zip" rel="nofollow" target="_blank">https://www.dropbox.com/s/ql7znupcmbamoqn/ti.newrelic-android-0.1.zip</a> for testing purposes.</li>
<li>Jared Stanbrough 2013-06-18

   Hi all,
   
   Steps to test:
   
   1. Copy and unzip the ti.newrelic-android-0.1.zip zipfile into your Titanium SDK directory, with other modules.
   
   2. Register the module with your application by editing <code>tiapp.xml</code> and adding the module.
   
   <modules>
           <module version="0.1">ti.newrelic</module>
   </modules>
   
   3. Build an Android project, i.e. titanium build --platform android
   
   4. If builder.py found the newrelic module, there will be an INFO log entry which says "Adding New Relic Support." You will also see an additional argument passed to the dexer (-Jjavaagent)
   
   5. The rest of the build should proceed as normal and the builder test is verified.
   
   To perform a full end to end test of the module:
   
   In the test android project's alloy.js add:
   
   require('ti.newrelic').start("AA9a2d52a0ed09d8ca54e6317d9c92074f2e9b307b");
   
   When the app runs, there should be some newrelic messages in logcat.
   
   Please let me know if you have any questions. Thanks!
   
   Jared Stanbrough <jared@newrelic.com>
   Senior Engineer, Mobile
   New Relic, Inc.</li>
<li>Sabil Rahim 2013-06-24

   3_1_X PR <a href="https://github.com/appcelerator/titanium_mobile/pull/4411" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4411</a></li>
<li>Darren Haligas 2013-06-26

   @Jared when will the modules for NewRelic on iOS and Android be available to Titanium?</li>
<li>Priya Agarwal 2013-07-10

   Verified with:
   
   Titanium sdk: 3.1.2.v20130708163051
   Studio: 3.1.2.201307031935
   acs:1.0.3
   alloy:1.1.3
   npm:1.2.14
   titanium:3.1.1
   titanium-code-processor:1.0.1
   OS: Mountain Lion 10.8</li>
</ol>


<p><a href="/TIMOB/TIMOB-14270.json">JSON Source</a></p>