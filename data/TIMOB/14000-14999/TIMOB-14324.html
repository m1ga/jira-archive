---
title: "[TIMOB-14324] Android: openPreferences( ) not working (after installed from google play) "
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-07-08T21:44:48.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.0, Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 14, 2013 Sprint 14 API, Release 3.1.3, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>qe-closed-3.1.3, supportTeam</td></tr>
<tr><th>Reporter</th><td>Eduardo Gomez</td></tr>
<tr><th>Assignee</th><td>Hieu Pham</td></tr>
<tr><th>Created</th><td>2013-06-20T21:26:43.000+0000</td></tr>
<tr><th>Updated</th><td>2013-08-29T22:33:20.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue</h4>
Looks like an Android Service (TIMOB-14179) may prevent the preferences window be opened. 

This is another use case where the developer noticed that after installing his app from Google Play, he couldn't open the preferences window for the first time the app ran.

Yet another way one can re-produce it on an emulator. After a fresh install, the first time the app runs, if you try to open the preferences window, you got:

- Runtime Error:
<code><pre>
Message:

Uncaught Error: Java Exception occurred

Source:

Ti.UI.Android.openPreferences();
</pre></code>

<h4>Tested on</h4>
HTC One (Android 4.1.2)

<h4>preferences.xml</h4>
<code><pre>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;PreferenceScreen xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>" android:title="系統設置"&gt;
    &lt;CheckBoxPreference
        android:key="wifi_only"
        android:title="Download over Wi-Fi Only"
        android:summary="Enable this option to prevent you from downloading over a mobile network."
        android:defaultValue="false" /&gt;
&lt;/PreferenceScreen&gt;
</pre></code>

<h4>Docs</h4>
<a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.UI.Android-method-openPreferences

<h4>A sample</h4>
- app.js
<code><pre>
var prefs = require('preferences');
var args = {
	title: 'Preferences'
};
var win = new prefs(args);
win.open();
</pre></code>

- preferences.js
<code><pre>
	// See:
	//	platform/android/res/xml/preferences.xml
	//	platform/android/res/values/array.xml
	// Similar files MUST be present at build time or
	// Titanium.UI.Android.openPreferences() will simply
	// do nothing.
function prefs(_args) {
	var win = Ti.UI.createWindow({
		title: _args.title
	});
	var btn = Titanium.UI.createButton({
		title:	'Click to Open Preferences'
	});
	btn.addEventListener('click', function() {
		Titanium.UI.Android.openPreferences();
	});
	win.add(btn);
	return win;
};

module.exports = prefs;
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-14324_40087/logOpenPreferences.txt">logOpenPreferences.txt</td></td><td>2013-06-20T21:26:43.000+0000</td><td>154955</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Hieu Pham 2013-07-03

   Master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/4436" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4436</a></li>
<li>Ping Wang 2013-08-27

   3_1_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/4608" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4608</a></li>
<li>Olga Romero 2013-08-29

   Tested the above code and did not get a runtime "Uncaught Error: Java Exception occurred"
   
   Appcelerator Studio, build: 3.1.3.201308292449
   Titanium SDK, build: 3.1.3.v20130828171413
   CLI: 3.1.2
   alloy 1.2.1
   Device: GalaxyS4 Android version 4.2.2
   
   Closing as fixed.
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-14324.json">JSON Source</a></p>