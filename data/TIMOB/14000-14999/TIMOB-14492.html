---
title: "[TIMOB-14492] iOS: clang: error: linker command failed with exit code 1"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Reopened</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.1.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>supportTeam</td></tr>
<tr><th>Reporter</th><td>Betty Tran</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2013-07-04T13:20:07.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-18T20:38:44.000+0000</td></tr>
</table>

<h3>Description</h3>

When building a project to run on the iOS Simulator, it fails with the following error:

<code><pre>
[TRACE] :  ld: truncated fat file. Slice from 68 to 84873484 is past end of file with length 53090291 for architecture i386
[TRACE] :  clang: error: linker command failed with exit code 1 (use -v to see invocation)
[ERROR] :  ** BUILD FAILED **
[ERROR] :  The following build commands failed:
[ERROR] :  Ld build/Debug-iphonesimulator/test6.app/test6 normal i386
[ERROR] :  (1 failure)
</pre></code>

Note that the customer is able to build their Android projects with no problems.

The full log files are attached as follows: 

- log1: log from building via Titanium Studio
- log2: log from build via the CLI
- log3: The result of running titanium info 

I will also be attaching the Studio diagnostic file shortly.

The customer started getting this error after creating a new user on his mac and doing a clean install of Titanium Studio and all its updates.




<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-14492_62907/AlloyTest.zip">AlloyTest.zip</td></td><td>2017-07-20T01:03:48.000+0000</td><td>8051110</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-14492_62906/ClassicTest.zip">ClassicTest.zip</td></td><td>2017-07-20T01:03:49.000+0000</td><td>5637073</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-14492_40543/diagnostics">diagnostics</td></td><td>2013-07-04T13:46:26.000+0000</td><td>8182</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-14492_40540/log1">log1</td></td><td>2013-07-04T13:20:07.000+0000</td><td>253146</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-14492_40541/log2">log2</td></td><td>2013-07-04T13:20:07.000+0000</td><td>1323097</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-14492_40542/log3">log3</td></td><td>2013-07-04T13:20:07.000+0000</td><td>12502</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Betty Tran 2013-07-05

   Tried cleaning the project and building again with no success.</li>
<li>Michael Xia 2013-07-06

   [~ingo] I'm not sure if this is a CLI or an IOS SDK issue. I found one ticket with similar error in TISTUD-723, but cleaning the project didn't help for this customer.</li>
<li>Ingo Muschenetz 2013-07-07

   [~cbarber] Any thoughts?</li>
<li>Moshe Marciano 2013-07-07

   it is important to note that this problem started when we added a user to the same mac, meaning, the first user could build fine, then we added a second user and installed the SDKs, then we got into some trouble. the first one was it was referring to the global /Library/Application Support/Titanium... for the SDKs, once I changed Titanium to Titanium-old, it referred to the user version and started building, but then we got this problem. I wouldn't be surprised if this turns out to be a permission issues, but I dont know where to look.</li>
<li>Chris Barber 2013-07-08

   Hmm, this is an interesting error. For starters, thank you for the great logs!
   
   This could very well be a permission issue, a corrupt iOS SDK install, or a corrupt Xcode install. Once upon a time I had a corrupt iOS SDK and was getting really funky errors. I would remove /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk, then go into Xcode > Preferences > Downloads and reinstall the iOS SDK. Then try again to clean and build your project.
   
   If you still have problems, I would consider reinstalling Xcode again.</li>
<li>Chris Barber 2014-03-27

   Resolving as cannot reproduce since we've not seen this happen and it sounds like it's a permission issue.</li>
<li>Lee Morris 2017-03-27

   Closing ticket as I am unable to reproduce this issue with the following environment;
   iPhone 7 (10.2)
   MacOS 10.11.6 (15G31)
   Studio 4.8.1.201612050850
   Ti SDK 6.0.3 GA
   Appc NPM 4.2.8
   Appc CLI 6.1.0
   Ti CLI 5.0.11
   Alloy 1.9.5
   Arrow 1.10.1
   Xcode 8.2 (8C38)
   Node v4.6.0
   Java 1.7.0_80</li>
<li>Joshua Quick 2017-07-20

   I'm able to reproduce this issue with the attached projects:
   - AlloyTest.zip
   - ClassicTest.zip
   
   *Steps to reproduce:*
   <h4>Build attached project "AlloyTest" or "ClassicTest" for iOS.</h4>
   <h4>Note that the 1st build will succeed.</h4>
   <h4>If you're using Appcelerator Studio, change the contents of 1 of the files. (This is to trigger another build.)</h4>
   <h4>Attempt to do another build for iOS.</h4>
   
   *Result:*
   The build will fail with the following message in the log...
   
   <code><pre>
   [TRACE] :  ld: can't open output file for writing: /Users/jquick2/Documents/Appcelerator_Studio_Workspace/ClassicTest/build/iphone/build/Products/Debug-iphonesimulator/ClassicTest.app/ClassicTest, errno=21 for architecture x86_64
   [TRACE] :  clang: error: linker command failed with exit code 1 (use -v to see invocation)
   [ERROR] :  ** BUILD FAILED **
   [ERROR] :  The following build commands failed:
   [ERROR] :  	Ld build/Products/Debug-iphonesimulator/ClassicTest.app/ClassicTest normal x86_64
   [ERROR] :  (1 failure)
   </pre></code>
   
   Note that all subsequent iOS builds will fail with the above message.
   
   *Reason:*
   This error will happen if a subdirectory has the same name as the iOS app bundle. Also, the subdirectory must contain at least 1 file (cannot be empty) to trigger this issue or else it won't be included in the build.
   
   For the attached "ClassicTest" project, it's because it contains the following folder name...
   - ./Resources/ClassicTest
   
   For the attached "AlloyTest" project, it's because it contains the following folder name...
   - ./app/lib/AlloyTest
   
   *Work-Around:*
   Rename the app bundle to a name not matching a subdirectory name in the "tiapp.xml" file.
   
   <code><pre>
   &lt;ti:app xmlns:ti="<a href="http://ti.appcelerator.org" rel="nofollow" target="_blank">http://ti.appcelerator.org</a>"&gt;
       &lt;name&gt;AppNameToChange&lt;/name&gt;
   &lt;/ti&gt;
   </pre></code>
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-14492.json">JSON Source</a></p>