---
title: "[TIMOB-14498] iOS: Memory Leak issue for property set in tiapp.xml"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2013-07-22T23:43:15.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.4, Release 3.0.2, Release 3.1.0, Release 3.1.1</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 15 API, 2013 Sprint 15, Release 3.2.0, Release 3.2.3</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios, mobile, mobilesdk, qe-closed-3.2.3, titanium</td></tr>
<tr><th>Reporter</th><td>Ashish Nigam</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2013-07-09T09:29:07.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-19T12:43:14.000+0000</td></tr>
</table>

<h3>Description</h3>

Whenever i set any property in tiapp.xml, application reports a memory leak when analyzed using Instrument.

Steps to reproduce:

1: Create a sample application and either cloud enable this or set
any property like this in the tiapp.xml

<property name="ti.ui.defaultunit">system</property>

2: Build the application using titanium studio.
3: analyze the application using instrument for memory leaks.
4: after few seconds, instrument will show memory leaks.
5: check the source file for leak.
6: ApplicationDefault.m will be reported for leaks.
6: Code written there and responsible for leak is:
<code><pre>
@implementation ApplicationDefaults
  
+ (NSMutableDictionary*) copyDefaults
{
    NSMutableDictionary * _property = [[NSMutableDictionary alloc] init];

    [_property setObject:[TiUtils stringValue:@"system"] forKey:@"ti.ui.defaultunit"];

    return _property;
}
@end
</pre></code>.

Possible Solution:

As per my understanding and finding, dictionary object should have been autoreleased while creating, so the above sample must have been written like:

<code><pre>
@implementation ApplicationDefaults
  
+ (NSMutableDictionary*) copyDefaults
{
    NSMutableDictionary * _property = [[[NSMutableDictionary alloc] init] autorelease];

    [_property setObject:[TiUtils stringValue:@"system"] forKey:@"ti.ui.defaultunit"];

    return _property;
}
@end
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-14498_40584/Instruments_report.trace">Instruments_report.trace</td></td><td>2013-07-09T09:29:07.000+0000</td><td>204</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-14498_40581/Memory Leak1.png">Memory Leak1.png</td></td><td>2013-07-09T09:29:07.000+0000</td><td>251658</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-14498_40582/Memory Leak2.png">Memory Leak2.png</td></td><td>2013-07-09T09:29:07.000+0000</td><td>225222</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-14498_40583/Memory Leak3.png">Memory Leak3.png</td></td><td>2013-07-09T09:29:07.000+0000</td><td>228281</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Vishal Duggal 2013-07-22

   This is a dupe issue and has already been fixed since 3.0.0
   
   </li>
<li>Deepti Pandey 2014-04-21

   Verified as FIXED using :
   OSX: 10.9.2
   Xcode:5.1.1
   acs@1.0.14
   alloy@1.3.1
   npm@1.3.2
   titanium@3.2.3-beta2
   titanium-code-processor@1.1.1-beta1
   MobileSDK :3.2.3.v20140418101718 ,3.3.0.v20140418162516
   Appcelerator Studio, build: 3.2.3.201404162038
   Devices Used : iPhone 5s (7.1) ; iPod touch (7.1)
   
   No memory leaks have been noticed by adding  <property name="ti.ui.defaultunit">system</property> in the default project. Hence closing this ticket as FIXED.</li>
</ol>


<p><a href="/TIMOB/TIMOB-14498.json">JSON Source</a></p>