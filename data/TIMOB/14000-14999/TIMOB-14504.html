---
title: "[TIMOB-14504] LiveView: App doesn't restart properly when a modal window is open"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-04-13T16:20:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.1</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 15 Core, 2013 Sprint 15, Release 3.3.0</td></tr>
<tr><th>Components</th><td>iOS, LiveView</td></tr>
<tr><th>Labels</th><td>qe-closed-3.3.0, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Sabil Rahim</td></tr>
<tr><th>Created</th><td>2013-07-09T19:23:37.000+0000</td></tr>
<tr><th>Updated</th><td>2015-04-13T16:21:01.000+0000</td></tr>
</table>

<h3>Description</h3>

When a change is triggered while a modal window is open, the other windows are closed, but the modal window remain open. The app also doesn't come back up again and console shows the Client doesn't reconnect either.

<h3>Comments</h3>

<ol>
<li>Daniel Sefton 2013-07-09

   Hi Fokke,
   
   To help get this solved faster, it would be great if you could provide a simple reproducible test case with a modal window.
   
   Thanks!</li>
<li>Christian Sullivan 2013-07-10

   This issue should be assigned to some on the sdk team since this has to do with the restart api process.</li>
<li>Blain Hamon 2013-07-24

   I could recreate this outside of Liveview. Restart was internally passing arguments that caused an exception in how modal windows close.
   
   To use: Launch app, click the color button a few times to establish state- Then click modal button, then restart. A successful restart will reset the app to the original window with a red background.
   
   <code><pre>
   // this sets the background color of the master UIView (when there are no windows/tab groups on it)
   Titanium.UI.setBackgroundColor('#000');
   var counter = 0;
   var win1 = Titanium.UI.createWindow({backgroundColor:'red'});
   var btn1 = Ti.UI.createButton({top:50,height:50,title:'Window Color'});
   win1.add(btn1);
   btn1.addEventListener('click',function(){
   	var colorArray = ['red','green','blue','yellow','purple'];
   	counter ++;
   	win1.backgroundColor = colorArray[counter];
   });
   
   var btn2 = Ti.UI.createButton({top:110,height:50,title:'modal'});
   win1.add(btn2);
   btn2.addEventListener('click',function(){
   	var win2 = Ti.UI.createWindow({backgroundColor:'white',modal:true});
   	var reloadbtn = Ti.UI.createButton({height:50, title:'restart'});
   	reloadbtn.addEventListener('click',function(){Ti.App._restart();});
   	win2.add(reloadbtn);
   	win2.open();
   });
   
   win1.open();
   </pre></code></li>
<li>Fokke Zandbergen 2013-12-04

   In what way is this resolved? I only see [~blainhamon]'s comment that he can reproduce it, no comment saying it was fixed or pointing to a PR?</li>
<li>Priya Agarwal 2013-12-17

   Reopening the issue as Now app restart properly when a modal window is open.
   But if any change is done on modal window then modal window does not gets open on 'modal' button click.
   
   Tested Environment:
   
   Appcelerator Studio: 3.2.0.201312151544
   SDK:3.2.0.v20131216191854
   alloy: 1.3.0-cr2
   acs: 1.0.10
   npm: 1.3.2
   titanium: 3.2.0-cr3
   titanium-code-processor: 1.1.0-cr2
   Xcode:5.0.2
   OS: Mac OSX 10.9
   Device: Iphone5(v7.0.4)
   
   
   <code><pre>
   
   // this sets the background color of the master UIView (when there are no windows/tab groups on it)
   Titanium.UI.setBackgroundColor('#000');
   var counter = 0;
   var win1 = Titanium.UI.createWindow({backgroundColor:'red',modal:true});
   var btn1 = Ti.UI.createButton({top:50,height:50,title:'Window Color'});
   win1.add(btn1);
   btn1.addEventListener('click',function(){
       var colorArray = ['red','green','blue','yellow','purple'];
       counter ++;
       win1.backgroundColor = colorArray[counter];
   });
    
   var btn2 = Ti.UI.createButton({top:110,height:50,title:'modal'});
   win1.add(btn2);
   btn2.addEventListener('click',function(){
       var win2 = Ti.UI.createWindow({modal:true,backgroundColor:'blue'});
       var reloadbtn = Ti.UI.createButton({height:50, title:'restart'});
       reloadbtn.addEventListener('click',function(){Ti.App._restart();});
       win2.add(reloadbtn);
       win2.open();
   });
    
   win1.open();
   </pre></code>
   
   Steps to reproduce:
   1.Copy paste the code and run the app with liveView enabled.
   2.App launches successfully.
   3.Tap on window color button. Window color changes as per code.
   4.Tap on modal button. Modal window with blue background opens.
   5.Tap on restart button. App gets relaunched successfully and previous red background colored window gets open along with two buttons.
   6. Now Replace line number 5 with
   <code><pre>
   var btn1 = Ti.UI.createButton({top:50,height:50,title:'Title changed'});
   </pre></code>
   and save the change. LiveView changes are reflected and app launches with success.Now tap modal button. Modal Window opens.
   7. Now change line 16
   <code><pre>
    var win2 = Ti.UI.createWindow({modal:true,backgroundColor:'yellow'});
   </pre></code>
   and save the change. App launches with success. Now tap modal button. Modal Window does not gets launched.
   
   Now when we close the app manually and relaunch the app again then Step 7 also works fine.
   Hence reopening the bug as any change done on modal window then modal window does not gets open on 'modal' button click.</li>
<li>Sabil Rahim 2013-12-17

   happens in 3.1.2 3.1.3 . The problem seems to occur only when the restart is manually triggered from the button inside the modal view and then if, any of the second window's parameters are changed. There is an console error message also, 
   <code><pre>
   Warning: Attempt to present <UINavigationController: 0x189a9c30> on <UINavigationController: 0x175c83c0> whose view is not in the window hierarchy!
   </pre></code>
   
   Not a regression , will still keeping looking.
   
   On a side note. Opening a modal window on top of a another modal window is not a good test case</li>
<li>Ingo Muschenetz 2013-12-17

   Deferring to 3.2.1 based upon comments.</li>
<li>Ingo Muschenetz 2014-04-07

   [~srahim], update?</li>
<li>Sabil Rahim 2014-04-21

   Actually Cannot Reproduce the issue with latest 3.3.0 master(April 21).
   Code Used 
   <code><pre>
   // this sets the background color of the master UIView (when there are no windows/tab groups on it)
   Titanium.UI.setBackgroundColor('#000');
   var counter = 0;
   var win1 = Titanium.UI.createWindow({backgroundColor:'red',modal:true});
   var btn1 = Ti.UI.createButton({top:50,height:50,title:'Window Color'});
   win1.add(btn1);
   btn1.addEventListener('click',function(){
       var colorArray = ['red','green','blue','yellow','purple'];
       counter ++;
       win1.backgroundColor = colorArray[counter];
   });
     
   var btn2 = Ti.UI.createButton({top:110,height:50,title:'modal'});
   win1.add(btn2);
   btn2.addEventListener('click',function(){
       var win2 = Ti.UI.createWindow({modal:true,backgroundColor:'blue'});
       var reloadbtn = Ti.UI.createButton({height:50, title:'restart'});
       reloadbtn.addEventListener('click',function(){Ti.App._restart();});
       win2.add(reloadbtn);
       win2.open();
   });
     
   win1.open();
   </pre></code></li>
<li>Neha Mittal 2014-04-23

    Verified fix with below environment:
    
    Appc Studio: 3.3.0.201404211130
    SDK build: 3.3.0.v20140422163054
    acs: 1.0.14
    npm: 1.3.2
    alloy: 1.4.0-dev
    CLI: titanium-3.3.0-dev
    titanium-code-processor:1.1.1-beta1
    Xcode: 5.1.1
    Osx: Mavericks(10.9.2)
    
    LiveView is working as expected. Changes are reflected on the Modal window. Hence Closing the issue.</li>
</ol>


<p><a href="/TIMOB/TIMOB-14504.json">JSON Source</a></p>