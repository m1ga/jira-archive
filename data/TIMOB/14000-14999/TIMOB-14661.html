---
title: "[TIMOB-14661] Cannot have a plugin if the project is for both Android and iOS"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2013-08-07T18:25:17.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android, Tooling</td></tr>
<tr><th>Labels</th><td>android, androidbuild, cb-verified, iOS, plugin</td></tr>
<tr><th>Reporter</th><td>Steve Trautman</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2013-07-23T15:53:19.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-23T22:45:59.000+0000</td></tr>
</table>

<h3>Description</h3>

You effectively cannot have any plugin if the project is for both Android and iOS. Android currently requires python plugins. iOS currently requires js plugins.

I ported an old python plugin to a new js plugin for iOS (thanks to the example at <a href="http://appersonlabs.com/2013/04/12/titanium-build-plugins-in-sdk-3-x-x/)" rel="nofollow" target="_blank">http://appersonlabs.com/2013/04/12/titanium-build-plugins-in-sdk-3-x-x/)</a> and it worked great.

Then I tried to build for Android, and it failed the build saying the plugin is missing. So I created a essentially empty python plugin in that folder:
<code><pre>
def compile(config)
    #don't do anything
    #when android gets on board with js plugins, delete me!
    myconfig = config
</pre></code>
I then discovered that the Android build actually calls the new js plugin if present, but the function parameters aren't set. I was able to work around this in the js plugin by checking to make sure the parameters aren't null before proceeding. It then calls the empty python plugin as usual, as well as all of my other legacy python plugins (that don't have also .js files in them).

But then the iOS plugin silently ceased to be executed. The iOS build silently ignores a js plugin if it also has a python file present. The developer put a comment in the code at about line 292 of /titatium-sdk/lib/titanium.js:
<code><pre>// we don't support plugins that have both a plugin.py and new .js files</pre></code>

It would have spared me the time of digging through titanium's code if the developer had put that comment into a log entry. But I digress.

Hopefully the easiest fix is also the best one (in my outside-looking-in opinion): the exact opposite of what is done in the js cli at line 292 above should be done here. Instead of ignoring the js plugin, it should ignore the python file with a debug or warn message. It should not be an error or fail the build. In fact, the js cli already ignores the python plugins, so perhaps all that needs to be done here is to not ignore a js plugin when a py plugin is present.

I understand if you didn't have time to port android to js along with iOS, but you have effectively broken plugins for both platforms, and that is disappointing to me. It's been coming up on a year since the js cli was released. That's a long time for you to leave us hanging without a prior functionality, or documentation of the new plugin api.

When will android be ported to the new js cli? When you will document the new js plugin api?


<h3>Comments</h3>

<ol>
<li>Chris Barber 2013-08-07

   This is a non-issue. The Android rewrite is underway and is scheduled for release 3.2.0.</li>
<li>Lee Morris 2017-03-23

   Closing ticket as Won't Fix with reference to the above comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-14661.json">JSON Source</a></p>