---
title: "[TIMOB-14721] LiveView: App.js Lexical Scope local vars not globally available "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-08-07T01:40:50.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 16, 2013 Sprint 16 Tooling, Release 3.1.3, Release 3.2.0</td></tr>
<tr><th>Components</th><td>LiveView</td></tr>
<tr><th>Labels</th><td>qe-closed-3.2.0</td></tr>
<tr><th>Reporter</th><td>Christian Sullivan</td></tr>
<tr><th>Assignee</th><td>Christian Sullivan</td></tr>
<tr><th>Created</th><td>2013-07-31T21:09:21.000+0000</td></tr>
<tr><th>Updated</th><td>2014-01-02T09:23:35.000+0000</td></tr>
</table>

<h3>Description</h3>

Variable defined in the <code>app.js</code> are not globally available. This is due to the project's app.js being executed outside of first loaded app.js context.

TEST Normal
1) Create app with code snippets below
2) Build app
Result: console will output 'Lex Scope Var'

TEST Liveview
1) Create app with code snippets below
2) Build app with --liveview flag

Expected Result: console will output 'Lex Scope Var'
Actual Result: error due to lexvar not being defined

Example Code

<code><pre>
//app.js
var lexvar = 'Lex Scope Var';
var require('test');
</pre></code>


<code><pre>
//test.js
console.log(lexvar);
</pre></code>

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2013-08-01

   From Tony:
   
   To get around this issue, developers would need to explicitly re-require Alloy:
   
   <code><pre>
   var Alloy = require('alloy');
   </pre></code>
   
   And there's also underscore(_) and Backbone to worry about as well. Those require statements are part of every Alloy-generated controller, but anything in the developer's "lib" or "assets" folder I have no control over. In those situations developers are relying on the global presence of Alloy. And they do it a lot, as it was one of the most asked Q&A questions until Android made them global as well.</li>
<li>Christian Sullivan 2013-08-05

   Added support for injecting local lexical scope vars in user's app.js in to the project's 'Global' context <a href="https://github.com/euforic/liveview/tree/bug/TIMOB-14721" rel="nofollow" target="_blank">https://github.com/euforic/liveview/tree/bug/TIMOB-14721</a>
   </li>
<li>Michael Xia 2013-08-06

   [~csullivan] I'm getting a 404 when clicking on the link. Is the branch pushed to remote yet?
   </li>
<li>Christian Sullivan 2013-08-06

   It's already part of master. </li>
<li>Michael Xia 2013-08-06

   Re-opening as running Field Service app is showing the following error:
   
   <code><pre>
   [LiveView] Client connected
   [ 'Alloy', '_', 'Backbone', 'e', 'APP' ]
   [INFO] :   [LiveView] Error Evaluating app.js @ Line: 1
   [ERROR] :  ReferenceError: Can't find variable: e
   [ERROR] :  File: app.js
   [ERROR] :  Line: 1
   [ERROR] :  SourceId: 341460448
   [ERROR] :  Backtrace:
   [ERROR] :   #0 () at file://localhost/Users/mxia/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/27D57553-41DC-4C4C-8DAB-11A2F6869224/Ti.FieldService.app/app.js:628
   [ERROR] :  #1 () at file://localhost/Users/mxia/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/27D57553-41DC-4C4C-8DAB-11A2F6869224/Ti.FieldService.app/app.js:493
   [ERROR] :  #2 () at file://localhost/Users/mxia/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/27D57553-41DC-4C4C-8DAB-11A2F6869224/Ti.FieldService.app/app.js:460
   [ERROR] :  #3 () at file://localhost/Users/mxia/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/27D57553-41DC-4C4C-8DAB-11A2F6869224/Ti.FieldService.app/app.js:392
   [ERROR] :  #4 () at file://localhost/Users/mxia/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/27D57553-41DC-4C4C-8DAB-11A2F6869224/Ti.FieldService.app/app.js:663
   </pre></code>
   </li>
<li>Christian Sullivan 2013-08-07

   fixed in [master] <a href="https://github.com/appcelerator/liveview/commit/d0901508657d4c11479cddb4a050574069f99076" rel="nofollow" target="_blank">https://github.com/appcelerator/liveview/commit/d0901508657d4c11479cddb4a050574069f99076</a>
   
   Released in version 0.1.30 <a href="https://github.com/appcelerator/liveview/releases/tag/0.1.30" rel="nofollow" target="_blank">https://github.com/appcelerator/liveview/releases/tag/0.1.30</a>
   </li>
<li>Priya Agarwal 2014-01-02

   Verified with test Environment:
   Appc-Studio: 3.2.0.201312191455
   Sdk:3.2.0.GA
   acs:1.0.11
   alloy:1.3.0
   npm:1.3.2
   titanium:3.2.0
   titanium-code-processor:1.1.0
   Osx: Maverick 10.9
   Xcode: xCode 5.0.2
   Device: Google Nexus7(v4.4.2),Iphone Simulator(v7.0.3)
   
   Getting the required console logs with both liveView enabled and disabled.
   Hence alosing as fixed and Verified.</li>
</ol>


<p><a href="/TIMOB/TIMOB-14721.json">JSON Source</a></p>