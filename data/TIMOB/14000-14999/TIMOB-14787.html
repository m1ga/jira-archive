---
title: "[TIMOB-14787] CLI: Improve detection of Android SDK and SDK Home locations"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-08-28T23:18:36.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 18 Core, 2013 Sprint 18, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android, Tooling</td></tr>
<tr><th>Labels</th><td>module_CLI, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2013-08-08T18:30:28.000+0000</td></tr>
<tr><th>Updated</th><td>2013-11-20T02:12:56.000+0000</td></tr>
</table>

<h3>Description</h3>

The Android environment detection library needs a few additional features for the build command to properly validate the development environment.

* detect Android SDK
** detect abd location (TIMOB-2760 need to be able to ref adb from either /tools or /platform-tools subdir)
** detect proguard availability (TIMOB-2782 Android: Generate / Run a Proguard configuration based on API usage)
** search configured Android SDK path first, then try ANDROID_SDK environment variable (TIMOB-8658 Android: Switch search order of folders/environment variables in androidsdk.py)
** if 64-bit Linux
*** check if ia32-libs package is installed (dpkg-query -l ia32-libs) (TIMOB-13520 Android Emulator: improve error message from missing ia32-libs dependency on linux)
*** check if /usr/lib/libGL.so exists
*** check if i386 architecture set in dpkg
* detect Android SDK Home (ANDROID_SDK_HOME)



<h3>Comments</h3>

<ol>
<li>Chris Barber 2013-08-27

   Pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/4612" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4612</a></li>
<li>Chris Barber 2013-08-27

   To test:
   
   1) Make sure you have the latest 3.2.0 (master) Titanium CLI
   2) Run "ti info"
   
   Then check
   
   1) ADB was found
   3) The Android SDK was found using the path in the Titanium CLI config (also test while ANDROID_SDK environment variable is set to a wrong path)
   4) The Android SDK was found using the ANDROID_SDK environment variable (remove the android.sdkPath config setting)
   5) On Linux, make sure the OS name and OS version are correct
   6) On 64-bit Linux, make sure that if the 32-bit libs are installed or otherwise being listed as issues
   
   Next run "ti info -o json" and verify
   
   1) Proguard was found (under android.sdk.proguard)
   2) Make sure the Android SDK home directory was found (based on ~/.android or ANDROID_SDK_HOME env var)</li>
</ol>


<p><a href="/TIMOB/TIMOB-14787.json">JSON Source</a></p>