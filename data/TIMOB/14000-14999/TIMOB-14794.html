---
title: "[TIMOB-14794] iOS: HttpClient responseText does not keep the correct encoding"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2013-08-16T23:30:36.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 17, 2013 Sprint 17 API</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Davide Cassenti</td></tr>
<tr><th>Assignee</th><td>Sabil Rahim</td></tr>
<tr><th>Created</th><td>2013-08-09T15:38:45.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-20T20:34:18.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem description</h4>
Trying to load a document encoded not with UTF-8 (in the sample, Chinese Big5), the responseText returned is not shown correctly.

<h4>Steps to reproduce</h4>
Use the following code:

<code><pre>
var xhr = Ti.Network.createHTTPClient({
	onload: function() {
		alert(this.responseText);
	}
});
xhr.open("GET", BIG5_FILE_URL);
xhr.send();
</pre></code>



<h3>Comments</h3>

<ol>
<li>Sabil Rahim 2013-08-16

   [~dcassenti] This request won't possible for us to fix. The response from the url does not contain any information about the encoding type or charset involved. Without this information we cannot find out what encoding to be used for the response. So we try to decode it using utf8 first and if that fails we try 8-bit ISO Latin 1 encoding. This is the default behavior.
   
   Here is the response header that we get back from the url. 
   (lldb) po [request responseHeaders]
   {
       "Accept-Ranges" = bytes;
       Connection = close;
       "Content-Length" = 83254;
       "Content-Type" = "text/plain";
       Date = "Fri, 16 Aug 2013 17:17:43 GMT";
       Etag = "\"1c32204-14536-4e3ffa299d9c0\"";
       "Last-Modified" = "Thu, 15 Aug 2013 17:16:31 GMT";
       Server = "Apache/2.2.24 (Unix) mod_ssl/2.2.24 OpenSSL/0.9.8e-fips-rhel5 mod_bwlimited/1.4 mod_jk/1.2.35 mod_fcgid/2.3.6";
   }
   
   This ticket cannot be fixed unless some changes are done on the server side to include the encoding type or charset in the response header. </li>
<li>Lee Morris 2017-03-20

   Closing ticket as the issue will not fix.</li>
</ol>


<p><a href="/TIMOB/TIMOB-14794.json">JSON Source</a></p>