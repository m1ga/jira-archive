---
title: "[TIMOB-14920] Android: startActivityForResult always returns RESULT_CANCELED in the callback"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Davide Cassenti</td></tr>
<tr><th>Assignee</th><td>Ashraf Abu</td></tr>
<tr><th>Created</th><td>2013-08-20T14:31:46.000+0000</td></tr>
<tr><th>Updated</th><td>2016-06-30T04:36:48.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description of the problem</h4>
When opening an intent to share data using startActivityForResult, the result e.resultCode is always set to RESULT_CANCELED

<h4>Test code</h4>
1) Use the following code to test
2) Share an image with an external app: if you share or cancel, the result is always CANCELED

<code><pre>
var win = Ti.UI.createWindow({
    backgroundColor: 'black'
});
   
var btn = Ti.UI.createButton({
    title: 'Share'
});
btn.addEventListener('click', function(e) {
    var intent = Ti.Android.createIntent({
        type: "image/jpg",
        action: Ti.Android.ACTION_SEND
    });
    
    var image = Ti.Filesystem.getFile(Ti.Filesystem.externalStorageDirectory, 'image.jpg');
    Ti.API.info(image.nativePath);
	
	intent.putExtra(Ti.Android.EXTRA_SUBJECT, "Subject");
	intent.putExtra(Ti.Android.EXTRA_TITLE, "Title");
	intent.putExtra(Ti.Android.EXTRA_TEXT, "Text");
	intent.putExtraUri(Ti.Android.EXTRA_STREAM, image.nativePath);
	Ti.Android.currentActivity.startActivityForResult(Ti.Android.createIntentChooser(intent, "Share image"), function(e) {
		switch(e.resultCode) {
			case Ti.Android.RESULT_OK:
				alert("OK"); break;
			case Ti.Android.RESULT_CANCELED:
				alert("CANCELED"); break;
		}
	});
});

win.add(btn);
win.open();	
</pre></code>

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-14920.json">JSON Source</a></p>