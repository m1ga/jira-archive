---
title: "[TIMOB-14922] Android: Always does a full rebuild since 3.1.2.GA"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-08-21T21:52:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.2</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 17, 2013 Sprint 17 Core, Release 3.1.3, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>cli, qe-closed-3.1.3, qe-testadded, regression, triage</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Allen Yeung</td></tr>
<tr><th>Created</th><td>2013-08-16T11:53:33.000+0000</td></tr>
<tr><th>Updated</th><td>2014-02-19T12:35:01.000+0000</td></tr>
</table>

<h3>Description</h3>

Since the 3.1.2.GA release of the SDK, when building for Android the CLI will always do a full rebuild, telling:

<code><pre>
Detected change in tiapp.xml, or assets deleted. Forcing full re-build...
</pre></code>

With Android on 3.1.1.GA and iOS on 3.1.2.GA all is good.
Emulator or Device doesn't matter.

<h4>To reproduce</h4>
<code><pre>
titanium sdk select 3.1.2.GA
titanium create -p android -n ./test --id test
cd test
titanium build -p android
titanium build -p android
</pre></code>

The second build will again do a full rebuild

<h3>Comments</h3>

<ol>
<li>Jamie Buckley 2013-08-19

   Tested with both Alloy and Regular titanium projects with 3.1.2 on android Emulator and could not reproduce.
   
   Fokke: Does this happen with a new default project too?
   </li>
<li>Olga Romero 2013-08-19

   I was able to reproduce this issue with a larger alloy project, building an app on to device for several times with no changes.
   Environment:
   Mac osx 10.8.4 Mountain Lion
   Appcelerator Studio, build: 3.1.2.201308091728
   Titanium Studio, build: 3.1.2.201308091617
   Titanium SDK, builds:3.1.1.GA ; 3.1.2.GA ; 3.1.3.v20130816184556 
   Alloy: 1.2.1-cr
   CLI: 3.1.2
   Does not matter if it is a device or an emulator.</li>
<li>Fokke Zandbergen 2013-08-20

   I updated the steps to reproduce, which as you can see included creating a default project, all using CLI.
   
   It always reproduces for me with:
   
   SDK 3.1.2.GA
   Alloy 1.2.0
   CLI 3.1.2</li>
<li>Tim Poulsen 2013-08-20

   I'm seeing this with Alloy projects. Building to device via Studio.
   
   Studio 3.1.2.201308091617
   TiSDK 3.1.2GA
   Alloy 1.2GA
   </li>
<li>Fokke Zandbergen 2013-08-20

   With Alloy, the <code>tiapp.xml</code> is read on each compile, but online the <code>atime</code> changes and I assume the Titanium CLI looks for an <code>mtime</code> change, so that can't be the issue.</li>
<li>Eric Merriman  2013-08-20

   [~skypanther] There is a related ticket for Studio linked to this ticket. I think this is the issue you are experiencing. Investigating this issue further, it seems that "deltafy" in the builder.py is potentially causing the tiapp.xml to be flagged as having changed, which in turn triggers a rebuild.</li>
<li>Eric Merriman  2013-08-20

   The CLI behavior may be exacerbating the Studio issue. Will continue to investigate.
   </li>
<li>Tim Poulsen 2013-08-20

   OK, I'm not seeing the workspace rebuild each time. But the tiapp.xml is being 'touched' or something because I get a full rebuild each time. If I keep tiapp.xml open in the editor, Studio prompts me that it changed on disk and asks to reload it. There's no change if I reload, so it's just the timestamp being touched.</li>
<li>Fokke Zandbergen 2013-08-21

   [~emerriman] the linked ticket is not related. I'm talking about the build of the app being a full rebuild, not about the Studio workspace being rebuild. I don't use studio at all.</li>
<li>Allen Yeung 2013-08-21

    PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/4592" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4592</a></li>
<li>Allen Yeung 2013-08-21

    3_!_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/4594" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4594</a></li>
<li>Eric Merriman  2013-08-23

    [~fokke] Hello, there are now two linked tickets. One is the ticket that spawned the commit that caused the behavior in this ticket. (TIMOB-12222) The other (TISTUD-5281) is related to this ticket because studio is triggering a reindex of the project because the tiapp.xml seems changed. Due to another studio behavior that results in an indexing of Alloy "resources" folders for existing projects, Tim is seeing the result of this ticket TIMOB-14922 causing a full rebuild (from command-line or studio) which then forces a reindex on Alloy in Studio TISTUD-5281, which takes a while since it also looks at the resources folder. 
    
    I do understand you are not using Studio.</li>
<li>Priya Agarwal 2013-08-23

    Verified this issue with Classic as well as Alloy projects from CLI and Studio. Used the below environment - 
    
    Appc-Studio: 3.1.3.201308201707
    Sdk: 3.1.3.v20130822140128
    acs:1.0.6
    alloy:1.2.1-cr
    titanium:3.1.2
    OS: OSX 10.8.4
    
    Result - The message "Detected change in tiapp.xml, or assets deleted. Forcing full re-build..." is appearing only on first execution. Second time, this message is not appearing. Observed the same behavior from Studio as well as CLI for Classic and Alloy projects.
    
    Observation - From CLI, the project build execution looks same for first time and second time for default Alloy project. Also the time taken for project build is approximately same for both the time. However could observe noticeable time difference for project build on the second time for Classic Project.</li>
<li>Olga Romero 2013-08-23

    Tested with:
    Titanium Studio, build: 3.1.3.201308201302
    Appcelerator Studio, build: 3.1.3.201308201707
    Titanium SDK, build: 3.1.3.v20130822140128
    alloy:1.2.1-cr
    CLI: 3.1.2
    Mac osx 10.8.4 Mountain Lion
    
    Actual result:
    The message "Detected change in tiapp.xml, or assets deleted. Forcing full re-build..." occurs only on a first build.
    Building a project a second time with the same SDK build won't show this mesage in a log.
    And the only slowness I noticed (for alloy and classic projects), building second + time, is on copying resources.
    
    <code><pre>
    [INFO] Copying project resources..
    [INFO] Tiapp.xml unchanged, skipping class generation
    [INFO] Compiling Javascript Resources ...
    [INFO] Compiling Android Resources... This could take some time
    </pre></code></li>
<li>roopesh nema 2014-02-19

    I am facing this issue with latest build ....
    
    Titanium Studio, build: 3.2.1.201402041146
    
    Titanium SDK version: 3.1.3 (09/18/13 12:00 222f4d1)
    
    [INFO] :   Emulator is running
    [INFO] Titanium SDK version: 3.1.3 (09/18/13 12:00 222f4d1)
    [INFO] Fastdev server running, deploying in Fastdev mode
    [INFO] Copying CommonJS modules...
    [INFO] Copying project resources..
    [INFO] Detected change in tiapp.xml, or assets deleted. Forcing full re-build...
    [INFO] Force including all modules...
    [INFO] Force including all modules...
    [INFO] Compiling Javascript Resources ...
    [INFO] Copying platform-specific files for 'Facebook' module
    [INFO] Compiling localization files
    [INFO] Adding New Relic support.
    [INFO] Compiling Android Resources... This could take some time
    [INFO] Installing application on emulator
    
    
    </li>
</ol>


<p><a href="/TIMOB/TIMOB-14922.json">JSON Source</a></p>