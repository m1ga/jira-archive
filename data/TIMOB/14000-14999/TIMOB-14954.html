---
title: "[TIMOB-14954] iOS: ASI HTTP Library converts DELETE requests to POST requests"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-03-03T23:50:36.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.3</td></tr>
<tr><th>Fix Version/s</th><td>2014 Sprint 05, 2014 Sprint 05 API, Release 3.2.3, Release 3.3.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Rick Blalock</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2013-08-23T14:59:03.000+0000</td></tr>
<tr><th>Updated</th><td>2014-03-24T21:54:21.000+0000</td></tr>
</table>

<h3>Description</h3>

The ASIHTTP lib converts DELETE requests to POST.  Reference the file here:  <a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/ASI/ASIHTTPRequest.m#L561" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/ASI/ASIHTTPRequest.m#L561</a>

Per a typical RESTful service, DELETE is a normal verb used for...deleting a resource.  This needs to be supported.

<h3>Comments</h3>

<ol>
<li>Tim Poulsen 2013-08-23

   The HTTP client object should support ALL verbs, in particular those in RFC 2616 (<a href="http://ietf.org/rfc/rfc2616)." rel="nofollow" target="_blank">http://ietf.org/rfc/rfc2616).</a> See <a href="http://annevankesteren.nl/2007/10/http-methods" rel="nofollow" target="_blank">http://annevankesteren.nl/2007/10/http-methods</a> for an even more comprehensive list.</li>
<li>Rick Blalock 2013-08-26

   Why would it be invalid?</li>
<li>Rick Blalock 2013-12-09

   I agree with Tim that all REST verbs should be supported and not converted.</li>
<li>Jamil Spain 2013-12-09

   I need to demo a rest api adapter for Cisco this week demonstrating we can do at a minimum GET, POST, PUT, DELETE.. Let me know if this can be pushed in with 3.2.0 SDK</li>
<li>Bert Grantges 2013-12-09

   we are also doing some work for demoing an interface layer that leverages HTTP verbs - as a core demo for our platform. Anything we can do to push this into 3.2 would be huge.
   </li>
<li>Vishal Duggal 2014-03-03

   master - <a href="https://github.com/appcelerator/titanium_mobile/pull/5411" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5411</a> </li>
<li>Pedro Enrique 2014-03-03

   Backport for 3.2.X <a href="https://github.com/appcelerator/titanium_mobile/pull/5412" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5412</a></li>
<li>Vishal Duggal 2014-03-03

   Note to QE. Do not close ticket till backport PR is merged for 3.2.3 release.
   </li>
<li>Wilson Luu 2014-03-24

   Closing ticket as fixed. Verified two cases:
   
   1. The failure case (this ticket), which is using SDK 3.2.2.GA, was able to *successfully* send a DELETE request to a POST url
   2. The fix, which is using SDK 3.2.3 and 3.3.0, was able to send a DELETE request to a POST url and receive a *405 error code* from the server (expected)
   
   Using the default Titanium Classic app, I used this code to verify the fix:
   <code><pre>
   label1.addEventListener('click', function(e){
   	// accepts only POST requests
   	var url = '<a href="http://httpbin.org/post" rel="nofollow" target="_blank">http://httpbin.org/post</a>';
   	
   	var client = Ti.Network.createHTTPClient({
   		
   		onload : function(e) {
   			var msg = 'onload: ' + this.responseText;
   			Ti.API.info(msg);
   			alert(msg);
   		},
   		
   		onerror : function(e) {
   			// var msg = 'onerror: ' + 'error code -> ' + e.code + ', error -> ' + e.error;
   			var msg = 'onerror: ' + this.statusText;
   			Ti.API.error(msg);
   			alert(msg);
   		},
   		
   		cache: false
   	});
   	
   	client.open('DELETE', url);
   	client.send('DELETE THE MONKEY');
   });
   </pre></code>
   
   *Tested on:*
   Appcelerator Studio, build: 3.2.3.201403190645
   SDK build: 3.2.3.v20140324094107, 3.3.0.v20140324131123
   CLI: 3.2.1
   Xcode: 5.1
   Devices: iphone 5 (7.0.6), iphone 5s (7.1)</li>
</ol>


<p><a href="/TIMOB/TIMOB-14954.json">JSON Source</a></p>