---
title: "[TIMOB-14961] CLI: iOS build for Titanium SDK 3.0.0-3.1.X does not properly set deploy type for dist builds"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-08-27T21:55:12.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 18 Core, 2013 Sprint 18, Release 3.2.0</td></tr>
<tr><th>Components</th><td>CLI</td></tr>
<tr><th>Labels</th><td>qe-closed-3.2.0</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2013-08-27T17:20:00.000+0000</td></tr>
<tr><th>Updated</th><td>2013-11-11T20:55:47.000+0000</td></tr>
</table>

<h3>Description</h3>

When building an iOS app for distribution (dist-adhoc, dist-appstore) using Titanium SDK 3.0.X or 3.1.X and using the Titanium CLI 3.2.0, the deploy type is not properly being set to "production" in the --target callback.

What happened was there was this bug and a bug in the Titanium CLI. During the Titanium CLI refactor, I fixed the second bug making this bug visible.

We can't got back and fix SDKs that have shipped, but we can augment old SDKs with runtime patches. This is where the hook system comes in. A simple hook can tie into the post-validate hook event and fix the deploy type for distribution targets.

<h3>Comments</h3>

<ol>
<li>Chris Barber 2013-08-27

   To test:
   
   1) Create an app
   2) Set the <sdk-version> to 3.1.2.GA (or any 3.0.x or 3.1.x release)
   3) Do a dist-adhoc or dist-appstore build (test both with and without the --target option)
   </li>
<li>Chris Barber 2013-08-27

   Pull request: <a href="https://github.com/appcelerator/titanium/pull/53" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium/pull/53</a></li>
<li>Olga Romero 2013-11-11

   <code><pre>
    ti build -p ios -T dist-adhoc -O /Users/oromero/Desktop
   Titanium Command-Line Interface, CLI version 3.2.0, Titanium SDK version 3.1.3.GA
   </pre></code>
   
   code}
   [DEBUG] Titanium iOS SDK directory: /Users/oromero/Library/Application Support/Titanium/mobilesdk/osx/3.1.3.GA/iphone
   [INFO]  Deploy type: production
   [INFO]  Building for target: dist-adhoc
   ```</li>
</ol>


<p><a href="/TIMOB/TIMOB-14961.json">JSON Source</a></p>