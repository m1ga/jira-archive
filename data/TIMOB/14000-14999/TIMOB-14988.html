---
title: "[TIMOB-14988] iOS: Error when opening a modal window : "NSCFString charValue: unrecognized selector""
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-08-29T23:33:42.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.3</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 18, 2013 Sprint 18 API, Release 3.1.3, Release 3.2.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>qe-3.1.3, qe-closed-3.1.3, regression</td></tr>
<tr><th>Reporter</th><td>Federico Casali</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2013-08-28T21:29:43.000+0000</td></tr>
<tr><th>Updated</th><td>2013-08-30T17:43:12.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Update</h4>
The issue is related to the fact the opened window is modal.
Attached a small sample code showing the issue.


<h4>Problem description</h4>

'Journal' Alloy sample app (<a href="https://github.com/appcelerator/alloy/tree/master/test/apps/models/journal)" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/test/apps/models/journal)</a> is throwing an exception on iOS when using TiSDK 3.1.3 (tested using latest 3.1.3.v20130828104626).

On Android it works as expected.

The issue seems to be reproducible only using 3.1.3SDK - Alloy version is the latest GA.
Using TiSDK 3.1.2.GA and Alloy 1.2.1.GA it works as expected on iOS.


<h4>Steps to reproduce</h4>
1. Grab the Alloy model sample 'Journal' (attached the whole project).
2. Run on device or emulator (tested on a Iphone 5 with iOS 6.1.4 and on iPhone simulator version 6.0/Xcode4.6 and 7.0/Xcode5)
3. Run the app and click on the 'add entry' button

Result: Application Error red-screen is shown (see screenshot).

Error log:
<code><pre>
[ERROR] :  Script Error {
[ERROR] :      backtrace = "#0 () at file://localhost/Users/fcasali/Library/Application%20Support/iPhone%20Simulator/6.1/Applications/F238416E-57EC-47D8-AD43-C6E3CBDFC826/Harness.app/alloy.js:214\n#1 addEntry() at file://localhost/Users/fcasali/Library/Application%20Support/iPhone%20Simulator/6.1/Applications/F238416E-57EC-47D8-AD43-C6E3CBDFC826/Harness.app/alloy/controllers/index.js:37";
[ERROR] :      line = 50;
[ERROR] :      message = "-[__NSCFString charValue]: unrecognized selector sent to instance 0x149583e0";
[ERROR] :      sourceId = 309899040;
[ERROR] :      sourceURL = "file://localhost/Users/fcasali/Library/Application%20Support/iPhone%20Simulator/6.1/Applications/F238416E-57EC-47D8-AD43-C6E3CBDFC826/Harness.app/alloy/controllers/add.js";
[ERROR] :  }
</pre></code>

Full log attached.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-14988_41954/iOS_journalApp_log">iOS_journalApp_log</td></td><td>2013-08-28T21:29:43.000+0000</td><td>208554</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-14988_41987/ios7_modalWinIssue.zip">ios7_modalWinIssue.zip</td></td><td>2013-08-29T18:40:16.000+0000</td><td>5830411</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-14988_41953/Screen Shot 2013-08-28 at 2.16.46 PM.png">Screen Shot 2013-08-28 at 2.16.46 PM.png</td></td><td>2013-08-28T21:29:43.000+0000</td><td>43384</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Vishal Duggal 2013-08-29

   master - <a href="https://github.com/appcelerator/titanium_mobile/pull/4625" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4625</a>
   3_1_X - <a href="https://github.com/appcelerator/titanium_mobile/pull/4626" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4626</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-14988.json">JSON Source</a></p>