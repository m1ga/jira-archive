---
title: "[TIMOB-15161] Android: Unable to change the annotation image once the map view is rendered"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2013-09-16T17:18:33.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.1, Release 3.1.2, Release 3.1.3</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 19, 2013 Sprint 19 API</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>supportTeam</td></tr>
<tr><th>Reporter</th><td>Rupesh Sharma</td></tr>
<tr><th>Assignee</th><td>Hieu Pham</td></tr>
<tr><th>Created</th><td>2013-09-13T12:14:52.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-29T00:54:30.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>
If I attempt to set the image of a annotation after it has been added to the map view and that map view has been rendered on screen, you can not change the image of the annotation again.
Although, I have found that if you set the image of an annotation after it has been added to the map view but before that map view has been rendered on screen, then you can change the image of the annotation again.

<h4>Test Case</h4>
alloy.js
<code><pre>
Alloy.Globals.Map = require('ti.map');
</pre></code>
index.xml
<code><pre>
<Alloy>
    <Window>
        <View id="mapview" ns="Alloy.Globals.Map" />
    </Window>
</Alloy>
</pre></code>
index.js
<code><pre>
// If the window is opened here then images are not set properly
$.index.open();

// API calls to the map module need to use the Alloy.Globals.Map reference
var mountainView = Alloy.Globals.Map.createAnnotation({
    latitude:37.390749,
    longitude:-122.081651,
    title:"Appcelerator Headquarters"
});

mountainView.setImage('/images/eventMarker.png');

var mountainView2 = Alloy.Globals.Map.createAnnotation({
    latitude:37.391749,
    longitude:-122.081651,
    title:"Appcelerator Headquarters 2"
});

mountainView2.setImage('/images/eventMarker.png');

$.mapview.region = {latitude:37.390749, longitude:-122.081651,
                    latitudeDelta:0.01, longitudeDelta:0.01};
$.mapview.addAnnotations([mountainView, mountainView2]);

var annotations = $.mapview.getAnnotations();

//Attempt to set the annotation image to something else
for (var i = 0; i < annotations.length; i++) {
    annotations[i].setImage('/images/eventMarkerS.png');
    alert('Image set to: ' + annotations[i].getImage());
}

// If the window is opened here then images are set properly
// $.index.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Hieu Pham 2013-09-16

   This is a creation only property, a native Android limitation: <a href="https://developers.google.com/maps/documentation/android/marker#add_a_marker" rel="nofollow" target="_blank">https://developers.google.com/maps/documentation/android/marker#add_a_marker</a> (look at 'icon'). Also, this is documented in <a href="http://docs.appcelerator.com/titanium/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/latest/#</a>!/api/Modules.Map.Annotation-property-image. Closing ticket.</li>
<li>Lee Morris 2017-03-29

   Closing ticket as the issue here is not our bug.</li>
</ol>


<p><a href="/TIMOB/TIMOB-15161.json">JSON Source</a></p>