---
title: "[TIMOB-15180] Android: Implement an event "taskremoved" when Service.onTaskRemoved() is called"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-09-17T23:39:22.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.2</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 19, 2013 Sprint 19 API, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>module_android, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Ping Wang</td></tr>
<tr><th>Assignee</th><td>Ping Wang</td></tr>
<tr><th>Created</th><td>2013-09-13T22:03:17.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-19T12:42:52.000+0000</td></tr>
</table>

<h3>Description</h3>

Swiping app away from the recent apps list will kill any background or empty processes of the application but it won't stop the running services or remove the notifications from the status bar. See the discussion here:
<a href="http://www.howtogeek.com/169549/what-exactly-happens-when-you-swipe-an-android-app-from-the-recent-apps-list/" rel="nofollow" target="_blank">http://www.howtogeek.com/169549/what-exactly-happens-when-you-swipe-an-android-app-from-the-recent-apps-list/</a>
<a href="http://lifehacker.com/what-happens-when-you-remove-an-app-from-androids-mult-1179868228" rel="nofollow" target="_blank">http://lifehacker.com/what-happens-when-you-remove-an-app-from-androids-mult-1179868228</a>
In order to get notified when the app is swiped away, we need to implement a new event which is fired from [Service.onTaskRemoved()](<a href="http://developer.android.com/reference/android/app/Service.html#onTaskRemoved(android.content.Intent))." rel="nofollow" target="_blank">http://developer.android.com/reference/android/app/Service.html#onTaskRemoved(android.content.Intent)).</a>

<h3>Comments</h3>

<ol>
<li>Ping Wang 2013-09-13

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/4687" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4687</a>
   
   For FR:
   1. Run the test case below on 4.0+ devices and should see the log "Hello World!  I am a Service.  I have this to say: Titanium rocks!". 
   2. Click the HOME button and then swipe the app away from the recent app list. Should see the log "**************************** taskremoved fired".
   
   Test case:
   ----------------------- app.js -----------------------
   <code><pre>
   var intent = Titanium.Android.createServiceIntent( { url: 'service.js' } );
   intent.putExtra('message_to_echo', 'Titanium rocks!');
   Ti.Android.startService(intent);
   </pre></code>
   ----------------------- service.js -----------------------
   <code><pre>
   var service = Titanium.Android.currentService;
   var intent = service.intent;
   var message = intent.getStringExtra("message_to_echo");
   
   service.addEventListener("taskremoved", function(){
   	Ti.API.info("**************************** taskremoved fired");
   });
   
   Titanium.API.info("Hello World!  I am a Service.  I have this to say: " + message);
   </pre></code>
   ----------------------- tiapp.xml -----------------------
   <code><pre>
   &lt;android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt;
           &lt;services&gt;
               &lt;service url="service.js"/&gt;
           &lt;/services&gt;
   &lt;/android&gt;
   </pre></code></li>
<li>Priya Agarwal 2013-10-22

   Verified the fix with:
   
   Appc-Studio: 3.2.0.201310181700
   Sdk:3.2.0.v20131021142445
   alloy:1.2.2
   npm:1.3.2
   titanium:3.2.0
   titanium-code-processor:1.0.3
   Device:Google Nexus 7(v4.2.1), iPOD Touch1(v7.0)
   Xcode: 5
   
   
   Taskremoved() working well on android.</li>
</ol>


<p><a href="/TIMOB/TIMOB-15180.json">JSON Source</a></p>