---
title: "[TIMOB-15372] iOS: Intermittent CLI build fails"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2014-06-24T17:57:13.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>cli</td></tr>
<tr><th>Reporter</th><td>Dan Tamas</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2013-09-27T12:47:32.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-31T17:32:59.000+0000</td></tr>
</table>

<h3>Description</h3>

I get this error every two or three builds:


<code><pre>
titanium build -p ios
</pre></code>

<code><pre>

/Volumes/Data/titaniumsdks/Titanium/mobilesdk/osx/3.2.0.v20130828101643/node_modules/node-appc/node_modules/wrench/lib/wrench.js:302
            var filename = files.shift();
                                 ^
TypeError: Cannot call method 'shift' of undefined
    at rmFile (/Volumes/Data/titaniumsdks/Titanium/mobilesdk/osx/3.2.0.v20130828101643/node_modules/node-appc/node_modules/wrench/lib/wrench.js:302:34)
    at /Volumes/Data/titaniumsdks/Titanium/mobilesdk/osx/3.2.0.v20130828101643/node_modules/node-appc/node_modules/wrench/lib/wrench.js:314:11
    at Object.oncomplete (fs.js:107:15)
</pre></code>


I simply re-run the above command and after another try it works. Sometimes this doesn't happen, sometimes I need to re-run the command 45 times.

Thank you.

<h3>Comments</h3>

<ol>
<li>Mostafizur Rahman 2013-09-28

   Hello Dan Tamas,
   
   Can you please posting few test code and test cases for this issue? Thanks
   </li>
<li>Dan Tamas 2013-09-28

   Why did you close the ticket? 
   When you ask for more info, you wait for it.
   
   
   </li>
<li>Dan Tamas 2013-09-28

   </li>
<li>Neeraj Gupta 2013-09-30

   We should not mark these tickets resolved until we have a resolution. It appears that this issue needs to be investigated based on the log here even if we don't have a test case.</li>
<li>Neeraj Gupta 2013-09-30

   Not sure why this ticket was assigned to me. It should be triaged and assigned to the right person.</li>
<li>Chris Barber 2014-06-24

   I just tested with 3.3.0-rc and I was unable to reproduce this issue.
   
   This ticket is pretty old. I can't believe anybody is still having this issue today.
   
   In Titanium 3.2.0, we shipped Wrench v1.5.4. In 3.3.0, we're using v1.5.8 which is the latest. Perhaps this issue was caused by a bug in that old version of Wrench or perhaps the bug was in the old iOS build. I rewrote significant portions of the iOS build towards the end of the 3.2.0 development cycle that would have been after 8/28/2013.
   
   Resolving as could not reproduce. Please comment/re-open if you can still reproduce this with 3.2.3 or newer.</li>
<li>Dan Tamas 2014-06-24

   Chris, since 3.2.x I don't think I have this issue anymore. Sometimes the cli won't upload on device, so it compiles then dies quietly without actually trying to upload the app on device. If I use any other utility to upload the app (fruitstrap based) all goes ok.
   But I think this is another ticket :)</li>
<li>Chris Barber 2014-06-24

   OK, cool.
   
   The install to device since 3.2.x should be pretty smooth. If you figure out a reproducible pattern, please create a ticket and I'll get it fixed right away.
   
   On a side note, you can always test it with [node-ios-device](<a href="https://www.npmjs.org/package/node-ios-device)" rel="nofollow" target="_blank">https://www.npmjs.org/package/node-ios-device)</a> directly:
   
   <code><pre>
   npm install node-ios-device
   cd node-ios-device
   </pre></code>
   
   Edit <code>tests/test-installApp.js</code> and fix the path to the .app folder, cross your fingers, then run:
   
   <code><pre>
   node tests/test-installApp.js
   </pre></code></li>
<li>Dan Tamas 2014-06-24

   Cool, I'll have a look as soon as I'm back from Amsterdam ;)</li>
<li>Lee Morris 2017-03-31

    Closing ticket as I am unable to reproduce the issue using the following environment; 
    iPhone 7 (10.2) 
    MacOS 10.11.6 (15G31) 
    Studio 4.8.1.201612050850 
    Ti SDK 6.0.3 GA 
    Appc NPM 4.2.8 
    Appc CLI 6.1.0 
    Ti CLI 5.0.11 
    Alloy 1.9.5 
    Arrow 1.10.1 
    Xcode 8.2 (8C38) 
    Node v4.6.0 
    Java 1.7.0_80</li>
</ol>


<p><a href="/TIMOB/TIMOB-15372.json">JSON Source</a></p>