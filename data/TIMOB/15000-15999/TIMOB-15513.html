---
title: "[TIMOB-15513] iOS7: Write data to file couldn't be completed in Ti.Filesystem.applicationSupportDirectory"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2013-10-24T21:15:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.3</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 23, 2013 Sprint 23 API</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios7, supportTeam</td></tr>
<tr><th>Reporter</th><td>Eduardo Gomez</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2013-10-17T17:41:19.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-21T18:12:24.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue description</h4>
Developer is seeing this error on iOS 7 only. When he attempts to write the  data to a file object. iOS 6 does not seem to be affected, location is below:

{quote}
var snapFolder = Ti.Filesystem.getFile(Ti.Filesystem.applicationSupportDirectory, "../Caches/Snapshots");
{quote}

<h4>Snippet code</h4>
On this particular use case, on iOS 7, the Snapshots directory is still present. It seems like the delete step did not work although the error message seems to indicate the write step failing.
<code><pre>
var win = Ti.UI.createWindow({
	backgroundColor : 'white',
	orientationModes : [Ti.UI.PORTRAIT]
});
win.open();

var label = Ti.UI.createLabel({
	text : 'No app event received. Make call while running app',
	textAlign : 'center',
	width : 'auto'
});
win.add(label);

Titanium.App.addEventListener('pause', function() {
	// this will delete the Snapshots folder and create a file in its place
	// so that the folder cannot be recreated
	var snapFolder = Ti.Filesystem.getFile(Ti.Filesystem.applicationSupportDirectory, "../Caches/Snapshots");
	snapFolder.deleteDirectory(true);
	snapFolder.write("No Folder for you!");
	label.text = "App has been paused";
});

Titanium.App.addEventListener('resume', function(e) {
	label.text = "App has resumed";
}); 
</pre></code>

<h4>Console logs</h4>
<code><pre>
Oct 17 09:08:43 QA291-iphone-5s App-Phone[558] &lt;Warning&gt;: [ERROR] Could not write data to file at path "/var/mobile/Applications/9C33C952-64EA-4F11-83B2-FC7513DCC1AS/Library/Caches/Snapshots" - details: Error Domain=NSCocoaErrorDomain Code=513 "The operation couldn’t be completed. (Cocoa error 513.)" UserInfo=0x19086c00 {NSFilePath=/var/mobile/Applications/9C33C952-64EA-4F11-83B2-FC7513DCC1AS/Library/Caches/Snapshots, NSUnderlyingError=0x17eb2fc0 "The operation couldn’t be completed. Operation not permitted"}
</pre></code>

<h3>Comments</h3>

<ol>
<li>Pedro Enrique 2013-10-24

   </li>
<li>Lee Morris 2017-03-21

   Closing ticket as the issue will not fix.</li>
</ol>


<p><a href="/TIMOB/TIMOB-15513.json">JSON Source</a></p>