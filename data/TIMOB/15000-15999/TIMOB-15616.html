---
title: "[TIMOB-15616] iOS: Hash value empty for local file system URL in WebView"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.1.3</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Marco Cota</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2013-10-30T23:41:51.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:03:34.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description:</h4>
User tried to load an html file located in the filesystem with an appended hash value (#value) but when trying to retrieve the value via window.location.hash this is null.

<h4>Test case:</h4>

Index.js
<code><pre>

'use strict';

(function (e) {
  var url = Ti.Filesystem.getResourcesDirectory() + 'html/index.html#myHash';
  $.webView.url = url;
}());

$.index.open();

</pre></code>

index.html
<code><pre>

function updateHash() {
    document.getElementById('content').textContent =
      'url: ' + document.URL +
      '\nhash: ' + window.location.hash; 
}

</pre></code>

<h4>Output:</h4>
[INFO] :   url: file:///Users/mcota/Library/Application%20Support/iPhone%20Simulator/7.0/Applications/2FA2A5DA-7AA4-4FFA-86F3-D634BD77BB39/WebViewHash.app/html/index.html
[INFO] :   hash:

<h4>Additional Comments:</h4>
This only happens when the url is from the local filesystem, when the url is an http:// address returns the hash value correctly.

<h4>Work-around:</h4>


<h3>Comments</h3>

<ol>
<li>Shak Hossain 2013-11-15

   [~btran] - if a work-around was proposed to the customer, please post it to the JIRA.</li>
<li>Betty Tran 2013-11-22

   The workaround we proposed involves setting the window.location.hash as part of a fireEvent.
   
   index.js
   
   <code><pre>
   var url = Ti.Filesystem.getResourcesDirectory() + 'html/index.html?#=myHash';
   
   $.webView.url = url;
     setTimeout(doEvent,2000);
     function doEvent(){
       Ti.App.fireEvent('webview&gt;&gt;hash',{hash:url.split('#')[1]});
     }
   
   main.js
   
   window.onhashchange = updateHash;
   
   Ti.App.addEventListener('webview&gt;&gt;hash',function(e){
   
       window.location.hash = e.hash;
     });
   
   function updateHash() {
       document.getElementById('content').textContent =
         'url: ' + document.URL +
         '\nhash: ' + window.location.hash;
     }
   </pre></code></li>
</ol>


<p><a href="/TIMOB/TIMOB-15616.json">JSON Source</a></p>