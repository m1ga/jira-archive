{
	"id": "121894",
	"key": "TIMOB-15621",
	"fields": {
		"issuetype": {
			"id": "1",
			"description": "A problem which impairs or prevents the functions of the product.",
			"name": "Bug",
			"subtask": false
		},
		"project": {
			"id": "10153",
			"key": "TIMOB",
			"name": "Titanium SDK/CLI",
			"projectCategory": {
				"id": "10100",
				"description": "Titanium and related SDKs used in application development",
				"name": "Client"
			}
		},
		"fixVersions": [
			{
				"id": "16270",
				"description": "2014 Sprint 10",
				"name": "2014 Sprint 10",
				"archived": true,
				"released": true,
				"releaseDate": "2014-05-22"
			},
			{
				"id": "16271",
				"description": "2014 Sprint 10 SDK",
				"name": "2014 Sprint 10 SDK",
				"archived": true,
				"released": true,
				"releaseDate": "2014-05-22"
			}
		],
		"resolution": null,
		"resolutiondate": null,
		"created": "2013-10-31T16:06:24.000+0000",
		"priority": {
			"name": "Medium",
			"id": "3"
		},
		"labels": [
			"module_android",
			"qe-3.4.1",
			"qe-manualtest"
		],
		"versions": [],
		"issuelinks": [
			{
				"id": "58260",
				"type": {
					"id": "10002",
					"name": "Duplicate",
					"inward": "is duplicated by",
					"outward": "duplicates"
				},
				"inwardIssue": {
					"id": "174810",
					"key": "TIMOB-27807",
					"fields": {
						"summary": "Android: convertPointToView() returns pixels instead of default units",
						"status": {
							"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
							"name": "Closed",
							"id": "6",
							"statusCategory": {
								"id": 3,
								"key": "done",
								"colorName": "green",
								"name": "Done"
							}
						},
						"priority": {
							"name": "Medium",
							"id": "3"
						},
						"issuetype": {
							"id": "1",
							"description": "A problem which impairs or prevents the functions of the product.",
							"name": "Bug",
							"subtask": false
						}
					}
				}
			},
			{
				"id": "41400",
				"type": {
					"id": "10122",
					"name": "Gantt: start-finish",
					"inward": "is triggered by",
					"outward": "is triggering"
				},
				"outwardIssue": {
					"id": "136773",
					"key": "TIMOB-17724",
					"fields": {
						"summary": "Android: Only last row with same classname is shown when tableview has height set to TI.UI.SIZE",
						"status": {
							"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
							"name": "Closed",
							"id": "6",
							"statusCategory": {
								"id": 3,
								"key": "done",
								"colorName": "green",
								"name": "Done"
							}
						},
						"priority": {
							"name": "Medium",
							"id": "3"
						},
						"issuetype": {
							"id": "1",
							"description": "A problem which impairs or prevents the functions of the product.",
							"name": "Bug",
							"subtask": false
						}
					}
				}
			},
			{
				"id": "32975",
				"type": {
					"id": "10122",
					"name": "Gantt: start-finish",
					"inward": "is triggered by",
					"outward": "is triggering"
				},
				"inwardIssue": {
					"id": "112253",
					"key": "TIMOB-13404",
					"fields": {
						"summary": "Android: TextField update value on Return event",
						"status": {
							"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
							"name": "Closed",
							"id": "6",
							"statusCategory": {
								"id": 3,
								"key": "done",
								"colorName": "green",
								"name": "Done"
							}
						},
						"priority": {
							"name": "Critical",
							"id": "1"
						},
						"issuetype": {
							"id": "1",
							"description": "A problem which impairs or prevents the functions of the product.",
							"name": "Bug",
							"subtask": false
						}
					}
				}
			},
			{
				"id": "36967",
				"type": {
					"id": "10003",
					"name": "Relates",
					"inward": "relates to",
					"outward": "relates to"
				},
				"outwardIssue": {
					"id": "125383",
					"key": "TIMOB-16308",
					"fields": {
						"summary": "iOS, Android - convertPointToView is not consistent",
						"status": {
							"description": "The issue is open and ready for the assignee to start work on it.",
							"name": "Open",
							"id": "1",
							"statusCategory": {
								"id": 2,
								"key": "new",
								"colorName": "blue-gray",
								"name": "To Do"
							}
						},
						"priority": {
							"name": "Medium",
							"id": "3"
						},
						"issuetype": {
							"id": "1",
							"description": "A problem which impairs or prevents the functions of the product.",
							"name": "Bug",
							"subtask": false
						}
					}
				}
			},
			{
				"id": "32977",
				"type": {
					"id": "10003",
					"name": "Relates",
					"inward": "relates to",
					"outward": "relates to"
				},
				"outwardIssue": {
					"id": "119507",
					"key": "TIMOB-15049",
					"fields": {
						"summary": "Android: TableView row UI is not getting updated if table or row have height set to Ti.UI.SIZE",
						"status": {
							"description": "The issue is open and ready for the assignee to start work on it.",
							"name": "Open",
							"id": "1",
							"statusCategory": {
								"id": 2,
								"key": "new",
								"colorName": "blue-gray",
								"name": "To Do"
							}
						},
						"priority": {
							"name": "Low",
							"id": "4"
						},
						"issuetype": {
							"id": "1",
							"description": "A problem which impairs or prevents the functions of the product.",
							"name": "Bug",
							"subtask": false
						}
					}
				}
			},
			{
				"id": "32976",
				"type": {
					"id": "10003",
					"name": "Relates",
					"inward": "relates to",
					"outward": "relates to"
				},
				"outwardIssue": {
					"id": "117486",
					"key": "TIMOB-14632",
					"fields": {
						"summary": "Android: Alloy Labels not updating from Android option dialog event handler",
						"status": {
							"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
							"name": "Closed",
							"id": "6",
							"statusCategory": {
								"id": 3,
								"key": "done",
								"colorName": "green",
								"name": "Done"
							}
						},
						"priority": {
							"name": "High",
							"id": "2"
						},
						"issuetype": {
							"id": "1",
							"description": "A problem which impairs or prevents the functions of the product.",
							"name": "Bug",
							"subtask": false
						}
					}
				}
			}
		],
		"assignee": null,
		"updated": "2020-03-12T01:54:17.000+0000",
		"status": {
			"description": "The issue is open and ready for the assignee to start work on it.",
			"name": "Open",
			"id": "1",
			"statusCategory": {
				"id": 2,
				"key": "new",
				"colorName": "blue-gray",
				"name": "To Do"
			}
		},
		"components": [
			{
				"id": "10202",
				"name": "Android",
				"description": "Android Platform"
			}
		],
		"description": "h3. Problem description\r\nUser relies on convertPointToView to show a tooltip in a particular position, based on the user's click. However, using SDK 3.1.3, the coordinates given back by the function are negative, and the code is not working anymore.\r\n\r\nh3. Sample code\r\nI reduced their code as much as possible. This sample shows the different values of 'y' when clicking the button using SDK 3.0.2 and SDK 3.1.3\r\n\r\nindex.xml\r\n{code}\r\n<Alloy>\r\n\t<Window class=\"container\">\r\n\t\t<View id=\"cartWindow\" class=\"container\">\r\n\t\t\t<View id=\"containerWindow\" class=\"container\">\r\n\t\t\t\t<TableView id=\"table\" zIndex=\"1\" height=\"Ti.UI.SIZE\" onClick=\"tableClick\"></TableView>\r\n\t\t\t</View>\r\n\t\t</View>\r\n\t</Window>\r\n</Alloy>\r\n{code}\r\n\r\npickerRow.xml\r\n{code}\r\n<Alloy>\r\n\t<TableViewRow id=\"rowcss\" backgroundSelectedColor='transparent' selectedBackgroundColor = 'transparent'>\r\n\t\t<Button id='btnAddToCart' left='0' backgroundColor='red' textAlign='left' width=\"55\" height=\"20\" />\r\n\t</TableViewRow>\r\n</Alloy>\r\n{code}\r\n\r\nindex.tss\r\n{code}\r\n\".container\": {\r\n\tbackgroundColor:\"white\",\r\n\twidth: Ti.UI.SIZE,\r\n\theight: Ti.UI.SIZE,\r\n\tnavBarHidden: true\r\n}\r\n{code}\r\n\r\nindex.js\r\n{code}\r\nvar item = Alloy.createController('pickerRow').getView();\r\n$.table.appendRow(item);\r\n\r\nvar parentWin = $.index, button = '';\r\nfunction changeQuant(e) {\r\n\ttry {\r\n\t\tbutton = e.source;\r\n\t\tTi.API.info(\"coordinates before convertPointToView :x\" + e.x + \" y\" + e.y);\r\n\t\tvar pos = button.convertPointToView({\r\n\t\t\tx : e.x,\r\n\t\t\ty : e.y\r\n\t\t}, parentWin);\r\n\t\tTi.API.info(\"********Position after convertPointToView**************\" + JSON.stringify(pos));\r\n\t} catch(e) {\r\n\t\tTi.API.info(e.message);\r\n\t}\r\n};\r\n\r\nfunction tableClick(e) {\r\n\tif (e.source.id == 'btnAddToCart') {\r\n\t\tchangeQuant(e);\r\n\t}\r\n}\r\n\r\n$.index.open();\r\n{code}\r\n\r\nh3. Steps\r\n1. Build with SDK 3.0.2\r\n2. Open the app on Android\r\n3. Click the red button and see logs\r\n4. Repeat the steps using SDK 3.1.3\r\n\r\nh3. **Result**\r\nThe values for 'y' are very different; in particular, with 3.0.2 and my device I get around 600, while 3.1.3 gives a -500 (negative) for the same value.\r\n\r\nh3. Work-around:\r\nThe workaround is setting the height of the tableview to some specific number e.g. \"500dp\" or \"90%\".",
		"attachment": [],
		"flagged": false,
		"summary": "Android: convertPointToView gives different results with SDK 3.1.3 compared to 3.0.2",
		"creator": {
			"name": "dcassenti",
			"key": "dcassenti",
			"displayName": "Davide Cassenti",
			"active": true,
			"timeZone": "Europe/Berlin"
		},
		"subtasks": [],
		"reporter": {
			"name": "dcassenti",
			"key": "dcassenti",
			"displayName": "Davide Cassenti",
			"active": true,
			"timeZone": "Europe/Berlin"
		},
		"environment": "Android 4.3.3 (Nexus 4)\r\nSDK 3.0.2 (works fine)\r\nSDK 3.1.3",
		"closedSprints": [
			{
				"id": 50,
				"state": "closed",
				"name": "2014 Sprint 09 Tooling",
				"startDate": "2014-04-28T15:43:24.381Z",
				"endDate": "2014-05-10T03:44:00.000Z",
				"completeDate": "2014-05-12T13:36:16.254Z",
				"originBoardId": 113
			},
			{
				"id": 104,
				"state": "closed",
				"name": "2014 Sprint 10 SDK",
				"startDate": "2014-05-12T16:00:00.000Z",
				"endDate": "2014-05-24T00:00:00.000Z",
				"completeDate": "2014-05-27T18:11:47.424Z",
				"originBoardId": 114
			}
		],
		"comment": {
			"comments": [
				{
					"id": "277584",
					"author": {
						"name": "pwang",
						"key": "pwang",
						"displayName": "Ping Wang",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "First, the test case uses the Ti.UI.SIZE as window's width and height. Those two parameters are ignored for the heavyweight window before 3.1.2. After the window refactor (TIMOB-13796), the width and height are respected for the heavyweight window now. Therefore, in order to compare the behavior between 3.0.2 and 3.1.3, we should use a window without setting width and height. The test app should be\r\n{code}\r\nvar win = Ti.UI.createWindow({\r\n    backgroundColor:\"white\",\r\n    //width: Ti.UI.SIZE,\r\n    //height: Ti.UI.SIZE,\r\n    navBarHidden: true\r\n});\r\n\r\nvar cartWindow = Ti.UI.createView({\r\n    backgroundColor:\"yellow\",\r\n    width: Ti.UI.SIZE,\r\n    height: Ti.UI.SIZE,\r\n    navBarHidden: true\r\n});\r\n\r\nvar containerWindow = Ti.UI.createView({\r\n    backgroundColor:\"blue\",\r\n    width: Ti.UI.SIZE,\r\n    height: Ti.UI.SIZE,\r\n    navBarHidden: true\r\n});\r\n\r\nvar table = Ti.UI.createTableView({\r\n\tzIndex: 1,\r\n\theight: Ti.UI.SIZE\r\n});\r\n\r\nvar rowcss = Ti.UI.createTableViewRow({\r\n\tbackgroundSelectedColor: 'transparent', \r\n\tselectedBackgroundColor: 'transparent'\r\n});\r\n\r\nvar btnAddToCart = Ti.UI.createButton({\r\n\tleft:'0', \r\n\tbackgroundColor:'red', \r\n\ttextAlign:'left',\r\n\twidth:\"100\",\r\n\theight:\"80\",\r\n});\r\n\r\nrowcss.add(btnAddToCart);\r\ntable.appendRow(rowcss);\r\ncontainerWindow.add(table);\r\ncartWindow.add(containerWindow);\r\nwin.add(cartWindow);\r\n\r\n\r\ntable.addEventListener(\"click\", function(e) {\r\n\tif (e.source == btnAddToCart) {\r\n\t\tTi.API.info(\"coordinates before convertPointToView :x\" + e.x + \" y\" + e.y);\r\n\t\tvar pos = e.source.convertPointToView({\r\n\t\t\tx : e.x,\r\n\t\t\ty : e.y\r\n\t\t}, win);\r\n\t\tTi.API.info(\"********Position after convertPointToView**************\" + JSON.stringify(pos));\r\n\t}\r\n}); \r\n\r\nwin.open();\r\n{code}\r\n\r\nThe above app breaks in 3.1.1 due to [PR#4205|https://github.com/appcelerator/titanium_mobile/pull/4205]. When the height of the table is Ti.UI.SIZE, the coordinates of the button \"btnAddToCart\" in the window which is obtained by [*getLocationInWindow()*|http://developer.android.com/reference/android/view/View.html#getLocationInWindow(int[])] always return (0,0). But its y coordinate should be ~500 because it's rendered in the center of the screen.\r\n\r\nThis issue may be related to TIMOB-14632 and TIMOB-15049. The workaround is setting the height of the tableview to some specific number e.g. \"500dp\" or \"90%\".",
					"updateAuthor": {
						"name": "pwang",
						"key": "pwang",
						"displayName": "Ping Wang",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2013-10-31T22:59:23.000+0000",
					"updated": "2013-10-31T23:09:08.000+0000"
				},
				{
					"id": "288836",
					"author": {
						"name": "sunila",
						"key": "sunila",
						"displayName": "Sunila",
						"active": true,
						"timeZone": "Asia/Kolkata"
					},
					"body": "\r\nIf the proxy is already assigned to the RowProxyItem during the layout pass, reuse it.\r\n\r\nI am not completely sure about this fix, this may require some regressions to rule out any side effects.\r\n\r\n\r\nhttps://github.com/appcelerator/titanium_mobile/pull/5239",
					"updateAuthor": {
						"name": "sunila",
						"key": "sunila",
						"displayName": "Sunila",
						"active": true,
						"timeZone": "Asia/Kolkata"
					},
					"created": "2014-01-20T16:33:04.000+0000",
					"updated": "2014-01-20T16:33:04.000+0000"
				},
				{
					"id": "299610",
					"author": {
						"name": "sunila",
						"key": "sunila",
						"displayName": "Sunila",
						"active": true,
						"timeZone": "Asia/Kolkata"
					},
					"body": "Addressed review comments, ready for merge",
					"updateAuthor": {
						"name": "sunila",
						"key": "sunila",
						"displayName": "Sunila",
						"active": true,
						"timeZone": "Asia/Kolkata"
					},
					"created": "2014-04-02T14:36:50.000+0000",
					"updated": "2014-04-02T14:36:50.000+0000"
				},
				{
					"id": "306092",
					"author": {
						"name": "vduggal",
						"key": "vduggal",
						"displayName": "Vishal Duggal",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"body": "We have a bunch of issues on TableView when the height of the TableView is set to Ti.UI.SIZE.\r\nIf you really need a size behavior then either use a scrollview or a regular Ti.UI.View with a vertical layout. \r\nRecommend not backporting this to 3.3.0 release to avoid regressions this late in the cycle",
					"updateAuthor": {
						"name": "vduggal",
						"key": "vduggal",
						"displayName": "Vishal Duggal",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2014-05-22T17:13:10.000+0000",
					"updated": "2014-05-22T17:13:10.000+0000"
				},
				{
					"id": "319524",
					"author": {
						"name": "lchoudhary",
						"key": "lchoudhary",
						"displayName": "Lokesh Choudhary",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Verified the fix.\r\nThe co ordinates which we get back are not negative & are as expected.\r\n\r\nClosing\r\n\r\nEnvironment:\r\nAppc Studio : 3.4.0.201408180158\r\nTi SDK :  3.4.0.v20140819094113\r\nMac OSX : 10.8.5\r\nAlloy : 1.5.0-dev\r\nCLI - 3.4.0-dev\r\nCode Processor: 1.1.1\r\nNexus 5 - android 4.4.4",
					"updateAuthor": {
						"name": "lchoudhary",
						"key": "lchoudhary",
						"displayName": "Lokesh Choudhary",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2014-08-20T18:01:09.000+0000",
					"updated": "2014-08-20T18:01:09.000+0000"
				},
				{
					"id": "324805",
					"author": {
						"name": "hpham",
						"key": "hpham",
						"displayName": "Hieu Pham",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"updateAuthor": {
						"name": "hpham",
						"key": "hpham",
						"displayName": "Hieu Pham",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2014-09-19T22:22:14.000+0000",
					"updated": "2014-09-19T22:22:14.000+0000"
				},
				{
					"id": "331187",
					"author": {
						"name": "sunila",
						"key": "sunila",
						"displayName": "Sunila",
						"active": true,
						"timeZone": "Asia/Kolkata"
					},
					"body": "https://github.com/appcelerator/titanium_mobile/pull/6323\r\n\r\nUpdate the view proxies in the layout pass.",
					"updateAuthor": {
						"name": "sunila",
						"key": "sunila",
						"displayName": "Sunila",
						"active": true,
						"timeZone": "Asia/Kolkata"
					},
					"created": "2014-11-07T16:43:00.000+0000",
					"updated": "2014-11-07T16:43:00.000+0000"
				},
				{
					"id": "372658",
					"author": {
						"name": "lchoudhary",
						"key": "lchoudhary",
						"displayName": "Lokesh Choudhary",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Reopening. This is not a regression it is seen with SDK 5.1.1.GA & 5.1.0.GA\r\nThe y co ordinate returns negative value.\r\n\r\nEnvironment:\r\nAppc Studio : 4.4.0.201511241829\r\nTi SDK :  5.1.2.v20151208161231\r\nTi CLI : 5.0.5\r\nAlloy : 1.7.26\r\nMAC Yosemite : 10.10.5\r\nAppc NPM : 4.2.2\r\nAppc CLI : 5.1.0\r\nNode: v0.12.27\r\nNexus 6P - Android 6.0",
					"updateAuthor": {
						"name": "lchoudhary",
						"key": "lchoudhary",
						"displayName": "Lokesh Choudhary",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2015-12-10T23:45:30.000+0000",
					"updated": "2016-01-04T22:42:58.000+0000"
				}
			],
			"maxResults": 16,
			"total": 16,
			"startAt": 0
		}
	}
}