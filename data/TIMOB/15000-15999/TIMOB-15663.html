---
title: "[TIMOB-15663] Android: Cannot require Facebook module inside a CommonJS module"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>supportTeam</td></tr>
<tr><th>Reporter</th><td>Davide Cassenti</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2013-11-05T15:35:32.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:04:05.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem description</h4>
Trying to include the Facebook module inside a CommonJS module fails.

<h4>Code to reproduce</h4>
app.js
<code><pre>
var fb = require('ui/facebook');
fb.post();
</pre></code>

ui/facebook.js
<code><pre>
exports.post = function() {
	var fb = require('facebook');
	fb.appid = Ti.App.Properties.getString('ti.facebook.appid');
	fb.permissions = ['publish_stream'];
	fb.forceDialogAuth = true;
	fb.authorize();
};
</pre></code>

<h4>Notes</h4>
Moving the content of the function from ui/facebook.js to app.js solves the problem. The module is registered in tiapp.xml, as well as the property ti.facebook.appid.

The module is not defined; this means, the <code>authorize</code> method is invalid in the sample above.

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2013-11-05

   [~dcassenti] How does it fail?</li>
<li>Davide Cassenti 2013-11-06

   [~ingo] I found out the reason why this is happening. Since the file where the facebook module is required is called <code>facebook.js</code>, the file which is actually loaded is the <code>ui/facebook.js</code> itself. Renaming it to something different solves the problem.
   
   However, in iOS it seems like the Facebook module has priority over the file in the same directory, so the code works fine.</li>
</ol>


<p><a href="/TIMOB/TIMOB-15663.json">JSON Source</a></p>