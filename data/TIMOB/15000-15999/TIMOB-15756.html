---
title: "[TIMOB-15756] Android: Ti.File.exists() slow performance"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.1.3</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>SupportTeam</td></tr>
<tr><th>Reporter</th><td>Vladimir S</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2013-11-04T18:36:32.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:04:04.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem Description</h4>
I just noticed that calling Ti.File.exists() on a file that is missing is quite costly in Android (on Galaxy S4). The folder contains only one file, and I am trying Ti.Filesystem.getFile('wrongfile').exists(). It takes 500-600 ms for this call to complete. In comparison Ti.Filesystem.getFile('wrongfile').getSize() returns 0 immediately.

<h4>Workaround</h4>
Use Ti.Filesystem.getFile('wrongfile').getSize() instead of exists



<h3>Comments</h3>

<ol>
<li>Motiur Rahman 2013-11-05

   Hi Vladimir S,
   
   Could you share some simple app.js code so that i reproduce this issue.
   
   Thanks,</li>
<li>Philippe Wueger 2014-05-27

   The TiResourceFile exists() method does a directory listing if the file does not exist in order to check if the file is a directory. This directory listing seems to be slow (maybe only on large directories).
   
   Possible solutions within the Titanium framework:
   1. Add an (optional) argument "checkForDirectories" to the exists method and only check for directory if really needed
   2. Check if there are more efficient solutions to see if a file is an existing directory
   
   </li>
<li>Ingo Muschenetz 2014-05-27

   [~philet] Can you give an example of what is slow? What is the difference between a file in a directory with only one file and a directory with 1000 files.</li>
<li>Philippe Wueger 2014-06-10

   Hi Ingo
   
   On a Galaxy Nexus Phone with SDK 3.2.3 it does not seem to make a difference if a directory with 1000 files is checked or a directory with 1 file. If the file does not exist, it is slow (around ~70ms). If the file exists, it is fast (<1ms).
   
   See my code and the results below.
   
   Thanks & Regards,
   Philippe
   
   app.js
   <code><pre>
   var directoryWith1000Files = 'oneFile';
   var directoryWith1File = 'thousandFiles';
   var existingFile = 'i-do-exist.txt';
   var nonExistentFile = 'i-do-not-exist.txt';
   
   function measure(directory, fileName) {
   	for (var i=0; i &lt; 10; i++) {
   		var file = Ti.Filesystem.getFile(directory, fileName);
   		var t1 = new Date();
   		var result = file.exists();
   		var t2 = new Date();
   		Ti.API.info(String.format('TIME (ms): %d | %s | %s', t2.getTime() - t1.getTime(), result ? 'EXISTS' : 'DOES NOT EXIST', file.nativePath));
   	};	
   }
   
   Ti.API.info("directoryWith1File / existingFile:");
   measure(directoryWith1File, existingFile);
   
   Ti.API.info("directoryWith1000Files / existingFile:");
   measure(directoryWith1000Files, existingFile);
   
   Ti.API.info("directoryWith1File / nonExistentFile:");
   measure(directoryWith1File, nonExistentFile);
   
   Ti.API.info("directoryWith1000Files / nonExistentFile:");
   measure(directoryWith1000Files, nonExistentFile);
   
   </pre></code>
   
   Results:
   <code><pre>
   [INFO] :   TIME (ms): 3 | EXISTS | file:///android_asset/Resources/thousandFiles/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/thousandFiles/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/thousandFiles/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/thousandFiles/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/thousandFiles/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/thousandFiles/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/thousandFiles/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/thousandFiles/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/thousandFiles/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/thousandFiles/i-do-exist.txt
   [INFO] :   directoryWith1000Files / existingFile:
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/oneFile/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/oneFile/i-do-exist.txt
   [INFO] :   TIME (ms): 1 | EXISTS | file:///android_asset/Resources/oneFile/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/oneFile/i-do-exist.txt
   [INFO] :   TIME (ms): 3 | EXISTS | file:///android_asset/Resources/oneFile/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/oneFile/i-do-exist.txt
   [INFO] :   TIME (ms): 1 | EXISTS | file:///android_asset/Resources/oneFile/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/oneFile/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/oneFile/i-do-exist.txt
   [INFO] :   TIME (ms): 0 | EXISTS | file:///android_asset/Resources/oneFile/i-do-exist.txt
   [INFO] :   directoryWith1File / nonExistentFile:
   [INFO] :   TIME (ms): 88 | DOES NOT EXIST | file:///android_asset/Resources/thousandFiles/i-do-not-exist.txt
   [INFO] :   TIME (ms): 77 | DOES NOT EXIST | file:///android_asset/Resources/thousandFiles/i-do-not-exist.txt
   [INFO] :   TIME (ms): 85 | DOES NOT EXIST | file:///android_asset/Resources/thousandFiles/i-do-not-exist.txt
   [INFO] :   TIME (ms): 72 | DOES NOT EXIST | file:///android_asset/Resources/thousandFiles/i-do-not-exist.txt
   [INFO] :   TIME (ms): 79 | DOES NOT EXIST | file:///android_asset/Resources/thousandFiles/i-do-not-exist.txt
   [INFO] :   TIME (ms): 68 | DOES NOT EXIST | file:///android_asset/Resources/thousandFiles/i-do-not-exist.txt
   [INFO] :   TIME (ms): 66 | DOES NOT EXIST | file:///android_asset/Resources/thousandFiles/i-do-not-exist.txt
   [INFO] :   TIME (ms): 67 | DOES NOT EXIST | file:///android_asset/Resources/thousandFiles/i-do-not-exist.txt
   [INFO] :   TIME (ms): 70 | DOES NOT EXIST | file:///android_asset/Resources/thousandFiles/i-do-not-exist.txt
   [INFO] :   TIME (ms): 66 | DOES NOT EXIST | file:///android_asset/Resources/thousandFiles/i-do-not-exist.txt
   [INFO] :   directoryWith1000Files / nonExistentFile:
   [INFO] :   TIME (ms): 66 | DOES NOT EXIST | file:///android_asset/Resources/oneFile/i-do-not-exist.txt
   [INFO] :   TIME (ms): 66 | DOES NOT EXIST | file:///android_asset/Resources/oneFile/i-do-not-exist.txt
   [INFO] :   TIME (ms): 78 | DOES NOT EXIST | file:///android_asset/Resources/oneFile/i-do-not-exist.txt
   [INFO] :   TIME (ms): 70 | DOES NOT EXIST | file:///android_asset/Resources/oneFile/i-do-not-exist.txt
   [INFO] :   TIME (ms): 86 | DOES NOT EXIST | file:///android_asset/Resources/oneFile/i-do-not-exist.txt
   [INFO] :   TIME (ms): 70 | DOES NOT EXIST | file:///android_asset/Resources/oneFile/i-do-not-exist.txt
   [INFO] :   TIME (ms): 67 | DOES NOT EXIST | file:///android_asset/Resources/oneFile/i-do-not-exist.txt
   [INFO] :   TIME (ms): 67 | DOES NOT EXIST | file:///android_asset/Resources/oneFile/i-do-not-exist.txt
   [INFO] :   TIME (ms): 66 | DOES NOT EXIST | file:///android_asset/Resources/oneFile/i-do-not-exist.txt
   [INFO] :   TIME (ms): 65 | DOES NOT EXIST | file:///android_asset/Resources/oneFile/i-do-not-exist.txt
   </pre></code></li>
</ol>


<p><a href="/TIMOB/TIMOB-15756.json">JSON Source</a></p>