---
title: "[TIMOB-15764] IOS Webview using setHTML shows an ERROR 'Couldn't determine the proper encoding.' at closing"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2013-12-23T19:25:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.3</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>SupportTeam</td></tr>
<tr><th>Reporter</th><td>Nico de Groot</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2013-11-06T22:14:39.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-22T21:16:03.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem Description</h4>

When a webview is closed which was filled by using setHTML, it shows errors in the console

<h4>Test case</h4>
<code><pre> 
webview = Ti.UI.createWebView();
	self.add(webview);

	self.showArticle = function(html) {
		webview.setHtml("&lt;p&gt;hi&lt;/p&gt;");

        };

</pre></code>

<h4>Extra info (error message) </h4>
[ERROR] Couldn't determine the proper encoding. Make sure this file: LucepediAPP.app is UTF-8 encoded.
[ERROR] Error loading file: /Users/ncdegroot/Library/Application Support/iPhone Simulator/6.1/Applications/F751D4EE-E3B7-4823-B3F3-F8A76ED38238/LucepediAPP.app. Message was: Error Domain=NSCocoaErrorDomain Code=257 "The operation couldn’t be completed. (Cocoa error 257.)" UserInfo=0xae690e0 {NSFilePath=/Users/ncdegroot/Library/Application Support/iPhone Simulator/6.1/Applications/F751D4EE-E3B7-4823-B3F3-F8A76ED38238/LucepediAPP.app, NSUnderlyingError=0xae69140 "The operation couldn’t be completed. Permission deni


<h3>Comments</h3>

<ol>
<li>Mauro Parra-Miranda 2013-11-21

   Hello,
   as additional comment, we have seen this bug with other customers' environments. 
   
   Best,
   Mauro </li>
<li>Nico de Groot 2013-12-21

   The error occurs after the first close of the window (back button). After a code review and retesting I discovered the cause. Closing the window prevents reopening the webview error free because the containing window has to be created again. In my case the webview was recreated on reopening, but not the containing window. By moving <code><pre>createWindow()</pre></code> inside the eventlistener that opens the window, the error disappears.
   
   <code><pre>
   item_container_window = Ti.UI.createWindow();
   ...
   newsview.addEventListener('itemSelected', function(e) {
   	item_container_window = Ti.UI.createWindow();
   	itemview = new ItemView("news");
   	item_container_window.add(itemview);
   
   	itemview.showArticle(e.link); 
   	win.tab.open(item_container_window);
   });
   </pre></code>
   
   <code><pre>
   newsview.addEventListener('itemSelected', function(e) {
   	item_container_window = Ti.UI.createWindow();
   	itemview = new ItemView("news");
   	item_container_window.add(itemview);
   
   	itemview.showArticle(e.link); 
   	win.tab.open(item_container_window);
   });
   </pre></code>
   
   I think this issues can be marked as resolved, programmer error after all.
   </li>
<li>Ingo Muschenetz 2013-12-23

   Resolving as invalid based on customer feedback.</li>
<li>Lee Morris 2017-03-22

   Closing ticket as invalid with reference to the above comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-15764.json">JSON Source</a></p>