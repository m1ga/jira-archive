---
title: "[TIMOB-15785] iOS: Push Notifications callback not being fired"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-11-22T00:29:03.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 24, 2013 Sprint 24 API, Release 3.2.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>callback, critical, notifications, push, triage</td></tr>
<tr><th>Reporter</th><td>Eric Wieber</td></tr>
<tr><th>Assignee</th><td>Sabil Rahim</td></tr>
<tr><th>Created</th><td>2013-11-18T21:20:10.000+0000</td></tr>
<tr><th>Updated</th><td>2013-11-26T23:28:27.000+0000</td></tr>
</table>

<h3>Description</h3>

Apps using Ti SDK 3.2.0 master are not receiving the callback event in registerForPushNotifications  when the app is open.  

This means the app cannot present any information from a push notification while the app is open. 

note: I do NOT use ti.cloud - I have my own APN server which works fine. 

I am not using Alloy. 

Notifications are correctly received when the app is closed/paused. 

Should be easy enough to confirm without a specific test case.

#urgent



<h3>Comments</h3>

<ol>
<li>kosso 2013-11-19

   Is it possible this is related to the old deprecation warning about accessing the top-level APS key 
   
   From TiApp.m 
   <code><pre>
   DebugLog(@"[WARN] Accessing APS keys from toplevel of notification is deprecated");
   </pre></code>
   
   </li>
<li>kosso 2013-11-19

   There's definitely something seriously wrong with Push Notifications and Ti SDK 3.2.0.x on iOS.
   
   When the app is open, nothing fires at all when receiving a push notification. 
   
   On closing the app, then firing off a push notification from my server, it arrives fine, but if the app is launched from that notification and resumes, there is also no indication of the notification. 
   
   Simply logging the success callback event and viewing the xCode console log shows nothing is triggered. (And also show that it does on 3.1.x) 
   
   
   
   
   
   
   
   </li>
<li>kosso 2013-11-19

   Another update on this: 
   
   Commenting out the ...
   
   <code><pre>
   #pragma mark Remote Notifications iOS 7 
   Delegate callback for Silent Remote Notification.
   </pre></code>
   
   ... didReceiveRemoteNotification handler section in TiApp.m stops this issue happening. 
   
   So, is this broken? Or is there some extra documentation I haven't seen yet most likely regarding iOS7's "silent remote notifications".
   
   
   references : <a href="https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/IPhoneOSClientImp.html" rel="nofollow" target="_blank">https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/IPhoneOSClientImp.html</a>
   Thanks.
   </li>
<li>Eric Wieber 2013-11-21

   Hi Kosso,
   
   We were able to reproduce this error and have escalated the ticket.
   It is an SDK bug and we are investigating solutions.
   Thank you for identifying this issue and for bringing it to our attention!
   
   </li>
<li>Sabil Rahim 2013-11-22

   master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/5008" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5008</a></li>
<li>kosso 2013-11-22

   phew. good work people! :) </li>
<li>Eric Wieber 2013-11-26

   Fix verified using iPhone 5 7.0.3. Was able to subscribe to and receive push notifications. Callbacks were fired.</li>
</ol>


<p><a href="/TIMOB/TIMOB-15785.json">JSON Source</a></p>