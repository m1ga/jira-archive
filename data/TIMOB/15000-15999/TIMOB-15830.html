---
title: "[TIMOB-15830] iOS: Ti.Media.createSound \"looping\" set on creation fails "
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Reopened</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.1.3</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>android, createsound, looping, sound</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2013-09-06T08:12:56.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:04:04.000+0000</td></tr>
</table>

<h3>Description</h3>

On iOS this works fine:

<code><pre>
var music = Ti.Media.createSound({
    url: 'music.aac',
    looping: true
});
music.play();
</pre></code>

On Android you need to set <code>looping</code> after creation and in the tests I ran even right before calling <code>play()</code>, or the music will stop after one or some loops.

<code><pre>
var music = Ti.Media.createSound({
    url: 'music.aac',
    looping: true
});
music.looping = true;
music.play();
</pre></code>

<h4>Logs</h4>
When the playback on Android stops, the logs show:

<code><pre>
09-10 21:35:16.422: I/ALSAModule(1838): Terminated ALSA PLAYBACK device hifi
09-10 21:35:16.812: I/yamaha::media::UserDep(1838): UserDep::getRouteInfo(output: audioengine=0, devices=00000002h
09-10 21:35:16.812: I/yamaha::media::UserDep(1838):                       incall: onoff=0, devices=00000000h
09-10 21:35:16.812: I/yamaha::media::UserDep(1838):                       capture: onoff=0, devices=00000000h, audioSource=0
09-10 21:35:16.812: I/yamaha::media::UserDep(1838):                       playback: audio_onoff=0, line_onoff=0)
</pre></code>

<h4>Steps to reproduce</h4>

<h4>Create a new app: <code>titanium create -p ios,android -n testLoop -d . --id test.loop</code></h4>
<h4>As <code>app.js</code> use:</h4>
    <code><pre>
    var w = Ti.UI.createWindow({backgroundColor:'white'});
    var b = Ti.UI.createButton({title:'Play'});
    var m = Ti.Media.createSound({
        url: 'music.aac',
        looping: true
    });
    b.addEventListener('click', function () {
        m.play();
    });
    w.add(b);
    w.open();
    </pre></code>
<h4>Drop the attached <code>music.acc</code> (CCL) in the <code>Resources</code> folder.</h4>
<h4>Run the app on both iOS and Android and see the music stop on Android after one or some loops.</h4>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-15830_42363/music.aac">music.aac</td></td><td>2013-09-10T19:37:31.000+0000</td><td>121214</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Mauro Parra-Miranda 2013-09-09

   HEllo,
   I tested your iOS version in a device with Android 4.3, can't reproduce the issue. Anything in your logs? Any specific device?
   
   Best,
   
   Mauro </li>
<li>Mauro Parra-Miranda 2013-09-09

   Tested, working fine. </li>
<li>Fokke Zandbergen 2013-09-10

   Updated the description with exact step. Problem doesn't always occur after one loop, but sometimes after several. Setting <code>looping</code> after creation fixes it.</li>
<li>Fokke Zandbergen 2013-11-26

   [~mpmiranda] did you try again after my update and comment on Sept 10th? I see you are on a closing-tickets spree but that shouldn't go without any decent response!</li>
</ol>


<p><a href="/TIMOB/TIMOB-15830.json">JSON Source</a></p>