---
title: "[TIMOB-15831] Android: Ti.Media.createSound \"looping\" set on creation fails "
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-02-14T22:06:47.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.3</td></tr>
<tr><th>Fix Version/s</th><td>2014 Sprint 03 API</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, createsound, looping, module_media, qe-closed-3.3.0, qe-testadded, sound</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Biju pm</td></tr>
<tr><th>Created</th><td>2013-11-26T14:58:16.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-20T10:39:11.000+0000</td></tr>
</table>

<h3>Description</h3>

On iOS this works fine:

<code><pre>
var music = Ti.Media.createSound({
    url: 'music.aac',
    looping: true
});
music.play();
</pre></code>

On Android you need to set <code>looping</code> after creation and in the tests I ran even right before calling <code>play()</code>, or the music will stop after one or some loops.

<code><pre>
var music = Ti.Media.createSound({
    url: 'music.aac',
    looping: true
});
music.looping = true;
music.play();
</pre></code>

<h4>Logs</h4>
When the playback on Android stops, the logs show:

<code><pre>
09-10 21:35:16.422: I/ALSAModule(1838): Terminated ALSA PLAYBACK device hifi
09-10 21:35:16.812: I/yamaha::media::UserDep(1838): UserDep::getRouteInfo(output: audioengine=0, devices=00000002h
09-10 21:35:16.812: I/yamaha::media::UserDep(1838):                       incall: onoff=0, devices=00000000h
09-10 21:35:16.812: I/yamaha::media::UserDep(1838):                       capture: onoff=0, devices=00000000h, audioSource=0
09-10 21:35:16.812: I/yamaha::media::UserDep(1838):                       playback: audio_onoff=0, line_onoff=0)
</pre></code>

<h4>Steps to reproduce</h4>

<h4>Create a new app: <code>titanium create -p ios,android -n testLoop -d . --id test.loop</code></h4>
<h4>As <code>app.js</code> use:</h4>
    <code><pre>
    var w = Ti.UI.createWindow({backgroundColor:'white'});
    var b = Ti.UI.createButton({title:'Play'});
    var m = Ti.Media.createSound({
        url: 'music.aac',
        looping: true
    });
    b.addEventListener('click', function () {
        m.play();
    });
    w.add(b);
    w.open();
    </pre></code>
<h4>Drop the attached <code>music.acc</code> (CCL) in the <code>Resources</code> folder.</h4>
<h4>Run the app on both iOS and Android and see the music stop on Android after one or some loops.</h4>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-15831_44199/music.aac">music.aac</td></td><td>2013-11-26T14:58:17.000+0000</td><td>121214</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Biju pm 2013-11-27

   PR : - 
   <a href="https://github.com/appcelerator/titanium_mobile/pull/5036" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5036</a></li>
<li>Priya Agarwal 2014-06-20

   Verified with environment:
   
   Appcelerator-Studio:3.3.0.201406171619
   Sdk:3.3.0.v20140619164112
   acs:1.0.14
   alloy:1.4.0-rc
   npm:1.3.2
   titanium:3.3.0-rc
   titanium-code-processor:1.1.1
   xcode:5.1.1
   OS:Maverick(10.9.3)
   Device:iPhone5s(v7.1.1),Nexus4(v4.1.1)</li>
</ol>


<p><a href="/TIMOB/TIMOB-15831.json">JSON Source</a></p>