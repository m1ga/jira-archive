---
title: "[TIMOB-15858] CLI: Error while cleaning a project after build"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>androidlib, cb-tooling</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2013-12-02T20:40:58.000+0000</td></tr>
<tr><th>Updated</th><td>2016-09-02T06:00:35.000+0000</td></tr>
</table>

<h3>Description</h3>



<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2015-08-26

   </li>
<li>Fokke Zandbergen 2015-08-26

   Why not just rimraf the whole <code>build</code> folder?</li>
<li>Chris Barber 2015-08-26

   [~fokkezb] How is rimraf any different than a <code>wrench.rmdirSyncRecursive()</code>? <a href="https://github.com/appcelerator/titanium_mobile/blob/master/cli/commands/clean.js#L126-L130" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/cli/commands/clean.js#L126-L130</a></li>
<li>Fokke Zandbergen 2015-08-26

   Well, apparently Isaacs handles this case:
   <a href="https://github.com/isaacs/rimraf/blob/master/rimraf.js#L321" rel="nofollow" target="_blank">https://github.com/isaacs/rimraf/blob/master/rimraf.js#L321</a></li>
<li>Chris Barber 2015-08-26

   Maybe we should just <code>exec('rm -rf /path/to/build/dir')</code>.</li>
<li>Fokke Zandbergen 2015-08-26

   I think rimraf handles cross-platform compat better.</li>
<li>Chris Barber 2015-08-26

   Until I hear a solid argument to move away from <code>wrench.rmdirSyncRecursive()</code> and proof that rimraf actually solves this problem, I'm not going to touch anything which puts this ticket in jeopardy of being resolved won't fix. My guess is rimraf would have the same problem.</li>
<li>Fokke Zandbergen 2015-08-26

   As always, it seems you are right and even <code>rm -rf</code> would fail:
   
   <a href="https://github.com/oortcloud/meteorite/issues/235#issuecomment-32572271" rel="nofollow" target="_blank">https://github.com/oortcloud/meteorite/issues/235#issuecomment-32572271</a></li>
<li>Fokke Zandbergen 2015-08-26

   Haha, ugly workaround:
   
   <a href="https://github.com/oortcloud/meteorite/pull/237/files" rel="nofollow" target="_blank">https://github.com/oortcloud/meteorite/pull/237/files</a></li>
<li>Chris Barber 2015-08-26

    I'm sure it's just a timing thing. I bet if we did a retry with a 250ms pause, it would probably work, but then we would have to make it async instead of sync, which is fine.</li>
</ol>


<p><a href="/TIMOB/TIMOB-15858.json">JSON Source</a></p>