---
title: "[TIMOB-15879] Android: Nine-patch images not displayed when placed in density-specific folder"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-12-05T07:21:56.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 25, 2013 Sprint 25 Core, Release 3.2.0, Release 3.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>module_imageview, nine-patch, qe-testadded, regression, triage</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2013-12-04T12:06:51.000+0000</td></tr>
<tr><th>Updated</th><td>2014-07-29T20:36:18.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>To reproduce:</h4>

1. Create a project: <code>ti create -p android -n nine --id test.nine -d .</code>
2. Replace app.js code by:
    <code><pre>
    var win = Titanium.UI.createWindow({  
        backgroundColor:'#fff'
    });

    var view = Ti.UI.createView({
        width: 100,
        height: 100,
        backgroundImage: '/images/foo.png'
    });

    win.add(view);

    win.open();
    </pre></code>
3. Place the attached (or any) image in <code>/images/foo.9.png</code>
4. Run the project to confirm it works.
5. Move the image to <code>/android/images/foo.9.png</code>
6. Run the project again to confirm it works.
5. Move the image to <code>/android/images/res-mdpi/foo.9.png</code> (or any other density-specific folder)
6. Run the project again to confirm it does *not* work.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-15879_44361/foo.9.png">foo.9.png</td></td><td>2013-12-04T12:06:51.000+0000</td><td>8076</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2013-12-04

   Thanks. Which version is this a regression against?</li>
<li>Fokke Zandbergen 2013-12-04

   Works fine in 3.1.3.GA SDK and 3.1.2 CLI
   
   It might be more of a CLI problem? I should test 3.1.3.GA against 3.2.0-beta3 CLI then?</li>
<li>Ingo Muschenetz 2013-12-04

   Yes, you should be able to test 3.1.3.GA SDK + 3.2.0-beta3 CLI.</li>
<li>Fokke Zandbergen 2013-12-04

   * Verified working on 3.1.3.GA SDK + 3.2.0-beta CLI
   * Verified working on 3.1.3.GA SDK + 3.1.2 CLI
   * Verified broken on 3.2.0.v20131126144841 SDK + 3.2.0-beta CLI</li>
<li>Fokke Zandbergen 2013-12-04

   So the cause seems to be the SDK, not the CLI.</li>
<li>Ingo Muschenetz 2013-12-04

   Thanks. Moving to a SDK issue.</li>
<li>Ping Wang 2013-12-04

   This is a CLI issue. Similar to TIMOB-10806, the hash of the nine-patch image is not calculated correctly. From the log
   <code><pre>
   E/TiRHelper(18156): (main) [19,316] Error looking up resource: foo_643a3006c7
   E/TiRHelper(18156): java.lang.NoSuchFieldException: foo_643a3006c7
   E/TiRHelper(18156): 	at java.lang.Class.getDeclaredField(Class.java:631)
   E/TiRHelper(18156): 	at org.appcelerator.titanium.util.TiRHelper.lookupResource(TiRHelper.java:77)
   E/TiRHelper(18156): 	at org.appcelerator.titanium.util.TiRHelper.getResource(TiRHelper.java:105)
   </pre></code>
   we can see we are looking for the image "foo_643a3006c7". But in the build/android/res/drawable-hdpi/ folder, the image name is "foo_cc63ca97ae.9.png" if using the master, while the image name is "foo_643a3006c7.9.png" if using 3.1.3.GA.</li>
<li>Chris Barber 2013-12-04

   Master pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/5061" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5061</a>
   3.2.x pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/5062" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5062</a></li>
<li>Paras Mishra 2013-12-05

   Moved image foo.9.png to all three locations as above mentioned 
   /images/foo.9.png
   /android/images/foo.9.png
   /android/images/res-mdpi/foo.9.png
   
   Image is getting displayed in all conditions.
   
   Verified fix on:
   Device : Google Nexus 7,  Android Version: 4.3
   SDK: 3.2.0.v20131204220843
   CLI version : 3.2.0-beta
   OS : MAC OSX 10.9
   Alloy: 1.3.0-beta
   ACS: 1.0.9
   Appcelerator Studio, build: 3.2.0.201312042306
   titanium-code-processor: 1.1.0-beta
   XCode : 5.0.2</li>
</ol>


<p><a href="/TIMOB/TIMOB-15879.json">JSON Source</a></p>