---
title: "[TIMOB-15906] iOS: NavBarButton memory leak"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Reopened</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.1.3</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>SupportTeam</td></tr>
<tr><th>Reporter</th><td>Matej</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2013-10-17T11:07:12.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:04:03.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem Description</h4>
When a window is closed, the NavBarButtons should be removed, as well as other objects in the window. 

<h4>Steps to reproduce</h4>
<h4>Create a new mobile project</h4>
<h4>Add this to app.js</h4>
<code><pre>
var win2 = Titanium.UI.createWindow({
    backgroundColor: 'red',
    title: 'Red Window'
});
 
var win1 = Titanium.UI.iOS.createNavigationWindow({
   window: win2
});
 
 
win2.addEventListener("click", function(){
    var leftOne = Ti.UI.createButton({
        systemButton: Ti.UI.iPhone.SystemButton.DONE
    });
 
    var rightOne = Ti.UI.createButton({
        systemButton: Ti.UI.iPhone.SystemButton.DONE
    });
 
 
    var blueWin = Ti.UI.createWindow({
        leftNavButton: leftOne,
        rightNavButton: rightOne,
        backgroundColor: "blue"
    });
 
 
    var closeBlueWin = Titanium.UI.createButton({
        title: 'Close Blue Window'
    });
 
    closeBlueWin.addEventListener('click', function(){
        win1.closeWindow(blueWin);
    });
 
    blueWin.add(closeBlueWin);
    win1.openWindow(blueWin);
});
 
 
win1.open();
</pre></code>
<h4>Run this in instruments, the memory only grows as you can see in the attached image. </h4>

<h4>Extra information </h4>
Forum: <a href="http://developer.appcelerator.com/question/158445/navbarbutton-memory-leak" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/158445/navbarbutton-memory-leak</a>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-15906_43262/Sn_mka_obrazovky_2013_10_16_o_12_47_58_PM.png">Sn_mka_obrazovky_2013_10_16_o_12_47_58_PM.png</td></td><td>2013-10-17T11:07:12.000+0000</td><td>46096</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Mauro Parra-Miranda 2013-10-22

   Hello,
   
   You need to clean the elements by yourself. Check this:
   
   <a href="https://gist.github.com/mauropm/5923980" rel="nofollow" target="_blank">https://gist.github.com/mauropm/5923980</a>
   
   Best,
   
   Mauro </li>
<li>Matej 2013-10-22

   The first thing which I have tried was:
   
   <code><pre>
   blueWin.remove(leftOne);
   leftOne = null;
   </pre></code>
   
   But it didn't work. I will try it again... Anyway why those buttons are not removed automatically after win.close()? Normal button in the window is removed...</li>
<li>Matej 2013-10-27

   Alright, so I have tried it again and basically it doesn't work for me. Please if this is not a bug can you provide me some solution that work? 
   
   *As I asked above why those buttons are not removed automatically same as normal button in the window? I think they have to be removed by win.close() otherwise if I have to remove every time, every navButton from different window (+another objects) that is very annoying process.
   
   Thanks
   
   
   <code><pre>
    closeBlueWin.addEventListener('click', function(){
           win1.closeWindow(blueWin);
           
           blueWin.remove(leftOne); //[WARN] :   Called remove for [object TiUIButton] on [object TiUIWindow], but [object TiUIButton] isn't a child or has already been removed.
           blueWin.remove(rightOne);
           
           leftOne = null;
           rightOne = null;
           blueWin = null;
       });
   </pre></code></li>
<li>Mauro Parra-Miranda 2013-10-29

   Hello,
   
   did you remove the events listeners for the buttons?
   
   BEst,
   
   Mauro </li>
<li>Matej 2013-10-29

   As you can see above navBarButtons don't have any eventListeners.</li>
<li>Mauro Parra-Miranda 2013-10-29

   Hello Matej,
   how do you know that the memory is leaking? How did you test it?
   
   Best,
   
   Mauro </li>
<li>Matej 2013-10-29

   You can see it in the picture above (In attachments). Count of NavBarButton is increasing every time when is window opened and it never decrease after win.close(). Normal button that is in the window is alright, only navButtons doesn't work properly...
   
   *For test you can use Instruments from Xcode</li>
<li>Matej 2013-10-31

   Will this issue opened or not?</li>
<li>Matej 2013-11-06

   ???</li>
<li>Mauro Parra-Miranda 2013-11-24

    Invalid issue. </li>
<li>Matej 2013-11-24

    Hi Mauri, please if this issue is invalid can you provide some solution? As you can see above I tried a lot of things and basically it doesn't work. If you don't have any solution I think this is not invalid... Thank you</li>
</ol>


<p><a href="/TIMOB/TIMOB-15906.json">JSON Source</a></p>