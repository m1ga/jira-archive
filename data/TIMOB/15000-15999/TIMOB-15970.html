---
title: "[TIMOB-15970] Can't select ad-hoc provisioning profile"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-01-23T00:23:20.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 26, 2013 Sprint 26 Core, 2014 Sprint 02, 2014 Sprint 02 Core, Release 3.1.4, Release 3.2.0, Release 3.3.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>appcelerator_smoke, ios, qe-closed-3.2.0, qe-manualtest</td></tr>
<tr><th>Reporter</th><td>Peter Evans</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2013-12-10T21:22:19.000+0000</td></tr>
<tr><th>Updated</th><td>2014-08-08T16:45:09.000+0000</td></tr>
</table>

<h3>Description</h3>

When attempting to build an ad-hoc distribution, the provisioning profiles, that previously worked, are not displayed and therefore cannot be selected.

Attempted measures
- Deletion of /Applications/Titanium\ Studio
- Deletion of ~/Library/Application\ Support/Titanium
- Reinstallation of Appcelerator Titanium.
- Deletion of workspace .metadata directory
- Deletion of app .setting directory

Logfile contents:

!ENTRY com.aptana.core 1 0 2013-12-10 22:18:30.336
!MESSAGE (Build 3.1.4.201310171935) [INFO] com.aptana.core/debug/shell Running process:
Process: "/usr/local/bin/titanium" "--no-colors" "--no-prompt" "--no-banner" "status" "-o" "json"
Working directory: null
Environment: {ANALYTICS_SOURCE=studio, ANDROID_SDK=/Users/pete/android-sdk, APTANA_VERSION=3.1.4.1381354727, Apple_PubSub_Socket_Render=/tmp/launch-xDsNxv/Render, CLICOLOR=1, DISPLAY=/tmp/launch-C9niNC/org.macosforge.xquartz:0, HOME=/Users/pete, JAVA_HOME=/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home, LANG=en_US.UTF-8, LESS=-X, LOGNAME=pete, PATH=/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin:/Users/pete/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/Users/pete/android-sdk/tools:/Users/pete/android-sdk/platform-tools:/Applications/MAMP/Library/bin:/Applications/Gnuplot.app/Contents/Resources/bin:/Applications/MAMP/bin/php/php5.4.4/bin, PWD=/Applications/Titanium Studio/TitaniumStudio.app/Contents/MacOS, SHELL=/bin/bash, SHLVL=1, SSH_AUTH_SOCK=/tmp/launch-fIhD3n/Listeners, TMPDIR=/var/folders/pm/shl9vq093q1cmk58w6vbss5r0000gn/T/, USER=pete, __CF_USER_TEXT_ENCODING=0x1F5:0:2, __CHECKFIX1436934=1, com.apple.java.jvmTask=JNI}

!ENTRY com.aptana.core 1 0 2013-12-10 22:18:31.089
!MESSAGE (Build 3.1.4.201310171935) [INFO] com.aptana.core/debug/shell Running process:
Process: "/usr/local/bin/titanium" "--no-colors" "--no-prompt" "--no-banner" "info" "-o" "json" "-t" "ios"
Working directory: /
Environment: {ANALYTICS_SOURCE=studio, ANDROID_SDK=/Users/pete/android-sdk, APTANA_VERSION=3.1.4.1381354727, Apple_PubSub_Socket_Render=/tmp/launch-xDsNxv/Render, CLICOLOR=1, DISPLAY=/tmp/launch-C9niNC/org.macosforge.xquartz:0, HOME=/Users/pete, JAVA_HOME=/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home, LANG=en_US.UTF-8, LESS=-X, LOGNAME=pete, PATH=/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin:/Users/pete/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/Users/pete/android-sdk/tools:/Users/pete/android-sdk/platform-tools:/Applications/MAMP/Library/bin:/Applications/Gnuplot.app/Contents/Resources/bin:/Applications/MAMP/bin/php/php5.4.4/bin, PWD=/, SHELL=/bin/bash, SHLVL=1, SSH_AUTH_SOCK=/tmp/launch-fIhD3n/Listeners, TMPDIR=/var/folders/pm/shl9vq093q1cmk58w6vbss5r0000gn/T/, USER=pete, __CF_USER_TEXT_ENCODING=0x1F5:0:2, __CHECKFIX1436934=1, com.apple.java.jvmTask=JNI}

!ENTRY com.appcelerator.titanium.mobile 1 0 2013-12-10 22:18:31.998
!MESSAGE (Build 3.1.4.201310171935) [INFO] com.appcelerator.titanium.mobile/debug/provisioning Retrieved number of profiles: 0

!ENTRY com.appcelerator.titanium.mobile 1 0 2013-12-10 22:18:31.999
!MESSAGE (Build 3.1.4.201310171935) [INFO] com.appcelerator.titanium.mobile/debug/provisioning Number of profiles after filtering: 0

!ENTRY com.appcelerator.titanium.mobile 1 0 2013-12-10 22:18:32.047
!MESSAGE (Build 3.1.4.201310171935) [INFO] com.appcelerator.titanium.mobile/debug/provisioning Retrieved number of profiles: 0

!ENTRY com.appcelerator.titanium.mobile 1 0 2013-12-10 22:18:32.048
!MESSAGE (Build 3.1.4.201310171935) [INFO] com.appcelerator.titanium.mobile/debug/provisioning Number of profiles after filtering: 0

!ENTRY com.appcelerator.titanium.mobile 1 0 2013-12-10 22:18:32.091
!MESSAGE (Build 3.1.4.201310171935) [INFO] com.appcelerator.titanium.mobile/debug/provisioning Retrieved number of profiles: 0

!ENTRY com.appcelerator.titanium.mobile 1 0 2013-12-10 22:18:32.093
!MESSAGE (Build 3.1.4.201310171935) [INFO] com.appcelerator.titanium.mobile/debug/provisioning Number of profiles after filtering: 0


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-15970_44536/prov_profiles_missing.png">prov_profiles_missing.png</td></td><td>2013-12-10T21:22:19.000+0000</td><td>198304</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-15970_44537/provprofiles_settings.png">provprofiles_settings.png</td></td><td>2013-12-10T21:22:19.000+0000</td><td>139128</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Peter Evans 2013-12-11

   The problem is in <code>/usr/local/lib/node_modules/titanium/node_modules/node-appc/lib/ios.js</code>
   
   An attempt is made to base64 decode the entire developer certificate object, whereas the base64 value of interest is in the field <code>"value"</code> of the certificate object.
   
   Change the line 207 from this
   
   <code><pre>
   } else if (new Buffer(p.DeveloperCertificates[0], 'base64').toString().indexOf('Distribution:') != -1) {
   </pre></code>
   
   to this
   
   <code><pre>
   } else if (new Buffer(p.DeveloperCertificates[0].value, 'base64').toString().indexOf('Distribution:') != -1) {
   </pre></code>
   
   to cure the problem.
   </li>
<li>Chris Barber 2013-12-12

   This was fixed in Titanium SDK 3.2.0: <a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/cli/lib/detect.js#L464." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/cli/lib/detect.js#L464.</a>
   
   I doubt we'll backport this fix for 3.1.x.</li>
<li>Chris Barber 2013-12-12

   Fixed as apart of TIMOB-5823.</li>
<li>Chris Barber 2013-12-16

   Reopening to backport to 3.1.x!</li>
<li>Chris Barber 2013-12-17

   Master pull request: <a href="https://github.com/appcelerator/node-appc/pull/74" rel="nofollow" target="_blank">https://github.com/appcelerator/node-appc/pull/74</a>
   3.1.x pull request: <a href="https://github.com/appcelerator/node-appc/pull/76" rel="nofollow" target="_blank">https://github.com/appcelerator/node-appc/pull/76</a>
   3.2.x pull request: <a href="https://github.com/appcelerator/node-appc/pull/75" rel="nofollow" target="_blank">https://github.com/appcelerator/node-appc/pull/75</a></li>
<li>Wilson Luu 2013-12-19

   Closing ticket as fixed. Verified I was able to select my adhoc provisioning profiles from AppcStudio, package my apps (Alloy and Classic), and install to device.
   
   Tested on:
   
   Appcelerator Studio, build: 3.2.0.201312181652
   SDK build: 3.2.0.v20131218153242
   CLI: 3.2.0-cr3
   Alloy: 1.3.0-cr2
   Xcode: 5.0.2
   Devices: iphone 5 (6.1.3), iphone 5s (7.0.2)</li>
<li>Lokesh Choudhary 2014-01-22

   Getting error while building for latest 3.1.4 with following versions of CLI 3.1.2, 3.2.0, 3.2.1-beta2. Not able to build for any platform.
   
   <code><pre>
   /usr/local/lib/node_modules/titanium/node_modules/longjohn/dist/longjohn.js:184
           throw e;
                 ^
   TypeError: Cannot read property 'options' of undefined
       at /Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/3.1.4.v20140117150142/node_modules/titanium-sdk/lib/titanium.js:71:11
       at Array.forEach (native)
       at set (/Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/3.1.4.v20140117150142/node_modules/titanium-sdk/lib/titanium.js:70:24)
       at /Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/3.1.4.v20140117150142/node_modules/titanium-sdk/lib/titanium.js:106:6
       at /Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/3.1.4.v20140117150142/mobileweb/cli/commands/_build.js:60:4
       at CLI._fireHookCallback (/usr/local/lib/node_modules/titanium/lib/hook.js:245:12)
       at /usr/local/lib/node_modules/titanium/lib/hook.js:224:10
       at /usr/local/lib/node_modules/titanium/node_modules/async/lib/async.js:229:13
       at async.eachSeries (/usr/local/lib/node_modules/titanium/node_modules/async/lib/async.js:127:20)
       at _asyncMap (/usr/local/lib/node_modules/titanium/node_modules/async/lib/async.js:223:9)
   [ERROR] Application Installer abnormal process termination. Process exit value was 8
   </pre></code>
   
   The changes in the 3.1.X PR in this ticket need to be reverted (according to Chris Barber).
   
   Reopening.
   
   Environment:
   Appc Studio : 3.2.1.201401201818
   Ti SDK : 3.1.4.v20140117150142
   Mac OSX : 10.8.5
   Alloy : 1.3.1-beta3
   CLI: 3.1.2, 3.2.0, 3.2.1-beta2	
   
   </li>
<li>Chris Barber 2014-01-23

   Note: the error in Lokesh's last comment is the wrong error. His error is relating to TIMOB-16289.</li>
<li>Chris Barber 2014-01-23

   3.1.x revert pr: <a href="https://github.com/appcelerator/node-appc/pull/82" rel="nofollow" target="_blank">https://github.com/appcelerator/node-appc/pull/82</a></li>
<li>Lokesh Choudhary 2014-01-29

    Verified the fix. Able to build with latest 3.1.4 sdk.
    
    Closing.
    
    Environment:
    Appc Studio : 3.2.1.201401241158
    Ti SDK : 3.1.4.v20140122162104
    Mac OSX : 10.8.5
    Alloy : 1.3.1-beta4 	
    CLI - 3.2.1 beta3
    Nexus 4 - android 4.4</li>
</ol>


<p><a href="/TIMOB/TIMOB-15970.json">JSON Source</a></p>