---
title: "[TIMOB-15977] Code Processor: mocha is returning failures"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2016-08-24T19:49:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Code Processor</td></tr>
<tr><th>Labels</th><td>qe-3.2.0</td></tr>
<tr><th>Reporter</th><td>Federico Casali</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2013-12-13T00:53:56.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-20T17:23:38.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem description</h4>
Running 'mocha' tests in the titanium-code-processor folder, failures are returned.

1. Install mocha in case is not already present
<code><pre>
sudo npm install -g mocha
</pre></code>

2. Go to the titanium code processor folder (by default /usr/local/lib/node_modules/titanium-code-processor) and run "mocha"

Result:

6 tests are passing, 7 are failing. 

<code><pre>
fcasaliMBP:titanium-code-processor fcasali$ mocha

  ․․․․․․․․․․․․․

  6 passing (25ms)
  7 failing

  1) Cloning should clone an object:
     AssertionError: Cloned objects should have the same number of properties
      at compareValues (/usr/local/lib/node_modules/titanium-code-processor/test/cloning.js:92:11)
      at compareValues (/usr/local/lib/node_modules/titanium-code-processor/test/cloning.js:91:4)
      at Context.&lt;anonymous&gt; (/usr/local/lib/node_modules/titanium-code-processor/test/cloning.js:166:3)
      at Test.Runnable.run (/usr/local/lib/node_modules/mocha/lib/runnable.js:211:32)
      at Runner.runTest (/usr/local/lib/node_modules/mocha/lib/runner.js:372:10)
      at /usr/local/lib/node_modules/mocha/lib/runner.js:448:12
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:297:14)
      at /usr/local/lib/node_modules/mocha/lib/runner.js:307:7
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:245:23)
      at Object._onImmediate (/usr/local/lib/node_modules/mocha/lib/runner.js:274:5)
      at processImmediate [as _immediateCallback] (timers.js:330:15)

  2) Cloning should clone a function:
     TypeError: Cannot read property 'enumerable' of undefined
      at Cloner.cloneDescriptor (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11875:26)
      at Cloner.cloneProperties (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11868:10)
      at Cloner.cloneFunction (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11927:7)
      at Cloner.cloneValue (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11790:18)
      at Context.&lt;anonymous&gt; (/usr/local/lib/node_modules/titanium-code-processor/test/cloning.js:179:19)
      at Test.Runnable.run (/usr/local/lib/node_modules/mocha/lib/runnable.js:211:32)
      at Runner.runTest (/usr/local/lib/node_modules/mocha/lib/runner.js:372:10)
      at /usr/local/lib/node_modules/mocha/lib/runner.js:448:12
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:297:14)
      at /usr/local/lib/node_modules/mocha/lib/runner.js:307:7
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:245:23)
      at Object._onImmediate (/usr/local/lib/node_modules/mocha/lib/runner.js:274:5)
      at processImmediate [as _immediateCallback] (timers.js:330:15)

  3) Cloning should clone an array:
     TypeError: Cannot read property 'enumerable' of undefined
      at Cloner.cloneDescriptor (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11875:26)
      at Cloner.cloneProperties (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11868:10)
      at Cloner.cloneArray (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11938:7)
      at Cloner.cloneValue (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11793:18)
      at Context.&lt;anonymous&gt; (/usr/local/lib/node_modules/titanium-code-processor/test/cloning.js:191:19)
      at Test.Runnable.run (/usr/local/lib/node_modules/mocha/lib/runnable.js:211:32)
      at Runner.runTest (/usr/local/lib/node_modules/mocha/lib/runner.js:372:10)
      at /usr/local/lib/node_modules/mocha/lib/runner.js:448:12
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:297:14)
      at /usr/local/lib/node_modules/mocha/lib/runner.js:307:7
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:245:23)
      at Object._onImmediate (/usr/local/lib/node_modules/mocha/lib/runner.js:274:5)
      at processImmediate [as _immediateCallback] (timers.js:330:15)

  4) Cloning should clone a regex:
     AssertionError: Cloned objects should have the same number of properties
      at compareValues (/usr/local/lib/node_modules/titanium-code-processor/test/cloning.js:92:11)
      at compareValues (/usr/local/lib/node_modules/titanium-code-processor/test/cloning.js:91:4)
      at Context.&lt;anonymous&gt; (/usr/local/lib/node_modules/titanium-code-processor/test/cloning.js:199:3)
      at Test.Runnable.run (/usr/local/lib/node_modules/mocha/lib/runnable.js:211:32)
      at Runner.runTest (/usr/local/lib/node_modules/mocha/lib/runner.js:372:10)
      at /usr/local/lib/node_modules/mocha/lib/runner.js:448:12
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:297:14)
      at /usr/local/lib/node_modules/mocha/lib/runner.js:307:7
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:245:23)
      at Object._onImmediate (/usr/local/lib/node_modules/mocha/lib/runner.js:274:5)
      at processImmediate [as _immediateCallback] (timers.js:330:15)

  5) Cloning should clone an error:
     TypeError: Cannot read property 'enumerable' of undefined
      at Cloner.cloneDescriptor (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11875:26)
      at Cloner.cloneProperties (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11868:10)
      at Cloner.cloneFunction (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11927:7)
      at Cloner.cloneValue (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11790:18)
      at Cloner.cloneObject (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11895:61)
      at Cloner.cloneError (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11955:20)
      at Cloner.cloneValue (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11805:18)
      at Context.&lt;anonymous&gt; (/usr/local/lib/node_modules/titanium-code-processor/test/cloning.js:208:20)
      at Test.Runnable.run (/usr/local/lib/node_modules/mocha/lib/runnable.js:211:32)
      at Runner.runTest (/usr/local/lib/node_modules/mocha/lib/runner.js:372:10)
      at /usr/local/lib/node_modules/mocha/lib/runner.js:448:12
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:297:14)
      at /usr/local/lib/node_modules/mocha/lib/runner.js:307:7
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:245:23)
      at Object._onImmediate (/usr/local/lib/node_modules/mocha/lib/runner.js:274:5)
      at processImmediate [as _immediateCallback] (timers.js:330:15)

  6) Cloning should clone a module context:
     AssertionError: Cloned objects should have the same number of properties
      at compareValues (/usr/local/lib/node_modules/titanium-code-processor/test/cloning.js:92:11)
      at compareLexicalEnvironments (/usr/local/lib/node_modules/titanium-code-processor/test/cloning.js:39:4)
      at compareContexts (/usr/local/lib/node_modules/titanium-code-processor/test/cloning.js:47:3)
      at Context.&lt;anonymous&gt; (/usr/local/lib/node_modules/titanium-code-processor/test/cloning.js:224:3)
      at Test.Runnable.run (/usr/local/lib/node_modules/mocha/lib/runnable.js:211:32)
      at Runner.runTest (/usr/local/lib/node_modules/mocha/lib/runner.js:372:10)
      at /usr/local/lib/node_modules/mocha/lib/runner.js:448:12
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:297:14)
      at /usr/local/lib/node_modules/mocha/lib/runner.js:307:7
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:245:23)
      at Object._onImmediate (/usr/local/lib/node_modules/mocha/lib/runner.js:274:5)
      at processImmediate [as _immediateCallback] (timers.js:330:15)

  7) Cloning should clone a function context:
     TypeError: Cannot read property 'enumerable' of undefined
      at Cloner.cloneDescriptor (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11875:26)
      at Cloner.cloneProperties (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11868:10)
      at Cloner.cloneFunction (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11927:7)
      at Cloner.cloneValue (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11790:18)
      at Cloner.cloneDeclarativeEnvironment (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11721:16)
      at Cloner.cloneContext (/usr/local/lib/node_modules/titanium-code-processor/lib/Base.js:11692:9)
      at Context.&lt;anonymous&gt; (/usr/local/lib/node_modules/titanium-code-processor/test/cloning.js:235:20)
      at Test.Runnable.run (/usr/local/lib/node_modules/mocha/lib/runnable.js:211:32)
      at Runner.runTest (/usr/local/lib/node_modules/mocha/lib/runner.js:372:10)
      at /usr/local/lib/node_modules/mocha/lib/runner.js:448:12
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:297:14)
      at /usr/local/lib/node_modules/mocha/lib/runner.js:307:7
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:245:23)
      at Object._onImmediate (/usr/local/lib/node_modules/mocha/lib/runner.js:274:5)
      at processImmediate [as _immediateCallback] (timers.js:330:15)



</pre></code>


<h3>Comments</h3>

<ol>
<li>Chris Barber 2016-08-24

   Code processor is dead.</li>
<li>Lee Morris 2017-03-20

   Closing ticket as code processor is no longer supported.</li>
</ol>


<p><a href="/TIMOB/TIMOB-15977.json">JSON Source</a></p>