---
title: "[TIMOB-15982] Android: Integrate v7 of appcompat libraries"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2014-01-21T23:48:18.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>planning-3.3.0, q1-2014-candidate</td></tr>
<tr><th>Reporter</th><td>Ingo Muschenetz</td></tr>
<tr><th>Assignee</th><td>Hieu Pham</td></tr>
<tr><th>Created</th><td>2013-12-13T11:13:30.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-21T23:03:20.000+0000</td></tr>
</table>

<h3>Description</h3>

Update our library usage to include appcompat v7:

<a href="http://developer.android.com/tools/support-library/features.html#v7-appcompat" rel="nofollow" target="_blank">http://developer.android.com/tools/support-library/features.html#v7-appcompat</a>

This will allow Action Bar support on a wider range of Android devices. Currently, it is limited to API level 11 and above. There should be no discernible changes to most users except that the action bar now works on all Titanium-supported API levels. However, users with custom themes will have to alter them slightly as noted below.

Users can define custom themes in theme.xml then manually add it to the manifest via tiapp.xml. Here's an example of a custom theme:

<code><pre>
&lt;style name="Theme.Custom" parent="@android:style/Theme.Translucent"&gt;
        &lt;item name="android:windowIsFloating"&gt;true&lt;/item&gt;
&lt;/style&gt;
</pre></code>

This defines "Theme.Custom" which extends Theme.Translucent (a native Android theme). In order for them to get this working with AppCompat, they need to convert this custom theme to something like this:

<code><pre>
&lt;style name="Theme.Custom" parent="@style/Theme.AppCompat"&gt;
      &lt;item name="android:windowBackground"&gt;@android:color/transparent&lt;/item&gt;
      &lt;item name="android:colorBackgroundCacheHint"&gt;@null&lt;/item&gt;
      &lt;item name="android:windowIsTranslucent"&gt;true&lt;/item&gt;
      &lt;item name="android:windowAnimationStyle"&gt;@android:style/Animation&lt;/item&gt;
     &lt;item name="android:WindowIsFloating"&gt;true&lt;/item&gt;
&lt;/style&gt;
</pre></code>

Note that this theme has 5 items while the previous has only one. This is because Theme.AppCompat is a base theme (i.e. not Theme.Translucent) so we need to add the items of Theme.Translucent (the first 4 items). This can be easily done by looking at the source code of Theme.Translucent:

<a href="https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/themes.xml" rel="nofollow" target="_blank">https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/themes.xml</a>

Tasks for this ticket:
<h4>integrate v7.</h4>
<h4>clean up WindowProxy, remove LW windows.</h4>
<h4>implement Fragments as LW windows.</h4>
<h4>remove sync events from activity (send a mail to Titan). Get rid of sync events and eat back button until v8 engine is initialized.</h4>
<h4>refactor TabGroup (separating ActionBar from TabHost and move TabHost to Android namespace and deprecate it).</h4>
<h4>support custom theme (optional - implement resource loader)</h4>
<h4>Modify default theme to support action bar.</h4>


<h3>Comments</h3>

<ol>
<li>Allen Yeung 2014-01-21

   Duplicate of TIMOB-15021</li>
<li>Lee Morris 2017-03-21

   Closing ticket as duplicate with reference to the above comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-15982.json">JSON Source</a></p>