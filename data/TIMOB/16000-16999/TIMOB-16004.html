---
title: "[TIMOB-16004] iOS: Expose current file path and directory path to commonjs module scope"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-05-09T22:30:30.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2014 Sprint 09, 2014 Sprint 09 SDK, Release 3.3.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>module_filesystem, qe-closed-3.3.0, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Christian Sullivan</td></tr>
<tr><th>Assignee</th><td>Sabil Rahim</td></tr>
<tr><th>Created</th><td>2013-12-17T02:58:11.000+0000</td></tr>
<tr><th>Updated</th><td>2014-09-05T14:27:22.000+0000</td></tr>
</table>

<h3>Description</h3>

__filename and __dirname are available in android but not on ios.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-16004_47963/Resources.zip">Resources.zip</td></td><td>2014-05-09T22:28:30.000+0000</td><td>3434</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Christian Sullivan 2013-12-17

   PR [MASTER] <a href="https://github.com/appcelerator/titanium_mobile/pull/5131" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5131</a></li>
<li>Christian Sullivan 2014-01-09

   [~mxia] I have added the blocked ticket to this ticket.
   
   This is needed to properly resolve the file being required when <code>..</code> or <code>./</code> is used in the path of the required module.
   
   Example
   
   If the below example is used it will throw an error when using liveview
   <code><pre>
   var x = require('../x');
   </pre></code>
   
   Currently only the absolute path will work.
   <code><pre>
   var x = require('/lib/x');
   </pre></code>
   
   With my pr it will add the __dirname and __filename vars that will make it possible to determine what the modules absolute path is. It will also bring it to parity to android's and ios's commonjs implementation.
   </li>
<li>Christian Sullivan 2014-02-13

   [~mxia] can we get TIMOB-16011 merged in now?</li>
<li>Pedro Enrique 2014-04-17

   I'm reviewing this and I'm not sure that it does it the expected way. I have a file "a.js" in the Resources directory, this is the result of "__dirname"
   <code><pre>
   file:///Users/penrique/Library/Application%20Support/iPhone%20Simulator/7.1-64/Applications/34C10A38-31A4-4850-8211-336EFD27FB06/Titanium.app
   </pre></code>
   Should it be that or this: "/"?</li>
<li>Pedro Enrique 2014-04-17

   Update, 
   On Android the file "a.js" located in the root of the Resources, when asked for "__dirname" it returns this:
   <code><pre>
   .
   </pre></code>
   On iOS it returns this:
   <code><pre>
   file:///Users/penrique/Library/Application%20Support/iPhone%20Simulator/7.1-64/Applications/34C10A38-31A4-4850-8211-336EFD27FB06/Titanium.app
   </pre></code></li>
<li>Pedro Enrique 2014-04-22

   PR <a href="https://github.com/appcelerator/titanium_mobile/pull/5641" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5641</a></li>
<li>Ingo Muschenetz 2014-04-28

   Missed the boat for 3.3.0. Will pull into 3.4.0.</li>
<li>Vishal Duggal 2014-05-09

   Attaching Resources for test case</li>
<li>Vishal Duggal 2014-05-09

   PR merged</li>
<li>Paras Mishra 2014-05-16

    Verified the fix on:
    iOS simulator: 7.1
    SDK: 3.3.0.v20140515151935
    CLI version : 3.3.0-dev
    OS : MAC OSX 10.9.2
    Alloy:  1.4.0-Alpha
    ACS: 1.0.14
    npm:1.3.2
    LiveView: 1.0.4
    Appcelerator Studio, build: 3.3.0.201405121247
    titanium-code-processor: 1.1.1
    XCode : 5.1.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-16004.json">JSON Source</a></p>