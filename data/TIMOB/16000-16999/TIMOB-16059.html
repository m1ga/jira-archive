---
title: "[TIMOB-16059] CLI: JavaScript syntax errors breaks build with cryptic message"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-01-02T08:36:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 26, 2013 Sprint 26 Core, Release 3.2.0, Release 3.3.0</td></tr>
<tr><th>Components</th><td>CLI</td></tr>
<tr><th>Labels</th><td>qe-closed-3.2.0, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2013-12-20T16:24:02.000+0000</td></tr>
<tr><th>Updated</th><td>2014-07-23T07:36:47.000+0000</td></tr>
</table>

<h3>Description</h3>

When building an app for device or distribution that contains an JavaScript error, a Node.js crash occurs.

<code><pre>
[INFO]  Processing JavaScript files

/Users/chris/Library/Application Support/Titanium/mobilesdk/osx/3.3.0/node_modules/titanium-sdk/lib/jsanalyze.js:64
		var errmsg = [ __('Failed to minify %s', opts.filename) ];
		               ^
ReferenceError: __ is not defined
    at Object.analyzeJs (/Users/chris/Library/Application Support/Titanium/mobilesdk/osx/3.3.0/node_modules/titanium-sdk/lib/jsanalyze.js:64:18)
    at Object.analyzeJsFile (/Users/chris/Library/Application Support/Titanium/mobilesdk/osx/3.3.0/node_modules/titanium-sdk/lib/jsanalyze.js:35:17)
    at iOSBuilder.<anonymous> (/Users/chris/Library/Application Support/Titanium/mobilesdk/osx/3.3.0/iphone/cli/commands/_build.js:2860:24)
    at /Users/chris/Library/Application Support/Titanium/mobilesdk/osx/3.3.0/node_modules/node-appc/node_modules/async/lib/async.js:548:21
    at /Users/chris/Library/Application Support/Titanium/mobilesdk/osx/3.3.0/node_modules/node-appc/node_modules/async/lib/async.js:224:13
    at iterate (/Users/chris/Library/Application Support/Titanium/mobilesdk/osx/3.3.0/node_modules/node-appc/node_modules/async/lib/async.js:131:13)
    at async.eachSeries (/Users/chris/Library/Application Support/Titanium/mobilesdk/osx/3.3.0/node_modules/node-appc/node_modules/async/lib/async.js:147:9)
    at _asyncMap (/Users/chris/Library/Application Support/Titanium/mobilesdk/osx/3.3.0/node_modules/node-appc/node_modules/async/lib/async.js:223:9)
    at Object.mapSeries (/Users/chris/Library/Application Support/Titanium/mobilesdk/osx/3.3.0/node_modules/node-appc/node_modules/async/lib/async.js:213:23)
    at async.series (/Users/chris/Library/Application Support/Titanium/mobilesdk/osx/3.3.0/node_modules/node-appc/node_modules/async/lib/async.js:546:19)
</pre></code>

To reproduce, run the following app.js code:

<code><pre>
var win = Ti.UI.createWindow();

win.crash(arg){};
</pre></code>

Expected results:

<code><pre>
[INFO]  Processing JavaScript files
[ERROR] Failed to minify /Users/chris/appc/workspace/testapp2/Resources/app.js
[ERROR] Unexpected token: punc ({) [line 3, column 14]
[ERROR]   
[ERROR]     win.crash(arg){};
[ERROR]     --------------^
[ERROR]
</pre></code>

<h3>Comments</h3>

<ol>
<li>Chris Barber 2013-12-20

   Master pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/5153" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5153</a>
   3.2.x pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/5154" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5154</a>
   3.2.x_hybrid pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/5155" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5155</a></li>
<li>Priya Agarwal 2014-01-02

   Verified with environment:
   Appc-Studio: 3.2.0.201312191455
   Sdk:3.2.0.GA
   acs:1.0.11
   alloy:1.3.0
   npm:1.3.2
   titanium:3.2.0
   titanium-code-processor:1.1.0
   Osx: Maverick 10.9
   Xcode: xCode 5.0.2
   
   Getting the expected result as per above comments.
   Hence Closing as fixed and verified.</li>
<li>Priya Agarwal 2014-01-02

   Reopening just to add qe-closed label</li>
<li>Priya Agarwal 2014-01-02

   Closing as updated label.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16059.json">JSON Source</a></p>