---
title: "[TIMOB-16082] Android: WebView.evalJS always returns null on Android 4.2.2 device"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2017-08-18T15:51:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>Android, WebView, evalJs, exalture, kitkat</td></tr>
<tr><th>Reporter</th><td>SHOCKOE TEAM</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2013-12-17T22:24:01.000+0000</td></tr>
<tr><th>Updated</th><td>2017-08-18T15:51:21.000+0000</td></tr>
</table>

<h3>Description</h3>

WebView.evalJS appears to always return null on devices running Android Kit-Kat, regardless of the provided script.  

Example app:
<code><pre>

var win = Titanium.UI.createWindow({  
    title:'EvalJS kit-kat test',
    backgroundColor:'#fff'
});
var webView = Ti.UI.createWebView({
    url : '<a href="http://www.google.com" rel="nofollow" target="_blank">http://www.google.com</a>'
});
webView.addEventListener('load', function(evt){
    //Expected behavior is for an alert saying 'google' to be shown
    //On Android Kit-Kat, an empty alert is shown instead.
    alert(evt.source.evalJS('document.title'));
});

win.add(webView);
win.open();
</pre></code>

Reproduces on 3.1.3.GA and 3.2.0.v20131210191510

<h3>Comments</h3>

<ol>
<li>Ritu Agrawal 2013-12-19

   I have not been able to reproduce this problem on Nexus 7 phone running Android 4.4 with 3.1.3 SDK. 
   
   I am wondering if you encounter this issue only on Android 4.4 device or can you reproduce this issue on other devices as well? Can you reproduce this issue on the simulator too? I would appreciate if you can also try an alternate website in the above example. </li>
<li>Quang Pham 2013-12-24

   same here, evalJS always return null for 3.2 SDK, Android 4.0</li>
<li>Ritu Agrawal 2013-12-26

   Moving this ticket to engineering as I can reproduce it on Samsung Galaxy Nexus (4.2.2) device.</li>
<li>Ingo Muschenetz 2013-12-27

   Hi All--Since this was reproduced on 4.2.2, should we rewrite the ticket to not be KitKat specific?</li>
<li>Adam Paxton 2014-01-15

   Same issue on Galaxy Nexus running 4.3.  Build with Ti SDK 3.2.0.GA</li>
<li>Muhammad Mahmoud 2014-03-10

   Reproduced on Samsung Galaxy S4 running 4.3 and Nexus 4 running 4.4 with Ti SDK 3.1.2.GA</li>
<li>Michiel Dondorp 2014-06-13

   I think the problem originates in this:
   <a href="http://developer.android.com/guide/webapps/migrating.html" rel="nofollow" target="_blank">http://developer.android.com/guide/webapps/migrating.html</a>
   
   ??Android 4.4 (API level 19) introduces a new version of WebView that is based on Chromium. This change upgrades WebView performance and standards support for HTML5, CSS3, and JavaScript to match the latest web browsers. Any apps using WebView will inherit these upgrades when running on Android 4.4 and higher.??</li>
<li>Gianluca Arcidiacono 2014-08-04

   Same problem with Nexus 5 (Android 4.4.4, SDK 3.3.0). Any workaround?</li>
<li>Michiel Dondorp 2014-08-04

   I no longer have this when I just do:
   <code><pre>
   var command;
   if(android){
       command =  "return " + command;
   }
   evalJs(command);
   </pre></code>
   
   Just found the code again which handles this:
   [ti.ui.widget.webview.TiWebViewBinding.java](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/ui/src/java/ti/modules/titanium/ui/widget/webview/TiWebViewBinding.java)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/ui/src/java/ti/modules/titanium/ui/widget/webview/TiWebViewBinding.java)</a>
   Line 147: getJsValue</li>
<li>carlo 2015-03-26

    confirmed
    
    return is needed on Android (tested on Nexus 5, Android 5.0.1) but cause return null on iOS
    
    wtf</li>
<li>SHOCKOE TEAM 2015-05-27

    Any updates on this ticket?</li>
<li>Frankie Merzadyan 2017-01-30

    Could not reproduce. Tried with 4.2.X-4.4.X, 6 and 7.X emulators. Alert dialogue returned expected non-null values.</li>
<li>Gary Mathews 2017-08-18

    Since this issue is not reproducible I'm going to close this as invalid.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16082.json">JSON Source</a></p>