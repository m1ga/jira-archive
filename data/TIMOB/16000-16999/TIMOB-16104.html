---
title: "[TIMOB-16104] iOS: NavigationWindow does not fire \"focus\" and \"blur\" events for child windows after being animated"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2016-10-19T14:16:57.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>NavigationGroup, NavigationWindow, animations, blur, focus, ios7</td></tr>
<tr><th>Reporter</th><td>Vladimir Tolstikov</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2013-12-24T14:17:40.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-29T22:02:36.000+0000</td></tr>
</table>

<h3>Description</h3>

I'm using NavigationWindow to create windows(screens) flow in our App. Also I have side-menu there (another window below NavigationWindow) which I show on "Menu" button click by animating NavigationWindow to the right (see attached screenshot). I found, what if I animate NavigationWindow with "animate" method -- windows inside NavigationWindow loses focus and no longer receive "focus" and "blur" events (maybe some other events too, dunno). Even newly created windows not receive those events too. I have some vital functional (as timers creation and other stuff) linked to those events, so I need them in working condition.

Before I used NavigationGroup and all was fine with it, but now it's deprecated.


Code to reproduce:

<code><pre>
var win1 = Ti.UI.createWindow({
    backgroundColor: 'white'
});

win1.addEventListener('click', function(){
    navWindow.openWindow(win2);
});

win1.addEventListener('focus', function(){
    Ti.API.info((new Date()) + ' win1:focus');
});

win1.addEventListener('blur', function(){
    Ti.API.info((new Date()) + ' win1:blur');
});

var win2 = Ti.UI.createWindow({
    backgroundColor: 'red'
});

win2.addEventListener('click', function(){
    navWindow.closeWindow(win2);
});

var navWindow = Ti.UI.iOS.createNavigationWindow({
    backgroundColor:'#ffffff',
    backgroundImage: 'Default.png',
    window: win1,
});

navWindow.open();

// Setup deferred animation of navWindow (for simplify things)
setTimeout(function(){
    Ti.API.info((new Date()) + ' animated');
    navWindow.animate({
        duration: 1000, // here I just show what any animation breaks the things
    });
}, 10000);
</pre></code>

You can click on window to open another one and see messages in the console when you go back to first window again. Code contains auto-triggered function which "animates" navWindow after 10 seconds from app launch. After that you can no longer see focus and blur messages in the console on the same interactions with windows, but see only one last "win1:blur" (btw, when NavigationGroup was used looks like no "blur" event was fired).

<code><pre>
[INFO] :   Tue Dec 24 2013 17:47:20 GMT+0400 (MSK) win1:focus
[INFO] :   Tue Dec 24 2013 17:47:22 GMT+0400 (MSK) win1:blur
[INFO] :   Tue Dec 24 2013 17:47:24 GMT+0400 (MSK) win1:focus
[INFO] :   Tue Dec 24 2013 17:47:24 GMT+0400 (MSK) win1:blur
[INFO] :   Tue Dec 24 2013 17:47:26 GMT+0400 (MSK) win1:focus
[INFO] :   Tue Dec 24 2013 17:47:30 GMT+0400 (MSK) animated
[INFO] :   Tue Dec 24 2013 17:47:30 GMT+0400 (MSK) win1:blur
</pre></code>

Expected result:
 - some code animates NavigationWindow with NavigationWindow.animate method
 - windows inside NavigationWindow remains ability to receive "focus" and "blur" events

Actual result:
 - some code animates NavigationWindow with NavigationWindow.animate method
 - windows inside NavigationWindow loses ability to receive "focus" and "blur" events anymore

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-16104_44802/app.js">app.js</td></td><td>2013-12-24T14:18:50.000+0000</td><td>2180</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-16104_44801/screenshot_2013-12-24_17.51.43.png">screenshot_2013-12-24_17.51.43.png</td></td><td>2013-12-24T14:17:40.000+0000</td><td>229630</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>BG 2015-07-23

   There doesn't seem to be any way to track which window has focus in a NavigationWindow because of this issue.  Why is this considered such a low priority?
   
   I have a NavigationGroup consisting of 4 windows which I drill through from parent to child.  I need to know when the user navigates back to the home window of the group (the first window).  Is there some other way to do this I don't know about?</li>
<li>Simon Buckingham 2016-05-04

   I am still seeing this general problem in Ti 5.1.2 (on iOS 9.3). In an iOS navigation group the window is not sending the focus event.
   I can't believe this is marked as low priority.
   This is essential UX.</li>
<li>Lee Morris 2017-03-29

   Closing ticket as duplicate, with reference to the above links.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16104.json">JSON Source</a></p>