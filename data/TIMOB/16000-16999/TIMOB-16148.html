---
title: "[TIMOB-16148] Android Does Not Compile With Space in Localization String"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-01-17T01:07:22.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>2014 Sprint 01, 2014 Sprint 01 Core, Release 3.2.3, Release 3.3.0</td></tr>
<tr><th>Components</th><td>CLI</td></tr>
<tr><th>Labels</th><td>alloy, andoid, bug, compile, localization, module_cli, qe-closed-3.2.3, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Eli Mor</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2013-12-27T04:15:33.000+0000</td></tr>
<tr><th>Updated</th><td>2014-08-01T07:45:41.000+0000</td></tr>
</table>

<h3>Description</h3>

When trying to compile a ally android project, the compiler fail with the following error:
<code><pre>
[ERROR] :  Failed to compile Java source files:
[ERROR] :  
[ERROR] :  /Users/mor_eli/Development/Titanium_Workspace/android_alloy/build/android/gen/com/android/alloy/R.java:32: ';' expected
[ERROR] :          public static final int space test=0x7f040001;
[ERROR] :                                       ^
[ERROR] :  /Users/mor_eli/Development/Titanium_Workspace/android_alloy/build/android/gen/com/android/alloy/R.java:32: &lt;identifier&gt; expected
[ERROR] :          public static final int space test=0x7f040001;
[ERROR] :                                            ^
[ERROR] :  2 errors
[ERROR] Application Installer abnormal process termination. Process exit value was 1
</pre></code>
The issue seemed to be linked to having a localization string file in project root/i18n/en/strings.xml

If the first string line has a space as follows:
<code><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;resources&gt;
	&lt;string name="space test"&gt;should not work with space/string&gt;
&lt;/resources&gt;
</pre></code>
The compilation fails.
If the space is removed:
<code><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;resources&gt;
	&lt;string name="test"&gt;should work no space/string&gt;
&lt;/resources&gt;
</pre></code>

The compilation works.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-16148_44831/Project.zip">Project.zip</td></td><td>2013-12-27T04:15:33.000+0000</td><td>6900376</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Stephen Feather 2013-12-27

   Kind of works as I'd expect it to.
   
   <a href="http://developer.android.com/guide/topics/resources/string-resource.html" rel="nofollow" target="_blank">http://developer.android.com/guide/topics/resources/string-resource.html</a>
   
   </li>
<li>Eli Mor 2013-12-27

   Stephen, do you ever sleep? :)
   Thanks for the link. 
   Clearly it shows that no spaces are allowed. Maybe there's a way to handle it more gracefully, or to match the compilation between iOS and android. The same code ran without a problem on iOS, but when going to run it on android the problem popped up.</li>
<li>Chris Barber 2014-01-14

   Took a look and the problem is originating in the Android platform code. It can't find the resource and returns the default value.
   
   I tried replacing the spaces with &\#160; at build time, but that didn't help. I imagine this is a step in the right direction, though the resource loader would have to be looked at and thus I've assigned this to one of the Android devs, namely Ping.</li>
<li>Chris Barber 2014-01-15

   After doing some testing, iOS does support spaces in the name.</li>
<li>Hieu Pham 2014-01-16

   This isn't supported in native Android because the string names are being imported directly to R.java as variables, so you can't have a space in the name. </li>
<li>Chris Barber 2014-01-16

   Decided to display an error message with the offending string names. It's not perfect, but such is life.
   
   Master pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/5232" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5232</a>
   3.2.x pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/5233" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5233</a>
   
   To test:
   1. create an android app
   2. create the file i18n/en/strings.xml
   3. add a few strings with spaces like this:
   
   <code><pre>
   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;resources&gt;
   	&lt;string name="hello world"&gt;hello world!&lt;/string&gt;
   	&lt;string name="so rad"&gt;this is so rad&lt;/string&gt;
   &lt;/resources&gt;
   </pre></code>
   
   4. build the app and witness the awesome error handling
   5. set: ti config android.excludeInvalidI18nStrings true
   6. build the app again and see that the errors are printed, but the build proceeds</li>
<li>Neha Mittal 2014-03-26

   Verified fix using below environment:
   
   Appc Studio: 3.2.3.201403250634
   SDK build: 3.2.3.v20140325145222
   acs: 1.0.14
   npm: 1.3.2
   alloy:1.3.1
   CLI: titanium@3.2.3-dev
   titanium-code-processor:1.1.0
   Xcode: 5.1
   Osx: Maverick(10.9.2)
   Device: Nexus 7 (V 4.4.2)
   
   Tested with above steps provided in the comments and after setting ti config android.excludeInvalidI18nStrings true, errors are printed but the build proceeds as expected.
   
   Hence closing the issue.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16148.json">JSON Source</a></p>