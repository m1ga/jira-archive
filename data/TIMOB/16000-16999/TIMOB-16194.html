---
title: "[TIMOB-16194] Alloy: Memory leaking if animation call callback"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>alloy, animation, callback, leak</td></tr>
<tr><th>Reporter</th><td>Matej</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2013-12-31T02:28:55.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:04:20.000+0000</td></tr>
</table>

<h3>Description</h3>

Application is leaking if animation call callback function. If is animation without callback everything is alright... 

I have putted to the archive whole project including video from the app & instruments.

(If is possible please reupload it on some better place / pick up only important informations. Archive can be deleted in the future)

<a href="http://www.filedropper.com/memleak" rel="nofollow" target="_blank">http://www.filedropper.com/memleak</a>

<h3>Comments</h3>

<ol>
<li>Matej 2014-01-15

   Please can somebody have a look on this issue? Thanks</li>
<li>Shak Hossain 2014-01-15

   Matej,
   
   Yes, this will be moved to TIMOB for engineering review. 
   
   Thanks,
   Shak</li>
<li>Rick Blalock 2014-01-24

   I'm running in to this issue but in the case of this code sample, I don't see where things are supposed to go out of memory.  The view is always referencable so it wouldn't go out of memory anyway.
   
   A good test is using the Alloy animation builtin - it has the leak since it uses the callback instead of the animation complete event.  <a href="https://github.com/appcelerator/alloy/blob/master/Alloy/builtins/animation.js" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/Alloy/builtins/animation.js</a> - if when the view you're animating goes out of scope and there's no reference left in JS, it will be retained along with anything where the callback falls in to scope (it is a closure after all).  i.e. Nulling out the callback and the view, etc. won't release it.</li>
<li>Matej 2014-02-04

   Hi Rick, have you seen attached video? Number of used views is increasing without any release...
   
   // Yes the problem is in a callback ,but without Alloy it works properly.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16194.json">JSON Source</a></p>