---
title: "[TIMOB-16216] Android: XML APIs are returning new proxies every time"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Reopened</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android</td></tr>
<tr><th>Reporter</th><td>Shameer Jan</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2013-07-25T15:36:26.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:04:20.000+0000</td></tr>
</table>

<h3>Description</h3>

It looks like a platform error, XML APIs are returning new proxies every time. It should cache the nodes that are returned. 

The following code reproduces the issue with attached file "nodes.xml": you can see an error occurred in:

<code><pre>valueOf(testRun, attr.ownerElement).shouldBe(node);</pre></code>
with error

[INFO][TiAPI   (  319)]  error occured , should be: '[object Element]', was: '[object Element]'





<code><pre>
var win = Ti.UI.createWindow({
	backgroundColor : "#FFF"
});
win.open();
var shouldBe = function(obj,expected) {
        if (obj != expected) {
		alert("error occured see Ti.API.info")
		Ti.API.info( "error occured , should be: '" + expected + "', was: '" + this.obj + "'");
		}
	     else
	        {		
	       alert("no error");
			Ti.API.info("success");
			}
};
this.apiXmlAttr = function() {
	var file = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, 'nodes.xml');
	var xmltext = file.read().text;
	var doc = Ti.XML.parseString(xmltext);
	var scriptList = doc.documentElement.getElementsByTagName("script");
    var node = doc.getElementsByTagName("node").item(0);
    var attr = node.attributes.item(0);
    shouldBe(attr.ownerElement,node);
	// OCCURS ERROR
	};
apiXmlAttr();
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-16216_41263/console.txt">console.txt</td></td><td>2013-08-02T06:25:48.000+0000</td><td>36582</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-16216_41104/nodes.xml">nodes.xml</td></td><td>2013-07-29T10:26:59.000+0000</td><td>622</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Daniel Sefton 2013-07-25

   Hi Shameer,
   
   Please change the test case to be runnable - e.g. the cData variable isn't defined.
   
   Thanks.</li>
<li>Daniel Sefton 2013-07-26

   Did you run it? testSource is undefined now. I changed it to load the local XML file, but I don't see anything being logged.
   
   Please provide steps to reproduce.
   
   Thanks.</li>
<li>Shameer Jan 2013-07-29

   The Issue  still occurs.You can reproduce the issue with the updated code (given) using nodes.xml file.
   
   Thank you</li>
<li>Daniel Sefton 2013-07-29

   Please can you explain how this:
   {quote}XML APIs are returning new proxies every time. It should cache the nodes that are returned.{quote}
   Is related to the test case you provided, which indicates that Android is simply not returning any informative exceptions.
   
   Is the lack of throwing exceptions due to it not "returning new proxies every time"?</li>
<li>Shameer Jan 2013-08-02

   I have updated java script code with simplified test case and  You can see that the problem exist with  
   valueOf(testRun, attr.ownerElement).shouldBe(node);
   
   ie,  failed to compare  'attr.ownerElement' with 'node' . 
   
   [INFO][TiAPI   (  319)]  error occured , should be: '[object Element]', was: '[object Element]'
   
   (I have already attached console  file  )</li>
<li>Mostafizur Rahman 2013-09-18

   Hello Shameer Jan,
   
   Please check your XML format and add more details for testing. Please explain, why you are thinking this is a bug? 
   
   Thanks 
   </li>
<li>Shameer Jan 2013-09-18

   Hi Mostafizur Rahman,
   
    I have already checked xml format and tried with other files, still exist errors.</li>
<li>Ritu Agrawal 2014-01-17

   Reopening this ticket and moving it to engineering as I can reproduce this issue on Android platform. It is, at least, a parity issue because provided test case works fine on iOS platform but not on Android platform.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16216.json">JSON Source</a></p>