---
title: "[TIMOB-16261] CLI: AndroidManifest.xml not updated to reflect map v2 API key (custom build)"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2014-03-23T02:34:37.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2014 Sprint 02, 2014 Sprint 02 Core, Release 3.2.1, Release 3.3.0</td></tr>
<tr><th>Components</th><td>CLI</td></tr>
<tr><th>Labels</th><td>supportTeam, triage</td></tr>
<tr><th>Reporter</th><td>Eduardo Gomez</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2014-01-21T01:01:46.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-21T22:06:07.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue description</h4>
After following these instruction to implement Google Maps v2 <a href="http://docs.appcelerator.com/titanium/3.0/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/3.0/#</a>!/guide/Google_Maps_v2_for_Android
the developer

When trying out to see the map this is seen in the crash report:

<code><pre>
TiApplication: (main) [47657,47657] Sending event: exception on thread: main msg:java.lang.RuntimeException: Unable to start activity ComponentInfo{com.onforce.OnForce/org.appcelerator.titanium.TiActivity}: java.lang.RuntimeException: API key not found.  Check that <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="your API key"/> is in the <application> element of AndroidManifest.xml; Titanium 3.2.0,2014/01/08 17:01,dd79e01
[ERROR] :  TiApplication: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.onforce.OnForce/org.appcelerator.titanium.TiActivity}: java.lang.RuntimeException: API key not found.  Check that <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="your API key"/> is in the <application> element of AndroidManifest.xml
[ERROR] :  TiApplication:   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2194)
[ERROR] :  TiApplication:   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
[ERROR] :  TiApplication:   at android.app.ActivityThread.access$600(ActivityThread.java:139)
[ERROR] :  TiApplication:   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
[ERROR] :  TiApplication:   at android.os.Handler.dispatchMessage(Handler.java:99)
[ERROR] :  TiApplication:   at android.os.Looper.loop(Looper.java:154)
[ERROR] :  TiApplication:   at android.app.ActivityThread.main(ActivityThread.java:4944)
[ERROR] :  TiApplication:   at java.lang.reflect.Method.invokeNative(Native Method)
[ERROR] :  TiApplication:   at java.lang.reflect.Method.invoke(Method.java:511)
[ERROR] :  TiApplication:   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
[ERROR] :  TiApplication:   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
[ERROR] :  TiApplication:   at dalvik.system.NativeStart.main(Native Method)
[ERROR] :  TiApplication: Caused by: java.lang.RuntimeException: API key not found.  Check that <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="your API key"/> is in the <application> element of AndroidManifest.xml
[ERROR] :  TiApplication:   at maps.af.ay.a(Unknown Source)
[ERROR] :  TiApplication:   at maps.af.ay.a(Unknown Source)
[ERROR] :  TiApplication:   at maps.af.al.a(Unknown Source)
[ERROR] :  TiApplication:   at maps.af.be.a(Unknown Source)
[ERROR] :  TiApplication:   at maps.af.bd.a(Unknown Source)
[ERROR] :  TiApplication:   at cmj.onTransact(SourceFile:107)
[ERROR] :  TiApplication:   at android.os.Binder.transact(Binder.java:297)
[ERROR] :  TiApplication:   at com.google.android.gms.maps.internal.IMapFragmentDelegate$a$a.onCreateView(Unknown Source)
[ERROR] :  TiApplication:   at com.google.android.gms.maps.SupportMapFragment$a.onCreateView(Unknown Source)
[ERROR] :  TiApplication:   at com.google.android.gms.dynamic.a$4.b(Unknown Source)
[ERROR] :  TiApplication:   at com.google.android.gms.dynamic.a.a(Unknown Source)
[ERROR] :  TiApplication:   at com.google.android.gms.dynamic.a.onCreateView(Unknown Source)
[ERROR] :  TiApplication:   at com.google.android.gms.maps.SupportMapFragment.onCreateView(Unknown Source)
[ERROR] :  TiApplication:   at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:871)
[ERROR] :  TiApplication:   at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
[ERROR] :  TiApplication:   at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
[ERROR] :  TiApplication:   at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
[ERROR] :  TiApplication:   at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:523)
[ERROR] :  TiApplication:   at org.appcelerator.titanium.TiBaseActivity.onStart(TiBaseActivity.java:1048)
[ERROR] :  TiApplication:   at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1195)
[ERROR] :  TiApplication:   at android.app.Activity.performStart(Activity.java:4541)
[ERROR] :  TiApplication:   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2167)
</pre></code>

Note that it complains that it doesn't have this tag:
{quote}
<meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="AIzaSyBpAGeW8qGPIxohM11UILmOEyRLn70WYVk"/> 
{quote}

<h4>Steps to reproduce</h4>
1) Please find the SDK uploaded here: <a href="https://www.dropbox.com/s/g6ont6pqn9586d5/onforce-3.2.0-osx.zip" rel="nofollow" target="_blank">https://www.dropbox.com/s/g6ont6pqn9586d5/onforce-3.2.0-osx.zip</a>
2) To generate the build use packaging command (-T dist-playstore):

- titanium build -T dist-playstore --platform android -L OnForce -f -K ./tools/onforce.keystore -O ./tools/

3) Watch packaged APK. Browse Androidmanifest.xml contents. API key not listed into generated file.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-16261_45302/AndroidManifest.js">AndroidManifest.js</td></td><td>2014-01-22T21:22:20.000+0000</td><td>19106</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Chris Barber 2014-01-31

   I tested this with Titanium SDK 3.2.0.GA and the attached TravisTestApp project and it adds the API key to the final AndroidManifest.xml file as expected.
   
   I don't know what "3.2.0.onforce" is, but it is not supported. We only support official GA releases.</li>
<li>Michael Gangolf 2014-02-20

   I'm facing the same error on OSX with 3.2.1GA SDK! I've put all map-v2 lines into the tiapp.xml but it doesn't appear in AndroidManifest.xml
   
   Edit:
   sorry, fixed this already. I had multiple <application> entries in the tiapp.xml and it was overwriting the map-key. Joining them into one fixed the problem!</li>
<li>Lee Morris 2017-03-21

   Closing ticket as the issue cannot be reproduced and due to the above comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16261.json">JSON Source</a></p>