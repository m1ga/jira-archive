---
title: "[TIMOB-16265] Android: Got EPERM, app crashing while trying to access protected folder with Genymotion emulator"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2014-01-21T07:34:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, triage</td></tr>
<tr><th>Reporter</th><td>Ivan Grunev</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2014-01-15T08:38:16.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-20T22:18:59.000+0000</td></tr>
</table>

<h3>Description</h3>



<h3>Comments</h3>

<ol>
<li>Ivan Grunev 2014-01-15

   Okay, seems I found solution.
   
   I found that it stops on seeking Oracle VirtualBox executable in my program files folders. And once it gets to protected folder it crashing.
   
   Conflict is in Titanium\mobilesdk\win32\3.2.0.GA\node_modules\titanium-sdk\lib\emulators\genymotion.js file
   
   So, here is patch:
   138,153c138,151
   < 									try {
   < 										var files = fs.readdirSync(parent),
   < 											i = 0,
   < 											l = files.length,
   < 											name, file, stat, result;
   < 										for (; i < l; i++) {
   < 											name = files[i];
   < 											file = path.join(parent, name);
   < 											if (fs.existsSync(file)) {
   < 												stat = fs.statSync(file);
   < 												if (stat.isFile() && name == executableName) {
   < 													return file;
   < 												} else if (stat.isDirectory() && depth) {
   < 													if (result = scan(file, depth - 1)) {
   < 														return result;
   < 													}
   ---
   > 									var files = fs.readdirSync(parent),
   > 										i = 0,
   > 										l = files.length,
   > 										name, file, stat, result;
   > 									for (; i < l; i++) {
   > 										name = files[i];
   > 										file = path.join(parent, name);
   > 										if (fs.existsSync(file)) {
   > 											stat = fs.statSync(file);
   > 											if (stat.isFile() && name == executableName) {
   > 												return file;
   > 											} else if (stat.isDirectory() && depth) {
   > 												if (result = scan(file, depth - 1)) {
   > 													return result;
   157,158d154
   < 									} catch(EPERM) {
   < 										console.log("Bad permittions");
   
   </li>
<li>Ritu Agrawal 2014-01-21

   [~cbarber] Reporter has suggested to put some code for Genymotion emulator inside try / catch block so I am moving this request to you for further evaluation.</li>
<li>Chris Barber 2014-01-21

   Dupe of TIMOB-16074.</li>
<li>Lee Morris 2017-03-20

   Closing ticket as duplicate.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16265.json">JSON Source</a></p>