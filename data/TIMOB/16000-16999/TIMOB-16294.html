---
title: "[TIMOB-16294] iOS: ToImage() functionality on TabbedBar/ButtonBar removes text of the selected tab in image"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Hold</td></tr>
<tr><th>Resolution Date</th><td>2014-02-05T22:44:53.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>2014 Sprint 03, 2014 Sprint 03 API</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>supportTeam</td></tr>
<tr><th>Reporter</th><td>Rupesh Sharma</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2014-01-23T09:24:54.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-17T18:16:26.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>
When we implement ToImage functionality over a view which contains a tabbedbar/buttonbar, then the resulting image that is generated doesn't show the text on the selected index of the tab.

<h4>Steps to Reproduce</h4>

1. Run the app in simulator
2. tap on the button "Click me"
3. Go to the application documents directory in iphone simulator folder on the path "/Users/<username name>/Library/Application Support/iPhone Simulator/7.0/Applications/<app guid>/Documents"
4. check out the image "test.png"

<h4>Test Code</h4>
<code><pre>
// this sets the background color of the master UIView (when there are no windows/tab groups on it)
Titanium.UI.setBackgroundColor('#000');

// create tab group
var tabGroup = Titanium.UI.createTabGroup();

//
// create base UI tab and root window
//
var win1 = Titanium.UI.createWindow({

    title:'Tab 1',
    backgroundColor:'#fff'
});
var tab1 = Titanium.UI.createTab({

    icon:'KS_nav_views.png',
    title:'Tab 1',
    window:win1
});
 var buttonbar = Titanium.UI.createButtonBar({
            left : 20,
            right : 20,
            height : 24,
            labels : [L('spc_1d'), L('spc_1m'), L('spc_3m'), L('spc_6m'), L('spc_1y'), L('spc_3y'), L('spc_5y')],
            style : Titanium.UI.iPhone.SystemButtonStyle.BAR,
            backgroundColor : '#86c037',
           index:3,
           font:{fontWeight:'bold'}
 });
        win1.add(buttonbar);

var button = Ti.UI.createButton({
    title:"click me",
    text:"click here",
    backgroundColor:'black',
    top:20
});
win1.add(button);
button.addEventListener("click",function(e){
    Ti.API.info("you got clicked");
    var imageFile = Ti.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory, 'test.png');
        imageFile.write(win1.toImage());
});

//
// create controls tab and root window
//
var win2 = Titanium.UI.createWindow({

    title:'Tab 2',
    backgroundColor:'#fff'
});
var tab2 = Titanium.UI.createTab({

    icon:'KS_nav_ui.png',
    title:'Tab 2',
    window:win2
});

var label2 = Titanium.UI.createLabel({
    color:'#999',
    text:'I am Window 2',
    font:{fontSize:20,fontFamily:'Helvetica Neue'},
    textAlign:'center',
    width:'auto'
});

win2.add(label2);

//
//  add tabs
//
tabGroup.addTab(tab1);

tabGroup.addTab(tab2);

// open tab group
tabGroup.open();
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-16294_45316/test.png">test.png</td></td><td>2014-01-23T09:26:21.000+0000</td><td>20543</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Vishal Duggal 2014-02-05

   We use renderInContext method to create a UIImage object from a UIView.
   
   In iOS7 iOS has changed the way the selected segment is displayed. The selected segment now has a compositingFilter (which older versions of iOS did not). renderInContext implementation does not support the entire Core Animation composition model.
   
   compostingFilter is one of the unsupported elements. 
   
   Going to mark this as "HOLD" until we have a good alternative to renderInContext.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16294.json">JSON Source</a></p>