---
title: "[TIMOB-16332] Android: Longjohn Error on every emulator start"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-03-12T17:41:03.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>2014 Sprint 02, 2014 Sprint 02 Core, Release 3.2.3, Release 3.3.0</td></tr>
<tr><th>Components</th><td>Android, CLI</td></tr>
<tr><th>Labels</th><td>module_build, qe-closed-3.2.3, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Andrey Rusanov</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2014-01-27T23:21:29.000+0000</td></tr>
<tr><th>Updated</th><td>2014-07-28T19:20:30.000+0000</td></tr>
</table>

<h3>Description</h3>

On every emulator start, after starting app(apk was installing successfully) I've got :

{panel}
[INFO] :   Starting app: com.ucl.test/.Tp2Activity
/usr/local/lib/node_modules/titanium/node_modules/longjohn/dist/longjohn.js:184
        throw e;
              ^
TypeError: Object USER     PID   PPID  VSIZE  RSS     WCHAN    PC         NAME
root      1     0     404    280   c0274189 08054b16 S /init
root      2     0     0      0     c022a30e 00000000 S kthreadd
root      3     2     0      0     c021dc3d 00000000 S ksoftirqd/0
root      4     2     0      0     c0227a22 00000000 S events/0
root      5     2     0      0     c0227a22 00000000 S khelper
root      11    2     0      0     c0227a22 00000000 S suspend
root      161   2     0      0     c0227a22 00000000 S kblockd/0
root      165   2     0      0     c0227a22 00000000 S cqueue
root      172   2     0      0     c0227a22 00000000 S ata/0
root      173   2     0      0     c0227a22 00000000 S ata_aux
root      175   2     0      0     c0227a22 00000000 S ksuspend_usbd
root      180   2     0      0     c0442390 00000000 S khubd
root      183   2     0      0     c046549e 00000000 S kseriod
root      188   2     0      0     c0227a22 00000000 S kmmcd
root      242   2     0      0     c024aabe 00000000 S pdflush
root      243   2     0      0     c024aabe 00000000 S pdflush
root      244   2     0      0     c024dfa0 00000000 S kswapd0
root      299   2     0      0     c0227a22 00000000 S aio/0
root      480   2     0      0     c0227a22 00000000 S iscsi_eh
root      492   2     0      0     c042cf7e 00000000 S mtdblockd
root      493   2     0      0     c042cf7e 00000000 S nftld
root      529   2     0      0     c0227a22 00000000 S kstriped
root      532   2     0      0     c0227a22 00000000 S kondemand/0
root      537   2     0      0     c0227a22 00000000 S hid_compat
root      579   1     384    224   c0274189 08054b16 S /sbin/ueventd
system    779   1     1272   404   c04a5605 b7f9ca0e S /system/bin/servicemanager
root      781   1     5424   1020  ffffffff b7fb3611 S /system/bin/vold
root      784   1     11216  1516  ffffffff b7e02611 S /system/bin/netd
root      787   1     1400   516   c04b13c0 b7e69aa3 S /system/bin/debuggerd
radio     788   1     6216   1052  ffffffff b7e71611 S /system/bin/rild
system    789   1     74564  25328 ffffffff b7e69a0e S /system/bin/surfaceflinger
root      790   1     163404 39064 ffffffff b7ed2bd0 S zygote
drm       791   1     9088   2792  ffffffff b7de6a0e S /system/bin/drmserver
media     792   1     39996  8548  ffffffff b7dc8a0e S /system/bin/mediaserver
bluetooth 793   1     2232   928   c0274189 b7f4220a S /system/bin/dbus-daemon
root      794   1     1344   532   c0517b4c b7e6065e S /system/bin/installd
keystore  795   1     3108   1028  c04b13c0 b7e6aaa3 S /system/bin/keystore
root      820   1     1324   488   c028cf56 b7f2f157 S /system/bin/qemud
shell     823   1     1268   476   c03652ce b7e5d65e S /system/bin/sh
root      824   1     3516   272   ffffffff 08076e10 R /sbin/adbd
system    996   790   269476 63680 ffffffff b7ed2a0e S system_server
u0_a31    1072  790   191812 49264 ffffffff b7ed4157 S com.android.systemui
u0_a27    1087  790   173848 28320 ffffffff b7ed4157 S com.android.inputmethod.latin
system    1107  790   177608 23488 ffffffff b7ed4157 S com.android.settings
u0_a3     1114  790   176808 27392 ffffffff b7ed4157 S android.process.acore
radio     1150  790   199680 30816 ffffffff b7ed4157 S com.android.phone
u0_a15    1163  790   191060 44980 ffffffff b7ed4157 S com.android.launcher
u0_a1     1197  790   178092 24396 ffffffff b7ed4157 S com.android.calendar
u0_a32    1214  790   187812 25092 ffffffff b7ed4157 S com.android.providers.calendar
u0_a19    1227  790   172680 24588 ffffffff b7ed4157 S com.android.deskclock
u0_a3     1251  790   179288 26576 ffffffff b7ed4157 S com.android.contacts
u0_a6     1273  790   187996 26224 ffffffff b7ed4157 S android.process.media
u0_a12    1307  790   178080 23024 ffffffff b7ed4157 S com.android.exchange
u0_a24    1329  790   174708 24616 ffffffff b7ed4157 S com.android.mms
u0_a29    1343  790   195996 29172 ffffffff b7ed4157 S com.android.email
u0_a4     1478  790   185268 21956 ffffffff b7ed4157 S com.android.defcontainer
system    1514  790   170776 23312 ffffffff b7ed4157 S com.android.keychain
u0_a33    1529  790   169664 21136 ffffffff b7ed4157 S com.svox.pico
u0_a9     1542  790   173136 22716 ffffffff b7ed4157 S com.android.quicksearchbox
u0_a44    1571  790   205716 35716 ffffffff b7ed4325 R com.ucl.test
root      1589  824   1268   508   c021bfc9 b7f42ee3 S /system/bin/sh
root      1590  1589  1504   556   00000000 b7f0065e R ps
 has no method 'split'
    at ADB.<anonymous> (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:495:21)
    at conn.exec.noLength (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:441:5)
    at Connection.<anonymous> (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:216:4)
    at EventEmitter.emit (events.js:117:20)
    at _stream_readable.js:910:16
    at process._tickCallback (node.js:415:13)
---------------------------------------------
    at Connection.exec (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:213:9)
    at conn.exec.dontWaitForData (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:440:9)
    at Connection.<anonymous> (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:154:15)
    at EventEmitter.emit (events.js:95:17)
    at Socket.<anonymous> (_stream_readable.js:736:14)
    at EventEmitter.emit (events.js:92:17)
---------------------------------------------
    at Readable.on (_stream_readable.js:679:33)
    at Connection.exec (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:114:9)
    at ADB.shell (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:436:7)
    at ADB.getPid (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:491:7)
    at /home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/android/cli/hooks/run.js:324:15
    at async.whilst (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/async/lib/async.js:616:13)
    at /home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/android/cli/hooks/run.js:314:15
    at conn.exec.noLength (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:441:5)
---------------------------------------------
    at Connection.exec (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:213:9)
    at conn.exec.dontWaitForData (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:440:9)
    at Connection.<anonymous> (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:154:15)
    at EventEmitter.emit (events.js:95:17)
    at Socket.<anonymous> (_stream_readable.js:736:14)
    at EventEmitter.emit (events.js:92:17)
---------------------------------------------
    at Readable.on (_stream_readable.js:679:33)
    at Connection.exec (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:114:9)
    at ADB.shell (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:436:7)
    at ADB.startApp (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/titanium-sdk/lib/adb.js:519:7)
    at /home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/android/cli/hooks/run.js:309:12
    at /home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/async/lib/async.js:548:21
    at /home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/async/lib/async.js:224:13
    at iterate (/home/arusanov/.titanium/mobilesdk/linux/3.2.0.GA/node_modules/async/lib/async.js:131:13)
[ERROR] Application Installer abnormal process termination. Process exit value was 8
{panel}

Application works normally after this error, but I can't get anything in trace

Application type: desktop
Titanium SDK: 3.2.0.GA
Titanium Studio: build: 3.2.0.201312191547 Build: jenkins-titanium-rcp-master-76 (origin/master) Date: 19 December 2013, 15:48:53
Host Operating System: Linux Mint 16
Platform & version: Android SDK: 16
Device: Android Emulator
a simple test case: any code(ex default Alloy "Hello World")

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-16332_46143/error.txt">error.txt</td></td><td>2014-02-24T11:22:17.000+0000</td><td>17959</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ritu Agrawal 2014-01-28

   There is really not much information in this ticket to diagnose this issue. Please provide us a simple Titanium test case, Android SDK version and emulator information to troubleshoot this issue.</li>
<li>Andrey Rusanov 2014-01-28

   Done</li>
<li>Chris Barber 2014-01-28

   I tested this on 64-bit Linux Mint 15 with Node.js 0.10.25, Titanium SDK 3.2.0.GA, and Android SDK 4.4 and was unable to reproduce.
   
   I suspect that adb was having a bad day. You can try running <code>adb kill-server</code> and restarting the Android emulator. You may even need to recreate the Android emulator. Be sure to keep your Android platform and build tools up to date with the latest versions.
   
   In the meantime, I'll submit a PR that will convert the Buffer to a String which should resolve the error you are receiving.</li>
<li>Chris Barber 2014-01-28

   Master pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/5278" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5278</a>
   3.2.x pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/5279" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5279</a>
   
   I'm not sure how to test given that I cannot reproduce the problem. I suspect this has to do with the Node.js version you have installed.</li>
<li>Andrey Rusanov 2014-02-01

   Thanks a lot! It fixed my problem!</li>
<li>f 2014-02-16

   Yes. it fixed for me too. Fedora Linux AMD64, SDK 3.2.1 GA and Android SDK 4.1.2
   nodejs  0.10.24 </li>
<li>Paras Mishra 2014-02-24

   I am able to reproduce this issue on Nexus 5 phone , android version:4.4.2
   It works fine on Nexus 4, android version: 4.1.2
   Log file is attached as error.txt
   
   Environment used:
   Device: Nexus 5 phone , android version:4.4.2
   Appcelerator Studio, build: 3.2.1.201402061120
   SDK: 3.2.0.GA
   alloy: 1.3.1-Beta
   acs: 1.0.11
   npm: 1.3.2
   titanium: 3.2.0.GA
   titanium-code-processor: 1.1.0
   OS: Ubuntu 12.04 (64-bit) LTS</li>
<li>Samuel Dowse 2014-02-25

   Tested on:
   Ubuntu 14.04 (64-bit) LTS
   Appcelerator Studio, build: 3.2.1.201402061120
   Titanium SDK, build: 3.2.1.GA
   Titanium SDK, build: 3.2.0.GA
   CLI: 3.2.1
   Alloy: 1.3.1
   
   Cannot reproduce this error.
   Android Emulator successfully launches on each run attempt.</li>
<li>Ingo Muschenetz 2014-03-12

   Going to re-mark this as fixed based on [~sdowse]'s comments</li>
<li>Neha Mittal 2014-03-24

    Verified fix using below environment:
    
    Appc Studio: 3.2.3.201403190645
    Sdk: 3.2.3.v20140322210914
    acs: 1.0.14
    npm: 1.3.2
    alloy:1.3.1
    titanium:3.2.1
    titanium-code-processor:1.1.0
    Xcode: 5.1
    Osx: Ubuntu 12.04 (64-bit) LTS
    Device: Nexus 5 phone , android version:4.4.2
    
    Emulator launches successfully on each run without any error message.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16332.json">JSON Source</a></p>