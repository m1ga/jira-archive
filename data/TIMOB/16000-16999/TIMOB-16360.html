---
title: "[TIMOB-16360] Android: trayClickFocusedApp event not fired when push notification clicked in tray"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-10-20T17:59:22.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.2.1, Release 3.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, module_acs, qe-manualtest, trayClickFocusedApp</td></tr>
<tr><th>Reporter</th><td>Mahlon Gumbs</td></tr>
<tr><th>Assignee</th><td>Jon Alter</td></tr>
<tr><th>Created</th><td>2013-12-26T15:53:32.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-31T22:23:37.000+0000</td></tr>
</table>

<h3>Description</h3>



<h3>Comments</h3>

<ol>
<li>Paulo Alves 2014-01-21

   I have the same problem, if you use 3.1.3 is possible work with trayClickFocusedApp event? </li>
<li>Seth Toda 2014-02-01

   Was able to reproduce this on Android 4.3, CLI 3.2, SDK 3.2. Moved to engineering
   
   </li>
<li>Ingo Muschenetz 2014-02-03

   Placing in consideration for 3.2.1.</li>
<li>Jon Alter 2014-02-04

   PR: <a href="https://github.com/appcelerator-modules/cloudpush/pull/6" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/cloudpush/pull/6</a></li>
<li>Ingo Muschenetz 2014-02-05

   PR to merge module: <a href="https://github.com/appcelerator/titanium_mobile/commit/2604bb2bb9600aa67dec291a7bb02a90684a3170" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/2604bb2bb9600aa67dec291a7bb02a90684a3170</a></li>
<li>Lokesh Choudhary 2014-02-06

   Verified the fix. Taping on the notification brings the app to the foreground & we get alert "got the trayClickFocussedApp event".
   
   Closing.
   
   Environment:
   Appc Studio : 3.2.1.201401311225
   Ti SDK : 3.2.1.v20140205094854
   Mac OSX : 10.8.5
   Alloy : 1.3.1-cr 	
   CLI - 3.2.1 beta3
   Nexus 4 - android 4.4.2</li>
<li>Alex Bernier 2014-02-14

   Should I expect to have payload in the event? I don't. However, "callback" gives me the payload and is now only fired when tapping notification in the tray. In past SDKs, "callback" was fired when the push notification was delivered to the phone, before tapping.
   
   <code><pre>
   	CloudPush.addEventListener("callback", function(e) {
   		Ti.API.info("callback, with payload: " + JSON.stringify(e));
   	});
   
   	CloudPush.addEventListener("trayClickFocusedApp", function(e) {
   		Ti.API.info("trayClickFocusedApp, no payload: " + JSON.stringify(e));
   	});
   </pre></code>
   
   Environment:
   Studio : 3.2.1.GA
   Ti SDK : 3.2.1.GA
   Ti CLI : 3.2.1.GA
   Alloy : 1.3.1
   Device : Nexus 5, Android 4.4.2
   
   So I'm using the "callback" event now, and not "trayClickFocusedApp".</li>
<li>Alex Bernier 2014-02-21

   I was wrong above. "callback" is fired when the push is received, not when the user taps. Other circumstances led me to believe it was happening on tap.</li>
<li>Silambarasan Raman 2014-10-16

   Hi There,
   
   I am using ti.cloudpush 3.3.0,
   And i am getting Push and Callback is fine,
   
   But not getting the below,
   CloudPush.addEventListener('trayClickLaunchedApp', function (evt) { alert('Tray Click Launched App (app was not running)'); });
   	    CloudPush.addEventListener('trayClickFocusedApp', function (evt) { alert('Tray Click Focused App (app was already running)'); });
   
   Can you help me to solved out this issue</li>
<li>Jon Alter 2014-10-16

    [~simbu] Here is the current ticket for this issue TIMOB-17815
    It will be fixed in the next version of ti.cloudpush.</li>
<li>Alex Bernier 2014-10-16

    Jira is saying I don't have permission to view TIMOB-17815.</li>
<li>Jon Alter 2014-10-16

    Try now.</li>
<li>Alex Bernier 2014-10-16

    Works now. Thank you!</li>
<li>Silambarasan Raman 2014-10-17

    </li>
<li>Jon Alter 2014-10-17

    [~simbu] You will either have to use ti.cloudpush 3.2.1 or wait for 3.3.1.</li>
<li>Silambarasan Raman 2014-10-19

    Jon Alter,
    
    I have tried with 3.2.1 module, But its not firing the Tray Events.</li>
<li>Jon Alter 2014-10-20

    ti.cloudpush 3.3.1 can be downloaded here: <a href="https://github.com/appcelerator/titanium_mobile/raw/master/support/module/packaged/ti.cloudpush-android-3.3.1.zip" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/raw/master/support/module/packaged/ti.cloudpush-android-3.3.1.zip</a></li>
<li>Silambarasan Raman 2014-10-21

    Hi Jon Alter,
    
    Really, Thanks for this updated ti.cloudpush 3.3.1.
    Its working fine,  But is there any way to get the payload on that TrayEvents like we are getting in callback.
    
    Can you please let me know is there any option for the firing the same event of
    TrayClickLaunchedApp, 
    and TryClickFocusedApp for iOS. ?</li>
<li>Silambarasan Raman 2014-10-23

    Hi Jon, 
    
     Please have a look at my above comment, We need your help here, Since we are in the App Publishing stage.</li>
<li>Jon Alter 2014-10-23

    </li>
<li>Silambarasan Raman 2014-10-24

    Hi Jon,
    
    Thanks, We will manage the Android Payload issue and will create ticket if its more important.
    But for iOS can you help us with the existing Ti versions.
    
    We have used the Interactive notification already but its only for iOS 8, So it won't help us.</li>
<li>Jon Alter 2014-10-27

    [~simbu] - We don't currently have an event that fires on iOS to let you know that the app was foregrounded by a user clicking on a notification. If this is important to you, please create another ticket requesting this feature and add a link to it here.</li>
<li>Silambarasan Raman 2014-11-07

    Hi Jon,
    
    Thanks, I have used the silent push notification for iOS for time being. 
    <a href="http://docs.appcelerator.com/titanium/3.0/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/3.0/#</a>!/guide/iOS_Background_Services
    
    I will create a ticket later if its important to me</li>
<li>Silambarasan Raman 2014-11-19

    </li>
<li>Jon Alter 2014-11-20

    Thanks for creating the ticket [~simbu].</li>
<li>Patrick van Vuuren 2015-01-30

    Jon Alter, is it possible you could push CloudPush 3.3.8 zip to <a href="https://github.com/appcelerator/titanium_mobile/raw/master/support/module/packaged/?" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/raw/master/support/module/packaged/?</a>
    
    When accessing the actual issue [MOD-1905], it is not possible for me to comment on that ticket.
    And your link <a href="https://github.com/appcelerator-modules/cloudpush/releases/tag/3.3.8" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/cloudpush/releases/tag/3.3.8</a> does not work for me to use it. It directs me to a 404 page.</li>
<li>Jon Alter 2015-02-02

    [~Serfenia], it is done. </li>
<li>Brad Ball 2015-11-25

    I am still seeing this issue. When my app is backgrounded and I tap on a notification, the app gets foregrounded, but the trayClickFocusedApp event is never fired (neither is the callback event). I have tried both with singleCallback=true AND singleCallback=false and behaviour is the same. All other scenarios seem to work fine (trayClickLaunchedApp gets fired if the app is not running at all) and callback gets fired if the app is already foregrounded or if it's not running at all. But when the app is running but backgrounded, the trayClickFocusedApp and callback events are NOT fired.
    
    Environment:
    Appc Studio : 4.4.0.201511182122
    Ti SDK : 5.1.0.GA
    Mac OSX : 10.10.5
    Ti.Cloudpush: 3.4.0
    Galaxy S4 - android 5.0.1</li>
<li>Alex Bernier 2015-11-26

    [~bradleycorn] I don't think the Appcelerator team is updated on closed tickets. You may want to open a new one if they don't acknowledge your comment.</li>
<li>Lee Morris 2017-03-31

    Closing ticket as fixed, if there are any problems, please file a new ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16360.json">JSON Source</a></p>