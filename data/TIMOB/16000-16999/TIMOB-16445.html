---
title: "[TIMOB-16445] Anvil: issues using Ti.Filesystem.getFile"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2017-05-22T21:21:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>linvalid</td></tr>
<tr><th>Reporter</th><td>Federico Casali</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2014-02-11T19:57:55.000+0000</td></tr>
<tr><th>Updated</th><td>2017-05-22T22:09:58.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem description</h4>

Using Anvil for SyncServer testing, an issue is surfacing when using Ti.Filesystem.getFile for checking folder. 

Attached sample code run manually on device works as expected.

See lines 153 to 170 of the attached sample code 'app.js':
<code><pre>
 function copyfiles(){
        var srcDataDir = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, "myfiles");
        var destDataDir = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, "myfiles");
        destDataDir.createDirectory();
        var files = srcDataDir.getDirectoryListing();
        var qty = files.length;
        Ti.API.info('#### qty: ' + JSON.stringify(qty));
        for(var i = 0; i < (qty-1); i++) {
            var srcFile = Ti.Filesystem.getFile(srcDataDir.nativePath, files[i]);
            var destFile = Ti.Filesystem.getFile(destDataDir.nativePath, files[i]);
            destFile.write(srcFile.read());

            if (!destFile.exists()) {
            	 alert(destFile.nativePath);
            };
        }
    }
</pre></code>

When run on device, it works as expected (destFile.exists() returns true).

However, running the same code on Anvil and adding a valueOf check:
<code><pre>
valueOf(testRun,destFile.exists()).shouldBeTrue();
</pre></code>

is returning false, thus an error.


'externalfilesync.js' file attached is the Anvil test sample - see 'function copyfiles()' line 214.

<h3>Comments</h3>

<ol>
<li>Lee Morris 2017-05-22

   Anvil is no longer supported, this ticket is now irrelevant.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16445.json">JSON Source</a></p>