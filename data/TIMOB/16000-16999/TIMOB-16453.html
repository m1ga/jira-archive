---
title: "[TIMOB-16453] iOS: Build failed while parsing html"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-05-08T05:25:47.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.0, Release 3.2.1</td></tr>
<tr><th>Fix Version/s</th><td>2014 Sprint 07, 2014 Sprint 07 Tooling, Release 3.3.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>module_webview, qe-closed-3.3.0, qe-testadded, triage</td></tr>
<tr><th>Reporter</th><td>Mostafizur Rahman</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2014-02-12T06:29:37.000+0000</td></tr>
<tr><th>Updated</th><td>2014-07-29T17:16:47.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem </h4>

WebView throw an error in Ti apps for local html file.



<h4>Testing Environments </h4>
Mac OS X 10.8.5 
Titanium SDK: 3.2.1.GA
Titanium CLI: 3.2.1
IOS Simulator 7.0.3 
Appcelerator Studio, build: 3.2.1.201402061120


<h4>Test Code</h4>

<code><pre>
var win = Ti.UI.createWindow({
	layout : 'vertical',
	backgroundColor : "#fff"

});

// Create a WebView
var aWebView = Ti.UI.createWebView({
	url : '/1357256.html' //<a href="http://appc.mrtechnologybd.com/1357256.html" rel="nofollow" target="_blank">http://appc.mrtechnologybd.com/1357256.html</a>
});
aWebView.addEventListener('load', function(e) {
	Ti.API.info('webview loaded: ' + e.url);
});

// Add to the parent view.
win.add(aWebView);

win.open();

</pre></code>

<h4>Steps to reproduce </h4>
<h4>Create New Ti Sample project</h4>
<h4>Save attached html file to resource folder </h4>
<h4>Update app.js file with test code </h4>
<h4>Run test code in IOS Simulator </h4>
<h4>Check console log for error message </h4>




<h4>Error Logs</h4>
<code><pre>
/Users/mrahman/Library/Application Support/Titanium/mobilesdk/osx/3.2.1.GA/node_modules/xmldom/sax.js:102
			var localNSMap = config.localNSMap;
			                       ^
TypeError: Cannot read property 'localNSMap' of undefined
    at parse (/Users/mrahman/Library/Application Support/Titanium/mobilesdk/osx/3.2.1.GA/node_modules/xmldom/sax.js:102:27)
    at XMLReader.parse (/Users/mrahman/Library/Application Support/Titanium/mobilesdk/osx/3.2.1.GA/node_modules/xmldom/sax.js:30:3)
    at DOMParser.parseFromString (/Users/mrahman/Library/Application Support/Titanium/mobilesdk/osx/3.2.1.GA/node_modules/xmldom/dom-parser.js:25:7)
    at Object.analyzeHtml (/Users/mrahman/Library/Application Support/Titanium/mobilesdk/osx/3.2.1.GA/node_modules/titanium-sdk/lib/jsanalyze.js:159:58)
    at Object.analyzeHtmlFile (/Users/mrahman/Library/Application Support/Titanium/mobilesdk/osx/3.2.1.GA/node_modules/titanium-sdk/lib/jsanalyze.js:146:17)
    at /Users/mrahman/Library/Application Support/Titanium/mobilesdk/osx/3.2.1.GA/iphone/cli/commands/_build.js:2726:17
    at async.whilst (/Users/mrahman/Library/Application Support/Titanium/mobilesdk/osx/3.2.1.GA/node_modules/async/lib/async.js:619:13)
    at recursivelyCopy (/Users/mrahman/Library/Application Support/Titanium/mobilesdk/osx/3.2.1.GA/iphone/cli/commands/_build.js:2675:9)
    at /Users/mrahman/Library/Application Support/Titanium/mobilesdk/osx/3.2.1.GA/iphone/cli/commands/_build.js:2697:39
    at async.whilst (/Users/mrahman/Library/Application Support/Titanium/mobilesdk/osx/3.2.1.GA/node_modules/async/lib/async.js:619:13)
</pre></code>


Thanks 

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-16453_45840/1357256.html">1357256.html</td></td><td>2014-02-12T06:29:37.000+0000</td><td>26983</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-16453_45856/hello.html">hello.html</td></td><td>2014-02-12T19:34:04.000+0000</td><td>179</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Chris Barber 2014-04-01

   The attached 1357256.html file is extremely malformed. It contains multiple <html> tags which is a huge no-no. Regardless, I've got a fix for when the html is so badly malformed.</li>
<li>Chris Barber 2014-04-01

   Master pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/5566" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5566</a></li>
<li>Deepti Pandey 2014-05-08

   Verified as FIXED using :
   Mac :10.9.2
   Appcelerator Studio, build: 3.3.0.201405011408
   SDK - 3.3.0.v20140507163312
   acs-1.0.14
   alloy-1.4.0-dev
   npm-1.3.2
   titanium-3.3.0-dev
   titanium-code-processor-1.1.1
   Xcode :5.1.1
   Devices used: iPhone 5s (7.1.1) , iPhone Simulator 7.1
   Jsananalyzer is able to parse malformed html files. I am successfully able to run with given code and no console logs are seen with  classic.html file.Hence closing as fixed. </li>
<li>Deepti Pandey 2014-05-08

   reopening to add device details.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16453.json">JSON Source</a></p>