---
title: "[TIMOB-16524] Android: Alert dialog appears behind window"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2014-03-10T15:37:51.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>ipass1</td></tr>
<tr><th>Reporter</th><td>Allen Yeung</td></tr>
<tr><th>Assignee</th><td>Sunila</td></tr>
<tr><th>Created</th><td>2014-03-01T00:51:08.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-28T23:54:31.000+0000</td></tr>
</table>

<h3>Description</h3>

This is an issue that originated from the camera issue: TIMOB-12848

To reproduce:

1. Run the code below
2. Take a picture


<code><pre>
var win = Titanium.UI.createWindow();
var imageView = Ti.UI.createImageView({height: Ti.UI.FILL, width: Ti.UI.Fill});
win.add(imageView);
    Titanium.Media.showCamera({
  
        success:function(event)
        {
            Ti.API.info('#### Camera Success');
            var cropRect = event.cropRect;
            var image = event.media;
            Ti.API.info(image.length);
            var filename = Titanium.Filesystem.tempDirectory + "/"+ 'camera_photo' + new Date().getTime() + ".png";
            Ti.API.info(filename);
            var f = Titanium.Filesystem.getFile(filename);
            Ti.API.info(f.nativePath);
            if (f.exists()) {
                Ti.API.info('The file exist , trying to delete it before using it :' + f.deleteFile());
                f = Titanium.Filesystem.getFile(filename);
            }
            f.write(image);
            alert('Camera Success! The file size is '+f.size+' bytes.\n Now trying to assign it to an image on the screen (this may fail for hi res images)')
            imageView.image = f.nativePath;
        },
        cancel:function()
         
        {
            Ti.API.info('#### Camera Cancel');
        },
        error:function(error)
        {
            // create alert
            Ti.API.info('#### Camera Error');
            var a = Titanium.UI.createAlertDialog({title:'Camera'});
  
            // set message
            if (error.code == Titanium.Media.NO_CAMERA)
            {
                a.setMessage('Device does not have video recording capabilities');
            }
            else
            {
                a.setMessage('Unexpected error: ' + error.code);
            }
  
            // show alert
            a.show();
        },
        allowEditing:true
    });
win.open();
</pre></code>

Expected result:
The alert dialog should show up.

Actual result:
The alert dialog shows up behind the window (if you hit back to close the window, the alert dialog shows up)

<h3>Comments</h3>

<ol>
<li>Sunila 2014-03-10

   I don't think this is a bug. Since the window is not yet opened when showCamera is called, the activity that is used to launch the camera activity is the root activity and the callback doesn't comeback until it is active (by pressing back). To use the window activity, try calling the showCamera in 'open' event handler of the window. Modified sample
   
   var win = Titanium.UI.createWindow();
   var imageView = Ti.UI.createImageView({height: Ti.UI.FILL, width: Ti.UI.Fill});
   win.add(imageView);
   	
   win.addEventListener("open", function(e){
       Titanium.Media.showCamera({
      
           success:function(event)
           {
               Ti.API.info('#### Camera Success');
               var cropRect = event.cropRect;
               var image = event.media;
               Ti.API.info(image.length);
               var filename = Titanium.Filesystem.tempDirectory + "/"+ 'camera_photo' + new Date().getTime() + ".png";
               Ti.API.info(filename);
               var f = Titanium.Filesystem.getFile(filename);
               Ti.API.info(f.nativePath);
               if (f.exists()) {
                   Ti.API.info('The file exist , trying to delete it before using it :' + f.deleteFile());
                   f = Titanium.Filesystem.getFile(filename);
               }
               f.write(image);
               alert('Camera Success! The file size is '+f.size+' bytes.\n Now trying to assign it to an image on the screen (this may fail for hi res images)')
               imageView.image = f.nativePath;
           },
           cancel:function()
             
           {
               Ti.API.info('#### Camera Cancel');
           },
           error:function(error)
           {
               // create alert
               Ti.API.info('#### Camera Error');
               var a = Titanium.UI.createAlertDialog({title:'Camera'});
      
               // set message
               if (error.code == Titanium.Media.NO_CAMERA)
               {
                   a.setMessage('Device does not have video recording capabilities');
               }
               else
               {
                   a.setMessage('Unexpected error: ' + error.code);
               }
      
               // show alert
               a.show();
           },
           allowEditing:true
       });
   });
   win.open();</li>
<li>Lee Morris 2017-03-28

   Closing ticket as invalid.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16524.json">JSON Source</a></p>