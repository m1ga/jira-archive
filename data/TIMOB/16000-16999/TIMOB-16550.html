---
title: "[TIMOB-16550] Android: Button title shifts to the left when Texfield is focus"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2014-05-22T05:35:29.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.0, Release 3.2.1</td></tr>
<tr><th>Fix Version/s</th><td>2014 Sprint 10, 2014 Sprint 10 SDK, Release 3.4.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>supportTeam</td></tr>
<tr><th>Reporter</th><td>Marco Cota</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2014-03-04T17:59:02.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-29T01:00:49.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue</h4>

Customer is using textfields and a button to create a simple form in their project and after they focus on any of the textfield elements the button shifts the title align from center to left.

Tested and reproduce by customer in HTC Ruby with Android 4.0.3 and 

<h4>Testing</h4>

After testing we have found this behavior appears to be be present on Android versions under 4.3

Test and reproduced by support at:

Sony LT 22i
Android 4.1.2

While testing this issue is not reproducible with devices:

Samsung Galaxy S4
Android 4.3

Nexus 7
Android 4.4

<h4>Sample Code</h4>

<code><pre>
var OF = {};
OF.apply = function(ro, so, defaults){
    if(defaults){
        OF.apply(ro, defaults);
    }
    if(ro && so && typeof so == 'object'){
        for(var i in so){
            ro[i] = so[i];
        }
    }
    return ro;
};
OF.combine = function(obj, props){
    var newObj = {};
    OF.apply(newObj, obj);
    return OF.apply(newObj, props);
};
var TEXT_FIELD_HEIGHT =  50,
    FONT_FAMILY = 'Roboto-Regular',
    $ = {horizontalSpacing : 10},
    $$ = {
        bgColor : '#E9E9E9',
        horizontalSpacing : $.horizontalSpacing,
        actionBtn : {
            backgroundImage : "/images/action_button_slice.png",
            title : 'Action',
            font : {
                fontFamily : FONT_FAMILY,
                fontSize : 20,
                fontWeight : 'bold',
                verticalAlign : 'center',
                color : 'black'
            },
            textAlign : 'center',
            color : 'black',
            top : $.horizontalSpacing,
            width: 294,
            height : 57
        }
    };

var create_login_window = function(window){

var popupView = Ti.UI.createView({
    backgroundImage: '/images/loginBG_bottom.png',
    opacity : 1.0,
    top : 0, bottom : 0,
    left : 0, right : 0,
    layout : 'vertical'
});
var scrollView = Titanium.UI.createScrollView({
    backgroundColor : $$.bgColor,
    backgroundImage : '/images/loginBG_bottom.png',
    top:0, bottom : 0,
    showVerticalScrollIndicator:false,
    showHorizontalScrollIndicator:false
});

scrollView.add(popupView);
window.add(scrollView);

var popupViewTop = Titanium.UI.createView({
    backgroundImage: null,
    backgroundColor :  'white',
    opacity : 1.0,
    top : 0,
    height : 175,
    width : Ti.UI.FILL
});
popupView.add(popupViewTop);

var logoImageView = Ti.UI.createImageView({
    image : '/images/login_logo.png',
    width :  269,
    height : 104,
});
popupViewTop.add(logoImageView);


var popupViewBottom = Titanium.UI.createView({
    backgroundImage:  '/images/android_login_bottom_slice.9.png',
    opacity : 1.0,
    top : 0,
    height : Ti.UI.FILL,
    width : Ti.UI.FILL,
    layout : 'vertical'
});
popupView.add(popupViewBottom);

var usernameText = Ti.UI.createTextField({
    autocapitalization : Titanium.UI.TEXT_AUTOCAPITALIZATION_NONE,
    borderStyle : Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
    font:{
        fontFamily : FONT_FAMILY,
        fontSize : 14
    },
    color : '#808080',
    borderWidth : 1,
    borderRadius : 5,
    bubbleParent : false,
    hintText : 'Enter username',
    value : '',
    autocorrect : false,
    clearOnEdit : false,
    returnKeyType: Titanium.UI.RETURNKEY_DONE,
    top : 0,
    left : $$.horizontalSpacing,
    right : $$.horizontalSpacing,
    height : TEXT_FIELD_HEIGHT
});
popupViewBottom.add(usernameText);

var passwordText = Ti.UI.createTextField({
    autocapitalization : Titanium.UI.TEXT_AUTOCAPITALIZATION_NONE,
    borderStyle : Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
    font:{
        fontFamily : FONT_FAMILY,
        fontSize : 14
    },
    color : '#808080',
    borderWidth : 1,
    bubbleParent : false,
    borderRadius : 5,
    hintText : 'Enter password',
    value : '',
    clearOnEdit : true,
    top : $$.horizontalSpacing/2,
    left : $$.horizontalSpacing,
    right : $$.horizontalSpacing,
    returnKeyType : Titanium.UI.RETURNKEY_DONE,
    height : TEXT_FIELD_HEIGHT,
    passwordMask : false
});
popupViewBottom.add(passwordText);

var server = Ti.UI.createTextField({
    autocapitalization:Titanium.UI.TEXT_AUTOCAPITALIZATION_NONE,
    borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
    font : {
        fontFamily : FONT_FAMILY,
        fontSize : 14
    },
    color : '#808080',
    borderWidth: 1,
    bubbleParent : false,
    borderRadius: 5,
    hintText : 'Enter servername',
    value:'',
    clearOnEdit: false,
    top :  0,
    left : $$.horizontalSpacing,
    right : $$.horizontalSpacing,
    autocorrect : false,
    returnKeyType: Titanium.UI.RETURNKEY_DONE,
    height : TEXT_FIELD_HEIGHT
});
popupViewBottom.add(server);


passwordText.addEventListener('focus', function() {
    passwordText.passwordMask = true;    
});

var loginButton = Ti.UI.createButton(OF.combine($$.actionBtn, {
    backgroundImage :  null,
    title : 'Sign In',
    left : $$.horizontalSpacing,
    right : $$.horizontalSpacing,
    width : null,
    textAlign : Ti.UI.TEXT_ALIGNMENT_CENTER,
    top : 10
}));

popupViewBottom.add(loginButton);
};

var win = Ti.UI.createWindow({
    backgroundColor : '#fff',
    title :'test'
});
create_login_window(win);
win.open();
</pre></code>

<h4>Steps to repro</h4>

1. Run the test case
2. Focus on a textfield
3. Close the keyboard

After this the button title will be aligned to the left.



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-16550_46334/2014-02-24_19-32-14.png">2014-02-24_19-32-14.png</td></td><td>2014-03-04T17:59:02.000+0000</td><td>42574</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-16550_46335/2014-02-24_19-32-20.png">2014-02-24_19-32-20.png</td></td><td>2014-03-04T17:59:02.000+0000</td><td>69284</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Vishal Duggal 2014-05-22

   Seems to be a layout issue where implicit FILL behavior is causing issues on some devices. Might very well be a device specific issue. 
   The workaround posted below worked for me on HTC EVO running 4.0.3 (Using Explicit FILL behavior for WIDTH and HEIGHT on Button)
   
   <code><pre>
   var btnWrapper = Ti.UI.createView({
   	left: $$.horizontalSpacing,
   	right: $$.horizontalSpacing,
   	top: 10,
   	height :$$.actionBtn.height
   });
    
   var loginButton = Ti.UI.createButton(OF.combine($$.actionBtn, {
       backgroundImage :  null,
       title : 'Sign In',
       top:0,
       width : Ti.UI.FILL,
       height: Ti.UI.FILL,
       textAlign : Ti.UI.TEXT_ALIGNMENT_CENTER,
   }));
   
   btnWrapper.add(loginButton);
    
   popupViewBottom.add(btnWrapper);
   </pre></code></li>
<li>Vishal Duggal 2014-05-22

   We do not control the rendering of the button. The fact that the title is not center aligned after a **postlayout** seems to be a native platform issue on certain devices. We actually layout the button correctly based on the positioning parameters.
   
   Resolving this as NOT OUR BUG.
   
   Possible JS workaround in comments </li>
<li>Lee Morris 2017-03-29

   Closing ticket as the issue here is not our bug.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16550.json">JSON Source</a></p>