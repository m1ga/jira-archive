---
title: "[TIMOB-16597] iOS: Can't create modal transparent Window"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-05-21T20:55:25.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.3.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>backgroundColor, window</td></tr>
<tr><th>Reporter</th><td>carlo</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2014-03-07T13:58:29.000+0000</td></tr>
<tr><th>Updated</th><td>2018-06-22T19:36:44.000+0000</td></tr>
</table>

<h3>Description</h3>

Try code above, after animation Window color is reset to Titanium.UI.backgroundColor

<code><pre>
var win = Titanium.UI.createWindow({
    backgroundColor: 'white',
});
win.open();
var fail = Ti.UI.createWindow({
	modal:true,
	backgroundColor:'transparent'//or #00FFFFFF
});
fail.add(Ti.UI.createLabel({
	text:"Test"
}));
fail.open();//after animation background is black (default)
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-16597_49249/Testingmodal.zip">Testingmodal.zip</td></td><td>2014-06-24T20:40:59.000+0000</td><td>34558</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ritu Agrawal 2014-03-10

   Moving this ticket to engineering as I can reproduce the issue with the provided test case.</li>
<li>Giorgos Papadopoulos 2014-03-15

   I think we have to setup the parent view controller modal presentation style to use the same view presentation style.
   
   Add this:
   topVC.modalPresentationStyle = UIModalPresentationCurrentContext;
   
   before presenting the view controller on -(void)showControllerModal:(UIViewController*)theController animated:(BOOL)animated of TiRootViewController.m
   
   Tested it and works with TiSDK 3.2.1, on simulator 7.0.3.</li>
<li>Tobias Høegh 2014-04-29

   It has nothing to do with the animation of the modal window. Same effect with animated set to false:
   
   fail.open({animated:false});
   
   But sure. Looks like the solution is fine.</li>
<li>Thierry Godfroid 2014-05-16

   FWIW, I did change it in 3.1.3GA and we get a transparent bg but it breaks the opening animation (slide up).  Any clue ? thanks
   
   3.1.3GA test on simulator 6.1</li>
<li>Giorgos Papadopoulos 2014-05-17

   Could you provider a test case ? Then I will look it up.</li>
<li>Thierry Godfroid 2014-05-17

   Here you go.  With the code below, and without adding the line you mention (with UIModalPresentationCurrentContext), animation is ok, transparency is maintained during animation and it all goes black (as expected) at end of animation.
   
   Now, modify TiRootViewController with your line and recompile/run the app.  When you click the red background, the modal just pops up without tthe slideup animation (but the end result shows the transparency).
   
   HTH
   Thierry
   
   <code><pre>
   var navwin, modalnavwin, rootwin, rootmodalwin;
   rootmodalwin = Ti.UI.createWindow({
   	backgroundColor: '#7F00CCCC'
   });
   modalnavwin = Ti.UI.iOS.createNavigationWindow({
   	modal: true,
   	window: rootmodalwin
   });
   rootmodalwin.addEventListener('click',function(){ 'use strict';
   	modalnavwin.close();
   });
   rootwin = Ti.UI.createWindow({
   	backgroundColor: 'red'
   });
   rootwin.add( Ti.UI.createImageView({
   	width: 300,
   	height: 200,
   	image: '<a href="http://www.appcelerator.com/wp-content/uploads/film_reel@2x.png" rel="nofollow" target="_blank">http://www.appcelerator.com/wp-content/uploads/film_reel@2x.png</a>'
   }));
   navwin = Ti.UI.iOS.createNavigationWindow({
   	window: rootwin
   });
   rootwin.addEventListener('click', function(){ 'use strict';
   	modalnavwin.open();
   });
   navwin.open()
   </pre></code>
   
   edited: I made a mistake in the previous version, it is of course navwin.open() at the last line not rootwin.open() !</li>
<li>Thierry Godfroid 2014-05-25

   please be aware that with SDK 3.2.2 and SDK 3.2.3 (at least) adding the line to TiRootViewController.m *breaks* the modal slide up animation !! So, the full solution is bound to be more complicated, I am afraid.</li>
<li>Ingo Muschenetz 2014-06-02

   [~srahim] to mark as invalid.</li>
<li>Sabil Rahim 2014-06-24

   This is essentially happening due to the fact that the backgroundColor of the topMostViewcontroller is set to black by default. Which can be changed by using the following code.
   <code><pre>
   Titanium.UI.setBackgroundColor('#fff');
   </pre></code>
   
   Previously we used to present the modal window on top of the viewcontroller stack which was leading to many orientation issues. Since we have moved to the right behavior of presenting the modal viewcontroller on top of the rootViewController. Hence if the backgroundColor of the rootviewController (which is by default black) would show throw the modal view if it's background color is set to 'transparent'
   
   The same behavior is shown on native apps too. Native sample app is attached to the project.  
   
   Marking ticket as invalid. </li>
<li>Thierry Godfroid 2014-06-25

    I find this a bit harsh.  There are apps out there who manage to do that natively (Path, for instance). 
    I have tried with transparency of the root window and failed.  So could you show me how to adapt the sample I gave for reproduction so that it work with the setBackgroundColor() trick you mention ?
    
    Thanks</li>
<li>Sabil Rahim 2014-06-29

    [~tgo] try the following code snippet 
    
    <code><pre>
    // this sets the background color of the root UIView 
    Titanium.UI.setBackgroundColor('white');
    var win = Titanium.UI.createWindow({
        backgroundColor: 'white',
    });
    win.open();
    var fail = Ti.UI.createWindow({
        modal:true,
        backgroundColor:'transparent'//or #00FFFFFF
    });
    fail.add(Ti.UI.createLabel({
        text:"Test"
    }));
    fail.open();//after animation background is black (default)
    </pre></code></li>
<li>Thierry Godfroid 2014-06-30

    I tested with this and added the setBackgroundColor() to my own test app (see post of 17-may).
    I agree that it changes the background color.  
    But it still does not show the underlying root window under the tranparent modal.
    How do you propose to do that with only a color change ?  It seems to me that the root cause is that the rootwindow is removed from the display and that's what solved with the trick shown by Giorgios.</li>
<li>carlo 2014-09-02

    give root window the same background color of modal window is not a solution for me!
    
    I think you have to consider this issue still open</li>
<li>Vishal Duggal 2014-09-07

    When you open a modal view controller with the modalPresentationStyle UIModalPresentationFullScreen (always the case on the iPhone and iPod), essentially the presenting view controller removes its view from the hierarchy. This is default behavior.
    
    So transparent modal windows are little difficult to do.
    
    In Titanium you can always fake the modal screen animations on a regular window by creating appropriate open and close animations for the window. A sample showing the cover vertical behavior is attached below. Going to mark the ticket as Wont Fix.
    
    <code><pre>
    var win = Titanium.UI.createWindow({
        backgroundColor: 'white',
    });
    win.open();
    
    var fail = Ti.UI.createWindow({
        backgroundColor:'transparent',
        top:'100%',
        height:'100%'
    });
    
    var label = Ti.UI.createLabel({
        text:'CLICK TO CLOSE'
    })
    
    fail.add(label);
    
    
    var openAnim = Ti.UI.createAnimation({
        duration:500,
        top:0,
        height:Ti.UI.FILL
    }) 
    
    var closeAnim = Ti.UI.createAnimation({
        duration:500,
        top:'100%',
        height:'100%'
    }) 
    
    
    win.addEventListener('click',function(){
        fail.open(openAnim);
    })
    
    label.addEventListener('click',function(){
        fail.close(closeAnim);
    })
    </pre></code></li>
<li>Vishal Duggal 2014-09-07

    Triage + Workaround</li>
<li>carlo 2014-09-08

    I change my code so I don't need modal parameter anymore, thanks for code snippets.
    
    
    Finally, we can't create *modal* transparent window.
    I think this should be reported in docs.</li>
<li>Ingo Muschenetz 2014-09-08

    [~bhatfield] FYI.</li>
<li>Tobias Høegh 2014-09-08

    As Vishal Duggal mentioned: Transparent modal windows are little difficult to do.
    Same info in the link below, but there is also a workaround/example code. So it's absolute possible.
    
    <a href="http://www.cocoaosx.com/2011/10/20/how-to-display-transparent-modal-viewcontrollers/" rel="nofollow" target="_blank">http://www.cocoaosx.com/2011/10/20/how-to-display-transparent-modal-viewcontrollers/</a>
    </li>
<li>Thierry Godfroid 2014-09-08

    I kind of agree with @Tobias Schibler.  I know we can work around the issue but the goal of the titanium framework (at least to me) is that we can have the same behavior without resorting to per OS work arounds ....  </li>
<li>Vishal Duggal 2014-09-08

    @[~colorhat]
    The code sample shown does not present a ViewController at all. It just adds the childViewControllers view as a subview to the parentViewController view. 
    This is essentially the same as what we do in Titanium when opening a non modal window.</li>
<li>Tobias Høegh 2014-09-09

    [~vduggal] You make a good work! Thanks a lot.
    Would be good to have this facts with transparent modal windows in the docs.</li>
<li>Lee Morris 2017-03-30

    Closing ticket as "Won't Fix". There has been no update for a while. If there is any problem, please open a new ticket.</li>
<li>Sharif AbuDarda 2017-04-04

    The issue is happening for 6.0.3.GA.</li>
<li>Hans Knöchel 2018-04-11

    It seems like this is natively possible since iOS 8. [~Andrea.Vitale] made a pull request which is pending review and is scheduled for 7.2.0. Thanks Andrea!</li>
<li>Andrea Vitale 2018-04-11

    <a href="https://github.com/appcelerator/titanium_mobile/pull/10070" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10070</a> exposes MODAL_PRESENTATION_OVER_CURRENT_FULL_SCREEN and MODAL_PRESENTATION_OVER_CURRENT_CONTEXT presentation styles that can solve this issue!
    
    Here is an example:
    
    
    <code><pre>
    	Ti.UI.createWindow({
    		backgroundColor: "white"
    	}).open();
    	
    	setTimeout(() =&gt; {
    		var window = Ti.UI.createWindow({
    			backgroundColor: "#4D000000"
    		});
    
    		window.add(Ti.UI.createView({
    			width: 200,
    			height: 200,
    			backgroundColor: "white"
    		}));
    
    		window.open({
    			modal: true,
    			modalStyle: Ti.UI.iOS.MODAL_PRESENTATION_OVER_CURRENT_FULL_SCREEN,
    			modalTransitionStyle: Ti.UI.iOS.MODAL_TRANSITION_STYLE_CROSS_DISSOLVE
    		});
    	}, 5000);
    </pre></code>
    
    and here a screenshot: <a href="http://i65.tinypic.com/2hs5ahz.jpg" rel="nofollow" target="_blank">http://i65.tinypic.com/2hs5ahz.jpg</a></li>
<li>Samir Mohammed 2018-06-22

    *Closing ticket.* fix can be seen in SDK Version: <code>7.3.0.v20180618182516</code>
    
    *FR (Passed) Test Steps:*
    <h4>Created an application with the code above</h4>
    <h4>Ran the program</h4>
    <h4>waited for animation to take place/app to time out</h4>
    <h4>Noticed the background was transparent unlike before (Would stay black previously) </h4>
    
    *Test Environment*
    <code><pre>
    APPC Studio: 5.0.0.201712081732
    APPC CLI: 7.0.4
    iphone 6 11.2 emulator
    Operating System Name: Mac OS High Sierra
    Operating System Version: 10.13
    Node.js Version: 8.9.1
    Xcode 9.2
    </pre></code>
    </li>
</ol>


<p><a href="/TIMOB/TIMOB-16597.json">JSON Source</a></p>