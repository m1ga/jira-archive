---
title: "[TIMOB-16619] Android: LiveView throws errors if action bar is implemented in the app"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-09-10T03:09:36.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.3.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Components</th><td>Android, LiveView</td></tr>
<tr><th>Labels</th><td>merge-4.1.1, qe-nfc</td></tr>
<tr><th>Reporter</th><td>Lokesh Choudhary</td></tr>
<tr><th>Assignee</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Created</th><td>2014-03-12T23:10:30.000+0000</td></tr>
<tr><th>Updated</th><td>2015-10-21T22:40:08.000+0000</td></tr>
</table>

<h3>Description</h3>

NOTE : This is seen on post & pre 3.0 android devices & emulators.

<h4>Description:</h4>
1. Create a default & replace the app.js with the sample code for action bar from the docs:
<code><pre>
var win = Ti.UI.createWindow({
    title: "Old Title",
    navBarHidden: false
});
var actionBar;

win.addEventListener("open", function() {
    if (Ti.Platform.osname === "android") {
        if (! win.activity) {
            Ti.API.error("Can't access action bar on a lightweight window.");
        } else {
            actionBar = win.activity.actionBar;
            if (actionBar) {
                actionBar.backgroundImage = "/bg.png";
                actionBar.title = "New Title";
                actionBar.onHomeIconItemSelected = function() {
                    Ti.API.info("Home icon clicked!");
                };
            }
        }
    }
});

win.open();
</pre></code>
2. Build for android device/emulator with live view enabled.

<h4>Actual Result:</h4>
1. We see following error in console:
<code><pre>
[INFO] :   [LiveView] Error Evaluating app.js @ Line: undefined
[ERROR] :  ReferenceError: actionBar is not defined
[ERROR] :  File: app.js
[ERROR] :  Line: undefined
[ERROR] :  SourceId: undefined
[ERROR] :  Backtrace:
[ERROR] :  undefined
</pre></code>

<h4>Expected Result:</h4>
1. We should not see any errors & liveview should work successfully.



<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2014-05-20

   We'd like to try fixing this for 3.3.0. Possible?</li>
<li>Praveen Innamuri 2014-05-27

   Considering the limited use case (this issue will surface only when a variable is not initialized to any value, even null/undefined and defined only in the higher scope), we can defer it to the future versions - may be, for 3.4.0 release.</li>
<li>Feon Sua Xin Miao 2015-09-09

   PR: <a href="https://github.com/appcelerator/liveview/pull/90" rel="nofollow" target="_blank">https://github.com/appcelerator/liveview/pull/90</a></li>
<li>Kondal Kolipaka 2015-09-10

   Merged into master.</li>
<li>Lokesh Choudhary 2015-10-21

   Verified the fix.
   
   No errors are seen using liveview if action bar is implements in the app.
   Closing.
   
   Environment:
   Appc Studio : 4.3.3.201510201834
   Ti SDK :   5.1.0.v20151020095222
   Ti CLI : 5.0.5
   Alloy : 1.7.16
   MAC Yosemite : 10.10.5
   Appc NPM : 4.2.1-5
   Appc CLI : 5.1.0-38
   Node: v0.10.37
   Nexus 5 - Android 6.0
   Android Emulator: android 4.4.4, android 4.1.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-16619.json">JSON Source</a></p>