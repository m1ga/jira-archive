---
title: "[TIMOB-16680] iOS: listView when views overlap itemclick event return wrong bindId"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-06-17T05:51:19.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.0, Release 3.2.1, Release 3.2.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.1.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>supportTeam</td></tr>
<tr><th>Reporter</th><td>Marco Cota</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2014-03-24T15:46:08.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-24T19:11:26.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue</h4>

When creating a listView template that overlaps UI elements and we use the 'itemClick' to get the bindId we always receive the id from the element on the back instead of the clicked item.

<h4>Testing</h4>

After adding zIndex and setting bubble parent to false makes no difference and keeps throwing the wrong bindId.

<h4>Steps to repro</h4>

1. Run the sample code
2. Click on the label 

Expected Result:
The alert will show the bindId 'innerLabel'

Actual Result:
The alert show the bindId 'innerThumbnailImageView'

<h4>Sample code</h4>

index.xml
<code><pre>
&lt;Alloy&gt;
&lt;Window id="index" class="container"&gt;
	&lt;ListView id="listView" left="0" right="0" top="0" bottom="0" width="Ti.UI.FILL" defaultItemTemplate="listingTemplate" onItemclick="listItemClick"&gt;
      &lt;Templates&gt;
        &lt;ItemTemplate name="listingTemplate" height="200" backgroundColor="white"&gt;
          &lt;View bindId="container" top="0" bubbleParent="false" width="Ti.UI.FILL" height="200"&gt;
            &lt;ImageView bindId="innerThumbnailImageView" bubbleParent="false" zIndex="1" left="0" top="0" width="Ti.UI.FILL" height="200"/&gt;
            &lt;Label bindId="innerLabel" left="0" top="20" bubbleParent="false" zIndex="5" width="Ti.UI.FILL" height="50" color="red" backgroundColor="green"/&gt;
          &lt;/View&gt;
        &lt;/ItemTemplate&gt;
      &lt;/Templates&gt;
      &lt;ListSection id="listingSection"/&gt;
    &lt;/ListView&gt;
&lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>

index.js
<code><pre>
(function() {
    var items = [];
    
    for(var i=0;i&lt;10;++i){
    	var item = {};
    	item.innerThumbnailImageView = {
	        image: '/images/pic.png'
	    };
	    item.innerLabel = {
	        text: 'Inner Label Tester'
	    };
	    items.push(item);
    }
    
    $.listingSection.items = items;
}());

$.index.open();

function listItemClick(e) {
    alert(e.bindId);
}
</pre></code>

<h4>Workaround</h4>

If we add the event directly to the element of the template we receive the correct id.

<code><pre>
&lt;Alloy&gt;
&lt;Window id="index" class="container"&gt;
	&lt;ListView id="listView" left="0" right="0" top="0" bottom="0" width="Ti.UI.FILL" defaultItemTemplate="listingTemplate"&gt;
      &lt;Templates&gt;
        &lt;ItemTemplate name="listingTemplate" height="200" backgroundColor="white"&gt;
          &lt;View bindId="container" top="0" bubbleParent="false" width="Ti.UI.FILL" height="200"&gt;
            &lt;ImageView bindId="innerThumbnailImageView" bubbleParent="false" zIndex="1" left="0" top="0" width="Ti.UI.FILL" height="200" onClick="listItemClick"/&gt;
            &lt;Label bindId="innerLabel" left="0" top="20" bubbleParent="false" zIndex="5" width="Ti.UI.FILL" height="50" color="red" backgroundColor="green" onClick="listItemClick"/&gt;
          &lt;/View&gt;
        &lt;/ItemTemplate&gt;
      &lt;/Templates&gt;
      &lt;ListSection id="listingSection"/&gt;
    &lt;/ListView&gt;
&lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>

<h3>Comments</h3>

<ol>
<li>Jong Eun Lee 2014-10-10

   I made a Pull Request : <a href="https://github.com/appcelerator/titanium_mobile/pull/6211" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6211</a>
   
   FindViewProxyWithBindIdContainingPoint function have to find bindId from front to back(reverse index).</li>
<li>Pierre VAN DE VELDE 2014-10-27

   [~yomybaby]: you made my day! I've tried your PR and it's working really nice :)</li>
<li>Mauro Piccotti 2014-12-02

   I have the same problem, when the patch will be applied to the sdk?</li>
<li>Chee Kiat Ng 2015-06-17

   PR here. <a href="https://github.com/appcelerator/titanium_mobile/pull/6918" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6918</a> and merged.</li>
<li>Lee Morris 2017-03-24

   Closing ticket as fixed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16680.json">JSON Source</a></p>