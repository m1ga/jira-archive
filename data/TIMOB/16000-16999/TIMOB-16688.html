---
title: "[TIMOB-16688] Android: Titanium Application events firing after WebView is destroyed"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-08-19T23:38:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.4.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>APP-767561, module_android, parity, qe-manualtest, supportTeam</td></tr>
<tr><th>Reporter</th><td>Eduardo Gomez</td></tr>
<tr><th>Assignee</th><td>Sunila</td></tr>
<tr><th>Created</th><td>2014-03-25T00:28:18.000+0000</td></tr>
<tr><th>Updated</th><td>2014-08-19T23:38:11.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue description</h4>
App is using application level events to communicate with WebViews - by using calls to Ti.App.fireEvent() and Ti.App.addEventListener().

<a href="http://docs.appcelerator.com/titanium/3.0/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/3.0/#</a>!/guide/Communication_Between_WebViews_and_Titanium-section-29004919_CommunicationBetweenWebViewsandTitanium-Ti.AppEvents

<h4>Steps to reproduce</h4>
<h4>Grab app.js and logging.html</h4>
<h4>Click webView "fromWebView" button. Alert shows message.</h4>
<h4>Click app "fromTitanium" button. Message displayed as expected.</h4>
<h4>Click "cleanUp" button. Alert fires message. </h4>
<h4>If you click twice the console message shows TiViewProxy released although function keeps listening event.</h4>

_Android monitor_
<code><pre>
03-24 18:22:48.531: E/TiViewProxy(12371): (KrollRuntimeThread) [102323,132456] Add called with null child
</pre></code>  

If you attempt to run it on iOS, event listener isn't available after a second time _Studio output_
<code><pre>
[INFO] :   Application started
[INFO] :   TiAppEvents/1.0 (3.2.2.GA.96e9a07)
[DEBUG] :  Loading: /Users/egomez/Library/Application Support/iPhone Simulator/7.1/Applications/CD516444-41E2-4BEE-BACD-ADEE0049F7ED/TiAppEvents.app/_app_props_.json, Resource: _app_props__json
[DEBUG] :  Application booted in 122.496009 ms
[DEBUG] :  New scheme: <NSMutableURLRequest: 0x10883db0> { URL: file:///Users/egomez/Library/Application%20Support/iPhone%20Simulator/7.1/Applications/CD516444-41E2-4BEE-BACD-ADEE0049F7ED/TiAppEvents.app/logging.html }
[DEBUG] :  Loading: /Users/egomez/Library/Application Support/iPhone Simulator/7.1/Applications/CD516444-41E2-4BEE-BACD-ADEE0049F7ED/TiAppEvents.app/logging.html, Resource: logging_html
[DEBUG] :  Firing app event: app:fromTitanium
[ERROR] :  Script Error {
[ERROR] :      backtrace = "#0 () at :0";
[ERROR] :      line = 93;
[ERROR] :      message = "Invalid type passed to function";
[ERROR] :      nativeLocation = "-[TiViewProxy remove:] (TiViewProxy.m:225)";
[ERROR] :      nativeReason = "expected: TiViewProxy, was: NSNull";
[ERROR] :      sourceId = 267172160;
[ERROR] :      sourceURL = "file:///Users/egomez/Library/Application%20Support/iPhone%20Simulator/7.1/Applications/CD516444-41E2-4BEE-BACD-ADEE0049F7ED/TiAppEvents.app/app.js";
[ERROR] :  }
</pre></code>


*Cleanup* is called when developer want to dispose of the webview that was added to the view. That last Ti.App.removeEventListener("app:fromTitanium", fromTitanium); fails to work though since the fromTitanium function actually sits in the webView. All we want to do is ensure that the fromTitanium event listener added to the webview is removed once the webview is destroyed.



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-16688_46829/app.js">app.js</td></td><td>2014-03-25T00:28:18.000+0000</td><td>1238</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-16688_46830/logging.html">logging.html</td></td><td>2014-03-25T00:28:18.000+0000</td><td>349</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sunila 2014-05-30

   </li>
<li>Lokesh Choudhary 2014-08-19

   Verified the fix.
   Titanium Application events do not fire after WebView is destroyed.
   
   Closing.
   
   Environment:
   Appc Studio : 3.4.0.201408180158
   Ti SDK :  3.4.0.v20140815142514
   Mac OSX : 10.8.5
   Alloy : 1.5.0-dev
   CLI - 3.4.0-dev
   Code Processor: 1.1.1
   Nexus 5 - android 4.4.4</li>
</ol>


<p><a href="/TIMOB/TIMOB-16688.json">JSON Source</a></p>