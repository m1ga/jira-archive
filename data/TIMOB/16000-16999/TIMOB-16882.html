---
title: "[TIMOB-16882] iOS: Converting a blob into a valid image does not maintain dimensions"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-08-27T22:13:56.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.4.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>module_imageview, parity, qe-manualtest, qe-testadded, supportTeam</td></tr>
<tr><th>Reporter</th><td>Eduardo Gomez</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2014-04-25T21:35:47.000+0000</td></tr>
<tr><th>Updated</th><td>2014-09-19T22:20:06.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue description</h4>
Looking for a cross-platform way to create image thumbnail files asynchronously. Titanium is able to read an image file asynchronously into a buffer and then a blob. If we assign that blob to the image property of an ImageView, it displays as I expect. However, the blob is not recognised as an image by any of the Ti.Blob.image* methods. The blob has a mime type of "application/octet-stream" and a height and width of 0. Meanwhile Android is able to get height and width properly.

<h4>Steps to reproduce</h4>
<h4>Launch sample app. You can see that the fishImage ImageView loads its image directly from a file path in its "image" property.</h4>
<h4>earthImage is loaded in index.js asynchronously using a file stream. Once the file contents are read completely, they are assigned to the image property of $.earthImage. </h4>
<h4>Notice, the blob you get as a result of "earthBuffer.toBlob()" can't be used for any other image manipulation (e.g. creating thumbnails). It doesn't have a valid mimeType, height, or width on iOS. </h4>

E.G.
<code><pre>
$.earthImage.image = earthBuffer.toBlob();
Ti.API.info( $.earthImage.image.height + ' . '+ $.earthImage.image.width + ' . '+ $.earthImage.image.mimeType);
</pre></code>

<h4>Android</h4>
<code><pre>
04-24 15:11:03.812: I/TiAPI(28395):  1600 . 2560 . application/octet-stream
</pre></code>

<h4>iOS</h4>
<code><pre>
[INFO] :   0 . 0 . application/octet-stream
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-16882_47717/ImageBufferTest_Appcelerator.zip">ImageBufferTest_Appcelerator.zip</td></td><td>2014-04-25T21:35:48.000+0000</td><td>8617039</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-16882_47737/TIMOB-16882.zip">TIMOB-16882.zip</td></td><td>2014-04-28T21:22:14.000+0000</td><td>5952811</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2014-05-20

   Marked for future release, so removing due date. Please re-add if this is incorrect.</li>
<li>Vishal Duggal 2014-07-10

   Pull pending against master
   <a href="https://github.com/appcelerator/titanium_mobile/pull/5901" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5901</a></li>
<li>Priya Agarwal 2014-08-19

   Reopening the issue as issue seems to appear incorrect on Android.
   Verified with environment:
   
   Appcelerator Studio:3.4.0.201408180158
   Sdk:3.4.0.v20140815142514
   alloy:1.5.0-dev
   titanium:3.4.0-dev
   titanium-code-processor:1.1.1
   acs:1.0.16
   npm:1.3.2
   OS:Maverick(10.9.4)
   xcode: Xcode6Beta5
   Device:iPhone5s(v8.0),Nexus7(v4.4.2)
   
   Getting Result as :
   On iOS:
   <code><pre>
   [ERROR] Done
   [INFO] 1600 . 2560 . application/octet-stream
   [INFO] 1600 . 2560 . application/octet-stream
   </pre></code>
   
   On Android:
   <code><pre>
   [ERROR] :  Done
   [INFO] :   0 . 0 . application/octet-stream
   [INFO] :   0 . 0 . application/octet-stream
   </pre></code>
   
   Now iOS shows the dimension but android does not shows the same.</li>
<li>Sabil Rahim 2014-08-27

   This issue was for IOS and it still remain resolved. Will clone a bug for the android issue.
   </li>
<li>Priya Agarwal 2014-08-28

   Verified with environment:
   
   Appcelerator Studio:3.4.0.201408270900
   Sdk:3.4.0.v20140827165712
   alloy:1.5.0-dev
   titanium:3.4.0-dev
   titanium-code-processor:1.1.1
   acs:1.0.16
   npm:1.3.2
   OS:Maverick(10.9.4)
   xcode: Xcode6Beta6
   Device:iPhone5s(v8.0)
   
   For iOS Working as expected.
   Not working for android. Already bug logged TIMOB-17567
   Hence closing the issue.
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-16882.json">JSON Source</a></p>