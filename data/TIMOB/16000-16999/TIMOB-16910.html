---
title: "[TIMOB-16910] Android: ActionBar.setNavigationMode(STANDARD) hides window content on API 10 devices"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2014-11-10T23:43:09.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.2</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>actionbar, android</td></tr>
<tr><th>Reporter</th><td>Mark Mokryn</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2014-04-27T19:57:13.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-21T18:18:28.000+0000</td></tr>
</table>

<h3>Description</h3>

The following code works as expected on ICS+ devices, but destroys window content on Gingerbread. 
index.js:
<code><pre>
$.index.addEventListener('open', function() {
	var actionBar = $.index.activity.actionBar;
	setTimeout(function() {
		actionBar.setNavigationMode(Ti.Android.NAVIGATION_MODE_STANDARD);
	}, 5000);
});

$.index.open();
</pre></code>

index.xml:
<code><pre>
<Alloy>
	<TabGroup>
		<Tab title="Tab 1" icon="KS_nav_ui.png">
			<Window id="win1" title="Tab 1">
				<Label>I am Window 1</Label>
			</Window>
		</Tab>
		<Tab title="Tab 2" icon="KS_nav_views.png">
			<Window title="Tab 2">
				<Label>I am Window 2</Label>
			</Window>
		</Tab>
	</TabGroup>
</Alloy>
</pre></code>

<h3>Comments</h3>

<ol>
<li>Mark Mokryn 2014-04-28

   Found the problem! In TiUIActionBarTabGroup.java, onTabUnselected gets called by the Android system when ActionBar.setNavigationMore(NAVIGATION_MODE_STANDARD) is called. This function calls FragmentTransaction.hide() on the tab's fragment. This apparently has no effect on ICS+, but on Gingerbread (where the support library goes into effect, since Fragments are API 11+), FragmentTransaction.hide indeed hides the view - thus the tab content is hidden when the navigation mode is changed.
   
   Proposed solution: ActionBar.setNavigationMode(NAVIGATION_MODE_STANDARD) cannot be used alone in order to hide the tabs on Android. We need to expose a new property on the TabGroup, e.g. tabsEnabled which can be used to toggle the tabs (i.e. the setter will toggle the navigation mode). Then  onTabUnselected will call FragmentTransaction.hide only if tabsEnabled == true. 
   
   I will submit a PR for this soon.</li>
<li>Ritu Agrawal 2014-04-30

   Great. Let us know when you have the PR ready and we would look at it at a priority.</li>
<li>Mark Mokryn 2014-04-30

   The swipe tabs PR <a href="https://github.com/appcelerator/titanium_mobile/pull/5651" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5651</a> takes care of this too, so close this if that one is accepted.</li>
<li>Ritu Agrawal 2014-05-04

   Moving this ticket and associated PR to engineering for further evaluation.</li>
<li>Mark Mokryn 2014-06-03

   Again - this ticket is fixed by my scrollable tabs PR, please don't do any engineering work on this issue.</li>
<li>Ingo Muschenetz 2014-08-14

   3.4.0 is moved forward, and 3.5.0 is taking its place in the calendar.</li>
<li>Mark Mokryn 2014-08-14

   If you accept the PR for TIMOB-13392 for 3.4.0, as currently scheduled, then this one is already fixed by that PR.</li>
<li>Mark Mokryn 2014-10-28

   [~ingo] this will be taken care of by merging this <a href="https://github.com/appcelerator/titanium_mobile/pull/6008" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6008</a> - already reviewed by [~hpham] and [~pwang]</li>
<li>Mark Mokryn 2014-11-10

   You should just close this ticket since ActionBar.setNavigationMode is deprecated in API 21, and once we fully move over to that AppCompat lib (and require targetSdkVersion=21+) this API should no longer be exposed.</li>
<li>Ingo Muschenetz 2014-11-10

    Resolving as won't fix since this method is now deprecated on the new ActionBar version.</li>
<li>Lee Morris 2017-03-21

    Closing ticket as the issue will not fix.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16910.json">JSON Source</a></p>