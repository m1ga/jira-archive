---
title: "[TIMOB-16957] iOS : Opening popover on iPad breaks focus/blur events of the current window"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-07-02T16:49:01.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.3</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.3.0, Release 3.4.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>module_popover, qe-manualtest, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Andrey Pervushin</td></tr>
<tr><th>Assignee</th><td>Pedro Enrique</td></tr>
<tr><th>Created</th><td>2014-05-12T15:52:17.000+0000</td></tr>
<tr><th>Updated</th><td>2014-08-15T22:57:40.000+0000</td></tr>
</table>

<h3>Description</h3>

example:
<code><pre>

var win = Ti.UI.createWindow();
win.addEventListener('focus', function(){
    Ti.API.log('focus');
});
win.addEventListener('blur', function(){
    Ti.API.log('blur');
});

var button = Ti.UI.createButton({title: 'Open Popover!'});
button.addEventListener('click', function(e){
    popover.show({ view: button });
});
win.add(button);

var view = Ti.UI.createView({backgroundColor: 'green'});
view.add(Ti.UI.createLabel({text: "It's not easy being green."}));

var rightButton = Ti.UI.createButton({title: 'Robin'});
rightButton.addEventListener('click', function(e){
    alert("But green's the color of spring.");
});

var popover = Ti.UI.iPad.createPopover({
    width: 250,
    height: 100,
    contentView : Ti.UI.createWindow({}),
});
popover.add(view);

win.open();
</pre></code>


<h3>Comments</h3>

<ol>
<li>Ritu Agrawal 2014-05-14

   Just to make sure that I understand this issue correctly, you are expecting only focus event once and no blur event on win object when popover is opened and closed. Let me know what is the output you are expecting in this case.</li>
<li>Andrey Pervushin 2014-05-14

   sure, i expect blur event from main window on open popover (wich ok at first) and focus event on  popover hide (wich is not working)
   but the main problem that after opening popover focus/blur event of the window doesn't work at all no mater what you do (switching tabs etc)</li>
<li>Ritu Agrawal 2014-05-14

   [~rian] Thanks for the clarification.</li>
<li>Ritu Agrawal 2014-05-14

   Moving this ticket to engineering as I can reproduce the issue with the provided test case.</li>
<li>Andrey Pervushin 2014-06-27

   Is there any news on fixing it?</li>
<li>Ingo Muschenetz 2014-06-28

   Resolving as suggested.</li>
<li>Andrey Pervushin 2014-06-28

   What do you mean "Won't Fix"? Why?</li>
<li>Ingo Muschenetz 2014-06-29

   I honestly don't know why I resolved this as "Won't Fix." I may have resolved the wrong ticket. Reopening.</li>
<li>Pedro Enrique 2014-07-01

   <h4>Note</h4>
   Popovers are not meant to be reused. Use this code, is a refactored code from the code in the description.
   <h4>Test code</h4>
   <code><pre>
   function popOver() {
       var contentView = Ti.UI.createWindow();
       var view = Ti.UI.createView({
           backgroundColor: 'green'
       });
       var label = Ti.UI.createLabel({text: "It's not easy being green."})
       view.add(label);
       contentView.add(view);
       var rightButton = Ti.UI.createButton({
           title: 'Robin'
       });
       rightButton.addEventListener('click', function(e){
           alert("But green's the color of spring.");
       });
       var popover = Ti.UI.iPad.createPopover({
           width: 250,
           height: 100,
           contentView : contentView
       });
       contentView.addEventListener('focus', function(){
           Ti.API.info('popover.window.focus');
       });
       contentView.addEventListener('blur', function(){
           Ti.API.info('popover.window.blur');
       });
       return popover;
   }
   var win = Ti.UI.createWindow({
       backgroundColor: 'white'
   });
   win.addEventListener('focus', function(){
       Ti.API.log('base.window.focus');
   });
   win.addEventListener('blur', function(){
       Ti.API.log('base.window.blur');
   });
    
   var button = Ti.UI.createButton({
       title: 'Open Popover!'
   });
   button.addEventListener('click', function(e){
       popOver().show({ view: button });
   });
   win.add(button); 
   win.open();
   </pre></code>
   <h4>PR:</h4>
   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/5877" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5877</a>
   3.3.x: <a href="https://github.com/appcelerator/titanium_mobile/pull/5878" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5878</a></li>
<li>Samuel Dowse 2014-07-02

    Verified fixed on:
    Mac OSX 10.9.4
    Appcelerator Studio, build: 3.3.0.201406271159
    Titanium SDK, build: 3.3.0.v20140702094913
    Titanium CLI, build: 3.3.0-rc4
    Alloy: 1.4.0-rc3
    Xcode: 5.1.1
    iOS Device: iPad Air (7.1.2)
    iOS Simulator: iPad (7.1)
    
    Used test code provided by [~penrique].
    Focus and blur events of the popover window and base window successfully called multiple times.
    <code><pre>
    [INFO] :   base.window.focus
    [INFO] :   base.window.blur
    [INFO] :   popover.window.focus
    [INFO] :   popover.window.blur
    [INFO] :   base.window.focus
    </pre></code>
    Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-16957.json">JSON Source</a></p>