---
title: "[TIMOB-17021] Analytics: Feature event crashes app if you send a String and a String on iOS"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-05-22T20:36:52.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.3.0</td></tr>
<tr><th>Fix Version/s</th><td>2014 Sprint 10, 2014 Sprint 10 SDK, Release 3.3.0, Release 3.4.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>module_analytics, qe-3.3.0, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Samuel Dowse</td></tr>
<tr><th>Assignee</th><td>Sabil Rahim</td></tr>
<tr><th>Created</th><td>2014-05-22T18:16:59.000+0000</td></tr>
<tr><th>Updated</th><td>2014-05-30T17:00:52.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>
Sending a feature event with two strings crashes the iOS application.
This used to work using 3.2.3.GA

<h4>Steps To Reproduce</h4>
1. Use the following code snippet
<code><pre>var window = Ti.UI.createWindow({
    backgroundColor: 'white',
    layout: 'vertical'
});
var button = Titanium.UI.createButton({
   title: 'Send Feature Event',
   top: 10,
   width: Ti.UI.SIZE,
   height: 50
});
button.addEventListener('click',function(e)
{
   Ti.API.info("Sending Feature Event");
   Ti.Analytics.featureEvent('featureEvent', 'featureEvent.testButton');
   
});
 
window.add(button);
window.open();
</pre></code>
2. Click on the button.

<h4>Expected Result</h4>
App should send the feature event

<h4>Actual Result</h4>
App crashes

<h3>Comments</h3>

<ol>
<li>Sabil Rahim 2014-05-22

   Extended Code Sample 
   <code><pre>
   var window = Ti.UI.createWindow({
       backgroundColor: 'white',
       layout: 'vertical'
   });
   var jsonString = {"key1":"value1","Key2":"value2"};
   
   var b1 = Titanium.UI.createButton({
      title: 'Send Feature Event string:',
      top: 10,
      width: Ti.UI.SIZE,
      height: 50
   });
   b1.addEventListener('click',function(e)
   {
      Ti.API.info("Sending Feature Event");
      Ti.Analytics.featureEvent('featureEvent', 'featureEvent.testButton');
       
   });
     
   var window = Ti.UI.createWindow({
       backgroundColor: 'white',
       layout: 'vertical'
   });
   var b2 = Titanium.UI.createButton({
      title: 'Send Feature Event Jsonstring:',
      top: 10,
      width: Ti.UI.SIZE,
      height: 50
   });
   b2.addEventListener('click',function(e)
   {
      Ti.API.info("Sending Feature Event Jsonstring:");
      Ti.Analytics.featureEvent('featureEvent', JSON.stringify(jsonString));
       
   });
   var window = Ti.UI.createWindow({
       backgroundColor: 'white',
       layout: 'vertical'
   });
   var b5 = Titanium.UI.createButton({
      title: 'Send Feature Event JSON:',
      top: 10,
      width: Ti.UI.SIZE,
      height: 50
   });
   b5.addEventListener('click',function(e)
   {
      Ti.API.info("Sending Feature Event");
      Ti.Analytics.featureEvent('featureEvent', jsonString);
       
   });
   var b3 = Titanium.UI.createButton({
      title: 'Send Feature Event OBJECT:',
      top: 10,
      width: Ti.UI.SIZE,
      height: 50
   });
   b3.addEventListener('click',function(e)
   {
      Ti.API.info("Sending Feature Event");
      Ti.Analytics.featureEvent('featureEvent', b1);
       
   });
   
   var b4 = Titanium.UI.createButton({
      title: 'Check Last Event',
      top: 10,
      width: Ti.UI.SIZE,
      height: 50
   });
   b4.addEventListener('click',function(e)
   {
      Ti.API.info("Last Event ? " + Ti.Analytics.lastEvent);
      alert(Ti.Analytics.lastEvent);
       
   });
   window.add(b1);
   window.add(b2);
   window.add(b3);
   window.add(b5);
   window.add(b4);
   window.open();
   </pre></code></li>
<li>Sabil Rahim 2014-05-22

   <a href="https://github.com/appcelerator/titanium_mobile/pull/5728" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5728</a></li>
<li>Sabil Rahim 2014-05-22

   3_3_X : <a href="https://github.com/appcelerator/titanium_mobile/pull/5729" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5729</a>
   </li>
<li>Samuel Dowse 2014-05-30

   Verified fixed on:
   Mac OSX 10.9.3
   Appcelerator Studio, build: 3.3.0.201405271647
   Titanium SDK, build: 3.3.0.v20140528144113
   Titanium CLI, build: 3.3.0-beta
   Alloy: 1.4.0-beta
   iOS Device: iPhone 5S (7.1.1)
   
   App no longer crashes and analytical data is sent.
   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17021.json">JSON Source</a></p>