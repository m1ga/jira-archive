---
title: "[TIMOB-17057] iOS: HTTPClient - responseText is not cleared between two requests"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-06-05T20:07:22.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.3.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.3.0, Release 3.4.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>module_network, qe-testadded, regression</td></tr>
<tr><th>Reporter</th><td>Jérôme Danthinne</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2014-06-01T12:59:29.000+0000</td></tr>
<tr><th>Updated</th><td>2014-08-04T09:43:47.000+0000</td></tr>
</table>

<h3>Description</h3>

I use the HTTPClient to retrieve new tweets.

Since 3.3.0, it seems that the responseText prepends the previous value to the new one, so my JSON parser crashes the app.

At the first launch, here's what I get:
bq. {"tweets":[{"tweet":{"text":"Our friends @felttip_band have a new single and it's a great one again ! Hooked by the whistling <a href="https://t.co/6Wt1vkVhEs" rel="nofollow" target="_blank">https://t.co/6Wt1vkVhEs</a>","created_time":"20140507112956","guid":"463973998452170752"}}]}

But if I try to refresh, here's what I get:
bq. {"tweets":[{"tweet":{"text":"Our friends @felttip_band have a new single and it's a great one again ! Hooked by the whistling <a href="https://t.co/6Wt1vkVhEs" rel="nofollow" target="_blank">https://t.co/6Wt1vkVhEs</a>","created_time":"20140507112956","guid":"463973998452170752"}}]}{"tweets":[]}

As you can see, the correct response (empty array) is at the end, but the previous value is still there...

This does not happen with SDK 3.2.3.

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2014-06-02

   Do you have a simple sample that demonstrates the problem we can reuse to make sure we see the same behavior?</li>
<li>Jérôme Danthinne 2014-06-02

   A simple sample, not really, but I can send my app code if needed…</li>
<li>Vishal Duggal 2014-06-05

   Pull pending
   master - <a href="https://github.com/appcelerator/titanium_mobile/pull/5775" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5775</a>
   3_3_X - <a href="https://github.com/appcelerator/titanium_mobile/pull/5776" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5776</a></li>
<li>Satyam Sekhri 2014-06-10

   The response text gets cleared between calls and does not append to the previous response.
   Verified on:
   || Component || Version ||
   | Appcelerator Studio | 3.3.0.201406061445 |
   | Titanium SDK | 3.3.0.RC |
   | Node |  0.10.28 |
   | acs | 1.0.14 |
   | alloy | 1.4.0-beta2 |
   | npm | 1.4.9 | 
   | CLI | 3.3.0-beta3 |
   | Titanium-code-processor | 1.1.1 |
   | OS | OSX 10.9.2 |
   | Device | iPhone 5S (iOS 7.1) |</li>
</ol>


<p><a href="/TIMOB/TIMOB-17057.json">JSON Source</a></p>