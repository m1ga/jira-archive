---
title: "[TIMOB-17158] iOS: The SDK Xcode project should reference the APSHTTPClient Xcode project"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Needs more info</td></tr>
<tr><th>Resolution Date</th><td>2017-06-30T00:07:02.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.2.3</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Matt Langston</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2014-06-14T01:15:17.000+0000</td></tr>
<tr><th>Updated</th><td>2017-06-30T00:07:02.000+0000</td></tr>
</table>

<h3>Description</h3>

The APSHTTPClient library is used by both the iOS Titanium SDK and the iOS Native SDK, and has been refactored to fix a known concurrency bug known to exist in all clients of this library, which includes the iOS Titanium SDK.

This bug was discovered in NATIVESDK-156, and the root cause of the problem (incorrect use of NSOperationQueue and incorrect implementation of NSOperation fixed by NATIVESDK-179) means that the bug also exists in the Titanium SDK.

The problem was fixed in APSHTTPClient by the 13 closed tickets in this PR: <a href="https://github.com/appcelerator/APSHTTPClient/pull/8" rel="nofollow" target="_blank">https://github.com/appcelerator/APSHTTPClient/pull/8</a>

In order to quickly test this fix in the Titanium SDK, and to accommodate future bug fixes in APSHTTPClient (there are currently 15 open tickets), the Titanium SDK Xcode project needs to reference the APSHTTPClient Xcode project directly instead of linking to the following seven unrevisioned files embedded in the titanium_mobile repo:

$ find . -type f -name "*APSHTTP*"
./iphone/Classes/APSHTTPClient/APSHTTPClient.h
./iphone/Classes/APSHTTPClient/APSHTTPHelper.h
./iphone/Classes/APSHTTPClient/APSHTTPOperation.h
./iphone/Classes/APSHTTPClient/APSHTTPPostForm.h
./iphone/Classes/APSHTTPClient/APSHTTPRequest.h
./iphone/Classes/APSHTTPClient/APSHTTPResponse.h
./iphone/Classes/APSHTTPClient/libAPSHTTPClient.a

This closed PR added important unit tests that provides partial code coverage for the issue:
<a href="https://github.com/appcelerator/APSHTTPClient/pull/9" rel="nofollow" target="_blank">https://github.com/appcelerator/APSHTTPClient/pull/9</a>

This PR needs to be closed before work on the current issue can begin:
<a href="https://github.com/appcelerator/APSHTTPClient/pull/10" rel="nofollow" target="_blank">https://github.com/appcelerator/APSHTTPClient/pull/10</a>

The fix for the current issue is to remove the seven files listed above, and in their place add the APSHTTPClient Xcode project as a subproject to an Xcode workspace for the Titanium SDK Xcode project. Once this is done the APSHTTPClient git repo needs to be tagged with the version that the iOS Titanium SDK was tested with.

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-17158.json">JSON Source</a></p>