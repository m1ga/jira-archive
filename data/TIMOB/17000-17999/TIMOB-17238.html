---
title: "[TIMOB-17238] iOS8: Add support for Interactive Notifications"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-08-28T22:52:31.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.4.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios8</td></tr>
<tr><th>Reporter</th><td>Ingo Muschenetz</td></tr>
<tr><th>Assignee</th><td>Chee Kiat Ng</td></tr>
<tr><th>Created</th><td>2014-06-29T07:57:47.000+0000</td></tr>
<tr><th>Updated</th><td>2014-09-18T18:11:29.000+0000</td></tr>
</table>

<h3>Description</h3>

iOS 8 brings a new feature that allows users to perform actions against notifications. A short writeup is here:

<a href="http://techcrunch.com/2014/06/02/actionable-push-notifications/" rel="nofollow" target="_blank">http://techcrunch.com/2014/06/02/actionable-push-notifications/</a>

Apple has added notification action support so that user can immediately handle notifications in the home screen or lock screen, without the user having to enter the app. To enable this for both local and remote notifications, the following steps have to followed:
1. Create and Configure Notification Actions
2. Create and assign Notification Actions to Notification Categories
3. Register the Notification Categories and Notification Types
4. After which, add event listeners for notifications received while the app is active, or in background.

*Detailed Steps:*
*1. Create and Configure Notification Actions*

<code><pre>
var acceptAction = Ti.App.iOS.createUserNotificationAction({
    identifier: "ACCEPT_IDENTIFIER",
    title: "Accept",
    activationMode: Ti.App.iOS.NOTIFICATION_ACTIVATION_MODE_BACKGROUND,
    destructive: false,
    authenticationRequired: false
}) ;
</pre></code>

key parameters: 
activation Mode: NOTIFICATION_ACTIVATION_MODE_BACKGROUND, NOTIFICATION_ACTIVATION_MODE_FOREGROUND
determines where app should be activated when user selects this action
destructive: if this action does something permanent like delete
authenticationRequired: if this action needs user to enter pin to continue

*2.Create and assign Notification Actions to Notification Categories*

<code><pre>
var backgroundCategory = Ti.App.iOS.createUserNotificationCategory({
identifier: "BACKGROUND_CATEGORY",
actionsForDefaultContext: [acceptAction, maybeAction, declineAction],
actionsForMinimalContext: [acceptAction, declineAction]
});
</pre></code>

key parameters: 
actionsForDefaultContext: default actions to show. Will show all if user has set app to display notifications in alert style.
actionsForMinimalContext(optional) : actions to show when user has set app to display notifications in banner style, and in lock screen.

*3.Register the Notification Categories and Notification Types*

<code><pre>
Ti.App.iOS.registerForLocalNotifications({
types: Ti.App.iOS.NOTIFICATION_TYPE_SOUND | Ti.App.iOS.NOTIFICATION_TYPE_ALERT,
categories: [backgroundCategory,backgroundLockCategory,foregroundCategory]
});
</pre></code>

Note: categories: nil will allow local notifications to work without actions

*4.Add event listeners* 
<code><pre>
// for notifications received while app is in foreground 
Ti.App.iOS.addEventListener('notification',function(e) 
{ 
var content = e.userInfo.content; 
//do stuff with notification received 
});
//for notifications received while app is in background
Ti.App.iOS.addEventListener('backgroundNotification',function(e)
{
var content = e.userInfo.content;
var identifier = e.identifier;
//do stuff with notification received
});
</pre></code>

Note: To enable interactive remote notifications, steps 1 to 3 should be done as well. Followed by Ti.Network.registerForPushNotifications. Require ACS to add additional field "category" to aps push packet, so that we can enable this for remote notifications.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17238_50858/notificationSample.js">notificationSample.js</td></td><td>2014-08-29T07:51:39.000+0000</td><td>5584</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>James Sugrue 2014-07-01

   Details can be found on this feature in the WWDC talk "What's New in iOS Notifications"  from 10:00 
   
   The class in question seems to be UIMutableUserNotificationAction 
   
   </li>
<li>Joseph Sachs 2014-08-26

   maybeAction & declineAction are missing. I'm assuming it's similar to acceptAction?
   
   example:
   <code><pre>
   var maybeAction = Ti.App.iOS.createUserNotificationAction({
       identifier: "MAYBE_IDENTIFIER", // is this right?
       title: "Maybe",
       activationMode: Ti.App.iOS.NOTIFICATION_ACTIVATION_MODE_BACKGROUND,
       destructive: false,
       authenticationRequired: false
   }) ;
   </pre></code></li>
<li>Ingo Muschenetz 2014-08-26

   PR is <a href="https://github.com/appcelerator/titanium_mobile/pull/5988" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5988</a></li>
<li>Chee Kiat Ng 2014-08-26

   [~underlabs] Yes it is.</li>
<li>Pedro Enrique 2014-08-28

   PR Merged</li>
<li>Timan Rebel 2014-09-11

   Wouldn't it have been better to give registerForLocalNotifications a more generic name, like registerForNotifications? Because to register for Push Notifications, you have to take the exact same native steps in iOS8, afaik. (Both are called UserNotifications).
   
   Now you first have to call registerForLocalNotifications and then Ti.Network.registerForPushNotifications. The latter no longer requesting permission (because the former already did). For me this was very confusing at first, until I took a look at the native iOS implementation.
   
   For more info see: <a href="https://developer.apple.com/videos/wwdc/2014/#713" rel="nofollow" target="_blank">https://developer.apple.com/videos/wwdc/2014/#713</a></li>
<li>Ingo Muschenetz 2014-09-11

   [~cng], thoughts?</li>
<li>Ingo Muschenetz 2014-09-11

   All, please see TIMOB-17683 as well. Thoughts appreciated.</li>
<li>Wilson Luu 2014-09-18

   Closing ticket as fixed. Verified the fix in TIMOB-17640 and TIMOB-17707.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17238.json">JSON Source</a></p>