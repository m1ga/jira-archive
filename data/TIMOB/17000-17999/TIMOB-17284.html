---
title: "[TIMOB-17284] Android: HTTPClient.open() parity issue with \"method\" parameter"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.3.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2014-07-08T15:15:07.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:03:36.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>problem</h4>

When passing the <code>method</code> property to <code>HTTPClient.open()</code> on iOS the method can be either upper or lower case. For example, both <code>get</code> and <code>GET</code> would both work for a GET request. On Android, though, only <code>GET</code> would work. If you use <code>get</code>, you get something along the lines of this error (when targeting "google.com" for example):

<code><pre>
[ERROR] TiHttpClient: (TiHttpClient-1) [678,678] HTTP Error (org.apache.http.client.HttpResponseException): Method Not Allowed
[ERROR] TiHttpClient: org.apache.http.client.HttpResponseException: Method Not Allowed
[ERROR] TiHttpClient: 	at ti.modules.titanium.network.TiHTTPClient$LocalResponseHandler.handleResponse(TiHTTPClient.java:259)
[ERROR] TiHttpClient: 	at ti.modules.titanium.network.TiHTTPClient$LocalResponseHandler.handleResponse(TiHTTPClient.java:218)
[ERROR] TiHttpClient: 	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:657)
[ERROR] TiHttpClient: 	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:637)
[ERROR] TiHttpClient: 	at ti.modules.titanium.network.TiHTTPClient$ClientRunnable.run(TiHTTPClient.java:1291)
[ERROR] TiHttpClient: 	at java.lang.Thread.run(Thread.java:841)
[ERROR] (405) Method Not Allowed
[ERROR] &lt;!DOCTYPE html&gt;
[ERROR] &lt;html lang=en&gt;
[ERROR] &lt;meta charset=utf-8&gt;
[ERROR] &lt;meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width"&gt;
[ERROR] &lt;title&gt;Error 405 (Method Not Allowed)!!1&lt;/title&gt;
[ERROR] &lt;style&gt;
[ERROR] *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* &gt; body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/errors/logo_sm_2.png) no-repeat}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/errors/logo_sm_2_hr.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/errors/logo_sm_2_hr.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/errors/logo_sm_2_hr.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:55px;width:150px}
[ERROR] &lt;/style&gt;
[ERROR] &lt;a href=//www.google.com/&gt;&lt;span id=logo aria-label=Google&gt;&lt;/span&gt;&lt;/a&gt;
[ERROR] &lt;p&gt;&lt;b&gt;405.&lt;/b&gt; &lt;ins&gt;That’s an error.&lt;/ins&gt;
[ERROR] &lt;p&gt;The request method &lt;code&gt;get&lt;/code&gt; is inappropriate for the URL &lt;code&gt;/&lt;/code&gt;.  &lt;ins&gt;That’s all we know.&lt;/ins&gt;
</pre></code>

<h4>test case</h4>

<code><pre>
var client = Ti.Network.createHTTPClient({
	onload : function(e) {
		Ti.API.info(this.responseText);
	},
	onerror : function(e) {
		return Ti.API.error('(' + this.status + ') ' + e.error + '\n' + this.responseText);
	}
});

client.open('get', '<a href="http://google.com" rel="nofollow" target="_blank">http://google.com</a>'); // change to "GET" and android will work
client.send();
</pre></code>

<h4>expected</h4>

Android <code>method</code> for <code>HTTPClient.open()</code> should be allowed to be specified in upper or lower case.

<h4>actual</h4>

Android calls end in error if <code>method</code> is lowercase.

<h3>Comments</h3>

<ol>
<li>Neeraj Gupta 2014-07-08

   [~ingo] FYI</li>
<li>Ingo Muschenetz 2014-07-08

   It appears it might be related to <a href="https://github.com/appcelerator/titanium_mobile/blob/7724a0083693811d93b74c6c2b98f956fb8edfff/android/modules/network/src/java/ti/modules/titanium/network/TiHTTPClient.java#L1110." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/7724a0083693811d93b74c6c2b98f956fb8edfff/android/modules/network/src/java/ti/modules/titanium/network/TiHTTPClient.java#L1110.</a></li>
<li>Neeraj Gupta 2014-07-08

   Yeah. Looks like it.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17284.json">JSON Source</a></p>