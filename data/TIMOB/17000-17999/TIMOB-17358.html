---
title: "[TIMOB-17358] Android: Refactor notifications"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-11-12T18:30:25.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android-l</td></tr>
<tr><th>Reporter</th><td>Ingo Muschenetz</td></tr>
<tr><th>Assignee</th><td>Hieu Pham</td></tr>
<tr><th>Created</th><td>2014-07-22T16:23:47.000+0000</td></tr>
<tr><th>Updated</th><td>2015-03-12T23:59:33.000+0000</td></tr>
</table>

<h3>Description</h3>

Our current implementation is deprecated, and likely to stop working with Android L.

<h3>Comments</h3>

<ol>
<li>Allen Yeung 2014-07-22

   Putting a SWAG of 2 weeks.  We may want to consider adding some of the new features into notifications as well.  We will also want to confirm that the new approach will work with Android Wear devices.</li>
<li>Ingo Muschenetz 2014-08-20

   * Set up Eclipse
   * Set up Android studio
   * Update Studio
   * Update CLI
   * Refactoring notification</li>
<li>Ingo Muschenetz 2014-08-26

   This requires an update to the AppCompat library which is not at GA status yet. Thus, we will be merging this to the master branch (not 3.4.0). Once Android L is closer to release and the proper components are available, we can slot this in. My goal is this would appear on the 3.4.X branch as soon as is feasible, and likely ship with 3.4.1.</li>
<li>Hieu Pham 2014-10-21

   master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/6247" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6247</a></li>
<li>Mark Mokryn 2014-10-24

   </li>
<li>Hieu Pham 2014-11-06

   </li>
<li>Ingo Muschenetz 2014-11-07

   Confirmed, we can merge this into 3.4.2.</li>
<li>Hieu Pham 2014-11-10

   Test case for new features of notification:
   <code><pre>
   // Create the notification
   var notification = Titanium.Android.createNotification({
       contentTitle: 'Notification 1',
       contentText : 'Just a notification',
       category: Titanium.Android.CATEGORY_MESSAGE,
       priority: Titanium.Android.PRIORITY_HIGH
   });
   
   // Create the notification
   var notification2 = Titanium.Android.createNotification({
       contentTitle: 'Notification 2',
       contentText : 'Just another notification',
   });
   
   var window = Ti.UI.createWindow();
   var button = Ti.UI.createButton({
   	title: 'Send Notification 1',
   	top:100
   });
   
   var button2 = Ti.UI.createButton({
   	title: 'Send Notification 2',
   	top: 300
   });
   
   window.add(button);
   window.add(button2);
   window.open();
   
   button.addEventListener('click', function(e) {
   	// Send the notification.
   	Titanium.Android.NotificationManager.notify(1, notification);
   });
   
   button2.addEventListener('click', function(e) {
   	// Send the notification.
   	Titanium.Android.NotificationManager.notify(2, notification2);
   });
   </pre></code>
   1. Send notification 1 first, then send notification 2. 
   2. Since notification 1 has higher priority than 2, 1 will be on top of 2. If you remove priority of notification 1, then repeat step 1, notification 2 will be on top of notification 1.</li>
<li>Ping Wang 2014-11-11

   </li>
<li>Hieu Pham 2014-11-13

    3.4.X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/6346" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6346</a></li>
<li>Lokesh Choudhary 2015-03-12

    Verified the fix and support for notifications for android 5.0.
    
    Closing.
    
    Environment:
    Appc Studio : 4.0.0.201503062102
    Ti SDK : 4.0.0.v20150312095013
    CLI : 3.5.0-dev
    Alloy : 1.5.1
    MAC Yosemite : 10.10.2
    Nexus 5 - Android 5.0</li>
</ol>


<p><a href="/TIMOB/TIMOB-17358.json">JSON Source</a></p>