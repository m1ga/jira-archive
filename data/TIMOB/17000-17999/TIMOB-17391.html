---
title: "[TIMOB-17391] Android: Support APK expansion files"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>cb-tooling</td></tr>
<tr><th>Reporter</th><td>Ingo Muschenetz</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2014-07-24T21:23:05.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:04:27.000+0000</td></tr>
</table>

<h3>Description</h3>

If your application is over 50MB, you can publish additional "expansion" files to the Google Play Store.

<a href="http://developer.android.com/google/play/expansion-files.html" rel="nofollow" target="_blank">http://developer.android.com/google/play/expansion-files.html</a>

People have asked for this functionality before in Q & A. See:

* <a href="https://developer.appcelerator.com/question/176459/android-apk-expansion-files" rel="nofollow" target="_blank">https://developer.appcelerator.com/question/176459/android-apk-expansion-files</a>
* <a href="https://developer.appcelerator.com/question/134685/android-apk-expansion-pack" rel="nofollow" target="_blank">https://developer.appcelerator.com/question/134685/android-apk-expansion-pack</a>
* <a href="http://developer.appcelerator.com/question/134202/android-market-apk-changes" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/134202/android-market-apk-changes</a>
* <a href="https://developer.appcelerator.com/question/164165/will-titanium-support-adding-apk-expansion-files" rel="nofollow" target="_blank">https://developer.appcelerator.com/question/164165/will-titanium-support-adding-apk-expansion-files</a>


<h3>Comments</h3>

<ol>
<li>Jason Kneen 2014-09-08

   Available here:-
   
   <a href="https://github.com/jasonkneen/TiExpansionFiles" rel="nofollow" target="_blank">https://github.com/jasonkneen/TiExpansionFiles</a>
   
   With example expansion files, example app.js - supports background downloads, direct file access without unzipping etc.</li>
<li>Ricardo Arguello 2015-10-11

   Jason,
   
   Thanks for the module, it is very useful. The problem is that with android version 5.0 or 5.1 I am getting this error:
   
   java.lang.IllegalArgumentException: Service Intent must be explicit: Intent { act=com.android.vending.licensing.ILicensingService }
   
   The solution appears to be simple, just calling this line after initializing the intent:
   
   serviceIntent.setPackage("com.android.vending");
   
   Do you think it is possible to fix the module or share the code?
   
   Thanks!
   
   
   </li>
<li>Osian Evans 2016-10-19

   @RicardoArguello, did you resolve this issue, or find an alternative solution? Thanks.</li>
<li>Ricardo Arguello 2016-10-19

   Osian,
   
   I ended up creating my own module for handling Expansion Files.</li>
<li>Osian Evans 2016-10-19

   Do you have it available as a marketplace module or an open project?
   
   Have contacted and am waiting to hear back from Jason.</li>
<li>Ricardo Arguello 2016-10-19

   Osian, please contact me at my email...</li>
<li>Hans Knöchel 2016-11-05

   If I get the [APK Expansion Files](<a href="https://developer.android.com/google/play/expansion-files.html)" rel="nofollow" target="_blank">https://developer.android.com/google/play/expansion-files.html)</a> page correctly, it is nothing that we must support with our SDK, but something that the user can package using the [JOBB Tool](<a href="https://developer.android.com/studio/command-line/jobb.html)." rel="nofollow" target="_blank">https://developer.android.com/studio/command-line/jobb.html).</a> We may need an adjustment in our <code>Ti.Filesystem</code> to handle the downloaded <code>.obb</code>, but that should be pretty straight forward. 
   
   So if someone could do a PoC, we could help by doing a blog post about the single steps.
   
   *EDIT*: More thoughts in TIMOB-19069</li>
<li>Jorge Leonor 2017-01-09

   Appcelerator SDK has a module to generate expansion files?
   
   The Module TIExpansionFiles (<a href="https://github.com/appcelerator-forks/_jasonkneen.TiExpansionFiles)" rel="nofollow" target="_blank">https://github.com/appcelerator-forks/_jasonkneen.TiExpansionFiles)</a> don´t work for SDK 6.0.0 GA.
   
   I am investigating some module similar to this, but there is nothing to generate APK with expansion files. My APK is greater than 100 MB and I ran out of form to generate the APK. Any idea how to fix this?
   
   I think a module of this kind should be a priority.
   
   Thanks for the support.</li>
<li>Hans Knöchel 2017-06-16

   Quick update here: <code>[Ti.ExpansionFiles](<a href="https://github.com/jasonkneen/TiExpansionFiles)" rel="nofollow" target="_blank">https://github.com/jasonkneen/TiExpansionFiles)</a></code> was updated to support SDK 6.0.0+ last recently, you should try it out. [~jquick] would it make sense to include that in the core? Trying to keep it more slim in general.</li>
<li>Joshua Quick 2017-06-21

    Adding expansion file support to the core would definitely have its advantages. The current module appears to provide expansion file data via blobs, which would be expensive for large files. An integrated version can avoid that.
    
    But we would have to support 2 things first:
    <h4> We would need to add Google Licensing support (aka: Google LVL) to the core as well in order to download the expansion file... or at least require it as a module to work. This is because Google Play does not always automatically download it and we need licensing to acquire a temporary download URL once verified that the app was acquired legally.</h4>
    <h4>We would also need a new API/scheme to identify which Android app store we're targeting. This is because Google expansion files and licensing is a feature of the Google Play app store. It isn't relevant to other app stores such as Amazon, Samsung, etc.</h4></li>
</ol>


<p><a href="/TIMOB/TIMOB-17391.json">JSON Source</a></p>