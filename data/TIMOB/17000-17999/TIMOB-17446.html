---
title: "[TIMOB-17446] Build scripts should accept flags indicating the path to the platform and i18n folders to use for a build"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-01-30T00:27:59.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Components</th><td>CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tim Poulsen</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2014-08-01T21:34:01.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-10T09:59:59.000+0000</td></tr>
</table>

<h3>Description</h3>

Our initial solution to ALOY-858 (use Alloy themes override the contents of a project's platform and i18n directories) has proven unworkable and pointed out the need to handle this at the platform level. 

Our attempted solution was to make a backup copy of those folders in the build directory, merge themed versions of the i18n/platform folders to the original locations, proceed with the build, then restore the originals when done. This has created problems with inconsistent states, original files being lost, etc.

The better solution for Alloy would be to merge the originals and theme copies to a folder within build, then direct the platform to build using those versions. For that, we need new flags to the build scripts.

As you implement this, please consider how we might also theme the tiapp.xml, as this has also been requested. Again, that should be handled at the platform level not by Alloy making temp copies of files.


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17446_53829/stockclassic.zip">stockclassic.zip</td></td><td>2015-01-26T21:14:06.000+0000</td><td>4841348</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Malcolm Hollingsworth 2014-08-02

   To reiterate my comment from the original ticket;
   
   I strongly believe that including the tiapp.xml file into the files that can be included via theme folders would add the final hurdle of theming once the platform and i18n folders have been merged correctly.
   
   Assuming each theme was aimed at providing the same base app but to different clients or markets then the appid and if required elements like the google map api values would also need to swap over.
   
   The simplest solution would be to have the tiapp.xml file inside the root of each theme folder.  If found this copy is used in place of the normal app version.  Whilst deep merging could be used I do not believe it is required, a simple file swap out is the smartest approach.
   
   I imagine many professional app houses have a need to manage several variations of one base app engine and having manual steps in the process lead to potentially dangerous miss-managed store releases.
   
   The idea of the theme folders are superb; adding i18n and platform folder is a great move and championed by myself - but the tiapp.xml is the final hurdle to complete the process.</li>
<li>Ingo Muschenetz 2014-08-04

   [~cbarber] Thoughts on the request?</li>
<li>Malcolm Hollingsworth 2014-12-29

   Any movements, thoughts or love coming to this ticket?</li>
<li>Tim Poulsen 2015-01-26

   titanium_mobile PR <a href="https://github.com/appcelerator/titanium_mobile/pull/6602" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6602</a>
   titanium_mobile_windows PR <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/98" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/98</a>
   
   This change adds two new build flags:
   
   * <code>--i18n-directory &lt;path&gt;</code>
   * <code>--platform-directory &lt;path&gt;</code>
   
   For a functional review, use the attached project.
   
   1. Build the app with <code>ti build -p ios</code> to get an app with three basic labels. Check the Settings app and look for the stockclassic app's setting options.
   2. Build the app again with <code>ti build -p ios --platform-directory somedir/myplatform --i18n-directory somedir/myi18n</code>. This time, the strings and the Settings option indicate that you're using the "My" versions of the i18n strings and platform/iphone/Settings.bundle files.
   3. Repeat for Android with <code>ti build -p android</code>
   4. And again with  <code>ti build -p ios --platform-directory somedir/myplatform --i18n-directory somedir/myi18n</code>. This time, you'll get the "My" strings. Return to the home screen, open the app tray. The app icon should have red lines drawn over it (icons supplied for high, xhdpi, and xxhdpi densities)
   
   Blackberry and MobileWeb should respect the i18n strings, but offer no support for platform files. 
   
   Windows is untested, as at this stage it doesn't offer support for internationalized strings or platform-specific files.
   
   
   </li>
<li>Praveen Innamuri 2015-01-30

   Merged PR into master.</li>
<li>Lokesh Choudhary 2015-03-30

   Verified the implementation.
   
   Closing.
   
   Environment:
   Appc Studio :  4.0.0.201503301039
   Ti SDK :  4.0.0.v20150330105813
   CLI : 4.0.0-alpha
   Alloy : 1.6.0-alpha
   MAC Yosemite : 10.10.2</li>
</ol>


<p><a href="/TIMOB/TIMOB-17446.json">JSON Source</a></p>