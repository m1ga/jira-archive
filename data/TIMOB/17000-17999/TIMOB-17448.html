---
title: "[TIMOB-17448] iOS: error when commonjs module exports certain types"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-08-20T23:29:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.3.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.4.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>module_module, qe-manualtest</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Pedro Enrique</td></tr>
<tr><th>Created</th><td>2014-08-02T02:59:03.000+0000</td></tr>
<tr><th>Updated</th><td>2014-08-20T23:29:35.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>problem</h4>

If a commonjs module assigns anything other than the following types to <code>module.exports</code>, the app crashes with no output to the console:

* Function
* Object
* String

For example, returning any of the following in <code>module.exports</code> will crash the app:

* Number
* Boolean
* null
* undefined
* NaN

This issue does not seem to appear on Android.

<h4>test case</h4>

Creating the following simple app will crash the simulator when it is run.

<h4>foo.js</h4>
<code><pre>
module.exports = 123;

// the following cases will also crash

// module.exports = true;
// module.exports = undefined;
// module.exports = null;
</pre></code>

<h4>app.js</h4>
<code><pre>
require('foo');
</pre></code>


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17448_50613/crash_08_20_14.txt">crash_08_20_14.txt</td></td><td>2014-08-20T21:37:12.000+0000</td><td>34636</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Pedro Enrique 2014-08-04

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/5948" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5948</a></li>
<li>Olga Romero 2014-08-20

   Please, see the crash report.
   Environment tested
   Mac osx 1-.9.4 Maverics
   Appcelerator Studio, build: 3.4.0.201408180158
   Node.JS Version: v0.10.28
   NPM Path: /usr/local/bin/npm
   NPM Version: 1.4.23
   acs@1.0.16
   alloy@1.5.0-dev (git://github.com/appcelerator/alloy.git#b2e8f580d023e45c63072df924666e58193a8981)
   install@0.1.7
   npm@1.4.23
   sudo@1.0.3
   titanium@3.4.0-dev (git://github.com/appcelerator/titanium.git#9079326639c7f610dafee33dd16742de7d92d795)
   titanium-code-processor@1.1.1
   Xcode6
   Device: iPhone 5c iOS 7.1
   </li>
<li>Olga Romero 2014-08-20

   Titanium SDK, build 3.4.0.v20140820125714 has the fix :)</li>
</ol>


<p><a href="/TIMOB/TIMOB-17448.json">JSON Source</a></p>