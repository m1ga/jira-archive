---
title: "[TIMOB-17460] iOS: Ti.Network.createHTTPClient autoRedirect = false is ignored"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2014-10-21T16:18:42.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>TiAPI</td></tr>
<tr><th>Labels</th><td>ios</td></tr>
<tr><th>Reporter</th><td>k</td></tr>
<tr><th>Assignee</th><td>Muhammad Dadu</td></tr>
<tr><th>Created</th><td>2014-07-27T06:09:39.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-21T22:08:34.000+0000</td></tr>
</table>

<h3>Description</h3>

Here is why and how it can be fixed.

<a href="https://github.com/appcelerator/APSHTTPClient/pull/16" rel="nofollow" target="_blank">https://github.com/appcelerator/APSHTTPClient/pull/16</a>

I debugged why autoRedirect property of Ti.Network.createHTTPClient is ignored for 3.3.0.GA. The default property of autoRedirect is true.

When autoRedirect = false is set, self.response.status is always zero in APSHTTPRequest.m
Therefore the redirect check if statement

if (!self.redirects && self.response.status != 0)

does always fall through. 

[self.response updateResponseParamaters:response];

needs to be called in advance

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2014-08-14

   3.4.0 is moved forward, and 3.5.0 is taking its place in the calendar.</li>
<li>Wilson Luu 2014-08-27

   One thing to note, I was not able to reproduce this issue on iOS. The autoRedirect property is respected: 
   
   * If autoRedirect = true, then the target url will be auto-redirected and return status 200
   * If autoRedirect = false, then the target url will not be auto-redirected and return status 302
   
   *Tested on:*
   Appcelerator Studio, build: 3.3.0.201407111535
   SDK build: 3.3.0.GA
   CLI: 3.3.0
   Alloy: 1.4.1
   Xcode: 5.1.1
   Devices: iphone 5 (7.1.1)
   
   And, here is the app.js I used to verify this ticket:
   <code><pre>
   var win1 = Titanium.UI.createWindow({
         
   });
    
   // Create a Button.
   var aButton = Ti.UI.createButton({
       title : 'aButton',
   });
    
   // Listen for click events.
   aButton.addEventListener('click', function() {
    
       var url = "<a href="http://httpbin.org/redirect/2" rel="nofollow" target="_blank">http://httpbin.org/redirect/2</a>";
       var client = Ti.Network.createHTTPClient({
           // function called when the response data is available
           onload : function(e) {
               Ti.API.info('e ' + JSON.stringify(e));
               Ti.API.info('onload---------------------------------------------');
               Ti.API.info("Received HEADERS_RECEIVED: " + this.HEADERS_RECEIVED);
               Ti.API.info("Received status: " + this.status);
               Ti.API.info("Received statusText: " + this.statusText);
               Ti.API.info("Received responseText: " + this.responseText);
    
               alert('success');
           },
           // function called when an error occurs, including a timeout
           onerror : function(e) {
               Ti.API.debug(e.error);
               Ti.API.info('onerror---------------------------------------------');
               Ti.API.info("Received HEADERS_RECEIVED: " + this.HEADERS_RECEIVED);
               Ti.API.info("Received status: " + this.status);
               Ti.API.info("Received statusText: " + this.statusText);
               Ti.API.info("Received responseText: " + this.responseText);
    
               alert('error');
           },
           timeout : 5000,
           autoRedirect : false, // CHANGE ME
           autoEncodeUrl : false,
    
       });
       
       
       // Prepare the connection.
    
       client.open("GET", url);
       // Send the request.
       client.send();
    
   });
    
   // Add to the parent view.
   win1.add(aButton);
    
   win1.open();
   </pre></code>
   </li>
<li>Ingo Muschenetz 2014-08-28

   [~kazuyukitanimura@gmail.com] Can you reproduce it with the code listed above?</li>
<li>Jon Alter 2014-10-20

   Can't reproduce this issue.
   
   Tested using [~wluu]'s example code above.
   <h4>Environment </h4>
   TiSDK 3.4.0.GA iOS Sim 8.0
   TiSDK 3.3.0.GA iPhone 5S iOS 8.0.2
   
   [~kazuyukitanimura@gmail.com] please test using the example code above without your fix and let us know your results. Thank you!</li>
<li>Vishal Duggal 2014-10-21

   Can not reproduce with sample code provided.
   </li>
<li>Lee Morris 2017-03-21

   Closing ticket as the issue cannot be reproduced and due to the above comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17460.json">JSON Source</a></p>