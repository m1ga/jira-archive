---
title: "[TIMOB-17489] Do not process data returned by callbacks"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>bridge, callback, crashes, kroll, triageSupport</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Pedro Enrique</td></tr>
<tr><th>Created</th><td>2014-07-08T08:41:57.000+0000</td></tr>
<tr><th>Updated</th><td>2014-09-04T15:16:03.000+0000</td></tr>
</table>

<h3>Description</h3>

If a JavaScript callback - e.g. via <code>Ti.*.addEventListener('event', fn);</code> or <code>Ti.Network.createHTTPClient({ onload: fn });</code> - returns a value, that value will be converted to a native object.

If this is a large object this can crash the app, like demonstrated by the first button in this [example app](<a href="https://github.com/wappzapp/whatsup)." rel="nofollow" target="_blank">https://github.com/wappzapp/whatsup).</a>

I can't think of any use-case why the proxy needs the value the callback returns. So if there is a way to keep Kroll from converting it, this would help to prevent people from spending days - like we did - on nailing the crash.

I'll publish a [post on tiDev.io](<a href="http://www.tidev.io/2014/07/08/dont-let-callbacks-cross-the-bridge/)" rel="nofollow" target="_blank">http://www.tidev.io/2014/07/08/dont-let-callbacks-cross-the-bridge/)</a> at 5pm UTC explaining this issue.

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2014-08-11

   [~fokke] Is this specific to a particular platform, or does it happen both Android and iOS?</li>
<li>Fokke Zandbergen 2014-08-12

   Can't say (am on holiday) but I'd suspect it's the same on Android and since it has no value other then potentially consuming memory and crashing I'd strip it.</li>
<li>Ingo Muschenetz 2014-08-25

   [~penrique] to review for possible 3.5.0 inclusion.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17489.json">JSON Source</a></p>