---
title: "[TIMOB-17491] Android: contentOffset property of UI.ScrollView not accessible"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-11-04T22:42:44.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.4.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.4.2, Release 3.5.0, Release 4.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, contentOffset, parity, scrollview</td></tr>
<tr><th>Reporter</th><td>Kevin Frugier</td></tr>
<tr><th>Assignee</th><td>Hieu Pham</td></tr>
<tr><th>Created</th><td>2014-08-11T13:59:17.000+0000</td></tr>
<tr><th>Updated</th><td>2015-04-19T16:07:09.000+0000</td></tr>
</table>

<h3>Description</h3>

The contentOffset property (reflecting what's currently visible in a ScrollView), is undefined on Android.

Documentation of [UI.ScrollView|(<a href="http://docs.appcelerator.com/titanium/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/latest/#</a>!/api/Titanium.UI.ScrollView-property-contentOffset] says it's available on Android since 0.9, however in version 3.3.0 GA it (still?) doesn't work.

<h4>Notes</h4>
* contentOffset is not set manually anywhere in the test code
* I'm talking about UI.ScrollView, not tableview or listview

<h4>How to reproduce</h4>
Create a ScrollView
<code><pre>
&lt;Alloy&gt;
	&lt;ScrollView id="myscrollview" /&gt;
&lt;/Alloy&gt;
</pre></code>

In the controller, try to get the value of the property :
<code><pre>
alert($.myscrollview.contentOffset.x);
</pre></code>

<h4>Actual result</h4>

On iOS : the value is properly displayed and reflects any scrolling (manual or not) done on the ScrollView

On Android : a runtime error occurs with the following message :
{panel:title=Runtime Error}
Message:
Uncaught TypeError: Cannot read property 'x' of undefined
Source:
alert($.myscrollview.contentOffset.x);
{panel}

<h4>Expected result</h4>
Both iOS & Android should produce the same result.
Looking at the source of [TiUIScrollView.java](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/ui/src/java/ti/modules/titanium/ui/widget/TiUIScrollView.java)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/ui/src/java/ti/modules/titanium/ui/widget/TiUIScrollView.java)</a> we see that indeed the property is supposed to be updated upon scrolling. However the property is not accessible from JavaScript on Android. (Could it be a problem in the proxy?)

<h3>Comments</h3>

<ol>
<li>Shuo Liang 2014-08-12

   Can reproduce with SDK 3.2.3 GA and 3.3.0 GA on Android 4.2.2.
   Here is a simple test case.
   <code><pre>
   var win = Ti.UI.createWindow({
     backgroundColor: 'white',
     exitOnClose: true,
     fullscreen: false,
     title: 'ScrollView Demo'
   });
   
   var scrollView = Ti.UI.createScrollView({
     contentWidth: 'auto',
     contentHeight: 'auto',
     showVerticalScrollIndicator: true,
     showHorizontalScrollIndicator: true,
     height: '80%',
     width: '80%'
   });
   var view = Ti.UI.createView({
     backgroundColor:'#336699',
     borderRadius: 10,
     //top: 10,
     height: 2000,
     width: 1000
   });
   
   // output the contentOffset value
   Ti.API.info(scrollView.contentOffset.x);
   
   scrollView.add(view);
   win.add(scrollView);
   win.open();
   </pre></code> </li>
<li>Hieu Pham 2014-10-30

   master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/6292" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6292</a>
   3.4.X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/6313" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6313</a></li>
<li>Satyam Sekhri 2014-11-25

   The contentOffset property for ScrollView is accessible now and does not show any error. Tested with both the alloy and classic code provided.
   Verified on:
   SDK: 3.5.0.v20141124155715
   Studio: 3.4.1.201410281743
   CLI: 3.4.1
   Alloy: 1.5.1
   Device: Samsung Galaxy S5 (v4.4.2)</li>
<li>Rainer Schleevoigt 2015-04-19

   It doesn't work with SDK3.5.1.GA</li>
</ol>


<p><a href="/TIMOB/TIMOB-17491.json">JSON Source</a></p>