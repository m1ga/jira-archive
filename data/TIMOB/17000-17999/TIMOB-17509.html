---
title: "[TIMOB-17509] Android SDK not loading due to EPERM failure"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-08-26T21:43:18.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.0.0</td></tr>
<tr><th>Components</th><td>Android, CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Eduardo Gomez</td></tr>
<tr><th>Assignee</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Created</th><td>2014-07-18T21:55:45.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-16T22:49:04.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue description </h4>
After upgrading Appcelerator Studio the Android SDK isn't properly detected. This prevents developers to deploy applications. Forgive me if this is a dupe of another ticket. 

<h4>Steps to reproduce</h4>
<h4>On Appcelerator Dashboard tab hit "Android SDK" to complete setup process (AppcStudio_InstallingAndroid_1.jpg). </h4>
<h4>Use Platform Configurations dialog to install required SDKs (2.3.3 is checked. AppcStudio_InstallingAndroid_2.jpg). </h4>
<h4>Upon completion everything seems Ok. AppcStudio_InstallingAndroid_3.jpg</h4>
<h4>A popup over windows remains static saying API 10 must be installed and suddenly Android isn't fully loaded (AppcStudio_InstallingAndroid_4.jpg).</h4>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17509_49887/AppcStudio_InstallingAndroid_1.jpg">AppcStudio_InstallingAndroid_1.jpg</td></td><td>2014-07-18T21:55:45.000+0000</td><td>245282</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17509_49888/AppcStudio_InstallingAndroid_2.jpg">AppcStudio_InstallingAndroid_2.jpg</td></td><td>2014-07-18T21:55:45.000+0000</td><td>195877</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17509_49889/AppcStudio_InstallingAndroid_3.jpg">AppcStudio_InstallingAndroid_3.jpg</td></td><td>2014-07-18T21:55:45.000+0000</td><td>172762</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17509_49890/AppcStudio_InstallingAndroid_4.jpg">AppcStudio_InstallingAndroid_4.jpg</td></td><td>2014-07-18T21:55:45.000+0000</td><td>189199</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17509_49891/AppcStudioData.txt">AppcStudioData.txt</td></td><td>2014-07-18T21:55:45.000+0000</td><td>281281</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17509_49892/MacOSX_1.png">MacOSX_1.png</td></td><td>2014-07-18T21:59:03.000+0000</td><td>93147</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17509_49893/MacOSX_2.png">MacOSX_2.png</td></td><td>2014-07-18T21:59:03.000+0000</td><td>125295</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2014-07-18

   A few questions:
   
   1) What is the output of "ti info"?
   2) There are a number of suspicious networking errors. I don't believe the Android SDK downloaded fully.
   
   <code><pre>
   npm ERR! SyntaxError: Unexpected token &lt;
   npm ERR! 
   npm ERR! &lt;?xml version="1.0" encoding="utf-8"?&gt;
   npm ERR! &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   npm ERR!  "<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</a>"&gt;
   npm ERR! &lt;html&gt;
   npm ERR!   &lt;head&gt;
   npm ERR!     &lt;title&gt;200 OK&lt;/title&gt;
   npm ERR!   &lt;/head&gt;
   npm ERR!   &lt;body&gt;
   npm ERR!     &lt;h1&gt;Error 200 OK&lt;/h1&gt;
   npm ERR!     &lt;p&gt;OK&lt;/p&gt;
   npm ERR!     &lt;h3&gt;Guru Meditation:&lt;/h3&gt;
   npm ERR!     &lt;p&gt;XID: 724797158&lt;/p&gt;
   npm ERR!     &lt;hr&gt;
   npm ERR!     &lt;p&gt;Varnish cache server&lt;/p&gt;
   npm ERR!   &lt;/body&gt;
   npm ERR! &lt;/html&gt;
   npm ERR! 
   npm ERR!     at Object.parse (native)
   npm ERR!     at RegClient.&lt;anonymous&gt; (C:\Program Files\nodejs\node_modules\npm\node_modules\npm-registry-client\lib\request.js:241:23)
   npm ERR!     at Request.self.callback (C:\Program Files\nodejs\node_modules\npm\node_modules\request\request.js:123:22)
   npm ERR!     at Request.EventEmitter.emit (events.js:98:17)
   npm ERR!     at Request.&lt;anonymous&gt; (C:\Program Files\nodejs\node_modules\npm\node_modules\request\request.js:893:14)
   npm ERR!     at Request.EventEmitter.emit (events.js:117:20)
   npm ERR!     at IncomingMessage.&lt;anonymous&gt; (C:\Program Files\nodejs\node_modules\npm\node_modules\request\request.js:844:12)
   npm ERR!     at IncomingMessage.EventEmitter.emit (events.js:117:20)
   npm ERR!     at _stream_readable.js:920:16
   npm ERR!     at process._tickCallback (node.js:415:13)
   npm ERR! If you need help, you may report this *entire* log,
   npm ERR! including the npm and node versions, at:
   npm ERR!     &lt;<a href="http://github.com/isaacs/npm/issues&gt" rel="nofollow" target="_blank">http://github.com/isaacs/npm/issues&gt</a>;
   </pre></code>
   
   Are they running as Admin?
   <code><pre>
   npm ERR! System Windows_NT 6.1.7600
   npm ERR! command "C:\\Program Files\\nodejs\\node.exe" "C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "-g" "install" "titanium" "--color" "false"
   npm ERR! cwd C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Appcelerator
   npm ERR! node -v v0.10.25
   npm ERR! npm -v 1.3.24
   npm ERR! path C:\Users\josedejesus\AppData\Roaming\npm\node_modules\titanium\node_modules\moment\lang\el.js
   npm ERR! fstream_path C:\Users\josedejesus\AppData\Roaming\npm\node_modules\titanium\node_modules\moment\lang\el.js
   npm ERR! fstream_type File
   npm ERR! fstream_class FileWriter
   npm ERR! code ENOENT
   npm ERR! errno 34
   npm ERR! fstream_stack C:\Program Files\nodejs\node_modules\npm\node_modules\fstream\lib\writer.js:284:26
   npm ERR! fstream_stack Object.oncomplete (fs.js:107:15)
   npm ERR! Error: EPERM, open 'C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Appcelerator\npm-debug.log'
   npm ERR!  { [Error: EPERM, open 'C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Appcelerator\npm-debug.log']
   npm ERR!   errno: 50,
   npm ERR!   code: 'EPERM',
   npm ERR!   path: 'C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\Appcelerator\\npm-debug.log' }
   npm ERR! 
   npm ERR! Please try running this command again as root/Administrator.
   </pre></code>
   
   <code><pre>
   !ENTRY org.eclipse.equinox.p2.transport.ecf 2 0 2014-07-08 13:24:34.652
   !MESSAGE Connection to <a href="http://download.appcelerator.com/appcelerator/appc-studio/standalone/update/stable/p2.index" rel="nofollow" target="_blank">http://download.appcelerator.com/appcelerator/appc-studio/standalone/update/stable/p2.index</a> failed on download.appcelerator.com. Retry attempt 0 started
   !STACK 0
   java.net.UnknownHostException: download.appcelerator.com
   </pre></code>
   
   <code><pre>
   !ENTRY com.aptana.core.epl 2 0 2014-07-15 21:58:12.458
   !MESSAGE Connection to <a href="https://dl-ssl.google.com/android/repository/sys-img/android/sysimg_x86-16_r01.zip" rel="nofollow" target="_blank">https://dl-ssl.google.com/android/repository/sys-img/android/sysimg_x86-16_r01.zip</a> failed on dl-ssl.google.com. Retry attempt 0 started
   !STACK 0
   java.net.UnknownHostException: dl-ssl.google.com
   </pre></code></li>
<li>Eduardo Gomez 2014-07-20

   1) ti info output: <a href="https://gist.github.com/egomez99/ad40831dff7a7491b2dc" rel="nofollow" target="_blank">https://gist.github.com/egomez99/ad40831dff7a7491b2dc</a>
   2) It turns out the Android installation was incomplete due Firewall restrictions. Logs from SDK manager revealed the following (despite the fact Studio shows on the configuration details "The Android SDK is installed correctly!"):
   <code><pre>
   Failed to fetch URL <a href="https://dl-ssl.google.com/android/repository/sys-img/x86/addon-x86.xml/addon.xml" rel="nofollow" target="_blank">https://dl-ssl.google.com/android/repository/sys-img/x86/addon-x86.xml/addon.xml</a>, reason: IO Unknown Host dl-ssl.google.com
   </pre></code>
   3) About their account it does seem to have administrative priviledges (since is listed as Administrator user). Should they just give themselves permissions to that particular folder?
   
   In regards to the issue reported on Mac OSX, I will attach logs as soon as I have them. Thanks.
   </li>
<li>Ingo Muschenetz 2014-07-21

   [~egomez] #1 is this issue, supposedly solved in 3.2.3: TIMOB-16074. [~cbarber] they appear to be continuing to get it in 3.3.0.GA. Thoughts?</li>
<li>Chris Barber 2014-07-22

   [~egomez] Regarding the EPERM issue from the gist, this most certainly is a permission issue. They will need to go into the security settings for the "Archivos comunes" folder and fix the permissions.</li>
<li>Ingo Muschenetz 2014-07-22

   [~cbarber] I would still like us to fail more gracefully in this circumstance.</li>
<li>Chris Barber 2014-07-22

   [~ingo] There are currently 81 places across the CLI, SDK, and node-appc where we read a directory and that does NOT include 3rd party dependencies. That's a lot of places to add try/catches to.</li>
<li>Ingo Muschenetz 2014-07-22

   Sure, but I can't imagine that all of them are as likely to have permission issues. There must be some likely culprits (i.e. ones that have purposely failed before and have reports) that we could start with.</li>
<li>Chris Barber 2014-07-22

   [~ingo] Sounds like we need a new ticket.</li>
<li>Ingo Muschenetz 2014-08-18

   [~pinnamuri] yes, please move.</li>
<li>Feon Sua Xin Miao 2015-07-08

    PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/6963" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6963</a>
    
    On Windows, to test:
    1. Set permissions on <code>C:\Program Files\Common Files</code> to Administrator only
    2. Run <code>ti info</code>
    3. The process shouldn't crash with <code>Error: EPERM</code></li>
<li>Praveen Innamuri 2015-08-26

    PR merged to master.</li>
<li>Lee Morris 2017-03-16

    Closing ticket as fixed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17509.json">JSON Source</a></p>