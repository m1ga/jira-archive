---
title: "[TIMOB-17563] Android: Image incorrectly sized when using windowBackground with custom theme "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2014-09-04T17:21:01.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.3.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>SupportTeam</td></tr>
<tr><th>Reporter</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Assignee</th><td>Ping Wang</td></tr>
<tr><th>Created</th><td>2014-08-26T21:41:50.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-10T21:19:17.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem Description</h4>
There is a strange behavior when using custom theme, basically if you don't use this one:

<code><pre>
 &lt;item name="android:windowBackground"&gt;@drawable/splash&lt;/item&gt;
</pre></code>

it will fail (it shows a smaller screen/view in android) - Check Image1.png 

If you remove it, it will work just fine. - Check Image2.png

<h4>Steps to reproduce</h4>
1. Create a new mobile project (classic titanium)
2. Add this app.js:
<code><pre>

		var mainView = Ti.UI.createView({
			layout: 'vertical',
			height: Ti.UI.FILL
		});

		var textField = Ti.UI.createTextField({
            top: 10,
			autocapitalization: Titanium.UI.TEXT_AUTOCAPITALIZATION_NONE,
			autocorrect: false
		});

        mainView.add(textField);

		var validateButton = Ti.UI.createButton({
            top: 15,
            left: 8,
            right: 8,
            title: 'Validate content'
		});
		mainView.add(validateButton);

		validateButton.addEventListener("click", function () {
		    if (validateTextFieldCommand) {
		        validateTextFieldCommand(textField.value);
		    }
		});

		var win = Ti.UI.createWindow({backgroundColor:'blue'});
		win.add(mainView);
		win.open();
</pre></code>

Add this to your mytheme.xml (inside platform->android->res->values):

<code><pre>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;resources&gt;
    &lt;style name="Theme.MyTheme" parent="@style/Theme.AppCompat"&gt;
        &lt;!-- &lt;item name="android:windowBackground"&gt;@drawable/splash&lt;/item&gt;--&gt;
        &lt;item name="android:windowBackground"&gt;@drawable/splash&lt;/item&gt;
        &lt;item name="android:windowNoTitle"&gt;true&lt;/item&gt;
        &lt;item name="android:windowActionBar"&gt;false&lt;/item&gt;
        &lt;item name="android:editTextStyle"&gt;@style/editText&lt;/item&gt;
    &lt;/style&gt;

    &lt;style name="editText" parent="@android:style/Widget.EditText"&gt;
        &lt;item name="android:textCursorDrawable"&gt;@null&lt;/item&gt;
    &lt;/style&gt;
&lt;/resources&gt;
</pre></code>

Specify in tiapp.xml which theme you going to use (excerpt): 

<code><pre>
 &lt;android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt;
        &lt;manifest android:installLocation="auto" android:versionCode="1" android:versionName="894"&gt;
&lt;application android:debuggable="true"
                android:icon="@drawable/appicon"
                android:label="@string/appname" android:largeHeap="true"
                android:screenOrientation="portrait" android:theme="@style/Theme.MyTheme"&gt;
&lt;/application&gt;
&lt;/manifest&gt;
&lt;/android&gt;
</pre></code>
3. Run it into device. 

<h4>Actual results </h4>
if you enable the windowBackground in the custom theme, the views will be smaller. 

<h4>Extra info</h4>
I attached a full testcase in the form of a project with the name viewport-3-3-0-reduced.zip. 


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17563_50794/Image1.png">Image1.png</td></td><td>2014-08-26T21:41:50.000+0000</td><td>348661</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17563_50795/Image2.png">Image2.png</td></td><td>2014-08-26T21:41:50.000+0000</td><td>29367</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ping Wang 2014-09-04

   </li>
<li>Ingo Muschenetz 2014-09-17

   Making public again. Removed attachment (as it's not truly necessary)</li>
<li>Lee Morris 2017-03-10

   Closing ticket as it is not our bug.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17563.json">JSON Source</a></p>