---
title: "[TIMOB-17580] Android : Memory was Increased Reading file from SDCard"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.3.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>SDCard, TCSupport, android</td></tr>
<tr><th>Reporter</th><td>Sattanathan</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2014-07-31T08:49:16.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:03:56.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem Description </h4>
In my app we used icons and images. All the file size less than 20Kb. All this files are Download from server and store to SDCard. When we getting file from SDCard HEAP memory was increased and some time app will be EXIT. we put the same file inside the RESOURCE folder after we tried Heap Memory was not increased and app was stabled. Please refer the screenshot.   

Hello, We have tested the issue with the following code below and we have observed the same problem.

<h4>TESTING ENVIRONMENT</h4>

CLI version 3.3.0, 
Titanium SDK version 3.3.0.GA
Android Device


<h4>STEP TO TEST</h4>

- Create a new Project
- Copy the Code above to the project "app.js" file
<code><pre>
var win = Titanium.UI.createWindow({
     backgroundColor : 'white',
    top : 0,
    left : 0,
    width : '100%',
    height : '100%',
    title: "Base Window",
    layout:'vertical'
});
 
var receiptDir=Ti.Filesystem.getFile(Ti.Filesystem.externalStorageDirectory,'TempFile');
if (! receiptDir.exists()) {
   receiptDir.createDirectory();
}
var receiptFile = Titanium.Filesystem.getFile(receiptDir.resolve(),'Untitled.rtf');
  
var read = Ti.UI.createButton({
     title : 'Read From File',
});
 
read.addEventListener('click', function() {
     alert(receiptFile.read().text);
});
 
win.add(read);
 
win.open();
</pre></code>
- Substitute the file name "Untitled.rtf" with the file's name that you want to read from SDCard, in your "app.js" file. (Untitled.rtf is here attached)
- Run the app
- Click "Read From File" to read your file, which will show in alert.

<h4>Actual results</h4>
The console shows <code><pre>[INFO] :   I/dalvikvm-heap: Grow heap (frag case) to 10.670MB for 1536080-byte allocation </pre></code> which indicates that the heap memory has raised.


<h4>Extra information</h4>
tiapp.xml
<code><pre>&lt;property name="ti.android.threadstacksize" type="int"&gt;41943040&lt;/property&gt;
&lt;property name="ti.android.httpclient.maxbuffersize" type="int"&gt;41943040&lt;/property&gt;
&lt;tool-api-level&gt;17&lt;/tool-api-level&gt;
        &lt;manifest android:installLocation="preferExternal"&gt;
            &lt;uses-sdk android:minSdkVersion="15"/&gt;
            &lt;supports-screens android:anyDensity="true"
                android:largeScreens="true" android:normalScreens="true" android:smallScreens="true"/&gt;
        &lt;/manifest&gt;
</pre></code>




<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17580_50146/Screen Shot 2014-07-31 at 4.09.35 pm.png">Screen Shot 2014-07-31 at 4.09.35 pm.png</td></td><td>2014-07-31T08:49:16.000+0000</td><td>101058</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17580_50508/Untitled.rtf">Untitled.rtf</td></td><td>2014-08-16T04:48:56.000+0000</td><td>398</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Mauro Parra-Miranda 2014-08-01

   Hello!
   
   Please provide a testcase in the form of app.js with a sample image produced in the same way (size, colors, etc).
   
   Best Regards!</li>
</ol>


<p><a href="/TIMOB/TIMOB-17580.json">JSON Source</a></p>