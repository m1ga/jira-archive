---
title: "[TIMOB-17593] iOS: Labels not layed out correctly on toImage()"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-11-04T03:57:51.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.3.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>TCSupport, labels, regression, rendering, toImage</td></tr>
<tr><th>Reporter</th><td>Tobias</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2014-08-14T07:45:32.000+0000</td></tr>
<tr><th>Updated</th><td>2015-01-16T01:00:51.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem Description </h4>

In 3.3.0.GA all labels disappears when I do toImage() on their container view. This worked perfectly fine in all versions before 3.3.0.GA (try 3.2.3.GA for instance). This toImage()-approach is very useful to build images of the gui instead of having components (such as labels) rendered all the time. It makes the UI much snappier/performant and I use it alot. This is a complete stopper for me.


<h4>Sample Code</h4>
<code><pre>
Titanium.UI.setBackgroundColor('#000');
var view= require('FirstView');
var win1 = Titanium.UI.createWindow({  
    title:'Tab 1',
    backgroundColor:'#fff'
});
win1.add(view());
win1.open();

</pre></code>

<code><pre>

function FirstView() {
 
    var buildView = Ti.UI.createView({
        backgroundColor:'red',
        width:100,
        height:100
    });
 
    buildView.add(Ti.UI.createLabel({
        backgroundColor:'yellow',
        color:'#000000',
        text:'ABC',
    }));
     
    var container = Ti.UI.createView({
        width:100,
        height:100,
        backgroundImage: buildView.toImage()
    });
 
    return container;
}
module.exports = FirstView;

</pre></code>

<h4>Steps to reproduce </h4>

- Create a new Project.
- Copy the "app.js" code to the project "app.js" file.
- Create a new file named "FirstView" in Projects Resource directory.
- Copy the "FirstView.js" code to the project "FirstView.js" file.
- Run the Project.

<h4>Actual results</h4>

OBSERVED PROBLEM
In SDK version 3.2.3.GA the label is shown where in SDK version 3.3.0.GA the label despaired. view.toImage() is not working in New SDK 3.3.0.GA


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-17593_50465/3.2.3.GA.png">3.2.3.GA.png</td></td><td>2014-08-14T07:45:32.000+0000</td><td>20812</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-17593_50466/3.3.0.GA.png">3.3.0.GA.png</td></td><td>2014-08-14T07:45:33.000+0000</td><td>19478</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>stefano di luca 2014-09-19

   Yes I'm experiencing this problem too, toImage() doesn't render labels from SDK 3.3.0, the bug is still present in the new SDK 3.4.0</li>
<li>Carlos Fleck 2014-10-22

   This error also occurs to me, as it occurred from version 3.3.0, and it is only to be fixed in version 3.5 which is scheduled for 19 / Mar / 2015. 
   Would not be possible to place with the release of 3.4.2?</li>
<li>Vishal Duggal 2014-11-03

   Pull pending against master
   <a href="https://github.com/appcelerator/titanium_mobile/pull/6302" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6302</a></li>
<li>Chee Kiat Ng 2014-11-04

   PR merged.</li>
<li>Ewan Harris 2015-01-16

   Verified fix on:
   
   Mac OSX 10.10.1
   Appcelerator Studio, build: 3.4.1.201410281743
   Titanium SDK build:  3.6.0.v20150115142105
   Titanium CLI, build: 3.4.1
   Alloy: 1.5.1
   Xcode 6.1.1
   iPhone 6 Plus (8.1.1), iPad Air 2 (8.2b4)
   
   Using the attached code built to both devices, the labels are laid out correctly each time, added more views and the labels stayed in the correct position.
   
   Closing ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17593.json">JSON Source</a></p>