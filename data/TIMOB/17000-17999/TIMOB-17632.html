---
title: "[TIMOB-17632] Android: takePicture(): Camera preview is not open, unable to take photo"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.3.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>TCSupport, openCamera, takePicture</td></tr>
<tr><th>Reporter</th><td>Mateusz Golewski</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2014-08-27T11:14:33.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:04:07.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem Description </h4>
After I openCamera(), I try to takePicture() and following error appears in console:

<code><pre>
[ERROR] :  TiMedia: (KrollRuntimeThread) [1110,1110] Camera preview is not open, unable to take photo
</pre></code>
But preview is opening and working well..


Hello,
We have tested this issue. Ti.Media.takePicture() only works on the overlay. But when we take the photo it continuously capture the photo on the galaxy s3 real device. It's a valid bug.

<h4>Steps to Reproduce</h4>
1. Create classic project.
2. Paste this file in app.js file.
<code><pre>
var win1 = Titanium.UI.createWindow({
	backgroundColor : '#fff',
	layout : 'vertical'
});

var frmcamera = Ti.UI.createButton({
	backgroundColor : '#ff0000',
	title : 'Open Camera',
	color : '#fff',
	width : Ti.UI.SIZE,
	height : Ti.UI.SIZE,
	top : 10

});

frmcamera.addEventListener('click', function() {
	fireUpTheCamera();

});

win1.add(frmcamera);

var overlay = Ti.UI.createView({
	width : 80,
	height : 80,
	bottom : 20
});

// Create a Button.
var btn = Ti.UI.createButton({
	title : 'Take',
	height : 60,
	width : 60

});

btn.addEventListener('click', function() {
	Ti.Media.takePicture();
});
overlay.add(btn);

function fireUpTheCamera() {
	Titanium.Media.showCamera({

		success : function() {
			console.log('taken');
		},
		saveToPhotoGallery : true,
		autohide : false,
		overlay : overlay,
		mediaTypes : [Ti.Media.MEDIA_TYPE_PHOTO]
	});

}

win1.open();

</pre></code>
3. Run it in device attached to Android Monitor

<h3>Comments</h3>

<ol>
<li>Mateusz Golewski 2014-08-27

   Regarding to the source: 
   
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/media/src/java/ti/modules/titanium/media/MediaModule.java#L420" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/media/src/java/ti/modules/titanium/media/MediaModule.java#L420</a>
   
   and
   
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/media/src/java/ti/modules/titanium/media/MediaModule.java#L293" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/media/src/java/ti/modules/titanium/media/MediaModule.java#L293</a>
   
   takePicture() works only if overlay is set.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17632.json">JSON Source</a></p>