---
title: "[TIMOB-17680] Android: Add support for NDK 64bit"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2015-09-21T06:43:18.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.4.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>qe-3.4.0</td></tr>
<tr><th>Reporter</th><td>Priya Agarwal</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2014-09-11T10:43:25.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-31T22:42:23.000+0000</td></tr>
</table>

<h3>Description</h3>

Getting error on installing the app if app contains module packaged using option output Location as “Mobile App Project” 


*Steps to reproduce:*
1. Create Android module.
2. Create Classic Project. 
3. Package android module using option “Mobile App Project” (Select the same project from drop down created in Step 2)
4. Install App on device.


{color:green}*Expected Result:*{color}
App must get installed successfully.

{color:red}*Actual Result:*{color}
App is not getting installed on device.
Getting the logs attached.

Note: Working fine with 3.3.0GA environment with ndk:android-ndk-r9d
          Also working fine with 3.4.0 studio using ndk:android-ndk-r9d

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17680_51223/Screen_Shot_2014-09-12_at_2.34.54_PM.png">Screen_Shot_2014-09-12_at_2.34.54_PM.png</td></td><td>2014-09-12T21:38:37.000+0000</td><td>50926</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17680_51144/studioLogs.txt">studioLogs.txt</td></td><td>2014-09-11T10:43:25.000+0000</td><td>47279</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2014-09-11

   So a few notes/questions:
   
   <h4>If you install this module to the global stash and try the same, it works?</h4>
   <h4>In the log file, there are two errors:</h4>
   <h4>'androidDir must be a string', duplicate of APPTS-4697</h4>
   <h4>dalvikvm: dlopen("/data/app-lib/gl.classic.com-1/libk.j.h.so") failed: dlopen failed: cannot locate symbol "__cxa_end_cleanup" referenced by "libk.j.h.so"...</h4>
   <h4>For the second one, if you review the log file, it looks like the application is attempting to start but doesn't. There is a message about "App successfully installed". So I question if the app actually failed to install or rather failed to start.</h4>
   <h4>Did this fail with r10? I see we tested with 9d, and 10b, but there was a version 10 in between.</h4>
   
   [~emerriman] can you assist with answering these questions?</li>
<li>Ping Wang 2014-09-11

   Which SDK do you use to compile the module? Which SDK do you run the app which contains this module?
   
   Due to the JNI change in [PR#5973](<a href="https://github.com/appcelerator/titanium_mobile/pull/5973)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5973)</a>, if the module is compiled against 3.4.0, then the app which contains this module won't work with SDK < 3.4.0.</li>
<li>Priya Agarwal 2014-09-12

   See the below updates - 
   1) Install this module to the global stash and its working fine.
   2) Application install successfully on device but fail to launch the app.
   3) Tested with NDK version r10 also. Observed the same result as we got using NDK version r10b </li>
<li>Ingo Muschenetz 2014-09-12

   Can you try to replicate? I honestly don't get this bug.</li>
<li>Ping Wang 2014-09-12

   Cannot reproduce the issue.
   My steps to reproduce:
   1. Create a module using titanium studio. Only target on Android platform.
   2. Create a classic mobile app using titanium studio. Only target on Android platform.
   3. Try to package the module but CANNOT find the option “Mobile App Project”.</li>
<li>Lokesh Choudhary 2014-09-12

   [~pwang] 
   !Screen_Shot_2014-09-12_at_2.34.54_PM.png!</li>
<li>Hieu Pham 2014-09-12

   1. Create a module using titanium studio. Only target on Android platform.
   2. Create a classic mobile app using titanium studio. Only target on Android platform.
   3. Package module with mobile app using "Mobile App Project"
   
   Works fine use ndk-r10b.
   
   Im unable to reproduce this.</li>
<li>Lokesh Choudhary 2014-09-13

   I tried to repro this issue but could not. Tried several times but built fine every time without any errors.
   
   Environment:
   Appc Studio : 3.4.0.201409112242
   Ti SDK :  3.4.0.v20140912120914
   Mac OSX : 10.9.4
   Alloy : 1.5.0-rc
   CLI - 3.4.0-rc2
   Code Processor: 1.1.1
   Android NDK : 10b</li>
<li>Ingo Muschenetz 2014-09-13

   Thank you all for the investigation. Marking this as cannot reproduce. If you are still able to do so, please let us know the difference in steps between what we tried and what you tried.</li>
<li>Lokesh Choudhary 2014-09-17

    I am able to reproduce this issue today. Did not do anything different though as far as steps are concerned.
    
    Reopening.
    
    Environment:
    Appc Studio : 3.4.0.201409161950
    Ti SDK :  3.4.0.v20140916181713 
    Mac OSX : 10.9.4
    Alloy : 1.5.0-rc2
    CLI - 3.4.0-rc4
    Code Processor: 1.1.1
    Nexus 5 - android 4.4.4
    Android NDK : 10b</li>
<li>Ingo Muschenetz 2014-09-18

    Waiting on more information from [~hpham].</li>
<li>Hieu Pham 2014-09-18

    The current architecture does not support NDK 64bit, which is using a different default GCC, as well as having a new set of ABIs. </li>
<li>Ingo Muschenetz 2014-09-19

    Moving this to 3.5.0, as that's approximately when we want to move to 64-bit across the board.</li>
<li>Nicolas Zozol 2014-09-25

    I can't see the problem with NDK. By creating a new module, Titanium Studio gives us some compiled .so files in android/libs/armxx directories. Just adding this module to my project makes it fails. No need of NDK there.</li>
<li>Ingo Muschenetz 2014-09-25

    [~nicorama] What version of the NDK do you have installed? .so files are files generated by the NDK:
    
    <a href="http://stackoverflow.com/questions/5669220/ndk-how-to-use-a-generated-so-library-in-another-project" rel="nofollow" target="_blank">http://stackoverflow.com/questions/5669220/ndk-how-to-use-a-generated-so-library-in-another-project</a></li>
<li>Lokesh Choudhary 2015-09-17

    [~cng], I am not seeing this issue with the latest NDK r10e & with the current live stack.</li>
<li>Lee Morris 2017-03-31

    Closing ticket as "Cannot Reproduce", if you encounter any further problems please file a new ticket. </li>
</ol>


<p><a href="/TIMOB/TIMOB-17680.json">JSON Source</a></p>