---
title: "[TIMOB-17723] iOS8: Provide support for the WKWebView as Titanium's WebView in iOS"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-12-25T13:37:19.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Backlog</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>TCSupport, hyperloop-examples, ios8</td></tr>
<tr><th>Reporter</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2014-09-18T06:59:47.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:49:36.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem Description</h4>
There is a new WebView for iOS 8 that it's a lot faster than the previous/classic WebView. It might be useful to provide a better experience to the end users. 

<h4>Extra info</h4>
<a href="https://developer.apple.com/library/ios/documentation/WebKit/Reference/WKWebView_Ref/index.html" rel="nofollow" target="_blank">https://developer.apple.com/library/ios/documentation/WebKit/Reference/WKWebView_Ref/index.html</a>

<h4>Benchmarks</h4>
<a href="http://developer.telerik.com/featured/why-ios-8s-wkwebview-is-a-big-deal-for-hybrid-development/" rel="nofollow" target="_blank">http://developer.telerik.com/featured/why-ios-8s-wkwebview-is-a-big-deal-for-hybrid-development/</a>

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2014-09-18

   Please note some outstanding bugs with the current implementation. Are we comfortable with those?
   
   <a href="http://www.sencha.com/blog/apple-shows-love-for-html5-with-ios-8" rel="nofollow" target="_blank">http://www.sencha.com/blog/apple-shows-love-for-html5-with-ios-8</a></li>
<li>Fokke Zandbergen 2014-09-19

   As long as loading a local HTML file doesn't work we shouldn't use it.</li>
<li>Ingo Muschenetz 2014-09-19

   Here is the OpenRadar bug for loading local files:
   
   <a href="http://www.openradar.me/radar?id=5839348817723392" rel="nofollow" target="_blank">http://www.openradar.me/radar?id=5839348817723392</a>
   
   It's unclear if that's just a temporary problem or a security stance.</li>
<li>Andrew McElroy 2015-02-17

   It looks like local html can work just fine: <a href="http://atmarkplant.com/ios-wkwebview/" rel="nofollow" target="_blank">http://atmarkplant.com/ios-wkwebview/</a>
   
   I have not ran the code in the above mentioned article.
   I'd suggest making this a separate module for now.
   This is useful for hybrid developers now (even if it only loads remote html), but like Fokke said, I wouldn't replace the implementation of Ti.UI.createWebView just yet.</li>
<li>Ygor Lemos 2015-05-18

   There is a workaround to this issue which is demonstrable in the following sample project:
   <a href="https://github.com/shazron/WKWebViewFIleUrlTest" rel="nofollow" target="_blank">https://github.com/shazron/WKWebViewFIleUrlTest</a>
   
   The workaround is to copy the web content to a temporary directory inside the app sandbox and to give the WKWebView a URL to it there.</li>
<li>Ygor Lemos 2015-05-18

   Is this planned for 4.X ?</li>
<li>Ingo Muschenetz 2015-05-18

   We would consider it if the workarounds are acceptable. Thoughts from others?</li>
<li>Ygor Lemos 2015-05-18

   I'm checking out how they did it on a plugin for Cordova... It seems they had to spawn a local web server to serve the local html files... it seems pretty unacceptable to me in terms of performance.
   
   All radar files on this bug are still open since iOS 8 release. They already fixed it on WebKit but Apple haven't replicated it to iOS yet... perhaps on iOS 9 ?!
   
   <a href="http://openradar.appspot.com/20160687" rel="nofollow" target="_blank">http://openradar.appspot.com/20160687</a>
   <a href="http://www.openradar.me/18039024" rel="nofollow" target="_blank">http://www.openradar.me/18039024</a></li>
<li>Travis Crist 2015-08-28

   Was support for WKWebview ever included in a TiSDK? 
   
   There is an issue with JQuery in iOS 9 <a href="https://github.com/jquery/jquery-mobile/issues/8254" rel="nofollow" target="_blank">https://github.com/jquery/jquery-mobile/issues/8254</a> which appears to be resolved by using the WKWebView. 
   
   Thanks,  
   Travis</li>
<li>Chee Kiat Ng 2015-10-26

    Not completely fixed. WKWebView still requires a few improvements and features to deliver what Ti Webview can do. Links here for further reference when we revisit this ticket:
    <a href="https://github.com/ShingoFukuyama/WKWebViewTips" rel="nofollow" target="_blank">https://github.com/ShingoFukuyama/WKWebViewTips</a>
    <a href="http://stackoverflow.com/questions/26501172/launching-phone-email-map-links-in-wkwebview" rel="nofollow" target="_blank">http://stackoverflow.com/questions/26501172/launching-phone-email-map-links-in-wkwebview</a></li>
<li>Fokke Zandbergen 2015-11-23

    Would it be an idea to implement Crosswalk instead?
    
    <a href="https://crosswalk-project.org" rel="nofollow" target="_blank">https://crosswalk-project.org</a></li>
<li>Andrew McElroy 2015-11-23

    Crosswalk is an interesting idea.
    While I like the capabilities it brings to the table. I am not a big fan of the additional bloat it would bring.
    
    <a href="https://crosswalk-project.org/documentation/about/faq.html" rel="nofollow" target="_blank">https://crosswalk-project.org/documentation/about/faq.html</a>
    
    bq. How big is the Crosswalk Project runtime, and how will it affect my application's size?
    
    {quote} To give a rough idea, the HTML/JS/CSS for one of the project's sample applications takes up 24Kb of disk space.  Once this application is packaged with its own Crosswalk 10 (x86 Android) runtime, the apk file size is ~20Mb. Installed, the application takes ~58Mb of disk space.
    {quote}
    
    This could fly as a ti.plugin that could be optionally included, but I wouldn't want this as a default.</li>
<li>Fokke Zandbergen 2015-11-23

    [~sophrinix] agree</li>
<li>Be Rushton 2016-04-26

    Any progress on this issue?  I think iOS9 supports loading from a file:/// url.  Cordova has implemented it last year: <a href="https://issues.apache.org/jira/browse/CB-9567" rel="nofollow" target="_blank">https://issues.apache.org/jira/browse/CB-9567</a>
    
    Could we at least have an option to use it?  A lot of us don't need the few features that aren't properly supported.</li>
<li>Jason Kneen 2016-08-20

    Example of iOS WKWebView implementation in Alloy using Hyperloop and Ti SDK 5.4 added to the [Hyperloop Examples](<a href="https://github.com/appcelerator/hyperloop-examples)" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop-examples)</a> repo</li>
<li>Be Rushton 2016-08-22

    Thanks for that but Hyperloop is no good to most developers since we don't have access to it.</li>
<li>Chee Kiat Ng 2016-08-22

    We are not resolving the ticket as fixed with Hyperloop. This ticket is still in our backlog and we will address this when resources and time permits us. 
    We want to maintain parity cross platform as much as possible for Titanium SDK, and because I think there's quite a few API from UIWebView that just can't be implemented in WKWebView, and vice versa (probably why Apple still supports both instead of replacing one with another), we may have to do a platform-exclusive implementation. So we will try our best to do this after working on other critical tickets. 
    
    PRs are very welcomed for Ti.UI.iOS.WKWebView :)</li>
<li>Be Rushton 2016-08-22

    Yep let's be honest the ticket has been up for 2 years now, this is never going to be added by Appc. Looks like if we want it, we have to build it ourselves.</li>
<li>Hans Knöchel 2016-08-22

    [~bearus] You can see the obvious reasons why it has not been implemented, yet. Summary for you:
    - Parity with UIWebView
    - Parity with Android & Windows
    - Minimum version iOS 8 (+ fallback behavior for iOS < 8)
    
    Replacing a whole API is not just replacing some classes (unfortunately \:-).</li>
<li>Rene Pot 2016-09-03

    But WKWebView is now encouraged for a couple years and this should be important to implement too. It is a pretty basic native functionality. Fallback pre-iOS 8 shouldn't be hard either, it is already there. 
    
    Loop modules just did an implementation: <a href="http://loopmodules.com/downloads/ti-webview/" rel="nofollow" target="_blank">http://loopmodules.com/downloads/ti-webview/</a></li>
<li>Jason Kneen 2016-09-05

    </li>
<li>Cameron 2016-10-08

    I will jump on the pile and say I have been waiting desperately for WKWebview as well.  
    
    For us hybrid app developers it just seems like a no-bainer.  Theres no reason it need to have any  Android parity or replace the current web view, just sit along side web view as Apple has intended it for now.  Ti.UI.iOS.WKWebView as has been mentioned.   
    
    Appcelerator by its very design/existence is for us ppl that don't exactly know or understand native iOS development so we are here, so please give us the tools to make our apps really powerful and hide the fact that they are not exactly native apps.  WKWebview with its speed lets us do this
    
    Humble request of course</li>
<li>Hans Knöchel 2016-11-07

    Spent some hours on this and made a Proof Of Concept for constructing a <code>Ti.UI.iOS.WebView</code>: <a href="https://github.com/hansemannn/titanium_mobile/commit/961b259d5278190993bebc8645d6a66e1e8817f5" rel="nofollow" target="_blank">https://github.com/hansemannn/titanium_mobile/commit/961b259d5278190993bebc8645d6a66e1e8817f5</a>
    
    It basically supports local and remote URL's, blob data and HTML strings, it has basic support for all load-specific events.
    
    *app.js*:
    <code><pre>
    var win = Ti.UI.createWindow({
        backgroundColor: "#fff",
    	title: "WKWebView"
    });
    
    var nav = Ti.UI.iOS.createNavigationWindow({
    	window: win
    });
     
    var webView = Ti.UI.iOS.createWebView({
        url: "remote_test.html"
    //  url: "<a href="https://appcelerator.com" rel="nofollow" target="_blank">https://appcelerator.com</a>"
    });
    
    webView.addEventListener("message", function(e) {
        // Received event from HTML file
        // Call using "window.webkit.messageHandlers.Ti.postMessage({foo: 'bar'},'*');"
        Ti.API.info(e);
    })
     
    webView.addEventListener("beforeload", function(e) {
    	Ti.API.info("Will load URL: " + e.url);
    });
     
    webView.addEventListener("loadprogress", function(e) {
    	Ti.API.info("Did receive first content of URL: " + e.url);
    });
     
    webView.addEventListener("load", function(e) {
    	Ti.API.info("Did load URL: " + e.url);
    });
     
    var btn = Ti.UI.createButton({
       title: 'evalJS'
    });
    
    btn.addEventListener('click', function() {
        // Asynchronous to unblock main-thread
        webView.evalJS('document.title', function(e) {
            alert(e.result);
        });
    });
    
    win.setRightNavButton(btn);
    win.add(webView);
    nav.open();
    </pre></code>
    
    *remote_test.html* (thanks to [~kosso]!)
    <code><pre>
    &lt;html&gt;
    &lt;head&gt;
    	&lt;meta name="viewport" content="width=device-width,user-scalable=no,shrink-to-fit=no,minimum-scale=1,maximum-scale=1"&gt;
    	&lt;title&gt;TEST REMOTE POSTMESSAGE&lt;/title&gt;
    
    	&lt;style type="text/css"&gt;
    		body{
    			font-size: 10px;
    			background: #ff9900;
    			margin: 10px;
    			text-align: center;
    		}
    		button{
    			font-size: 16px;
    		}
    		#agent, #count, #tester{
    			color:white;
    			font-size: 11px;
    		}
    	&lt;/style&gt;
    	&lt;script&gt; 
    		
    		var ua;
    		var count = 0;
    
    		function init(){
    
    			var el = document.getElementById('agent');
    			ua = navigator.userAgent;
    			el.innerHTML = ua;
    			
    		}
    
    		function test(){
    			try{
    	            // Using custom Titanium module which creates a JavascriptInterface object called 'Android' when using that platform
    	            count++;
    	            var cel = document.getElementById('count');
    				cel.innerHTML = count;
    
    	            if( ua.indexOf('MY_APP_android') &gt; -1 ){ // See README.md 
    	            	// Android 
    		            Android.postMessage(JSON.stringify({foo: 'BAR_'+count}), '*'); 
    				} else {
    		            // iOS
    		            window.webkit.messageHandlers.Ti.postMessage({foo: 'BAR_'+count},'*');					
    				}
    
    	        } catch(e){
    	            console.log('postMessage ERROR:');  
    	            console.log(e);
    	        }
    		}
    
    		function rel(){	
    			document.location.reload(true);
    		}
    
    	&lt;/script&gt;
    
    &lt;/head&gt;
    
    &lt;body onload="init()"&gt;
    	&lt;br&gt;&lt;br&gt;
    	&lt;h4&gt;remote html testing&lt;/h4&gt;
    
    	&lt;button onclick="test()"&gt; postMessage({foo: 'BAR'}) &lt;/button&gt;
    	&lt;br&gt;
    	Click this and see the message arrive in your app console after subscriping to the 'messageFromWebview' event.
    
    	&lt;br&gt;&lt;br&gt;
    
    	&lt;button onclick="rel()"&gt; reload page &lt;/button&gt; 
    
    	&lt;br&gt;&lt;hr&gt;&lt;br&gt;
    	&lt;span id="agent"&gt;agent&lt;/span&gt;
    	&lt;br&gt;&lt;hr&gt;&lt;br&gt;
    	&lt;span id="count"&gt;count&lt;/span&gt;
    	&lt;br&gt;&lt;hr&gt;
    
    	&lt;br&gt;
    	&lt;hr&gt;
    
    &lt;/body&gt;
    &lt;/html&gt;
    </pre></code>
    
    So if anyone wants to use or improve this, go ahead. But we won't give official support for this for now, so please do not comment on the usage in this ticket. It's more a functional template for those who really need to use this instead of the <code>Ti.UI.WebView</code>.</li>
<li>kosso 2016-11-16

    Nice one Hans! 
    
    Just found this after spending all day looking at this [<a href="https://github.com/kaga/Titanium-Module-WKWebview" rel="nofollow" target="_blank">https://github.com/kaga/Titanium-Module-WKWebview</a>] module. 
    
    It would be great to add the ability to use <code>postMessage</code> to communicate to an app from remote HTML.  (evalJS is local only)
    
    I have also made some progress in adding the remote postMessage ability to an Android webView too, using an android module which I had a go at making.  
    </li>
<li>kosso 2016-11-18

    Just a follow-up to this. I've tried (badly) to create PoC iOS and Android modules to cater for a (kind of) <code>postMessage</code> ability from remote HTML.  I've tried to use a lot of Hans' WKWebView code here to try and get things working. 
    
    The modules *do* work (kinda) but could do with plenty of improvement. (Especially since I do not consider myself a *proper* Objective-C or Java developer ;) )
    
    <a href="https://github.com/kosso/titanium-postmessage-webview" rel="nofollow" target="_blank">https://github.com/kosso/titanium-postmessage-webview</a>  
    
    </li>
<li>Leonardo Farias 2016-12-13

    I think to do a real replacement for the current webview it would be important to do the the Ti.App.fireEvent support that is currently supported for communication between titanium and webview</li>
<li>Hans Knöchel 2016-12-24

    Hey guys, quick update on my above PoC:
    * It now supports webview-app-communication (currently only from the webView to the app, not the other way around - PR's welcome)
    * Support for common navigation flows (<code>goBack</code>, <code>goForward</code>, <code>reload</code>, <code>loading</code>, <code>canGoBack</code>, <code>canGoForward</code>)
    * JS evaluation e.g. 
    <code><pre>
    evalJS('document.title', function(e) {
        Ti.API.info('Page title: ' + e.result);
    });
    </pre></code>
    * New <code>progress</code> event for real-team progress
    * Other supported API's: Picture-inPicture, 3D-Touch, custom user agent, airplay playback, inline playback, certificates, incremental rendering
    
    Happy christmas!</li>
<li>Hans Knöchel 2016-12-25

    Resolving this ticket as fixed. The module now covers all use-cases we know from the <code>Ti.UI.WebView</code> and many more (see above). For event handling, use the <code>postMessage</code> method for context-based communication from the webview -> app and <code>evalJS</code> for app -> webview. Parity with <code>Ti.App</code> events are limited by the native API and won't be supported in this API. Just like the <code>Ti.SafariDialog</code>, this module will stay independent to achieve a more flexible development process apart from our SDK releases. Please feel free to contribute to the project! </li>
<li>Eric Merriman  2018-08-06

    Cleaning up older fixed issues. If this issue should not have been closed as fixed, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17723.json">JSON Source</a></p>