---
title: "[TIMOB-17751] iOS8: unable to set object property inside object"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2014-12-04T16:54:09.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.3.0, Release 3.4.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>TCSupport, alloy, bug, ios, ipad, object, property</td></tr>
<tr><th>Reporter</th><td>Ricardo Pereira</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2014-09-17T09:19:50.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-30T20:56:42.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem Description</h4>
If I have an object (status:{}) inside an object (Ti.UI.View), and I want to edit/add a new property to 'status', in android works perfectly, but on iOS it doesn't change the property, defined on 'Ti.UI.View' creation.

<h4>Steps to reproduce</h4>
1. Create a new mobile project (Classic Titanium)
2. Paste this sample into app.js:
<code><pre>
var win = Titanium.UI.createWindow({  
    backgroundColor:'#000',
    layout:'vertical'
});
 
var APPNAME = {
    "UI":{
        "Buttons":function(props) {
  
            var button = Ti.UI.createView({
                top:100,
                height:200,
                status:{
                    selected:false,
                    inactive:false
                },
                backgroundColor:"white",
                select:function(sttz) {
      
                    if(sttz) {
                         
                        this.status["selected"] = true;
      
                        this.backgroundColor = "red";
                    }
                    else {
                         
                        this.status["selected"] = false;
      
                        this.backgroundColor = "white";
                    }
      
                    console.log("selected status: "+this.status.selected);
      
                }
            });
             
            button.addEventListener("click",function() {
  
                if(!this.status.selected) {
                    this.select(true);
                }
                else {
                    this.select(false);
                }
              
            });
  
            return button;
        }
    }
};
 
var exemple_btn = APPNAME.UI.Buttons();
win.add(exemple_btn);
win.open();
</pre></code>
3. Run it in device. 
4. Click on the White box. It should turn red. Click in the red box. It should turn white. Repeat. 

<h4>Expected Results</h4>
When you click in the box, it should go from white to red and viceversa. 

<h4>Actual Results</h4>
It's working fine in Android, failing in iOS. 

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-17751_51331/exemple_ipad.zip">exemple_ipad.zip</td></td><td>2014-09-17T09:19:50.000+0000</td><td>3850464</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ricardo Pereira 2014-09-24

   I noticed that there has been activity around this error, as no one commented yet, is there any alternative that I should try?</li>
<li>Ricardo Pereira 2014-12-02

   Hi, I'm just writing this comment to know if there is someone working on this issue, I've 2 complex apps that it's supposed to run on iPad, and I'm kinda stuck</li>
<li>Tim Poulsen 2014-12-03

   Our general recommendation has always been to not modify the proxy objects (the objects you get back from a Ti.UI.create* method). See the [best practices guide](<a href="http://docs.appcelerator.com/titanium/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/latest/#</a>!/guide/Coding_Best_Practices-section-30082362_CodingBestPractices-Don%27tExtendTitaniumPrototypes) or perhaps the [article I wrote for TiDev.io](<a href="http://www.tidev.io/2014/03/27/memory-management/)" rel="nofollow" target="_blank">http://www.tidev.io/2014/03/27/memory-management/)</a> for background information. In essence, Titanium proxies are not true JavaScript objects and should be treated as immutable (in terms of adding or attempting to override properties and methods). Under the covers, our Android and iOS implementations are different enough, that this works to some extent on Android while it is more likely to cause problems on iOS. 
   
   From what I see of your app's needs, it seems you could use a separate (true JavaScript) object to maintain state information for your UI components. Then, applyProperties() as needed to update their UI state.</li>
<li>Vishal Duggal 2014-12-04

   Try this
   <code><pre>                
   select:function(sttz) {
       var status = this.status;
       if(sttz) {
           status.selected = true
           this.backgroundColor = "red";
       }
       else {
           status.selected = false;
           this.backgroundColor = "white";
       }
       //IOS proxies are not true JS Objects and any undefined properties need to be 
       //explicitly reset after modification
       this.status = status;
       console.log("selected status: "+this.status.selected);
   }
   </pre></code></li>
<li>Vishal Duggal 2014-12-04

   Workaround in comments</li>
<li>Ricardo Pereira 2014-12-04

   That works, but I have some objects that have many levels of objects and it will be difficult to applicate that to everything.
   
   So instead of pass the properties inside a function and attribute them that way, a create a true javascript object, and work on it.
   
   exemple:
   <code><pre>
   var btn = (props) {
   
      var obj {
         "status":{
            "selected":true,
            "inactive":false
         },
         "element":Ti.UI.createView({
         })
      };
   
      obj.select = function(status) {
         ...
      };
   
      return obj.element;
   };
   
   var test = new btn({
      "title":"test"
   });
   
   test.select(true);
   
   </pre></code></li>
<li>Lee Morris 2017-03-30

   Closing ticket as "Won't Fix". There has been no update for a while. If there is any problem, please open a new ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17751.json">JSON Source</a></p>