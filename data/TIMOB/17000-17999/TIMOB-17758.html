---
title: "[TIMOB-17758] Unhandled exception when using the CLI to build for iOS"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-10-09T15:32:17.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ricardo Alcocer</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2014-09-24T22:41:49.000+0000</td></tr>
<tr><th>Updated</th><td>2015-01-16T21:45:59.000+0000</td></tr>
</table>

<h3>Description</h3>

If an app doesn't have iphone as a valid deployment target in tiapp.xml and try to build for iOS with  <code><pre>ti build -p ios</pre></code> you'll get an error like this:

[ERROR] Failed to run command "build"
[ERROR] TypeError: Cannot read property 'cyan' of undefined
    at iOSBuilder.loginfo (/Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/iphone/cli/commands/_build.js:1601:73)
    at /Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/node_modules/node-appc/node_modules/async/lib/async.js:610:21
    at /Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/node_modules/node-appc/node_modules/async/lib/async.js:249:17
    at iterate (/Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/node_modules/node-appc/node_modules/async/lib/async.js:149:13)
    at /Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/node_modules/node-appc/node_modules/async/lib/async.js:160:25
    at /Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/node_modules/node-appc/node_modules/async/lib/async.js:251:21
    at /Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/node_modules/node-appc/node_modules/async/lib/async.js:615:34
    at iOSBuilder.initialize (/Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/iphone/cli/commands/_build.js:1578:2)
    at /Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/node_modules/node-appc/node_modules/async/lib/async.js:610:21
    at /Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/node_modules/node-appc/node_modules/async/lib/async.js:249:17
---------------------------------------------
    at exports.execFile (child_process.js:691:9)
    at exports.exec (child_process.js:578:18)
    at /Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/node_modules/node-appc/lib/environ.js:251:3
    at /Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/node_modules/node-appc/node_modules/async/lib/async.js:254:17
    at /Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/node_modules/node-appc/node_modules/async/lib/async.js:157:25
    at /Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/node_modules/node-appc/node_modules/async/lib/async.js:251:21
    at /Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/node_modules/node-appc/node_modules/async/lib/async.js:615:34
    at /Users/ralcocer/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.v20140916181713/node_modules/node-appc/lib/environ.js:218:7

<h3>Comments</h3>

<ol>
<li>Chris Barber 2014-10-08

   Master: <a href="https://github.com/appcelerator/titanium_mobile/pull/6208" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6208</a>
   
   To test,
   1) Create an app
   2) Edit the tiapp.xml and remove both the "ipad" and "iphone" deployment targets
   3) Build the app for any iOS Simulator</li>
<li>Tim Poulsen 2014-10-09

   PR merged</li>
<li>Ewan Harris 2015-01-16

   Verified fix on:
   
   Mac OSX 10.10.1
   Appcelerator Studio, build: 3.4.1.201410281743
   Titanium SDK build:   3.6.0.v20150116070927
   Titanium CLI, build: 3.4.1
   Alloy: 1.5.1
   Xcode 6.1.1
   iPhone Sim (8.1)
   
   Followed the instructions above, app built to simulator and ran with no problems.
   
   Closing ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17758.json">JSON Source</a></p>