---
title: "[TIMOB-17844] Dashboard: Windows Hybrid average session length is not shown for device"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2017-12-18T15:04:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2014-10-10T21:33:56.000+0000</td></tr>
<tr><th>Updated</th><td>2017-12-18T15:04:46.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

The average session length is not shown for Windows Hybrid devices in both pre-prod and production, in pre-prod it is shown that there are six active sessions despite the session being closed as shown in the attached screenshot. 

This is only seen if the app is built to a device, if built to emulator then the average session can be seen.

<h4>Steps to reproduce</h4>

1. Build an app to a Windows Phone device
2. Open and close the app a few times

<h4>Actual Results</h4>
Average session length is not shown and it is shown as having a number of sessions open

<h4>Expected Results</h4>
The average sessions length should be shown and there should be no active sessions.

*Notes*
The ti.end is being sent by the device as verified by checking the payload using staging.

It is only the average session length that is not being shown, the installs and sessions are correct.

<h3>Comments</h3>

<ol>
<li>Nam Le 2014-10-13

   Here is one of the apps that had incomplete sessions:
   <code><pre>
   nle$  curl "<a href="http://pem-next-pre-production.appc-enterprise-aws.com:8080/rest-api/rest/metric/oid/100000013/range/1410652800000/1413244799999/granularity/day/stats/sessions?guid=058b8c7e-7e65-4411-8974-b528acbea96f&jsonh=true" rel="nofollow" target="_blank">http://pem-next-pre-production.appc-enterprise-aws.com:8080/rest-api/rest/metric/oid/100000013/range/1410652800000/1413244799999/granularity/day/stats/sessions?guid=058b8c7e-7e65-4411-8974-b528acbea96f&jsonh=true</a>" -H "X-Auth-Token:782a36cd-9561-4d2c-a0f7-d1557cdf2503" | json
     % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                    Dload  Upload   Total   Spent    Left  Speed
   100   223    0   223    0     0   1919      0 --:--:-- --:--:-- --:--:--  1922
   [
     {
       "stats": {
         "sessions": {
           "windows": {
             "s": 7,
             "t": 6,
             "n": 1,
             "l": 16499
           }
         },
         "last": {
           "install": {
             "windows": 1412876578402
           },
           "session": {
             "windows": 1412876610549
           }
         }
       },
       "timestamp_str": "2014-10-09-00-00",
       "timestamp": 1412812800000,
       "modified": 0
     }
   ]
   </pre></code>
   
   [~rramaswamy] Can you investigate if you received the session end events as the ticket indicates? If so it could be a processing issue on the PEM side</li>
<li>Isaac Whitfield 2014-10-13

   [~nle] [~eharris] sure, I'll look after .Next. The fact that it's platform specific usually means it's not PEM though :)
   
   For the future; I put in an endpoint for grabbing the raw events in PEM for an aguid via the API:
   
   <a href="http://pem-next-pre-production.appc-enterprise-aws.com:8080/dashboard/docs/#" rel="nofollow" target="_blank">http://pem-next-pre-production.appc-enterprise-aws.com:8080/dashboard/docs/#</a>!/event/getEventsByField_get_1
   
   field would be "aguid" and value would obviously be the app guid.
   
   </li>
<li>Isaac Whitfield 2014-10-13

   [~eharris] do you have the payloads from staging? Perhaps the session has a new sid every time, which would cause this behaviour.</li>
<li>Isaac Whitfield 2014-10-13

   Never mind, I found it in the other ticket. Sids are changing in end events. This is correct behaviour for PEM, because the client is not expiring the same session. [~nle] I believe this should become a TIMOB ticket.
   
   No sid in those events has another event associated with it, so in reality sessions do not exist. 
   
   <code><pre>
   {
     '5CF842B7-FFD9-4E50-8A96-92CDFDF8F57B': [ 'ti.end' ],
     'F0C4E4FD-9230-4DB5-9C51-6152A2FB0056': [ 'ti.start' ],
     '24BF8F49-65F8-404F-A371-0F54EF5F7D93': [ 'ti.end' ],
     'FD7A4B0A-E57E-443E-A2D8-3DE6A6063760': [ 'ti.start' ],
     'CAFB78DB-ACE3-4127-BCE6-9620AFD2B312': [ 'ti.end' ],
     '5E69C6A0-9617-4EEE-B102-83C21997F6B0': [ 'ti.start' ],
     '5400378F-9390-46DE-B09C-6270C4973B0E': [ 'ti.end' ],
     '58A9B0B4-259E-4E94-933D-618D7928D82F': [ 'ti.start' ],
     'C914BE6B-9C4A-4631-845A-C99B4A96C490': [ 'ti.end' ],
     '51C490DA-BC0A-44E5-BBCA-AFBED2F6F353': [ 'ti.start' ],
     '93254C55-E911-4BDF-B6F3-4FD985C132C5': [ 'ti.enroll' ]
   }
   </pre></code></li>
<li>Isaac Whitfield 2014-10-13

   Moving to TIMOB as the client side is not maintaining a session id correctly. A session id should be the same between both enroll/start and end. </li>
<li>Ewan Harris 2017-12-18

   Windows Hybrid support went with Mobileweb, so closing</li>
</ol>


<p><a href="/TIMOB/TIMOB-17844.json">JSON Source</a></p>