---
title: "[TIMOB-17867] iOS: NSLog Fails on iOS simulators"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2020-01-30T09:23:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ingo Muschenetz</td></tr>
<tr><th>Assignee</th><td>Muhammad Dadu</td></tr>
<tr><th>Created</th><td>2014-10-15T17:37:20.000+0000</td></tr>
<tr><th>Updated</th><td>2020-01-31T10:45:14.000+0000</td></tr>
</table>

<h3>Description</h3>

After the recent updates to support Xcode 6, NSLog no longer works with ios-sim. The output of logging information is crucial for projects like tiO2 which require log output to see the results of testing.

This used to work in iOS 7, but we removed some functionality in this commit (<a href="https://github.com/appcelerator/ios-sim/commit/1c01fceb33428259308321989704bd1c790c2cca)" rel="nofollow" target="_blank">https://github.com/appcelerator/ios-sim/commit/1c01fceb33428259308321989704bd1c790c2cca)</a> because it was causing CPU spikes in iOS 8. Removing this (readInBackgroundAndNotify) fixed the CPU spikes, but it also removed the NSLog functionality on iOS 7. It never appeared to work on iOS 8 simulators.

We need to reproduce the CPU spikes and logging failures, and then see what code is required to make NSLog work again.

This application can help with testing the functionality: <a href="https://github.com/appcelerator/ioslib/tree/master/test/TestApp" rel="nofollow" target="_blank">https://github.com/appcelerator/ioslib/tree/master/test/TestApp</a>

<h3>Comments</h3>

<ol>
<li>Chris Barber 2014-10-15

   To verify and fix this issue, you first must be able to reproduce the problem. You need Xcode 6, a native iOS app that does an NSLog(), and a simulator's udid.
   
   Run <code>ti info -t ios</code> to find iOS Simulator udids. You will want an iOS 8 simulator. I recommend an iPhone 6 simulator.
   
   Next, build the sample app from <a href="https://github.com/appcelerator/ioslib/tree/master/test/TestApp:" rel="nofollow" target="_blank">https://github.com/appcelerator/ioslib/tree/master/test/TestApp:</a>
   
   <code><pre>
   git clone <a href="https://github.com/appcelerator/ioslib.git" rel="nofollow" target="_blank">https://github.com/appcelerator/ioslib.git</a>
   cd ioslib/test/TestApp
   xcodebuild clean build -configuration Debug -sdk iphonesimulator8.0 VALID_ARCHS="i386" ARCHS="i386" GCC_PREPROCESSOR_DEFINITIONS="TEST_BASIC_LOGGING"
   ../../lib/ios-sim launch build/Debug-iphonesimulator/TestApp.app --xcode-dir /Application/Xcode.app/Contents/Developer --udid &lt;udid from ti info&gt;
   </pre></code>
   
   This will launch the iOS Simulator and start the TestApp. The app will call NSLog() but there  is no output, hence the bug.
   
   What worked for iOS 7 and older is adding the following to the stdioDataIsAvailable() function in ios-sim (<a href="https://github.com/appcelerator/ios-sim/blob/master/Source/iPhoneSimulator.m#L337-L351):" rel="nofollow" target="_blank">https://github.com/appcelerator/ios-sim/blob/master/Source/iPhoneSimulator.m#L337-L351):</a>
   
   <code><pre>
   [[notification object] readInBackgroundAndNotify];
   </pre></code>
   
   This line fixes NSLog() for iOS 7, but breaks in iOS 8. There is no logging in iOS 8 and the CPU spikes until the app is quit.</li>
<li>Andrew McElroy 2014-10-23

   This might be saying the obvious, but NSLog with Xcode 6 in Obj-C on a iPhone 6 simulator works fine from Xcode.
   
   This is really looking like an AppC issue.
   
   steps to reproduce:
   create a new single page ObjC iOS app in Xcode.
   
   use the following code:
   
   - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
       // Override point for customization after application launch.
       NSLog(@"Logging in iOS8 simulators work. Your move Appc");
       return YES;
   }
   
   Observe that it shows up in console in Xcode.</li>
<li>Ingo Muschenetz 2014-10-23

   I believe the ticket illustrates the fact that the issue is with ios-sim, which unfortunately has to rely on a private, undocumented framework. Do you have a helpful suggestion as to how to fix ios-sim so that it may work again?</li>
<li>Andrew McElroy 2014-10-23

   I just created a new titanium app (3.4.0.GA) using Xcode 6 with iOS8 simulator on OSX 10.9.5 ( 6 plus and 4s) and in titanium console.log will print to the console.
   
   I also just tried to reproduce Chris Barber's steps and I see how that fails.
   
   However, the phonegap fork of ios-sim does not have this problem.
   aka if you take Chris' test app and use the phonegap fork, you get logging back.
   
   <a href="https://github.com/phonegap/ios-sim" rel="nofollow" target="_blank">https://github.com/phonegap/ios-sim</a>
   
   <code><pre>
    Debug-iphonesimulator git:(master) âœ— pwd
   /Users/andrewmcelroy/Desktop/ioslib/test/TestApp/build/Debug-iphonesimulator
   /Users/andrewmcelroy/Desktop/ioslibz/phonegap-ioslib/build/Release/ios-sim launch TestApp.app
   2014-10-23 10:55:52.198 TestApp[11931:250282] [INFO] info test
   
   2014-10-23 10:55:52.199 TestApp[11931:250282] [DEBUG] debug test
   2014-10-23 10:55:52.199 TestApp[11931:250282] [DEBUG] line 1 test
   [DEBUG] line 2 test
   
   2014-10-23 10:55:52.199 TestApp[11931:250282] [DEBUG] AUTO_EXIT
   </pre></code>
   
   one thing to note, I made one modification to Chris' example app -- I removed the ifdef on TEST_BASIC_LOGGING</li>
<li>Ingo Muschenetz 2014-10-23

   Is that perhaps related to commit <a href="https://github.com/phonegap/ios-sim/commit/aa583e9fefb6b8b8139da2327c6c3996a0fc6e83?" rel="nofollow" target="_blank">https://github.com/phonegap/ios-sim/commit/aa583e9fefb6b8b8139da2327c6c3996a0fc6e83?</a>
   
   Note that they also removed Xcode 5 support, which we can't just yet.</li>
<li>Chris Barber 2020-01-30

   We no longer use ios-sim to relay log messages.</li>
<li>Sohail Saddique 2020-01-31

   Ticket closed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17867.json">JSON Source</a></p>