---
title: "[TIMOB-17883] Android 5.0: Audio player does not start/resume once stopped"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Hold</td></tr>
<tr><th>Resolution Date</th><td>2014-11-12T00:42:59.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.4.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>qe-3.4.1</td></tr>
<tr><th>Reporter</th><td>Lokesh Choudhary</td></tr>
<tr><th>Assignee</th><td>Hieu Pham</td></tr>
<tr><th>Created</th><td>2014-10-22T00:17:31.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-20T18:05:35.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>This issue is seen when streaming audio too & not just local file.</h4>

<h4>Description:</h4>
1. Create a classic app & replace the app.js with the following code:
<code><pre>
var _window = Ti.UI.createWindow({
	backgroundColor:'white',
	layout:'vertical'
});

var startButton = Titanium.UI.createButton({
	    title:'Start Playing',
	    top:10,
	    width:200,
	    height:40
	});
	 
var stopButton = Titanium.UI.createButton({
    title:'Stop playing',
    top:10,
    width:200,
    height:40,
    enabled:true
});
 
_window.add(startButton);
_window.add(stopButton);
 
var audioPlayer = Ti.Media.createAudioPlayer({ 
    url: 'Uppermost - Flow.mp3',
    allowBackground: true
});           
    
startButton.addEventListener('click',function() {
  audioPlayer.start();
});
 
stopButton.addEventListener('click', function() {
 audioPlayer.stop();
});
 
audioPlayer.addEventListener('progress',function(e) {
    Ti.API.info('Time Played: ' + Math.round(e.progress) + '/' + audioPlayer.getDuration() + 'milliseconds');
});
 
audioPlayer.addEventListener('change',function(e)
{
    Ti.API.info('State: ' + e.description + ' (' + e.state + ')');
});
 
_window.addEventListener('close',function() {
    audioPlayer.stop();
    if (Ti.Platform.osname === 'android')
    { 
        audioPlayer.release();
    }
});

_window.open();
</pre></code>
2. Use the attached audio file in your app.
3. Build for device flashed with android 5.0 preview.
4. After the app launches press the "Start Playing" button.
5. The audio player will start playing.
6. Press the "Stop Playing" button.
7. The audio player will stop playing.
8. Now again press the "Start Playing" button.

<h4>Actual Result:</h4>
1. The audio player does not play when the "Start Playing" button is pressed the second time.
2. On a non android 5.0 device(Samsung galaxy S4 - android 4.4.2) the audio player stops and starts as expected.

<h4>Expected Result:</h4>
1. The audio player should start again after it has been stopped.


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17883_52100/Uppermost - Flow.mp3">Uppermost - Flow.mp3</td></td><td>2014-10-22T00:18:15.000+0000</td><td>4109324</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2014-10-22

   FYI. Placing this into Triage.</li>
<li>Lokesh Choudhary 2014-10-23

   I am seeing this sometimes, where the audio does not start streaming at the first time when the app is run.
   Not sure if its the same cause as this ticket, if not please comment & I will open a separate ticket for it.
   
    </li>
<li>Hieu Pham 2014-10-31

   The media hangs indefnitely on prepare() call. After some researching, looks like a native problem: <a href="https://code.google.com/p/android-developer-preview/issues/detail?id=1787" rel="nofollow" target="_blank">https://code.google.com/p/android-developer-preview/issues/detail?id=1787</a></li>
<li>Ingo Muschenetz 2014-11-12

   It appears to be a Google bug. Resolving on hold.</li>
<li>Lee Morris 2017-03-20

   Closing ticket due to time passed and that the issue was a Goggle bug and nothing to do with us.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17883.json">JSON Source</a></p>