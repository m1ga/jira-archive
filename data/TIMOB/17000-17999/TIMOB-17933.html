---
title: "[TIMOB-17933] Sanity check required by evaluating deployment-targets in tiapp.xml"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2019-10-02T05:26:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.4.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Tooling</td></tr>
<tr><th>Labels</th><td>TCSupport</td></tr>
<tr><th>Reporter</th><td>Stephen Feather</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2014-10-22T20:05:00.000+0000</td></tr>
<tr><th>Updated</th><td>2019-10-21T15:41:38.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Instructions</h4>
From the command line, create an empty project with iphone and android natures/targets. You should be able to build for ios <code><pre>ti build -p ios</pre></code> and for android <code><pre>ti build -p android</pre></code> without a problem

Now open up the tiapp.xml and change <code><pre>&lt;target device="iphone"&gt;true&lt;/target&gt;</pre></code> to <code><pre>&lt;target device="iphone"&gt;false&lt;/target&gt;</pre></code> and build again for ios <code><pre>ti build -p ios</pre></code>

An error occurs. <code><pre>[ERROR] Failed to run command "build"
[ERROR] TypeError: Cannot read property 'cyan' of undefined
    at iOSBuilder.loginfo (/Users/stephenfeather/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.GA/iphone/cli/commands/_build.js:1603:73)
    at /Users/stephenfeather/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.GA/node_modules/node-appc/node_modules/async/lib/async.js:610:21
    at /Users/stephenfeather/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.GA/node_modules/node-appc/node_modules/async/lib/async.js:249:17
    at iterate (/Users/stephenfeather/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.GA/node_modules/node-appc/node_modules/async/lib/async.js:149:13)
    at /Users/stephenfeather/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.GA/node_modules/node-appc/node_modules/async/lib/async.js:160:25
    at /Users/stephenfeather/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.GA/node_modules/node-appc/node_modules/async/lib/async.js:251:21
    at /Users/stephenfeather/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.GA/node_modules/node-appc/node_modules/async/lib/async.js:615:34
    at iOSBuilder.initialize (/Users/stephenfeather/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.GA/iphone/cli/commands/_build.js:1580:2)
    at /Users/stephenfeather/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.GA/node_modules/node-appc/node_modules/async/lib/async.js:610:21
    at /Users/stephenfeather/Library/Application Support/Titanium/mobilesdk/osx/3.4.0.GA/node_modules/node-appc/node_modules/async/lib/async.js:249:17
</pre></code>

If you change the android target to false, tooling will still blindly build you a nice new android apk.

<h4>Impact</h4>
Projects setup for iOS only can be tested against ios/android without modification.  Projects built for android only (lets say on a windows system and then moved to the mac) need to be modified.  The modification is fine, and understandable, but the error message above is not.

<h4>Solution</h4>
Tooling should check the tiapp.xml to see if an appropriate deployment target exists that matches the target from the command line switches/parameters and inform the user if the original project is missing any components. 

<h3>Comments</h3>

<ol>
<li>Chris Barber 2019-10-02

   Great news! Sometime in the past 5 years, this was magically fixed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17933.json">JSON Source</a></p>