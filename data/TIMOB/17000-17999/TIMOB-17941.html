---
title: "[TIMOB-17941] MobileWeb: When hiding a Ti.map view and showing it again the view is reloaded"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-11-24T18:24:48.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Components</th><td>MobileWeb</td></tr>
<tr><th>Labels</th><td>qe-testadded, supportTeam</td></tr>
<tr><th>Reporter</th><td>Marco Cota</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2014-10-29T22:46:33.000+0000</td></tr>
<tr><th>Updated</th><td>2015-01-16T23:35:23.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue</h4>

When working on mobile web and using ti.map if the map visible property is set to false and the is set to true again the map will be reloaded to the original state instead of keeping the same location and zoom.

<h4>Steps to repro</h4>

1. Run test code
2. Move and zoom in the map view
3. Click on the toggle button to hide it
4. Click on the toggle button to show it

<h4>Expected Result</h4>
The map will be shown again with the last location and zoom

<h4>Actual Result</h4>
The map is reloaded to the original state

<h4>Test code</h4>

<code><pre>
var win = Ti.UI.createWindow({
	layout:'vertical'
});

var bt = Ti.UI.createButton({
	top:20,
	title:'Toggle'
});

var map = Ti.Map.createView({
	visible:true,
	top:20,
	userLocation:true
});

Ti.Geolocation.MobileWeb.locationTimeout = 10000; 
Ti.Geolocation.getCurrentPosition(locationCallback); 

function locationCallback(e) { 
	console.log(e); 
} 
var last;
bt.addEventListener('click',function(){
	map.visible = !map.visible;
});

win.add(bt);
win.add(map);
win.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Chris Barber 2014-11-24

   Master pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/6380" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6380</a></li>
<li>Tim Poulsen 2014-11-24

   Works as expected using the original code on the ticket. 
   
   The code from Ingo doesn't work for me, however. Each time I hide/show the map I get different coordinates. If I understand his comments correctly, though, that's expected and isn't a valid test for this change.</li>
<li>Ewan Harris 2015-01-16

   Verified fix on:
   
   Mac OSX 10.10.1
   Appcelerator Studio, build: 3.4.1.201410281743
   Titanium SDK build:   3.6.0.v20150116070927
   Titanium CLI, build: 3.4.1
   Alloy: 1.5.1
   Google Chrome
   iPhone 6 Plus (8.1.1)
   
   Built and packaged using the app.js provided, when viewing from browser and device then zooming and toggling, the map always stays zoomed.
   
   Closing ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-17941.json">JSON Source</a></p>