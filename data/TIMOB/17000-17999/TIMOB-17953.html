---
title: "[TIMOB-17953] iOS: Map annotations show buttons event is not declared on iOS 7.0.X"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-04-20T01:05:37.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.1.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>supportTeam</td></tr>
<tr><th>Reporter</th><td>Marco Cota</td></tr>
<tr><th>Assignee</th><td>Chee Kiat Ng</td></tr>
<tr><th>Created</th><td>2014-11-04T00:36:09.000+0000</td></tr>
<tr><th>Updated</th><td>2015-07-07T18:42:25.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue </h4>

When customer creates map annotations and one of them is left without declaring left or right button the buttons are shown when the annotation si clicked, this only happens when the app is deployed with Ti SDK 3.4.0 and iOS device version 7.0.3/7.0.4.

<h4>Steps to repro</h4>

1. run test code
2. Click on the green annotation

Expected Result
The green annotation will not show any button (left or right)

Actual Result 
The green annotation show both buttons 

<h4>Test Code</h4>

<code><pre>
var Map = require('ti.map');

var ary = [];


var win = Ti.UI.createWindow({
	backgroundColor:'#fff',
});

for(i=0;i&lt;5;i++){ 
	var an1 = Map.createAnnotation({ 
	latitude : 37.775202, 
	longitude : -122.41924+(0.00005*i), 
	leftButton : 'red_x.png', 
	rightButton : 'tick_64.png', 
	pincolor : Map.ANNOTATION_RED, 
	title : "Sydney", 
	subtitle : "Sydney is quite chill",	
	animate : true, 
	annID : 1, 
	annIDCount : [1, 2] 
}); 
ary.push(an1);	
} 
var ann2 = Map.createAnnotation({ 
	animate : true, 
	latitude : 37.7749295, 
	pincolor : Map.ANNOTATION_GREEN, 
	longitude : -122.4194155, 
	title : "Anno2", 
	subtitle : "This is anno2", 
}); 

ary.push(ann2); 

var map = Map.createView({ 
	userLocation : false, 
	mapType : Map.NORMAL_TYPE, 
	animate : true, 
	annotations : ary, 
	region : { 
	latitude : 37.7749295, 
	longitude : -122.4194155, 
	latitudeDelta : 0.1, 
	longitudeDelta : 0.1 
	}, //Sydney 
	top : 0 
}); 

win.add(map); 
win.open();
</pre></code>



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17953_52899/mapView.zip">mapView.zip</td></td><td>2014-12-01T16:25:27.000+0000</td><td>63669</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17953_53141/Screen Shot 2014-12-09 at 3.46.22 PM.png">Screen Shot 2014-12-09 at 3.46.22 PM.png</td></td><td>2014-12-09T23:50:21.000+0000</td><td>304821</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-17953_53142/Screen Shot 2014-12-09 at 3.46.26 PM.png">Screen Shot 2014-12-09 at 3.46.26 PM.png</td></td><td>2014-12-09T23:50:21.000+0000</td><td>303328</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Chee Kiat Ng 2015-03-16

   PR Here: <a href="https://github.com/appcelerator-modules/ti.map/pull/84" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/84</a>
   Pre-release here: <a href="https://github.com/appcelerator-modules/ti.map/releases/tag/ios-2.2.2" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/releases/tag/ios-2.2.2</a>
   </li>
<li>Jon Alter 2015-04-15

   Merged... do we want to add this to titanium_mobile as well? [~ingo]</li>
<li>Ingo Muschenetz 2015-04-15

   Yes, please. We can then mark it for 4.0 instead if we merge it to 4_0_X.</li>
<li>Chee Kiat Ng 2015-04-16

   PRs to titanium_mobile merged. 
   <a href="https://github.com/appcelerator/titanium_mobile/pull/6784" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6784</a>
   <a href="https://github.com/appcelerator/titanium_mobile/pull/6785" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6785</a>
   titanium.json updated.
   <a href="https://github.com/appcelerator/titanium_releases/blob/master/titanium.json" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_releases/blob/master/titanium.json</a>
   [~jalter] feel free to resolve.
   </li>
<li>Wilson Luu 2015-07-07

   Closing ticket as fixed. Verified that if I clicked on the green annotation, then both <code>leftButton</code> and <code>rightButton</code> does not appear.
   
   Tested on:
   
   Appcelerator Studio, build: 4.1.0.201507061821
   Appc CLI NPM: 4.1.0-1
   Appc CLI Core: 4.1.0-5
   SDK: 4.1.0.v20150706111546
   Node: v0.10.38
   OS: Yosemite (10.10.4)
   Xcode: 6.4
   Devices: iphone 6 plus (8.3), iphone 5c (7.0.3)</li>
</ol>


<p><a href="/TIMOB/TIMOB-17953.json">JSON Source</a></p>