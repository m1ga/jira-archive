---
title: "[TIMOB-18030] Android: The version number in the analytics payload is incorrect when using getLastEvent or lastEvent to show payload on device"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.3.0, Release 3.4.0, Release 3.4.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>qe-3.4.1, reprod</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2014-11-13T22:01:34.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T19:54:49.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

*Please note* This only is incorrect when checking the last event on the device, the payload sent by the device has the correct version number as verified by checking what staging server is receiving. On iOS the correct version number is returned.

When using the getLastEvent method or checking the lastEvent property the payload returned refers to the version as 4, when it is actually version 3. This only occurs since the change in the payload version, prior to 3.3.0 the version number is correctly referred to as 2.

*On device*
<code><pre>
{"id":"21f82f11-9877-4a21-b907-5ce9e28f7f95:b6cc58f2ad3f82f5","sid":"0901c6f4-5df8-4d47-bf37-3d87b362aa66","ts":"2014-11-13T19:20:09.196+0000","event":"app.nav","seq":22,"data":{"to":"navEventTo","eventName":"navEventName","n\u00e1vEv\u00e9ntV\u00e1l\u00fa\u00e9":"n\u00e1vEv\u00e9ntK\u00e9y","from":"navEventFrom"},"mid":"b6cc58f2ad3f82f5","ver":"4","aguid":"b0a7e2b9-05a3-4ea1-86e0-728ef9efaa61"}
</pre></code>

*On staging*
<code><pre>
{"id":"21f82f11-9877-4a21-b907-5ce9e28f7f95:b6cc58f2ad3f82f5","sid":"0901c6f4-5df8-4d47-bf37-3d87b362aa66","ts":"2014-11-13T19:20:09.196+0000","event":"app.nav","seq":22,"data":{"to":"navEventTo","eventName":"navEventName","n\u00e1vEv\u00e9ntV\u00e1l\u00fa\u00e9":"n\u00e1vEv\u00e9ntK\u00e9y","from":"navEventFrom"},"mid":"b6cc58f2ad3f82f5","ver":"3","aguid":"b0a7e2b9-05a3-4ea1-86e0-728ef9efaa61"}
</pre></code>
<h4>Steps To Reproduce</h4>

1. Add the attached app.js to an existing project and build to device.
2. Run the app and send an event by tapping one of the buttons in the top half of the screen
3. Tap the getLastEvent button and the bottom of the screen will be updated with the event sent. 

<h4>Actual Result</h4>

The payload is like the above, the version number is 4.

<h4>Expected Result</h4>

The payload should match what we see on staging, with the version number being 3.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18030_52570/app.js">app.js</td></td><td>2014-11-13T22:01:34.000+0000</td><td>4838</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Lee Morris 2017-07-26

   I am able to reproduce this issue with the following environment;
   Pixel (7.1)
   Studio 4.9.0.201705302345
   Ti SDK 6.1.1 GA
   Appc NPM 4.2.9
   Appc CLI 6.2.2
   Ti CLI 5.0.14
   Alloy 1.9.11
   Xcode 8.2 (8C38)
   Node v4.8.2
   Java 1.8.0_131</li>
</ol>


<p><a href="/TIMOB/TIMOB-18030.json">JSON Source</a></p>