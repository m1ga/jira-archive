---
title: "[TIMOB-18065] Add compiled architectures to module manifest template"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-11-21T23:33:16.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.5.0, Release 4.0.0</td></tr>
<tr><th>Components</th><td>Android, BlackBerry, CLI, iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ingo Muschenetz</td></tr>
<tr><th>Assignee</th><td>Jon Alter</td></tr>
<tr><th>Created</th><td>2014-11-21T00:02:00.000+0000</td></tr>
<tr><th>Updated</th><td>2015-01-20T21:23:56.000+0000</td></tr>
</table>

<h3>Description</h3>

With the addition of 64-bit support, it becomes helpful to know the architectures available in a compiled module. We can then use this ins tooling to make sure modules are compiled correctly for use.

We update the module template manifest file with the following values (*notice they are space delimited*):

Android:
architectures: armeabi armeabi-v7a x86

BlackBerry:
architectures: arm x86

iOS:
architectures: armv7 i386 x86_64 arm64

An example:

<code><pre>
#
<h4>this is your module manifest and used by Titanium</h4>
<h4>during compilation, packaging, distribution, etc.</h4>
#
version: 1.1.0
apiversion: 2
architectures: armv7 i386 x86_64 arm64
description: Awesome App Functionality
author: Appcelerator
license: Apache v2
copyright: Copyright (c) 2013 by Appcelerator

<h4>these should not be edited</h4>
...
</pre></code>


<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2014-11-21

   I could use this perfectly for gitt.io as well, showing what modules are 64bit e.g.
   
   The manifest is the best place to have it, as long as we can be sure any module made compatible for 64-bit will always have this in it, so it should not require any manual action by the module developer.</li>
<li>Ingo Muschenetz 2014-11-21

   I think the question is how/if we can auto-update these values. We can place them in the manifest by default, but should we re-update them on module rebuild?</li>
<li>Stephen Feather 2014-11-21

   If a developer changes something in their default xcode projects, something that changes the architectures, it be nice if the manifest in the .zip would reflect the true architectures.  How hard is this to implement, @ingo?
   
   So, yes, the primary manifest needs to be updated. :(</li>
<li>Ingo Muschenetz 2014-11-21

   The consensus is that we should auto-update the manifest on each build. Thus, run these commands after the build to confirm architectures:
   
   * iOS: <a href="http://ss64.com/osx/lipo.html" rel="nofollow" target="_blank">http://ss64.com/osx/lipo.html</a>
   * Android: Appears the simplest approach is enumerate the folder names under the "libs" directory: <a href="https://software.intel.com/en-us/blogs/2014/07/03/how-to-set-up-an-ndk-project-to-compile-for-multiple-target-platforms" rel="nofollow" target="_blank">https://software.intel.com/en-us/blogs/2014/07/03/how-to-set-up-an-ndk-project-to-compile-for-multiple-target-platforms</a>
   * BlackBerry: TBD</li>
<li>Fokke Zandbergen 2014-11-21

   Looks good!</li>
<li>Ingo Muschenetz 2014-11-21

   We moved to space-delimited architectures, which seems acceptable, since Java does this in manifest lists: <a href="https://docs.oracle.com/javase/tutorial/deployment/jar/downman.html" rel="nofollow" target="_blank">https://docs.oracle.com/javase/tutorial/deployment/jar/downman.html</a></li>
<li>Jon Alter 2014-11-21

   PRs:
   ti.map (ios/android): <a href="https://github.com/appcelerator-modules/ti.map/pull/73" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/73</a>
   ti.facebook (ios): <a href="https://github.com/appcelerator-modules/ti.facebook/pull/15" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.facebook/pull/15</a>
   ti.touchid (ios): <a href="https://github.com/appcelerator-modules/ti.touchid/pull/12" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.touchid/pull/12</a>
   
   Adding above modules to timob
   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/6373" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6373</a>
   3_5_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/6374" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6374</a></li>
<li>Jon Alter 2014-11-21

   Updating module template in timob
   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/6375" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6375</a>
   3_5_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/6376" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6376</a></li>
<li>Ingo Muschenetz 2014-11-21

   Approved. Merged.</li>
<li>Jon Alter 2014-11-24

    Updating Ti.CloudPush module in timob:
    master: <a href="https://github.com/appcelerator/titanium_mobile/pull/6384" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6384</a>
    3_5_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/6386" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6386</a></li>
<li>Jon Alter 2015-01-13

    Blackberry PR: <a href="https://github.com/appcelerator/titanium_mobile_blackberry/pull/274" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_blackberry/pull/274</a></li>
<li>Eric Merriman  2015-01-20

    Validated module manifest template has compiled architectures</li>
</ol>


<p><a href="/TIMOB/TIMOB-18065.json">JSON Source</a></p>