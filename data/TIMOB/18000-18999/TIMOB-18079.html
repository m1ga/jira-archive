---
title: "[TIMOB-18079] CLI: Refactor build commands for greater code reuse"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-01-09T19:38:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Components</th><td>Android, CLI, iOS, MobileWeb, Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2014-11-24T17:10:21.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-16T22:42:23.000+0000</td></tr>
</table>

<h3>Description</h3>

Each platform's build command extends a Builder base class. We need to move common functions into the Builder so that we can reuse code across the build commands.

<h3>Comments</h3>

<ol>
<li>Chris Barber 2014-11-24

   Master pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/6383" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6383</a>
   
   To test,
   
   1) run "ti info"
   2) build an Android, iOS, and Mobile Web app (simulator/emulator builds are fine)</li>
<li>Christopher Williams 2014-11-25

   Merged.</li>
<li>Tim Poulsen 2015-01-09

   If a module is missing, the code starting at <a href="https://github.com/appcelerator/titanium_mobile/blame/master/node_modules/titanium-sdk/lib/builder.js#L184" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blame/master/node_modules/titanium-sdk/lib/builder.js#L184</a> is called. The references to <code>logger</code> and <code>\_\_</code> are invalid though so the script throws an error. It should be <code>this.logger</code> and the <code>\_\_</code> lib needs to be included in the module.
   
   <code><pre>
   [WARN]  Could not find a valid Titanium module id=ti.map version=latest platform=windows deploy-type=development
   C:\Users\Tim\AppData\Roaming\npm\node_modules\titanium\node_modules\longjohn\dist\longjohn.js:185
           throw e;
                 ^
   ReferenceError: logger is not defined
       at WindowsBuilder.&lt;anonymous&gt; (C:\ProgramData\Titanium\mobilesdk\win32\3.6.0.v20150108110929\node_modules\titanium-sdk\lib\builder.j
       at detect.callback (C:\ProgramData\Titanium\mobilesdk\win32\3.6.0.v20150108110929\node_modules\node-appc\lib\timodule.js:386:52)
       at C:\ProgramData\Titanium\mobilesdk\win32\3.6.0.v20150108110929\node_modules\node-appc\lib\timodule.js:170:51
       at C:\ProgramData\Titanium\mobilesdk\win32\3.6.0.v20150108110929\node_modules\node-appc\node_modules\async\lib\async.js:592:17
       at done
   (C:\ProgramData\Titanium\mobilesdk\win32\3.6.0.v20150108110929\node_modules\node-appc\node_modules\async\lib\async.js:135:19
   </pre></code></li>
<li>Christopher Williams 2015-01-09

   <a href="https://github.com/appcelerator/titanium_mobile/pull/6557" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6557</a></li>
<li>Lee Morris 2017-03-16

   Closing ticket as fixed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-18079.json">JSON Source</a></p>