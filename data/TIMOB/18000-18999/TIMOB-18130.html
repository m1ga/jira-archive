---
title: "[TIMOB-18130] CLI: Ti build command fails for all platforms due to \"wrench undefined\""
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-12-04T00:14:01.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.5.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Components</th><td>Android, BlackBerry, CLI, iOS, MobileWeb, Tooling</td></tr>
<tr><th>Labels</th><td>qe-3.5.0, regression</td></tr>
<tr><th>Reporter</th><td>Eric Merriman </td></tr>
<tr><th>Assignee</th><td>Praveen Innamuri</td></tr>
<tr><th>Created</th><td>2014-12-03T22:48:50.000+0000</td></tr>
<tr><th>Updated</th><td>2014-12-05T23:25:22.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description:</h4>
Our automated SDK validations board went red for all platforms with SDK 3.5.0.v20141203112513. After working with Tim, it seems that a missing "require wrench" is the root of the problem. All build commands "ti build" fail with "wrench is undefined" There is some variance by platform:

For iOS and blackberry, a simple error is shown:
<code><pre>
[ERROR] wrench is not defined
</pre></code>

For mobileweb and Android, you get the following: 
<code><pre>
/usr/local/lib/node_modules/titanium/node_modules/longjohn/dist/longjohn.js:185
        throw e;
              ^
ReferenceError: wrench is not defined
    at patchLogger (/Users/eric/Library/Application Support/Titanium/mobilesdk/osx/3.5.0.v20141203112513/cli/commands/build.js:273:29)
    at conf.options.appc.util.mix.project-dir.callback (/Users/eric/Library/Application Support/Titanium/mobilesdk/osx/3.5.0.v20141203112513/cli/commands/build.js:111:9)
    at /usr/local/lib/node_modules/titanium/lib/cli.js:632:28
    at conf.options.appc.util.mix.project-dir.validate (/Users/eric/Library/Application Support/Titanium/mobilesdk/osx/3.5.0.v20141203112513/cli/commands/build.js:175:9)
    at CLI.&lt;anonymous&gt; (/usr/local/lib/node_modules/titanium/lib/cli.js:622:14)
    at /usr/local/lib/node_modules/titanium/node_modules/async/lib/async.js:551:21
    at /usr/local/lib/node_modules/titanium/node_modules/async/lib/async.js:227:13
    at iterate (/usr/local/lib/node_modules/titanium/node_modules/async/lib/async.js:134:13)
</pre></code>

THIS IS A REGRESSION

<h4>Steps to reproduce:</h4>
1) Download SDK 3.5.0.v20141203112513
2) Set this sdk as "selected" in the ti config or with the "-d" flag or by "ti sdk" command
3) Create a project with this sdk in the tiapp.xml
4) Run command "ti build" and choose any platform

<h4>Result:</h4>
Build failure due to missing wrench

<h4>Expected Result:</h4>
Build completes successfully 

<h3>Comments</h3>

<ol>
<li>Chris Barber 2014-12-03

   This is because there was no backport of TIMOB-18074.
   
   Someone needs to backport <a href="https://github.com/appcelerator/titanium_mobile/pull/6379" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6379</a> to 3_5_X and fast.</li>
<li>Praveen Innamuri 2014-12-03

   <a href="https://github.com/appcelerator/titanium_mobile/pull/6427" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6427</a></li>
<li>Wilson Luu 2014-12-05

   Closing ticket as fixed. Verified I was able to build a Titanium project using <code>ti build</code> for different platforms.
   
   Tested on:
   
   Appcelerator Studio, build: 3.4.1.201410281743 
   SDK build: 3.5.0.v20141205141717 
   CLI: 3.4.1 
   Alloy: 1.5.1 
   Xcode: 6.1.1 GM</li>
</ol>


<p><a href="/TIMOB/TIMOB-18130.json">JSON Source</a></p>