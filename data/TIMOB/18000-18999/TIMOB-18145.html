---
title: "[TIMOB-18145] iphone module build succeed though there is a missing architecture"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-02-06T20:58:49.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Components</th><td>iOS, Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Praveen Innamuri</td></tr>
<tr><th>Assignee</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Created</th><td>2014-12-06T00:27:33.000+0000</td></tr>
<tr><th>Updated</th><td>2015-03-19T23:19:19.000+0000</td></tr>
</table>

<h3>Description</h3>

Related to TIMOB-18071. If x86_64 architecture is removed from the manifest, then there is a warning in the build logs, but the build still succeed. However, if any arch is missing for android module, then the build has failed with appropriate warning.

We need to address this parity of build between android and iphone platforms.

<h3>Comments</h3>

<ol>
<li>Feon Sua Xin Miao 2014-12-12

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/6474" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6474</a>
   
   Functional Test:
   
   1. create a module	
   <code><pre> ti create -p all -t module -n test -u http:// --id com.appc.test </pre></code>
   2. cd into module iphone directory
   3. remove <code>x86_64</code> architecture from the manifest
   3. run ./build.py
   4. build should fail with more intuitive error message
   <code><pre>
   CreateUniversalBinary build/Release-iphonesimulator/libComAppcTest.a normal i386\ x86_64
       cd /Users/feonsua/work/testapps/360/mods/newTestMod/iphone
       export PATH="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Users/feonsua/Library/android-sdk-macosx/tools:/Users/feonsua/Library/android-sdk-macosx/platform-tools"
       /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool -static /Users/feonsua/work/testapps/360/mods/newTestMod/iphone/build/newTestMod.build/Release-iphonesimulator/newTestMod.build/Objects-normal/i386/libComAppcTest.a /Users/feonsua/work/testapps/360/mods/newTestMod/iphone/build/newTestMod.build/Release-iphonesimulator/newTestMod.build/Objects-normal/x86_64/libComAppcTest.a -o /Users/feonsua/work/testapps/360/mods/newTestMod/iphone/build/Release-iphonesimulator/libComAppcTest.a
   
   ** BUILD SUCCEEDED **
   
   Check build architectures
   
   [WARN] architectures in manifest: i386, arm64, armv7
   [WARN] compiled binary architectures: x86_64, i386, arm64, armv7
   
   MODULE BUILD FAILED
   [ERROR] there is discrepancy between the architectures specified in module manifest and compiled binary.
   [ERROR] Please update manifest to match module binary architectures.
   </pre></code></li>
<li>Tim Poulsen 2015-02-06

   CR & FR passed, merged</li>
<li>Ewan Harris 2015-03-19

   Verified fix on:
   
   Mac OSX 10.10.2
   Appcelerator Studio, build:  4.0.0.201503171723
   Titanium SDK build:  4.0.0.v20150317234215,  4.1.0.v20150319124255 
   Titanium CLI, build: 4.0.0-alpha
   Alloy: 1.6.0-alpha
   
   Followed the provided test instructions and when an architecture is missing from the manifest the warning is printed out.
   
   Closing ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-18145.json">JSON Source</a></p>