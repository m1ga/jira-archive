---
title: "[TIMOB-18146] Android: Cannot send Broadcast with data property defined in the intent"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2015-07-08T07:44:42.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.4.1, Release 4.0.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Benjamin Hatfield</td></tr>
<tr><th>Assignee</th><td>Ashraf Abu</td></tr>
<tr><th>Created</th><td>2014-12-06T00:51:39.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-17T18:02:55.000+0000</td></tr>
</table>

<h3>Description</h3>

CAVEAT:
Cannot tell if this should work or not.  Cannot find any official information in the Android docs. Stackoverflow and other topics say you can only send data through extras, which does work in this example.

REPRODUCTION:
Run the code below in the Genymotion emulator and click the "Send Broadcast" button.

RESULTS:
Broadcast is not sent.

OTHER INFO:
Comment out line #9 (data property) and rerun the test.  Intent is sent and received.

<code><pre>
var win = Ti.UI.createWindow();
var button = Ti.UI.createButton({
	title : 'Send Broadcast'
});
button.addEventListener('click', function() {

	var intent = Ti.Android.createBroadcastIntent({
		action: 'com.appcelerator.action.ALERT',
		data: '<a href="http://www.appcelerator.com" rel="nofollow" target="_blank">http://www.appcelerator.com</a>'
	});
	Ti.Android.currentActivity.sendBroadcast(intent);
});
win.add(button);
win.open();

var broadcastReceiver = Ti.Android.createBroadcastReceiver({
	onReceived: function(e) {
		Ti.API.info(JSON.stringify(e.intent));
	}
});
Ti.Android.registerBroadcastReceiver(broadcastReceiver, ['com.appcelerator.action.ALERT']);
</pre></code>

<h3>Comments</h3>

<ol>
<li>Ashraf Abu 2015-07-03

   The 'data' in this case (most likely) is being used incorrectly. The 'data' of an intent is the data to operate on. Check here for clarification: <a href="http://developer.android.com/reference/android/content/Intent.html" rel="nofollow" target="_blank">http://developer.android.com/reference/android/content/Intent.html</a>
   
   Related readings just for anyone's reference (mainly for me):-
   <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/guide/Android_Intents-section-43287298_AndroidIntents-AddExtraData
   
   <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/guide/Android_Broadcast_Intents_and_Receivers</li>
<li>Ashraf Abu 2015-07-03

   I would assume you want to send some form of information or text over. Here's an example how:
   <code><pre>
   var win = Ti.UI.createWindow();
   var button = Ti.UI.createButton({
   	title : 'Send Broadcast'
   });
   button.addEventListener('click', function() {
    
   	var intent = Ti.Android.createBroadcastIntent({
   		action: 'com.appcelerator.action.ALERT'
   	});
   	intent.putExtra('site', '<a href="http://www.appcelerator.com" rel="nofollow" target="_blank">http://www.appcelerator.com</a>');
   	intent.putExtra('timestamp', new Date());
   	intent.putExtra(Ti.Android.EXTRA_TEXT, 'Some text that we want to share');
   	Ti.Android.currentActivity.sendBroadcast(intent);
   });
   win.add(button);
   win.open();
    
   var broadcastReceiver = Ti.Android.createBroadcastReceiver({
   	onReceived: function(e) {
   		Ti.API.info(JSON.stringify(e.intent)+" - "+e.intent.getStringExtra('timestamp') +" - "+e.intent.getStringExtra('site')
   	    +" - "+e.intent.getStringExtra(Ti.Android.EXTRA_TEXT));
   		var toast = Ti.UI.createNotification({
   	    message:JSON.stringify(e.intent)+" - "+e.intent.getStringExtra('timestamp') +" - "+e.intent.getStringExtra('site')
   	    +" - "+e.intent.getStringExtra(Ti.Android.EXTRA_TEXT),
   	    duration: Ti.UI.NOTIFICATION_DURATION_LONG
   		});
   		toast.show();
   	}
   });
   Ti.Android.registerBroadcastReceiver(broadcastReceiver, ['com.appcelerator.action.ALERT']);
   </pre></code>
   </li>
<li>Ashraf Abu 2015-07-03

   [~bhatfield] If the answer is acceptable, can this ticket be closed?</li>
<li>Lee Morris 2017-03-17

   Closing ticket as invalid.</li>
</ol>


<p><a href="/TIMOB/TIMOB-18146.json">JSON Source</a></p>