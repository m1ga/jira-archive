---
title: "[TIMOB-18147] Android: Cannot get current activity from JavaScript broadcast receiver"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.4.1, Release 4.0.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Benjamin Hatfield</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2014-12-06T00:53:10.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T19:55:40.000+0000</td></tr>
</table>

<h3>Description</h3>

REPRODUCTION:
Run the code below in the Genymotion emulator and click the "Send Broadcast" button.

RESULTS:
Logcat reports that the current activity is a BroadcastReceiver object.

{noformat}
[INFO] :   hello?
[INFO] :   {"bubbleParent":true,"url":"testintent.js","apiName":"Ti.Android.BroadcastReceiver"}
[INFO] :   {"bubbleParent":true,"apiName":"Ti.Android.Activity","actionBar": "bubbleParent":true,"apiName":"Ti.Android.ActionBar","title":null,"navigationMode":0,"subtitle":null}}
{noformat}

OTHER INFO:
Can get current activity using <code>this.Ti.Android.currentActivity</code>

*/Resources/app.js*
<code><pre>
var win = Ti.UI.createWindow();
var button = Ti.UI.createButton({
	title : 'Send Broadcast'
});
button.addEventListener('click', function() {

	var intent = Ti.Android.createBroadcastIntent({
		action: 'com.appcelerator.action.ALERT'
	});
	Ti.Android.currentActivity.sendBroadcast(intent);
});
win.add(button);
win.open();

var broadcastReceiver = Ti.Android.createBroadcastReceiver({
	url: 'testintent.js'
});
Ti.Android.registerBroadcastReceiver(broadcastReceiver, ['com.appcelerator.action.ALERT']);
</pre></code>

*/Resources/testintent.js*
<code><pre>
Ti.API.info('hello?');
Ti.API.info(JSON.stringify(Ti.Android.currentActivity));
Ti.API.info(JSON.stringify(this.Ti.Android.currentActivity));
</pre></code>

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2015-03-23

   [~msamah] Thoughts on priority?</li>
<li>Ashraf Abu 2015-03-24

   [~ingo]
   If there's a work around "this.Ti.Android.currentActivity" and there's not many watchers on this, I think the priority shouldn't be too high.
   Instead, maybe a note can be added to the docs for this about broadcast receiver and on the "currentActivity" docs.
   
   Just my 2 cents.</li>
<li>Ingo Muschenetz 2015-03-24

   Okay, [~bhatfield] can you put your workaround in the docs for now?</li>
</ol>


<p><a href="/TIMOB/TIMOB-18147.json">JSON Source</a></p>