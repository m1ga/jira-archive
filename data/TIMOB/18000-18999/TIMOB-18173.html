---
title: "[TIMOB-18173] iOS: adding date property for Ti.Contacts.createPerson causes error "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-01-06T20:42:15.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.5.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Visalakshi Chidambaram</td></tr>
<tr><th>Assignee</th><td>Chee Kiat Ng</td></tr>
<tr><th>Created</th><td>2014-12-10T09:09:01.000+0000</td></tr>
<tr><th>Updated</th><td>2015-01-16T23:14:56.000+0000</td></tr>
</table>

<h3>Description</h3>

This is not a regression as it is reproducible with Titanium sdk 3.4.1

When a new contact is added to the device, adding the date property along with it, following the format in the docs gives error. 

When the following is done: 
<code><pre>
    var person = Ti.Contacts.createPerson({
        firstName: 'Aaron',
        lastName: 'Smith',
          date: {
             anniversary: ['2002-11-11T11:23:30.000+0000'],
             other: ['2011-04-02T12:00:00.000+0000']
        }
    });
</pre></code>
 it cause the error mentioned in step 1 of the actual results, however adding the date property separately as follows: 
<code><pre>
     person.date = {
         anniversary: ['2022-11-11T11:23:30.000+0000'],
         other: ['2003-04-02T12:00:00.000+0000']
     };
</pre></code>
does not cause any error, however the contact does not get added to the device contacts.

The birthday field works fine though it also follows the same format as the date. 

 

Steps to reproduce: 
1. Run the attached app.js
2. Open device contacts and check for Ade Crude

Actual results:
1. The following error is shown: 
<code><pre>
[ERROR] :  Script Error {
[ERROR] :      column = 42;
[ERROR] :      line = 39;
[ERROR] :      message = "-[__NSCFConstantString countByEnumeratingWithState:objects:count:] unrecognized selector sent to instance 0x5d7014";
[ERROR] :      sourceURL = "file:///private/var/mobile/Containers/Bundle/Application/1CCC7A89-6FEA-4909-8277-AA526270ABE2/timob9589.app/app.js";
[ERROR] :      stack = "[native code]\ncreateUpdateContact@file:///private/var/mobile/Containers/Bundle/Application/1CCC7A89-6FEA-4909-8277-AA526270ABE2/timob9589.app/app.js:39:42\nglobal code@file:///private/var/mobile/Containers/Bundle/Application/1CCC7A89-6FEA-4909-8277-AA526270ABE2/timob9589.app/app.js:14:21";
[ERROR] :  }
</pre></code>
2. No new contacts added

Expected results:
1. Blank white screen appears
2. 'Ade Crude' is added to the contacts along with the anniversary dates and other details mentioned in app.js

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18173_53145/app.js">app.js</td></td><td>2014-12-10T09:09:01.000+0000</td><td>2802</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Chee Kiat Ng 2015-01-05

   PR here: <a href="https://github.com/appcelerator/titanium_mobile/pull/6533" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6533</a></li>
<li>Ewan Harris 2015-01-16

   Verified fix on:
   
   Mac OSX 10.10.1
   Appcelerator Studio, build: 3.4.1.201410281743
   Titanium SDK build:   3.6.0.v20150116070927
   Titanium CLI, build: 3.4.1
   Alloy: 1.5.1
   Xcode 6.1.1
   iPhone 6 Plus (8.1.1), iPad Air 2 (8.2b4)
   
   Using the attached app.js built to both devices. App no longer crashes and the contact is added to the contacts list.
   
   Closing ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-18173.json">JSON Source</a></p>