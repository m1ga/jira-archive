---
title: "[TIMOB-18197] iOS: 64-bit APM module throws an error"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-12-12T23:25:59.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.5.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>qe-3.5.0</td></tr>
<tr><th>Reporter</th><td>Alan Leard</td></tr>
<tr><th>Assignee</th><td>Jon Alter</td></tr>
<tr><th>Created</th><td>2014-12-06T19:17:58.000+0000</td></tr>
<tr><th>Updated</th><td>2015-01-07T22:04:40.000+0000</td></tr>
</table>

<h3>Description</h3>

The new APM module compiled for 64 bit seems to be throwing the error below when built with the 3.5.Alpha:

<code><pre>
[ERROR] :  Script Error {
[ERROR] :      column = 44;
[ERROR] :      line = 11;
[ERROR] :      nativeLocation = "-[ComAppceleratorApmModule init:] (ComAppceleratorApmModule.m:65)";
[ERROR] :      nativeReason = "expected: String, was: (null)";
[ERROR] :      sourceURL = "file:///Users/aleard/Library/Developer/CoreSimulator/Devices/228D3A95-AE1B-4B41-8F29-8C2B77EF1BC8/data/Containers/Bundle/Application/0F773D55-AA2B-4B9D-93DD-79249A0F01BB/Choreo.app/app.js";
[ERROR] :      stack = "[native code]\nglobal code@file:///Users/aleard/Library/Developer/CoreSimulator/Devices/228D3A95-AE1B-4B41-8F29-8C2B77EF1BC8/data/Containers/Bundle/Application/0F773D55-AA2B-4B9D-93DD-79249A0F01BB/Choreo.app/app.js:11:44";
[ERROR] :  }
</pre></code>


To reproduce build an app with the 3.5.Alpha SDK and the 64-bit compiled APM module enabled with services and the following code in the alloy.js file:

<code><pre>
// START: APM service code injection
// Require the apm module
Alloy.Globals.apm = undefined;
try {
Alloy.Globals.apm = require("com.appcelerator.apm");
}
catch (e) {
Ti.API.info("com.appcelerator.apm module is not available");
}

// Initialize the module if it is defined
Alloy.Globals.apm && Alloy.Globals.apm.init();
// END: APM code injection
</pre></code>

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2014-12-08

   [~aleard] Can you try module: <a href="https://github.com/appcelerator-modules/com.appcelerator.apm/releases/tag/1.1.0" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/com.appcelerator.apm/releases/tag/1.1.0</a></li>
<li>Marco Cota 2014-12-10

   Customer have reported this same issue with the current GA i have tested and reproduced using SDK 3.4.0 and 3.4.1 with APM module 1.0.10 </li>
<li>Marco Cota 2014-12-11

   After yesterday discussion customer and i have verified that assigning a String parameter to the init method prevents the error to happen in the latest GA, in previous versions and according to our documentation this was an optional parameter.
   
   <code><pre>
   Alloy.Globals.apm = undefined;
   try {
   	Alloy.Globals.apm = require("com.appcelerator.apm");
   }
   catch (e) {
   	Ti.API.info("com.appcelerator.apm module is not available");
   }
   
   // Initialize the module if it is defined
   Alloy.Globals.apm && Alloy.Globals.apm.init('com.appc.support.testAPM');
   </pre></code></li>
<li>Ingo Muschenetz 2014-12-11

   Thank you. Does this now remove this as an issue?</li>
<li>Radamantis Torres-Lechuga 2014-12-11

   [~ingo] Indeed, I think this is a Documentation bug</li>
<li>Eric Merriman  2014-12-12

   Hello all,
   
   After a bit of research this change to the init method was not expected. Rather than document the new behavior we are recommending that the previous behavior be restored. Moving to TIMOB for consideration for 3.5.0 SDK.
   </li>
<li>Jon Alter 2014-12-12

   PR: <a href="https://github.com/appcelerator-modules/com.appcelerator.apm/pull/11" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/com.appcelerator.apm/pull/11</a>
   
   Built module available here: <a href="https://github.com/appcelerator-modules/com.appcelerator.apm/releases/tag/1.1.1" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/com.appcelerator.apm/releases/tag/1.1.1</a></li>
<li>Eric Wieber 2015-01-07

   Verified fixed, using:
   
   Titanium SDK 3.5.0.v20150106224118
   Studio 3.4.1.201410281743 
   Xcode 6.1.1
   
   On: 
   iPad mini, iOS 8.1
   iPhone 6, iOS 8.2b3
   iPhone 4S Sim, iOS 8.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-18197.json">JSON Source</a></p>