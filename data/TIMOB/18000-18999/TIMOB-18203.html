---
title: "[TIMOB-18203] CLI: Older projects may fail to build with undefined symbols"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2017-05-02T22:08:14.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.5.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>CLI</td></tr>
<tr><th>Labels</th><td>qe-3.5.0</td></tr>
<tr><th>Reporter</th><td>Eric Merriman </td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2014-12-15T19:17:13.000+0000</td></tr>
<tr><th>Updated</th><td>2017-05-02T22:08:14.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description:</h4>
When trying to test Kitchensink Master, I encountered a build failure. Cleaning the project resolved the failure. I retained the original build folder, and if you place the contents back in the project it will fail again.

The failure is logged as:
<code><pre>
[TRACE] Undefined symbols for architecture armv7:
[TRACE]   "TI::Profiler::s_sharedEnabledProfilerReference", referenced from:
[TRACE]       -[TiProfiler enableCPUSampling:] in libti_ios_profiler.a(TiProfiler.o)
[TRACE]   "TI::UString::UString(char const*)", referenced from:
[TRACE]       -[TiProfiler enableCPUSampling:] in libti_ios_profiler.a(TiProfiler.o)
[TRACE]   "TI::Profiler::profiler()", referenced from:
[TRACE]       -[TiProfiler enableCPUSampling:] in libti_ios_profiler.a(TiProfiler.o)
[TRACE]   "TI::Profiler::startProfiling(TI::TiExcState*, TI::UString const&)", referenced from:
[TRACE]       -[TiProfiler enableCPUSampling:] in libti_ios_profiler.a(TiProfiler.o)
[TRACE]   "TI::Profiler::stopProfiling(TI::TiExcState*, TI::UString const&)", referenced from:
[TRACE]       -[TiProfiler enableCPUSampling:] in libti_ios_profiler.a(TiProfiler.o)
[TRACE]   "TI::UString::utf8(bool) const", referenced from:
[TRACE]       -[HprofData writeTraceWithThread:node:] in libti_ios_profiler.a(HprofData.o)
[TRACE] ld: symbol(s) not found for architecture armv7
[TRACE] clang: error: linker command failed with exit code 1 (use -v to see invocation)
[ERROR] ** BUILD FAILED **
[ERROR] The following build commands failed:
[ERROR]         Ld build/Debug-iphoneos/KitchenSink.app/KitchenSink normal armv7
[ERROR] (1 failure)
</pre></code>

This may occur in cases where a project is being updated to use SDK 3.5.0 but has not been cleaned

<h4>Steps to reproduce:</h4>
1) Take a older project with an existing pre 3.5.0 SDK build folder (I have one that will work for KS but is too large to attach)
2) Do not clean, set SDK to 3.5.0
3) Attempt to build for device

<h4>Result:</h4>
Build fails as shown above

<h4>Expected Result:</h4>
Better information about why the build fails and how to rectify

<h3>Comments</h3>

<ol>
<li>Malcolm Hollingsworth 2014-12-16

   This was unexpected behaviour?
   
   Not sure why, you should always clean between; SDKs, platform builds, target builds, testing, modules.  Part of the testing process.</li>
<li>Fokke Zandbergen 2014-12-16

   Still, no reason why ti build couldn't detect such changes and auto clean.</li>
<li>Ingo Muschenetz 2014-12-17

   If we import a project, we should clean.</li>
<li>Eric Merriman  2015-02-03

   [~ingo] The challenge is as well when you have existing projects in the workspace and you upgrade. We should probably trigger a clean when selecting a new SDK.</li>
<li>Lee Morris 2017-05-02

   Resolving ticket as Invalid as there is now a new version of Kitchen Sink available and we no longer support the version which relates to this ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-18203.json">JSON Source</a></p>