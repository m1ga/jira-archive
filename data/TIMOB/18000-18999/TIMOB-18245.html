---
title: "[TIMOB-18245] Ti.Media.takeScreenshot() does not render the selected iOS TabbedBar element"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-02-11T16:22:36.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios, module_media, qe-manualtest</td></tr>
<tr><th>Reporter</th><td>Malcolm Hollingsworth</td></tr>
<tr><th>Assignee</th><td>Chee Kiat Ng</td></tr>
<tr><th>Created</th><td>2014-12-16T14:46:47.000+0000</td></tr>
<tr><th>Updated</th><td>2015-02-17T05:36:48.000+0000</td></tr>
</table>

<h3>Description</h3>

The method *Ti.Media.takeScreenshot()* does not render the selected iOS TabbedBar element.

If an *iOS TabbedBar* is displayed on a device with at least one selected entry visible the text of the selected entry will NOT render when the *takeScreenshot* method is called and the resulting image is displayed or stored in the file system.

The problem exists on Ti SDK 3.4.1 and Ti SDK 3.5.0 beta on iOS simulators 7.1 and 8.1 in all of the devices size variations.

<code><pre>
var win = Ti.UI.createWindow({
    backgroundColor: 'red'
});
var fileName = 'testme.png';
var bb1 = Titanium.UI.createTabbedBar({
    labels: ['One', 'Two', 'Three'],
    backgroundColor: '#336699',
    top: 50,
    style: Titanium.UI.iPhone.SystemButtonStyle.BAR,
    height: 25,
    width: 200,
    bubble: false
});
win.add(bb1);
win.addEventListener('click', function(e) {
    Ti.Media.takeScreenshot(function(e) {
        var file = Ti.Filesystem.getFile(Ti.Filesystem.getTempDirectory(), fileName);
        Ti.API.info(fileName + ': ' + file.resolve());
        file.write(e.media);
        file = null;
    });
});
win.add(bb1);
</pre></code>

The problem occurs using both Alloy or non-alloy - obvious but ruled out anyway.

Confirmation (and simple code snippet) provided by Stephen Feather.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18245_53241/alloyversion.png">alloyversion.png</td></td><td>2014-12-16T14:46:47.000+0000</td><td>8252</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18245_53240/testme.png">testme.png</td></td><td>2014-12-16T14:46:47.000+0000</td><td>22040</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Chee Kiat Ng 2015-02-11

   <h4>Updated sample code here:</h4>
   <code><pre>
   var win = Ti.UI.createWindow({
       backgroundColor: 'red'
   });
   var fileName = 'testme.png';
   var bb1 = Titanium.UI.iOS.createTabbedBar({
       labels: ['One', 'Two', 'Three'],
       backgroundColor: '#336699',
       top: 50,
       height: 25,
       width: 200,
       bubble: false
   });
   
   win.add(bb1);
   win.addEventListener('dblclick', function(e) {
       Ti.Media.takeScreenshot(function(e) {
           var file = Ti.Filesystem.getFile(Ti.Filesystem.getTempDirectory(), fileName);
           Ti.API.info(fileName + ': ' + file.resolve());
           file.write(e.media);
           file = null;
       });
   });
   win.open();
   
   </pre></code>
   
   <h4>Changes made:</h4>
   - Replace deprecated Ti.UI.tabbedbar with Ti.UI.iOS.tabbedbar.
   - Removed deprecated Ti.UI.iPhone.SystemButtonStyle.BAR.
   - Used dblclick instead of click event to capture screenshot</li>
<li>Chee Kiat Ng 2015-02-11

   PR Here: <a href="https://github.com/appcelerator/titanium_mobile/pull/6638" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6638</a></li>
<li>Satyam Sekhri 2015-02-17

   The selected tab in tabbed bar is rendered in the screenshot through Ti.Media.takeScreenshot
   Verified on:
   Appc Studio: 4.0.0.201502111039
   Titanium SDK: 4.0.0.v20150216083136
   Xcode: 6.1, 6.2 beta
   Device: iOS Simulator v8.1,  v8.2 beta, iPhone 4 (v7.1), iPhone 5S (v8.1)</li>
</ol>


<p><a href="/TIMOB/TIMOB-18245.json">JSON Source</a></p>