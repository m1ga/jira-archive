---
title: "[TIMOB-18328] Windows: Changing function parent did not work"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-03-19T22:07:29.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.1.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Kota Iguchi</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2015-01-06T21:00:44.000+0000</td></tr>
<tr><th>Updated</th><td>2015-07-10T00:36:00.000+0000</td></tr>
</table>

<h3>Description</h3>

Related to #12 . Opened this so that we can trace this issue.

<code><pre>
c++
js_context.JSEvaluateScript("Ti.API.trace('Hello, world');"); // OK
js_context.JSEvaluateScript("var a = {}; a.trace = Ti.API.trace; a.trace('Hello, world');"); // FAIL
</pre></code>

<h3>Comments</h3>

<ol>
<li>Kota Iguchi 2015-01-30

   For the record: latest HAL doesn't fix this issue yet.</li>
<li>Christopher Williams 2015-03-11

   I can confirm this is still an issue with the version of HAL being pointed at from titanium_mobile_windows now.</li>
<li>Kota Iguchi 2015-03-17

   I think that changing parent "should not" work for functions because in this case the caller (function parent) does not point to correct object.
   
   For example:
   
   This should work, because "parent" of trace is not changed.
   <code><pre>
   var A = Ti.API; A.trace("Hello, World");
   </pre></code>
   
   On the other hand this should not work (do nothing, or throw exception?), because function parent (A) does not point to Ti.API anymore. I am thinking that it does nothing but return undefined. Even in this case this should not cause crash.
   
   <code><pre>
   var A = {};
   A.trace = Ti.API.trace;
   A.trace("Hello, World");
   </pre></code>
   </li>
<li>Kota Iguchi 2015-03-17

   I found that Node.js handles all of scenarios above. We should handle that similarly.
   
   <code><pre>
   &gt; var a = console; a.log('hello');
   hello
   &gt; var a = console.log; a('hello');
   hello
   &gt; var a = {}; a.log = console.log; a.log('hello');
   hello
   </pre></code>
   </li>
<li>Kota Iguchi 2015-03-17

   Unlike static functions like Ti.API and Ti.UI.createXXX functions, functions involving "new" would work differently. 
   
   <code><pre>
   &gt; var buf = new Buffer(128); var fill = buf.fill; fill(0);
   TypeError: Cannot call method 'fill' of undefined
   
   &gt; var buf = new Buffer(128); var a = {}; a.fill = buf.fill; a.fill(0);
   TypeError: Cannot call method 'fill' of undefined
   </pre></code>
   </li>
<li>Kota Iguchi 2015-03-19

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/177" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/177</a></li>
<li>Ewan Harris 2015-07-10

   Verified using:
   
   Windows 8.1
   Appc CLI (NPM): 4.1.0
   Appc CLI (Registry): 4.1.0
   Ti SDK: 4.1.0.GA
   
   When using changing the function parent such as 
   
   <code><pre>
   var API  = Ti.API; API.info('Hello, world');
   var info = Ti.API.info; info('Hello, world');
   var API  = {info:Ti.API.info}; API.info('Hello, world');
   </pre></code>
   
   the code works as expected
   
   Closing ticket</li>
</ol>


<p><a href="/TIMOB/TIMOB-18328.json">JSON Source</a></p>