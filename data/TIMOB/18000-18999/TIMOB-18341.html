---
title: "[TIMOB-18341] iOS: HTTPClient - Content-Type header is malformed when making a multipart/form-data POST request"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-02-12T08:57:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.4.1, Release 3.5.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>qe-3.5.0</td></tr>
<tr><th>Reporter</th><td>Wilson Luu</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2015-01-07T23:02:51.000+0000</td></tr>
<tr><th>Updated</th><td>2015-02-12T08:57:11.000+0000</td></tr>
</table>

<h3>Description</h3>

*Details:* Content-Type header is malformed when making a multipart/form-data POST request.

*Note:* This is *not a regression* as this occurs in 3.4.1.GA.

*Steps to reproduce:*
1. Create a Titanium app with the app.js attachment and include cricket.wav attachment in the Resources folder
2. In app.js, on line 13, replace <code>&lt;MACHINE_IP&gt;</code> with your machine's IP address; your device and machine should be on the same wifi network
3. Install app to device
4. Next, download local_server.js attachment and run it via terminal: <code>node local_server.js</code>
5. In the app, press the button

*Actual:* In terminal, the boundary parameter is not immediately after Content-Type multipart/form-data:
<code><pre>
$ node local_server.js 
headers: {
	"host": "172.16.3.225:1337",
	"x-titanium-id": "962dd664-7f04-4340-8273-1c0e7d4b4b51",
	"x-requested-with": "XMLHttpRequest",
	"accept": "*/*",
	"content-type": "multipart/form-data; charset=utf-8; boundary=0xTibOuNdArY_1420671499",
	"content-length": "81078",
	"accept-language": "en-us",
	"accept-encoding": "gzip, deflate",
	"connection": "keep-alive",
	"user-agent": "Appcelerator Titanium/3.4.1 (iPhone/8.1; iPhone OS; en_US;)"
}
</pre></code>
*Expected:*  The boundary parameter should be immediately after Content-Type multipart/form-data

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18341_53463/app.js">app.js</td></td><td>2015-01-07T23:02:51.000+0000</td><td>826</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18341_53464/cricket.wav">cricket.wav</td></td><td>2015-01-07T23:02:51.000+0000</td><td>80923</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18341_53462/local_server.js">local_server.js</td></td><td>2015-01-07T23:02:51.000+0000</td><td>240</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Pedro Enrique 2015-02-05

   PR by community member <a href="https://github.com/appcelerator/APSHTTPClient/pull/19" rel="nofollow" target="_blank">https://github.com/appcelerator/APSHTTPClient/pull/19</a>
   Reviewing it...</li>
<li>Khushbu Agrawal 2015-02-12

   Verified with below Test Environment:
   1. Mac OSX Yosemite 10.10
   2. Appcelerator Studio, build: 4.0.0.201502111458
   3. Titanium SDK, build: 4.0.0.v20150211151855 
   4. Titanium CLI, build: 3.6.0-dev
   5. Alloy: 1.5.1
   6. iPhone 6+ with iOS 8.1
   
   Content-Type header is not malformed as the boundary parameter is immediately after Content-Type multipart/form-data as shown in terminal.
   <code><pre>
   headers: {
   	"host": "192.168.0.109:1337",
   	"content-type": "multipart/form-data;boundary=0xTibOuNdArY_1423730453",
   	"accept-language": "en-us",
   	"accept-encoding": "gzip, deflate",
   	"connection": "keep-alive",
   	"accept": "*/*",
   	"user-agent": "Appcelerator Titanium/4.0.0 (iPhone/8.1; iPhone OS; en_SG;)",
   	"content-length": "81078",
   	"x-titanium-id": "61f383d9-0410-4b39-8127-92dce821040c",
   	"x-requested-with": "XMLHttpRequest"
   }
   </pre></code>
   
   Closing this ticket.</li>
<li>Khushbu Agrawal 2015-02-12

   Reopened issue for changing the comment code.</li>
</ol>


<p><a href="/TIMOB/TIMOB-18341.json">JSON Source</a></p>