---
title: "[TIMOB-18465] Globals are not (over)writable"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 3.5.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios-jscore, kroll, parity</td></tr>
<tr><th>Reporter</th><td>Pier Paolo Ramon</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2015-01-29T09:26:28.000+0000</td></tr>
<tr><th>Updated</th><td>2019-04-26T19:04:21.000+0000</td></tr>
</table>

<h3>Description</h3>

Currently globals are not set with the ‘right’ flags. We cannot actually say right or wrong flags, because they’re not in the EcmaScript definition.

Some discussion happened on <a href="https://github.com/smclab/titaniumifier/issues/31." rel="nofollow" target="_blank">https://github.com/smclab/titaniumifier/issues/31.</a>

The code to test the descriptors is the following:

<code><pre>
var global = (function () { return this; }());

if ((typeof window !== 'undefined') &&
    (window === global) &&
    (!window.hasOwnProperty('alert'))) {
  // In the browser the globals are not directly in the window, but in the
  // prototype chain
  global = Object.getPrototypeOf(global);
}

printPropertyDescriptor(global, 'alert');

printPropertyDescriptor(global, 'setTimeout');
printPropertyDescriptor(global, 'clearTimeout');
printPropertyDescriptor(global, 'setInterval');
printPropertyDescriptor(global, 'clearInterval');

function printPropertyDescriptor(obj, name) {
	var descriptor = Object.getOwnPropertyDescriptor(obj, 'clearTimeout');
	var formatted = JSON.stringify(descriptor, null, 2);
	console.log(name + " = " + formatted);
}
</pre></code>

The result is different in every environment. As you will see only Titanium *on iOS* is setting the properties as non-writable.

Also, if using <code>"use strict"</code> trying to overwrite those properties will result in an error thrown.

*Node.js*

<code><pre>
alert = {
  "writable": true,
  "enumerable": true,
  "configurable": true
}
setTimeout = {
  "writable": true,
  "enumerable": true,
  "configurable": true
}
clearTimeout = {
  "writable": true,
  "enumerable": true,
  "configurable": true
}
setInterval = {
  "writable": true,
  "enumerable": true,
  "configurable": true
}
clearInterval = {
  "writable": true,
  "enumerable": true,
  "configurable": true
}
</pre></code>

*Chrome*

<code><pre>
alert = {
  "writable": true,
  "enumerable": true,
  "configurable": false
}
setTimeout = {
  "writable": true,
  "enumerable": true,
  "configurable": false
}
clearTimeout = {
  "writable": true,
  "enumerable": true,
  "configurable": false
}
setInterval = {
  "writable": true,
  "enumerable": true,
  "configurable": false
}
clearInterval = {
  "writable": true,
  "enumerable": true,
  "configurable": false
}
</pre></code>

*Firefox*

<code><pre>
alert = {
  "configurable": true,
  "enumerable": true,
  "writable": true
}
setTimeout = {
  "configurable": true,
  "enumerable": true,
  "writable": true
}
clearTimeout = {
  "configurable": true,
  "enumerable": true,
  "writable": true
}
setInterval = {
  "configurable": true,
  "enumerable": true,
  "writable": true
}
clearInterval = {
  "configurable": true,
  "enumerable": true,
  "writable": true
}
</pre></code>

*Titanium Android*

<code><pre>
alert = {
  "writable": true,
  "enumerable": true,
  "configurable": true
}
setTimeout = {
  "writable": true,
  "enumerable": true,
  "configurable": true
}
clearTimeout = {
  "writable": true,
  "enumerable": true,
  "configurable": true
}
setInterval = {
  "writable": true,
  "enumerable": true,
  "configurable": true
}
clearInterval = {
  "writable": true,
  "enumerable": true,
  "configurable": true
}
</pre></code>

*Titanium iOS* (drumroll)

<code><pre>
alert = {
  "writable": false,
  "enumerable": true,
  "configurable": false
}
setTimeout = {
  "writable": false,
  "enumerable": true,
  "configurable": false
}
clearTimeout = {
  "writable": false,
  "enumerable": true,
  "configurable": false
}
setInterval = {
  "writable": false,
  "enumerable": true,
  "configurable": false
}
clearInterval = {
  "writable": false,
  "enumerable": true,
  "configurable": false
}
</pre></code>

<h3>Comments</h3>

<ol>
<li>Pier Paolo Ramon 2015-01-29

   Here’s the culprit: <a href="https://github.com/appcelerator/titanium_mobile/blob/2c7f6fb74fa772e1ecc8d9d5209f83c4a0c06aab/iphone/Classes/KrollContext.m#L1112" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/2c7f6fb74fa772e1ecc8d9d5209f83c4a0c06aab/iphone/Classes/KrollContext.m#L1112</a>
   
   Why are them explicitly set as <code>kTiPropertyAttributeReadOnly | kTiPropertyAttributeDontDelete</code>? There’s no (real) reason for doing this…</li>
</ol>


<p><a href="/TIMOB/TIMOB-18465.json">JSON Source</a></p>