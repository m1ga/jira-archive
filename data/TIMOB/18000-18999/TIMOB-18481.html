---
title: "[TIMOB-18481] iOS: Alert dialog issue with persistent set to true"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-02-17T19:21:07.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.5.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>qe-4.0.0</td></tr>
<tr><th>Reporter</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2015-01-30T15:11:51.000+0000</td></tr>
<tr><th>Updated</th><td>2015-03-05T23:23:50.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem Description</h4>
When you have a delay on an alert, with persistent set to true, you will experience a weird glitch when waiting for the alert and you pull down the phone notification window. The alert will appear behind the notification window, when you close the notification window, the alert will disappear. This doesn't happen with iOS 8.x

<h4>Steps to reproduce</h4>
1. Create a new mobile project Classic Titanium
2. Paste this code into app.js: 
<code><pre>
var win = Ti.UI.createWindow({backgroundColor:'white'});


var dateBaseView = Titanium.UI.createView({
	width : "80dip",
	height : "40dip",
	backgroundColor : 'green'
});
dateBaseView.addEventListener("click", showDatePicker);

win.add(dateBaseView);

function showDatePicker() {
	setTimeout(function() {
		var dialog = Titanium.UI.createAlertDialog({
			title : "Test Bug",
			message : "Testing",
			persistent : true,
			buttonNames : ["OK"]
		});
		dialog.show();
	}, 4000);
}
win.open();
</pre></code>
3. Run it in iOS 7 (either device or sim).
4. Click on the green square
5. Drop down the phone notification window from the top of the screen.
6. wait until the alert appears behind the current window.
7. Close the Window
8. You will see the alert dissapear. 

<h4>Extra info</h4>
This doesn't happen with iOS8. 

There is alternative ways to reproduce this, as well:

1. open app and tap on the green view. 
2. wait for the alert to appear. 
2. Double tap device home button immediately to go the recent running apps view. 
3. tap the app from recent running apps list to make it foreground again. 

The issue appears. 

Looks like something to do with the way iOS 7 handles window stack.



<h3>Comments</h3>

<ol>
<li>Vishal Duggal 2015-02-17

   Pull pending
   master- <a href="https://github.com/appcelerator/titanium_mobile/pull/6644" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6644</a></li>
<li>Eric Wieber 2015-03-05

   Verified fixed, using:
   
   Titanium SDK 4.0.0.v20150303161012
   Studio 4.0.0.201502171827
   CLI 3.4.2-rc4
   Xcode 6.2b5
   
   Alert is not dismissed when closing notification center, as expected.</li>
</ol>


<p><a href="/TIMOB/TIMOB-18481.json">JSON Source</a></p>