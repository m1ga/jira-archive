---
title: "[TIMOB-18500] Android: event.cancel not set properly for optionsDialog"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-11-13T23:55:32.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.3.0, Release 3.4.1, Release 3.5.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>TCSupport</td></tr>
<tr><th>Reporter</th><td>Neville Dastur</td></tr>
<tr><th>Assignee</th><td>Maggie Chen</td></tr>
<tr><th>Created</th><td>2014-09-05T11:16:43.000+0000</td></tr>
<tr><th>Updated</th><td>2017-11-17T01:32:45.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem Description</h4>
When using optionDialog on android the click event returns depending on buttons vs options being clicked.

even.cancel is true when the cancel button is clicked, however it also gets set to true when the option with same index is clicked or an additional test for event.button needs to be performed. Really this should happen at the SDK level.



<h4>Steps to reproduce</h4>
1. Create a new mobile project (Ti Classic)
2. Add this to app.js:
<code><pre> 
var win = Ti.UI.createWindow({
  backgroundColor: 'white',
  exitOnClose: true,
});

var opts = {
  title: 'Delete File?'
};

var isAndroid = Ti.Platform.osname == 'android';

if(isAndroid){
  opts.options = ['Confirm', 'Cancel'];
  opts.buttonNames = ['Help'];
  //opts.Help = 0;
} else {
  opts.options = ['Confirm', 'Help', 'Cancel'];
}

var dialog;
win.addEventListener('click',function(){
    dialog = Ti.UI.createOptionDialog(opts);
    dialog.show();
    dialog.addEventListener('click', onSelectDialog);
});

function onSelectDialog(event){
	if(isAndroid){
            //  event.button===true test is necessary 
            if(event.button === true /*&& event.Help === true*/) alert("ok");
        }
   //alert("ok") ;
}

win.open();
</pre></code>
3. Run it in device. 


<h3>Comments</h3>

<ol>
<li>Maggie Chen 2017-09-25

   PR <a href="https://github.com/appcelerator/titanium_mobile/pull/9476" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9476</a></li>
<li>Lokesh Choudhary 2017-11-10

   FR Passed.
   Waiting for merge to get enabled.</li>
<li>Lokesh Choudhary 2017-11-13

   PR Merged.</li>
<li>Abir Mukherjee 2017-11-15

   Changes are seen in SDK 7.0.0.v20171114203226. Need to wait for CR to be completed before closing.</li>
<li>Lokesh Choudhary 2017-11-17

   Verified the fix in SDK  7.0.0.v20171116132144.
   
   Closing.
   
   Studio Ver:     5.0.0.201711161920
   SDK Ver:        7.0.0.v20171116132144
   OS Ver:         10.12.3
   Xcode Ver:      Xcode 8.3.3
   Appc NPM:       4.2.11-2
   Appc CLI:       7.0.0-master.27
   Ti CLI Ver:     5.0.14
   Alloy Ver:      1.10.9
   Node Ver:       8.9.1
   Java Ver:       1.8.0_101
   Devices:        ⇨ google Pixel --- Android 7.1.1
                   ⇨ google Nexus 5 --- Android 6.0.1
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-18500.json">JSON Source</a></p>