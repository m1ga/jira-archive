---
title: "[TIMOB-18517] Windows: Investigate cross-platform require implementation in GlobalObject"
---
<table>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Gary Mathews</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2015-02-05T15:25:24.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T19:54:48.000+0000</td></tr>
</table>

<h3>Description</h3>

From <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/110#discussion_r24169482" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/110#discussion_r24169482</a>

It looks to me like we could implement GlobalObject and require entirely cross-platform, but it'd have to defer to using Ti.Filesystem API. Right now that requires us to jump into JS to do so:
<code><pre>
JSValue Titanium_property = get_context().get_global_object().GetProperty("Titanium");
JSObject Titanium = static_cast&lt;JSObject&gt;(Titanium_property);

JSValue FS_property = Titanium.GetProperty("Filesystem");
JSObject FS = static_cast&lt;JSObject&gt;(FS_property);

JSValue File_property = FS.GetProperty("File");
JSObject File = static_cast&lt;JSObject&gt;(File_property);

auto file = File.CallAsConstructor(path);

JSValue resolve_property = file.GetProperty("resolve");
JSObject resolve = static_cast&lt;JSObject&gt;(resolve_property);

return resolve();
</pre></code>

We were reluctant to do so out of concern for performance/memory overhead of accessing the JS objects/properties/functions and then calling them (and marshaling the values back and forth between c++ types and JSValues).

What is the actual performance overhead involved here? Is it small enough that a cross-platform implementation is of high importance? Is there a way we can use pure C++ and still do this cross-platform (i.e. can we still get a reference/defer to the platform specific implementation of File when we need to)?

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-18517.json">JSON Source</a></p>