---
title: "[TIMOB-18531] Windows: Use default publisher-guid when none is given on build"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-03-29T16:08:48.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.3.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2015-02-06T14:44:28.000+0000</td></tr>
<tr><th>Updated</th><td>2016-05-12T21:07:07.000+0000</td></tr>
</table>

<h3>Description</h3>

The <code>--win-publisher-id</code> or <code>-I</code> option is required for <code>ti build</code>, so it must be given on every build if not set via <code>ti setup</code> (TIMOB-16748).

On Android, we use the the <code>dev_keystore</code> included in the SDK when none is given.

Would it be an option to have a similar approach for Windows and default to the <code>00000000-0000-1000-8000-000000000000</code> mentioned in the [blog](<a href="http://www.appcelerator.com/blog/2014/12/windows-platform-preview/)" rel="nofollow" target="_blank">http://www.appcelerator.com/blog/2014/12/windows-platform-preview/)</a> for example ?

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2015-07-07

   I think this may make sense for development builds, but we'd likely want to enforce the user supplies one explicitly for any production/packaging builds intended to be released eitehr ad-hoc or to the stores...</li>
<li>Fokke Zandbergen 2015-07-07

   Yes, for sure. And we might want to do that for Android store builds as well as I think atm it defaults to the developer keystore without notice.</li>
<li>Gary Mathews 2015-10-02

   PR: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/447" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/447</a></li>
<li>Ewan Harris 2016-02-02

   Reopening ticket:
   
   Windows 10 Pro
   VS 2015 Update 1
   Appc NPM: 4.2.3-1
   Appc Core: 5.2.0-239
   Ti SDK: 5.2.0.v20160202103508
   
   <h4>Steps to reproduce</h4>
   
   <h4>Remove publisherId from you titanium config <code>ti config -r windows.publisherId</code></h4>
   <h4>Build a project using <code>appc run -p windows -T wp-device --deploy-type production -l trace</code></h4>
   
   <h4>Actual result </h4>
   
   Build errors out with the below
   <code><pre>
   2016-02-02T22:24:57.621Z | ERROR  | An uncaught exception was thrown!
   Cannot read property 'indexOf' of undefined
   2016-02-02T22:24:57.625Z | ERROR  | Cannot read property 'indexOf' of undefined
   2016-02-02T22:24:57.628Z | TRACE  | TypeError: Cannot read property 'indexOf' of undefined
       at WindowsBuilder.initialize (C:\ProgramData\Titanium\mobilesdk\win32\5.2.0.v20160202103508\windows\cli\commands\_build\initialize.js:71:22)
       at C:\ProgramData\Titanium\mobilesdk\win32\5.2.0.v20160202103508\node_modules\node-appc\node_modules\async\lib\async.js:689:13
       at iterate (C:\ProgramData\Titanium\mobilesdk\win32\5.2.0.v20160202103508\node_modules\node-appc\node_modules\async\lib\async.js:265:13)
       at process._tickCallback (node.js:355:11)
   ---------------------------------------------
       at C:\ProgramData\Titanium\mobilesdk\win32\5.2.0.v20160202103508\node_modules\node-appc\node_modules\async\lib\async.js:275:35
       at C:\ProgramData\Titanium\mobilesdk\win32\5.2.0.v20160202103508\node_modules\node-appc\node_modules\async\lib\async.js:44:16
       at C:\ProgramData\Titanium\mobilesdk\win32\5.2.0.v20160202103508\node_modules\node-appc\node_modules\async\lib\async.js:694:17
       at C:\ProgramData\Titanium\mobilesdk\win32\5.2.0.v20160202103508\node_modules\node-appc\node_modules\async\lib\async.js:173:37
       at WindowsBuilder.doAnalytics (C:\ProgramData\Titanium\mobilesdk\win32\5.2.0.v20160202103508\windows\cli\commands\_build\analytics.js:56:2)
       at C:\ProgramData\Titanium\mobilesdk\win32\5.2.0.v20160202103508\node_modules\node-appc\node_modules\async\lib\async.js:689:13
       at iterate (C:\ProgramData\Titanium\mobilesdk\win32\5.2.0.v20160202103508\node_modules\node-appc\node_modules\async\lib\async.js:265:13)
       at process._tickCallback (node.js:355:11)
   ---------------------------------------------
       at C:\ProgramData\Titanium\mobilesdk\win32\5.2.0.v20160202103508\node_modules\node-appc\node_modules\async\lib\async.js:275:35
       at C:\ProgramData\Titanium\mobilesdk\win32\5.2.0.v20160202103508\node_modules\node-appc\node_modules\async\lib\async.js:44:16
       at C:\ProgramData\Titanium\mobilesdk\win32\5.2.0.v20160202103508\node_modules\node-appc\node_modules\async\lib\async.js:694:17
       at C:\ProgramData\Titanium\mobilesdk\win32\5.2.0.v20160202103508\node_modules\node-appc\node_modules\async\lib\async.js:173:37
       at C:\Users\ewanh\.appcelerator\install\5.2.0-239\package\node_modules\titanium\node_modules\async\lib\async.js:52:16
       at WindowsBuilder.done (C:\Users\ewanh\.appcelerator\install\5.2.0-239\package\node_modules\titanium\node_modules\async\lib\async.js:248:21)
       at WindowsBuilder.&lt;anonymous&gt; (C:\Users\ewanh\.appcelerator\install\5.2.0-239\package\node_modules\titanium\node_modules\async\lib\async.js:44:16)
       at CLI._fireHookCallback (C:\Users\ewanh\.appcelerator\install\5.2.0-239\package\node_modules\titanium\lib\hook.js:269:12)
       at C:\Users\ewanh\.appcelerator\install\5.2.0-239\package\node_modules\titanium\lib\hook.js:248:10
   </pre></code>
   
   <h4>Expected result</h4>
   
   Based off the discussion on the pull request, I believe the build should prompt for a publisherId
   
   *Note*
   
   Also when building for <code>dist-winstore</code> or <code>dist-phonestore</code> there is no prompt asking for a publisherId</li>
<li>Fokke Zandbergen 2016-02-03

   Seems like publisherId is null instead of expected string here:
   <a href="https://github.com/garymathews/titanium_mobile_windows/blob/1c1ba7fc02e5a93b3a0b3612f2b5c08cd2fe53c3/cli/commands/_build/initialize.js#L67" rel="nofollow" target="_blank">https://github.com/garymathews/titanium_mobile_windows/blob/1c1ba7fc02e5a93b3a0b3612f2b5c08cd2fe53c3/cli/commands/_build/initialize.js#L67</a></li>
<li>Christopher Williams 2016-02-03

   I was imprecise in my language as I said "production/packaging" builds should prompt. You thought of a test case I hadn't considered, which was a production deploy type on device - I was thinking simply the dist-phonestore and dist-winstore targets. But in this case, if you're explicitly choosing production deploy type, then yeah it probably also makes sense to force a real publisherid here.
   
   </li>
<li>Gary Mathews 2016-02-24

   PR: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/567" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/567</a></li>
<li>Ewan Harris 2016-03-21

   Reopening ticket:
   
   Windows 10 Pro
   Appc NPM: 4.2.4-2
   Appc Core: 5.2.1-17
   Titanium SDK: 5.3.0.v20160318230005
   
   <h4>Steps to reproduce</h4>
   
   1. Remove publisherId from you titanium config <code>ti config -r windows.publisherId</code>
   2. Build a project using <code>appc run -p windows -T dist-phonestore</code>
   
   <h4>Actual result</h4>
   
   When building to <code>dist-phonestore</code> or <code>dist-winstore</code> the CLI does not prompt for a publsiher-guid.
   
   <h4>Expected result</h4>
   
   I should be prompted to enter a guid when building for <code>dist-phonestore</code> or <code>dist-winstore</code> </li>
<li>Christopher Williams 2016-03-22

   [~gmathews] Can you take a look? This got re-opened again...</li>
<li>Kota Iguchi 2016-03-28

    If I understand correctly currently prompt is shown only when <code>deploy-type</code> is <code>production</code>. [cli/commands/_build/config/winPublisherId.js](<a href="https://github.com/appcelerator/titanium_mobile_windows/pull/567/files)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/567/files)</a> </li>
<li>Christopher Williams 2016-03-28

    So perhaps this is just an issue of us not defaulting deployType to 'production' on dist-* target builds?</li>
<li>Kota Iguchi 2016-03-29

    <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/597" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/597</a></li>
<li>Ewan Harris 2016-05-12

    Verified using: 
    
    Windows 10 Pro
    Visual Studio 2015 Community Update 2
    Appc Core: 5.3.0-43
    Appc NPM: 4.2.5-5
    Ti SDK: 5.3.0.v20160512105713
    
    Prompt for publisher-guid is now shown when packaging the app for dist-winstore and dist-phonestore and also when building with <code>\--deploy-type</code> set to production for wp-emulator, wp-device and ws-local.
    
    Closing ticket</li>
</ol>


<p><a href="/TIMOB/TIMOB-18531.json">JSON Source</a></p>