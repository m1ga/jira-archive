---
title: "[TIMOB-18538] CLI: Fix incompatibilities with Node 0.12"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-02-13T08:04:17.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.4.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.4.2</td></tr>
<tr><th>Components</th><td>CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tim Poulsen</td></tr>
<tr><th>Assignee</th><td>Tim Poulsen</td></tr>
<tr><th>Created</th><td>2015-02-09T16:43:45.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-16T22:21:14.000+0000</td></tr>
</table>

<h3>Description</h3>

Node 0.12 has been released. The Titanium CLI is not compatible:

<code><pre>
â‰« ti setup
/usr/local/lib/node_modules/titanium/node_modules/longjohn/dist/longjohn.js:185
        throw e;
              ^
ChildProcess.emit (events.js:110:17),maybeClose (child_process.js:1008:16),Socket.<anonymous> (child_process.js:1176:11),Socket.emit (events.js:107:17),Pipe.close (net.js:476:12)
</pre></code>

To test:

1. Install Node 0.12 (or use a node version manager like <code>n</code> and set your current version to 0.12)
2. Run a <code>ti</code> command, such as <code>ti setup check</code> or <code>ti info</code>

Perhaps related to async processing or spawning child processes.  Enter <code>ti setup</code> choose option 2 (or type <code>k</code>), fails. Choose option 2 again, fails. Choose it a third time and it works; you get the setup check info. However, it doesn't detect my JDK and therefore my Android SDK info. 

<h3>Comments</h3>

<ol>
<li>Chris Barber 2015-02-09

   Smells like LiveView.</li>
<li>Praveen Innamuri 2015-02-09

   When we try to get the info for iOS and Android, Node process either crashes or terminate with a error.
   
   <code><pre>
   titanium info -t ios -o json
   </pre></code></li>
<li>Tim Poulsen 2015-02-09

   Note: NodeJS 0.11.14 works fine, 0.11.15 fails with same errors as noted above for 0.12.0</li>
<li>Tim Poulsen 2015-02-09

   Fix is in node-appc
   
   Fixes will need to be merged / applied in this order:
   
   node-appc PR: <a href="https://github.com/appcelerator/node-appc/pull/105" rel="nofollow" target="_blank">https://github.com/appcelerator/node-appc/pull/105</a> (merged)
   
   Titanium CLI PR: <a href="https://github.com/appcelerator/titanium/pull/188" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium/pull/188</a>  (merged)
   
   node-ios-device PR: <a href="https://github.com/appcelerator/node-ios-device/pull/2" rel="nofollow" target="_blank">https://github.com/appcelerator/node-ios-device/pull/2</a> (ready for npm publish)
   
   ioslib PR: <a href="https://github.com/appcelerator/ioslib/pull/11" rel="nofollow" target="_blank">https://github.com/appcelerator/ioslib/pull/11</a> (ready to merge, npm publish)
   
   Titanium SDK PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/6628" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6628</a> (ready to merge, waiting on npm publish of components)
   </li>
<li>Tim Poulsen 2015-02-10

   Functional review steps:
   
   1. Install Node 0.12 or use a node version manager such as <a href="https://www.npmjs.com/package/n" rel="nofollow" target="_blank">https://www.npmjs.com/package/n</a> 
   2. Install the Titanium CLI from master <code>sudo npm install -g git://github.com/appcelerator/titanium.git</code>
   3. Build the SDK from the PR above, install, and set it as your default SDK
   4. Download the ioslib and node-ios-device repos and copy their files to the matching locations within your installed copy (not your repo) of the SDK that you installed in the preceding step.
   5. Run some Ti CLI commands: <code>ti info</code>, <code>ti setup</code>, <code>ti sdk select</code>, etc.
   6. Due to TIMOB-18546 (LiveView not compatible with Node 0.12), either <code>liveview rm clihook</code> or edit your ~/.titanium/config.json file and remove the com.appcelerator.titanium.liveview entry from the hooks section to disable LiveView.
   7. Build a project (make sure to set its tiapp.xml to 4.0.0).</li>
<li>Tim Poulsen 2015-02-11

   Can you review even without the LiveView fix (in the related ticket)?</li>
<li>Feon Sua Xin Miao 2015-02-13

   PR merged.</li>
<li>Lee Morris 2017-03-16

   Closing ticket as fixed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-18538.json">JSON Source</a></p>