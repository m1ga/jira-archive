---
title: "[TIMOB-18712] Facebook module: upgrade iOS Facebook SDK and improve requestDialog"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-04-21T02:59:14.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.1.0</td></tr>
<tr><th>Components</th><td>Android, iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chee Kiat Ng</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2015-03-18T04:56:20.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-20T18:09:47.000+0000</td></tr>
</table>

<h3>Description</h3>

There is a request on github that we should expose the 'resultURL' from presentRequestDialog method. 

Also, we should upgrade the Facebook sdk in the iOS module from 3.21.1 to 3.23.1.

<code><pre>
var fb = require('facebook');

var win = Ti.UI.createWindow({
	title: 'RequestDialog',
	backgroundColor:'#fff',
	fullscreen: false
});

var requestDialog = Ti.UI.createButton({
	title: 'Request Dialog',
	top: 180, left: 10, right: 10, height: 40
});

requestDialog.addEventListener('click', function() {
	fb.presentSendRequestDialog( 
		{message: 'Go to <a href="https://appcelerator.com/" rel="nofollow" target="_blank">https://appcelerator.com/</a>'}, 
		{data:
        "{\"badge_of_awesomeness\":\"1\"," +
        "\"social_karma\":\"5\"}"});
});

fb.addEventListener('requestDialogCompleted', function(e) {
	if (e.success) {
		alert('Request dialog completed. Returned URL is ' + e.resultURL);
	}
	else if (e.cancelled) {
		alert('Request dialog cancelled');
	}
	else {
		alert('error ' + e.error);           
	}
});

win.add(requestDialog);
win.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Chee Kiat Ng 2015-03-18

   Done during HackNight!
   PR here: <a href="https://github.com/appcelerator-modules/ti.facebook/pull/7" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.facebook/pull/7</a>
   
   [~msamah], please help with the android component.</li>
<li>Ashraf Abu 2015-03-18

   Will do.</li>
<li>Chee Kiat Ng 2015-04-15

   Facebook iOS SDK has upgraded to version 4.0.1 on April 2nd 2015.
   To be considered for this improvement.</li>
<li>Fokke Zandbergen 2015-04-20

   [~cng] This resultURL also has the recipient user IDs as described [here](<a href="https://developers.facebook.com/docs/games/requests/v2.2#response)" rel="nofollow" target="_blank">https://developers.facebook.com/docs/games/requests/v2.2#response)</a> right?
   
   I could really use this update, for Android as well. Any eta on it?</li>
<li>Chee Kiat Ng 2015-04-21

   [~fokkezb] just merged the pr. <a href="https://github.com/appcelerator-modules/ti.facebook/pull/12" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.facebook/pull/12</a>
   yes the resultURL returns the recipient user iDs.
   </li>
<li>Fokke Zandbergen 2015-04-21

   [~cng] excellent, how about Android? ;)</li>
<li>Chee Kiat Ng 2015-04-21

   It's there too sir</li>
<li>Fokke Zandbergen 2015-04-21

   [~cng] A sorry, I was mislead by the title of the PR which only spoke about Android. Awesome!, I'll give it a try.</li>
<li>Lee Morris 2017-03-20

   Closing ticket as fixed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-18712.json">JSON Source</a></p>