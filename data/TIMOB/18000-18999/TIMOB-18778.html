---
title: "[TIMOB-18778] Android: Update latest supported build tools version to 22"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-04-10T13:09:01.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Components</th><td>Android, CLI</td></tr>
<tr><th>Labels</th><td>beta4, qe-4.0.0</td></tr>
<tr><th>Reporter</th><td>Lokesh Choudhary</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2015-04-03T00:07:34.000+0000</td></tr>
<tr><th>Updated</th><td>2017-10-18T21:37:27.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Steps To Reproduce:</h4>
1. Make sure you do not have android API 21 installed on the machine. You can have all other android API's installed including API 22.
2. Build an android app to device/emulator.

<h4>Actual Results:</h4>
1. The build fails at packaging stage.
2. If API 21 is installed build succeeds.
3. If API 22 is installed & API 21 is not installed, still the build fails.
4. We see that if API 21 is not installed & API 22 is installed the build targets sdk 19 rather than 22.

NOTE : Logs attached for reference.

<h4>Expected Results:</h4>
1. The build should succeed if android API 21 is not installed.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18778_54793/logs.txt">logs.txt</td></td><td>2015-04-03T00:07:34.000+0000</td><td>64507</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2015-04-03

   We need to update <a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/package.json#L22" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/package.json#L22</a> to fix this.</li>
<li>Ingo Muschenetz 2015-04-03

   [~lokeshchdhry] please try deleting everything other than 22 and try again.</li>
<li>Lokesh Choudhary 2015-04-03

   [~ingo] 
   1. If I remove all API's except API 22 then I get error from studio "You don't have android 2.3.3 installed".
   2. If I have android 2.3.3 (API 10) & API 22. The build process targets API 10 & the build process fails with the same errors as in the logs attached.
   <code><pre>
   [INFO] :   Deploy type: development
   [INFO] :   Building for target: emulator
   [INFO] :   Building for emulator: Lollipop Preview - Nexus 5 - 5.0.0 - API 21 - 1080x1920
   [INFO] :   Targeting Android SDK: 10
   [INFO] :   Building for the following architectures: armeabi, armeabi-v7a, x86
   [INFO] :   Signing with keystore: /Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/4.0.0.Beta2/android/dev_keystore (tidev)
   </pre></code></li>
<li>Ingo Muschenetz 2015-04-07

   Chris, could you please look at this when available?</li>
<li>Chris Barber 2015-04-07

   [~ingo] Do we support API 22? If so, then we need to update Android's package.json.</li>
<li>Ingo Muschenetz 2015-04-07

   [~cbarber] yes. Though I believe the is also a logic error in the code.
   
   Assume maximum of 21:
   * 19 and 22 installed, use 22
   * 22 installed, use 22
   * 19 installed, fail
   * 19, 21, 22 installed, use 21
   
   We should err on the side of using the newest version that we think should work.
   </li>
<li>Chris Barber 2015-04-08

   timob master pr: <a href="https://github.com/appcelerator/titanium_mobile/pull/6773" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6773</a>
   timob 4_0_X pr: <a href="https://github.com/appcelerator/titanium_mobile/pull/6774" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6774</a></li>
<li>Feon Sua Xin Miao 2015-04-10

   PR merged.</li>
<li>Lokesh Choudhary 2015-05-05

   Verified the fix.
   
   Closing.
   
   Environment:
   Appc Studio :  4.0.0.201505042041
   Ti SDK :  4.0.0RC2
   CLI : 4.0.0-beta8
   Alloy : 1.6.0-beta4
   MAC Yosemite : 10.10.3
   Appc npm : 0.3.55
   Appc CLI : 0.2.279
   Node: v0.10.37</li>
</ol>


<p><a href="/TIMOB/TIMOB-18778.json">JSON Source</a></p>