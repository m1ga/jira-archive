---
title: "[TIMOB-18780] iOS: Add ability for Background Fetch tasks to support JSON responses"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2015-04-08T21:20:07.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Eduardo Gomez</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2015-04-06T18:01:59.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-14T05:02:46.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Feature Request </h4>
Add ability to get a JSON response for Background Fetch task. When you try to use same url using url session module, response doesn't contain text instead of data as empty JS object of "downloadcompleted" event. 
<code><pre>
[INFO]  e{"taskIdentifier":1,"data":{},"bubbles":true,"type":"downloadcompleted","source":{},"cancelBubble":false}
[INFO]  sessioncompleted {"errorCode":0,"taskIdentifier":1,"message":"","success":true,"bubbles":true,"type":"sessioncompleted","source":{},"cancelBubble":false}
[INFO]  Downloads completed successfully.
[INFO]  Download task :1 completed, success ? : true
</pre></code>

<h4>Appcelerator Docs</h4>
<a href="http://docs.appcelerator.com/titanium/3.0/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/3.0/#</a>!/guide/iOS_Background_Services 

<h4>Sample Code</h4>
<a href="https://gist.github.com/egomez99/2d968326454e0dd8401c" rel="nofollow" target="_blank">https://gist.github.com/egomez99/2d968326454e0dd8401c</a>

<h4>Additional info</h4>
downloadcompleted event currently only supports Titanium.Blob data type for a download nsurlsession task.  
<a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.App.iOS-event-downloadcompleted 

<h4>Apple Docs</h4>
<a href="https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html" rel="nofollow" target="_blank">https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html</a> 

<a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i" rel="nofollow" target="_blank">https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i</a>

<h3>Comments</h3>

<ol>
<li>Vishal Duggal 2015-04-08

   Use JSON.stringify and Blob.text methods to convert blob data to JSON</li>
<li>Lee Morris 2017-03-14

   Closing ticket as the issue is not our bug.</li>
</ol>


<p><a href="/TIMOB/TIMOB-18780.json">JSON Source</a></p>