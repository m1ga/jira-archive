---
title: "[TIMOB-18858] Android: Videoplayer events do not work well on Android lollipop"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android-5, videoplayer</td></tr>
<tr><th>Reporter</th><td>William Hetherington</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2015-04-24T19:45:04.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T19:55:31.000+0000</td></tr>
</table>

<h3>Description</h3>

The 'complete' event does not seem to fire from the VideoPlayer closes, nor does the click handler for the "Exit Video" button I added fire when I hit "Exit Video", but the VideoPlayer does close. Using the "back" button on the device itself to close the video player does not cause 'complete' to fire either.

I have some code similar to the following:

<code><pre>
function openPlayer(e) {
  var videoPlayer = Ti.Media.createVideoPlayer({
    url: "/demo.mp4",
    mediaControlStyle: Titanium.Media.VIDEO_CONTROL_FULLSCREEN,
    scalingMode: Ti.Media.VIDEO_SCALING_ASPECT_FIT,
    fullscreen: true,
    autoplay: true
  });
 
  var closeButton = Ti.UI.createButton({
    title: "Exit Video",
    top: "0dp",
    height: "40dp",
    left: "10dp",
    right: "10dp"
  });
 
  closeButton.addEventListener('click', function() {
    videoPlayer.hide();
    videoPlayer.release();
    videoPlayer = null;
  });
 
  videoPlayer.add(closeButton);
 
  videoPlayer.addEventListener('load', function(player) {
    console.log("loaded");
  });
 
  videoPlayer.addEventListener('keypressed', function(e) {
    console.log("keypressed");
  });
  videoPlayer.addEventListener('complete', function(player) {
    console.log("DONE");
  });
  videoPlayer.addEventListener('playing', function(player) {
    console.log("playing");
  });
  videoPlayer.addEventListener('error', function(player) {
    console.log("error");
  });
}
 
function onClick(e) {
  openPlayer(null);
}
$.btn_open.addEventListener("click", onClick);
$.index.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Michael Gangolf 2015-04-24

   Not working on a Nexus 4 (5.1) with 3.5.1 GA and 3.5.2.v20150313152423
   
   According to this file:
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/media/src/java/ti/modules/titanium/media/VideoPlayerProxy.java#L714" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/media/src/java/ti/modules/titanium/media/VideoPlayerProxy.java#L714</a>
   it should fire if it was playing and the activity gets destroyed. But it doesn't seem to fire on android</li>
</ol>


<p><a href="/TIMOB/TIMOB-18858.json">JSON Source</a></p>