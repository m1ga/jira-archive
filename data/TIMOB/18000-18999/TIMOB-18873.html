---
title: "[TIMOB-18873] Building an iOS app with 4.0.0 and then rebuilding with 3.5.1.GA fails"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-07-14T21:58:47.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 4.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.0.0</td></tr>
<tr><th>Components</th><td>iOS, Tooling</td></tr>
<tr><th>Labels</th><td>merge-4.1.1, qe-4.0.0</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Created</th><td>2015-05-07T00:44:18.000+0000</td></tr>
<tr><th>Updated</th><td>2015-09-01T23:08:49.000+0000</td></tr>
</table>

<h3>Description</h3>

Description

When building a project with a 4.0.0 SDK and then rebuilding the project with 3.5.1.GA the build fails with the below.

<code><pre>
[TRACE] Undefined symbols for architecture i386:
[TRACE]   "_Ti_WTFCrash", referenced from:
[TRACE]       TiDebuggerInterface::resetObjectProperty(int, std::__1::vector&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, std::__1::allocator&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt; &gt; const&) in libti_ios_debugger.a(TiDebuggerInterface.o)
[TRACE] ld: symbol(s) not found for architecture i386
[TRACE] clang: error: linker command failed with exit code 1 (use -v to see invocation)
[ERROR] 2015-05-06 17:57:01.479 xcodebuild[16656:2799819]  DeveloperPortal: Using pre-existing current store at URL (file:///Users/eharris/Library/Developer/Xcode/DeveloperPortal%206.3.db).
[ERROR] ** BUILD FAILED **
[ERROR] The following build commands failed:
[ERROR]         Ld build/testApp123.build/Debug-iphonesimulator/testApp123-universal.build/Objects-normal/x86_64/testApp123 normal x86_64
[ERROR]         Ld build/testApp123.build/Debug-iphonesimulator/testApp123-universal.build/Objects-normal/i386/testApp123 normal i386
[ERROR] (2 failures)
</pre></code>

*Notes* As per the linked ticket when cleaning I do not see the issue, on Android I am not sure whether the issue will occur due to  CLI-616. Full output is attached as fullOutput.txt

This issue can be reproduced using Titanium CLI@4.0.0-beta8 so is not an appc cli issues

<h4>Steps to reproduce</h4>
1. Create a project using a 4.0.0 SDK
2. Build the project using <code>appc run -p ios</code>
3. Change the SDK in the tiapp.xml and run ti sdk select and choose the latest 3.5.1.GA
4. Run <code>appc run -p ios</code> again

<h4>Actual result</h4>
2. The build will pass
4. The build will fail with errors such as the one listed above

<h4>Expected result</h4>
The build should pass both times


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18873_55265/fullOutput.txt">fullOutput.txt</td></td><td>2015-05-07T01:23:09.000+0000</td><td>2596891</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2015-05-07

   Reopened to repurpose</li>
<li>Ingo Muschenetz 2015-05-07

   I think this may be expected, no? Do we need to force a clean?</li>
<li>Pedro Enrique 2015-05-08

   The CLI should force a clean build after any changes to tiapp.xml 
   The error we're seeing here is a Titanium app building with the wrong version of the JSCore. The engine changed slightly from 3.5.1 to 4.0.0</li>
<li>Feon Sua Xin Miao 2015-05-14

   PR: <a href="https://github.com/appcelerator/appc-cli-titanium/pull/91" rel="nofollow" target="_blank">https://github.com/appcelerator/appc-cli-titanium/pull/91</a></li>
<li>Praveen Innamuri 2015-07-14

   PR merged to master.</li>
<li>Wilson Luu 2015-09-01

   Closing ticket as fixed. Verified that I was able to build a mobile project with 5.0.0 SDK, then build with 4.1.0.GA SDK without any issues.
   
   Tested on:
   
   Appc CLI NPM: 4.2.0-1
   Appc CLI Core: 5.0.0-33
   Arrow: 1.2.52
   SDK: 5.0.0.v20150901105514
   Node: v0.10.38
   OS: Yosemite (10.10.5)
   Xcode: 7 beta 6 </li>
</ol>


<p><a href="/TIMOB/TIMOB-18873.json">JSON Source</a></p>