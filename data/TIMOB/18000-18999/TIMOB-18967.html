---
title: "[TIMOB-18967] Nine-patch splash screen showing black blocks with 4.0.0.GA on Android 5.x"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Done</td></tr>
<tr><th>Resolution Date</th><td>2015-06-15T08:30:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>look1, splash-screen</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Ashraf Abu</td></tr>
<tr><th>Created</th><td>2015-05-29T17:16:19.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:34:53.000+0000</td></tr>
</table>

<h3>Description</h3>

An app build with 4.0.0.GA (regardless of Android Build Tools version) that uses (as recommended) nine-patch splash images displays black blocks overlaid on the image when runs on an Android 5.x device. It is OK on Android 4.4.4 and when build with 3.5.1.GA it is OK on both Android devices.

<h4>Reproduce</h4>

Run the attached project on different environments. The project is created with <code>ti create</code>, has no modifications to the <code>&lt;android&gt;</code> section in <code>tiapp.xml</code> and nine-patch splash images according to the [guide](<a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/guide/Icons_and_Splash_Screens-section-29004897_IconsandSplashScreens-Androidsplashscreenconsiderations).

Attached are screenshots for different SDK, Android and Tools versions.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18967_55818/background_fix_2.9.png">background_fix_2.9.png</td></td><td>2015-06-12T14:12:24.000+0000</td><td>28942</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18967_55817/background_fix.9.png">background_fix.9.png</td></td><td>2015-06-12T14:03:40.000+0000</td><td>28909</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18967_55815/background.9.png">background.9.png</td></td><td>2015-06-12T11:36:35.000+0000</td><td>64692</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18967_55831/fix_1.png">fix_1.png</td></td><td>2015-06-15T02:38:55.000+0000</td><td>110597</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18967_55830/fix_2.png">fix_2.png</td></td><td>2015-06-15T02:38:58.000+0000</td><td>122805</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18967_55968/fix_final.9.png">fix_final.9.png</td></td><td>2015-06-26T11:14:53.000+0000</td><td>52833</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18967_55662/np.zip">np.zip</td></td><td>2015-05-29T17:17:08.000+0000</td><td>173717</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18967_55661/SDK 3.5.1 - Android 5.1.0 - Tools 21.1.2.png">SDK 3.5.1 - Android 5.1.0 - Tools 21.1.2.png</td></td><td>2015-05-29T17:13:58.000+0000</td><td>86711</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18967_55660/SDK 4.0.0 - Android 4.4.4 - Tools 22.0.1.png">SDK 4.0.0 - Android 4.4.4 - Tools 22.0.1.png</td></td><td>2015-05-29T17:13:58.000+0000</td><td>81195</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18967_55659/SDK 4.0.0 - Android 5.1.0 - Tools 21.1.2.png">SDK 4.0.0 - Android 5.1.0 - Tools 21.1.2.png</td></td><td>2015-05-29T17:13:58.000+0000</td><td>88378</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-18967_55658/SDK 4.0.0 - Android 5.1.0 - Tools 22.0.1.png">SDK 4.0.0 - Android 5.1.0 - Tools 22.0.1.png</td></td><td>2015-05-29T17:13:58.000+0000</td><td>88987</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ashraf Abu 2015-06-12

   [~fokkezb] The Nine-patch in the sample has only the top and left set. Could you try and see what happens if you set the right and bottom (Padding box) in the Nine-patch image?</li>
<li>Fokke Zandbergen 2015-06-12

   [~msamah] actually, the nine-patch in the sample already has right and bottom set. Here is the source:
   
   <a href="https://raw.githubusercontent.com/FokkeZB/Sample.RSS/alloy/platform/android/res/drawable-xxhdpi/background.9.png" rel="nofollow" target="_blank">https://raw.githubusercontent.com/FokkeZB/Sample.RSS/alloy/platform/android/res/drawable-xxhdpi/background.9.png</a></li>
<li>Fokke Zandbergen 2015-06-12

   Attached example nine-patch splash screen used for screenshots.</li>
<li>Ashraf Abu 2015-06-12

   Tried this on native and the bug exists. This is a native issue whereby when you use a nine-patch image as background and don't specify the padding box / padding line [<a href="http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch" rel="nofollow" target="_blank">http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch</a>] what happens is that it doesn't get the correct width and length for that activity. 
   
   To solve it, one needs to add padding. It is no longer optional as it will cause a layout issue when not done correctly (even though the Android docs says it's optional). -Attached is background_fix.9.png Please try it and let me know if it works.-</li>
<li>Ashraf Abu 2015-06-12

   [~fokkezb] Please take a look and let me know if it works for you.</li>
<li>Ashraf Abu 2015-06-12

   I edited [^background_fix_2.9.png] This version should look better and nicer on the activity. Please try it and let me know if it works</li>
<li>Fokke Zandbergen 2015-06-13

   [~msamah] both of your new versions work fine. I guess I'll have to update the TiCons CLI to add the padding box :(
   
   What's the difference between the two fixed versions? I see <code>fix_2</code> has an extra black border but I don't see it anywhere.</li>
<li>Fokke Zandbergen 2015-06-13

   Fixed TiCons CLI for Android API 21+:
   <a href="https://github.com/FokkeZB/TiCons-CLI/commit/02aa2663a1bab4f45f299a0ead1d8c1c056d21bf" rel="nofollow" target="_blank">https://github.com/FokkeZB/TiCons-CLI/commit/02aa2663a1bab4f45f299a0ead1d8c1c056d21bf</a></li>
<li>Ashraf Abu 2015-06-15

   I'm using a HTC Desire Eye and when I used the first background fix, I get the results as [^fix_1.png]. The red outline is traced out on the whole app including beyond the navigation and status bar. Thus, needed the 1 pix black frame to get a better result as shown in [^fix_2.png]
   
   If everything is okay, can I resolve this ticket?</li>
<li>Fokke Zandbergen 2015-06-15

    [~msamah] well, that seems like a bug on its own. Do you get the same with a regular background image?
    
    As for the nine-patch blocks, yes we can close it. I'll cover this in the last of 3 images blog posts, which is about resizable images.</li>
<li>Ashraf Abu 2015-06-15

    {quote}Do you get the same with a regular background image?{quote}
    [~fokkezb] Nope. It's only when I use Nine-Patch. A normal background image behaves as expected.
    
    I'll close this issue then. Thanks!</li>
<li>Fokke Zandbergen 2015-06-26

    [~msamah] reproduced and found the other issues with the red outline. The padding line needed to cover the full width/height of the image to fix that. I'll cover that in the upcoming blog post.
    
    See <code>fix_final.9.png</code></li>
<li>David Loekito 2016-03-29

    i think we need to reopen this issue.
    1. i used tiCons, and still happens.
    2. if padding line full width and height, then what's purpose of 9-patch images?
    spesific use case that i must use 9-patch images is because we need to run our apps on blackberry Q10 which is detected as xhdpi and portrait, but screen resolution is somewhat is like landscape.
    this issue can be resolved by using usual 9-patch images, but it produces black blocks in android 5.x</li>
<li>Ashraf Abu 2016-03-29

    [~David.Loekito] Could you give an example code of your use case?</li>
<li>James O'Leary 2016-03-29

    I just wanted to comment to say I came across this post just yesterday and it helped me. I also had black boxes appear on my 9-patch splash screen I created. Just as @Fokke Zandbergen mentioned, when I changed the padding line to be the full height and width of the image, the strange box or boxes dissapeared. Thank you @Fokke!</li>
<li>Carlos Henrique Zinato 2016-06-13

    same here...did it today - just filled the right and bottom side with a black line and the black weird blocks gone</li>
<li>Eric Merriman  2018-08-06

    Closed as completed. If this is in error, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-18967.json">JSON Source</a></p>