---
title: "[TIMOB-19028] Windows: Geolocation module should instantiate Geolocator on-demand when in UI thread"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-06-16T15:10:26.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.1.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Christopher Williams</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2015-06-15T19:12:28.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-16T21:53:20.000+0000</td></tr>
</table>

<h3>Description</h3>

Our current Windows Geolocation module generates a wrapped Geolocator in it's constructor. We should be generating it lazily on-demand, and hopefully in the UI thread according to the guidelines: <a href="https://msdn.microsoft.com/en-us/library/windows/apps/hh465148.aspx" rel="nofollow" target="_blank">https://msdn.microsoft.com/en-us/library/windows/apps/hh465148.aspx</a>


bq. On Windows only, the first use of the Geolocator object must be made on the main UI thread, to show a consent prompt to the user. The first use of the Geolocator can be either the first call to getGeopositionAsync or the first registration of a handler for the positionChanged event. The consent prompt is described further in Guidelines for using sensitive devices. This means that in an app using JavaScript, the first use of the Geolocator object should not occur in an activation handler.


<h3>Comments</h3>

<ol>
<li>Christopher Williams 2015-06-15

   As noted, this isn't an issue for phone apps, but for "store" apps.</li>
<li>Kota Iguchi 2015-06-16

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/288" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/288</a></li>
<li>Lee Morris 2017-03-16

   Closing ticket as the issue has been fixed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-19028.json">JSON Source</a></p>