---
title: "[TIMOB-19030] Android: HttpClient setOnload() and setOnerror() methods do not work"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-06-25T02:26:25.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.5.1, Release 4.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>httpclient, setOnerror, setOnload</td></tr>
<tr><th>Reporter</th><td>Shuo Liang</td></tr>
<tr><th>Assignee</th><td>Hieu Pham</td></tr>
<tr><th>Created</th><td>2015-06-16T02:24:06.000+0000</td></tr>
<tr><th>Updated</th><td>2015-08-21T20:40:42.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Reproduce Step:</h4>
1.Simple run the following code in a classic mobile project.
<code><pre>
var url = "<a href="http://www.appcelerator.com" rel="nofollow" target="_blank">http://www.appcelerator.com</a>";
var client = Ti.Network.createHTTPClient({
     timeout : 5000  // in milliseconds
 });
 
 client.setOnload(function(e) {
 	Ti.API.info("Received text: " + this.responseText);
        alert('success');
 });
 
 client.setOnerror(function(e) {
 	Ti.API.debug(e.error);
        alert('error');
 });
 
 // Prepare the connection.
 client.open("GET", url);
 // Send the request.
 client.send();
</pre></code>

<h4>Expect Result:</h4>
Should fire alert event. Like its behaviour in iOS

<h4>Acutal Result:</h4>
Return a error, like this:
<code><pre>
[ERROR] :  TiExceptionHandler: (main) [100,100] ----- Titanium Javascript Runtime Error -----
[ERROR] :  TiExceptionHandler: (main) [0,100] - In app.js:413,9
[ERROR] :  TiExceptionHandler: (main) [0,100] - Message: Uncaught TypeError: Object #&lt;HTTPClient&gt; has no method 'setOnload'
[ERROR] :  TiExceptionHandler: (main) [1,101] - Source:  client.setOnload(function(e) {
[ERROR] :  V8Exception: Exception occurred at app.js:413: Uncaught TypeError: Object #&lt;HTTPClient&gt; has no method 'setOnload'
</pre></code>

<h3>Comments</h3>

<ol>
<li>Hieu Pham 2015-06-24

   master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/6930" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6930</a></li>
<li>Lokesh Choudhary 2015-08-21

   Verified the fix.
   The setOnload() and setOnerror() methods work as expected.
   
   Closing.
   
   Environment:
   Appc Studio :  4.2.0.201508062204
   Ti SDK :  5.0.0.v20150821030422
   Ti CLI : 4.1.5
   Alloy : 1.7.5
   MAC Yosemite : 10.10.4
   Appc NPM : 4.2.0-1
   Appc CLI : 5.0.0-12
   Node: v0.10.37
   Nexus 5 - Android 5.1.1
   Node : v0.10.37</li>
</ol>


<p><a href="/TIMOB/TIMOB-19030.json">JSON Source</a></p>