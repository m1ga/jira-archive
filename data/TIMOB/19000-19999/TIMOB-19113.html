---
title: "[TIMOB-19113] Platform-specific resources copied into builds for platforms not available in SDK/on OS"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 4.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>CLI</td></tr>
<tr><th>Labels</th><td>cb-tooling</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2015-06-30T13:22:49.000+0000</td></tr>
<tr><th>Updated</th><td>2020-01-30T10:52:40.000+0000</td></tr>
</table>

<h3>Description</h3>

This probably includes TIMOB-19112.

Compile the following Alloy app for the Windows SDK:
<a href="https://github.com/appcelerator-developer-relations/appc-sample-ti410" rel="nofollow" target="_blank">https://github.com/appcelerator-developer-relations/appc-sample-ti410</a>

As the first screenshot shows the <code>Resources</code> folder only has a <code>windows</code> folder.

Still, as the second screenshots shows the <code>build/windows/Assets</code> folder has a <code>iphone</code> folder which can only have been copied straight from <code>app/assets/iphone</code>. Furthermore, while the compiled Alloy app from <code>Resources/windows</code> is there in the root, the icons and splash screens which where there as well are missing.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-19113_56012/Screen Shot 2015-06-30 at 15.17.38.png">Screen Shot 2015-06-30 at 15.17.38.png</td></td><td>2015-06-30T13:22:46.000+0000</td><td>42379</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-19113_56011/Screen Shot 2015-06-30 at 15.17.53.png">Screen Shot 2015-06-30 at 15.17.53.png</td></td><td>2015-06-30T13:22:46.000+0000</td><td>108300</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-19113_56045/test.zip">test.zip</td></td><td>2015-07-01T18:51:34.000+0000</td><td>28388</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2015-07-01

   I think this may actually be an alloy issue, not a Windows CLI issue...</li>
<li>Fokke Zandbergen 2015-07-01

   Nope, it's not. I'm also seeing it with a classic project. The <code>Resources/iphone</code> folder is included in the Assets.</li>
<li>Fokke Zandbergen 2015-07-01

   </li>
<li>Christopher Williams 2015-07-01

   OK, I think I know why.
   
   The splash screen/branding stuff is covered in TIMOB-19112.
   
   During the build we copy the Resources folder, and we are supposed to ignore any root dirs matching any platform name. Then we copy Resources/windows over top.
   
   The issue is that the listing of platform names is populated by reading the manifest in the SDK, which actually lists the SDKs packaged. On Windows, we don't package ios/iphone/ipad, so it's not in the listing of platform directory names to ignore. I assume an app that worked on blackberry or tizen would also suffer the same fate, since we no longer package and distribute them.
   
   This is a general pattern issues with the CLI, not specific to Windows. We likely need to populate and re-use some special array of platform names, regardless of whether that platform is actually valid for this OS (or has been deprecated/removed). Otherwise we'll forever be copying tizen and blackberry resources into say iOS apps until the user removes those directories from their app.
   
   For reference, here's where the list of platform names are "generated": <a href="https://github.com/appcelerator/titanium_mobile/blob/master/node_modules/titanium-sdk/lib/titanium.js#L31" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/node_modules/titanium-sdk/lib/titanium.js#L31</a>
   
   Which reads the manifest.json file in the root of an SDK for it's platforms array.
   
   You'll notice the ios CLI build command will suffer from the same issue if an app has windows specific resources and you build for iOS on a Mac (where "windows" is not in the manifest.json platforms array). The issue is here: <a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/cli/commands/_build.js#L3501" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/cli/commands/_build.js#L3501</a>
   
   And Android: <a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/cli/commands/_build.js#L2470" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/cli/commands/_build.js#L2470</a></li>
<li>Fokke Zandbergen 2015-07-02

   Nice catch! And since we deprecate platforms (Tizen, BB..) it means we need to hard-code them in a config.</li>
</ol>


<p><a href="/TIMOB/TIMOB-19113.json">JSON Source</a></p>