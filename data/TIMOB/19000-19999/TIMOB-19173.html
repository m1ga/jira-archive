---
title: "[TIMOB-19173] Tiapp: Add <build> element to set CFBundleVersion and android:versionCode"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 4.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android, iOS</td></tr>
<tr><th>Labels</th><td>cb-tooling, titaniumlib</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2015-07-06T11:54:12.000+0000</td></tr>
<tr><th>Updated</th><td>2020-03-06T21:35:48.000+0000</td></tr>
</table>

<h3>Description</h3>

I'm preparing a blog post about versioning your apps now TIMOB-17993 has been resolved in 4.1.0: <a href="https://gist.github.com/FokkeZB/f7ae3ab57eb8185a338d." rel="nofollow" target="_blank">https://gist.github.com/FokkeZB/f7ae3ab57eb8185a338d.</a> Read the draft as context for this ticket.

It's great that developers can now manually set the <code>CFBundleVersion</code> as they could <code>android:versionCode</code>.

However, I think we can improve the workflow by introducing a <code>&lt;build&gt;</code> element that wants an integer value that will be used for both <code>CFBundleVersion</code> and <code>android:versionCode</code> (and other - Windows - platform's build versions) unless the developer has set these manually of course.

<code><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ti:app xmlns:ti="<a href="http://ti.appcelerator.org" rel="nofollow" target="_blank">http://ti.appcelerator.org</a>"&gt;
    &lt;id&gt;com.appcelerator.myapp&lt;/id&gt;
    &lt;name&gt;MyApp&lt;/name&gt;
    &lt;version&gt;1.1.0&lt;/version&gt;
    &lt;build&gt;123&lt;/build&gt;
</pre></code>

Some other subtasks would follow out this as well if we decide to do this:

* Expose the new element in the TiApp Editor in Studio.
* Expose the value via <code>Ti.App.build</code> in the SDK (TIMOB-18909).
* <code>&lt;version&gt;</code> should be used for the release version as-is and not [truncated](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/cli/commands/_build.js#L2080)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/cli/commands/_build.js#L2080)</a>, leaving it up to the developer.

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2015-07-06

   This would make TISTUD-5088 not needed anymore, saving the Editor from becoming too complicated, even more since we then should also expose CFBundleVersion and CFBundleShortVersionString as well.</li>
<li>Fokke Zandbergen 2015-07-06

   For both the new <code>&lt;build&gt;</code> and the existing <code>&lt;version&gt;</code> we need to fix that <code>Ti.App.version</code> and <code>Ti.App.build</code> do not use the platform-specific build and release versions when set in the <code>&lt;android&gt;</code> and <code>&lt;ios&gt;</code> sections.
   
   TIMOB-18909</li>
<li>Ygor Lemos 2016-05-23

   Is there an alternative for this on recent Ti releases?</li>
<li>Fokke Zandbergen 2016-05-23

   Would these help you atm?
   
   * <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium-property-buildHash
   * <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium-property-buildDate</li>
<li>Ygor Lemos 2016-05-23

   </li>
<li>Fokke Zandbergen 2016-05-24

   [~ygbr] As Titanium will default <code>CFBundleShortVersionString</code> and  <code>android:versionName</code> to <code>&lt;version&gt;</code> you don't need to set these (as long as both platforms are on the same version). To increment <code>CFBundleVersion</code> and <code>android:versionCode</code> I normally use a Grunt/Gulp script each time I build. The same script could then also write that version to <code>app/config.json</code> for use in the app. But of course resolving this ticket would make it easier.</li>
<li>Ygor Lemos 2019-01-15

   up!</li>
</ol>


<p><a href="/TIMOB/TIMOB-19173.json">JSON Source</a></p>