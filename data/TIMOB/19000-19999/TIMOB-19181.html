---
title: "[TIMOB-19181] Windows: Implement toJSON for Titanium proxy classes"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2015-07-22T11:52:59.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Christopher Williams</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2015-07-06T23:31:00.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-17T18:06:48.000+0000</td></tr>
</table>

<h3>Description</h3>

Calling JSON.stringify(proxy) on a Titanium proxy results in an error. We can control the JSON representation that a custom class returns by having a special toJSON() function that returns a JSObject, which is then converted internally by JSC into JSON.

<a href="https://github.com/appcelerator/webkit/blob/master/Source/JavaScriptCore/runtime/JSONObject.cpp#L328" rel="nofollow" target="_blank">https://github.com/appcelerator/webkit/blob/master/Source/JavaScriptCore/runtime/JSONObject.cpp#L328</a>

Even if we can't get a great initial representation, we may be able to simply return undefined and avoid this runtime error?

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2015-07-07

   <a href="https://github.com/appcelerator/titanium_mobile/blob/0ff8c6818ca7a1b1cd0da18c11c60bab00ccb423/android/modules/ui/src/js/ui.js#L91" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/0ff8c6818ca7a1b1cd0da18c11c60bab00ccb423/android/modules/ui/src/js/ui.js#L91</a>
   <a href="https://github.com/appcelerator/titanium_mobile/blob/17dc8754653daaff170ea0c18f74218168a5633e/android/runtime/common/src/js/titanium.js#L304" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/17dc8754653daaff170ea0c18f74218168a5633e/android/runtime/common/src/js/titanium.js#L304</a>
   <a href="https://github.com/appcelerator/titanium_mobile/blob/0ff8c6818ca7a1b1cd0da18c11c60bab00ccb423/iphone/Classes/TiProxy.m#L1293" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/0ff8c6818ca7a1b1cd0da18c11c60bab00ccb423/iphone/Classes/TiProxy.m#L1293</a>
   </li>
<li>Kota Iguchi 2015-07-22

   </li>
<li>Lee Morris 2017-03-17

   Closing ticket as invalid.</li>
</ol>


<p><a href="/TIMOB/TIMOB-19181.json">JSON Source</a></p>