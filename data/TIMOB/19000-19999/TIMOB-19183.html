---
title: "[TIMOB-19183] Window: JSON.stringify throws “invalid document source” exception when you dump Titanium proxy"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-07-23T15:43:33.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 4.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.0.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>qe-4.1.0</td></tr>
<tr><th>Reporter</th><td>Lokesh Choudhary</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2015-07-07T00:40:35.000+0000</td></tr>
<tr><th>Updated</th><td>2015-08-25T00:09:07.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Steps to reproduce:</h4>
1. Create an app for windows & replace the app.js with the code below:
<code><pre>
 var c = Ti.Network.createHTTPClient();
Ti.API.info('HTTP : ' + JSON.stringify(c));
c.onload = function () {
    Ti.API.info('Data: + ' + this.responseText);
};
c.open('GET', "<a href="http://www.appcelerator.com/" rel="nofollow" target="_blank">http://www.appcelerator.com/</a>");
c.onerror = function (e) {
    Ti.API.info('Error: ' + JSON.stringify(e));
};
Ti.API.info('URL: ' + url);
c.send();
Ti.API.info('HTTP : ' + JSON.stringify(c));
</pre></code>
2. Build for windows emulator.

<h4>Actual Results:</h4>
1. We get exception:
<code><pre>
[ERROR] :  Application Error: {
[ERROR] :    "message": "Error while require(./app) invalid document source",
[ERROR] :    "native_stack": [
[ERROR] :      "JSExportClass&lt;class Titanium::GlobalObject&gt;::CallNamedFunction"
[ERROR] :    ],
[ERROR] :    "stack": "require@[native code]\nglobal code",
[ERROR] :    "line": 2
[ERROR] :  }
</pre></code>
2. Attached is the screenshot of the on device exception error.

<h4>Expected Resut:</h4>
1. We should not get any exceptions using JSON.stringify

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-19183_56109/Capture.PNG">Capture.PNG</td></td><td>2015-07-07T00:40:47.000+0000</td><td>41675</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Lokesh Choudhary 2015-07-07

   This issue will be fixed when TIMOB-19181 is resolved.</li>
<li>Christopher Williams 2015-07-07

   For comparison's sake, here's what we get for iOS:
   <code><pre>
   [INFO]  HTTP : {}
   [INFO]  HTTP : {"url":"<a href="http://www.appcelerator.com/" rel="nofollow" target="_blank">http://www.appcelerator.com/</a>","method":"GET"}
   </pre></code>
   
   The first is after creating an httpclient, the second is after the open and send function calls.</li>
<li>Kota Iguchi 2015-07-22

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/387" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/387</a></li>
<li>Lokesh Choudhary 2015-08-25

   Verified the fix.
   
   Closing.
   
   Environment:
   Appc Studio:  5.0.0.v20150819140421
   Ti SDK: 5.0.0.v20150820100424
   Ti CLI: 4.1.4
   Alloy: 1.6.2
   Windows: 8.1 Enterprise 64-bit
   APPC NPM: 4.2.0-1
   APPC CLI: 5.0.0-8
   Node : v0.10.37
   Device: Nokia Lumia 928 - Windows Phone 8.1
   Windows emulator : 8.1
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-19183.json">JSON Source</a></p>