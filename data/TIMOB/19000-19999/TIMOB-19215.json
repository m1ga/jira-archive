{
	"id": "149127",
	"key": "TIMOB-19215",
	"fields": {
		"issuetype": {
			"id": "1",
			"description": "A problem which impairs or prevents the functions of the product.",
			"name": "Bug",
			"subtask": false
		},
		"project": {
			"id": "10153",
			"key": "TIMOB",
			"name": "Titanium SDK/CLI",
			"projectCategory": {
				"id": "10100",
				"description": "Titanium and related SDKs used in application development",
				"name": "Client"
			}
		},
		"fixVersions": [
			{
				"id": "16919",
				"description": "Critical updates",
				"name": "Release 4.1.1",
				"archived": true,
				"released": true,
				"releaseDate": "2015-07-15"
			}
		],
		"resolution": {
			"id": "1",
			"description": "A fix for this issue is checked into the tree and tested.",
			"name": "Fixed"
		},
		"resolutiondate": "2015-08-13T03:04:57.000+0000",
		"created": "2015-06-25T09:17:04.000+0000",
		"priority": {
			"name": "Medium",
			"id": "3"
		},
		"labels": [
			"annotation",
			"events",
			"map"
		],
		"versions": [
			{
				"id": "16593",
				"description": "Release 4.0.0",
				"name": "Release 4.0.0",
				"archived": false,
				"released": true,
				"releaseDate": "2015-05-21"
			}
		],
		"issuelinks": [
			{
				"id": "52214",
				"type": {
					"id": "10003",
					"name": "Relates",
					"inward": "relates to",
					"outward": "relates to"
				},
				"outwardIssue": {
					"id": "161815",
					"key": "MOD-2274",
					"fields": {
						"summary": "iOS: Map Annotation click event doesn't return correct clicksource",
						"status": {
							"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
							"name": "Closed",
							"id": "6",
							"statusCategory": {
								"id": 3,
								"key": "done",
								"colorName": "green",
								"name": "Done"
							}
						},
						"priority": {
							"name": "Medium",
							"id": "3"
						},
						"issuetype": {
							"id": "7",
							"description": "gh.issue.story.desc",
							"name": "Story",
							"subtask": false
						}
					}
				}
			},
			{
				"id": "48531",
				"type": {
					"id": "10003",
					"name": "Relates",
					"inward": "relates to",
					"outward": "relates to"
				},
				"inwardIssue": {
					"id": "149986",
					"key": "TIMOB-19280",
					"fields": {
						"summary": "iOS: MAP Click event not returning clicksource properly",
						"status": {
							"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
							"name": "Closed",
							"id": "6",
							"statusCategory": {
								"id": 3,
								"key": "done",
								"colorName": "green",
								"name": "Done"
							}
						},
						"priority": {
							"name": "Critical",
							"id": "1"
						},
						"issuetype": {
							"id": "1",
							"description": "A problem which impairs or prevents the functions of the product.",
							"name": "Bug",
							"subtask": false
						}
					}
				}
			},
			{
				"id": "48394",
				"type": {
					"id": "10003",
					"name": "Relates",
					"inward": "relates to",
					"outward": "relates to"
				},
				"inwardIssue": {
					"id": "125227",
					"key": "MOD-1840",
					"fields": {
						"summary": "iOS: Map Module: Click events do not work as described with 3.2.0 release",
						"status": {
							"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
							"name": "Closed",
							"id": "6",
							"statusCategory": {
								"id": 3,
								"key": "done",
								"colorName": "green",
								"name": "Done"
							}
						},
						"priority": {
							"name": "High",
							"id": "2"
						},
						"issuetype": {
							"id": "1",
							"description": "A problem which impairs or prevents the functions of the product.",
							"name": "Bug",
							"subtask": false
						}
					}
				}
			},
			{
				"id": "48391",
				"type": {
					"id": "10003",
					"name": "Relates",
					"inward": "relates to",
					"outward": "relates to"
				},
				"inwardIssue": {
					"id": "120985",
					"key": "TIMOB-15448",
					"fields": {
						"summary": "iOS: No event generated on click of map annotation title or subtitle",
						"status": {
							"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
							"name": "Closed",
							"id": "6",
							"statusCategory": {
								"id": 3,
								"key": "done",
								"colorName": "green",
								"name": "Done"
							}
						},
						"priority": {
							"name": "High",
							"id": "2"
						},
						"issuetype": {
							"id": "1",
							"description": "A problem which impairs or prevents the functions of the product.",
							"name": "Bug",
							"subtask": false
						}
					}
				}
			},
			{
				"id": "48392",
				"type": {
					"id": "10003",
					"name": "Relates",
					"inward": "relates to",
					"outward": "relates to"
				},
				"inwardIssue": {
					"id": "138100",
					"key": "MOD-2025",
					"fields": {
						"summary": "Map: iOS - Map.View Click Event does not work correctly",
						"status": {
							"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
							"name": "Closed",
							"id": "6",
							"statusCategory": {
								"id": 3,
								"key": "done",
								"colorName": "green",
								"name": "Done"
							}
						},
						"priority": {
							"name": "Medium",
							"id": "3"
						},
						"issuetype": {
							"id": "1",
							"description": "A problem which impairs or prevents the functions of the product.",
							"name": "Bug",
							"subtask": false
						}
					}
				}
			},
			{
				"id": "48393",
				"type": {
					"id": "10003",
					"name": "Relates",
					"inward": "relates to",
					"outward": "relates to"
				},
				"inwardIssue": {
					"id": "141948",
					"key": "TIMOB-18271",
					"fields": {
						"summary": "IOS: Clicking on annotation title & subtitle gives click source as rightbutton",
						"status": {
							"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
							"name": "Closed",
							"id": "6",
							"statusCategory": {
								"id": 3,
								"key": "done",
								"colorName": "green",
								"name": "Done"
							}
						},
						"priority": {
							"name": "None",
							"id": "6"
						},
						"issuetype": {
							"id": "1",
							"description": "A problem which impairs or prevents the functions of the product.",
							"name": "Bug",
							"subtask": false
						}
					}
				}
			}
		],
		"assignee": {
			"name": "hknoechel",
			"key": "hansknoechel",
			"displayName": "Hans Kn√∂chel",
			"active": true,
			"timeZone": "Europe/Berlin"
		},
		"updated": "2016-07-15T23:36:40.000+0000",
		"status": {
			"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
			"name": "Closed",
			"id": "6",
			"statusCategory": {
				"id": 3,
				"key": "done",
				"colorName": "green",
				"name": "Done"
			}
		},
		"components": [
			{
				"id": "10206",
				"name": "iOS",
				"description": "iOS Platform"
			}
		],
		"description": "There are some other tickets related to this, but since most of them show no activity, are old or cover only part of the problem, here's one ticket and test case that covers it all.\r\n\r\nThe following test case shows that the only 2 times a click-event that fires is when you tap a pin to open the annotation and when you tap the map to close the annotation. Tapping on the leftButton/View, rightButton/View, title or subtitle does not fire the event. Another bug is that the {{clicksource}} when you tap the map to close the annotation is {{annotation}} and not {{map}}.\r\n\r\nAdding listeners directly to the leftView/rightView does not work either.\r\n\r\nh2. Test case\r\n\r\n{code:javascript}\r\nvar map = require('ti.map');\r\n\r\nvar win = Ti.UI.createWindow();\r\n \r\nvar anOne = map.createAnnotation({\r\n  latitude:37.390749,\r\n  longitude:-122.081651,\r\n  title:\"Appcelerator Headquarters\",\r\n  subtitle:'Mountain View, CA',\r\n  leftButton: Ti.UI.iPhone.SystemButton.SAVE,\r\n  rightButton: Ti.UI.iPhone.SystemButton.SAVE\r\n});\r\n\r\nvar lBtn = Ti.UI.createView({\r\n  backgroundColor: 'red',\r\n  width: 40,\r\n  height: 40\r\n});\r\n\r\nlBtn.addEventListener('click', function(e) {\r\n  console.error(e);\r\n});\r\n\r\nvar rBtn = Ti.UI.createView({\r\n  backgroundColor: 'red',\r\n  width: 40,\r\n  height: 40\r\n});\r\n\r\nrBtn.addEventListener('click', function(e) {\r\n  console.error(e);\r\n});\r\n\r\nvar anTwo = map.createAnnotation({\r\n    latitude:37.33182,\r\n    longitude:-122.0311837,\r\n    title:\"Apple Headquarters\",\r\n    subtitle:'Cupertino, CA',\r\n    leftView: lBtn,\r\n    rightView: rBtn\r\n});\r\n \r\nvar mapview = map.createView({\r\n  region: {latitude:37.390749, longitude:-122.081651, latitudeDelta:1, longitudeDelta:1},\r\n  annotations:[anOne, anTwo],\r\n});\r\n \r\nwin.add(mapview);\r\n\r\nmapview.addEventListener('click', function(evt) {\r\n  console.error(evt);\r\n});\r\n \r\nwin.open();\r\n{code}\r\n\r\nh2. Logs\r\n\r\n{code}\r\nJun 25 11:11:10 iPhone-Fokke LiveViewer[6105] <Warning>: [ERROR] {\r\n\t    annotation = \"[object TiMapAnnotation]\";\r\n\t    bubbles = 1;\r\n\t    cancelBubble = 0;\r\n\t    clicksource = pin;\r\n\t    index = 14;\r\n\t    map = \"[object TiMapIOS7View]\";\r\n\t    source = \"[object TiMapIOS7View]\";\r\n\t    title = \"Apple Headquarters\";\r\n\t    type = click;\r\n\t}\r\nJun 25 11:11:11 iPhone-Fokke LiveViewer[6105] <Warning>: [ERROR] {\r\n\t    annotation = \"[object TiMapAnnotation]\";\r\n\t    bubbles = 1;\r\n\t    cancelBubble = 0;\r\n\t    clicksource = annotation;\r\n\t    index = 14;\r\n\t    map = \"[object TiMapIOS7View]\";\r\n\t    source = \"[object TiMapIOS7View]\";\r\n\t    title = \"Apple Headquarters\";\r\n\t    type = click;\r\n\t}\r\n{code}",
		"attachment": [],
		"flagged": false,
		"summary": "Events on Map Annotation do not fire",
		"creator": {
			"name": "fokkezb",
			"key": "fokke",
			"displayName": "Fokke Zandbergen",
			"active": true,
			"timeZone": "Europe/Amsterdam"
		},
		"subtasks": [],
		"reporter": {
			"name": "fokkezb",
			"key": "fokke",
			"displayName": "Fokke Zandbergen",
			"active": true,
			"timeZone": "Europe/Amsterdam"
		},
		"environment": "ti.map 2.3.1\r\nSDK 4.0.0.GA\r\niOS 8.3",
		"closedSprints": [
			{
				"id": 451,
				"state": "closed",
				"name": "2015 Sprint 16 SDK",
				"startDate": "2015-08-01T00:30:05.052Z",
				"endDate": "2015-08-15T00:30:00.000Z",
				"completeDate": "2015-08-17T05:55:00.386Z",
				"originBoardId": 114
			}
		],
		"comment": {
			"comments": [
				{
					"id": "359508",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Kn√∂chel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "PR: https://github.com/appcelerator-modules/ti.map/pull/110\r\nRelease 2.3.3: https://github.com/appcelerator-modules/ti.map/releases/download/iOS-2.3.3/ti.map-iphone-2.3.3.zip\r\n\r\nAfter merging the changes, new archives in master and 4.1.X backport:\r\n- Master: https://github.com/appcelerator/titanium_mobile/pull/7015\r\n- 4.1.X backport: https://github.com/appcelerator/titanium_mobile/pull/7016",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Kn√∂chel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2015-08-10T23:20:17.000+0000",
					"updated": "2015-08-11T23:19:01.000+0000"
				},
				{
					"id": "359763",
					"author": {
						"name": "cng",
						"key": "cng",
						"displayName": "Chee Kiat Ng",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Reviewed and approved. PRs merged.",
					"updateAuthor": {
						"name": "cng",
						"key": "cng",
						"displayName": "Chee Kiat Ng",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2015-08-13T03:04:43.000+0000",
					"updated": "2015-08-13T03:04:43.000+0000"
				},
				{
					"id": "359809",
					"author": {
						"name": "fokkezb",
						"key": "fokke",
						"displayName": "Fokke Zandbergen",
						"active": true,
						"timeZone": "Europe/Amsterdam"
					},
					"updateAuthor": {
						"name": "fokkezb",
						"key": "fokke",
						"displayName": "Fokke Zandbergen",
						"active": true,
						"timeZone": "Europe/Amsterdam"
					},
					"created": "2015-08-13T13:40:18.000+0000",
					"updated": "2015-08-13T13:40:18.000+0000"
				},
				{
					"id": "360221",
					"author": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Just retested this issue and there is still no click event being thrown for \"title\" or \"leftView\". Tested with:\r\n\r\n1) Device  - IPhone 6  OS v 8.3\r\n\r\n2) Appcelerator SDK - 4.1.1 v20160816214204\r\n\r\n3) Ti.Map v 2.3.3",
					"updateAuthor": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2015-08-18T18:18:01.000+0000",
					"updated": "2015-08-18T18:18:01.000+0000"
				},
				{
					"id": "360224",
					"author": {
						"name": "Claus Stilborg",
						"key": "claus stilborg",
						"displayName": "Claus Stilborg",
						"active": true,
						"timeZone": "Europe/Copenhagen"
					},
					"body": "That is bad news, I am waiting for this fix...",
					"updateAuthor": {
						"name": "Claus Stilborg",
						"key": "claus stilborg",
						"displayName": "Claus Stilborg",
						"active": true,
						"timeZone": "Europe/Copenhagen"
					},
					"created": "2015-08-18T18:31:11.000+0000",
					"updated": "2015-08-18T18:31:11.000+0000"
				},
				{
					"id": "360226",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Kn√∂chel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "The title and subtitle clicksources are not exposed in iOS (and have never been). And to receive the click event of a view (not button), simple make a click eventlistener on the view and handle its click there. This is done for performance purposes.",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Kn√∂chel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2015-08-18T18:40:56.000+0000",
					"updated": "2015-08-18T18:40:56.000+0000"
				},
				{
					"id": "360228",
					"author": {
						"name": "Claus Stilborg",
						"key": "claus stilborg",
						"displayName": "Claus Stilborg",
						"active": true,
						"timeZone": "Europe/Copenhagen"
					},
					"body": "Ok, I think I can make that work, thank you Hans",
					"updateAuthor": {
						"name": "Claus Stilborg",
						"key": "claus stilborg",
						"displayName": "Claus Stilborg",
						"active": true,
						"timeZone": "Europe/Copenhagen"
					},
					"created": "2015-08-18T18:46:36.000+0000",
					"updated": "2015-08-18T18:46:36.000+0000"
				},
				{
					"id": "360237",
					"author": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Is there any way to detect click event on the bubble on IOS?",
					"updateAuthor": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2015-08-18T19:10:04.000+0000",
					"updated": "2015-08-18T19:10:04.000+0000"
				},
				{
					"id": "360485",
					"author": {
						"name": "underlabs",
						"key": "underlabs",
						"displayName": "Joseph Sachs",
						"active": true,
						"timeZone": "America/Montreal"
					},
					"body": "@Nikita We need that too.\r\n\r\n*On iOS:* What we did was create a View and added it to the 'leftView' of the Annotation, and then added a Click event Listener on that view. (so you can only tap the leftView to do what you want). Was not able to listen to the Bubble.\r\n\r\n*On Android:* We still have No Solution! That same code on Android does not show the leftView.\r\n\r\nThough in the Docs: [http://docs.appcelerator.com/platform/latest/#!/api/Modules.Map.Annotation-property-leftView] it says:\r\n\r\nleftView : Titanium.UI.View\r\nLeft view that is displayed on the annotation.\r\nThis is ignored if the leftButton property is set. _(no leftButton is set in our case)_\r\n*Android: 3.1.0* & iOS: 3.2.0",
					"updateAuthor": {
						"name": "underlabs",
						"key": "underlabs",
						"displayName": "Joseph Sachs",
						"active": true,
						"timeZone": "America/Montreal"
					},
					"created": "2015-08-20T12:29:30.000+0000",
					"updated": "2015-08-20T12:33:23.000+0000"
				},
				{
					"id": "360487",
					"author": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"updateAuthor": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2015-08-20T13:06:38.000+0000",
					"updated": "2015-08-20T13:07:47.000+0000"
				},
				{
					"id": "360489",
					"author": {
						"name": "underlabs",
						"key": "underlabs",
						"displayName": "Joseph Sachs",
						"active": true,
						"timeZone": "America/Montreal"
					},
					"body": "@Nikita You mentioned: \"At the same time everything works perfectly on Android.\"\r\n\r\nCan you give me a small pseudo on what you did for Android? is it possible to show the title, long/lat, and a view or image on the left, and was able to click on the bubble or the leftView?",
					"updateAuthor": {
						"name": "underlabs",
						"key": "underlabs",
						"displayName": "Joseph Sachs",
						"active": true,
						"timeZone": "America/Montreal"
					},
					"created": "2015-08-20T13:37:17.000+0000",
					"updated": "2015-08-20T13:37:17.000+0000"
				},
				{
					"id": "360490",
					"author": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "@Joseph Gladly. However, I feel like this is not the right place to do that. I am a bit busy atm. I will reach you via email listed on your account with a snippet as soon as I can. Cheers!",
					"updateAuthor": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2015-08-20T13:40:55.000+0000",
					"updated": "2015-08-20T13:40:55.000+0000"
				},
				{
					"id": "360997",
					"author": {
						"name": "wluu",
						"key": "wluu",
						"displayName": "Wilson Luu",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Closing ticket as fixed. Verified that the MapView click event gets triggered for the following scenarios:\r\n\r\n* Pressing the pins.\r\n* Pressing the leftButton and rightButton in the annotation.\r\n* {{clicksource}} property contains the accurate object e.g. map, pin, TiUIView, leftButton, and rightButton; except for title and subtitle as per Hans's comment.\r\n* If you click on a view inside the the map annotation, then the view's event listener is triggered.\r\n\r\nTested on:\r\n\r\nAppcelerator Studio, build: 4.1.1.201507141126\r\nAppc CLI NPM: 4.1.0-2\r\nAppc CLI Core: 4.1.3-6\r\nSDK: 4.1.1.v20150816214206\r\nti.map: 2.3.3\r\nNode: v0.10.38\r\nOS: Yosemite (10.10.5)\r\nXcode: 6.4\r\nDevices: iphone 6 plus (8.3)",
					"updateAuthor": {
						"name": "wluu",
						"key": "wluu",
						"displayName": "Wilson Luu",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2015-08-24T22:32:50.000+0000",
					"updated": "2015-08-24T22:32:50.000+0000"
				}
			],
			"maxResults": 13,
			"total": 13,
			"startAt": 0
		}
	}
}