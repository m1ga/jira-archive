---
title: "[TIMOB-19274] CLI: When building for iOS device the app will always be 32-bit"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-07-30T17:02:56.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>qe-5.0.0, regression</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Chee Kiat Ng</td></tr>
<tr><th>Created</th><td>2015-07-28T23:47:16.000+0000</td></tr>
<tr><th>Updated</th><td>2015-07-30T17:17:26.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

When building to device the app appears to always be 32-bit. Using the code below and <code>xcrun lipo -info &lt;PathToBinary&gt;</code> show that there is not 64bit slice when building for device.

*Note*

When packaging the 64-bit slice is present, as the app passes Xcode validation and xrcun shows that there is a 64-bit slice.
This is a *regression* from 4.1.0.GA

<code><pre>
var win = Ti.UI.createWindow({
    backgroundColor: 'blue'
});
win.open();
win.addEventListener('click', function(e) {
    console.log('ostype: ' + Ti.Platform.ostype);
    console.log('architecture: ' + Ti.Platform.architecture);
});
</pre></code>

<h4>Steps to reproduce</h4>

1. Add the above code to a project
2. Build the app to a 64-bit device
3. Tap the screen

<h4>Actual result</h4>

The below is printed out

<code><pre>
[INFO]  ostype: 32bit
[INFO]  architecture: armv7
</pre></code>

<h4>Expected result</h4>

The below should be printed out

<code><pre>
[INFO]  ostype: 64bit
[INFO]  architecture: arm64
</pre></code>

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2015-07-29

   Fix is the same as the attached ticket the following needs to be added to [these args](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/cli/commands/_build.js#L2240)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/cli/commands/_build.js#L2240)</a> <code>ONLY_ACTIVE_ARCH: 'NO',</code></li>
<li>Chee Kiat Ng 2015-07-29

   PR here: <a href="https://github.com/appcelerator/titanium_mobile/pull/6990" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6990</a></li>
<li>Ewan Harris 2015-07-29

   Verified using:
   
   Appc CLI (Core): 4.2.0-1
   Ti SDK: 4.2.0.v20150729134419
   iPhone 6 8.2
   
   Using the attached code when building to a 64-bit device the logging now reports as 64-bit and when running xcrun lipo -info it now reports that there is a 64-bit slice 
   
   Closing ticket</li>
<li>Wilson Luu 2015-07-30

   Reopening issue to fix Affect Versions field.</li>
</ol>


<p><a href="/TIMOB/TIMOB-19274.json">JSON Source</a></p>