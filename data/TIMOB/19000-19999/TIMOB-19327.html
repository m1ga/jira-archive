---
title: "[TIMOB-19327] ListView - template event handler not working if using "var" declaratoin"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 4.1.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android, iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Shawn Lan</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2015-07-31T19:10:34.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T19:55:14.000+0000</td></tr>
</table>

<h3>Description</h3>

Create a default Alloy project with the following:

index.xml
<code><pre>
&lt;Alloy&gt;
	&lt;Window&gt;
		&lt;ListView defaultItemTemplate="template" onItemclick="list1Click" backgroundColor="white"&gt;
			&lt;Templates&gt;
	            &lt;ItemTemplate name="template"&gt;
	            	&lt;View onLongpress="handler"&gt;
	                    &lt;Label bindId="title" /&gt;
	                &lt;/View&gt;
	            &lt;/ItemTemplate&gt;
	        &lt;/Templates&gt;
			&lt;ListSection&gt;
				&lt;ListItem title:text="TEST ITEM 1" /&gt;
				&lt;ListItem title:text="TEST ITEM 2" /&gt;
			&lt;/ListSection&gt;
		&lt;/ListView&gt;
	&lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>

index.js
<code><pre>
var handler = function() {
	Ti.API.info("longpressed");
};

var list1Click = function(){
	Ti.API.info("item clicked");
};
$.index.open();
</pre></code>

On iOS, the function "handler" is simply not working. On Android, it'll throw exception saying event handler undefined. However, itemclick event works fine.

If we declare function "handler" like the following, then it works fine on both iOS and Android.
<code><pre>
function handler() {
	Ti.API.info("longpressed");
}

var list1Click = function(){
	Ti.API.info("item clicked");
};
$.index.open();
</pre></code>

So event handler for template element can't be declared using "var." This inconsistency could cause confusion to developer.

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-19327.json">JSON Source</a></p>