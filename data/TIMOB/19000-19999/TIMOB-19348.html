---
title: "[TIMOB-19348] Android: Split google-play-services library to optimize method counts"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-08-23T22:00:13.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Hieu Pham</td></tr>
<tr><th>Assignee</th><td>Hieu Pham</td></tr>
<tr><th>Created</th><td>2015-08-13T19:47:19.000+0000</td></tr>
<tr><th>Updated</th><td>2016-05-06T17:42:45.000+0000</td></tr>
</table>

<h3>Description</h3>

Optimize google-play-services library to reduce method counts for these modules:
- Ti.Map: <a href="https://github.com/appcelerator-modules/ti.map" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map</a>
- Ti.Cloudpush: <a href="https://github.com/appcelerator-modules/cloudpush" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/cloudpush</a>
- Ti.Admob: <a href="https://github.com/appcelerator-modules/ti.admob" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.admob</a>

<h3>Comments</h3>

<ol>
<li>Hieu Pham 2015-08-23

   map PR: <a href="https://github.com/appcelerator-modules/ti.map/pull/113" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/113</a> 
   map master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7050" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7050</a>
   map 4.1.X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7007" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7007</a>
   cloudpush PR: <a href="https://github.com/appcelerator-modules/cloudpush/pull/26" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/cloudpush/pull/26</a>
   cloudpush master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7022" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7022</a>
   cloudpush 4.1.X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7023" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7023</a>
   admob PR: <a href="https://github.com/appcelerator-modules/ti.admob/pull/38" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.admob/pull/38</a></li>
<li>Lokesh Choudhary 2015-08-24

   Verified the fix for the modules. The modules build fine on pre & post android 5.0.
   Also built kitchensink by adding these 3 modules & did not find any issues.
   
   Closing.
   
   Environment:
   Appc Studio : 4.2.0.201508062204
   Ti SDK : 4.1.1.v20150816214206, 5.0.0.v2015081914042,
   Ti CLI : 4.1.4
   Alloy : 1.6.2
   MAC Yosemite : 10.10.4
   Appc NPM : 4.1.0
   Appc CLI : 4.2.0-54
   Node: v0.10.37
   Samsung Galaxy S4 - Android 4.4.2
   Nexus 6 - Android 5.0.1
   Nexus 5 - Android 5.1.1</li>
<li>grebulon 2015-09-30

   This is not a good fix for the 65K reference problem. It can give you a little slack, but even so, it keeps you close to the edge. You have to support multidex in the build script.</li>
<li>Adam 2016-04-01

   Hi there.
   
   I'm managing a popular google analytics module for Titanium.
   
   <a href="https://github.com/Sitata/titanium-google-analytics/" rel="nofollow" target="_blank">https://github.com/Sitata/titanium-google-analytics/</a>
   <a href="https://github.com/Sitata/titanium-google-analytics/issues/48" rel="nofollow" target="_blank">https://github.com/Sitata/titanium-google-analytics/issues/48</a>
   
   
   Can anyone shed some light on how the play services jars were stripped and created?
   
   I'm using [this gist](<a href="https://gist.github.com/dextorer/a32cad7819b7f272239b)" rel="nofollow" target="_blank">https://gist.github.com/dextorer/a32cad7819b7f272239b)</a> to create the stripped jars. To get analytics to compile on it's own, I have to include "analytics" and "internal". However, there are still conflicts when using with other modules. I have no idea how the base.jar was created and what is included in it and so it's hard to determine the cause of the conflicts. I've spent some time trying to find the issue here in JIRA that involves all of this or some documentation to describe the process, but haven't had much luck there. Can you please point me in the right direction?
   
   Thanks.
   </li>
<li>Jason Priebe 2016-05-06

   </li>
</ol>


<p><a href="/TIMOB/TIMOB-19348.json">JSON Source</a></p>