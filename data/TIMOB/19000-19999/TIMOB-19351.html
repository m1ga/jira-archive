---
title: "[TIMOB-19351] Windows: Support animation values using units"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-06-02T14:28:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 4.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>qe-5.4.0</td></tr>
<tr><th>Reporter</th><td>Christopher Williams</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2015-08-13T21:11:00.000+0000</td></tr>
<tr><th>Updated</th><td>2016-06-29T21:09:30.000+0000</td></tr>
</table>

<h3>Description</h3>

Our animation code assumes pixels for units, regardless of whether some other set of units are specified.

Looking at Android, assuming pixels if no unit is specified is what we should do (though why wouldn't we use ti.ui.defaultunit?) - but we do need to support dp/in/cm/em etc and convert to pixels internally.

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2016-05-25

   master: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/719" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/719</a></li>
<li>Christopher Williams 2016-06-02

   - Add support for <code>% cm mm cm em pt pc in px dp dip</code> in <code>width</code> <code>height</code> <code>top</code> <code>left</code> (<code>bottom</code> and <code>right</code> are not implemented, see TIMOB-18750)
   - Fixed crash when animating <code>width</code> or <code>height</code> from <code>0</code>
   - Fixed <code>width</code> and <code>height</code> not being retained after animation
   
   Here's some tests cases. Please note that the animations happen as expected (right positioning, and we don't see an immediate jump form start position to end position). Also, you might want to test with other units, these test cases just use percentages, but it should be tested with values like '100px', '1in', '2345cm', etc.
   
   <h4>TEST CASE # 1</h4>
   Scale height from 0 to 100%
   <code><pre>
   var win = Ti.UI.createWindow({backgroundColor: 'black'}),
       view = Ti.UI.createView({backgroundColor: 'red', top: 0, left: 0, width:'10%', height: 0}),
       animation = Ti.UI.createAnimation({height: "100%", curve: Ti.UI.ANIMATION_CURVE_EASE_OUT, duration: 2000});
   view.animate(animation);
   win.add(view);
   win.open();
   </pre></code>
   
   <h4>TEST CASE # 2</h4>
   Scale width from 0 to 100%
   <code><pre>
   var win = Ti.UI.createWindow({backgroundColor: 'black'}),
       view = Ti.UI.createView({backgroundColor: 'red', top: 0, left: 0, width:'0', height: '10%'}),
       animation = Ti.UI.createAnimation({width: '100%', curve: Ti.UI.ANIMATION_CURVE_EASE_OUT, duration: 2000});
   view.animate(animation);
   win.add(view);
   win.open();
   </pre></code>
   
   <h4>TEST CASE # 3</h4>
   Transform left from 0 to 90%
   <code><pre>
   var win = Ti.UI.createWindow({backgroundColor: 'black'}),
       view = Ti.UI.createView({backgroundColor: 'red', top: 0, left: 0, width:'10%', height: '10%'}),
       animation = Ti.UI.createAnimation({left: '90%', curve: Ti.UI.ANIMATION_CURVE_EASE_OUT, duration: 2000});
   view.animate(animation);
   win.add(view);
   win.open();
   </pre></code>
   
   <h4>TEST CASE # 4</h4>
   Transform top from 0 to 90%
   <code><pre>
   var win = Ti.UI.createWindow({backgroundColor: 'black'}),
       view = Ti.UI.createView({backgroundColor: 'red', top: 0, left: 0, width:'10%', height: '10%'}),
       animation = Ti.UI.createAnimation({top: '90%', curve: Ti.UI.ANIMATION_CURVE_EASE_OUT, duration: 2000});
   view.animate(animation);
   win.add(view);
   win.open();
   </pre></code></li>
<li>Harry Bryant 2016-06-29

   Verified as fixed, Tested all four test cases above, using different value units (% , px , in , cm). 
   
   Tested on: 
   Windows 10 Pro 
   Windows Phone 10.0 (Microsoft Lumia 640 LTE) 
   Appc Studio: 4.7.0.201606220541
   Ti SDK: 5.4.0.v20160627224205
   Appc NPM: 4.2.7-2
   Appc Core: 5.4.0-20
   Node: v4.4.4
   
   *Closing Ticket.*</li>
</ol>


<p><a href="/TIMOB/TIMOB-19351.json">JSON Source</a></p>