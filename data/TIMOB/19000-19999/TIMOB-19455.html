---
title: "[TIMOB-19455] Add Swift versions of the applewatch templates"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-02-19T03:32:55.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.2.0</td></tr>
<tr><th>Components</th><td>Templates</td></tr>
<tr><th>Labels</th><td>notable, watchOS2</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Lee Morris</td></tr>
<tr><th>Created</th><td>2015-09-02T08:30:18.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-16T22:46:15.000+0000</td></tr>
</table>

<h3>Description</h3>

Our current [applewatch](<a href="https://github.com/appcelerator/titanium_mobile/tree/master/templates/applewatch)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/tree/master/templates/applewatch)</a> templates are in Obj-C while many Xcode developers are switching to Swift. Titanium developers with no/little Xcode experience will likely also find Swift easier.

So, we should have Swift-versions of the applewatch templates and probably default to that.

* <code>watchos2-swift</code> Swift (new default)
* <code>watchos2-objc</code> Obj-C (current)

PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7496" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7496</a>

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2015-09-02

   [~rblalock] since you use Swift for your Watch app, could look into this maybe?</li>
<li>Rick Blalock 2015-09-02

   [~fokkezb] - you just want the sample app in swift code?</li>
<li>Fokke Zandbergen 2015-09-04

   [~rblalock] No, Swift versions of these templates:
   <a href="https://github.com/appcelerator/titanium_mobile/tree/master/templates/applewatch" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/tree/master/templates/applewatch</a></li>
<li>Jason Kneen 2015-09-08

   Horrific - why on earth were the templates written in ObjC?? Aggro</li>
<li>John McMahon 2015-10-18

   Another headache is that you cannot use Swift even if you want to within the watch OS2 extension Xcode project, nor can you add a share extension or other app extension using the same template Xcode file paradigm... because I want to add a swift share extension I figured I would add swift code to the watchOS2 Xcode template.
   
   No matter what I do I get an Xcode compile error:
   
   [ERROR] :  iOS extension "xxx" target "xxx WatchApp Extension" contains Swift code, but "Embedded Content Contains Swift Code" is not enabled.
   
   And yes, I set the Embedded Content Contains Swift Code setting in the watchOS2 template AND the Titanium.xcodeproj files to no avail.
   
   My overall complaint is that this is all extremely circuitous and it seems if Appcelerator would just make it convenient to merge Xcode projects at build time, we could have all of the extension support we wanted without the byzantine workarounds to nowhere.</li>
<li>Fokke Zandbergen 2015-10-19

   [~Spaceghost] what SDK version are you using? The error you mention should have been fixed by TIMOB-18844 in April.</li>
<li>Fokke Zandbergen 2015-11-25

   PR on master:
   <a href="https://github.com/appcelerator/titanium_mobile/pull/7496" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7496</a>
   
   Tested both watchos2 (now watchos2-objc) and watchos2-swift on Simulator and device.
   
   [~cbarber] I can't get watchos1 (before or after changes) to build. Can't we just remove this template and the related stuff in <code>_build.js</code>?</li>
<li>Fokke Zandbergen 2015-11-25

   Since this renames <code>watchos2</code> to <code>watchos2-swift</code> *and* makes it default this ticket should either replace CLI-794 or be merged after.</li>
<li>Fokke Zandbergen 2015-11-25

   Note: as part of this PR I reverted most of TIMOB-19412 except for adding the WatchConnectivity framework and creating the watch session when the app activates. This is enough to get people started and allow them to verify it works by listening to <code>Ti.Watchsession:watchstatechanged</code> or <code>reachabilitychanged</code>.</li>
<li>Chee Kiat Ng 2015-12-02

    </li>
<li>Fokke Zandbergen 2015-12-02

    [~cng] my PR just removes the watchos1 template, not the related code in the build script. We can do that later since it's not affecting anything. And for the sake of getting this PR merged I think it's better to rip out that code later and keep the changes to <code>_build.js</code> minimal for now.</li>
<li>Fokke Zandbergen 2015-12-02

    As commented in CLI-794 we should *not* merge that, but this one instead and close CLI-794 as invalid. It would only result in having two places where we set the default watch template, which is no good.</li>
<li>Fokke Zandbergen 2015-12-17

    Backport for 5.2.0: <a href="https://github.com/appcelerator/titanium_mobile/pull/7589" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7589</a></li>
<li>Chee Kiat Ng 2015-12-17

    FT passed. PRs merged!.
    
    <h4>Steps to test</h4>
    1. *appc new* -> Native App
    2. enter project
    3. *appc new* -> Apple Watch App
    4. *appc run -p ios --launch-watch-app*
    5. repeat step 1-2
    6. *appc new -t applewatch --template watchos2-swift*
    7. *appc run -p ios --launch-watch-app*
    8. repeat step 1-2
    9. *appc new -t applewatch --template watchos2*
    10. *appc run -p ios --launch-watch-app*
    11. repeat step 1-2
    12. *appc new -t applewatch --template watchos2-objc*
    13. *appc run -p ios --launch-watch-app*
    14. repeat all using device
    
    <h4>Expected results</h4>
    at 3. Look inside extensions/<project name>/Extension/ you should see swift files
    at 4. builds normally
    at 6. Look inside extensions/<project name>/Extension/ you should see swift files
    at 7. builds normally
    at 9. Look inside extensions/<project name>/Extension/ you should see m and h files
    at 10. builds normally
    at 2. Look inside extensions/<project name>/Extension/ you should see m and h files
    at 13. builds normally
    at 14. same results as above.</li>
<li>Chee Kiat Ng 2016-01-06

    [~kkolipaka] please take note of this and see if studio needs a ticket to conform with this. If so, it has to be ready for 5.2.0</li>
<li>Fokke Zandbergen 2016-01-06

    [~kkolipaka] I think it needs updates here:
    
    * <a href="https://github.com/appcelerator/titanium_studio/blob/master/plugins/com.appcelerator.titanium.ios.core/src/com/appcelerator/titanium/ios/core/IOSConstants.java#L85-L93" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_studio/blob/master/plugins/com.appcelerator.titanium.ios.core/src/com/appcelerator/titanium/ios/core/IOSConstants.java#L85-L93</a> (
    * <a href="https://github.com/appcelerator/titanium_studio/search?q=APPLEWATCHKIT&type=Code" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_studio/search?q=APPLEWATCHKIT&type=Code</a>
    
    I think it would be best to leave out the <code>--template</code> option so that you let the CLI pick the default for the type, but the problem is that currently that default is still <code>watchos1</code>. With 5.2 it will become <code>watchos2-swift</code>, but we won't drop the Obj-C <code>watchos2</code> until 6.0. So I think we should check the SDK version of the project and if it's >= 5.2 leave out the option.</li>
<li>Kondal Kolipaka 2016-01-19

    [~fokkezb] [~cng] Studio changes will be addressed through TISTUD-7960</li>
<li>Fokke Zandbergen 2016-02-18

    Reopening because for some reason this no longer works in the 5.2.0 RC. When I generate an extension with the Obj-C template it works, but when I use the new (default) Swift template it starts to load (shows spinner) the Watch app and then fails with:
    
    <code><pre>
    [ERROR] [Ti 5.2.0 WatchKit App] (Error) WatchKit: &lt;SPApplicationDelegate.m __55-[SPApplicationDelegate _startActivatingAssertionTimer]_block_invoke:2067&gt; We've held the CSLSActivatingUIAssertion for 30 secs. Giving up
    </pre></code>
    
    When I install on my hardware it says:
    
    <code><pre>
    Feb 18 17:20:32 Fokkes-AppleWatch Ti 5.2.0 WatchKit Extension[3874] &lt;Warning&gt;: WatchKit error - unable to find interface controller class '_TtC27Ti_5.2.0_WatchKit_Extension19InterfaceController' to instantiate
    Feb 18 17:20:32 Fokkes-AppleWatch Ti 5.2.0 WatchKit Extension[3874] &lt;Notice&gt;: (Error) WatchKit: ComF: -[SPRemoteInterface _interfaceControllerWithID:] interfaceController for interfaceControllerID:F210002 not found (clientIdentifier=(null))
    Feb 18 17:20:32 Fokkes-AppleWatch Ti 5.2.0 WatchKit Extension[3874] &lt;Notice&gt;: (Error) WatchKit: ComF: -[SPRemoteInterface _interfaceControllerWithID:] interfaceController for interfaceControllerID:F210002 not found (clientIdentifier=(null))
    Feb 18 17:20:32 Fokkes-AppleWatch Ti 5.2.0 WatchKit Extension[3874] &lt;Warning&gt;: *********** ERROR -[SPRemoteInterface _interfaceControllerClientIDForControllerID:] clientIdentifier for interfaceControllerID:F210002 not found
    Feb 18 17:20:32 Fokkes-AppleWatch Ti 5.2.0 WatchKit Extension[3874] &lt;Notice&gt;: (Error) WatchKit: ComF:&lt;-Plugin _RunLoopHandler controller ID F210002 has no client identifier
    </pre></code></li>
<li>Fokke Zandbergen 2016-02-18

    The Watch App couldn't find the Extension with the InterfaceController because the <code>IBSC_MODULE</code> we populated only stripped out spaces, but not other non-alphanum characters.
    
    Fix for master: <a href="https://github.com/appcelerator/titanium_mobile/pull/7754" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7754</a>
    Backport for 5_2_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/7755" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7755</a>
    
    Tested with the same project as above and works like clockwork.
    
    [~cng] or [~cbarber] could you review and merge for 5.2.0?</li>
<li>Chee Kiat Ng 2016-02-19

    Approved. PRs merged.</li>
</ol>


<p><a href="/TIMOB/TIMOB-19455.json">JSON Source</a></p>