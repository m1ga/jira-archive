---
title: "[TIMOB-19488] iOS9: 3D-Touch: Support UIPreviewActions (\"Peek and Pop\")"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-10-08T01:09:14.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>3DTouch, iOS9</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2015-09-09T23:13:10.000+0000</td></tr>
<tr><th>Updated</th><td>2015-10-27T07:48:17.000+0000</td></tr>
</table>

<h3>Description</h3>

Apple just presented the new 3DTouch feature of the iPhone6S. User can press a view and will review an instant feedback providing a preview of a view to select different actions, called <code>UIPreviewAction</code>. Each action have a <code>title</code>, <code>style</code> and <code>handler</code> property. Multiple actions can also be assigned to <code>UIPreviewActionGroup</code>. That group can have have a <code>title</code>, <code>style</code> and <code>actions</code> property to keep track of the assigned actions.

*Related documents:*
- <a href="https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIPreviewAction_Class/" rel="nofollow" target="_blank">https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIPreviewAction_Class/</a>
- <a href="https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIPreviewActionGroup_Class/" rel="nofollow" target="_blank">https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIPreviewActionGroup_Class/</a>

*Example:*
<code><pre>
var sendAction = Ti.UI.iOS.createPreviewAction({
	title : "Send per Mail",
	style : Ti.UI.iOS.PREVIEW_ACTION_STYLE_DEFAULT
});

sendAction.addEventListener("click", function() {
	alert("send mail!");
});

var confirmAction = Ti.UI.iOS.createPreviewAction({
	title : "Confirm",
	style : Ti.UI.iOS.PREVIEW_ACTION_STYLE_DESTRUCTIVE
});

var cancelAction = Ti.UI.iOS.createPreviewAction({
	title : "Cancel"
});

var deleteAction = Ti.UI.iOS.createPreviewActionGroup({
	title : "Delete",
	actions : [confirmAction, cancelAction],
	style : Ti.UI.iOS.PREVIEW_ACTION_STYLE_DESTRUCTIVE
});

confirmAction.addEventListener("click", function() {
	alert("delete!");
});

var win = Ti.UI.createWindow({
	backgroundColor : "white"
});

// The view to be previewed while popping.
var previewView = Ti.UI.createView({
	backgroundColor : "blue"
});

previewView.add(Ti.UI.createLabel({
	color : "#fff",
	text : "Preview!"
}));

// The window to be opened after popping the preview.
var detailWindow = Ti.UI.createWindow({
	backgroundColor : "yellow"
});

detailWindow.add(Ti.UI.createLabel({
	text : "You made it!"
}));

// Create the preview context
var context = Ti.UI.iOS.createPreviewContext({
	preview : previewView,
	actions : [sendAction, deleteAction], // Can have both Ti.UI.iOS.PreviewAction + Ti.UI.iOS.PreviewActionGroup
	contentHeight : 100, // When unspecified, we use the available height
	pop : function(e) {// Called after popping the preview
		detailWindow.open();
	}
});

// Assign the preview context
var trigger = Ti.UI.createButton({
	title: "Peek here!",
	backgroundColor : "#000",
	tintColor: "#fff",
	width : 200,
	height : 50,
	previewContext : context
});

win.add(trigger);
win.open(); 
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-19488_56798/Peek-And-Pop.jpg">Peek-And-Pop.jpg</td></td><td>2015-09-22T17:27:52.000+0000</td><td>478799</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-19488_56727/Screen Shot 2015-09-15 at 19.53.07.png">Screen Shot 2015-09-15 at 19.53.07.png</td></td><td>2015-09-16T02:56:27.000+0000</td><td>559001</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2015-09-27

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7235" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7235</a></li>
<li>Chee Kiat Ng 2015-10-08

   PR approved and merged.</li>
<li>Sebastian Klaus 2015-10-08

   Building on device and for iTunes Store (just testing the build) fails.
   
   <code><pre>
   Operating System
     Name                        = Mac OS X
     Version                     = 10.11
     Architecture                = 64bit
     # CPUs                      = 8
     Memory                      = 17179869184
   Node.js
     Node.js Version             = 0.10.38
     npm Version                 = 1.4.28
   Titanium CLI
     CLI Version                 = 5.0.4
   Titanium SDK
     SDK Version                 = 5.1.0.v20151007194443
     SDK Path                    = /Volumes/Data/Users/sebastian/Library/Application Support/Titanium/mobilesdk/osx/5.1.0.v20151007194443
     Target Platform             = iphone
   </pre></code>
   
   <code><pre>
   [ERROR] :  ** BUILD FAILED **
   [ERROR] :  The following build commands failed:
   [ERROR] :  	CompileC build/Intermediates/TestApp.build/Release-iphoneos/TestApp.build/Objects-normal/armv7/TiPreviewingDelegate.o Classes/TiPreviewingDelegate.m normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
   [ERROR] :  (1 failure)
   TRACE  | titanium exited with exit code 1
   ERROR  | Error: ti run exited with error code 1
       at ChildProcess.&lt;anonymous&gt; (/Volumes/Data/Users/sebastian/.appcelerator/install/5.0.2/package/node_modules/appc-cli-titanium/plugins/run.js:89:66)
       at ChildProcess.emit (events.js:117:20)
       at Process.ChildProcess._handle.onexit (child_process.js:820:12)
   </pre></code></li>
<li>Harry Bryant 2015-10-14

   Verified as fixed, <code>UIPreviewAction</code> features working as intended, built to device & for the iTunes Store successfully. 
   
   Tested on: iPhone 6S + 
   
   OSX El Capitan 10.11
   Studio: 4.3.1.201509302304
   Ti SDK: 5.1.0.v20151009094506
   Appc NPM: 4.2.1-1
   Appc CLI: 5.1.0-38
   
   Closing Ticket. 
   
   </li>
<li>Sebastian Klaus 2015-10-23

   Wondering, how I can gain a preview of a listitem.
   
   I have to initially set the previewView, but I know it only, when I clicked on a listitem and have the id. 
   
   I studied your listView example in <a href="https://github.com/hansemannn/titanium_mobile/blob/46a5fcaf10c3aaa4b07b7351da737c57660a171a/apidoc/Titanium/UI/iOS/PreviewContext.yml" rel="nofollow" target="_blank">https://github.com/hansemannn/titanium_mobile/blob/46a5fcaf10c3aaa4b07b7351da737c57660a171a/apidoc/Titanium/UI/iOS/PreviewContext.yml</a>
   
   but I have no idea how to fill the preview with fetched content from the listitem or the listitem index id</li>
<li>Sebastian Klaus 2015-10-23

   uh wait... it's the described in the Ti.UI.iOS.createPreviewContext... :facepalm:
   
   First think, then write... Sorry ;)</li>
<li>Sebastian Klaus 2015-10-26

   Hello [~hansknoechel],
   
   played around and think, that it's not working completely.
   
   I copied your example for integrating in a listview.
   
   I never get the Ti.API.warn messages. So, I think I never get into the pop function from your example.
   
   What I want to do is:
   Having a listview.
   On preview, I want to show a detailview with some information out of the database.
   
   But how do I fill the previewView with some new content? I never get into the detailWindow.open of your example
   
   </li>
<li>Hans Knöchel 2015-10-26

   [~benutzername]: It is currently not possible to provide a cell-specific preview, because the current KrollThread implementation of the core does not allow returning a proxy inside a KrollCallback. This issue is tracked in TIMOB-19763.</li>
<li>Sebastian Klaus 2015-10-27

   [~hansknoechel] is that the reason, the example in the docs does not work and is not coming into the pop function?</li>
</ol>


<p><a href="/TIMOB/TIMOB-19488.json">JSON Source</a></p>