---
title: "[TIMOB-19508] iOS9: Properties of person is unavailable (module Ti.Contacts)"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-09-14T13:45:49.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>Ti.Contacts, qe-automation, regression</td></tr>
<tr><th>Reporter</th><td>THOMAS LEMAITRE</td></tr>
<tr><th>Assignee</th><td>Chee Kiat Ng</td></tr>
<tr><th>Created</th><td>2015-09-11T14:19:10.000+0000</td></tr>
<tr><th>Updated</th><td>2015-10-01T18:19:47.000+0000</td></tr>
</table>

<h3>Description</h3>

 I tested my app and i appears that the module Ti.Contacts is broken. In fact, you can only get the properties "identifier" of a person. Other properties is unavailable and causing crash of the app.


<code><pre>
var people = Ti.Contacts.getAllPeople(),
person = null;

for (var i=0, ilen=people.length; i&lt;ilen; i++){
var person = people[i];
Ti.API.log('identifier ' + person.getIdentifier()); //works
Ti.API.log('firstName ' + person.getFirstName()); // didn't works
Ti.API.log('middleName ' + person.getMiddleName()); // didn't works
Ti.API.log('lastName ' + person.getLastName()); // didn't works
//... etc for all other properties of Person except "identifier"
}
</pre></code>

<h3>Comments</h3>

<ol>
<li>Chee Kiat Ng 2015-09-14

   Master PR:<a href="https://github.com/appcelerator/titanium_mobile/pull/7177" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7177</a>
   backport 5_0_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/7178" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7178</a></li>
<li>Chee Kiat Ng 2015-09-14

   PRs approved and merged.</li>
<li>Satyam Sekhri 2015-09-14

   The fix works when we build using iOS SDK 9.0. However, if the app is build using iOS SDK 8.4, then the getAllPeople returns zero contacts even though there are contacts. Hence, it would not output any details in the sample code.
   Mac OS 10.10.5
   Titanium CLI: 5.0.1
   SDK: 5.0.0.v20150914021515
   Xcode: 7 GM seed</li>
<li>Chee Kiat Ng 2015-09-14

   The reason why it's not working for iOS 8.4 is because the older version of contacts require the developer to explicitly request for permission to access the addressbook. Please use this sample code instead:
   <code><pre>
   var performAddressBookFunction = function(){
   	var people = Ti.Contacts.getAllPeople(),
   	person = null;
   	 
   	for (var i=0, ilen=people.length; i&lt;ilen; i++){
   	var person = people[i];
   	Ti.API.log('identifier ' + person.getIdentifier()); //works
   	Ti.API.log('firstName ' + person.getFirstName()); // didn't works
   	Ti.API.log('middleName ' + person.getMiddleName()); // didn't works
   	Ti.API.log('lastName ' + person.getLastName()); // didn't works
   	//... etc for all other properties of Person except "identifier"
   	}
   };
   var addressBookDisallowed = function(){
   	Ti.API.log('address book not allowed');
   };
   if (Ti.Contacts.contactsAuthorization == Ti.Contacts.AUTHORIZATION_AUTHORIZED){
       performAddressBookFunction();
   } else if (Ti.Contacts.contactsAuthorization == Ti.Contacts.AUTHORIZATION_UNKNOWN){
       Ti.Contacts.requestAuthorization(function(e){
           if (e.success) {
               performAddressBookFunction();
           } else {
               addressBookDisallowed();
           }
       });
   } else {
       addressBookDisallowed();
   }
   </pre></code>
   *Note:* getId() is for iOS8, and is replaced with getIdentifier() for iOS9. So expect to see identifier = undefined when run in iOS8.</li>
<li>Ingo Muschenetz 2015-09-14

   [~bhatfield] looks like an issue for Release Notes.</li>
<li>Satyam Sekhri 2015-09-15

   Contact properties shown. Also checked when build with iOS 8.4 and using code for Kiat that explicitly asks for Contacts permission.
   Verified on:
   Mac OS 10.10.5
   Appc CLI NPM: 4.2.0-8
   Appc CLI Core: 5.0.0-51
   Titanium CLI: 5.0.3
   Appc Studio: 4.3.0.201509140942
   SDK: 5.0.0.v20150914163105
   Xcode: 7 GM seed</li>
<li>Benjamin Hatfield 2015-09-17

   [~cng]  In your note, shouldn't it be *recordId* for iOS 8?  *id* is marked as an Android-only property for Ti.Contacts.Person.
   
   <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.Contacts.Person-property-recordId
   <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.Contacts.Person-property-id</li>
<li>Chee Kiat Ng 2015-09-18

   my bad. i meant *recordId* for iOS 8.</li>
</ol>


<p><a href="/TIMOB/TIMOB-19508.json">JSON Source</a></p>