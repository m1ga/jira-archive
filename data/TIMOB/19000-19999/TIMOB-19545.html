---
title: "[TIMOB-19545] Unable to use CommonJS modules on real device with SDK 5.0.0.GA"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-09-20T09:54:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.0.1</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>CommonJS, Module, SDK5.0.0</td></tr>
<tr><th>Reporter</th><td>Shuo Liang</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2015-09-18T02:49:06.000+0000</td></tr>
<tr><th>Updated</th><td>2015-09-22T21:43:51.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Reproduce</h4>
1. Create a new default mobile project.
2. Download a sample CommonJS module superagent from [<a href="http://gitt.io/component/superagent" rel="nofollow" target="_blank">http://gitt.io/component/superagent</a>]
3. Include the module into project
4. Add following test code into app.js
<code><pre>
var request = require('superagent');

request.get('<a href="http://www.baidu.com" rel="nofollow" target="_blank">http://www.baidu.com</a>')
.end(function (res) {
  console.log('Textual version of APIs:');
  console.log(res.text);
});
</pre></code>
5. Run the app with SDK 4.1.0.GA and 5.0.0.GA on both simulator and real device

<h4>Actual Result</h4>
For SDK 4.1.0, both simulator and device all work well.
For SDK 5.0.0, Only simulator works well, on device, you will get a error like following
<code><pre>[ERROR] Script Error Couldn't find module: superagent for architecture: arm64</pre></code>

<h3>Comments</h3>

<ol>
<li>Chris Barber 2015-09-18

   Master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7204" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7204</a>
   5_0_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7205" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7205</a></li>
<li>Chee Kiat Ng 2015-09-20

   APPROVED. PRs merged.</li>
<li>Vincent Degroote 2015-09-22

   Hi,
   
   I noticed the same problem with a deploy type set to test. Hope it will fix this problem as well.
   
   thanks</li>
<li>Vincent Degroote 2015-09-22

   I tried with the 5_0_X branch, it works.
   Thanks.</li>
<li>Lokesh Choudhary 2015-09-22

   Verified the fix.
   
   CommonJS module builds fine on a real device.
   Closing.
   
   Environment:
   Appc Studio : 4.3.0.201509151348
   Ti SDK :  5.0.1.v20150922104152
   Ti CLI : 5.0.3
   Alloy : 1.7.10
   MAC Yosemite : 10.10.4
   Appc NPM : 4.2.0
   Appc CLI : 5.0.2-19
   Node: v0.10.37
   One plus one - Android 5.1.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-19545.json">JSON Source</a></p>