---
title: "[TIMOB-19614] Setting showUndoRedoActions to true after creation crashes app"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-09-30T19:48:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2015-09-29T12:27:17.000+0000</td></tr>
<tr><th>Updated</th><td>2015-10-14T17:55:52.000+0000</td></tr>
</table>

<h3>Description</h3>

The example code in TIMOB-19150 shows that an app crashes when you set <code>showUndoRedoActions</code> to <code>true</code> after creation. This is an example covering both <code>Ti.UI.TextField</code> and <code>Ti.UI.TextArea</code>:

<code><pre>

var showUndoRedoActionsField = true
var showUndoRedoActionsArea = true

var win = Ti.UI.createWindow({backgroundColor: "#fff",layout: "vertical"});
var field = Ti.UI.createTextArea({width: 300,height: 50,top: 100,backgroundColor: "#f0f0f0"});
var area = Ti.UI.createTextArea({width: 300,height: 300,top: 100,backgroundColor: "#f0f0f0"});
var btn1 = Ti.UI.createButton({title: "Toggle field"});
var btn2 = Ti.UI.createButton({title: "Toggle area"});

field.showUndoRedoActions = showUndoRedoActionsField;
area.showUndoRedoActions = showUndoRedoActionsArea;

btn1.addEventListener("click", function() {
    showUndoRedoActionsField = !showUndoRedoActionsField;
    field.showUndoRedoActions = showUndoRedoActionsField;
});
btn2.addEventListener("click", function() {
    showUndoRedoActionsArea = !showUndoRedoActionsArea;
    area.showUndoRedoActions = showUndoRedoActionsArea;
});

win.add(field);
win.add(btn1);
win.add(area);
win.add(btn2);
win.open();

</pre></code>

Tap the button twice (first sets it to <code>false</code>) and the app will crash with:

<code><pre>
[ERROR] 2015-09-29 14:21:19.883 theme[21620:3697521] -[CALayer copyWithZone:]: unrecognized selector sent to instance 0x7fc528d3c790
[ERROR] Script Error {
[ERROR]     column = 10;
[ERROR]     line = 12;
[ERROR]     message = "-[CALayer copyWithZone:]: unrecognized selector sent to instance 0x7fc528d3c790";
[ERROR]     sourceURL = "file:///Users/fokkezb/Library/Developer/CoreSimulator/Devices/C19B50F8-3D4C-4516-BFCB-4E7A1BA8D982/data/Containers/Bundle/Application/BD0C4CF3-5C08-44D3-8A66-8BD3C6B8B4E1/theme.app/app.js";
[ERROR]     stack = "file:///Users/fokkezb/Library/Developer/CoreSimulator/Devices/C19B50F8-3D4C-4516-BFCB-4E7A1BA8D982/data/Containers/Bundle/Application/BD0C4CF3-5C08-44D3-8A66-8BD3C6B8B4E1/theme.app/app.js:12:10";
[ERROR] }
</pre></code>

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2015-09-29

   PR pending (fixing both TextArea and TextField): <a href="https://github.com/appcelerator/titanium_mobile/pull/7243" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7243</a>
   
   [~apetkov] Can you do a functional test?</li>
<li>Eric Wieber 2015-10-14

   Verified fixed, using:
   
   MacOS 10.11 (15A284)
   Studio 4.4.0.201510092420
   Ti SDK 5.1.0.v20151013151603
   Appc NPM 4.2.1-1
   Appc CLI 5.1.0-38
   Ti CLI 5.0.5
   Alloy 1.7.16
   Arrow 1.3.13
   Xcode 7.0.1 (7A1001)
   Node v4.1.0
   Java 1.7.0_80
   production
   
   Toggling the undo/redo actions or the entire actions bar after creation does not crash the app.</li>
</ol>


<p><a href="/TIMOB/TIMOB-19614.json">JSON Source</a></p>