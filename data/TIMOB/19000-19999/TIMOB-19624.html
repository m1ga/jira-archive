---
title: "[TIMOB-19624] iOS event 'notification' not called any more when the app runs a couple of days"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2018-01-20T14:24:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios</td></tr>
<tr><th>Reporter</th><td>Ronald van Woensel</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2015-05-02T22:33:00.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:41:07.000+0000</td></tr>
</table>

<h3>Description</h3>

I got the idea that when the app is running for a few days, the local notifications stop working.
Added some logging to app.js to test this:
	

{noformat}
Ti.App.iOS.addEventListener('notification',function(e) {
  Ti.API.info("APP local notification received: "+JSON.stringify(e));
});
{noformat}


Changed /Library/Application Support/Titanium/mobilesdk/osx/3.5.1.GA/iphone/Classes/TiApp.m to add some logging in the application delegate:


{noformat}
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
        DebugLog(@"[INFO] TiApp Didreceivelocalnotification");  
        RELEASE_TO_NIL(localNotification);
        localNotification = [[[self class] dictionaryWithLocalNotification:notification] retain];
        [[NSNotificationCenter defaultCenter] postNotificationName:kTiLocalNotification object:localNotification userInfo:nil];
}
{noformat}



In the beginning when the app is freshly started everything looks ok:


{noformat}
May 1 00:29:22 iPhone inbeacon[3427] <Warning>: [INFO] TiApp Didreceivelocalnotification
May  1 00:29:22 iPhone inbeacon[3427] <Warning>: [INFO] local notification received: {"category":null,"badge":0,"alertAction":"toet","timezone":"Europe/Amsterdam","alertBody":"toet toet nederlands","sound":"UILocalNotificationDefaultSoundName","alertLaunchImage":null,"date":"2015-05-01T10:42:42.825Z","userInfo":{"inbeacon":true,"tid":"305","id":38},"identifier":null,"bubbles":true,"type":"notification","source":{},"cancelBubble":false}
May  1 00:29:22 iPhone inbeacon[3427] <Warning>: [INFO] APP local notification received: {"category":null,"badge":0,"alertAction":"toet","timezone":"Europe/Amsterdam","alertBody":"toet toet nederlands","sound":"UILocalNotificationDefaultSoundName","alertLaunchImage":null,"date":"2015-05-01T10:42:42.825Z","userInfo":{"inbeacon":true,"tid":"305","id":38},"identifier":null,"bubbles":true,"type":"notification","source":{},"cancelBubble":false}

{noformat}


But if I let the app run for a few days, it stops working:


{noformat}
May  3 00:14:48 iPhone inbeacon[1587] <Warning>: [INFO] TiApp Didreceivelocalnotification
*<--- missing the notification event here --->*
May  3 00:14:49 iPhone inbeacon[1587] <Warning>: [DEBUG] Firing app event: resumed
May  3 00:14:49 iPhone inbeacon[1587] <Warning>: [INFO] app has resumed from the background
May  3 00:14:49 iPhone inbeacon[1587] <Warning>: [INFO] device/sync with <a href="http://api.inbeacon.nl" rel="nofollow" target="_blank">http://api.inbeacon.nl</a>
May  3 00:14:50 iPhone inbeacon[1587] <Warning>: [INFO] device/sync: No refresh -> already synced to version 175

{noformat}




<h3>Comments</h3>

<ol>
<li>Hans Kn√∂chel 2018-01-20

   This is fixed since a while. We refactored the way notifications are handled internally to ensure they get queued on app-launch.</li>
<li>Eric Merriman  2018-08-06

   Closing as a duplicate. If this is in error, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-19624.json">JSON Source</a></p>