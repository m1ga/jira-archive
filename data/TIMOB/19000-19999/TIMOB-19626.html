---
title: "[TIMOB-19626] Add FB Audience Network Support to Facebook Module"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2018-01-23T13:58:52.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>ads, android, facebook, ios, module, titanium</td></tr>
<tr><th>Reporter</th><td>Ghassan</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2015-05-21T01:28:02.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-02T22:20:02.000+0000</td></tr>
</table>

<h3>Description</h3>

Current Facebook Module missing support for FB Audience Network for iOS and Android as indicated on facebook at:

<a href="https://developers.facebook.com/docs/audience-network/getting-started#ads_sdk" rel="nofollow" target="_blank">https://developers.facebook.com/docs/audience-network/getting-started#ads_sdk</a>


<h3>Comments</h3>

<ol>
<li>Ghassan 2015-05-27

   Facebook iOS Banner Instructions:
   // Import the SDK header file and declare that you are implementing 
   // the FBAdViewDelegate protocol:
   #import <FBAudienceNetwork/FBAudienceNetwork.h>
   
   @interface MyViewController : UIViewController <FBAdViewDelegate>
     // Other code might go here...
   @end
           
   // In your View Controller, create a new instance of the FBAdView
   // and add it to your view hierarchy:
   - (void)viewDidLoad
   {
     [super viewDidLoad];
   
     FBAdView *adView =
       [[FBAdView alloc] initWithPlacementID:@"347360645445128_445223535658838"
                                      adSize:kFBAdSize320x50
                          rootViewController:self];
   
     adView.delegate = self;
   
     [adView loadAd];
   
     // Reposition the adView
     // ... 
   
     [self.view addSubview:adView];
   }
   
   // Now that you have the basic code running, it is recommended that you use 
   // the FBAdView delegate to get notified when the ad fails to load so you 
   // could hide the banner unit. In the same way, you can add it back when it 
   // was loaded:
   - (void)adView:(FBAdView *)adView didFailWithError:(NSError *)error;
   {
     NSLog(@"Ad failed to load");
     // Add code to hide the ad unit...
     // E.g. adView.hidden = YES;
   }
   
   - (void)adViewDidLoad:(FBAdView *)adView;
   {
     NSLog(@"Ad was loaded and ready to be displayed");
     // Add code to show the ad unit...
     // E.g. adView.hidden = NO;
   }</li>
<li>Ghassan 2015-05-27

   Facebook iOS Interstitial:
   // Import the SDK header file and declare that you are implementing 
   // the FBInterstitialAdDelegate protocol:
   #import <FBAudienceNetwork/FBAudienceNetwork.h>
   
   @interface MyViewController : UIViewController <FBInterstitialAdDelegate>
     // Other code might go here...
   @end
   
   // Add a function in your View Controller that initializes the interstitialAd:
   - (void)loadInterstitial
   {
     FBInterstitialAd *interstitialAd =
       [[FBInterstitialAd alloc] initWithPlacementID:@"347360645445128_445223535658838"];
     interstitialAd.delegate = self;
     [interstitialAd loadAd];
   }
   
   // Now that you have added the code to load the ad, add the following functions 
   // to display the ad once it is loaded and to handle loading failures:
   - (void)interstitialAdDidLoad:(FBInterstitialAd *)interstitialAd
   {
     NSLog(@"Interstitial ad is loaded and ready to be displayed");
   
     // You can now display the full screen ad using this code:
     [interstitialAd showAdFromRootViewController:self];
   }
   
   - (void)interstitialAd:(FBInterstitialAd *)interstitialAd 
         didFailWithError:(NSError *)error
   {
     NSLog(@"Interstitial ad is failed to load with error: %@", error);
   }</li>
<li>Ghassan 2015-05-27

   FB iOS Native Placement:
   // Import the SDK header file and declare that you are implementing 
   // the FBNativeAdDelegate protocol:
   #import <FBAudienceNetwork/FBAudienceNetwork.h>
   
   @interface MyViewController : UIViewController <FBNativeAdDelegate>
     // Other code might go here...
   @end
   
   // Add a function in your View Controller that initializes the FBNAtiveAd 
   // and request an ad to load:
   - (void)showNativeAd
   {
     FBNativeAd *nativeAd = 
       [[FBNativeAd alloc] initWithPlacementID:@"347360645445128_445223535658838"];
     nativeAd.delegate = self;
     [nativeAd loadAd];
   }
   
   // Now that you have added the code to load the ad, add the following 
   // functions to handle loading failures and to construct the ad once 
   // it has loaded:
   - (void)nativeAdDidLoad:(FBNativeAd *)nativeAd
   {      
     NSString *titleForAd = nativeAd.title;
     NSString *bodyTextForAd = nativeAd.body;
     FBAdImage *coverImage = nativeAd.coverImage;
     FBAdImage *iconForAd = nativeAd.icon;
     NSString *socialContextForAd = nativeAd.socialContext;
     struct FBAdStarRating appRatingForAd = nativeAd.starRating;
     NSString *titleForAdButton = nativeAd.callToAction;
   
     // Add code here to create a custom UIView that uses the ad properties
     // For example:
     UIView *nativeAdView  = [[UIView alloc]initWithFrame:adFrame];
     UILabel *titleLabel = [[UILabel alloc] initWithFrame:titleFrame];
     titleLabel.text = titleForAd;
     [nativeAdView addSubview:titleLabel];
     ...
   
     // Add the ad to the view hirarchy 
     [self.view addSubview:nativeAdView];
   
     // Register the native ad view and its view controller with the 
     // native ad instance
     [nativeAd registerViewForInteraction:nativeAdView withViewController:self];
   }
   
   - (void)nativeAd:(FBNativeAd *)nativeAd didFailWithError:(NSError *)error
   {
     NSLog(@"Ad failed to load with error: %@", error);
   }</li>
<li>Ghassan 2015-05-27

   FB Android Banner:
   // Edit your activity's layout XML file to include a
   // RelativeLayout to contain the AdView:
   
   <LinearLayout
       xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"
       android:orientation="vertical"
       >
   
       <RelativeLayout
           android:id="@+id/adViewContainer"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           />
   
   ...
   </LinearLayout>
   
   // In your activity's onCreate function, construct the AdView,
   // add to the container view and load the ad:
   
   private AdView adView;
   
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
   
     ...
       RelativeLayout adViewContainer = (RelativeLayout) findViewById(R.id.adViewContainer);
   
       adView = new AdView(this, "347360645445128_445223535658838", AdSize.BANNER_320_50);
       adViewContainer.addView(adView);
       adView.loadAd();
   }</li>
<li>Ghassan 2015-05-27

   FB Android Interstitial:
   // Declare the InterstitialActivity in AndroidManifest.xml:
   //  <activity android:name="com.facebook.ads.InterstitialAdActivity"
   //            android:configChanges="keyboardHidden|orientation" />
   // In the Activity that will launch the interstitial,
   // implement the AdListener interface and add the following:
   
   import com.facebook.ads.*;
   
   private InterstitialAd interstitialAd;
   
   private void loadInterstitialAd() {
       interstitialAd = new InterstitialAd(this, "347360645445128_445223535658838");
       interstitialAd.setAdListener(this);
       interstitialAd.loadAd();
   }
   
   @Override
   public void onError(Ad ad, AdError error) {
       // Ad failed to load
   }
   
   @Override
   public void onAdLoaded(Ad ad) {
       // Ad is loaded and ready to be displayed
       // You can now display the full screen add using this code:
       interstitialAd.show();
   }</li>
<li>Ghassan 2015-05-27

   FB Android Native Placement:
   // In the Activity that will launch the native ad,
   // implement the AdListener interface and add the following:
   
   import com.facebook.ads.*;
   
   private NativeAd nativeAd;
   
   private void showNativeAd(){
     nativeAd = new NativeAd(this, "347360645445128_445223535658838");
     nativeAd.setAdListener(new AdListener() {
   
       @Override
       public void onError(Ad ad, AdError error) {
           ...
       }
   
       @Override
       public void onAdLoaded(Ad ad) {
           ...
       }
   
       @Override
       public void onAdClicked(Ad ad) {
           ...
       }
     });
   
     nativeAd.loadAd();
   }
   
   // The next step is to extract the ad metadata and use its properties 
   // to build your customized native UI. Modify the onAdLoaded function 
   // above to retrieve the ad properties. For example:
   @Override
   public void onAdLoaded(Ad ad) {
     if (ad != nativeAd) {
       return;
     }
   
     String titleForAd = nativeAd.getAdTitle();
     Image coverImage = nativeAd.getAdCoverImage();
     Image iconForAd = nativeAd.getAdIcon();
     String socialContextForAd = nativeAd.getAdSocialContext();
     String titleForAdButton = nativeAd.getAdCallToAction();
     String textForAdBody = nativeAd.getAdBody();
     Rating appRatingForAd = nativeAd.getAdStarRating();
   
     // Add code here to create a custom view that uses the ad properties
     // For example:
     LinearLayout nativeAdContainer = new LinearLayout(this);
     TextView titleLabel = new TextView(this);
     titleLabel.setText(titleForAd);
     nativeAdContainer.addView(titleLabel);
     ...
   
     // Add the ad to your layout
     LinearLayout mainContainer = (LinearLayout)findViewById(R.id.MainContainer);
     mainContainer.addView(nativeAdContainer);
   
     // Register the native ad view with the native ad instance
     nativeAd.registerViewForInteraction(nativeAdContainer);
   }</li>
<li>Guillermo Figueras 2017-09-21

   Is there any plan on implementing this?
   
   It would be a good thing to have the possibility to include other ad networks besides Admob.</li>
<li>Eric Merriman  2017-10-30

   Yes, we'd like to support this, but when is the real issue. This will have to move to after 7.0.0 SDK, so this will be the first for 7.1.0.</li>
<li>Hans Knöchel 2018-01-23

   After checking some general requirements of this effort, I would recommend to *not* making it part of Ti.Facebook - simply because the .framework takes 60+ MB space and will blow up the app size even when not used. Instead, here is a simple implementation for Hyperloop using Cocoapods that does the same thing but only if you need it:
   
   <h4>Add <code>pod 'FBAudienceNetwork'</code> to your Podfile</h4>
   <h4>Import the framework</h4>
   <code><pre>
   var FBInterstitialAd = require('FBAudienceNetwork/FBInterstitialAd');
   </pre></code>
   <h4>Load the ad (taken as an example from [the official docs](<a href="https://developers.facebook.com/docs/audience-network/ios-interstitial))" rel="nofollow" target="_blank">https://developers.facebook.com/docs/audience-network/ios-interstitial))</a></h4>
   <code><pre>
   var ad = FBInterstitialAd.alloc(). initWithPlacementID('YOUR_PLACEMENT_ID');
   ad.delegate = yourDelegate;
   ad.loadAd();
   </pre></code></li>
<li>Eric Merriman  2018-08-02

    Closing old "Won't fix" tickets. If you disagree, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-19626.json">JSON Source</a></p>