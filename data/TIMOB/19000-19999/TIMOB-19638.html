---
title: "[TIMOB-19638] Memory Leak in Alloy android Menu?"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>alloy, android, leak, memory, menu</td></tr>
<tr><th>Reporter</th><td>Andrey Tkachenko</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2015-09-05T19:41:31.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T19:55:49.000+0000</td></tr>
</table>

<h3>Description</h3>

I test my code for memory leaks. When I use Menu in my View I can't to make sure that memory fully released. Not all proxy removed from memory after closing test window. Some time but rarely all proxies and his native views removed fully. 

Why it happens and how to deal with this behavior?
The situation is complicated by using a more complex controller with a many of child Views.

<code><pre>
<Alloy>
    <Window>       
        <Menu id="menu" platform="android">           
            <MenuItem id="submitButton" title="123">
            </MenuItem>
        </Menu>    
        <Label>Close this window and then create second HPROF dump. Then compare difference against two dumps.</Label>    
    </Window>
</Alloy>
</pre></code>

<code><pre>
// empty
</pre></code>


<code><pre>
function doClick(e) {
    Alloy.createController('testWindow').getView().open();
}

$.index.open();
</pre></code>

<code><pre>
<Alloy>
	<Window class="container" layout="vertical">
	    <Label>Create first HPROF dump now</Label>
		<Button id="label" onClick="doClick">Click to open test window</Button>
	</Window>
</Alloy>
</pre></code>

!dumps.png|thumbnail!


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-19638_56648/1st Dump.png">1st Dump.png</td></td><td>2015-09-07T09:27:39.000+0000</td><td>147694</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-19638_56647/2nd Dump.png">2nd Dump.png</td></td><td>2015-09-07T09:27:36.000+0000</td><td>146141</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-19638_56641/dumps.png">dumps.png</td></td><td>2015-09-05T19:43:46.000+0000</td><td>108954</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-19638.json">JSON Source</a></p>