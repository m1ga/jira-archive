---
title: "[TIMOB-19681] Android 6.0: Adding TiMap module crashes app while start"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-10-08T02:21:20.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Eduardo Gomez</td></tr>
<tr><th>Assignee</th><td>Ashraf Abu</td></tr>
<tr><th>Created</th><td>2015-10-06T23:49:57.000+0000</td></tr>
<tr><th>Updated</th><td>2015-10-13T00:35:33.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue Descriptions</h4>
Adding the TiMap module to Tiapp crashes an app when building for Android 6.0 (M). If the module is removed there is no crash. 

<h4>Steps to reproduce</h4>
1) Create a sample app having included a com.google.android.maps.v2.API_KEY
2) Get CI build 5.1.0.X or latest stable release
3) Run app on Android 6
4) Watch logs 

<h4>Stack Trace</h4>
<code><pre>
10-06 17:43:25.363: E/AndroidRuntime(13751): FATAL EXCEPTION: KrollRuntimeThread 
10-06 17:43:25.363: E/AndroidRuntime(13751): Process: com.app.id, PID: 13751 
10-06 17:43:25.363: E/AndroidRuntime(13751): java.lang.UnsatisfiedLinkError: dlopen failed: /data/app/com.app.id-2/lib/arm/libti.map.so: has text relocations 
10-06 17:43:25.363: E/AndroidRuntime(13751): at java.lang.Runtime.loadLibrary(Runtime.java:372) 
10-06 17:43:25.363: E/AndroidRuntime(13751): at java.lang.System.loadLibrary(System.java:1076) 
10-06 17:43:25.363: E/AndroidRuntime(13751): at org.appcelerator.kroll.runtime.v8.V8Runtime.loadExternalModules(V8Runtime.java:132) 
10-06 17:43:25.363: E/AndroidRuntime(13751): at org.appcelerator.kroll.runtime.v8.V8Runtime.initRuntime(V8Runtime.java:99) 
10-06 17:43:25.363: E/AndroidRuntime(13751): at org.appcelerator.kroll.KrollRuntime.doInit(KrollRuntime.java:185) 
10-06 17:43:25.363: E/AndroidRuntime(13751): at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:109) 
10-06 17:43:25.364: W/ActivityManager(1990): Force finishing activity com.app.id/.PhoneActivity 
10-06 17:43:25.670: I/WindowManager(1990): Screenshot max retries 4 of Token{2157417 ActivityRecord{71e9096 u0 com.app.id/.PhoneActivity t101 f}} appWin=Window{3f32588 u0 Starting com.mfoundry.enterprise.mbanking.push} drawState=4 
</pre></code>

<h3>Comments</h3>

<ol>
<li>Chee Kiat Ng 2015-10-07

   [~msamah] take a look?</li>
<li>Ashraf Abu 2015-10-07

   [~egomez]May I know which version of Ti.Map for Android is being used?</li>
<li>Ashraf Abu 2015-10-07

   PR: <a href="https://github.com/appcelerator-modules/ti.map/pull/128" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/128</a>
   Please review this [~ssombhatla]</li>
<li>Ashraf Abu 2015-10-07

   PR reviewed and merged.</li>
<li>Ashraf Abu 2015-10-07

   PR to update module in Master: <a href="https://github.com/appcelerator/titanium_mobile/pull/7273" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7273</a></li>
<li>Ashraf Abu 2015-10-08

   PR to master merged.</li>
<li>Lokesh Choudhary 2015-10-13

   Verified the fix.
   App does not crash when the map module is used on android 6.0.
   
   Closing.
   
   Environment:
   Appc Studio : 4.3.1.201509302304
   Ti SDK :  5.1.0.v20151009204425, 5.0.2.GA
   Ti CLI : 5.0.5
   Alloy : 1.7.16
   MAC Yosemite : 10.10.5
   Appc NPM : 4.2.1-1
   Appc CLI : 5.1.0-38
   Node: v0.10.37
   Nexus 5 - Android 6.0
   Android Map Module: 2.3.4 </li>
</ol>


<p><a href="/TIMOB/TIMOB-19681.json">JSON Source</a></p>