---
title: "[TIMOB-19683] iOS build is getting failed with latest SDK "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-10-08T07:45:36.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Components</th><td>iOS, Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Kondal Kolipaka</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2015-10-07T09:09:31.000+0000</td></tr>
<tr><th>Updated</th><td>2015-10-13T21:02:34.000+0000</td></tr>
</table>

<h3>Description</h3>

iOS build is getting failed with latest SDK 5.1.0.v20151006222951

Please find the error below from studio.
<code><pre>
[WARN] :   Skipping Resources/iphone/appicon-60@2x.png because app icons must not have an alpha channel
[WARN] :   Skipping Resources/iphone/appicon-60@3x.png because app icons must not have an alpha channel
[WARN] :   Skipping Resources/iphone/appicon-76.png because app icons must not have an alpha channel
[WARN] :   Skipping Resources/iphone/appicon-76@2x.png because app icons must not have an alpha channel
[WARN] :   Skipping Resources/iphone/appicon-Small-40.png because app icons must not have an alpha channel
[WARN] :   Skipping Resources/iphone/appicon-Small-40@2x.png because app icons must not have an alpha channel
[WARN] :   Skipping Resources/iphone/appicon-Small.png because app icons must not have an alpha channel
[WARN] :   Skipping Resources/iphone/appicon-Small@2x.png because app icons must not have an alpha channel
[ERROR] :  An error occurred during build after 6s 794ms
[ERROR] :  DefaultIcon.png cannot be used because it contains an alpha channel
TRACE  | titanium exited with exit code 1
ERROR  | Error: ti run exited with error code 1
    at ChildProcess.&lt;anonymous&gt; (/Users/kkolipaka/.appcelerator/install/5.0.2/package/node_modules/appc-cli-titanium/plugins/run.js:89:66)
    at ChildProcess.emit (events.js:117:20)
    at Process.ChildProcess._handle.onexit (child_process.js:820:12)
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-19683_56926/log.txt">log.txt</td></td><td>2015-10-07T09:08:27.000+0000</td><td>14520</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Chee Kiat Ng 2015-10-07

   This was done with appc run.
   I think we have to check the DefaultIcon.png packaged inside Alloy and inside Ti.
   [~cbarber] right?</li>
<li>Chris Barber 2015-10-07

   Yeah, the DefaultIcon.png in Alloy has an alpha channel: <a href="https://github.com/appcelerator/alloy/blob/master/templates/DefaultIcon.png" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/blob/master/templates/DefaultIcon.png</a>
   
   We really need to figure out a way to remove the alpha channel from images. This means if you have an image with an alpha channel, then the iOS build would COPY the image to the build dir, then remove the alpha channel, then embed the image in the asset catalog. I'm not sure the best way to do that. Perhaps there's a Node module that will do it? We should probably add this functionality to node-appc's image library so that we can reuse it.
   
   As far as this ticket is concerned, while the issue is caused by Alloy, it's ultimately because of a bug in the iOS build, so we should probably fix it in the SDK.</li>
<li>Chris Barber 2015-10-08

   Decided to add support for platform specific default icons. For iOS, it will look for <code>DefaultIcon-ios.png</code>, followed by <code>DefaultIcon-iphone.png</code> and finally <code>DefaultIcon.png</code>.
   
   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7279" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7279</a></li>
<li>Chee Kiat Ng 2015-10-08

   <h4>Test Cases</h4>
   1. Only DefaultIcon.png has alpha channel.
   2. DefaultIcon.png(with alpha) + DefaultIcon-ios.png(without alpha)
   3. DefaultIcon.png(with alpha) + DefaultIcon-ios.png(with alpha)
   <h4>Expected Result</h4>
   1. <code><pre>
   [ERROR] /Users/kiat/titaniumTestWatch/SGTestPNG/DefaultIcon.png cannot be used because it contains an alpha channel
   [ERROR] Create a image named "DefaultIcon-ios.png" in the root of your project
   [ERROR] It is highly recommended that the DefaultIcon.png be 1024x1024
   </pre></code>
   2. Builds with no issues
   3. Same error as 1.
   
   CR and FT passed. Merging PR.</li>
<li>Chee Kiat Ng 2015-10-08

   [~bhatfield], need you help to put in a document or guide somewhere that says:
   1. Apple doesn't accept app icons with alpha channels.
   2. Ti developers either have no alpha channel in their DefaultIcon.png across platforms, or
   3. Ti developers can have DefaultIcon.png with alpha channel, and another version without named as DefaultIcon-ios.png or DefaultIcon-iphone.png</li>
<li>Eric Wieber 2015-10-13

   Verified fixed, using:
   
   MacOS 10.11 (15A284)
   Studio 4.3.2.201510082315
   Ti SDK 5.1.0.v20151009204425
   Appc NPM 4.2.1-1
   Appc CLI 5.1.0-38
   Ti CLI 5.0.5
   Alloy 1.7.16
   Arrow 1.3.13
   Xcode 7.0.1 (7A1001)
   Node v0.10.37
   Java 1.7.0_80
   preproduction
   
   Scenarios tested:
   1. DefaultIcon.png with alpha
   2. DefaultIcon.png without alpha
   3. DefaultIcon.png with alpha, DefaultIcon-ios.png without alpha
   4. DefaultIcon.png with alpha, DefaultIcon-ios.png with alpha
   
   Scenarios 1 and 4 failed with the expected error (above). Scenarios 2 and 3 successfully built without error.</li>
</ol>


<p><a href="/TIMOB/TIMOB-19683.json">JSON Source</a></p>