---
title: "[TIMOB-19739] iOS: Ti.Contacts custom phone label in phones become undefined"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-10-21T17:38:57.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.1.0, Release 5.2.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>contacts, ios, iphone</td></tr>
<tr><th>Reporter</th><td>jack sparrow</td></tr>
<tr><th>Assignee</th><td>Chee Kiat Ng</td></tr>
<tr><th>Created</th><td>2015-10-16T06:51:02.000+0000</td></tr>
<tr><th>Updated</th><td>2015-11-09T12:20:30.000+0000</td></tr>
</table>

<h3>Description</h3>

i need urgent solution for this bug in Contacts list phone numbers , IOS

if i have contact he's phone number saved in custom label the phone numbers of this contact object return "undefined" 



<code><pre>
 var people          = Ti.Contacts.getAllPeople(); 

     for ( var i = 0 ; i < people.length; i++)
     {
     	var person  = people[i];
     	var contactPhones = person['phone'] ;//should be array 
     	//if contact has phone number saved as custom label return undefined;
     	Ti.API.info(i+' - Contact Phones '+contactPhones);
     }
</pre></code>


<h3>Comments</h3>

<ol>
<li>jack sparrow 2015-10-19

   anyone ?</li>
<li>Fokke Zandbergen 2015-10-19

   [~jackSparrow] we have been able to reproduce the issue and will schedule it asap.</li>
<li>Chee Kiat Ng 2015-10-20

   PR here : <a href="https://github.com/appcelerator/titanium_mobile/pull/7322" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7322</a></li>
<li>Hans Knöchel 2015-10-20

   Tested the above demo code using the PR of [~cng]. Works fine, FT approved, PR merged, ticket resolved. Thank you!</li>
<li>jack sparrow 2015-10-21

   yes the above demo by Chee is working fine on custom labels , but it cost another issue , when add new contact has default label it gives Error exception , for example add new contact but don't change the label keep it "phone" :
   
   <code><pre>
   if (key == nil )
           {
               
               @try {
                   key = [NSString stringWithString:genericProperty.label];
               }
               @catch (NSException *exception) {
                   
                   key = nil;
                   DebugLog(@"%@", exception.reason);
                   }
   	}
   
         //with or without key == nil , cost new contact issue 
           if (key == nil) {
            		DebugLog(@"Unable to find key for property");
            		return nil;
           }
   </pre></code>
   
   
   Console print out exception Error for new contact : 
   
   
   <code><pre>
   *** -[NSPlaceholderString initWithString:]: nil argument
   </pre></code>
   
   
   
   </li>
<li>Chee Kiat Ng 2015-10-21

   [~jackSparrow], sorry, I might be missing something here, i had no problem adding a new contact with default settings. can you write an example code (in JS) that explains the new problem?</li>
<li>jack sparrow 2015-10-21

   Sorry my bad in explain , here what i did : 
   
   1- open phone dialog , write any phone number .
   2- click on + icon to create new contact ( the number your wrote in dialog ) .
   3- by default the label will be "phone" keep it and click save .
   
   now get contacts list using above code with bug fix , you will get Error exception :
   
   
   <code><pre>
   *** -[NSPlaceholderString initWithString:]: nil argument
   </pre></code>
   
   i did not tested it on simulator , tested on my iPhone. 
   
   </li>
<li>Chee Kiat Ng 2015-10-21

   good catch [~jackSparrow], this should be an apple bug since it's that value should be nonnull as according to the docs here:
   <a href="https://developer.apple.com/library/ios/documentation/Contacts/Reference/CNLabeledValue_Class/#//apple_ref/occ/instp/CNLabeledValue/label" rel="nofollow" target="_blank">https://developer.apple.com/library/ios/documentation/Contacts/Reference/CNLabeledValue_Class/#//apple_ref/occ/instp/CNLabeledValue/label</a>
   
   But PR here anyway, until Apple fixes it.
   <a href="https://github.com/appcelerator/titanium_mobile/pull/7325" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7325</a></li>
<li>jack sparrow 2015-10-21

   @Chee Kiat Ng , you are the man (y)</li>
<li>Hans Knöchel 2015-10-21

    PR tested and approved. [~jackSparrow], we will also supply this fix in the upcoming 5.1.0 version instead of 5.2.0. Thank you!</li>
<li>Harry Bryant 2015-10-22

    Verified as fixed, tested on 9.1 iPhone 6S Plus device, using 5.0.2.GA release, I am able to reproduce the error. Creating a contact with custom label "phone" and running the app will log the contact as "undefined". rebuilding app with release 5.1.0.v20151021165224, the error is no longer reproducible. 
    
    Mac OSX El Capitan 10.11 (15A284)
    Studio: 4.3.3.201510201834
    Ti SDK: 5.1.0.v20151021165224
    Appc NPM: 4.2.1-6
    Appc CLI: 5.2.0-24
    Ti CLI: 5.0.4
    Xcode 7.1(7B91b)
    Node v0.12.7
    production
    
    *Closing ticket.*</li>
<li>Michael Woode 2015-11-09

    </li>
</ol>


<p><a href="/TIMOB/TIMOB-19739.json">JSON Source</a></p>