---
title: "[TIMOB-19757] Cannot access files in Resources directory with 5.2.x"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-10-29T21:41:08.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.0, Release 5.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Components</th><td>iOS, Tooling</td></tr>
<tr><th>Labels</th><td>filesystem</td></tr>
<tr><th>Reporter</th><td>Sebastian Klaus</td></tr>
<tr><th>Assignee</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Created</th><td>2015-10-21T06:57:52.000+0000</td></tr>
<tr><th>Updated</th><td>2015-11-24T19:06:19.000+0000</td></tr>
</table>

<h3>Description</h3>

<code><pre>
Operating System
  Name                        = Mac OS X
  Version                     = 10.11.1
  Architecture                = 64bit
  # CPUs                      = 8
  Memory                      = 17179869184
Node.js
  Node.js Version             = 0.10.38
  npm Version                 = 1.4.28
Titanium CLI
  CLI Version                 = 5.0.5
Titanium SDK
  SDK Version                 = 5.2.0.v20151014151229
  SDK Path                    = /Volumes/Data/Users/sebastian/Library/Application Support/Titanium/mobilesdk/osx/5.0.2.GA
  Target Platform             = iphone
</pre></code>

<code><pre>
var self = Ti.UI.createWindow({
    title: 'file test',
    backgroundColor: '#fff'
});

var navController = Ti.UI.iOS.createNavigationWindow({
    window: self
});

var testFile = Ti.Filesystem.getFile(Ti.Filesystem.getResourcesDirectory(), 'KS_nav_ui.png');
alert(testFile.getSize());

navController.open();
</pre></code>

With SDK 5.0.2.GA the alert gives me 748, with 5.1.x and 5.2.x it alerts 0.

There are several problems, not getting files out of the resources directory. Also getting directories with getFile for getDirectoryListing() does not work.


<h3>Comments</h3>

<ol>
<li>Sebastian Klaus 2015-10-21

   *Update*
   Why I did not mentioned the bug before (I'm testing with 5.2.x since about 2 weeks): the bug does not appear running the app with tishadow</li>
<li>Chee Kiat Ng 2015-10-21

   [~benutzername], can you try with another file? I noticed that this is a png file that came coupled with the app bundle. In 5.1.X and 5.2.X onward, we actually copy all bundled images into asset catalog, for app thinning purposes. So these files are no longer in the Resources Folder after build. But there shouldn't be a situation whereby you need to getSize of an image file that came bundled in the app. However, it will work for downloaded files during run-time.</li>
<li>Sebastian Klaus 2015-10-21

   Yes, I can confirm that it works for downloaded files in the data or cache folder.
   
   It also happens for jpg files.
   
   My first situation: I deliver some background images within my app. I use the directory listing to show the background possibilities and not to take care of a config background image array if I add an image.
   Second situation: I create a pdf file in my app und have to access some image files in my resources directory.
   
   Is there a way to access the assets?</li>
<li>Chee Kiat Ng 2015-10-21

   Ok I didn't expect these use cases. Will investigate.</li>
<li>Sebastian Klaus 2015-10-21

   Can I disable app thinning in the tiapp.xml?</li>
<li>Chee Kiat Ng 2015-10-21

   [~benutzername], there may be ways to workaround your situations using JS. The fastest way workaround i can think now is to change the extension of your files to be non-image type. then change it back during run-time. (Since we allocate the images into assets catalog only during build). 
   The whole purpose of image asset catalog is so that iOS can allocate the right resolution image for the right device in order to save storage space. So it's not as simple if we wish to tackle your situations. As said, we will discuss further internally.
   There's currently no way to disable assets catalogs in the later versions.</li>
<li>Sebastian Klaus 2015-10-21

   [~cng] Thanks. Will try that. So it's just renaming the .jpg to .image e.g.?
   And Appcelerator will not find them as images during the build?</li>
<li>Chee Kiat Ng 2015-10-21

   [~benutzername], by the way, do you use any @2x, @3x files?</li>
<li>Chee Kiat Ng 2015-10-21

   [~benutzername], yes that's correct.</li>
<li>Sebastian Klaus 2015-10-21

    [~cng] I always using @2x and @3x files
    Could this be a problem while renaming to a non image type?</li>
<li>Sebastian Klaus 2015-10-21

    It works so far. Will watch it.</li>
<li>Ingo Muschenetz 2015-10-21

    [~cng] The existing use cases (no matter what they are) HAVE to continue to work for it to be named 5.1.0, which would suggest the flag sets asset catalogs OFF by default. Otherwise we need to publish it as 6.0.</li>
<li>Feon Sua Xin Miao 2015-10-22

    master: <a href="https://github.com/appcelerator/titanium_mobile/pull/7330" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7330</a>
    5_1_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/7331" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7331</a>
    
    To enable app thinning, include following property in <code>tiapp.xml</code>
    <code><property name="use-app-thinning" type="bool">true</property></code></li>
<li>Wilson Luu 2015-10-26

    Closing ticket as fixed. Verified that if I use the sample code above, then I am able to get the file from the Resources directory.
    
    Tested on:
    
    Appcelerator Studio, build: 4.4.0.201510231805
    Appc CLI NPM: 4.2.1-6
    Appc CLI Core: 5.1.0-38
    Arrow: 1.3.13
    SDK: 5.1.0.v20151023172822
    Node: v4.2.1
    OS: El Capitan (10.11.1)
    Xcode: 7.1
    Devices: iphone 6s (9.1), iphone 6 plus (8.3)</li>
<li>Ingo Muschenetz 2015-10-27

    I agree with [~hansknoechel]--this should be under iOS unless you have plans for a similar usage for Android.
    
    WRT to TIMOB-19489, that's fine. It's a new feature in 5.1.0. If you want to take advantage of it, you have to enable asset catalogs. We just have to make that EXCEPTIONALLY clear when describing the feature.</li>
<li>Chris Barber 2015-10-27

    [~hansknoechel] Properties are only supported as a child of the <ti:app> tag. Platform specific properties are not supported, but could be if needed.</li>
<li>Hans Kn√∂chel 2015-10-27

    [~cbarber] I would just make it exactly as we do with <code><use-main-thread></code> and <code><use-autolayout></code>. Ok?</li>
<li>Chris Barber 2015-10-27

    That's fine, but these one-off settings must each be explicitly added to the tiapp.xml parser library. Also, these settings will not be known to the Titanium app at runtime. Properties are embedded in the app, settings like <code>min-ios-ver</code> are not.
    
    Perhaps it's time to give the tiapp.xml parser some intelligence.</li>
<li>Sebastian Klaus 2015-10-27

    Just to interfere here shortly. Will there be an own section in the docs for all these parameters like *use-app-thinning*, *run-on-main-thread* etc?</li>
<li>Feon Sua Xin Miao 2015-10-27

    Master: <a href="https://github.com/appcelerator/titanium_mobile/pull/7353" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7353</a>
    5_1_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/7354" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7354</a>
    
    To enable app thinning, include following property in <code>tiapp.xml</code> under <code>ios</code> tag
    <code><use-app-thinning>true</use-app-thinning></code></li>
<li>Chee Kiat Ng 2015-10-27

    </li>
<li>Eric Wieber 2015-10-29

    Verified fixed, using:
    
    MacOS 10.11.2 (15C27e)
    Studio 4.4.0.201510280736
    Ti SDK 5.1.0.v20151028190028
    Appc NPM 4.2.1
    Appc CLI 5.1.0-38
    Ti CLI 5.0.5
    Alloy 1.7.16
    Arrow 1.3.13
    Xcode 7.2 (7C46l)
    Node v0.12.7
    Java 1.7.0_80
    production
    
    Using the sample code provided, I am able to access the file in the resources directory. The use-app-thinning property is now usable under the ios tag</li>
<li>Chris Barber 2015-11-20

    [~cng] Nope. app thinning is not enabled by default at any time and is only enabled manually.
    
    Perhaps you're thinking of the launch screen storyboard which will be disabled for existing apps, but enabled for new apps.</li>
<li>Chris Barber 2015-11-21

    [~cng] Can you please update the wiki so that the information is correct? Thank you!</li>
<li>Chris Barber 2015-11-24

    [~bimmel] It's technically "png" and "jpg". We don't support "jpeg".
    
    I don't like the second sentence. Here, just use this:
    
    {quote}
    When enabled, all .png and .jpg images in the <code>Resources</code> directory will be copied into an asset catalog image set and grouped by filename. High density images are defined with the @2x and @3x suffix. For example, <code>foo.jpg</code>, <code>foo@2x.jpg</code>, and <code>foo@3x.jpg</code> would all be grouped into the same image set. However <code>foo@4x.jpg</code> would be in its own image set because @4x is not supported and seen as just apart of the filename and not a suffix. For details, see Images and ImageView APIs. Additionally, images that are in the asset catalog are not accessible from the filesystem and thus you cannot reference the images by its path or URL with the Ti.Filesystem API or equivalent. There is currently no way to exclude specific images from being copied into the asset catalog.
    {quote}</li>
</ol>


<p><a href="/TIMOB/TIMOB-19757.json">JSON Source</a></p>