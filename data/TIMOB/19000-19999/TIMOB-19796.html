---
title: "[TIMOB-19796] Android: CardView Layout property not working as expected"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-12-01T02:30:49.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.1.2</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Ashraf Abu</td></tr>
<tr><th>Created</th><td>2015-10-26T15:04:02.000+0000</td></tr>
<tr><th>Updated</th><td>2015-12-02T20:14:39.000+0000</td></tr>
</table>

<h3>Description</h3>

The new <code>Ti.UI.CardView</code> is [documented](<a href="https://appcelerator.github.io/appc-docs/latest/#" rel="nofollow" target="_blank">https://appcelerator.github.io/appc-docs/latest/#</a>!/api/Titanium.UI.Android.CardView-property-layout) to support the <code>layout</code> property - as one would expect - but it does not behave as expected.

The following sample code and attached screenshot demonstrates that none of the <code>layout</code> values work and that whatever mechanism is used by default is not composite since the labels are aligned top left instead of the expected centre. The first card has a view to wrap the labels to show what I'd expect for the other vertical-card to be like. However, there as well is shows that thew view is not filling up the parent as it normally does.

<code><pre>
var win = Ti.UI.createWindow({
	backgroundColor: 'white'
});

function createCard(layout, wrap) {

	var card = Ti.UI.Android.createCardView({
		top: 20,
		width: Ti.UI.FILL,
		height: 160,

		layout: layout
	});

	var view;

	if (wrap) {

		view = Ti.UI.createView({
			layout: layout
		});

		card.add(view);

	} else {
		view = card;
	}

	view.add(Ti.UI.createLabel({
		width: 50,
		height: 100,
		backgroundColor: 'green',
		text: (wrap ? 'reference' : layout) + ' in green'
	}));

	view.add(Ti.UI.createLabel({
		top: 10,
		width: 100,
		height: 50,
		backgroundColor: 'red',
		text: (wrap ? 'reference' : layout) + ' in red'
	}));

	return card;
}

var scrollView = Ti.UI.createScrollView({
	layout: 'vertical'
});

scrollView.add(createCard('vertical', true));
scrollView.add(createCard('composite'));
scrollView.add(createCard('vertical'));
scrollView.add(createCard('horizontal'));

win.add(scrollView);
win.open();
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-19796_57134/android_20151026-160006.png">android_20151026-160006.png</td></td><td>2015-10-26T15:03:53.000+0000</td><td>57728</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2015-10-26

   [~msamah] I see you did the CardView implementation. I have some other issues I ran into with the 5.1.0 sample app as well. Shall I assign them to you directly?</li>
<li>Ashraf Abu 2015-10-27

   [~fokkezb] Go ahead and assign it to me.</li>
<li>Fokke Zandbergen 2015-11-02

   [~msamah] I'm working on the 5.1.0 sample app but layout inside card views is very hard to work with atm since it doesn't work as in regular views. Any ideas how to fix this yet?</li>
<li>Ashraf Abu 2015-11-03

   I'm currently working on this. 
   [~fokkezb] Does putting a view inside the cardview and working with that view instead help as a workaround for now?</li>
<li>Fokke Zandbergen 2015-11-03

   [~msamah] no, a View in a CardView is not a sufficient workaround because there is no way to make the View take up all of the content size of the card; not by setting <code>width</code> to <code>100%</code> or <code>Ti.UI.FILL</code> (which is the default of course) nor by setting <code>left</code> and <code>right</code> to <code>0</code>.</li>
<li>Fokke Zandbergen 2015-11-03

   Just play with <a href="https://github.com/appcelerator-developer-relations/appc-sample-ti510" rel="nofollow" target="_blank">https://github.com/appcelerator-developer-relations/appc-sample-ti510</a> and you'll see.</li>
<li>Fokke Zandbergen 2015-11-05

   If we can make the view take up all space and have the expected layout behaviour for its children then we have 2 options:
   
   <h4>Add this wrapping view ourselves and forwarding relevant properties set on the card view (backgroundColor, layout..) to the wrapping view. </h4>
   <h4>Remove the <code>add/remove/..</code> methods and instead have a <code>contentView</code> property so it is clear it needs a single view - just like we do for [PopOver](<a href="https://appcelerator.github.io/appc-docs/latest/#" rel="nofollow" target="_blank">https://appcelerator.github.io/appc-docs/latest/#</a>!/api/Titanium.UI.iPad.Popover-property-contentView)</h4>
   
   I'd say nr 2.</li>
<li>Ashraf Abu 2015-11-18

   Master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7466" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7466</a>
   Test code in PR.
   
   [~fokkezb] Feel free to test this out. I'm using the option 1 suggested by you. The cardview will handle the view that is added to it. In this case, TiCompositeLayout is added as a child which is transparent to the user.
   
   5.1.X PR will be added later once this is okay.</li>
<li>Fokke Zandbergen 2015-11-18

   Verified fixed!</li>
<li>Ashraf Abu 2015-12-01

    PR reviewed and merged.
    
    Will make 5_1_X backport.</li>
<li>Ashraf Abu 2015-12-01

    5_1_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7515" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7515</a></li>
<li>Ashraf Abu 2015-12-01

    Backport 5_1_X merged.</li>
<li>Lokesh Choudhary 2015-12-02

    Verified the fix.
    Used the code in the description.
    The cardView layout property works as expected.
    Closing.
    
    Environment:
    Appc Studio : 4.4.0.201511241829
    Ti SDK :  5.1.2.v20151202061227
    Ti CLI : 5.0.5
    Alloy : 1.7.26
    MAC Yosemite : 10.10.5
    Appc NPM : 4.2.2
    Appc CLI : 5.1.0
    Node: v0.12.27
    Nexus 6P - Android 6.0</li>
</ol>


<p><a href="/TIMOB/TIMOB-19796.json">JSON Source</a></p>