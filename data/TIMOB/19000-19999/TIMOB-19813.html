---
title: "[TIMOB-19813] Android: mapview.toImage() gives empty map"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 5.0.2</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, empty, map, mapview, toimage</td></tr>
<tr><th>Reporter</th><td>joachim mercier</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2015-10-05T15:19:59.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T19:54:54.000+0000</td></tr>
</table>

<h3>Description</h3>

Hi,
I'm facing this problem since fews days, I can't get an image of my mapview on Android. This is working perfectly on IOS.
I have created a mapview, I added it to one of my Alloy view.
var mapview = Map.createView({ mapType : Map.NORMAL_TYPE, animate : true, region : region, regionFit : true, userLocation : false, visible : true, top : 0, width : '100%' });
//I Add annotations and a path ... I skipped this part
$.mapContainer.add(mapview)
//My map is showing perfectly on the screen
function onClickShare() {
var Blob = $.mapContainer.toImage();

// I tried also : $.mapContainer.toImage().media, mapview.toImage(), and mapview().toImage.media 
// .media is not valid image, mapview.toImage() gives me same result

var file = Titanium.Filesystem.getFile(Titanium.Filesystem.tempDirectory, 'share_map.png');
file.write(Blob);

//Calling my functions to share on social networks
shareHelper.share();
}
My image is existing, the only thing is that I get an empty map : <a href="http://postimg.org/image/i1u0emfyr/" rel="nofollow" target="_blank">http://postimg.org/image/i1u0emfyr/</a>
I also tried to do a screenshot of the whole screen with Titanium.Media.takeScreenshot, I get all the elements of my view but map still empty.


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-19813_56899/Capture d’écran 2015-09-30 à 20.01.48.png">Capture d’écran 2015-09-30 à 20.01.48.png</td></td><td>2015-10-05T15:19:11.000+0000</td><td>34916</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Aminul Islam 2015-10-27

   Hi,
   I have tested this issue . This is a valid bug.
   My Environment :
   <code><pre>
   Device (Nexus 7 android 5.1.0)
   Operating System
     Name                        = Mac OS X
     Version                     = 10.10.5
     Architecture                = 64bit
     # CPUs                      = 4
     Memory                      = 8589934592
   Node.js
     Node.js Version             = 0.10.37
     npm Version                 = 1.4.28
   Titanium CLI
     CLI Version                 = 5.0.5
   Titanium SDK
     SDK Version                 = 5.0.2.GA
     SDK Path                    = /Users/Raju/Library/Application Support/Titanium/mobilesdk/osx/5.0.2.GA
     Target Platform             = android
   </pre></code>
   
   Thanks</li>
</ol>


<p><a href="/TIMOB/TIMOB-19813.json">JSON Source</a></p>