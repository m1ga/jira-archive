---
title: "[TIMOB-19833] Allow users to access images via Ti.Filesystem when app thinning is enabled"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-01-11T21:22:27.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>appthinning, qe-5.4.0</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Chee Kiat Ng</td></tr>
<tr><th>Created</th><td>2015-10-30T10:34:57.000+0000</td></tr>
<tr><th>Updated</th><td>2016-07-26T23:14:08.000+0000</td></tr>
</table>

<h3>Description</h3>

Because of TIMOB-19757 we have made app-thinning of image assets optional (for existing projects).

This means that when a developer needs to have access to an image via <code>Ti.Filesystem.getFile()</code> he has to disable app-thinning for *all* images.

We need a better solution for this.

Some thoughts:

* Provide away to exclude images from asset catalogs
** (n) Requires new folder or meta file
* Modify <code>Ti.Filesystem.getFile()</code> to find images in asset catalogs
** (n) Requires hack to recognise image requests under resourceDirectory and translate that to <code>[UIImage imageNamed:@"my-name"];</code>
* Add <code>Ti.Filesystem.getAsset()</code> to get an asset via <code>[UIImage imageNamed:@"my-name"];</code>
** (y) Looks like the best option.

<h3>Comments</h3>

<ol>
<li>Chee Kiat Ng 2016-01-07

   Ti.Filesystem.getAsset(file path of bundled image) shall return a blob. This makes the method more versatile, allowing the developer the choice of saving it as a file in any location.</li>
<li>Chee Kiat Ng 2016-01-07

   PR here: <a href="https://github.com/appcelerator/titanium_mobile/pull/7622" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7622</a>
   
   <h4>Steps to test:</h4>
   1. create a new classic project
   2. include in tiapp.xml
   <code><pre>
   	&lt;ios&gt;
       	&lt;use-app-thinning&gt;true&lt;/use-app-thinning&gt;
   </pre></code>
   3. include any image, <code>foo.png</code> in *Resources/images/foo.png*
   4. Run this sample code
   Sample Code:
   <code><pre>
   var win = Ti.UI.createWindow({
   	backgroundColor: '#fff'
   });
   
   var imageView = Ti.UI.createImageView();
   win.add(imageView);
   
   //get image blob using getAsset
   var imageBlob = Ti.Filesystem.getAsset('images/foo.png');
   
   //create a file based on the blog
   var filename = Ti.Filesystem.applicationDataDirectory + 'blog_image.png';
   f = Ti.Filesystem.getFile(filename);
   f.write(imageBlob);
   Ti.API.info(f);
   
   //set image on imageView based on file
   imageView.setImage(f);
   
   win.open();
   </pre></code>
   
   <h4>Expected Result</h4>
   You will see the image shown in the imageView.
   
   <h4>Extra Tests</h4>
   you can include more images named *foo@2x.png*, *foo~iphone.png* and retest with *Ti.Filesystem.getAsset('images/foo@2x.png')* and *Ti.Filesystem.getAsset('images/foo~iphone.png')* respectively, you will still see the image.</li>
<li>Fokke Zandbergen 2016-01-07

   [~cng] I don't even think we could return a file since assets in asset catalogs (except for AppIcon and LaunchImage) are compressed into a single <code>Assets.car</code> file?
   
   I assume writing to a file in the example is for the purpose of demonstration since you could just assign the blob to the ImageView's <code>image</code> property as well?</li>
<li>Chee Kiat Ng 2016-01-07

   Yes that was my intention.</li>
<li>Angel Petkov 2016-01-11

   FT and CR approved. Thanks Kiat! Merging.</li>
<li>Josh Longton 2016-07-26

   Verified as fixed, I am now able to access images using Ti.Filesystem when app thinning is enabled. 
   Tested on:
   <code><pre>
   iPhone 6s (9.3.1) 
   iOS simulator (9.3)
    Mac OSX El Capitan 10.11.6
   Studio: 4.7.0.201607130543
    Ti SDK: 5.4.0.v20160725003348
    Xcode: 7.3.1 
    Appc NPM: 4.2.7
   Appc CLI: 5.4.0-35
   Node: v4.4.4
   </pre></code>
   
   *Closing ticket*</li>
</ol>


<p><a href="/TIMOB/TIMOB-19833.json">JSON Source</a></p>