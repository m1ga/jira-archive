---
title: "[TIMOB-19888] iOS 9: 3D touch peek/preview from native gallery causes app to crash"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2015-11-06T23:33:06.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>qe-5.1.0</td></tr>
<tr><th>Reporter</th><td>Harry Bryant</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2015-11-06T20:01:21.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-24T18:58:17.000+0000</td></tr>
</table>

<h3>Description</h3>

When the iOS native gallery is accessed from with an app, using 3D touch features peek/preview on an image will cause the app to crash with the following error: 
<code><pre>
[ERROR] :  The application has crashed with an uncaught exception 'NSInvalidArgumentException'.
[ERROR] :  Reason:
[ERROR] :  +[NSObject previewingContext:viewControllerForLocation:]: unrecognized selector sent to class 0x1a075a020
[ERROR] :  Stack trace:
[ERROR] :  
[ERROR] :  0   CoreFoundation                      0x0000000183f2cf48 &lt;redacted&gt; + 124
[ERROR] :  1   libobjc.A.dylib                     0x00000001993d7f80 objc_exception_throw + 56
[ERROR] :  2   CoreFoundation                      0x0000000183f33b54 &lt;redacted&gt; + 0
[ERROR] :  3   UIKit                               0x0000000189cf438c &lt;redacted&gt; + 172
[ERROR] :  4   UIKit                               0x0000000189847d7c &lt;redacted&gt; + 248
[ERROR] :  5   UIKit                               0x0000000189afcd4c &lt;redacted&gt; + 224
[ERROR] :  6   UIKit                               0x0000000189afd848 &lt;redacted&gt; + 136
[ERROR] :  7   UIKit                               0x0000000189afe8c0 &lt;redacted&gt; + 100
[ERROR] :  8   UIKit                               0x0000000189a3b330 &lt;redacted&gt; + 164
[ERROR] :  9   UIKit                               0x0000000189664b5c &lt;redacted&gt; + 172
[ERROR] :  10  UIKit                               0x00000001894f285c &lt;redacted&gt; + 784
[ERROR] :  11  UIKit                               0x0000000189a3c70c &lt;redacted&gt; + 72
[ERROR] :  12  UIKit                               0x00000001894b18b8 &lt;redacted&gt; + 372
[ERROR] :  13  UIKit                               0x00000001894ae63c &lt;redacted&gt; + 2404
[ERROR] :  14  UIKit                               0x00000001894f06cc &lt;redacted&gt; + 1132
[ERROR] :  15  UIKit                               0x00000001894efcc8 &lt;redacted&gt; + 764
[ERROR] :  16  UIKit                               0x00000001894c04a4 &lt;redacted&gt; + 248
[ERROR] :  17  UIKit                               0x00000001894be76c &lt;redacted&gt; + 5528
[ERROR] :  18  CoreFoundation                      0x0000000183ee4544 &lt;redacted&gt; + 24
[ERROR] :  19  CoreFoundation                      0x0000000183ee3fd8 &lt;redacted&gt; + 540
[ERROR] :  20  CoreFoundation                      0x0000000183ee1cd8 &lt;redacted&gt; + 724
[ERROR] :  21  CoreFoundation                      0x0000000183e10ca0 CFRunLoopRunSpecific + 384
[ERROR] :  22  GraphicsServices                    0x000000018f394088 GSEventRunModal + 180
[ERROR] :  23  UIKit                               0x0000000189528ffc UIApplicationMain + 204
[ERROR] :  24  i3DtouchBug                         0x0000000100085aa8 i3DtouchBug + 23208
[ERROR] :  25  libdyld.dylib                       0x0000000199c1a8b8 &lt;redacted&gt; + 4
[ERROR] :  *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[NSObject previewingContext:viewControllerForLocation:]: unrecognized selector sent to class 0x1a075a020'
[ERROR] :  *** First throw call stack:
[ERROR] :  (0x183f2cf48 0x1993d7f80 0x183f33b54 0x189cf438c 0x189847d7c 0x189afcd4c 0x189afd848 0x189afe8c0 0x189a3b330 0x189664b5c 0x1894f285c 0x189a3c70c 0x1894b18b8 0x1894ae63c 0x1894f06cc 0x1894efcc8 0x1894c04a4 0x1894be76c 0x183ee4544 0x183ee3fd8 0x183ee1cd8 0x183e10ca0 0x18f394088 0x189528ffc 0x100085aa8 0x199c1a8b8)
</pre></code>

<h4>Steps to Reproduce: </h4>
1. Create a classic app.
2. Include <code>Ti.Media.openPhotoGallery();</code> in app.js.
3. Build project to either 6S or 6S + device.
4.Navigate to an image and press with force to initiate 3D touch.

<h4>*Actual Result:* </h4>
App will crash immediately upon 3D touch.

<h4>*Expected Result:* </h4>
App should not crash, and open up image preview.




<h3>Comments</h3>

<ol>
<li>Hans Kn√∂chel 2015-11-06

   iOS issue: 
   * <a href="https://forums.developer.apple.com/thread/21932" rel="nofollow" target="_blank">https://forums.developer.apple.com/thread/21932</a>
   * <a href="http://stackoverflow.com/questions/33331758/uiimagepickercontroller-crashing-on-force-touch" rel="nofollow" target="_blank">http://stackoverflow.com/questions/33331758/uiimagepickercontroller-crashing-on-force-touch</a></li>
<li>Lee Morris 2017-03-24

   Closing ticket with reference to the previous comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-19888.json">JSON Source</a></p>