---
title: "[TIMOB-19911] iOS: Set Entitlements.plist keys from tiapp.xml like we do for Info.plist"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-12-22T14:13:51.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.0.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Components</th><td>iOS, Tooling</td></tr>
<tr><th>Labels</th><td>Capabilities, ios</td></tr>
<tr><th>Reporter</th><td> Ricardo Ramirez</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2015-11-11T02:51:46.000+0000</td></tr>
<tr><th>Updated</th><td>2017-01-24T22:35:28.000+0000</td></tr>
</table>

<h3>Description</h3>

Currently the only way to add e.g. associated domains for [Universal Links](<a href="https://developer.apple.com/library/prerelease/ios/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12-SW1)" rel="nofollow" target="_blank">https://developer.apple.com/library/prerelease/ios/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12-SW1)</a> or the HealthKit entitlement for the [HealthKit Module](<a href="http://labs.appcelerator.com/project/55c3c788e014044625e9b2a1/HealthKit-Module)" rel="nofollow" target="_blank">http://labs.appcelerator.com/project/55c3c788e014044625e9b2a1/HealthKit-Module)</a> is by using a custom <code>Entitlements.plist</code> file in the project root:

<code><pre>
&lt;key&gt;com.apple.developer.associated-domains&lt;/key&gt; 
     &lt;array&gt; 
          &lt;string&gt;applinks:mydomain.com&lt;/string&gt; 
     &lt;/array&gt; 
</pre></code>

The problem is that the <code>Entitlements.plist</code> if you do so Titanium [will no longer automatically add](<a href="https://github.com/appcelerator/titanium_mobile/blob/17dc8754653daaff170ea0c18f74218168a5633e/iphone/cli/commands/_build.js#L2219-L2258)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/17dc8754653daaff170ea0c18f74218168a5633e/iphone/cli/commands/_build.js#L2219-L2258)</a> any other require entitlements, like TIMOB-19311.

What we need is for this to work exactly [like we handle](<a href="https://github.com/appcelerator/titanium_mobile/blob/17dc8754653daaff170ea0c18f74218168a5633e/iphone/cli/commands/_build.js#L1939)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/17dc8754653daaff170ea0c18f74218168a5633e/iphone/cli/commands/_build.js#L1939)</a> <code>Info.plist</code>:

<h4>Load/Create our default <code>Entitlements.plist</code>.</h4>
<h4>Merge custom <code>Entitlements.plist</code> in the project root.</h4>
<h4>Merge keys set in <code>tiapp.xml</code> under <code>&lt;ios&gt;/&lt;entitlements&gt;</code></h4>
<h4>Do whatever we automatically generate, but only if the key does not already exist (alternatively, do this step after the first so it will be overwritten by the user's keys)</h4>

Ideally we would rename <code>&lt;ios&gt;/&lt;plist&gt;</code> to <code>&lt;ios&gt;/&lt;info&gt;</code> but that would break all apps ;)

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2015-11-12

   [~rramirez] I updated the ticket to address the actual need to be able to customise <code>Entitlements.plist</code> via <code>tiapp.xml</code>.
   
   /CC [~cbarber]</li>
<li>Hans Kn√∂chel 2016-09-02

   Good ticket. I would use the <code>&lt;entitlements/&gt;</code> tag instead of renaming the <code>plist</code> key afterwards. The behavior could be duplicated 1:1 from how we currently handle the Info.plist-merge.</li>
<li>Martin Williamson 2016-09-16

   Would really like to see this now cert entitlements are no longer merged in xcode 8</li>
<li>Chris Barber 2016-09-20

   [~rramirez] Nope. Tied up with TIMOB-23908, TIMOB-23518, and TIMOB-23786. All of which are critical. I'll get to this ticket when I get to it.</li>
<li>Chris Barber 2016-12-21

   Ti SDK master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8708" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8708</a>
   
   To test, add the following to your <code>tiapp.xml</code>:
   
   <code><pre>
   &lt;ios&gt;
       &lt;entitlements&gt;
           &lt;dict&gt;
               &lt;key&gt;com.apple.developer.associated-domains&lt;/key&gt; 
               &lt;array&gt; 
                   &lt;string&gt;applinks:mydomain.com&lt;/string&gt; 
               &lt;/array&gt;
           &lt;/dict&gt;
       &lt;/entitlements&gt;
   &lt;/ios&gt;
   </pre></code></li>
<li>Lee Morris 2017-01-24

   Can confirm that this works fine and the console logs show no errors whatsoever. Tested with;
   iPhone 7
   MacOS 10.11.6 (15G31)
   Studio 4.8.1.201612050850
   Ti SDK 6.1.0.v20170124071525
   Appc NPM 4.2.8
   Appc CLI 6.1.0
   Ti CLI 5.0.11
   Alloy 1.9.5
   Arrow 1.10.1
   Xcode 8.2 (8C38)
   Node v4.6.0
   Java 1.7.0_80</li>
</ol>


<p><a href="/TIMOB/TIMOB-19911.json">JSON Source</a></p>