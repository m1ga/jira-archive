---
title: "[TIMOB-19933] Android: Required uses-permission are not always added to AndroidManifest"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2015-11-12T08:18:55.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T19:55:26.000+0000</td></tr>
</table>

<h3>Description</h3>

We automatically add the required <code>&lt;uses-permission&gt;</code>  elements to <code>AndroidManifest.xml</code> when certain Titanium APIs are used. The new permission request methods need to be added to that list, but it seems it can be simplified/improved in other ways as well:

* Instead of testing for different <code>Calendar.\*</code> methods we should just test for the <code>calendar</code> (and <code>android.calendar</code> namespace. Why would you want to use anything in the namespace without the required permissions? If there *is* a good reason not to then <code>Calendar.hasCalendarPermissions</code> and <code>Calendar.requestCalendarPermissions</code> need to be added.
* Instead of testing for different <code>Contacts.\*</code> methods we should just test for the <code>contacts</code> namespace for both read and write permissions. Right now, if you don't use <code>Contacts.removePerson</code> or <code>Contacts.removePerson</code> using <code>Contacts.Group.removePerson</code> or any <code>set</code> method will probably fail. If there *is* a good reason no to then all these remove/set methods need to be added as well as the new <code>Contacts.hasContactsPermissions</code> and <code>requestContactsPermissions</code>.
* <code>Media.hasCameraPermissions</code> and <code>Media.requestCameraPermissions</code> must be added.

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2015-11-12

   [~cng] I closed (as invalid or included) the other permissions tickets since this one covers the edge cases that caused them.</li>
<li>Hieu Pham 2015-11-12

   I'm not sure why this ticket is necessary. Why do you need to check for permissions if you're not using it? If you're not using any API that actually require permissions to work, checking and requesting for them are dead code for most cases (unless you run a custom module, but if that's the case, you'd already have the permissions added manually, because our CLI won't take care of that)</li>
<li>Fokke Zandbergen 2015-11-12

   Because it makes it more predictable.
   
   And do note that the second point is no "dead code", but actual use case we're now missing.</li>
<li>Rainer Schleevoigt 2016-02-03

   Currently  I have a similar issue with audiorecording. In manifest I have placed the AUDIORECORDER-permission, but in app specific section I see a non activated MICROPHON permission. I can not record, after clicking in this permission section I can.
   
   How can I start an intent to permission Screen for a specific app? And why the permission is setting to false although I have a permission in manifest?</li>
</ol>


<p><a href="/TIMOB/TIMOB-19933.json">JSON Source</a></p>