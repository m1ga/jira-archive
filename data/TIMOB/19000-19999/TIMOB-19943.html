---
title: "[TIMOB-19943] Android: Support casting hyperloop proxies to different native types"
---
<table>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Done</td></tr>
<tr><th>Resolution Date</th><td>2016-08-04T03:20:01.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Components</th><td>Android, Hyperloop</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Christopher Williams</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2015-11-12T16:48:15.000+0000</td></tr>
<tr><th>Updated</th><td>2016-08-04T03:20:01.000+0000</td></tr>
</table>

<h3>Description</h3>

Previously we'd return/wrap any arguments and return types as the actual Java type we received, rather than the type declared by the method return/param type. this led to an issue where we'd receive types that weren't available in our hyperloop JS wrappers (either because they weren't in the type hierarchy we traversed - or more important, if they were "hidden"/native types). As an example, we'd get a DisplayListCanvas (a subclass of Canvas) in a subclass of View's onDraw method. That type isn't in the android.jar and we have no means of trying to get it's details without the android source code. the method declares the param type as simply Canvas.

As  a hedge against this, when we wrap arguments or return types, we hold the object and it's specific subclass on the Java side, but report as and wrap with the declared type. As a result, that means we now need some way to be able to explicitly cast down to subclasses if we know the value is a more specific subclass (say on View.getLayoutParams).

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2015-11-12

   <a href="https://github.com/appcelerator/hyperloop-android-module/pull/11" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop-android-module/pull/11</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-19943.json">JSON Source</a></p>