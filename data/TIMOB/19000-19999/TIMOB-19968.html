---
title: "[TIMOB-19968] Changing use-app-thinning does not force rebuild"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-12-09T05:51:41.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.2.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>appthinning</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2015-11-13T10:05:20.000+0000</td></tr>
<tr><th>Updated</th><td>2016-02-18T23:54:41.000+0000</td></tr>
</table>

<h3>Description</h3>

Switching the <code>use-app-thinning</code> setting in <code>tiapp.xml</code> does not force a rebuild. If you enable it, image assets catalogs *will* be added, but the images not removed. If you disable it, the images *will* be added, but the image asset catalogs not be removed.

Code:
<a href="https://github.com/appcelerator/titanium_mobile/blob/6e66f239d1ffeebd1448658b69e3a189b81b2828/iphone/cli/commands/_build.js#L2345-L2359" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/6e66f239d1ffeebd1448658b69e3a189b81b2828/iphone/cli/commands/_build.js#L2345-L2359</a>

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2015-11-13

   [~cbarber] Why not just force a rebuild if <code>tiapp.xml</code> has been changed, since in 90% of the cases this is required anyway. Saves us checking a lot of stuff.</li>
<li>Chris Barber 2015-11-13

   [~fokkezb] Good find, but I snuck the fix into <a href="https://github.com/appcelerator/titanium_mobile/pull/7412/files#diff-f430483233aa01af5b10df8390f9635dR2392" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7412/files#diff-f430483233aa01af5b10df8390f9635dR2392</a> which is still waiting to be merged. :)
   
   As far as always rebuilding whenever the <code>tiapp.xml</code> is changed, I think don't think that's a good idea. There are a number of things in the <code>tiapp.xml</code> that do not trigger a rebuild. What if they modify the Android section? Furthermore, things like description, publisher, and URL should be put in a plain text file (that could be encrypted) instead of the <code>main.m</code>, thus eliminating the need to run <code>xcodebuild</code>.</li>
<li>Fokke Zandbergen 2015-11-13

   Haha, sneaky!
   
   My thought about it is this... as a developer I need fast, incremental builds when I'm writing JavaScript/Alloy code. Expanding my app, fixing bugs etc. When I make changes to <code>tiapp.xml</code> - and probably <code>platform</code> as well - I'm in a different mode in which I prefer accuracy over speed. So if we can simplify the build process and by doing so make it more reliable (now, but also as we add stuff and maybe forget to update these checks) then I'd go for that.</li>
<li>Chris Barber 2015-11-13

   Still not convinced. Platform engineers will need to be more careful in the future.</li>
<li>Chris Barber 2015-11-24

   Please remember to resolve this ticket as soon as TIMOB-19694 is resolved.</li>
<li>Chee Kiat Ng 2015-12-09

   Resolving ticket. Follow the description to test.</li>
<li>Eric Wieber 2016-02-18

   Verified fixed, using:
   
   MacOS 10.11.3 (15D21)
   Studio 4.5.0.201602170821
   Ti SDK 5.2.0.v20160216202526
   Appc NPM 4.2.3-2
   Appc CLI 5.2.0-269
   Alloy 1.7.33
   Xcode 7.2 (7C68)
   
   Toggling the <code>&lt;use-app-thinning&gt;</code> setting in the tiapp.xml now forces a rebuild. Tested with a default app and performing multiple builds with the setting toggled after every other build.</li>
</ol>


<p><a href="/TIMOB/TIMOB-19968.json">JSON Source</a></p>