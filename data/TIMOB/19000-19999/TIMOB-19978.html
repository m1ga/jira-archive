---
title: "[TIMOB-19978] iOS: HTTPClient sets content-length while the body is empty or undefined with GET"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 5.0.2</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>Community, engTriage, headers, httpclient, ios</td></tr>
<tr><th>Reporter</th><td>Rene Pot</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2014-10-22T15:01:20.000+0000</td></tr>
<tr><th>Updated</th><td>2019-11-18T22:58:59.000+0000</td></tr>
</table>

<h3>Description</h3>

On iOS, when initiating a call with an empty body on the send object, the content length is being set to 0.

On Android this problem does not seem to occur
However, as the body is actually empty, it should not set a content length at all. 

Test case:

<code><pre>
       config = {
           onload: _.partial(_response, true),
           onerror: _.partial(_response, false),
           ondatastream: progressHandler,
           onsendstream: progressHandler,
           onreadystatechange: stateChangeHandler,
           timeout: options.timeout || 10000
       };
     var httpClient =  Ti.Network.createHTTPClient(config);
     httpClient.open('GET', path);
     httpClient.setRequestHeader("Content-Type", "application/json");
     var body = undefined; //or var body = '';
     httpClient.send(body); 
</pre></code>

When this is send, the request header is going to be "content-length: 0", which should not be the case, the header should be omitted.

<h3>Comments</h3>

<ol>
<li>Shuo Liang 2014-10-24

   Hi,
   
   1. The body you mentioned can be only used in "POST" method for passing data. Here is the doc. [<a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.Network.HTTPClient-method-send]
   
   2. When you use a "GET" Method in your request, the body data should be empty, as all the data information contains in url.
   So content-length is necessary for http request header even the body is empty.
   
   Hope this will help you.
   
   Regards,
   Shuo</li>
<li>Rene Pot 2014-10-24

   Hi thanks. Yes I know. But I've already emtied the variable for that reason. I use the same lib for all my calls, and on Android it also works fine. 
   It should just not set content length to 0. It should be a missing header. Therefore this is actually a bug. </li>
</ol>


<p><a href="/TIMOB/TIMOB-19978.json">JSON Source</a></p>