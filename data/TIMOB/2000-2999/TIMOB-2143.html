---
title: "[TIMOB-2143] iOS Crash: infinite loop on createButton top with non-integer value"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:58:13.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>crash, createbutton, defect, infinite, ios, loop, math.floor</td></tr>
<tr><th>Reporter</th><td>Thomas Huelbert</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-04-15T03:11:45.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:58:13.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>(bug from David Richey, logged by Thomas Huelbert pending
creating of account for David.)</p>
<p>Environment<br>
OS 10.6.4, XCode 4.0, iPhone emulator 4.0 SDK, Titanium Desktop
1.2.1, Titanium Mobile 1.4</p>
<p>Steps to reproduce</p>
<p>The following code works:</p>
<p>var pass = Titanium.UI.createButton({<br></p>
<pre>
<code>    backgroundImage: 'add3_button_pass.png',
    title: 'New',
    font: {fontWeight:'bold'},
    color: '#white',
    top:    Math.floor(goalBanner.height * 0.15),
    height: Math.floor(goalBanner.height * 0.68),
    left:   Math.floor(platformWidth * 0.86),
    width:  Math.floor(platformWidth * 0.13),
    zIndex: 10</code>
</pre>
<p>});</p>
<p>You can make it fail by removing the Math.floor(...) from the
top: property, thus:</p>
<p>var pass = Titanium.UI.createButton({<br></p>
<pre>
<code>    backgroundImage: 'add3_button_pass.png',
    title: 'New',
    font: {fontWeight:'bold'},
    color: '#white',
    top:    (goalBanner.height * 0.15),
    height: Math.floor(goalBanner.height * 0.68),
    left:   Math.floor(platformWidth * 0.86),
    width:  Math.floor(platformWidth * 0.13),
    zIndex: 10</code>
</pre>
<p>});</p>
<p>Failure mode:<br>
On Launch from Titanium Developer, app loads and then immediately
crashes. ("Application exited from Simulator")</p>
<p>Crash log:</p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-2143_18113/testb_2010-10-21-104137_mpb15.crash">testb_2010-10-21-104137_mpb15.crash</td></td><td>2011-04-15T03:11:45.000+0000</td><td>81085</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Thomas Huelbert 2011-04-15

   <div><p>This bug is blocking the release of the Math Puzzle sample
   app.</p></div></li>
<li>Blain Hamon 2011-04-15

   <div><p>Way back in <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/3b55284ca46dd07e37dd378cabc21150afcb843a#diff-3" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/3b55284ca46dd07e37dd378cabc21150afcb843a#diff-3</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/3b55284ca46dd..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/3b55284ca46dd...</a></a>
   , we made set the frame to be integral. This is what's causing the
   infinite loop. Is this still valid or should we remove the
   descendant of this code?</p>
   <p>More importantly, the reason we did this was to make everything
   line up. But there may be times when this is not desired, or that
   lining things up causes ugly gaps.</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/08dbb2ffc8b541d0d2e15f30aa20ec0018791f0a"
   title=
   "Changeset [08dbb2ffc8b541d0d2e15f30aa20ec0018791f0a]">[08dbb2ffc8b541d0d2e15f30aa20ec0018791f0a]</a>)
   [<a href="/projects/32238/tickets/1984" title=
   "Ticket #1984">#1984</a> state:fixed-in-qa] [<a href=
   "/projects/32238/tickets/2143" title="Ticket #2143">#2143</a>
   state:fixed-in-qa] [<a href="/projects/32238/tickets/1838" title=
   "Ticket #1838">#1838</a> state:fixed-in-qa] We no longer try to
   enforce buttons onto integer boundaries <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/08dbb2ffc8b541d0d2e15f30aa20ec0018791f0a" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/08dbb2ffc8b541d0d2e15f30aa20ec0018791f0a</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/08dbb2ffc8b54..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/08dbb2ffc8b54...</a></a></p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>iPod 3GT 4.2.1, 1.5.0.a899d42</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2143.json">JSON Source</a></p>