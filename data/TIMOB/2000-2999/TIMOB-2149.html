---
title: "[TIMOB-2149] Android, parse problem with URLs that contain @ in username "
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2011-04-15T03:11:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>defect, ios, iphone, xhr</td></tr>
<tr><th>Reporter</th><td>Bryan Jackson</td></tr>
<tr><th>Assignee</th><td>Ralf Pfeiffer</td></tr>
<tr><th>Created</th><td>2011-04-15T03:11:56.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-09T23:04:10.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>When sending a request to XHR to the following URL:</p>
<p><a href=
"<a href="http://mike@demandocat.com:testing@api.lafitness.com/Services/Private.svc/GetCustomer" rel="nofollow" target="_blank">http://mike@demandocat.com:testing@api.lafitness.com/Services/Private.svc/GetCustomer</a>">
<a href="http://mike@demandocat.com:testing@api.lafitness.com/Services/Priva..." rel="nofollow" target="_blank">http://mike@demandocat.com:testing@api.lafitness.com/Services/Priva...</a></a></p>
<p>The request is directed to demandocat.com instead of
api.lafitness.com.</p>
<p>Some sort of issue exists parsing URLs that contain
username/passwords when they contain the @ char.</p></div>

<h3>Comments</h3>

<ol>
<li>Bryan Jackson 2011-04-15

   <div><p>Note the title should say iPhone not Android</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>Fixed title to reflect iPhone, not Android.</p></div></li>
<li>Ralf Pfeiffer 2011-04-15

   <div><p>to scrub</p></div></li>
<li>Blain Hamon 2011-04-15

   <div><p><a href=
   "<a href="http://www.ietf.org/rfc/rfc3986.txt" rel="nofollow" target="_blank">http://www.ietf.org/rfc/rfc3986.txt</a>"><a href="http://www.ietf.org/rfc/rfc3986.txt" rel="nofollow" target="_blank">http://www.ietf.org/rfc/rfc3986.txt</a></a></p>
   <p>The authority (Username and host info) is defined as [ userinfo
   "@" ] host [ ":" port ]</p>
   <p>userinfo is defined as *( unreserved / pct-encoded / sub-delims
   / ":" )</p>
   <p>unreserved is defined as ALPHA / DIGIT / "-" / "." / "_" /
   "~"</p>
   <p>pct-encoded is defined as "%" HEXDIG HEXDIG</p>
   <p>sub-delims is defined as "!" / "$" / "&amp;" / "'" / "(" / ")" /
   "*" / "+" / "," / ";" / "="</p>
   <p>In none of userinfo is "@" allowed as a valid character.</p>
   <p>Per rfc 3986, the URI is requesting host of demandocat.com, port
   'testing', which is an invalid number. Thus, this URI is
   invalid.</p>
   <p>To specify a userinfo that would contain the "@" character, it
   MUST be pct-encoded as "%40"</p></div></li>
<li>David Pratt 2011-04-15

   <div><p>Invalidated without any evaluation to ensure authentication is
   possible using this means or test case for basic auth? The ability
   for a client to pass credentials by this means is very basic
   functionality. It does not work with this client with iOS.</p>
   <p>Before closing or invalidating the ticket, it would be
   preferable to demonstrate that the functionality performs as
   expected or repair/assign if it does not. This issue has been
   satisfactorily repaired for Android with a test confirmation one
   can now properly authenticate. I feel this has been evaded. This is
   necessary functionality for web services work and we have a
   crippled client if it cannot perform basic authentication using
   this method.</p></div></li>
<li>David Pratt 2011-04-15

   <div><p>Blain. I can put together something that demonstrates the
   inability to authenticate by passing credentials in url where doing
   same in curl succeeds. Passing credentials in this way is a common
   thing to want to do and this requires a fix.</p></div></li>
<li>Ralf Pfeiffer 2011-04-15

   <div><p>Hello fairwinds,</p>
   <p>Our current situation:</p>
   <p>With URLs, we have already gone down the slippery slope in
   Titanium. I would have preferred that we were strict in the main
   API, and yet also provide helper functions to encode/decode,
   escape, where the algorithms are well-documented and
   understood.</p>
   <p>In the coming months we will systematically scrub our API and
   seek to achieve a good balance between achieving better standards
   compliance as well providing functionality for ease of use by the
   end developer.</p>
   <p>On this specific issue:</p>
   <p>Blain's comment is accurate, that "@" is not allowed in the
   userinfo, and that if non-allowed characters exist, they should be
   escaped. In this case if "@" is the userinfo should be "%40".</p>
   <p>What we will do:</p>
   <p>We'll take the action to discuss this issue internally, as
   Android and iOS differ in their approach right now.</p>
   <p>Thanks for your input, and expect an update on this within a
   week.</p>
   <p>Sincerely,<br>
   ~Ralf Dir of Platform Engineering</p></div></li>
<li>David Pratt 2011-04-15

   <div><p>Hi Ralph. Not sure the issue for me was properly characterized
   by the ticket. The core issue for me is not simply the @ in the
   name but authenticating via:</p>
   <p><a href=
   "<a href="http://user:pw@example.com" rel="nofollow" target="_blank">http://user:pw@example.com</a>"><a href="http://user:pw@example.com" rel="nofollow" target="_blank">http://user:pw@example.com</a></a> or<br>
   <a href=
   "<a href="http://user:pw@example.com" rel="nofollow" target="_blank">http://user:pw@example.com</a>"><a href="http://user:pw@example.com" rel="nofollow" target="_blank">http://user:pw@example.com</a></a></p>
   <p>neither of which will authenticate using the client. Am quite
   happy to encode the user:pw string including any @ character that
   might exist there.</p></div></li>
<li>David Pratt 2011-04-15

   <div><p>Ralph. One of those examples should be https above, sorry for
   typo.</p></div></li>
<li>Lee Morris 2017-03-09

    Closing ticket as invalid.</li>
</ol>


<p><a href="/TIMOB/TIMOB-2149.json">JSON Source</a></p>