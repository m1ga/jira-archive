---
title: "[TIMOB-2160] Android: Image scaling tests run time errors"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:58:16.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0 M02</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, android_refactor, defect, image, regression, scaling</td></tr>
<tr><th>Reporter</th><td>Thomas Huelbert</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:12:21.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:58:16.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>1.BaseUI&gt;Views&gt;Image Scaling<br>
results: errrors followed by image loading.</p>
<p>E/KrollCallback(14575): (kroll$17) [86,1006870] ECMA Error
evaluating source, invocation: [callMethod Titanium.(anonymous)
org.appcelerator.titanium.kroll.KrollCallback@44fe6f48], message:
TypeError: Cannot read property "width" from null
(app://examples/image_view_scaling.js#33)<br>
E/KrollCallback(14575): org.mozilla.javascript.EcmaError:
TypeError: Cannot read property "width" from null
(app://examples/image_view_scaling.js#33)<br>
E/KrollCallback(14575): at
org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3761)<br>
E/KrollCallback(14575): at
org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3739)<br>
E/KrollCallback(14575): at
org.mozilla.javascript.ScriptRuntime.typeError(ScriptRuntime.java:3767)<br>
E/KrollCallback(14575): at
org.mozilla.javascript.ScriptRuntime.typeError2(ScriptRuntime.java:3786)<br>
E/KrollCallback(14575): at
org.mozilla.javascript.ScriptRuntime.undefReadError(ScriptRuntime.java:3799)<br>
E/KrollCallback(14575): at
org.mozilla.javascript.ScriptRuntime.getObjectProp(ScriptRuntime.java:1487)<br>
E/KrollCallback(14575): at
org.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:1408)<br>
E/KrollCallback(14575): at
script(app://examples/image_view_scaling.js:33)<br>
E/KrollCallback(14575): at
org.mozilla.javascript.Interpreter.interpret(Interpreter.java:854)<br>
E/KrollCallback(14575): at
org.mozilla.javascript.InterpretedFunction.call(InterpretedFunction.java:164)<br>
E/KrollCallback(14575): at
org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:426)<br>
E/KrollCallback(14575): at
org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3161)<br>
E/KrollCallback(14575): at
org.mozilla.javascript.InterpretedFunction.call(InterpretedFunction.java:162)<br>
E/KrollCallback(14575): at
org.appcelerator.titanium.kroll.KrollCallback$1.run(KrollCallback.java:97)<br>
E/KrollCallback(14575): at
android.os.Handler.handleCallback(Handler.java:587)<br>
E/KrollCallback(14575): at
android.os.Handler.dispatchMessage(Handler.java:92)<br>
E/KrollCallback(14575): at
android.os.Looper.loop(Looper.java:123)<br>
E/KrollCallback(14575): at
org.appcelerator.titanium.kroll.KrollHandlerThread.run(KrollHandlerThread.java:73)</p></div>

<h3>Comments</h3>

<ol>
<li>Thomas Huelbert 2011-04-15

   <div><p>1.5.0.70ce98 g2 running 2.2, G1 running 1.6, sim 2.2.</p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>persists in todays pull - 1.5.0.91838a, don't think its user
   error? droid 1 (2.2)</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>Weird, the error doesn't happen on an emulator for me, nor on my
   HTC Desire 2.2 device. But then on a whim I turned off the network
   on my device and indeed the error occurs.</p>
   <p>This is a remote image that's being scaled. The KS test is
   checking <code>imageView.toBlob().width</code> without checking if
   <code>toBlob()</code> returns null, so in that case the runtime
   error isn't surprising. I'm going to change the test slightly to
   account for this gracefully and put up the message that image
   wasn't retrieved.</p>
   <p>Meanwhile, Thomas, are you getting the error also when you're
   network connection is active? Put another way: are you able to run
   the remote image test successfully but then <em>not</em> the image
   scaling test in the same session? (That would be odd.)</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/c0aff27b322129e48f2092c569efff33a9b0a4a3"
   title=
   "Changeset [c0aff27b322129e48f2092c569efff33a9b0a4a3]">[c0aff27b322129e48f2092c569efff33a9b0a4a3]</a>)
   [<a href="/projects/32238/tickets/2160" title=
   "Ticket #2160">#2160</a>] Check for blob being null before trying
   to read its dimensions. <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/c0aff27b322129e48f2092c569efff33a9b0a4a3" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/c0aff27b322129e48f2092c569efff33a9b0a4a3</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/c0aff27b3221..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/c0aff27b3221...</a></a></p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>Titanium SDK version: 1.5.0 (12/04/10 08:46 b7b9e78) G2 (2.2)
   sim 2.1</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2160.json">JSON Source</a></p>