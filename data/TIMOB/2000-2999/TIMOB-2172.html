---
title: "[TIMOB-2172] Window show/hide methods not working in latest git"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:58:18.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>defect, ios, iphone, rplist, window</td></tr>
<tr><th>Reporter</th><td>ctredway</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-04-15T03:12:37.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:58:18.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>On the iphone, using the hide/show methods will hide a window
but will not show it again. However, manually setting the visible
property does work.</p>
<p>Below code shows this:<br>
var app = {<br></p>
<pre>
<code>setupActivity: function(message) {
    this.activityTrans = Ti.UI.createWindow(
        {backgroundColor: "#fff", opacity: 0.65, zIndex: 1});
    this.activityWin = Ti.UI.createWindow(
        {opacity: 0.9,
         backgroundImage: 'images/gradround.png',
         top: "40%", height: 80, left: "20%", right: "20%", zIndex: 2,
         color:"#fff"
        });
    this.activity = Ti.UI.createActivityIndicator(
        {top: 30, height: 25, color:"#fff",
         style:Titanium.UI.iPhone.ActivityIndicatorStyle.PLAIN});
    this.activity.show();
    this.activityWin.add(this.activity);
    this.activityLabel = Ti.UI.createLabel(
        {left: 5, right: 5, top: 35, height: 35,
         text: "", color: "#fff", textAlign: "center",
         font:{fontSize:16}
        });
    this.activityWin.add(this.activityLabel);

    this.activityTrans.open();
    this.activityWin.open();
    this.activity.message = message;
    Titanium.App.idleTimerDisabled = true;
},

activityOn: function (message) {
    if (!message) {
        message = "Loading...";
    }
    if (!this.activityWin) {
        this.setupActivity(message);
    } else {
        this.activityWin.height = 80;
        this.activityWin.left = "20%";
        this.activityWin.right = "20%";
        this.activityLabel.text = "";
        this.activity.message = message;
        this.activity.top = 30;
        this.activity.show();
        this.activityWin.show();
        this.activityTrans.show();
        Titanium.App.idleTimerDisabled = true;
    }
    this.activityLabelShown = false;
    this.activityProgressShown = false;
},

activityOff: function (keepTrans) {
    if (this.activity) {
        Titanium.App.idleTimerDisabled = false;
        this.activity.hide(); // android
        this.activityWin.hide();
        if (!keepTrans) {
            this.activityTrans.hide();
        }
        if (this.progressBar) {
            this.progressBar.hide();
        }
    }
}</code>
</pre>
<p>};</p>
<p>app.activityOn("message 1");<br>
setTimeout(function () {<br></p>
<pre>
<code>           app.activityOff();
           setTimeout(function () {
                          app.activityOn("message 2");
                      }, 2000);
       }, 2000);</code>
</pre></div>

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2011-04-15

   <div><p>Mislabeled the bug as <a href="/projects/32238/tickets/2272"
   title="Ticket #2272">#2272</a> instead of <a href=
   "/projects/32238/tickets/2172" title="Ticket #2172">#2172</a> in
   the commit. Commit is 7604111. Marking fixed-in-qa.</p></div></li>
<li>Damien Elmes 2011-04-15

   <div><p>Hmm, this has resolved the problem with the code above, but my
   webviews as reported in <a href=
   "<a href="http://developer.appcelerator.com/helpdesk/view/50571" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/50571</a>"><a href="http://developer.appcelerator.com/helpdesk/view/50571" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/50571</a></a>
   are not rendering correctly. I'll try build you a test case tonight
   or tomorrow.</p></div></li>
<li>Damien Elmes 2011-04-15

   <div><p>The following code works in 1.4.x but not the current git.</p>
   <p>~~~ var debug = Ti.API.debug;</p>
   <p>var app = {</p>
   <pre>
   <code>setup: function () {
       this.win = Ti.UI.createWindow({});
       this.web = Ti.UI.createWebView({html:"&lt;html&gt;&lt;body&gt;hello&lt;/body&gt;&lt;/html&gt;"});
       this.web2 = Ti.UI.createWebView({html:"&lt;html&gt;&lt;body&gt;world&lt;/body&gt;&lt;/html&gt;"});
       this.win.add(this.web);
       this.win.add(this.web2);
       this.win.open();
   },
   
   toggle: function () {
       if (this.web2.visible) {
           debug("visible");
           this.web2.hide();
       } else {
           debug("invisible");
           this.web2.show();
       }
   }</code>
   </pre>
   <p>};</p>
   <p>app.setup();<br>
   setInterval(function () {<br></p>
   <pre>
   <code>           app.toggle();
          }, 2000);</code>
   </pre>
   <p>~~~</p></div></li>
<li>Damien Elmes 2011-04-15

   <div><p>Sorry, again without the crappy formatting:</p>
   <pre>
   <code>var debug = Ti.API.debug;
   
   var app = {
   
   setup: function () {
       this.win = Ti.UI.createWindow({});
       this.web = Ti.UI.createWebView({html:"&lt;html&gt;&lt;body&gt;hello&lt;/body&gt;&lt;/html&gt;"});
       this.web2 = Ti.UI.createWebView({html:"&lt;html&gt;&lt;body&gt;world&lt;/body&gt;&lt;/html&gt;"});
       this.win.add(this.web);
       this.win.add(this.web2);
       this.win.open();
   },
   
   toggle: function () {
       if (this.web2.visible) {
           debug("visible");
           this.web2.hide();
       } else {
           debug("invisible");
           this.web2.show();
       }
   }
   
   };
   
   app.setup();
   setInterval(function () {
   
              app.toggle();
          }, 2000);</code>
   </pre></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Reopening.</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/d62a7e28e9188a95c9fa4993fbfdf33152529b01"
   title=
   "Changeset [d62a7e28e9188a95c9fa4993fbfdf33152529b01]">[d62a7e28e9188a95c9fa4993fbfdf33152529b01]</a>)
   [<a href="/projects/32238/tickets/2172" title=
   "Ticket #2172">#2172</a> state:fixed-in-qa] zindex now forcefully
   reset (to add view to hierarchy) before reposition when setting
   'visible', if necessary. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/d62a7e28e9188a95c9fa4993fbfdf33152529b01" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/d62a7e28e9188a95c9fa4993fbfdf33152529b01</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/d62a7e28e9188..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/d62a7e28e9188...</a></a></p></div></li>
<li>Damien Elmes 2011-04-15

   <div><p>Thanks, this looks fixed now</p></div></li>
<li>Damien Elmes 2011-04-15

   <div><p>Sorry, spoke too soon. Various other regressions now. The
   following code works on 1.4.x, not on 1.5. Comments at the bottom
   of file</p>
   <pre>
   <code>var debug = Ti.API.debug;
   
   var app = {
       setupActivity: function(message) {
           this.activityTrans = Ti.UI.createWindow(
               {backgroundColor: "#fff", opacity: 0.65, zIndex: 1});
           this.activityWin = Ti.UI.createWindow(
               {opacity: 0.9,
                backgroundImage: 'images/gradround.png',
                top: "40%", height: 80, left: "20%", right: "20%", zIndex: 2,
                color:"#fff"
               });
           this.activity = Ti.UI.createActivityIndicator(
               {top: 30, height: 25, color:"#fff",
                style:Titanium.UI.iPhone.ActivityIndicatorStyle.PLAIN});
           this.activity.show();
           this.activityWin.add(this.activity);
           this.activityLabel = Ti.UI.createLabel(
               {left: 5, right: 5, top: 35, height: 35,
                text: "", color: "#fff", textAlign: "center",
                font:{fontSize:16}
               });
           this.activityWin.add(this.activityLabel);
   
           this.activityTrans.open();
           this.activityWin.open();
           this.activity.message = message;
           Titanium.App.idleTimerDisabled = true;
       },
   
       activityOn: function (message) {
           if (!message) {
               message = "Loading...";
           }
           if (!this.activityWin) {
               this.setupActivity(message);
           } else {
               this.activityWin.height = 80;
               this.activityWin.left = "20%";
               this.activityWin.right = "20%";
               this.activityLabel.text = "";
               this.activity.message = message;
               this.activity.top = 30;
               this.activity.show();
               this.activityWin.show();
               this.activityTrans.show();
               Titanium.App.idleTimerDisabled = true;
           }
           this.activityLabelShown = false;
           this.activityProgressShown = false;
       },
   
       activityOff: function (keepTrans) {
           if (this.activity) {
               Titanium.App.idleTimerDisabled = false;
               this.activity.hide(); // android
               this.activityWin.hide();
               if (!keepTrans) {
                   this.activityTrans.hide();
               }
               if (this.progressBar) {
                   this.progressBar.hide();
               }
           }
       },
   
       activityProgress: function (value) {
           this.activity.top = 15;
           if (!this.progressBar) {
               this.progressBar = Ti.UI.createProgressBar(
                   {width:150, min:0, max:1, value:0,
                height:15, color:'#88F',
                style:Titanium.UI.iPhone.ProgressBarStyle.PLAIN,
                bottom:15});
               this.progressBar.show();
               this.activityWin.add(this.progressBar);
               this.activityProgressShown = true;
           } else {
               this.progressBar.show();
               if (!this.activityProgressShown) {
                   this.activityProgressShown = true;
               }
           }
           this.progressBar.value = value;
       }
   
   };
   
   function t1 () {
       // notice the text &amp; spinner don't appear
       debug("t1");
       app.activityOn("message 1");
       setTimeout(t2, 2000);
   }
   
   function t2 () {
       // neither does the progress bar
       debug("t2");
       app.activityProgress(0.5);
       setTimeout(t3, 2000);
   }
   
   function t3 () {
       debug("t3");
       app.activityOff();
       // spinner appears but message still missing
       app.activityOn("message 2");
   }
   
   t1();</code>
   </pre></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Reopening again.</p></div></li>
<li>Jeff Haynie 2011-04-15

    <div><p>(from <a href=
    "/projects/32238/changesets/8a65922b971cb93c6f6b024362d5016a65c5bee3"
    title=
    "Changeset [8a65922b971cb93c6f6b024362d5016a65c5bee3]">[8a65922b971cb93c6f6b024362d5016a65c5bee3]</a>)
    [<a href="/projects/32238/tickets/2172" title=
    "Ticket #2172">#2172</a> state:fixed-in-qa] show/hide works for
    activityIndicator and progressBar again. <a href=
    "<a href="http://github.com/appcelerator/titanium_mobile/commit/8a65922b971cb93c6f6b024362d5016a65c5bee3" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/8a65922b971cb93c6f6b024362d5016a65c5bee3</a>">
    <a href="http://github.com/appcelerator/titanium_mobile/commit/8a65922b971cb..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/8a65922b971cb...</a></a></p></div></li>
<li>Damien Elmes 2011-04-15

    <div><p>Thanks, looks good after a quick test.</p></div></li>
<li>Thomas Huelbert 2011-04-15

    <div><p>1.5.0.3ee6a97, 4th gen ipod touch, 3g iphone</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2172.json">JSON Source</a></p>