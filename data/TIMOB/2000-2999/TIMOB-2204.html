---
title: "[TIMOB-2204] 1.5.0 regression: Errors accessing custom attributes off of tableViewRow objects (includes testcase)"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:58:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0 M02</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, android_refactor, date, defect, javascript, refactor, regression</td></tr>
<tr><th>Reporter</th><td>Robby</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:13:26.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:58:24.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Seems to have happened recently. Here's a small test case. This
same code works under 1.4.1 fine and iPhone fine:</p>
<pre>
<code>var testDate = new Date();
var dateObj = {bla:"foo", testDateObj:testDate};
var noDateObj = {bla:"foo"};

var row = Ti.UI.createTableViewRow({
    _dateObj: dateObj,
    _noDateObj: noDateObj,
    _testDate: testDate
});

Ti.API.info("works: " + row._noDateObj.bla);
Ti.API.info("fails: " + row._dateObj.bla); //Constructor for "Date" not found
Ti.API.info("fails: " + row._dateObj.testDateObj);
Ti.API.info("fails: " + row._testDate);

//Also, may be of interest:
//Ti.API.info("1: " + row._noDateObj); //"cannot find default value for object" ...is that what should happen?
//Ti.API.info("2: " + row._dateObj); //"cannot find default value for object" as well</code>
</pre></div>

<h3>Comments</h3>

<ol>
<li>Robby 2011-04-15

   <div><p>One thing to note: Simple types like string and int work fine.
   More complex objects like Date seem to be the problem here.</p></div></li>
<li>Robby 2011-04-15

   <div><p>It appears this bug may even affect things like accessing
   "label.font.fontSize" as well...</p>
   <pre>
   <code>org.appcelerator.titanium.kroll.KrollCallback@45404e50], message: TypeError: Cannot read property "fontSize" from undefined (file:///android_asset/Resources/shared.js#733)
   [TRACE] E/KrollCallback( 1009): org.mozilla.javascript.EcmaError: TypeError: Cannot read property "fontSize" from undefined (file:///android_asset/Resources/shared.js#733)</code>
   </pre>
   <p>Ouch!</p></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/c640e0f9613717e649b361cc9a0a2b5690565c9b"
   title=
   "Changeset [c640e0f9613717e649b361cc9a0a2b5690565c9b]">[c640e0f9613717e649b361cc9a0a2b5690565c9b]</a>)
   reference the Date constructor from the top level KrollBridge
   scope, and keep Date references around when converting to avoid new
   object creation when we unwrap. added test case to kroll test suite
   [<a href="/projects/32238/tickets/2204" title=
   "Ticket #2204">#2204</a> state:fixed-in-qa] <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/c640e0f9613717e649b361cc9a0a2b5690565c9b" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/c640e0f9613717e649b361cc9a0a2b5690565c9b</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/c640e0f96137..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/c640e0f96137...</a></a></p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>confirmed on emulator (2.1) and G2 (2.2) using provided code
   sample Titanium SDK version: 1.5.0 (12/03/10 09:29 33c2058)</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2204.json">JSON Source</a></p>