---
title: "[TIMOB-2207] Contexts do not release unused objects"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:58:25.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>context, critical, ios, memory</td></tr>
<tr><th>Reporter</th><td>Stephen Tramer</td></tr>
<tr><th>Assignee</th><td>Stephen Tramer</td></tr>
<tr><th>Created</th><td>2011-04-15T03:13:31.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:58:25.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Title says it all. Helpdesk ticket <a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/46321" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/46321</a>"><a href="http://developer.appcelerator.com/helpdesk/view/46321" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/46321</a></a>
provides an example of how this issue affects developers. Note that
from within TiUIScrollableView, our memory management is correct
and relies on the 'views' array to be deallocated when it is no
longer in use (there are no more references to it, and therefore
the context no longer needs access to it).</p>
<p>This bug should be considered <strong>CRITICAL</strong> and a
high priority as a result.</p></div>

<h3>Comments</h3>

<ol>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/a6b1b3c4fc4224e39b7d05e807987c4c8fe6ce30"
   title=
   "Changeset [a6b1b3c4fc4224e39b7d05e807987c4c8fe6ce30]">[a6b1b3c4fc4224e39b7d05e807987c4c8fe6ce30]</a>)
   [<a href="/projects/32238/tickets/2207" title=
   "Ticket #2207">#2207</a> state:fixed-in-qa] Objects marked for
   'autorelease' in context execution are no longer retained for
   duration of context. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/a6b1b3c4fc4224e39b7d05e807987c4c8fe6ce30" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/a6b1b3c4fc4224e39b7d05e807987c4c8fe6ce30</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/a6b1b3c4fc422..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/a6b1b3c4fc422...</a></a></p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Headsup for Thom on this one:</p>
   <p>I solved the most obvious bugs for this one, being caused by
   context delegates being released too early and ASIHTTPRequest not
   being very threadsafe. However since it's a BIG change in our
   memory management, any bugs which appear in the next regression
   scrub which are crashers may be a result of <a href=
   "/projects/32238/tickets/2207" title="Ticket #2207">#2207</a>.</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/6713f679deac5027cdf5bc4fb28dd4e5eb84663b"
   title=
   "Changeset [6713f679deac5027cdf5bc4fb28dd4e5eb84663b]">[6713f679deac5027cdf5bc4fb28dd4e5eb84663b]</a>)
   [<a href="/projects/32238/tickets/2187" title=
   "Ticket #2187">#2187</a> state:fixed-in-qa][<a href=
   "/projects/32238/tickets/2207" title="Ticket #2207">#2207</a>]
   Video player cleanup done without firing second 'stop' message.
   First fix of unintended autorelease 2207 consequence (window
   'close' listeners). <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/6713f679deac5027cdf5bc4fb28dd4e5eb84663b" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/6713f679deac5027cdf5bc4fb28dd4e5eb84663b</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/6713f679deac5..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/6713f679deac5...</a></a></p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/ce58295321e86a1a18045692b7d52dcc8e5691b5"
   title=
   "Changeset [ce58295321e86a1a18045692b7d52dcc8e5691b5]">[ce58295321e86a1a18045692b7d52dcc8e5691b5]</a>)
   [<a href="/projects/32238/tickets/2241" title=
   "Ticket #2241">#2241</a> state:fixed-in-qa][<a href=
   "/projects/32238/tickets/2207" title="Ticket #2207">#2207</a>]
   Slight reorganization of memory releasing. <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/ce58295321e86a1a18045692b7d52dcc8e5691b5" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/ce58295321e86a1a18045692b7d52dcc8e5691b5</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/ce58295321e86..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/ce58295321e86...</a></a></p></div></li>
<li>Blain Hamon 2011-04-15

   <div><p>Had to view from afar (Instruments on device), but looks like
   things are being released (tested with table views)</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2207.json">JSON Source</a></p>