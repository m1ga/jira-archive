---
title: "[TIMOB-2209] Android: Re-enable incremental build"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-10-19T01:08:16.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 21, 2013 Sprint 21 Core, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android, Tooling</td></tr>
<tr><th>Labels</th><td>android, androidbuild, ay-verified, cb-verified, defect, tooling</td></tr>
<tr><th>Reporter</th><td>Marshall Culpepper</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2011-04-15T03:13:36.000+0000</td></tr>
<tr><th>Updated</th><td>2013-11-11T19:24:07.000+0000</td></tr>
</table>

<h3>Description</h3>

Before all of our new changes for stylesheet and RA.java code generation we knew when new Java code was generated so we could skip the javac and dex parts of the APK building process. We need to go back through and make sure to only dex/javac when necessary.

<h3>Comments</h3>

<ol>
<li>Matthew Lieder 2011-04-15

   <div><p>IMHO this should be a blocker for the 1.5.0 release, since I
   imagine this problem is going to give a very poor experience for
   Android developers. I have a 2009-era Mac Mini and even if I just
   make a one-line change in a javascript file I have to wait 5-10min
   for Titanium to rebuild and show me my change in the emulator :(.
   It's a big enough problem for me that I'm having to stop Android
   development and shift my time over to hacking up a fix for
   this.</p></div></li>
<li>Robby 2011-04-15

   <div><p>+1 ...would be thrilled to reduce the multi-minute build times
   whenever I make a code change on Android (even if it's not as good
   as it is with the iPhone, where you can just make a change in a
   source file and it will be reflected the next time that file is
   iterated, rebuild or not)</p></div></li>
<li>Matthew Lieder 2011-04-15

   <div><p>Here's a workaround until they fix it; brings my re-build times
   down to 5 seconds :)</p>
   <p>Open android/builder.py and change</p>
   <p>self.build_generated_classes()<br>
   generated_classes_built = True</p>
   <p>to (making sure you have the whitespace correct)</p>
   <p>generated_classes_built = False<br>
   if manifest_changed or self.tiapp_changed or self.deploy_type ==
   "production":<br>
   self.build_generated_classes() generated_classes_built = True
   else:<br>
   info("Manifest unchanged, skipping Java build")</p></div></li>
<li>Matthew Lieder 2011-04-15

   <div><p>With proper formatting (I hope):</p>
   <pre>
   <code class="python">self.build_generated_classes() 
   generated_classes_built = True</code>
   </pre>
   <pre>
   <code class="python">generated_classes_built = False 
   if manifest_changed or self.tiapp_changed or self.deploy_type == "production": 
     self.build_generated_classes() 
     generated_classes_built = True 
   else: 
     info("Manifest unchanged, skipping Java build")</code>
   </pre></div></li>
<li>Matthew Lieder 2011-04-15

   <div><p>More changes needed now:</p>
   <p>In builder.py within build_and_run, change<br></p>
   <pre>
   <code>if self.install: self.wait_for_device('e')
   else: self.wait_for_device('d')</code>
   </pre>
   to<br>
   <pre>
   <code>if self.install: self.wait_for_device('d')
   else: self.wait_for_device('e')</code>
   </pre>
   <p>And in builder.py within package_and_deploy, change<br></p>
   <pre>
   <code>for jar in self.module_jars:
     apk_build_cmd += ['-rj', jar]</code>
   </pre>
   to<br>
   <pre>
   <code>#for jar in self.module_jars:
     #apk_build_cmd += ['-rj', jar]</code>
   </pre>
   (may need to be conditionally skipped based on if a full build is
   being done or not; haven't confirmed yet)</div></li>
<li>Matthew Lieder 2011-04-15

   <div><p>Any updates on this? I'm getting back into Android development
   and very sad to find it still broken in 1.6.1 :(</p></div></li>
<li>Allen Yeung 2013-10-19

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/4781" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4781</a></li>
<li>Samuel Dowse 2013-11-11

   Verified fixed on:
   Mac OSX 10.9 Mavericks
   Titanium Studio, build: 3.2.0.201311100540
   Titanium SDK, build: 3.2.0.v20131110134044
   CLI: 3.2.0
   Alloy: 1.3.0
   
   Successfully built android project for emulator 2.3.3 incrementally.
   Closing</li>
</ol>


<p><a href="/TIMOB/TIMOB-2209.json">JSON Source</a></p>