---
title: "[TIMOB-2221] Regression: methods passed through contexts not returning values"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:58:27.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, android_refactor, defect, javascript, refactor, regression</td></tr>
<tr><th>Reporter</th><td>Matthew Lieder</td></tr>
<tr><th>Assignee</th><td>Marshall Culpepper</td></tr>
<tr><th>Created</th><td>2011-04-15T03:13:54.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:58:27.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Variable/method passing through contexts was completely broken
in 1.4.1.1 on Android, but in 1.4.2 (a build from 10/7) it was
fixed and working beautifully. However, now in 1.5.0 it's broken
again (though not quite as broken as before).</p>
<p>Here's what the log shows in 1.4.2 when I run the attached
testcase:</p>
<pre>
<code>[INFO] Titanium SDK version: 1.4.2 (10/07/10 15:15 2373d78)
[INFO] Deployed Sandbox ... Application should be running.
[INFO] [194,2438] 1.0
[INFO] [14,2452] win.b() = hello
[INFO] [11,2463] {"instanceVar":123,"method":"org.appcelerator.titanium.kroll.KrollCallback@43eb9160"}
[INFO] [7,2470] 123.0
[INFO] [17,2487] function method called
[INFO] [10,2497] function getProps called
[INFO] [6,2503] win.glob.getProps(): [object Object]
[INFO] [8,2511] win.glob.getProps().propOne: property 1
[INFO] [4,2515] function getClass called
[INFO] [12,2527] win.glob.getClass(): [object Object]
[INFO] [11,2538] win.glob.getClass().instanceVar: 123</code>
</pre>
<p>And here's what it shows in 1.5.0:<br></p>
<pre>
<code>[INFO] Titanium SDK version: 1.5.0 (10/26/10 19:22 6add5e1)
[INFO] Deployed Sandbox ... Application should be running.
[INFO] [95,3090] 1.0
[INFO] [62,3152] win.b() = undefined
[INFO] [68,3220] {"instanceVar":123,"method":"org.appcelerator.titanium.kroll.KrollCallback@43ecd520"}
[INFO] [3,3223] 123.0
[INFO] [183,3406] win.glob.getProps(): undefined
[INFO] [30,3436] win.glob.getProps().propOne: undefined
[INFO] [3,3439] win.glob.getClass(): undefined
[INFO] [3,3442] win.glob.getClass().instanceVar: undefined
[INFO] [9,3451] function method called
[INFO] [2,3453] function getProps called
[INFO] [4,3457] function getClass called</code>
</pre>
<p>Here's an abridged example from the test case:<br></p>
<pre>
<code class="javascript">// parent context (app.js)
var glob = {};
glob.getProps = function() {<br>
<br>


</code>
</pre>
<pre>
<code class=
"javascript"><code>Ti.API.info('function getProps called');

return {propOne: 'property 1', propTwo: 'property 2'};</code></code>
</pre>
<pre>


<br>
};
win.glob = glob;

<br>
// child context (test.js)
var obj = win.glob.getProps(); // runs code in method but returns undefined
</pre></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-2221_18122/app.js">app.js</td></td><td>2011-04-15T03:13:55.000+0000</td><td>1054</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-2221_18123/test.js">test.js</td></td><td>2011-04-15T03:13:55.000+0000</td><td>665</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Matthew Lieder 2011-04-15

   <div><p>This appears to be a partial regression of the fixes done in the
   high-priority, milestone-1.5 <a href="/projects/32238/tickets/1223"
   title="Ticket #1223">#1223</a></p></div></li>
<li>Matthew Lieder 2011-04-15

   <div><p>In case this helps, the closest potential culprit I've found is
   <a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/26a8a4d58b667f89d8cf3ebadca4a8a95b3dfbfd" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/26a8a4d58b667f89d8cf3ebadca4a8a95b3dfbfd</a>">
   <a href="http://github.com/appcelerator/titanium_mobile/commit/26a8a4d58b667..." rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/26a8a4d58b667...</a></a></p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>Standardizing title and assigning over to Marshall.</p></div></li>
<li>Matthew Lieder 2011-04-15

   <div><p>Marshall, do you have any clue when you'll get around to looking
   at this one? Sometime this week hopefully?</p></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/2e76a75f4bd6e3b6cc46f044f07dee0646d0d53c"
   title=
   "Changeset [2e76a75f4bd6e3b6cc46f044f07dee0646d0d53c]">[2e76a75f4bd6e3b6cc46f044f07dee0646d0d53c]</a>)
   use an event wrapper for the Ti.Yahoo.yql callback, enable YQL in
   KS, and added a new yahoo test suite. Handle undefined more
   gracefully in KrollConverter, and made a fix for unwrapping
   KrollCallback to it's source function [<a href=
   "/projects/32238/tickets/755" title="Ticket #755">#755</a>
   state:fixed-in-qa] [<a href="/projects/32238/tickets/2221" title=
   "Ticket #2221">#2221</a> state:fixed-in-qa] <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/2e76a75f4bd6e3b6cc46f044f07dee0646d0d53c" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/2e76a75f4bd6e3b6cc46f044f07dee0646d0d53c</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/2e76a75f4bd6..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/2e76a75f4bd6...</a></a></p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>Titanium SDK version: 1.5.0 (12/10/10 08:19 f37ab6c)</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2221.json">JSON Source</a></p>