---
title: "[TIMOB-2395] Android: KS Geolocation always says \"geo turned off\" and location updates never occur"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:58:59.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0 M02</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, android_refactor, defect, regression, rplist</td></tr>
<tr><th>Reporter</th><td>Bill Dawson</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-04-15T03:18:34.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:58:59.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>See also helpdesk <a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/56661" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/56661</a>"><a href="http://developer.appcelerator.com/helpdesk/view/56661" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/56661</a></a>.</p>
<p>In general, geolocation does not seem to work at all in 1.5
(master).</p></div>

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-04-15

   <div><p>Problem appears to be ....</p>
   <ul>
   <li>Top-level modules load up when app loads, meaning Geolocation
   as well.</li>
   <li>When Geolocation loads up, it sets TiLocation instance.</li>
   <li>When TiLocation loads, it creates the locationProvider.</li>
   <li>Shortly thereafter, however, the RootActivity pauses.
   Geolocation instance has listened for this, and tells TiLocation
   instance to pause.</li>
   <li>TiLocation's reaction to pausing is to nullify the
   locationProvider.</li>
   <li>Because Geolocation is a module, it is a singleton -- all
   attempts to use it after this will get this TiLocation that has the
   null locationProvider.</li>
   </ul>
   <p>I can't find any equivalent of @ContextSpecific that works in
   1.5 (I see the @Kroll.module annotation has that as an argument,
   but it doesn't do anything yet.)</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/559ea0c36a91fa3c101f518a9a19ec16ea002915"
   title=
   "Changeset [559ea0c36a91fa3c101f518a9a19ec16ea002915]">[559ea0c36a91fa3c101f518a9a19ec16ea002915]</a>)
   [<a href="/projects/32238/tickets/2395" title=
   "Ticket #2395">#2395</a> state:fixed-in-qa] Allow locationManager
   to be re-instantiated dynamically. <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/559ea0c36a91fa3c101f518a9a19ec16ea002915" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/559ea0c36a91fa3c101f518a9a19ec16ea002915</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/559ea0c36a91..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/559ea0c36a91...</a></a></p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/518a865fc0b5d5aa203a49d87410710c3d5f81eb"
   title=
   "Changeset [518a865fc0b5d5aa203a49d87410710c3d5f81eb]">[518a865fc0b5d5aa203a49d87410710c3d5f81eb]</a>)
   [<a href="/projects/32238/tickets/2395" title=
   "Ticket #2395">#2395</a> state:fixed-in-qa] Check for null in
   getCurrentPosition <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/518a865fc0b5d5aa203a49d87410710c3d5f81eb" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/518a865fc0b5d5aa203a49d87410710c3d5f81eb</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/518a865fc0b5..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/518a865fc0b5...</a></a></p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/30bb89f9c9f498bcce03d64c21940565273529ad"
   title=
   "Changeset [30bb89f9c9f498bcce03d64c21940565273529ad]">[30bb89f9c9f498bcce03d64c21940565273529ad]</a>)
   [<a href="/projects/32238/tickets/2395" title=
   "Ticket #2395">#2395</a>] Unit test checking NPE in
   getCurrentPosition <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/30bb89f9c9f498bcce03d64c21940565273529ad" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/30bb89f9c9f498bcce03d64c21940565273529ad</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/30bb89f9c9f4..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/30bb89f9c9f4...</a></a></p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>new bug in for updated location, closing against 1.5.0.91838a G2
   (2.2), Droid1 (2.2)</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2395.json">JSON Source</a></p>