---
title: "[TIMOB-2413] Android:Unable to abort download, "bad file number" error seen. "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:59:02.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.5.0 M04</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect, download, regression, xhr</td></tr>
<tr><th>Reporter</th><td>Thomas Huelbert</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:19:03.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:59:02.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>1.5.0.91838a device and sim, all flavors</p>
<p>1.Platform &gt; XHR &gt; File download<br>
2.Tap "large file download"<br>
3.tap abort</p>
<p>results: file continues to download, or prog bar starts freaking
out.</p>
<p>seen in console:</p>
<p>/DefaultHttpClient( 8815): Error consuming content after an
exception. W/DefaultHttpClient( 8815): java.net.SocketException:
Bad file number<br>
W/DefaultHttpClient( 8815): at
org.apache.harmony.luni.platform.OSNetworkSystem.readSocketImpl(Native
Method)<br>
W/DefaultHttpClient( 8815): at
org.apache.harmony.luni.platform.OSNetworkSystem.read(OSNetworkSystem.java:358)<br>
W/DefaultHttpClient( 8815): at
org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:561)<br>
W/DefaultHttpClient( 8815): at
org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:88)<br>
W/DefaultHttpClient( 8815): at
org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)<br>
W/DefaultHttpClient( 8815): at
org.apache.http.impl.io.AbstractSessionInputBuffer.read(AbstractSessionInputBuffer.java:134)<br>
W/DefaultHttpClient( 8815): at
org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:174)<br>
W/DefaultHttpClient( 8815): at
org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:188)<br>
W/DefaultHttpClient( 8815): at
org.apache.http.impl.io.ContentLengthInputStream.close(ContentLengthInputStream.java:121)<br>
W/DefaultHttpClient( 8815): at
org.apache.http.entity.BasicHttpEntity.consumeContent(BasicHttpEntity.java:142)<br>
W/DefaultHttpClient( 8815): at
org.apache.http.conn.BasicManagedEntity.consumeContent(BasicManagedEntity.java:114)<br>
W/DefaultHttpClient( 8815): at
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:662)<br>
W/DefaultHttpClient( 8815): at
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:637)<br>
W/DefaultHttpClient( 8815): at
ti.modules.titanium.network.TiHTTPClient$ClientRunnable.run(TiHTTPClient.java:940)<br>
W/DefaultHttpClient( 8815): at
java.lang.Thread.run(Thread.java:1096)<br>
E/TiHttpClient( 8815): (TiHttpClient-7) [133,1324912] HTTP Error
(java.net.SocketException): Connection timed out<br>
E/TiHttpClient( 8815): java.net.SocketException: Connection timed
out<br>
E/TiHttpClient( 8815): at
org.apache.harmony.luni.platform.OSNetworkSystem.readSocketImpl(Native
Method)<br>
E/TiHttpClient( 8815): at
org.apache.harmony.luni.platform.OSNetworkSystem.read(OSNetworkSystem.java:358)<br>
E/TiHttpClient( 8815): at
org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:561)<br>
E/TiHttpClient( 8815): at
org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:88)<br>
E/TiHttpClient( 8815): at
org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)<br>
E/TiHttpClient( 8815): at
org.apache.http.impl.io.AbstractSessionInputBuffer.read(AbstractSessionInputBuffer.java:134)<br>
E/TiHttpClient( 8815): at
org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:174)<br>
E/TiHttpClient( 8815): at
org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:188)<br>
E/TiHttpClient( 8815): at
org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:178)<br>
E/TiHttpClient( 8815): at
ti.modules.titanium.network.TiHTTPClient$LocalResponseHandler.handleResponse(TiHTTPClient.java:232)<br>
E/TiHttpClient( 8815): at
ti.modules.titanium.network.TiHTTPClient$LocalResponseHandler.handleResponse(TiHTTPClient.java:161)<br>
E/TiHttpClient( 8815): at
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:657)<br>
E/TiHttpClient( 8815): at
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:637)<br>
E/TiHttpClient( 8815): at
ti.modules.titanium.network.TiHTTPClient$ClientRunnable.run(TiHTTPClient.java:940)<br>
E/TiHttpClient( 8815): at
java.lang.Thread.run(Thread.java:1096)<br>
I/TiHttpClient( 8815): (TiHttpClient-7) [10,1324922] Sending error
Connection timed out<br>
I/ActivityManager( 1088): Process com.google.android.voicesearch
(pid 1816) has died.</p></div>

<h3>Comments</h3>

<ol>
<li>Marshall Culpepper 2011-04-15

   <div><p>I pushed a fix for the Large File XHR test recently, and I
   attempted running this locally and seems to work the way it should.
   Mind updating to a recent version of HEAD and trying again?</p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>looking good, closing as resolved against Titanium SDK version:
   1.5.0 (12/06/10 08:42 4d92d40) G2 2.2, G1 1.6, sim 2,1</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2413.json">JSON Source</a></p>