---
title: "[TIMOB-2430] adding labels to tableviewrow dynmaically fails: redraw bug"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:59:05.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M07</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, dynamic, label, regression, release-1.6.0, tableview, tableviewrow</td></tr>
<tr><th>Reporter</th><td>Robby</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:19:31.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:59:05.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Similar to <a href="/projects/32238/tickets/2208" title=
"Ticket #2208">#2208</a>, adding a label dynamically to a
TableViewRow does not show up. One has to refresh the entire table
(via setData([]); setData(tableRowData);) to see the added
label.</p>
<p>Given both of these tickets, there is probably a problem with
just about anything added to a tableview row dynamically showing up
without a full refresh.</p>
<p>Code worked in 1.4.0. From <a href=
"/projects/32238/tickets/2208" title="Ticket #2208">#2208</a> seems
like it was a 1.5.x regression.</p></div>

<h3>Comments</h3>

<ol>
<li>Don Thorp 2011-04-15

   <div><p>Robby, please provide a quick sample if you're going to add
   tickets directly and also provide the information from the
   version.txt file in the build of the mobilesdk you're using.</p></div></li>
<li>Robby 2011-04-15

   <div><p>Hey Don,</p>
   <p>Here's the code example. This shows off this bug, as well as the
   one in <a href="/projects/32238/tickets/2208" title=
   "Ticket #2208">#2208</a>.<br>
   Version.txt info of my 1.5 build: version=1.5.0 timestamp=11/24/10
   04:54 githash=c0aff27<br>
   This code works perfectly on this 1.4.2 build: version=1.4.2
   timestamp=10/11/10 19:02 githash=425bc37</p>
   <pre>
   <code class="javascript">Ti.API.info("@ win_test.js");
   var win = Ti.UI.currentWindow;
   win.backgroundColor = "#b5aea5";
   
   var displayName = Ti.UI.createLabel({
     top: 0,
     left: 0,
     font:{fontSize: 20, fontWeight:'bold'},
     height: 30,
     width: 320,
     color:'#000000',
     text:"Testing 123"
   });
   win.add(displayName);
   
   var rowData = [];
   for (var i = 0; i &lt; 1; i++) {
     var row = Ti.UI.createTableViewRow({
       height: 50,
       title: "Row " + i,
       color: "#000000",
       backgroundColor:"#DDDDDD",
       className: 'rowbla'
     });
     rowData.push(row);
   }
   
   var tableView = Ti.UI.createTableView({
     top:displayName.top + displayName.height + 10,
     data: rowData
   });
   win.add(tableView);
   
   win.addEventListener('focus', function(e) {
     setTimeout(changeColors, 2000);
   });
   
   function changeColors() {
     //dynamic bg color change of label
     //this always works
     displayName.backgroundColor = "#0000FF";
     
     //dynamic bg color change of row 1
     //this never works (it sometimes work if we do it on the window focus event, never if we do it on delay)
     rowData[0].backgroundColor = "#0000FF";
     
     //dynamic add label to row 2
     //this never works (it sometimes work if we do it on the window focus event, never if we do it on delay)
     var newLabel = Ti.UI.createLabel({
       top: 5,
       left: 5,
       font:{fontSize: 20, fontWeight:'bold'},
       height: 'auto',
       width: 'auto',
       color:'#00FF00',
       text:"NEW LABEL BLA"
     });
     rowData[0].add(newLabel);
   }</code>
   </pre></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/8aa0ef980e344bddcf4e5f60eda9e43a0a14cd17"
   title=
   "Changeset [8aa0ef980e344bddcf4e5f60eda9e43a0a14cd17]">[8aa0ef980e344bddcf4e5f60eda9e43a0a14cd17]</a>)
   update a TableViewRow's view when a child is added or removed
   [<a href="/projects/32238/tickets/2430" title=
   "Ticket #2430">#2430</a> state:fixed-in-qa] <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/8aa0ef980e344bddcf4e5f60eda9e43a0a14cd17" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/8aa0ef980e344bddcf4e5f60eda9e43a0a14cd17</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/8aa0ef980e34..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/8aa0ef980e34...</a></a></p></div></li>
<li>Opie Cyrus 2011-04-15

   <div><p>verified with test case from Robby</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2430.json">JSON Source</a></p>