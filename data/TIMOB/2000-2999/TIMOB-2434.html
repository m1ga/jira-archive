---
title: "[TIMOB-2434] Titanium does not detect Iphone Certificate because of non-ascii characters in name"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2017-06-08T23:20:06.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>MrMartin</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2011-04-15T03:19:47.000+0000</td></tr>
<tr><th>Updated</th><td>2017-06-08T23:20:06.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p><a href="/projects/32238/changesets/FIX" title=
"Changeset [FIX]">[FIX]</a></p>
<p><strong>EDIT: It took me an evening, but I found a
fix/workaround for this issue. Read the post to see the steps I
took to fix it.</strong></p>
<p>Original post:<br>
Titanium doesn't detect my Iphone Developer Certificate. The
"Install Now" button on the "Run on Device" tab is disabled. So I
can't install to my Iphone.</p>
<p>My name contains non-ascii characters and I think this could be
the reason it doesn't work. I have seen other tickets where people
have trouble because of non-ascii characters in their
certificates.</p>
<p>I have a proper working certificate and I can install to my
Iphone from XCode without problems. I have tried deleting and
reinstalling both the WWDR and the Developer Certificate. I have a
working provisioning profile.</p>
<p>I'm using v. 1.2.1 of Titanium and the v. 4.2 Iphone SDK.</p>
<p>EDIT:</p>
<p>I checked the prerreq.py script and it seems the keychain dump
does not work properly.</p>
<p>I stepped through the script and discovered that the functions
looking for the different certificate strings were not finding
anything. A closer look revealed that the problem was with the
initial keychain dump.</p>
<p>I tried running the dump command from the script in the python
shell:<br></p>
<pre>
<code class=
"python">output = run.run(['security','dump-keychain'],False,False)</code>
</pre>
This should give a long string of keys and values, but it just
return gives the first couple of rows from the keychain dump.<br>
The result is cut off just after my name appears. The reason
probably being that my name contains non-ascii characters which
crashes the string handlers.
<p>To work around this I ran an ordinary keychain dump in
Terminal<br></p>
<pre>
<code class="code">security dump-keychain -d login.keychain</code>
</pre>
and saved the output to a text file.<br>
I set the prereq.py to read from that file instead of trying to get
the dump directly. This seems to solve some of the problems, as the
rest of the functions in the prereq.py file now correctly
identifies my certificates.
<p>I still can&acute;t install to device though. It seems there is
a similar problem with reading the provisioning profile. I haven't
tried to work around it yet.</p>
<p>EDIT 2:</p>
<p>I had made a mistake in reading the keychain file in the script.
When I fixed that the certificates were detected in the Titanium
GUI and the Install Now button was enabled!</p>
<p>However, when I click Install Now, I get a "Install error", so
it still does not work. :(</p>
<p>EDIT 3:</p>
<p>The build.log contains the following error:</p>
<p>Exception detected in script:<br>
Traceback (most recent call last):<br>
File "/Library/Application
Support/Titanium/mobilesdk/osx/1.4.2/iphone/builder.py", line 994,
in main</p>
<pre>
<code>execute_xcode("iphoneos%s" % iphone_version,args,False)</code>
</pre>
<p>File "/Library/Application
Support/Titanium/mobilesdk/osx/1.4.2/iphone/builder.py", line 780,
in execute_xcode</p>
<pre>
<code>for arg in args: o.write("    %s\n" % arg)</code>
</pre>
<p>UnicodeEncodeError: 'ascii' codec can't encode character u'\xe4'
in position 64: ordinal not in range(128)</p>
<p>EDIT 4 - the fix:</p>
<p>Traced that error to the following statement:<br></p>
<pre>
<code>o.write("Starting Xcode compile with the following arguments:\n\n")
for arg in args: o.write("    %s\n" % arg)</code>
</pre>
<p>The o.write apparently does not honor the utf-8 encoding in the
file and crashes trying to print my name.<br>
Since the line seemed to be just a log output i commented it out
like so:<br></p>
<pre>
<code>#for arg in args: o.write("    %s\n" % arg)</code>
</pre>
<p>And would you believe it...</p>
<p><strong>Now it installs!</strong></p>
<p>Now that wasn't so hard was it?<br>
I hesitate to call this a fix, but at least it's a usable work
around.</p>
<p>Happy Non-ASCII:ing to all my fellow Scandinavians (and the rest
too of course)!</p>
<p>/Martin</p></div>

<h3>Comments</h3>

<ol>
<li>Lee Morris 2017-06-08

   Closing ticket as there has been no input for the last 6 years. Any problems, please file a new ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-2434.json">JSON Source</a></p>