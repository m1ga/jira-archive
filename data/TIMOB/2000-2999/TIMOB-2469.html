---
title: "[TIMOB-2469] Android: orientation - unexpected results for "set portrait" after setting "allow landscape only" "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:59:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M07</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, orientation, regression, release-1.6.0</td></tr>
<tr><th>Reporter</th><td>Thomas Huelbert</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:20:35.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:59:11.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Titanium SDK version: 1.5.0 (11/29/10 08:10 faa27c7). G2 (2.2)
some G1 (1.6) some droid 1 (2.2) and a bit of sim (2.1)</p>
<p>change in behavior since last weeks 1.5.0.591838a pull</p>
<p>1.Phone &gt; orientation<br>
2.hold it in portrait<br>
3.Tap "allow landscape only"<br>
4.tap "set portrait"</p>
<p>results (you may need to repeat this once if you don't see it
first time, it is a little bit intermittent) the app briefly draws
in portrait, then returns to landscape. broke between 1.5.0.591838a
and now</p></div>

<h3>Comments</h3>

<ol>
<li>Marshall Culpepper 2011-04-15

   <div><p>Hrm.. this is similar to the way the iPhone test works. "Set
   Portrait" works as long as you don't rotate back to landscape (or
   near it). Once rotated back, the lock goes back into effect. The
   sensor sensitivity might be a little high for the switch back..
   thoughts?</p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>Hey Marshall, I omitted some important info - how you hold the
   phone will affect this test. If you lay the phone on a flat surface
   (in portrait) you won't see it flash to portrait then back to
   landscape. If you hold it up in portrait, when do step 4 you should
   see it briefly draw in portrait before it draws in landscape again.
   sorry for the missing steps.</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>Logic in TiBaseActivity.onOrientationChanged was wiping out info
   about the orientation "override" -- an orientation that is not one
   of the "allowable" but is set explicitly. That's the use case
   described in this ticket: setting "landscape only" then explicitly
   setting to portrait. That information about the explicit set to
   portrait was being wiped out as soon as you move the device while
   in portrait. Thereafter, any further move inside portrait would
   look like it's not allowable and therefore get flipped to landscape
   (the allowable).</p>
   <p>Hard to explain. But with this fix, it doesn't jerk back to
   landscape (as was the fail case) right when you move it. Instead it
   waits until it actually is landscape (when tilting toward the left;
   apparently we don't support tilting toward the right in this
   arrangement.)</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/ba41eca7d89e0a7db6183b2d5556abd194ef4a9a"
   title=
   "Changeset [ba41eca7d89e0a7db6183b2d5556abd194ef4a9a]">[ba41eca7d89e0a7db6183b2d5556abd194ef4a9a]</a>)
   [<a href="/projects/32238/tickets/2469" title=
   "Ticket #2469">#2469</a> state:fixed-in-qa] don't wipe out
   information about an 'override' orientation until an allowable
   orientation is reached. <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/ba41eca7d89e0a7db6183b2d5556abd194ef4a9a" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/ba41eca7d89e0a7db6183b2d5556abd194ef4a9a</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/ba41eca7d89e..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/ba41eca7d89e...</a></a></p></div></li>
<li>Opie Cyrus 2011-04-15

   <div><p>verified 2.2 on droid2</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2469.json">JSON Source</a></p>