---
title: "[TIMOB-2546] Android: state of annotations added/removed prior to view creation is not reflected when view is created"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:59:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M05</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect, mapview, release-1.6.0</td></tr>
<tr><th>Reporter</th><td>Bill Dawson</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-04-15T03:22:25.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:59:24.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>For example, <code>addAnnotation(annotation)</code> only does
something useful if the view has already been created. This may be
the case with other properties as well, so whoever works on this
should look for that. Also check if it works to
<code>addAnnotation</code> prior to creating the view in
iPhone.</p>
<p>WORKAROUND: If you're wanting to set/remove annotations prior to
adding the view (i.e., prior to <code>win.add(mapview)</code>, keep
them in an array and then pass them as the <code>annotations</code>
creation property when you create the view. Better yet, if you're
experiencing this problem, it might be just a question of how to
order your code: call <code>win.add(mapview)</code> and
<code>win.open()</code> before <code>.addAnnotation</code>. Because
<code>.addAnnotation</code> (and <code>.removeAnnotation</code>)
will work if ....</p>
<ul>
<li>the window is open</li>
<li>the mapview has been added to the window already.</li>
</ul></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-2546_18163/app.js">app.js</td></td><td>2011-04-15T03:22:25.000+0000</td><td>1055</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Joshua 2011-04-15

   <div><p>Bill what about addAnnotations to update the map with new
   annotations. If you're adding one annotation no big deal, but if
   your removing 50 and adding 60 addAnnotation is cumbersome and
   slow.</p></div></li>
<li>Joshua 2011-04-15

   <div><p>Bill I forgot to mention this is a problem in Android, iPhone
   works wonderfully.</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>that will be addressed</p></div></li>
<li>Joshua 2011-04-15

   <div><p>When is 1.5.1 slated for general release?</p></div></li>
<li>Joshua 2011-04-15

   <div><p>Did the ticket make it in 1.5.1? I downloaded the new sdk and it
   still doesn't seem to work.</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>The ticket is still new and has not been worked on yet.</p></div></li>
<li>Joshua 2011-04-15

   <div><p>Hasn't the 1.5.1 release already gone out?</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>Yes it has, what hasn't happened is me redistributing issues to
   other milestones. The purpose of 1.5.1 changed from when we
   originally slotted the item here. Expect to see lots of shuffling
   as I move things around. Lighthouse is a crude tool for planning
   and it doesn't give us a good way to move things around privately
   while planning. When the ticket state goes to fixed-in-qa it has
   been pushed to a branch. When it's resolved it's passed QA in that
   branch.</p></div></li>
<li>Joshua 2011-04-15

   <div><p>Gotcha, thank you for the info.</p></div></li>
<li>Opie Cyrus 2011-04-15

    <div><p>(from <a href=
    "/projects/32238/changesets/d486fe7de107960866721bcd85cb44780893a8db"
    title=
    "Changeset [d486fe7de107960866721bcd85cb44780893a8db]">[d486fe7de107960866721bcd85cb44780893a8db]</a>)
    [<a href="/projects/32238/tickets/2519" title=
    "Ticket #2519">#2519</a> state:fixed-in-qa] [<a href=
    "/projects/32238/tickets/2546" title="Ticket #2546">#2546</a>
    state:fixed-in-qa] changed map annotations to be stored by
    proxy</p>
    <p>when adding or removing annotations, those will be stored in
    proxy. Upon the map actualybeing made visible, the annotations will
    be made visible along with any annotations selected before the map
    is opened.<br>
    <a href=
    "<a href="https://github.com/appcelerator/titanium_mobile/commit/d486fe7de107960866721bcd85cb44780893a8db" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/d486fe7de107960866721bcd85cb44780893a8db</a>">
    <a href="https://github.com/appcelerator/titanium_mobile/commit/d486fe7de107..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/d486fe7de107...</a></a></p></div></li>
<li>Opie Cyrus 2011-04-15

    <div><p>Please verify with the attached app. Upon launch, the annotation
    will be added and selected before the map is added to the window or
    the window is opened. The annotation should be automatically
    selected when the app launches without any user interaction.</p></div></li>
<li>Don Thorp 2011-04-15

    <div><p>Verified on G1/1.6 and Nexus One/2.2.1 using build #e1cb22a</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2546.json">JSON Source</a></p>