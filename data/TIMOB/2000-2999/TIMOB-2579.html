---
title: "[TIMOB-2579] Window does not reopen properly, different background color and will not close"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:59:30.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M04</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect, release-1.6.0</td></tr>
<tr><th>Reporter</th><td>pete</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:23:18.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:59:30.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>My app is a type of calculator. Once the user clicks the button
Calculate, a new window is opened that shows the results. On this
output window I have added a back button which closes the current
window. This all works fine unless upon clicking back you once
again click calculate. This time, the window opens but the
background is black and none of the buttons work, even hitting the
Android back key.<br>
What is happening? Was the output window never fully closed?</p></div>

<h3>Comments</h3>

<ol>
<li>Nate Allen 2011-04-15

   <div><p>I've run into this same problem. It happening to me in Android
   1.5.1+. Probably in 1.5.0 as well, but I haven't tested it. It
   appears to me like the background is simply not there when
   reopening windows. I've asked this in QA here for more details:</p>
   <p><a href=
   "<a href="http://developer.appcelerator.com/question/93591/background-disappears-after-re-opening-window" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/93591/background-disappears-after-re-opening-window</a>">
   <a href="http://developer.appcelerator.com/question/93591/background-disappe..." rel="nofollow" target="_blank">http://developer.appcelerator.com/question/93591/background-disappe...</a></a></p></div></li>
<li>Nate Allen 2011-04-15

   <div><p>Here is some simplified code that reproduces the issue. This is
   the entire app.js. Run this with 1.4.3 and the background will
   return to white after each cycle. Run with 1.5.2, and the screen
   goes to black after the first click.</p>
   <pre>
   <code class="javascript">Titanium.UI.setBackgroundColor('#000');
   
   
   var win1 = Titanium.UI.createWindow({  
       backgroundColor:'#000',
       exitOnClose:true,
       navBarHidden:true,
       orientationModes: [Ti.UI.PORTRAIT],
       zIndex:-1
   });
   
   win1.open();
   
   var win3 = Ti.UI.createWindow({backgroundColor:'#FFF'});
   
   var button = Titanium.UI.createButton({
       title:'click to cycle',
       top:190,
       left:30,
       height:50,
       width:250,
       font:{fontSize:20}
   });
   
   win3.add(button);
   
   win3.open();
   
   button.addEventListener('click', function(){
   
   win3.close();
   win3.open();
   });</code>
   </pre></div></li>
<li>Don Thorp 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/a1a9c2af2ac88a98c13baee4e64ef6e91891e4b7"
   title=
   "Changeset [a1a9c2af2ac88a98c13baee4e64ef6e91891e4b7]">[a1a9c2af2ac88a98c13baee4e64ef6e91891e4b7]</a>)
   [<a href="/projects/32238/tickets/2579" title=
   "Ticket #2579">#2579</a> state:fixed-in-qa] processProperties
   expects a clone of the properties to be passed. Values are removed
   by some specialized classes before sending the properties to their
   parent's processProperties. Note: This example works with open and
   close in the same click handler because it's a lightweight window.
   Trying it with an Activity/heavyweight window has unpredictable
   side-effect due to having to create the new Activity. <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/a1a9c2af2ac88a98c13baee4e64ef6e91891e4b7" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/a1a9c2af2ac88a98c13baee4e64ef6e91891e4b7</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/a1a9c2af2ac8..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/a1a9c2af2ac8...</a></a></p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>closed against Titanium SDK version: 1.6.0 (01/06/11 08:47
   8b2fd0e) G1 (1.6) droid 1 (2.2.1) emulator 2.1. checked ipod touch
   4gt 4.2.1</p></div></li>
<li>pete 2011-04-15

   <div><p>If I understood correctly the fix is included in the build
   located<br>
   here:<a href=
   "<a href="http://builds.appcelerator.com.s3.amazonaws.com/index.html" rel="nofollow" target="_blank">http://builds.appcelerator.com.s3.amazonaws.com/index.html</a>"><a href="http://builds.appcelerator.com.s3.amazonaws.com/index.html" rel="nofollow" target="_blank">http://builds.appcelerator.com.s3.amazonaws.com/index.html</a></a><br>
   under: Jan 6 2011 02:15 r8b2fd0e4</p>
   <p>If so then the issue is still not resolved for me. The
   background is no longer black and is now correct however when I
   scroll up I can see the previous window behind the first.</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>There is no scroll region in that test. How are you "scrolling
   up"</p></div></li>
<li>pete 2011-04-15

   <div><p>I created the ticket someone else posted an example. Apparently
   the example had a different issue than mine. Example code is
   below:</p>
   <p>app.js<br></p>
   <pre>
   <code>
   Titanium.UI.setBackgroundColor('#000');<br>
   <br>
   
   
   <br>
   var win1 = Titanium.UI.createWindow({<br>
   <br>
   <br>
   
   
   </code>
   </pre>
   <pre>
   <code><code>backgroundColor:'#000',
   exitOnClose:true,
   navBarHidden:true,
   orientationModes: [Ti.UI.PORTRAIT],
   zIndex:-1</code></code>
   </pre>
   <pre>
   
   
   <br>
   });
   
   <br>
   win1.open();
   
   <br>
   var win3 = Titanium.UI.createWindow({
   
   </pre>
   <pre>
   <code>title: 'Window 3',
   name: 'Window 3',
   backgroundColor: '#C4D5DA',
   fullscreen: false,
   animate: ({opacity: 0,duration: 300 }),
   url: 'win3.js'
   });</code>
   </pre>
   <pre>
   
   
   <br>
   win3.open();
   </pre>
   <p>win3.js<br></p>
   <pre>
   <code>var win3 = Titanium.UI.currentWindow;<br>
   <br>
   
   
   <br>
   var body = Titanium.UI.createScrollView({<br>
   <br>
   
   
   </code>
   </pre>
   <pre>
   <code><code>contentWidth:Titanium.Platform.displayCaps.platformWidth,contentHeight:500,
   right:0,left:0,top:60,bottom:50,width:'auto',height:'auto',
   showHorizontalScrollIndicator:false,showVerticalScrollIndicator:false});</code></code>
   </pre>
   <pre>
   
   
   <br>
   win3.add(body)
   
   <br>
   var button = Titanium.UI.createButton({
   
   </pre>
   <pre>
   <code>title:'click to cycle',
   top:190,
   left:30,
   height:50,
   width:250,
   font:{fontSize:20}</code>
   </pre>
   <pre>
   
   
   <br>
   });
   
   <br>
   body.add(button);
   
   <br>
   button.addEventListener('click', function(){
   
   </pre>
   <pre>
   <code>win3.close();
   win3.open();
   });&lt;/code&gt;</code>
   </pre>
   <pre>
   
   
   <br>
   </pre></div></li>
<li>pete 2011-04-15

   <div><p>I apologize for the terrible formatting. I did preview my post
   but was distracted by a work emergency before I could fix it. I was
   hoping to be able to edit it after the fact...</p>
   <p>Also, I will try putting my code into a single page and see if
   that solves my problem.</p></div></li>
<li>pete 2011-04-15

   <div><p>I did create this issue but it seems there were multiple issues
   I was running into, should I create a new issue? (perhaps someone
   else should who could define it more clearly...)</p></div></li>
<li>pete 2011-04-15

    <div><p>New ticket created here: <a href=
    "<a href="https://appcelerator.lighthouseapp.com/projects/32238-titanium-mobile/tickets/2838-reopening-a-window-opens-it-twice" rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238-titanium-mobile/tickets/2838-reopening-a-window-opens-it-twice</a>">
    <a href="https://appcelerator.lighthouseapp.com/projects/32238-titanium-mobi..." rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238-titanium-mobi...</a></a></p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2579.json">JSON Source</a></p>