---
title: "[TIMOB-2580] 1.5.0: HTTP 302 response headers missing"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2011-04-15T03:23:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M05</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>1.5.0, httpclient, ios, release-1.6.0, response, xhr</td></tr>
<tr><th>Reporter</th><td>tom quas</td></tr>
<tr><th>Assignee</th><td>Reggie Seagraves</td></tr>
<tr><th>Created</th><td>2011-04-15T03:23:23.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-03T05:45:41.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>My app talks to a backend service to upload images. After
successful upload, the service responds with a 302, setting the
Location: header to the URL of the image.</p>
<p>The app works with Ti 1.4.2. With 1.5.0, the Location: header is
missing from the response.</p>
<p>Client code:<br>
xhr.open('POST', url, false);<br>
xhr.onload = function() {<br>
location = xhr.getResponseHeader('Location');<br>
after_upload_callback(location);<br>
};</p>
<p>xhr.setRequestHeader('Content-Type', 'form-data');<br>
xhr.setRequestHeader("Cache-Control", "no-cache");<br>
xhr.send({ file:media });</p></div>

<h3>Comments</h3>

<ol>
<li>tom quas 2011-04-15

   <div><p>After further investigation, I figured that the server returns a
   200 response. The image upload works. Still, any response headers
   are missing with 1.5.0. FWIW, I attached the server code
   snippet.</p>
   <p>class
   UploadHandler(blobstore_handlers.BlobstoreUploadHandler):<br></p>
   <pre>
   <code>def get(self):
       pass
   
   def post(self):
       """ Stores a BLOB and returns its key."""
       blob_info = self.get_uploads()[0]
       asset_info = AssetInfo(blob=blob_info.key())
       asset_info.put()
       self.redirect('/serve/%s' % asset_info.key().id())   # invokes ServeHandler</code>
   </pre>
   <p>class ServeHandler(webapp.RequestHandler):<br></p>
   <pre>
   <code>def post(self, asset_id):
       self.response.headers['Pragma'] = 'no-cache'
       self.response.headers['Cache-Control'] = 'no-cache, no-store, must-revalidate, pre-check=0, post-check=0'
       url = "%s/asset/%s" % (self.request.host_url, asset_id)
       self.response.headers['Location'] = url</code>
   </pre></div></li>
<li>tom quas 2011-04-15

   <div><p>fixed w/ 1.5.1. thx.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Duplicate of other 1.5.x response header bugs.</p></div></li>
<li>tom quas 2011-04-15

   <div><p>duplicate of... which ticket? I still need to follow progress on
   this issue.</p>
   <p>thx, stephen</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>You yourself said that the issue was fixed in 1.5.1. This was
   part of the HTTPResponse refactor to allow access to underlying
   properties of the client. I'm unable to get a bug number because
   lighthouse sucks.</p></div></li>
<li>tom quas 2011-04-15

   <div><p>Ah, I misinterpreted this. Duplicate == closed. Thx</p></div></li>
<li>Lee Morris 2017-03-03

   Closing issue due to time passed and irrelevance of the ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-2580.json">JSON Source</a></p>