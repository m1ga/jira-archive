---
title: "[TIMOB-2601] Android: Adding code that calls Titanium.Platform requires full rebuild"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:59:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M01</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect, kroll, release-1.6.0</td></tr>
<tr><th>Reporter</th><td>Bill Dawson</td></tr>
<tr><th>Assignee</th><td>Marshall Culpepper</td></tr>
<tr><th>Created</th><td>2011-04-15T03:24:07.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:59:34.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Reproduce</p>
<ul>
<li>Create a new Titanium project. Don't add any code to it
yet.</li>
<li>Launch it.</li>
<li>After it launches, edit app.js and add
<code>Ti.API.info("Android version: " +
Ti.Platform.version);</code>.</li>
<li>Save app.js and re-launch the application.</li>
<li>Look at logcat. Instead of setting the <code>info()</code>
message successfully, you'll see:</li>
</ul>
<pre>
<code>E/KrollContext( 4552): (kroll$1) [11,317] ECMA Error evaluating source: TypeError: Cannot read property "version" from undefined (app://app.js#9)
E/KrollContext( 4552): org.mozilla.javascript.EcmaError: TypeError: Cannot read property "version" from undefined (app://app.js#9)
E/KrollContext( 4552):  at org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3761)
E/KrollContext( 4552):  at org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3739)
E/KrollContext( 4552):  at org.mozilla.javascript.ScriptRuntime.typeError(ScriptRuntime.java:3767)
(etc)</code>
</pre>
<ul>
<li>"touch" the tiapp.xml and relaunch.</li>
<li>Now you'll see the correct message.</li>
</ul></div>

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-04-15

   <div><p>cf <a href="/projects/32238/tickets/2475" title=
   "Ticket #2475">#2475</a> as well -- user seems to have had same
   problem and fixed by touching tiapp.xml.</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>cf <a href=
   "<a href="http://developer.appcelerator.com/helpdesk/view/60961" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/60961</a>"><a href="http://developer.appcelerator.com/helpdesk/view/60961" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/60961</a></a></p>
   <p>Customer is reporting that app built with "Distribute" (which, i
   believe, does a full rebuild), also exhibits this problem.</p></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/681f5403fe6b5fe4a582fdc672882445f079cd96"
   title=
   "Changeset [681f5403fe6b5fe4a582fdc672882445f079cd96]">[681f5403fe6b5fe4a582fdc672882445f079cd96]</a>)
   run android.create when a JS file is changed, in case new modules
   are detected and source needs to be generated in the App.java
   [<a href="/projects/32238/tickets/2601" title=
   "Ticket #2601">#2601</a><br>
   state:fixed-in-qa]<br>
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/681f5403fe6b5fe4a582fdc672882445f079cd96" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/681f5403fe6b5fe4a582fdc672882445f079cd96</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/681f5403fe6b..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/681f5403fe6b...</a></a></p></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/6f51f9891c23e670591df1545bf4cdfb5e15f9a3"
   title=
   "Changeset [6f51f9891c23e670591df1545bf4cdfb5e15f9a3]">[6f51f9891c23e670591df1545bf4cdfb5e15f9a3]</a>)
   run android.create when a JS file is changed, in case new modules
   are detected and source needs to be generated in the App.java
   [<a href="/projects/32238/tickets/2601" title=
   "Ticket #2601">#2601</a><br>
   state:fixed-in-qa]<br>
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/6f51f9891c23e670591df1545bf4cdfb5e15f9a3" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/6f51f9891c23e670591df1545bf4cdfb5e15f9a3</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/6f51f9891c23..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/6f51f9891c23...</a></a></p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p><a href="/projects/32238/changesets/INFO" title=
   "Changeset [INFO]">[INFO]</a> Titanium SDK version: 1.6.0 (01/10/11
   08:25 3452f06)</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2601.json">JSON Source</a></p>