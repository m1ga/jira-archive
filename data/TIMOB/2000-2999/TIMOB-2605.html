---
title: "[TIMOB-2605] Localization not setting in some instances"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:59:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M05</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios, localization, release-1.6.0, rplist</td></tr>
<tr><th>Reporter</th><td>Rick Blalock</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-04-15T03:24:12.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:59:35.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>I'm working with a customer that is having the same issue I am
having with using localization. Kevin W helped troubleshoot it with
me. We walked through the identical same steps and it worked for
him but not myself nor the customer. Tested on 1.5.0 GC and
1.5.1.<br></p>
<p>Attached is the project I was tweaking on trying to get it to
work. Kevin had basically the same project and it worked for
him.</p>
<p>the getString() always defaulted to the second arguement (The
fallback text).</p>
<p>Any ideas on this one?</p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-2605_18172/i18n-wtf.zip">i18n-wtf.zip</td></td><td>2011-04-15T03:24:13.000+0000</td><td>855907</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-2605_18173/localization-test.zip">localization-test.zip</td></td><td>2011-04-15T03:24:21.000+0000</td><td>18641533</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Rick Blalock 2011-04-15

   <div><p>Forgot to mention. Customer ticket located here: <a href=
   "<a href="http://developer.appcelerator.com/helpdesk/view/60311" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/60311</a>"><a href="http://developer.appcelerator.com/helpdesk/view/60311" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/60311</a></a></p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Unable to duplicate this. Could be a TiDev issue of some kind -
   I built off of the command line using that script. master/HEAD, iOS
   4.2, simulator.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Gonna bump this to needs-more-info and post a possible
   workaround on the HD ticket.</p></div></li>
<li>Rick Blalock 2011-04-15

   <div><p>Hi Steve,<br>
   Ok so I spent several hours this morning trying to debug this. I
   now think it's an issue with Titanium Developer. Here are the steps
   I took this morning:</p>
   <ol>
   <li>Got the new builds.<br></li>
   <li>Killed the build folder in the project and re-ran. Same
   problem.<br></li>
   <li>Deleted the project and re-created it in it's place (note, all
   my test apps I put in /rickblalock/Appcelerator_Support/).<br></li>
   <li>When creating the new project I used the SAME APP ID - After
   building, it didn't work.<br></li>
   <li>Deleted project. I then created a project in the same folder
   with a DIFFERENT APP ID name. Localization worked.<br></li>
   <li>Deleted project. I then created a project outside the folder
   (put it in a folder on my desktop) with a different app id name.
   Localization worked.<br></li>
   <li>Deleted project. I then created a project outside the folder
   (put it in a folder on my desktop) with the SAME APP ID.
   Localization worked.<br></li>
   <li>Deleted project. I then created a project inside the folder I
   had before with the SAME APP ID NAME. This time, localization
   worked!</li>
   </ol>
   <p>So my assumption is it's an issue with Titanium Developer. I'm
   not familiar with how Ti Dev works enough to make a judgement call
   on this.</p></div></li>
<li>Bert 2011-04-15

   <div><p>I found that if I tried to use localization on a project
   originally created with 1.4.x branch of the SDK you would run into
   these issues.</p>
   <p>The key to getting it to work is to delete the build directory
   and touch the tiapp.xml in a text editor. I also copied over the
   new tags from a tiapp.xml created by the developer using the 1.5
   SDK. After all that, it worked fine for me.</p></div></li>
<li>Andreas sandberg 2011-04-15

   <div><p>Hey Guys,</p>
   <pre>
   <code>  I'm also experiencing this issue and it's intermittent.  Sometimes the localized strings are displayed after a build but most of the time they are not.  When it does work on the simulator, it never works deploying to the device.  I took the sample project attached to this ticket and tried to build, the localization doesn't work.  Tried to kill the build directory, retouch tiapp.xml, diff'd the xml structure with another 1.5.1 project, etc., no luck.  Then I created a new project, copied in the i18n directory manually and everything worked.  Was able to create three additional sample projects this way and every time the localization works.  If there are any log files or anything I can provide to help you troubleshoot the ticket, please let me know.  Thanks!</code>
   </pre>
   <p>Andreas</p></div></li>
<li>Jacques Crocker 2011-04-15

   <div><p>I'm having the same issue here. I attached another sample
   project</p>
   <p>I followed the docs instructions, put the strings.xml within
   <a href="/projects/32238/changesets/root" title=
   "Changeset [root]">[root]</a>/i18n/en/strings.xml. On starting the
   app, L("base_ui_title") returns "base_ui_title" instead of the
   value specified in strings.xml</p>
   <p>I'm using Titanium Developer 1.2.2 along with the 1.5.1sdk</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Ticket hasn't gone through yet but this has been fixed.</p>
   <p>To test and close:</p>
   <ul>
   <li>Compile both provided projects in this ticket
   (localization-test.zip and i18n-wtf.zip) via TiDev OR command-line
   tools</li>
   <li>Make sure that you see the expected localization result in the
   log output</li>
   </ul></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/bc81d17959a8e369d92a3e402eaaa7a653b15c3a"
   title=
   "Changeset [bc81d17959a8e369d92a3e402eaaa7a653b15c3a]">[bc81d17959a8e369d92a3e402eaaa7a653b15c3a]</a>)
   [<a href="/projects/32238/tickets/2605" title=
   "Ticket #2605">#2605</a> state:fixed-in-qa] Prevent unnecessary
   name mangling of .app bundle name. <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/bc81d17959a8e369d92a3e402eaaa7a653b15c3a" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/bc81d17959a8e369d92a3e402eaaa7a653b15c3a</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/bc81d17959a8..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/bc81d17959a8...</a></a></p></div></li>
<li>Alan Leard 2011-04-15

    <div><h3>Successful iOS Simulator test on 01/26/2011</h3>
    <p>Tested both test applications in simulator and watched log for
    proper output.</p>
    <ul>
    <li>iOS Simulator Results: <em>Proper localization output on both
    applications</em></li>
    </ul>
    <hr>
    <p>Mobile SDK version: 1.6.0 (01/26/11 18:53 bd12917...)</p>
    <p>Simulator Version: 4.2 (235)</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2605.json">JSON Source</a></p>