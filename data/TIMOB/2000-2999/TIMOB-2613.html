---
title: "[TIMOB-2613] framework accessing /mnt/sdcard and fails on devices without sd card."
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-03-11T22:24:52.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.5.0, Release 1.8.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-01, Release 2.0.0, Release 1.8.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>module_filesystem, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Matt Schmulen</td></tr>
<tr><th>Assignee</th><td>Allen Yeung</td></tr>
<tr><th>Created</th><td>2011-04-15T03:24:47.000+0000</td></tr>
<tr><th>Updated</th><td>2012-03-11T22:24:52.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>When accessing the remote portrait url, the low level framework
is not using /data on the local disk but rather always using
/mnt/sdcard (even though there is no SD card mounted) when caching
the image data.</p>
<p><a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/59711" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/59711</a>"><a href="http://developer.appcelerator.com/helpdesk/view/59711" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/59711</a></a></p></div>

<h3>Comments</h3>

<ol>
<li>Dawson Toth 2011-04-15

   <div><h1>Sample Code</h1>
   <pre>
   <code class=
   "javascript">var win = Ti.UI.createWindow({ backgroundColor: '#fff' });
   
   win.add(Ti.UI.createImageView({
       top: 0, left: 0, width: 100, height: 50,
       image: '<a href="http://www.appcelerator.com/wp-content/themes/appcelerator/img/APPC_logo.png" rel="nofollow" target="_blank">http://www.appcelerator.com/wp-content/themes/appcelerator/img/APPC_logo.png</a>'
   }));
   
   win.open();</code>
   </pre>
   <h1>Steps to Reproduce with Sample</h1>
   <ol>
   <li>Run the app. You'll see the Appcelerator logo.<br></li>
   <li>Close the app.<br></li>
   <li>Unmount the SDCard on the simulator / phone.<br></li>
   <li>Run the app. You'll see a white screen.</li>
   </ol>
   <h1>Log</h1>
   <p>No exceptions were shown in the trace level log.</p>
   <pre>
   <code>[TRACE] I/TiRootActivity( 304): (Thread-17) [2,2] eval app.js
   [TRACE] D/KrollContext( 304): (kroll$3) [4,6] Running evaluated script: app://app.js
   [TRACE] I/ActivityManager( 60): Displayed activity com.dawson.playground2/.Playground2Activity: 1541 ms (total 1541 ms)</code>
   </pre>
   <h1>Tested On</h1>
   <p>Titanium Mobile 1.6.0 (02/01/11 17:45 a632082...)<br>
   BROKEN on Android Simulator 2.2</p></div></li>
<li>Rob Gabbard 2011-09-01

   Is there any update on a fix for this? This is pretty major and I can't release!</li>
<li>Ruben Fonseca 2011-09-28

   I'm suffering hard from exactly this problem, this is pretty huge, please fix this!</li>
<li>Allen Yeung 2011-10-05

   <code><pre>
   Titanium.UI.setBackgroundColor('#000');
   
   var tabGroup = Titanium.UI.createTabGroup();
   
   var webview = Ti.UI.createImageView({
       top: 0, left: 0, width: 100, height: 50,
       image: '<a href="http://www.appcelerator.com/wp-content/themes/appcelerator/img/APPC_logo.png" rel="nofollow" target="_blank">http://www.appcelerator.com/wp-content/themes/appcelerator/img/APPC_logo.png</a>'
   });
   
   var win1 = Titanium.UI.createWindow({  
       title:'Tab 1',
       backgroundColor:'#fff'
   });
   
   win1.add(webview);
   
   var tab1 = Titanium.UI.createTab({  
       icon:'KS_nav_views.png',
       title:'Tab 1',
       window:win1
   });
   
   var win2 = Titanium.UI.createWindow({  
       title:'Tab 2',
       backgroundColor:'#fff'
   });
   var tab2 = Titanium.UI.createTab({  
       icon:'KS_nav_ui.png',
       title:'Tab 2',
       window:win2
   });
   
   var label2 = Ti.UI.createImageView({
       top: 0, left: 0, width: 100, height: 50,
       image: '<a href="http://www.appcelerator.com/wp-content/themes/appcelerator/img/APPC_logo.png" rel="nofollow" target="_blank">http://www.appcelerator.com/wp-content/themes/appcelerator/img/APPC_logo.png</a>'
   });
   
   win2.add(label2);
   
   tabGroup.addTab(tab1);
   tabGroup.addTab(tab2);  
   
   tabGroup.open();
   </pre></code>
   
   There are three scenarios that need to be tested for Timob-2613
   
   With SD card mounted
   
   1. Verify that sd card is mounted 
   2. Launch app and verify the icon appears
   3. Confirm that the images are stored in the correct location: /mnt/sdcard/Android/data/<appid>/cache/_tmp/remote-cache
   
   Without SD card
   
   1. Verify that sd card is unmounted
   2. Launch app and verify the icon appears
   3. Confirm that the images are stored in the correct location (should be internal storage): /data/data/<appid>/cache/_tmp/remote-cache
   
   Remove SD card while app is running
   
   1. Verify that sd card is mounted 
   2. Launch app and verify the icon appears
   3. Go to settings and unmount sd card
   4. Hold home button and go back to your app
   5. Click on the second tab, and verify that the image appears</li>
<li>Michael Pettiford 2011-12-10

   When testing this with 1.8.0.1RC1 I am not getting the remote-image-cache directory. </li>
<li>Marshall Culpepper 2011-12-27

   @Michael can you provide more details? Which test specifically did the remote-image-cache directory fail to show in? Can you test this again against the GA? I'm targetting this as tbs-1.8.1 until we can verify if this was fixed or not.</li>
<li>Opie Cyrus 2011-12-30

   updating sprint till issue can be confirmed or not.</li>
<li>Allen Yeung 2012-01-04

   Just tested this in the master branch, and confirmed that it is working. Note that I had to test the "without sd card" and "remove sd card while app is running" scenarios with an emulator since I didn't have read permissions for the data directory on my test phone.</li>
<li>Marshall Culpepper 2012-01-10

   This was confirmed again by Allen, resolving</li>
<li>Natalie Huynh 2012-01-19

    Tested with 1.9.0.v20120119110134 with Droid 3 (2.3.4) for Step 2 from Allen, need to ran on Emulator to confirm the files in /data/data/...</li>
</ol>


<p><a href="/TIMOB/TIMOB-2613.json">JSON Source</a></p>