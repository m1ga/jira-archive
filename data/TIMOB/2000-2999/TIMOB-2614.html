---
title: "[TIMOB-2614] JSON.stringify failing for droid"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:59:36.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M05</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect, release-1.6.0, reported-1.5.1</td></tr>
<tr><th>Reporter</th><td>Andreas sandberg</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:24:48.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:59:36.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>With droid on 1.5.1 the stringify function seems to be returning
inconsistent results. Everything works as expected with iphone.</p>
<p>var r2 = JSON.stringify( {'0':'asf'} );<br>
Ti.API.error("Rest data: " + r2);<br>
//Rest data: {"0":null}</p>
<p>var r3 = JSON.stringify(['abc','def'] );<br>
Ti.API.error("Rest data: " + r3);<br>
//Rest data: ["abc", "def"]</p>
<p>var o = {'def':'abc'};<br>
var r4 = JSON.stringify( o );<br>
Ti.API.error("Rest data: " + r4);<br>
//Rest data: {<a href="">def</a></p>
<p>var user ='me';<br>
var pass = 'mypass';<br>
var enc = 'encoded';<br></p>
<p>var credentials = {'user_name':user,'password':pass,'encryption'
: enc};<br>
var restData =
JSON.stringify({'0':credentials,'1':'mobile','2':{'name_value_list':{}}});<br>
Ti.API.error("Rest data: " + restData);<br>
//Rest data: {"2":null,"1":null,"0":null}</p>
<p>var credentials = {'user_name':user,'password':pass,'encryption'
: enc};<br>
var tmp =
{'0':credentials,'1':'mobile','2':{'name_value_list':{}}};<br>
var restData = JSON.stringify(tmp);<br>
Ti.API.error("Rest data: " + restData);<br>
//Rest data: {"2":null,"1":null,"0":null}</p></div>

<h3>Comments</h3>

<ol>
<li>Don Thorp 2011-04-15

   <div><p>@Matt Will you create a unit test for this. It should apply to
   both platforms.</p></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/4665727d92384c4144283c114a46268250f9ac87"
   title=
   "Changeset [4665727d92384c4144283c114a46268250f9ac87]">[4665727d92384c4144283c114a46268250f9ac87]</a>)
   check both string and integer types from Rhino, fixing
   Object-&gt;KrollDict conversion and JSON conversion [<a href=
   "/projects/32238/tickets/2614" title="Ticket #2614">#2614</a>
   state:fixed-in-qa]<br>
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/4665727d92384c4144283c114a46268250f9ac87" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/4665727d92384c4144283c114a46268250f9ac87</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/4665727d9238..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/4665727d9238...</a></a></p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p><a href="/projects/32238/changesets/INFO" title=
   "Changeset [INFO]">[INFO]</a> Titanium SDK version: 1.6.0 (01/13/11
   08:11 7ca73a3) G1 (1.6) em (2.1) and droid1 (2.2.1), added to qa
   tests</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2614.json">JSON Source</a></p>