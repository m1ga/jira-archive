---
title: "[TIMOB-2658] Crash on app resume"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:59:44.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M02</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>crash, ios, release-1.6.0</td></tr>
<tr><th>Reporter</th><td>Stephen Tramer</td></tr>
<tr><th>Assignee</th><td>Stephen Tramer</td></tr>
<tr><th>Created</th><td>2011-04-15T03:26:09.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:59:44.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Under certain (very rare) circumstances, apps will crash upon
resume. This appears to be because in iOS 4.0, an app may still be
in the "terminating" state when it is re-resumed if the system
determined that it should be shut down. If the app is locked and
waiting on the main thread for a response, this may cause the OS to
terminate the app for not responding in time when resuming.</p>
<p>The issue appears to come from -[AnalyticsModule shutdown:],
where an HTTP request is scheduled on the main thread. Marking
medium because it's such a weird corner case and hard to
reproduce.</p>
<p>Bug may not be reproducible enough to reliably test a fix. This
one is 100% crash log.</p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-2658_18186/log1">log1</td></td><td>2011-04-15T03:26:09.000+0000</td><td>25526</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-2658_18187/log2">log2</td></td><td>2011-04-15T03:26:10.000+0000</td><td>22558</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-2658_18188/orientation_2010-12-20-145419_the-last-unicorn.crash">orientation_2010-12-20-145419_the-last-unicorn.crash</td></td><td>2011-04-15T03:26:10.000+0000</td><td>24163</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Damien Elmes 2011-04-15

   <div><p>I've seen this issue pop up a number of times in my users' crash
   logs. My app has analytics disabled, so that doesn't seem to be the
   sole cause. At the time it looked like the app was freezing in
   redraw code, so it's possible my users won't see this once I put
   out a new version based on Ti 1.5.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>If you would be able to provide crash logs that would be
   extremely helpful. If you can symbolize them first at all, that
   would be great. The instructions here indicate how to do that:</p>
   <p><a href=
   "<a href="http://furbo.org/2008/08/08/symbolicatifination/" rel="nofollow" target="_blank">http://furbo.org/2008/08/08/symbolicatifination/</a>"><a href="http://furbo.org/2008/08/08/symbolicatifination/" rel="nofollow" target="_blank">http://furbo.org/2008/08/08/symbolicatifination/</a></a></p></div></li>
<li>Damien Elmes 2011-04-15

   <div><p>Here's one I have on hand.</p></div></li>
<li>Damien Elmes 2011-04-15

   <div><p>And not sure if this is related or a separate issue, but from
   the same user</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>These seem to have a different underlying cause, but if these
   issues persist after an upgrade to 1.5.0, please file a ticket for
   them. There were a large number of changes to the view drawing
   system that may have fixed these issues.</p></div></li>
<li>Damien Elmes 2011-04-15

   <div><p>yep, thought as much. I'll let you know if they crop up again
   after I ship with 1.5.</p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/3165d74ad25b899f6d820b2ca76352fe13d9001a"
   title=
   "Changeset [3165d74ad25b899f6d820b2ca76352fe13d9001a]">[3165d74ad25b899f6d820b2ca76352fe13d9001a]</a>)
   [<a href="/projects/32238/tickets/2658" title=
   "Ticket #2658">#2658</a> state:fixed-in-qa] Speed up shutdown
   analytics events by reducing timeout. <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/3165d74ad25b899f6d820b2ca76352fe13d9001a" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/3165d74ad25b899f6d820b2ca76352fe13d9001a</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/3165d74ad25b..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/3165d74ad25b...</a></a></p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>not much I can do about this one, closing</p></div></li>
<li>Damien Elmes 2011-04-15

   <div><p>Stephen: I haven't seen log1 pop up again, but I'm still getting
   log2 on 1.5.1. I created a helpdesk ticket which includes new logs
   with full symbols, and it appears to be a deadlock in NSCondition:
   <a href=
   "<a href="http://developer.appcelerator.com/helpdesk/view/66761" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/66761</a>"><a href="http://developer.appcelerator.com/helpdesk/view/66761" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/66761</a></a></p></div></li>
<li>Stephen Tramer 2011-04-15

    <div><p>Damien, we're aware that there are some deadlock problems with
    certain UI operations right now, and we're trying to track all of
    them down. If you can create a new bug to track this issue and
    include the HD link/crash logs with it I would appreciate it.</p></div></li>
<li>bowman9991 2011-04-15

    <div><p>Getting identical issues described in this support ticket:<br>
    <a href=
    "<a href="http://developer.appcelerator.com/helpdesk/view/76350" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/76350</a>"><a href="http://developer.appcelerator.com/helpdesk/view/76350" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/76350</a></a></p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2658.json">JSON Source</a></p>