---
title: "[TIMOB-2667] Problem displaying image from Google Maps API (Android)"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T01:59:45.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M07</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect, release-1.5.2, release-1.6.0, reported-1.5.1</td></tr>
<tr><th>Reporter</th><td>Kevin Whinnery</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:26:25.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T01:59:45.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>On the emulators I have tried (1.5.1 on APIs 2.2, 2.1, and 1.6)
the following code is causing a crash:</p>
<pre>
<code>var window = Titanium.UI.createWindow({fullscreen: false});
 
var imageMap = Titanium.UI.createImageView({
    image: "<a href="http://maps.google.com/maps/api/staticmap?center=11.5558762589" rel="nofollow" target="_blank">http://maps.google.com/maps/api/staticmap?center=11.5558762589</a>,104.921697935&amp;zoom=13&amp;size=250x70&amp;maptype=roadmap&amp;markers=color:green|11.5558762589,104.921697935&amp;sensor=false",
    height: 90,
    width: 200,
    borderColor: "#FFF"
});

window.add(imageMap);
window.open();</code>
</pre>
<p>Paste in an app.js file to recreate the error. Image seems to
load up fine in the browser.</p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-2667_18189/trace.txt">trace.txt</td></td><td>2011-04-15T03:26:25.000+0000</td><td>98349</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Don Thorp 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/eadb8ad1b68d46534890494700a80fe4b2bccc09"
   title=
   "Changeset [eadb8ad1b68d46534890494700a80fe4b2bccc09]">[eadb8ad1b68d46534890494700a80fe4b2bccc09]</a>)
   [<a href="/projects/32238/tickets/2667" title=
   "Ticket #2667">#2667</a> state:fixed-in-qa] There is an issue
   somewhere in the Android network stack that is sending a null URI
   to the cache request. All we can do is work around this and not
   crash when given bad data. <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/eadb8ad1b68d46534890494700a80fe4b2bccc09" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/eadb8ad1b68d46534890494700a80fe4b2bccc09</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/eadb8ad1b68d..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/eadb8ad1b68d...</a></a></p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/f65c52c40591b337a7a5fdb04023ccafc086944f"
   title=
   "Changeset [f65c52c40591b337a7a5fdb04023ccafc086944f]">[f65c52c40591b337a7a5fdb04023ccafc086944f]</a>)
   [<a href="/projects/32238/tickets/2667" title=
   "Ticket #2667">#2667</a> state:fixed-in-qa] There is an issue
   somewhere in the Android network stack that is sending a null URI
   to the cache request. All we can do is work around this and not
   crash when given bad data. <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/f65c52c40591b337a7a5fdb04023ccafc086944f" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/f65c52c40591b337a7a5fdb04023ccafc086944f</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/f65c52c40591..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/f65c52c40591...</a></a></p></div></li>
<li>Abraham 2011-04-15

   <div><p>So what exactly does this mean? What is the fix?</p></div></li>
<li>Jayme 2011-04-15

   <div><p>Guys I've seen several posts related to this saying this is
   fixed, can we get an update as to when this will be available?
   Having an android app blow up when I load images for my users and
   other business objects is a big problem with getting Titanium
   adoption going at my employer.</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>It's available in both the 1.5.2 and 1.6.0 CI builds. Look in
   the guides section for Continuous Integration.</p></div></li>
<li>Jayme 2011-04-15

   <div><p>I asked about this issue during this morning's Webinar that your
   company did and was told to look at the daily builds, so I will
   certainly do that. Thanks for the response and all your hard work!
   You guys really have an amazing product.</p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>this renders the map in <a href=
   "/projects/32238/changesets/INFO" title=
   "Changeset [INFO]">[INFO]</a> Titanium SDK version: 1.5.2 (01/10/11
   08:22 682e79e) droid 1 (2.2.1) and 2.2 sim, but when using Titanium
   SDK version: 1.6.0 (01/10/11 08:25 3452f06), it failed to render
   (white square) adb logcat shows:</p>
   <p>D/KrollContext( 365): (kroll$3) [5492,8708] Running evaluated
   script: app://folder/2667.js<br>
   I/ActivityManager( 60): Starting activity: Intent {
   cmp=com.appcelerator.QAtests/org.appcelerator.titanium.TiActivity
   (has extras) }<br>
   I/ActivityManager( 60): Displayed activity
   com.appcelerator.QAtests/org.appcelerator.titanium.TiActivity: 427
   ms (total 427 ms)<br>
   D/dalvikvm( 365): GC_FOR_MALLOC freed 6747 objects / 386072 bytes
   in 161ms<br>
   W/System.err( 365): java.net.URISyntaxException: Illegal character
   in query at index 132: <a href=
   "<a href="http://maps.google.com/maps/api/staticmap?center=11.5558762589" rel="nofollow" target="_blank">http://maps.google.com/maps/api/staticmap?center=11.5558762589</a>,104.921697935&amp;zoom=13&amp;size=250x70&amp;maptype=roadmap&amp;markers=color:green|11.5558762589,104.921697935&amp;sensor=false">
   <a href="http://maps.google.com/maps/api/staticmap?center=11.5558762589" rel="nofollow" target="_blank">http://maps.google.com/maps/api/staticmap?center=11.5558762589</a>,104....</a><br>
   W/System.err( 365): at
   java.net.URI$Helper.validateQuery(URI.java:458)<br>
   W/System.err( 365): at
   java.net.URI$Helper.parseURI(URI.java:360)<br>
   W/System.err( 365): at
   java.net.URI$Helper.access$100(URI.java:302)<br>
   W/System.err( 365): at java.net.URI.(URI.java:87)<br>
   W/System.err( 365): at
   ti.modules.titanium.ui.widget.TiUIImageView.setImage(TiUIImageView.java:486)<br>
   W/System.err( 365): at
   ti.modules.titanium.ui.widget.TiUIImageView.processProperties(TiUIImageView.java:563)<br>
   W/System.err( 365): at
   org.appcelerator.kroll.KrollProxy.setModelListener(KrollProxy.java:462)<br>
   W/System.err( 365): at
   org.appcelerator.titanium.proxy.TiViewProxy.realizeViews(TiViewProxy.java:371)<br>
   W/System.err( 365): at
   org.appcelerator.titanium.proxy.TiViewProxy.handleGetView(TiViewProxy.java:364)<br>
   W/System.err( 365): at
   org.appcelerator.titanium.proxy.TiViewProxy.getView(TiViewProxy.java:348)<br>
   W/System.err( 365): at
   org.appcelerator.titanium.proxy.TiViewProxy.realizeViews(TiViewProxy.java:377)<br>
   W/System.err( 365): at
   ti.modules.titanium.ui.WindowProxy.handleMessage(WindowProxy.java:64)<br>
   W/System.err( 365): at
   android.os.Handler.dispatchMessage(Handler.java:95)<br>
   W/System.err( 365): at android.os.Looper.loop(Looper.java:123)<br>
   W/System.err( 365): at
   android.app.ActivityThread.main(ActivityThread.java:4627)<br>
   W/System.err( 365): at java.lang.reflect.Method.invokeNative(Native
   Method)<br>
   W/System.err( 365): at
   java.lang.reflect.Method.invoke(Method.java:521)<br>
   W/System.err( 365): at
   com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)<br>
   W/System.err( 365): at
   com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)<br>
   W/System.err( 365): at dalvik.system.NativeStart.main(Native
   Method)<br>
   W/TiAnalyticsSvc( 365): (Thread-10) [1060,9768] Stopping Analytics
   Service<br>
   D/dalvikvm( 295): GC_EXPLICIT freed 782 objects / 55696 bytes in
   71ms<br>
   D/dalvikvm( 306): GC_EXPLICIT freed 2027 objects / 144232 bytes in
   88ms<br>
   D/dalvikvm( 116): GC_EXPLICIT freed 197 objects / 10472 bytes in
   74ms<br>
   D/SntpClient( 60): request time failed: java.net.SocketException:
   Address family not supported by protocol</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>Moving to M07 so I can look at it.</p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>As per Don, the issue I reported above (illegal char) is due to
   the change in the way we handle "magic url's" replacing "|" with
   "%7C" in the url and all is well.</p>
   <p>closing against nexus s (4.3.1) and <a href=
   "/projects/32238/changesets/INFO" title=
   "Changeset [INFO]">[INFO]</a> Titanium SDK version: 1.6.0 (01/24/11
   08:14 e1cb22a)</p></div></li>
<li>Nikolai Derzhak 2011-04-15

    rollback wrong update</li>
</ol>


<p><a href="/TIMOB/TIMOB-2667.json">JSON Source</a></p>