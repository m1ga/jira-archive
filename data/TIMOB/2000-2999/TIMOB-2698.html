---
title: "[TIMOB-2698] Support for \"Accept-Encoding\",\"gzip,deflate\""
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-11-15T07:19:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.6.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-43, Release 1.8.0.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, feature</td></tr>
<tr><th>Reporter</th><td>Ralf Pfeiffer</td></tr>
<tr><th>Assignee</th><td>Hieu Pham</td></tr>
<tr><th>Created</th><td>2011-04-15T03:27:21.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-16T22:23:52.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>It appears that gzip headers arent currently supported.</p>
<p>xhr.setRequestHeader("Accept-Encoding","gzip,deflate");</p>
<p>Any chance of adding this? Thx!</p></div>

<h3>Comments</h3>

<ol>
<li>kevinwhinnery 2011-04-15

   <div><p><a href=
   "<a href="http://stackoverflow.com/questions/1573391/android-http-communication-should-use-accept-encoding-gzip" rel="nofollow" target="_blank">http://stackoverflow.com/questions/1573391/android-http-communication-should-use-accept-encoding-gzip</a>">
   Possibly useful thread</a> regarding supporting gzip compression on
   Android.</p></div></li>
<li>Jon Alter 2011-06-17

   <h4>Associated Helpdesk Ticket</h4>
   <a href="http://appc.me/c/APP-292662" rel="nofollow" target="_blank">http://appc.me/c/APP-292662</a></li>
<li>Jeff Haynie 2011-07-14

   Bump. Would be a nice addition in 1.8</li>
<li>Taazza GO 2011-09-15

   Folks this feature has been requested for over 6 months now. Gzipping on a slower network is key. Any chance to add this on in 1.8?</li>
<li>Rick Blalock 2011-10-18

   Any news on this is possible?</li>
<li>Rick Blalock 2011-10-25

   Would like to know if this is possible.</li>
<li>Hieu Pham 2011-10-26

   Steps to test:
   1. Run the snippet
   <code><pre>
   Ti.UI.backgroundColor = '#dddddd';
    
   var url = "<a href="https://raw.github.com/appcelerator/Documentation-Examples/master/HTTPClient/data/json.txt" rel="nofollow" target="_blank">https://raw.github.com/appcelerator/Documentation-Examples/master/HTTPClient/data/json.txt</a>";
   var win = Ti.UI.createWindow();
   var table = Ti.UI.createTableView();
   var tableData = [];
   var json, fighters, fighter, i, row, nameLabel, nickLabel;
    
   var xhr = Ti.Network.createHTTPClient({
       onload: function() {
       // Ti.API.debug(this.responseText);
    
       json = JSON.parse(this.responseText);
       for (i = 0; i &lt; json.fighters.length; i++) {
           fighter = json.fighters[i];
           row = Ti.UI.createTableViewRow({
               height:'60dp'
           });
           nameLabel = Ti.UI.createLabel({
               text:fighter.name,
               font:{
                   fontSize:'24dp',
               fontWeight:'bold'
           },
           height:'auto',
           left:'10dp',
           top:'5dp',
           color:'#000',
           touchEnabled:false
           });
           nickLabel = Ti.UI.createLabel({
           text:'"' + fighter.nickname + '"',
           font:{
               fontSize:'16dp'
           },
           height:'auto',
           left:'15dp',
           bottom:'5dp',
           color:'#000',
           touchEnabled:false
           });
    
           row.add(nameLabel);
           row.add(nickLabel);
           tableData.push(row);
           }
    
       table.setData(tableData);
       },
       onerror: function(e) {
       Ti.API.debug("STATUS: " + this.status);
       Ti.API.debug("TEXT:   " + this.responseText);
       Ti.API.debug("ERROR:  " + e.error);
       alert('There was an error retrieving the remote data. Try again.');
       },
       timeout:5000
   });
   
   
   xhr.open("GET", url);
   xhr.setRequestHeader("Accept-Encoding","gzip,deflate"); 
   xhr.send();
    
   win.add(table);
   win.open();
   </pre></code>
   2. Run the snippet with and without this line and make sure content is identical
   <code><pre>
   xhr.setRequestHeader("Accept-Encoding", "gzip,deflate");
   </pre></code>
   3. Since the json file we're getting info from is very small, you would not see performance difference, which is the main reason for gzipping. Perhaps feed in a bigger json thats 100k-200k large.</li>
<li>Paul Dowsett 2011-10-30

   Keep up the good work on this, Hieu - it will be such a valuable addition.</li>
<li>Dawson Toth 2012-03-02

   I have evidence that this is working properly.
   
   1. Upload the following to a public folder in your Dropbox: ~/Library/Applucation\ Support/Titanium/mobilesdk/1.8.0.1/api.jsca Dropbox supports gzip, and api.jsca is a 14mb JSON text file.
   2. Drop the below snippet in an app.js and try it out. On my connection, I download the file in about 1.2 seconds.
   3. For testing iOS, comment out gzip support in the SDK itself and try again. Also remove the setRequestHeader in your app.js. I averaged 8 seconds per download.
   
   We can extrapolate from this that gzip is transmitting a payload 15% the size of the uncompressed version. (Results may vary depending upon the data being transmitted.)
   
   <code><pre>
   var start = new Date().getTime();
   var client = Ti.Network.createHTTPClient({
       onload: function () {
           alert('Request loaded in ' + (new Date().getTime() - start) + 'ms.');
       },
       onerror: function () {
           alert('Failed!');
       }
   });
   client.open('GET', '<a href="http://dl.dropbox.com/u/&lt" rel="nofollow" target="_blank">http://dl.dropbox.com/u/&lt</a>;YOUR USER ID&gt;/api.jsca');
   client.setRequestHeader('Accept-Encoding', 'gzip,deflate');
   client.send();
   </pre></code></li>
<li>carlo 2014-10-10

    it would be nice if 'Accept-Encoding: gzip,deflate' is added by default, because this is the behaviour when compiling for iOS</li>
<li>Lee Morris 2017-03-16

    Closing ticket as fixed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-2698.json">JSON Source</a></p>