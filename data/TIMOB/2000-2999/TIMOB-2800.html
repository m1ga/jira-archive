---
title: "[TIMOB-2800] iPhone : crash when trying to get a contact email (contacts synchronized)"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2011-04-15T03:29:54.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.7.0, Sprint 2011-11</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>contacts, defect, ios, rplist</td></tr>
<tr><th>Reporter</th><td>Guillaume</td></tr>
<tr><th>Assignee</th><td>Reggie Seagraves</td></tr>
<tr><th>Created</th><td>2011-04-15T03:29:49.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-03T06:37:06.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>When we synchronize contacts with external systems such as
google, the email labels are not set correctly.<br>
Instead of having 'home', 'work', 'other' labels, we get 'email'
emails.</p>
<p>Then if we get a contact using:</p>
<pre>
<code> selectedContact = Titanium.Contacts.getPeopleWithName(contactName);</code>
</pre>
<p>and then try to get the emails by doing :<br></p>
<pre>
<code> var emails = selectedContact[0].email;</code>
</pre>
Then, the app crashes.</div>

<h3>Comments</h3>

<ol>
<li>Pedro Enrique 2011-04-15

   <div><p>There is a HD ticket that encountered the same issue when using
   a MS Exchange contact.</p>
   <p>According to the crash log, it was using Ti SDK 1.5.1</p>
   <p><a href=
   "<a href="http://developer.appcelerator.com/helpdesk/view/68441" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/68441</a>"><a href="http://developer.appcelerator.com/helpdesk/view/68441" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/68441</a></a></p></div></li>
<li>tom quas 2011-04-15

   <div><p>This issue holds us from rolling out our app. Need access to
   email for address sync. Please prioritize accordingly.</p></div></li>
<li>John Hass 2011-04-15

   <div><p>Any word on this ticket? It has put our development at a
   complete halt.</p></div></li>
<li>tom quas 2011-04-15

   <div><p>I desperately need a solution, too. Filing this once more on the
   helpdesk...</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>Requires more details. May not be a bug; could just be a
   developer issue where Contacts is not being used correctly.</p></div></li>
<li>Guillaume 2011-04-15

   <div><p>Hi,<br>
   What kind of details would you need ? We can try to provide more
   info.<br>
   Basically, the exact same code works when retrieving phones. It
   does work with emails when contacts have not been synchronised with
   external systems (and thus with the correct labels). It does not
   when the email label is "email".</p>
   <p>let us know.<br>
   Thanks for working on this.</p></div></li>
<li>tom quas 2011-04-15

   <div><p>I just tested w/ Kitchensink, here is what happens:</p>
   <p>Scenario <a href="/projects/32238/tickets/1" title=
   "Ticket #1">#1</a>: Have a contact with this (internationally
   valid) mobile phone number format: 00491702345678</p>
   <p>Scenario <a href="/projects/32238/tickets/2" title=
   "Ticket #2">#2</a>: Have a contact with this (internationally
   valid) mobile phone number format: +491702345678</p>
   <p>On iOS, go to KitchenSink &gt; Contacts &gt; Contacts
   picker.<br>
   Turn off 'addresss only'.<br>
   Click 'show picker'</p>
   <p>Whereas scenario <a href="/projects/32238/tickets/2" title=
   "Ticket #2">#2</a> works, <a href="/projects/32238/tickets/1"
   title="Ticket #1">#1</a> bombs with the exception below:</p>
   <p><a href="/projects/32238/changesets/ERROR" title=
   "Changeset [ERROR]">[ERROR]</a> The application has crashed with an
   unhandled exception. Stack trace: 0 CoreFoundation 0x022d9bcc
   <strong>exceptionPreprocess + 156<br>
   1 libobjc.A.dylib 0x0242e5c2 objc_exception_throw + 47<br>
   2 CoreFoundation 0x02292628 +[NSException raise:format:arguments:]
   + 136<br>
   3 CoreFoundation 0x0229259a +[NSException raise:format:] + 58<br>
   4 QuartzCore 0x0190c96a
   <em>ZL18CALayerSetPositionP7CALayerRKN2CA4Vec2IdEEb + 177<br>
   5 QuartzCore 0x0190c8b5 -[CALayer setPosition:] + 42<br>
   6 QuartzCore 0x0190c7cc -[CALayer setFrame:] + 763<br>
   7 UIKit 0x008c1307 -[UIView(Geometry) setFrame:] + 255<br>
   8 UIKit 0x009aca68 -[UILabel setFrame:] + 262<br>
   9 AddressBookUI 0x0134615d -[ABPersonTableViewDataSource
   reloadNoValueLabelAnimated:] + 645<br>
   10 AddressBookUI 0x0133e0a6 -[ABPersonTableViewDataSource
   reloadDataIncludingHeaderView:invalidatePropertyData:] + 318<br>
   11 AddressBookUI 0x0133df62 -[ABPersonTableViewDataSource
   reloadDataIncludingHeaderView:] + 50<br>
   12 AddressBookUI 0x0132878d -[ABPersonViewControllerHelper
   prepareViewWithDisplayedProperties:person:allowActions:] + 1195<br>
   13 AddressBookUI 0x01322cee -[ABPersonViewControllerHelper
   loadViewWithDisplayedProperties:person:allowDeletion:allowActions:]
   + 68<br>
   14 AddressBookUI 0x01319f1a -[ABPersonViewController loadView] +
   144<br>
   15 UIKit 0x009395e3 -[UIViewController view] + 56<br>
   16 UIKit 0x00937a57 -[UIViewController contentScrollView] + 42<br>
   17 UIKit 0x00948201 -[UINavigationController</em>
   computeAndApplyScrollContentInsetDeltaForViewController:] + 48<br>
   18 UIKit 0x00946831 -[UINavigationController
   <em>layoutViewController:] + 43<br>
   19 UIKit 0x00947b4c -[UINavigationController</em>
   startTransition:fromViewController:toViewController:] + 524<br>
   20 UIKit 0x00942606 -[UINavigationController
   <em>startDeferredTransitionIfNeeded] + 266<br>
   21 UIKit 0x0094983e -[UINavigationController
   pushViewController:transition:forceImmediate:] + 932<br>
   22 UIKit 0x009424a0 -[UINavigationController
   pushViewController:animated:] + 62<br>
   23 AddressBookUI 0x01312f79 -[ABPeoplePickerNavigationController
   pushViewController:animated:] + 162<br>
   24 AddressBookUI 0x01314828 -[ABPeoplePickerNavigationController
   showCardForPerson:withMemberCell:animate:forceDisableEditing:personViewController:]
   + 1338<br>
   25 AddressBookUI 0x01316d1d -[ABMembersViewController
   showCardForPerson:withMemberCell:animate:] + 282<br>
   26 AddressBookUI 0x012e7f09 -[ABMembersController
   abDataSource:selectedPerson:atIndexPath:withMemberCell:animate:] +
   89<br>
   27 AddressBookUI 0x01363754 -[ABMembersDataSource
   tableView:didSelectRowAtIndexPath:] + 214<br>
   28 UIKit 0x00901794 -[UITableView</em>
   selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] +
   1140<br>
   29 UIKit 0x008f7d50 -[UITableView
   _userSelectRowAtPendingSelectionIndexPath:] + 219<br>
   30 Foundation 0x0060a7f6</strong> NSFireDelayedPerform + 441<br>
   31 CoreFoundation 0x022bafe3
   <strong>CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION</strong>
   + 19<br>
   32 CoreFoundation 0x022bc594 <strong>CFRunLoopDoTimer + 1220<br>
   33 CoreFoundation 0x02218cc9</strong> CFRunLoopRun + 1817<br>
   34 CoreFoundation 0x02218240 CFRunLoopRunSpecific + 208<br>
   35 CoreFoundation 0x02218161 CFRunLoopRunInMode + 97<br>
   36 GraphicsServices 0x040ab268 GSEventRunModal + 217<br>
   37 GraphicsServices 0x040ab32d GSEventRun + 115<br>
   38 UIKit 0x0089a42e UIApplicationMain + 1160<br>
   39 KitchenSink 0x0000372c main + 362<br>
   40 KitchenSink 0x00002551 start + 53<br>
   2011-02-20 08:35:07.607 KitchenSink[37787:207]
   <strong><em>Terminating app due to uncaught exception
   'CALayerInvalidGeometry', reason: 'CALayer position contains NaN:
   [nan -0.5]'<br></em></strong> Call stack at first throw: ( 0
   CoreFoundation 0x022d9be9 <strong>exceptionPreprocess + 185<br>
   1 libobjc.A.dylib 0x0242e5c2 objc_exception_throw + 47<br>
   2 CoreFoundation 0x02292628 +[NSException raise:format:arguments:]
   + 136<br>
   3 CoreFoundation 0x0229259a +[NSException raise:format:] + 58<br>
   4 QuartzCore 0x0190c96a
   <em>ZL18CALayerSetPositionP7CALayerRKN2CA4Vec2IdEEb + 177<br>
   5 QuartzCore 0x0190c8b5 -[CALayer setPosition:] + 42<br>
   6 QuartzCore 0x0190c7cc -[CALayer setFrame:] + 763<br>
   7 UIKit 0x008c1307 -[UIView(Geometry) setFrame:] + 255<br>
   8 UIKit 0x009aca68 -[UILabel setFrame:] + 262<br>
   9 AddressBookUI 0x0134615d -[ABPersonTableViewDataSource
   reloadNoValueLabelAnimated:] + 645<br>
   10 AddressBookUI 0x0133e0a6 -[ABPersonTableViewDataSource
   reloadDataIncludingHeaderView:invalidatePropertyData:] + 318<br>
   11 AddressBookUI 0x0133df62 -[ABPersonTableViewDataSource
   reloadDataIncludingHeaderView:] + 50<br>
   12 AddressBookUI 0x0132878d -[ABPersonViewControllerHelper
   prepareViewWithDisplayedProperties:person:allowActions:] + 1195<br>
   13 AddressBookUI 0x01322cee -[ABPersonViewControllerHelper
   loadViewWithDisplayedProperties:person:allowDeletion:allowActions:]
   + 68<br>
   14 AddressBookUI 0x01319f1a -[ABPersonViewController loadView] +
   144<br>
   15 UIKit 0x009395e3 -[UIViewController view] + 56<br>
   16 UIKit 0x00937a57 -[UIViewController contentScrollView] + 42<br>
   17 UIKit 0x00948201 -[UINavigationController</em>
   computeAndApplyScrollContentInsetDeltaForViewController:] + 48<br>
   18 UIKit 0x00946831 -[UINavigationController
   <em>layoutViewController:] + 43<br>
   19 UIKit 0x00947b4c -[UINavigationController</em>
   startTransition:fromViewController:toViewController:] + 524<br>
   20 UIKit 0x00942606 -[UINavigationController
   <em>startDeferredTransitionIfNeeded] + 266<br>
   21 UIKit 0x0094983e -[UINavigationController
   pushViewController:transition:forceImmediate:] + 932<br>
   22 UIKit 0x009424a0 -[UINavigationController
   pushViewController:animated:] + 62<br>
   23 AddressBookUI 0x01312f79 -[ABPeoplePickerNavigationController
   pushViewController:animated:] + 162<br>
   24 AddressBookUI 0x01314828 -[ABPeoplePickerNavigationController
   showCardForPerson:withMemberCell:animate:forceDisableEditing:personViewController:]
   + 1338<br>
   25 AddressBookUI 0x01316d1d -[ABMembersViewController
   showCardForPerson:withMemberCell:animate:] + 282<br>
   26 AddressBookUI 0x012e7f09 -[ABMembersController
   abDataSource:selectedPerson:atIndexPath:withMemberCell:animate:] +
   89<br>
   27 AddressBookUI 0x01363754 -[ABMembersDataSource
   tableView:didSelectRowAtIndexPath:] + 214<br>
   28 UIKit 0x00901794 -[UITableView</em>
   selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] +
   1140<br>
   29 UIKit 0x008f7d50 -[UITableView
   _userSelectRowAtPendingSelectionIndexPath:] + 219<br>
   30 Foundation 0x0060a7f6</strong> NSFireDelayedPerform + 441<br>
   31 CoreFoundation 0x022bafe3
   <strong>CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION</strong>
   + 19<br>
   32 CoreFoundation 0x022bc594 <strong>CFRunLoopDoTimer + 1220<br>
   33 CoreFoundation 0x02218cc9</strong> CFRunLoopRun + 1817<br>
   34 CoreFoundation 0x02218240 CFRunLoopRunSpecific + 208<br>
   35 CoreFoundation 0x02218161 CFRunLoopRunInMode + 97<br>
   36 GraphicsServices 0x040ab268 GSEventRunModal + 217<br>
   37 GraphicsServices 0x040ab32d GSEventRun + 115<br>
   38 UIKit 0x0089a42e UIApplicationMain + 1160<br>
   39 KitchenSink 0x0000372c main + 362<br>
   40 KitchenSink 0x00002551 start + 53<br>
   ) terminate called after throwing an instance of 'NSException'<br>
   <a href="/projects/32238/changesets/INFO" title=
   "Changeset [INFO]">[INFO]</a> Application has exited from
   Simulator</p></div></li>
<li>tom quas 2011-04-15

   <div><p>I guess that means that in addition to emails, phone number
   handling is broken, too.</p></div></li>
<li>Stephen Tramer 2011-04-15

   <div><p>This issue has actually been repeatedly reported with contacts
   at this point, meaning that it is in the queue to be fixed, but
   this additional information will be extremely helpful.</p></div></li>
<li>tom quas 2011-04-15

    <div><p>Ok, I got a crash log from a phone with approx. 1.800 contacts,
    synced frequently against an Exchange server. It seems to always
    crash in Thread 0 but Thread 9 has the relevant information in this
    case.</p></div></li>
<li>tom quas 2011-04-15

    <div><p>now, can we make this a tbs-1.6.1 issue, please? ;) seriously,
    my app depends on this stuff heavily. thx.</p></div></li>
<li>tom quas 2011-04-15

    <div><p>Stephen, from all projects I know, be it community or
    enterprise, a crash has never been considered 'low priority.' Can
    you give an ETA?</p></div></li>
<li>Alan Leard 2011-04-15

    <div><p>This user is also experiencing a crash when pulling contact
    information: <a href=
    "<a href="http://developer.appcelerator.com/helpdesk/view/76124" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/76124</a>"><a href="http://developer.appcelerator.com/helpdesk/view/76124" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/76124</a></a></p></div></li>
<li>johnvpataki 2011-04-15

    <div><p>I updated HD issue 76124 with more details about my scenario
    where contacts on the device crash when touching the 'address'
    property.</p></div></li>
<li>Stephen Tramer 2011-04-15

    <div><p>Duplicate of <a href="/projects/32238/tickets/2317" title=
    "Ticket #2317">#2317</a>.</p></div></li>
<li>Lee Morris 2017-03-03

    Closing issue due to time passed and irrelevance of the ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-2800.json">JSON Source</a></p>