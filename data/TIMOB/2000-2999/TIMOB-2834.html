---
title: "[TIMOB-2834] BarImage breaks Title text in navigation group"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-02-14T23:36:44.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.7.2, Sprint 2012-04, Release 2.0.0, Release 1.8.2</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>barimage, defect, ios, iphone, module_navgroup, parity, qe-testadded, reported-1.5.1, reported-1.6.0, title</td></tr>
<tr><th>Reporter</th><td>eddiemonge</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-04-15T03:30:38.000+0000</td></tr>
<tr><th>Updated</th><td>2012-03-04T22:20:19.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>If you have a barImage in a NavigationGroup, it deletes the
title Text on child windows, only after one child window is called.
The barImage works correctly on the parent and on the first child
window called but not subsequent child images</p>
<p>Code can be found at <a href=
"<a href="http://pastie.org/1461234" rel="nofollow" target="_blank">http://pastie.org/1461234</a>"><a href="http://pastie.org/1461234" rel="nofollow" target="_blank">http://pastie.org/1461234</a></a><br>
barTop.png needs to be placed in the Resources directory</p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-2834_18226/bartop.png">bartop.png</td></td><td>2011-04-15T03:30:38.000+0000</td><td>17494</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>kevinwhinnery 2011-04-15

   <div><p>Testing this example in 1.6.0 (<a href=
   "<a href="http://github.com/appcelerator/titanium_mobile/commit/1ef086793961881e31b5de3e0c99a20923d0296b" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium_mobile/commit/1ef086793961881e31b5de3e0c99a20923d0296b</a>">1/17/11</a>),
   the first label reliably opens the second window with the correct
   bar image. The second label opens a window, but the title and
   content are missing missing. From here, clicking either label will
   result in a missing title. As coded, this example would seem to be
   adding/opening windows correctly.</p></div></li>
<li>eddiemonge 2011-04-15

   <div><p>Some additional notes I have discovered:</p>
   <p>If you set the barImage on the parent window when the child
   opens and set the child to null, then reset the child when it
   closes, it works right.<br></p>
   <pre>
   <code class=
   "javascript">second.addEventListener('open', function() {<br>
   <br>
   
   
   </code>
   </pre>
   <pre>
   <code class="javascript"><code>first.barImage = 'barTop.png';
   second.barImage = null;</code></code>
   </pre>
   <pre>
   
   
   <br>
   });
   second.addEventListener('close', function()
   { second.barImage = 'barTop.png'; });
   
   <br>
   third.addEventListener('open', function() {
   
   </pre>
   <pre>
   <code>first.barImage = 'barTop.png';
   third.barImage = null;</code>
   </pre>
   <pre>
   
   
   <br>
   });
   third.addEventListener('close', function()
   { third.barImage = 'barTop.png'; });
   </pre></div></li>
<li>eddiemonge 2011-04-15

   <div><p>It almost seems like the barImage is created as a view and is
   then placed over the top bar view. The back button will still work
   even though you cant see it.</p></div></li>
<li>Pedro Enrique 2011-04-15

   <div><p>I am confirming that this bug still exist. Basically, when a
   navigation window is closed, the child window's barImage will be on
   top of the parent's navigation bar.</p>
   <p>The example provided above shows the bug. Please refer to
   Helpdesk ticket <a href=
   "<a href="http://developer.appcelerator.com/helpdesk/view/75181" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/75181</a>">75181</a></p></div></li>
<li>Rodrigo K Nascimetno 2011-04-15

   <div><p>Open /Library/Application
   Support/Titanium/mobilesdk/osx/1.6.1/iphone/Classes<br>
   Find line 778 with this comment: //[barImageView
   removeFromSuperview];<br>
   Remove slashes comment, example:</p>
   <p>-(void)_tabBeforeBlur { // Changed by <a href=
   "mailto:rodrigoknascimento@gmail.com">rodrigoknascimento@gmail.com</a>
   at 13 april 2011 - 10:35 (GMT -3) Brasil</p>
   <pre>
   <code>[barImageView removeFromSuperview];
   [super _tabBeforeBlur];</code>
   </pre>
   <p>}</p>
   <p>Delete "build" folder into your project and run simulator
   trought Titanium to recreate it.</p>
   <p>Have fun.</p></div></li>
<li>Rafael Kellermann Streit 2011-04-15

   <div><p>Thanks Rodrigo, that's very nice.</p></div></li>
<li>Blain Hamon 2011-06-23

   The code in the pastie is below (In case pastie expires the link)
   
   <code><pre>
   //Here's the first window...
   var first = Ti.UI.createWindow({
     backgroundColor:"#fff",
     title:"My App",
     barImage: 'barTop.png'
   });
   var label = Ti.UI.createLabel({ text: "poke me to open the next window",top:0,height:30 });
   first.add(label);
   
   var label2 = Ti.UI.createLabel({ text: "poke me to open the next window",top:40,height:30 });
   first.add(label2);
   
   //Here's the nav group that will hold them both...
   var navGroup = Ti.UI.iPhone.createNavigationGroup({
     window:first
   });
   
   //Here's a window we want to push onto the stack...
   var second = Ti.UI.createWindow({
     background:"#fff",
     title:"Child Window",
     barImage: 'barTop.png'
   });
   second.add(Ti.UI.createLabel({text:"Here's the child", color: '#000000'}));
   
   //Here's a window we want to push onto the stack...
   var third = Ti.UI.createWindow({
     background:"#fff",
     title:"Second Child Window",
     barImage: 'barTop.png'
   });
   second.add(Ti.UI.createLabel({text:"Here's the child", color: '#000000'}));
   
   //When the label on the first window receives a touch, open the second
   label.addEventListener("click", function(e) {
     navGroup.open(second);
   });
   
   //When the label on the first window receives a touch, open the second
   label2.addEventListener("click", function(e) {
     navGroup.open(third);
   });
   
   //This is the main window of the application
   var main = Ti.UI.createWindow();
   main.add(navGroup);
   main.open();
   </pre></code></li>
<li>Alan Vaghti 2011-07-07

   Passed as expected on iPhone running iOS 4.2.8 and iOS 3.1.2 as </li>
<li>Alan Vaghti 2011-07-07

   * also passed on iPad w/ iOS 4.3</li>
<li>Alan Vaghti 2011-08-29

    Fix seen in SDK 1.8.0.v20110817105307</li>
<li>Felipe Cypriano 2012-02-13

    I'm using Titanium Mobile 1.8.1 building with iOS SDK 5.0 and this bug still exists.
    
    IMO it should be reopened.</li>
<li>Thomas Huelbert 2012-02-13

    Felipe, can you please provide code that reproduces your findings? The code attached to this bug does not show any issues. Thanks!</li>
<li>Felipe Cypriano 2012-02-14

    Hi Thomas,
    
    I just realize that the code is a little different from the original. This is the reproducible code:
    
    <code><pre>
    //Here's the first window...
    var first = Ti.UI.createWindow({
      backgroundColor:"#fff",
      title:"My App",
      barImage: 'barTop.png'
    });
    var label = Ti.UI.createLabel({ text: "poke me to open the next window",top:0,height:30 });
    first.add(label);
    
    var label2 = Ti.UI.createLabel({ text: "poke me to open the next window",top:40,height:30 });
    
    //Here's the nav group that will hold them both...
    var navGroup = Ti.UI.iPhone.createNavigationGroup({
      window:first
    });
    
    //Here's a window we want to push onto the stack...
    var second = Ti.UI.createWindow({
      backgroundColor:"#fff",
      title:"Child Window",
      barImage: 'barTop.png'
    });
    second.add(label2);
    
    //Here's a window we want to push onto the stack...
    var third = Ti.UI.createWindow({
      backgroundColor:"#fff",
      title:"I'm a hidden title",
      barImage: 'barTop.png'
    });
    third.add(Ti.UI.createLabel({text:"Here's the child with hidden title", color: '#000000'}));
    
    //When the label on the first window receives a touch, open the second
    label.addEventListener("click", function(e) {
      navGroup.open(second);
    });
    
    //When the label on the first window receives a touch, open the second
    label2.addEventListener("click", function(e) {
      navGroup.open(third);
    });
    
    //This is the main window of the application
    var main = Ti.UI.createWindow();
    main.add(navGroup);
    main.open();
    </pre></code>
    
    The problem occur on the third window in the navigation group.</li>
<li>Devang Gandhi 2012-02-14

    Yea the bug Exists. Here is the sample code.
    <code><pre>
    function newWin()
    {
    	var newWin = Ti.UI.createWindow({
    		backgroundColor:'white',
    		barImage: 'images/header-backer.png',
    		title: 'New Window'
    	});
    
    	var newBtn = Ti.UI.createButton({
    		title: 'new win',
    		top: 20,
    		left: 20,
    		width: 200,
    		height: 20
    	});
    
    	newBtn.addEventListener('click', function() {
    		navGroup.open(openWin());
    	});
    	
    	var newBack = Ti.UI.createButton({
    		title: 'back',
    		top: 0,
    		left: 0,
    		width: 100,
    		height: 15
    	});
    	
    	newBack.addEventListener('click', function() {
    		closeWin(newWin);
    	});
    	
    	newWin.leftNavButton = newBack;
    	
    	newWin.add(newBtn);
    	
    	return newWin;
    }
    
    function openWin()
    {
    	return newWin();
    }
    
    function closeWin(newWin)
    {
    	navGroup.close(newWin);
    }
    
    var win = Ti.UI.createWindow({
    	backgroundColor:'white',
    	barImage: '/header-backer.png',
    	title: 'Main Window'
    });
    
    var btn = Ti.UI.createButton({
    	title: 'new win',
    	top: 20,
    	left: 20,
    	width: 200,
    	height: 20
    });
    
    btn.addEventListener('click', function() {
    	var winToOpen = newWin();
    	navGroup.open(winToOpen);
    });
    
    win.add(btn);
    
    var navGroup = Ti.UI.iPhone.createNavigationGroup({
    	window : win
    });
    
    var containerWindow = Ti.UI.createWindow();
    containerWindow.add(navGroup);
    containerWindow.open();
    
    </pre></code></li>
<li>Neeraj Gupta 2012-02-14

    Reopening this issue based on last 2 comments.</li>
<li>Michael Pettiford 2012-02-14

    Felipe & Devang
    
    Thanks for providing updated sample test cases.
    
    I verified that this is indeed an issue in 1.8.1
    
    I also tested against the latest master branch (AOTW 1.9.0.v20120213174634) from the CI build page <a href="http://builds.appcelerator.com.s3.amazonaws.com/index.html" rel="nofollow" target="_blank">http://builds.appcelerator.com.s3.amazonaws.com/index.html</a> and this issue does not occur there.
    
    </li>
</ol>


<p><a href="/TIMOB/TIMOB-2834.json">JSON Source</a></p>