---
title: "[TIMOB-2847] Android: Support for multi platform side-by-side modules"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T02:00:14.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M07</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, feature, ios, module, release-1.6.0, rplist, tooling</td></tr>
<tr><th>Reporter</th><td>Rick Blalock</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:31:04.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T02:00:14.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Feature request by customer to allow for both Android and iOS
modules at the same time. The work around is easy enough
currently.</p>
<p>HD Ticket for reference: <a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/65931" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/65931</a>"><a href="http://developer.appcelerator.com/helpdesk/view/65931" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/65931</a></a></p>
<p>iOS LH ticket here: <a href=
"<a href="https://appcelerator.lighthouseapp.com/projects/32238-titanium-mobile/tickets/2848-ios-support-for-side-by-side-modules" rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238-titanium-mobile/tickets/2848-ios-support-for-side-by-side-modules</a>">
<a href="https://appcelerator.lighthouseapp.com/projects/32238-titanium-mobi..." rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238-titanium-mobi...</a></a></p>
<p>Currently there isn't a way for an app to specify what
platform(s) a module should be enabled for, and the version number
is also a hard requirement. We should allow any of the following
methods for defining a module dependency in tiapp.xml:</p>
<pre>
<code>
&lt;!-- the way it works today, use version 0.1 of com.company.module for all platforms--&gt;
&lt;module version="0.1"&gt;com.company.module&lt;/module&gt;

&lt;!-- use version 0.1 of com.company.module only for Android --&gt;
&lt;module version="0.1" platform="android"&gt;com.company.module&lt;/module&gt;

&lt;!-- use the most recently installed version of com.company.module for all platforms --&gt;
&lt;module&gt;com.company.module&lt;/module&gt;</code>
</pre>
<p>We should also allow users to combine the rules above in
multiple <code>&lt;module&gt;</code> tags, i.e:</p>
<pre>
<code>
&lt;!-- use com.company.module 1.0 for android, 1.1 for iphone --&gt;
&lt;module platform="android" version="1.0"&gt;com.company.module&lt;/module&gt;
&lt;module platform="iphone" version="1.1"&gt;com.company.module&lt;/module&gt;</code>
</pre></div>

<h3>Comments</h3>

<ol>
<li>Don Thorp 2011-04-15

   <div><p>Rick, please add the workaround to this ticket.</p></div></li>
<li>Rick Blalock 2011-04-15

   <div><p>Same ticket as: <a href=
   "<a href="https://appcelerator.lighthouseapp.com/projects/32238/tickets/2950-tooling-add-support-for-platform-and-default-version-for-modules-in-tiappxml" rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238/tickets/2950-tooling-add-support-for-platform-and-default-version-for-modules-in-tiappxml</a>">
   <a href="https://appcelerator.lighthouseapp.com/projects/32238/tickets/2950-..." rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238/tickets/2950-...</a></a></p>
   <p>?</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>Move additional info from <a href="/projects/32238/tickets/2950"
   title="Ticket #2950">#2950</a>. We usually merge to the earliest
   ticket. Changed to be tooling an not Android specific.</p></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/1c687fca8587ae3591f437e717a4968ccdc14fdd"
   title=
   "Changeset [1c687fca8587ae3591f437e717a4968ccdc14fdd]">[1c687fca8587ae3591f437e717a4968ccdc14fdd]</a>)
   added support for "platform" attribute in the tiapp.xml tag to
   ModuleDetector. changed the iphone builder/compiler scripts to use
   the more generic detection/extraction logic on module.py [<a href=
   "/projects/32238/tickets/2847" title="Ticket #2847">#2847</a>
   state:fixed-in-qa] <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/1c687fca8587ae3591f437e717a4968ccdc14fdd" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/1c687fca8587ae3591f437e717a4968ccdc14fdd</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/1c687fca8587..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/1c687fca8587...</a></a></p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>Tested on 2.2 device (not that that really matters in this
   case), Titanium 1.6.0 6e8d578.</p>
   <p>Test steps I did:</p>
   <ul>
   <li>
   <p>Created an iOS module and gave it version 1.2.</p>
   </li>
   <li>
   <p>Created a test project and put the <code>&lt;module
   version="1.2"&gt;</code> line in tiapp.xml the "old" way, meaning
   with no <code>platform</code> attribute.</p>
   </li>
   <li>
   <p>Launched the test project in <strong>Android</strong>. Got an
   error -- during the build -- about not finding the module,
   <strong>as expected</strong>, so that's good.</p>
   </li>
   <li>
   <p>Added <code>platform="iphone"</code> to the module line in
   tiapp.xml.</p>
   </li>
   <li>
   <p>Relaunched the test project in Android -- <strong>no build
   errors this time</strong>, so that's good.</p>
   </li>
   <li>
   <p>Launched the test project in <strong>iPhone</strong> and it
   worked fine, finding the module and everything.</p>
   </li>
   <li>
   <p>Created an Android module (same id) and gave it version 1.1.</p>
   </li>
   <li>
   <p>Added <code>&lt;module platform="android" version="1.1"&gt;[my
   module id]&lt;/module&gt;</code> to the
   <code>&lt;modules&gt;</code> section in tiapp.xml, so now there was
   one with <code>platform="iphone" version="1.2"</code> and another
   with <code>platform="android" version="1.1"</code>.</p>
   </li>
   <li>
   <p>Launched again in iPhone -- still worked.</p>
   </li>
   <li>
   <p>Launched again in Android -- worked fine.</p>
   </li>
   </ul></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2847.json">JSON Source</a></p>