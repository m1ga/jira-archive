---
title: "[TIMOB-2853] Android: Creating Button or ImageView Opacity to 1 Causes Null Reference Exception"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-11-05T13:58:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.6.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-25, Release 1.7.2, Release 1.8.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Dawson Toth</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-04-15T03:31:11.000+0000</td></tr>
<tr><th>Updated</th><td>2011-11-05T13:58:34.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><h1>Problem</h1>
<p>Creating a Ti.UI.ImageView or a Ti.UI.Button with an opacity of
1 causes a Null Reference Exception to be thrown on Android. An
opacity less than 1 works fine, such as 0.5.</p>
<p>This might affect other controls, but I saw it happening on
image views and buttons in particular. I believe Ti.UI.View doesn't
have this problem (you can create it with an opacity of 1 and it
works just fine).</p>
<h1>Expected Behavior</h1>
<p>No exception should be thrown.</p>
<h1>Tested On</h1>
<p>Titanium Mobile 1.6.0 (Jan 06 2011)<br>
BROKEN on Android Simulator 2.2<br>
WORKS on iPhone Simulator 4.2</p>
<h1>Sample Code</h1>
<pre>
<code class=
"javascript">var win = Ti.UI.createWindow({ title: 'Opacity Fail!', backgroundImage: 'default.png' });
win.add(Ti.UI.createImageView({
    image: 'KS_nav_ui.png',
    opacity: 1,
    top: 0, right: 0, left: 0, height: 200
}));
win.add(Ti.UI.createButton({
    title: 'I am a button! Awesome, eh?',
    opacity: 1,
    bottom: 0, right: 0, left: 0, height: 200
}));
win.open();</code>
</pre>
<h1>Trace Log</h1>
<p>Attached.</p>
<h2>Associated Helpdesk Ticket</h2>
<p><a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/61351#c308231" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/61351#c308231</a>"><a href="http://developer.appcelerator.com/helpdesk/view/61351#c308231" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/61351#c308231</a></a></p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-2853_18229/opacitycrashesandroidlog.rtf">opacitycrashesandroidlog.rtf</td></td><td>2011-04-15T03:31:11.000+0000</td><td>21517</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Andreas sandberg 2011-04-15

   <div><p>This also affects UILabel elements:</p>
   <pre>
   <code>var win = Ti.UI.createWindow();
    
   var registerLabel = Titanium.UI.createLabel(
   {
       text: 'Stuff in here',
       top:'320dp',
       font: {
           fontSize:'12sp'
       }}
   );
   
   registerLabel.opacity = 0;
   
   var button = Ti.UI.createButton( {
       title: "Login",
       opacity: .2,
       height:'51dp',
       width:'300dp',
       top:'240dp',
       font: {
           fontSize:'20sp', fontWeight:'bold'
       }}
   );
   win.add(button);
   win.add(registerLabel);
   
   button.addEventListener('click', function(){
       registerLabel.opacity = 1;
   });
   
   win.open();</code>
   </pre></div></li>
<li>Dawson Toth 2011-04-15

   <div><p>We have enterprise level interest in this now.</p>
   <h2>Additional Helpdesk Ticket</h2>
   <p><a href=
   "<a href="http://developer.appcelerator.com/helpdesk/view/71201" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/71201</a>"><a href="http://developer.appcelerator.com/helpdesk/view/71201" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/71201</a></a></p></div></li>
<li>Joe iEntry 2011-04-15

   <div><p>I can confirm that opacity value of 1 (or 1.0) for image view
   kills the app on Ti Mobile 1.6.1 and Android 1.6.</p>
   <p>For those looking for a <strong>workaround</strong>, if it isn't
   obvious, use 0.99 instead of 1.</p></div></li>
<li>Dawson Toth 2011-04-15

   There is additional interest in the fix of this bug:
   
   <a href="http://support-admin.appcelerator.com/display/QHT-63577-369" rel="nofollow" target="_blank">http://support-admin.appcelerator.com/display/QHT-63577-369</a></li>
<li>Bill Dawson 2011-06-20

   A test app that exercises a few more views/controls:
   
   <code><pre>
   Titanium.UI.setBackgroundColor('#000');
   var win = Ti.UI.createWindow({
   	title: 'Opacity Fail!',
   	backgroundImage: 'default.png',
   	exitOnClose: true
   });
   win.add(Ti.UI.createImageView({
   	image: 'KS_nav_ui.png',
   	opacity: 0.8,
   	left: "5dp", width: "50dp", top: "5dp", height: "50dp"
   }));
   win.add(Ti.UI.createImageView({
   	image: 'KS_nav_ui.png',
   	opacity: 1,
   	left: "60dp", width: "50dp", top: "5dp", height: "50dp"
   }));
   
   win.add(Ti.UI.createButton({
   	opacity: 0.8,
   	title: "opacity 0.8",
   	left: "5dp", width: "100dp", top: "70dp", height: "40dp"
   }));
   win.add(Ti.UI.createButton({
   	opacity: 1,
   	title: "opacity 1",
   	left: "110dp", width: "100dp", top: "70dp", height: "40dp"
   }));
   
   win.add(Ti.UI.createLabel({
   	opacity: 0.8,
   	text: "opacity 0.8",
   	color: 'black',
   	backgroundColor: 'green',
   	left: "5dp", width: "100dp", top: "115dp", height: "40dp"
   }));
   win.add(Ti.UI.createLabel({
   	opacity: 1,
   	text: "opacity 1",
   	color: 'black',
   	backgroundColor: 'green',
   	left: "110dp", width: "100dp", top: "115dp", height: "40dp"
   }));
   
   win.add(Ti.UI.createView({
   	opacity: 0.8,
   	backgroundColor: 'green',
   	left: '5dp', width: "100dp", top: "160dp", height: "40dp"
   }));
   win.add(Ti.UI.createView({
   	opacity: 1,
   	backgroundColor: 'green',
   	left: '110dp', width: "100dp", top: "160dp", height: "40dp"
   }));
   
   win.open();
   </pre></code></li>
<li>Don Thorp 2011-06-23

   merge to 1_7_X</li>
<li>Natalie Huynh 2011-07-06

   Tested with Nexus S 2.3.4 and Nexus One 2.2.2 with 1.7.2.v20110630161836</li>
<li>Don Thorp 2011-11-05

   Standardizing summary and labels.</li>
</ol>


<p><a href="/TIMOB/TIMOB-2853.json">JSON Source</a></p>