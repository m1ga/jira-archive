---
title: "[TIMOB-2873] Android: Rotate + Scale animations need to support relative anchorPoints"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T02:00:19.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M07</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, animation, feature, release-1.6.0, reported-1.6.0</td></tr>
<tr><th>Reporter</th><td>Marshall Culpepper</td></tr>
<tr><th>Assignee</th><td>Marshall Culpepper</td></tr>
<tr><th>Created</th><td>2011-04-15T03:31:42.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T02:00:19.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>The new Matrix based animations only support absolute positions
in anchorPoint, not 0-1 like our current API dictates. This will
require us to save us a Matrix array internally so we can correctly
apply the rotate() operation with the calculated width/height of
the child.</p></div>

<h3>Comments</h3>

<ol>
<li>Marshall Culpepper 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/15e1a2e25a563b55ff15f42c0f6b4e5e88fb1671"
   title=
   "Changeset [15e1a2e25a563b55ff15f42c0f6b4e5e88fb1671]">[15e1a2e25a563b55ff15f42c0f6b4e5e88fb1671]</a>)
   Ti2DMatrix now saves it's state in a linked list so all operations
   can be applied in order and relative to widget height/width. scale
   and<br>
   rotate also now accept "from" arguments to allow for more
   fine-grained<br>
   control of each matrix operation [<a href=
   "/projects/32238/tickets/2873" title="Ticket #2873">#2873</a>
   state:fixed-in-qa]<br>
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/15e1a2e25a563b55ff15f42c0f6b4e5e88fb1671" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/15e1a2e25a563b55ff15f42c0f6b4e5e88fb1671</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/15e1a2e25a56..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/15e1a2e25a56...</a></a></p></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>Here's the code I used to test this bug:</p>
   <pre>
   <code class="javascript">
   var view = Ti.UI.createLabel({
       backgroundColor: 'blue',
       center: {
           x: '50%',
           y: '50%'
       },
       color: 'white',
       text: 'Animate me',
       width: 120, height: 100
   });
   
   var inout = true;
   win.add(view);
   
   var inTransform = Ti.UI.create2DMatrix().rotate(0, 180).scale(1.0, 1.0, 2.0, 2.0);
   var outTransform = Ti.UI.create2DMatrix().rotate(180, 0).scale(2.0, 2.0, 1.0, 1.0);
   
   view.addEventListener("click", function(e) {
       view.animate({ transform: inout ? inTransform : outTransform, duration: 800, anchorPoint: { x: 0.5, y: 0.5 }});
       inout = !inout;
   });</code>
   </pre></div></li>
<li>Marshall Culpepper 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/5b58229a4a9ebaf4f37a9e7e9264f94005d0a39c"
   title=
   "Changeset [5b58229a4a9ebaf4f37a9e7e9264f94005d0a39c]">[5b58229a4a9ebaf4f37a9e7e9264f94005d0a39c]</a>)
   fix for iterating back in the matrix linked list, don't even try to
   interpolate frames when the user supplies a transform. this
   makes<br>
   constant transform application much smoother [<a href=
   "/projects/32238/tickets/2841" title="Ticket #2841">#2841</a>]
   [<a href="/projects/32238/tickets/2873" title=
   "Ticket #2873">#2873</a>]<br>
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/5b58229a4a9ebaf4f37a9e7e9264f94005d0a39c" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/5b58229a4a9ebaf4f37a9e7e9264f94005d0a39c</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/5b58229a4a9e..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/5b58229a4a9e...</a></a></p></div></li>
<li>Opie Cyrus 2011-04-15

   <div><p>verified emulator 2.2</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2873.json">JSON Source</a></p>