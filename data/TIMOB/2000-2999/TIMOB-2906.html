---
title: "[TIMOB-2906] Android: Modal window is hidden behind status bar"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-11-05T13:39:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.6.2</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-24, Release 1.7.2, Release 1.8.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Rick Blalock</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-04-15T03:32:34.000+0000</td></tr>
<tr><th>Updated</th><td>2011-11-05T13:39:46.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>
Modal window's "top" is positioned under the Android status bar.

<h4>Sample Code</h4>
See Dawson's comments.

<h4>Note from Customer</h4>
From a customer (sums it up perfectly):

"Hello, when opening a modal window for droid, it appears that
the 'top' coordinate for the new window is inconsistent when
compared to iphone. In the kitchen sink example (Windows Standalone
-&gt; Traditional Modal) you can see that the vibrate button is
position with the top coordinate of 0 being the very top of the
screen. This means that if you set top to 0 the button will be
partially covered by the status bar. So you need to account for the
status bar width when positioning elements. This is not the case
for iphone as the top '0' coordinate actually references the
starting point directly below the navigation bar. Obviously the
work around is simple enough but I think this should probably be
considered a bug or feature request? Here's a simple example:"

<h4>Tested On</h4>
BROKEN on Titanium SDK version: 1.7.0 (05/26/11 19:05 70a26b8...)

<h4>Associated Helpdesk Ticket</h4>
<a href="http://appc.me/c/65951" rel="nofollow" target="_blank">http://appc.me/c/65951</a>

<h3>Comments</h3>

<ol>
<li>Dawson Toth 2011-05-09

   I have duplicated this issue with the following code:
   
   <code><pre>
   var win = Ti.UI.createWindow({ backgroundColor: '#f00'});
   var label = Ti.UI.createLabel({
       text: 'Hello, world! I am behind the status bar! :(',
       top: 0, height: 'auto', color: '#fff', fontSize: '18dp'
   });
   win.add(label);
   win.open({ modal: true });
   </pre></code>
   
   Note that if you move the "modal: true" out of the win.open call, and place it directly in the window properties, this bug will NOT be present. It is only when you have modal: true as an argument to win.open that this shows up.</li>
<li>Dawson Toth 2011-05-31

   <h4>Another Reproduction</h4>
   <code><pre>
   Ti.UI.setBackgroundColor('#fff');
   var winTest = Ti.UI.createWindow({ title: 'Test Window', url: "test.js", modal: true });
   winTest.open();
   </pre></code>
   
   <code><pre>
   var win = Ti.UI.currentWindow;
   
   var label = Ti.UI.createLabel({ top: 0, width: 200, text: "label #1"});
   win.add(label);
    
   var label2 = Ti.UI.createLabel({ top: 30, width: 200, text: "label #2"});
   win.add(label2);
    
   var label3= Ti.UI.createLabel({ top: 60, width: 200, text: "label #3"});
   win.add(label3);
   </pre></code></li>
<li>Bill Dawson 2011-06-16

   See Diane Hackborn's comment in:
   
   <a href="http://groups.google.com/group/android-developers/browse_thread/thread/ef45de483407d5cd" rel="nofollow" target="_blank">http://groups.google.com/group/android-developers/browse_thread/thread/ef45de483407d5cd</a>
   
   ... re fullscreen (no status bar) not working with translucency (our modal activity is translucent)</li>
<li>Bill Dawson 2011-06-16

   Pull request ready:
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/126" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/126</a>
   
   Problem was we were using a fullscreen translucent theme for the modal activity.  Two problems with this:
   
   * Parity problem: our iOS implementation is not using a fullscreen window by default for modals - -not sure why we were.
   * The combo of fullscreen (no status bar) + translucency does not work in Android (see link in previous comment).  
   
   Switched to Theme.Translucent (instead of Theme.Translucent.NoTitleBar.Fullscreen) and now respect the navBarHidden and fullscreen flags as well when used with modal flag.</li>
<li>Don Thorp 2011-06-17

   if <code>modal</code> is present we always use the modal theme even when modal is <code>false</code>.
   
   *app.js*
   <code><pre>
       Ti.UI.setBackgroundColor('#fff');
       var winTest = Ti.UI.createWindow({ title: 'Test Window', url: "test.js",      navBarHidden: false, fullscreen: false, modal: false });
       winTest.open();
   </pre></code>
   
   *test.js*
   <code><pre>
       var win = Ti.UI.currentWindow;
   
       var winTest2 = Ti.UI.createWindow({ title: 'Test Window 2', url: "test2.js", navBarHidden: true, fullscreen: true, modal: true });
       winTest2.open();
   </pre></code>
   
   *test2.js*
   <code><pre>
       var win = Ti.UI.currentWindow;
   
       var label = Ti.UI.createLabel({ top: 0, width: 200, text: "label #1"});
       win.add(label);
    
       var label2 = Ti.UI.createLabel({ top: 30, width: 200, text: "label #2"});
       win.add(label2);
    
       var label3= Ti.UI.createLabel({ top: 60, width: 200, text: "label #3"});
       win.add(label3);
   </pre></code>
   </li>
<li>Opie Cyrus 2011-06-17

   tested fix on 2.2 device and behavior looks good.  approve of accepting associated pull request</li>
<li>Don Thorp 2011-06-20

   Merged to master.</li>
<li>Natalie Huynh 2011-07-06

   Tested with Nexus S 2.3.4 and Nexus One 2.2.2 with 1.7.2.v20110630161836</li>
<li>Don Thorp 2011-11-05

   Fixing labels.</li>
</ol>


<p><a href="/TIMOB/TIMOB-2906.json">JSON Source</a></p>