---
title: "[TIMOB-2910] iOS / iPad: setData in anything post 1.4.x flickers"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T02:00:25.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M08</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios, quickstart-customer, regression, release-1.6.0, rplist, tableview</td></tr>
<tr><th>Reporter</th><td>Rick Blalock</td></tr>
<tr><th>Assignee</th><td>Ralf Pfeiffer</td></tr>
<tr><th>Created</th><td>2011-04-15T03:32:39.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T02:00:25.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>setData() sometimes performs strange when using it in
conjunction with a window focus event.</p>
<p>There have been a few reports of flickering and other odd
behaviors on the q/a forums, i.e.:<br>
<a href=
"<a href="http://developer.appcelerator.com/question/91471/updating-table-on-window-focus" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/91471/updating-table-on-window-focus</a>">
<a href="http://developer.appcelerator.com/question/91471/updating-table-on-..." rel="nofollow" target="_blank">http://developer.appcelerator.com/question/91471/updating-table-on-...</a></a><br>
<a href=
"<a href="http://developer.appcelerator.com/question/92611/tableview-rendering-async-since-150" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/92611/tableview-rendering-async-since-150</a>">
<a href="http://developer.appcelerator.com/question/92611/tableview-renderin..." rel="nofollow" target="_blank">http://developer.appcelerator.com/question/92611/tableview-renderin...</a></a></p>
<p>In the specific case of a quickstart customer I am assisting,
table row contents flicker when setData is called on a window focus
event. Attached is a video to show you what it is doing.</p>
<p>His code is fairly abstracted out but here are some examples of
his code: <a href=
"<a href="http://pastie.org/1485195" rel="nofollow" target="_blank">http://pastie.org/1485195</a>"><a href="http://pastie.org/1485195" rel="nofollow" target="_blank">http://pastie.org/1485195</a></a></p>
<p>Most of his custom methods for creating rows, etc. are just
wrappers for native Ti code. Nothing magical going on in the
background - just stuff to help him manage the app. I can provide
that if you need it.</p>
<hr>
<p>Using the sample code below - on the sim the label positioned on
the right hand side jumps over to the right - <a href=
"<a href="http://screencast.com/t/nsqmRxa37Z" rel="nofollow" target="_blank">http://screencast.com/t/nsqmRxa37Z</a>"><a href="http://screencast.com/t/nsqmRxa37Z" rel="nofollow" target="_blank">http://screencast.com/t/nsqmRxa37Z</a></a>.
On the device this does not happen but a black area flickers for a
short bit. (see attached video)</p>
<p>Below is some sample code to run. It doesn't duplicate some of
the issues exactly but does still show a few oddities (in both the
sim and device) as mentioned above:</p>
<pre>
<code class="javascript">var win = Titanium.UI.currentWindow;

var rows = [];

var tableview = Ti.UI.createTableView();

for (var i=0; i &lt; 10; i++) {
    var row = Ti.UI.createTableViewRow({
        left: 0,
        top: 0,
        height: 50, 
        width: '100%',
        separatorStyle: Ti.UI.iPhone.TableViewSeparatorStyle.NONE, 
        backgroundColor: 'transparent', 
        color: 'Red',
        selectedBackgroundImage: ''
    });
    
    var label = Ti.UI.createLabel({top: 10, left: 10, height: 22, width: 100, color: '#444', text: 'sometext', font: {fontFamily: 'Helvetica Neue', fontSize:20, fontWeight:'bold'}, textAlign: 'left'});
    
    var label2 = Ti.UI.createLabel({top: 10, right: 10, height: 22, width: 100, color: '#444', text: 'sometext', font: {fontFamily: 'Helvetica Neue', fontSize:20, fontWeight:'bold'}, textAlign: 'left'});
    
    row.add(label);
    row.add(label2);
    
    rows.push(row);
};

var button = Ti.UI.createButton({
    title: "setData",
    width: 50,
    height: 50,
    top: 10,
    right: 10
});

win.addEventListener('focus', function() {
    setTimeout(function() {
        tableview.setData(rows);
    }, 1000);
});

button.addEventListener('click', function() {
    tableview.setData(rows);
});

tableview.addEventListener('click', function() {
    var newwin = Ti.UI.createWindow({
        title: 'New window',
        url: 'test.js'
    });
    Ti.UI.currentTab.open(newwin, { animated: true });
});

win.add(tableview);
win.add(button);</code>
</pre></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-2910_18241/img_0587.MOV">img_0587.MOV</td></td><td>2011-04-15T03:32:40.000+0000</td><td>1791536</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-2910_18240/img_0588.MOV">img_0588.MOV</td></td><td>2011-04-15T03:32:39.000+0000</td><td>1395523</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Blain Hamon 2011-04-15

   <div><p>Having problems trying to recreate this. Some of this may be due
   to fixes that have happened since the bug was logged.</p></div></li>
<li>Rick Blalock 2011-04-15

   <div><p>This hasn't been an issue since early last week in the latest
   builds. I actually thought you fixed this since it was working last
   week.</p></div></li>
<li>Blain Hamon 2011-04-15

   <div><p>Hunh. I figured it might have been the case, but knowing how
   bugs can be interrelated or have common roots, I didn't have this
   bug in mind when fixing the others. If the issue has gone away for
   you, shall we call this one fixed-in-qa?</p></div></li>
<li>Rick Blalock 2011-04-15

   <div><p>Yes I think that's safe to do. I haven't tested with the build
   today but it worked all week last week. I suppose it'd be good to
   know that fixed it to avoid regression issues.</p></div></li>
<li>Brian 2011-04-15

   <div><p>This still doesn't work in 1.6.1...whenever you call setData on
   a tableView...the entire table flickers really bad. On an iPhone 3G
   it's even worse. The workaround everyone is using is the
   following:</p>
   <p>tableView.hide();<br>
   tableView.setData(data);<br>
   setTimeout(function() {<br>
   tableView.show(); },50);</p>
   <p>But unfortunately this workaround won't work for my
   app....please re-open this bug. It's a really ugly one that seems
   to have around for a while now.</p></div></li>
<li>Brian 2011-04-15

   <div><p>I created a new ticket that has a better example of the
   issue:</p>
   <p><a href=
   "<a href="https://appcelerator.lighthouseapp.com/projects/32238/tickets/3407-tableview-with-dynamic-row-height-causes-really-bad-flickering" rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238/tickets/3407-tableview-with-dynamic-row-height-causes-really-bad-flickering</a>">
   <a href="https://appcelerator.lighthouseapp.com/projects/32238/tickets/3407-..." rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238/tickets/3407-...</a></a></p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-2910.json">JSON Source</a></p>