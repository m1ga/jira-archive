---
title: "[TIMOB-2933] Android: facebook - java errors when using graph api publish (though publish does succeed) "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2011-04-15T03:33:14.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M07</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect, facebook, regression, release-1.6.0, reported-1.6.0</td></tr>
<tr><th>Reporter</th><td>Thomas Huelbert</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-04-15T03:33:14.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-23T21:57:06.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p><a href="/projects/32238/changesets/INFO" title=
"Changeset [INFO]">[INFO]</a> Titanium SDK version: 1.6.0 (01/24/11
08:14 e1cb22a) all supported platforms</p>
<ol>
<li>log in to facebook via &gt;mashups &gt; facebook &gt; log
in<br></li>
<li>facebook&gt;publish stream enter some text and tap either of
the GRAPH API buttons<br></li>
<li>watch logcat</li>
</ol>
<p>results:a bunch of exceptions, pastie here: <a href=
"<a href="http://pastie.org/1497476" rel="nofollow" target="_blank">http://pastie.org/1497476</a>"><a href="http://pastie.org/1497476" rel="nofollow" target="_blank">http://pastie.org/1497476</a></a></p>
<p>the test seems to succeed though, this bug is about the errors
seen in logcat.</p></div>

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-04-15

   <div><p>Sadly, this is inside Facebook's android SDK and android code
   itself. It's not an exception that surfaces (it's quelled
   internally by Android code and displayed just for logging purposes
   by them, thus the comment "Attempt to cast generated internal
   exception:").</p>
   <p>Technical reason:</p>
   <p>FB checks every key inside a <code>Bundle</code> to see if it
   happens to be a byte array. They do that by iterating over each key
   and calling <code>if Bundle.getByteArray(key) == null ...</code>.
   If the value associated with the key is not a byte array, then null
   is returned, which is fine for FB's purposes. Alas, Android's
   <code>Bundle</code> code decides to log the fact that the call --
   internally -- also caused them to have a
   <code>ClassCastException</code>. They don't re-throw that exception
   -- they just logcat it and return null, which FB programmers are
   counting on (and rightly so, given that the documentation for
   <code>getByteArray</code> says "Returns the value associated with
   the given key, or null if <strong>no mapping of the desired type
   exists for the given key</strong> or a null value is explicitly
   associated with the key."</p>
   <p>In a nutshell: this is not our code and the ugly logging -- in
   this case -- is not a sign of anything gone wrong. Android internal
   code has decided to log an exception that they don't throw.</p></div></li>
<li>Lee Morris 2017-03-23

   Closing ticket as invalid.</li>
</ol>


<p><a href="/TIMOB/TIMOB-2933.json">JSON Source</a></p>