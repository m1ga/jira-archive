---
title: "[TIMOB-20046] Ti.Geolocation.getCurrentPosition returns success:true with no coords"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2015-11-23T14:27:56.000+0000</td></tr>
<tr><th>Updated</th><td>2018-11-29T13:38:02.000+0000</td></tr>
</table>

<h3>Description</h3>

For a new training app I did:

<code><pre>
			Ti.Geolocation.getCurrentPosition(function(e) {

				console.debug('LOCATION: ' + JSON.stringify(e));

				if (!e.success) {
					return showError(e.error || 'Could not find your location');
				}

				getWeather(e.coords);
			});
</pre></code>

And of course in {tiapp.xml}}:

<code><pre>
		&lt;key&gt;NSLocationAlwaysUsageDescription&lt;/key&gt;
                &lt;string&gt;Get the weather for your location.&lt;/string&gt;
</pre></code>

But the response in Simulator was:

<code><pre>
{
	"success": true,
	"code": 0,
	"source": {},
	"type": "location",
	"error": "The operation couldnâ€™t be completed. (kCLErrorDomain error 0.)"
}
</pre></code>

I expected to get <code>coords</code> of course, but in case of an error at least <code>success:false</code> instead of <code>true</code>.

*NOTE:* The [documentartion](<a href="https://appcelerator.github.io/appc-docs/latest/#" rel="nofollow" target="_blank">https://appcelerator.github.io/appc-docs/latest/#</a>!/api/LocationResults) only lists <code>coords</code> and <code>provider</code> (Android) and not <code>success</code> and <code>error</code>.


<h3>Comments</h3>

<ol>
<li>Lorenzo Piccinini 2018-11-21

   </li>
<li>Lorenzo Piccinini 2018-11-25

   Someone with news? I have the same problem with android! Someone can help me?</li>
<li>Michael Gangolf 2018-11-25

   [~otto.pic] what is the content of <code>getCurrentPosition()</code>?  Is it just <code>Ti.Geolocation.getCurrentPosition(callback)</code> or a you subscribing to the <code>location</code> event?</li>
<li>Lorenzo Piccinini 2018-11-25

   
   <code><pre>
   function getCurrentPosition() {
   		Ti.Geolocation.getCurrentPosition(function(e){
   				
   				if(e.coords){
   				
   					getData({lat: e.coords.latitude, lng: e.coords.longitude});
   				
   				}else{
   					ui.alertError();
   				}
   				
   		});
   	}
   </pre></code></li>
<li>Michael Gangolf 2018-11-27

   Did you receive a location before? If you don't have a location you'll receive NULL. When I had a location outside my app (with a GPS test tool) <code>getCurrentPosition()</code> returns my last location. For moving coordingats <code>Ti.Geolocation.addEventListener('location', location);</code> of course.</li>
<li>Lorenzo Piccinini 2018-11-29

   I have found the problem but I haven't solution.
   If I install the app with wifi enabled and data and gps disabled there isn't way to get location enabling data and gps too. If I install the app with data and gps enabled all work fine.
   I don't understand very well what's append, but how can I get location from the best source wifi, data or gps? </li>
</ol>


<p><a href="/TIMOB/TIMOB-20046.json">JSON Source</a></p>