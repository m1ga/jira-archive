---
title: "[TIMOB-20059] iOS: 'person' property in Ti.Contacts.showContacts is empty"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-12-01T07:08:43.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.0, Release 5.0.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.2.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>contacts, ios</td></tr>
<tr><th>Reporter</th><td> Ricardo Ramirez</td></tr>
<tr><th>Assignee</th><td>Srikanth Sombhatla</td></tr>
<tr><th>Created</th><td>2015-11-24T17:32:33.000+0000</td></tr>
<tr><th>Updated</th><td>2016-01-14T22:43:32.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue Description </h4>
On iOS, the callback event for both 'selectedProperty' and 'selectedPerson' of Ti.Contacts.showContacts has an empty value for the "person" property. When selecting a person from the contacts list, The expected behavior is to see an object attached to the person property that get the name of the contact (e.g., e.person.name). 

The callback event for 'selectedProperty' returns: 
<code><pre>
{"value":"052255","property":"phone","label":"home","type":"selectedProperty","source":{},"person":{}} 
</pre></code>
<h4>Steps to replicate</h4>
-Create a new titanium alloy project
-Open the app folder
-Replace the index.xml file inside views folder and the index.js file inside controllers
-Build and run
-Click open
-Select a contact

<h4>Test Case</h4>
Index.xml
<code><pre>
<Alloy>
		<Window id="nav" backgroundColor="#fff">
			<Button onClick="open">Open</Button>
		</Window>
</Alloy>
</pre></code>

Index.js
<code><pre>
$.nav.open(); 

function open(){
	Ti.Contacts.showContacts({
		selectedProperty: function(e){
			alert(JSON.stringify(e));
		}
	});
}
</pre></code>

<h3>Comments</h3>

<ol>
<li>Srikanth Sombhatla 2015-11-26

   [~rramirez],
   Can you point to the source/docs which describe the expected properties on person object?</li>
<li>Chee Kiat Ng 2015-11-26

   Hi, I have changed this from bug to improvement, because the person object has been empty since iOS 8.4, when we use <code>selectedProperty</code> instead of <code>selectedPerson</code>. And in our docs we never mentioned if there's going to be information inside that object. Will investigate to see if we can populate any other information about the person in the person object. The information may only be partial as stated here: <a href="https://developer.apple.com/library/prerelease/mac/documentation/Contacts/Reference/Contacts_Framework/index.html." rel="nofollow" target="_blank">https://developer.apple.com/library/prerelease/mac/documentation/Contacts/Reference/Contacts_Framework/index.html.</a> </li>
<li> Ricardo Ramirez 2015-11-26

   Thanks [~cng] !
   
   Please keep us updated. </li>
<li>Srikanth Sombhatla 2015-11-27

   [~rramirez]
   
   The person object cannot be JSON stringified. But you can access it as 
   <code><pre>
   e.person.fullName
   </pre></code>
   
   But be advised that in iOS 9 the person object is a partial object by default and not all properties are available. </li>
<li>Chee Kiat Ng 2015-11-27

   We can consider to update the apidoc on this as a PR to explain what properties in the e.person object you can obtain.</li>
<li>Srikanth Sombhatla 2015-12-01

   PR <a href="https://github.com/appcelerator/titanium_mobile/pull/7517" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7517</a>
   Docs are updated to add info about person property.</li>
<li>Chee Kiat Ng 2015-12-01

   Approved. PR merged.</li>
<li>Kristen Bachman 2015-12-01

   I tested <code>e.person.fullName</code> and it doesn't actually return the contact's name. It returns the string "No name". </li>
<li>Chee Kiat Ng 2015-12-02

   [~bachmakm], which property did you select? Is this on iOS 9.1? May I know the device model or simulator?</li>
<li>Kristen Bachman 2015-12-03

    </li>
<li> Ricardo Ramirez 2015-12-03

    This is also happening if you use the 4.4.0.GA ? </li>
<li> Ricardo Ramirez 2015-12-03

    NVM I was confusing Studio with SDK.</li>
<li>Chee Kiat Ng 2015-12-04

    [~ssombhatla] can you look into the latest comment? contacts is managed differently between iOS8.4 and iOS 9.1. [~bachmakm] can you describe how to reproduce your crash in more detail please?</li>
<li>Kristen Bachman 2015-12-04

    <h4>Steps to Reproduce</h4>
    _Environment_
    * *Device*: iOS 5s simulator (v 9.1) or iOS 5 device (v 9.1)
    * *Ti SDK*: 5.1.1GA
    * *Ti Studio Version*: 4.4.0.201511241829-24112015183016
    
    _Replicate_
    In order to reproduce, follow the steps in the original issue description, but with a couple minor changes:
    <h4>In <code>index.xml</code> change <code><Button onClick="open">Open</Button></code> to <code><Button onClick="openThings">Open</Button></code>.</h4>
    <h4>In <code>index.js</code> change the <code>function open()</code> header to <code>function openThings()</code>.</h4>
    <h4>After starting the app and selecting a contact, select a mobile _phone number_. </h4>
    <h4>Crash.</h4>
    
    NOTE: If the method header isn't changed to <code>openThings()</code> from <code>open()</code> in <code>index.js</code>, the contacts list view will not open. This might be due to a scope issue with a <code>this.open()</code> call happening in the background.  
    </li>
<li>Srikanth Sombhatla 2015-12-14

    [~bachmakm] The reason it crashes on iOS 9.1 is because of TIMOB-20063. Can you reverify the same on SDK 5.1.2.</li>
<li>Harry Bryant 2015-12-14

    Tested [~bachmakm] 's steps, and was able to reproduce the issue when building with the 5.1.1GA SDK. When built with SDK: <code>5.1.2.v20151208161231</code> the issue was no longer reproducible. </li>
<li>Harry Bryant 2016-01-14

    Verifying ticket as fixed - in regards to the issue occurring where selectedProperty causes an app crash. This issue is no longer reproducible when built with SDK 5.2.0
    
    Tested on:
    iPhone 6s Plus Device (9.2) & iPhone 6 Plus Device (8.4) 
    Mac OSX El Capitan 10.11 (15A284)
    Ti SDK: 5.2.0.v20160114021251
    Appc NPM: 4.2.2 
    App CLI: 5.2.0-220 
    Xcode 7.2
    Node v4.2.3
    
    *Closing Ticket.*</li>
</ol>


<p><a href="/TIMOB/TIMOB-20059.json">JSON Source</a></p>