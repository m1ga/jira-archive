---
title: "[TIMOB-20083] Remove watchos1 template and related code"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-07-12T03:31:30.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Components</th><td>iOS, Tooling</td></tr>
<tr><th>Labels</th><td>breaking-change, notable, watch</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Created</th><td>2015-12-02T07:57:22.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:49:32.000+0000</td></tr>
</table>

<h3>Description</h3>

After TIMOB-19455 adds a <code>watchos2-swift</code> template and defaults to it we should remove the <code>watchos1</code> template and the related code in the build script.

*cli/lib/creators/applewatch.js*

* Remove the check for watchos1: <a href="https://github.com/FokkeZB/titanium_mobile/blob/TIMOB-19455/cli/lib/creators/applewatch.js#L220-L223" rel="nofollow" target="_blank">https://github.com/FokkeZB/titanium_mobile/blob/TIMOB-19455/cli/lib/creators/applewatch.js#L220-L223</a>

*iphone/cli/commands/_build.js*

* An check should be added to fail if if the extension is V1.
* All usage of <code>hasWatchAppV1</code>, <code>hasWatchAppV2orNewer</code>, <code>isWatchAppV1Extension</code>, <code>isWatchAppV1</code>, <code>isWatchAppV2orNewer</code> should be changed to assume V2 or newer.

*templates/applewatch/watchos1/template*

* Should be removed

<h3>Comments</h3>

<ol>
<li>Feon Sua Xin Miao 2016-01-05

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7611" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7611</a>
   
   Functional Test:
   1. Build a project without watchOS apps
   2. Build should succeed.
   3. Build a project that has a watchOS 1 app
   4. Build should terminate with following error message:
   <code><pre>
   [ERROR] watchOS 1 app detected
   [ERROR] Titanium 6.0.0 does not support watchOS 1 apps
   </pre></code>
   5. Build a project that has a watchOS 2 app
   6. Build should succeed.</li>
<li>Chee Kiat Ng 2016-01-06

   CR and FT Passed. 
   Question:
   Should we warn or fail already on step 3 when calling *appc new -t applewatch --template watchos1*? instead of having the dev disappointed later at step 4.? [~fokkezb] thoughts?</li>
<li>Fokke Zandbergen 2016-01-06

   [~cng] won't it already fail if you use a template name that no longer exists?</li>
<li>Chee Kiat Ng 2016-01-06

   [~fokkezb] oh ya, you are quite right. So this PR FT failed.
   <h4>Expected behavior</h4>
   Step 3 should fail and say the template doesn't exist.
   
   <h4>Actual behavior</h4>
   PR still allowed me to generate the extension/<xcode project></li>
<li>Fokke Zandbergen 2016-01-06

   Well, then thats a separate bug which should also happen if you do <code>appc new -t applewatch --template foo</code></li>
<li>Feon Sua Xin Miao 2016-01-06

   The CLI should be already handling non-existent template.
   Also, this is the error message I get.
   <code><pre>
   // appc new -t applewatch --template watchos1
   [ERROR] Unable to find template "watchos1"
   [ERROR] Failed to create project after 4ms
   
   // appc new -t applewatch --template foo
   [ERROR] Unable to find template "foo"
   [ERROR] Failed to create project after 5ms
   </pre></code></li>
<li>Chee Kiat Ng 2016-01-07

   I see. must be because i overwrote an existing sdk version which already had that template in place. let me clean that directory, reinstall sdk that has your code, and test again.</li>
<li>Chee Kiat Ng 2016-01-07

   OK PR Approved and merged!</li>
<li>Fokke Zandbergen 2016-02-17

   As discussed, this should be in 6.0 not 5.4 because it breaks when you build an existing Titanium app with a watchos1 extension.
   
   /cc [~cng]</li>
<li>Chee Kiat Ng 2016-02-17

    [~fmiao] I'll need this PR that was merged, to be reverted on master. Thanks.</li>
<li>Fokke Zandbergen 2016-02-17

    Ideally we could split it up:
    
    5.4: Remove the create support (the watchos1 template itself and the check for watchos1 in cli/lib/creators/applewatch.js)
    6.0: Remove the build support in iphone/cli/commands/_build.js</li>
<li>Chee Kiat Ng 2016-02-17

    Agreed with Fokke. [~fmiao] can you PR to re-insert build support in iphone/cli/commands/_build.js on master branch?</li>
<li>Chee Kiat Ng 2016-02-18

    [~bimmel] Worthwhile mention on release notes as Fokke has described:
    5.4.0: Developers cannot create watch apps using watchos1 templates
    6.0.0: Developers who has watchos1 watch apps will fail to build. (no longer support watchos1)
    
    [~fmiao] we can merge the PR to re-insert build support for watchos1, but don't resolve this ticket until we remove it again in 6.0.0.
    This ticket will remain open until 6.0.0 release.</li>
<li>Feon Sua Xin Miao 2016-02-18

    PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7757" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7757</a>
    
    It would be alot easier if we have a branch for 5_4_X.</li>
<li>Chris Barber 2016-02-18

    Just so everybody is clear, we MUST always leave the WatchOS1 extension detection code in the iOS build even after WatchOS1 is dead and gone.
    
    Second, we MUST display a deprecation warning when building an app with a WatchOS1 extension. We should sneak this deprecation warning in ASAP.
    
    Third, when we do end up dropping support for WatchOS1 extensions, the iOS build must emit a fatal error and exit when a WatchOS1 extension is detected.</li>
<li>Chee Kiat Ng 2016-02-19

    PR merged.</li>
<li>Fokke Zandbergen 2016-02-19

    [~cbarber] agree, [~fmiao] can you make sure we keep what for 6.0 will be the fatal error in your PR for 5.4, but then as deprecation warning (without the exit)?
    
    <a href="https://github.com/appcelerator/titanium_mobile/pull/7757/files#diff-f430483233aa01af5b10df8390f9635dL1491" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7757/files#diff-f430483233aa01af5b10df8390f9635dL1491</a></li>
<li>Feon Sua Xin Miao 2016-07-11

    PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8123" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8123</a></li>
<li>Chee Kiat Ng 2016-07-12

    APPROVED.</li>
<li>Eric Merriman  2018-08-06

    Cleaning up older fixed issues. If this issue should not have been closed as fixed, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-20083.json">JSON Source</a></p>