---
title: "[TIMOB-20105] iOS: Foreground and TextInput interactive notifications do not work when bundle Watch App is installed"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 5.1.0, Release 5.1.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>watchOS2</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2015-12-07T15:44:49.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T19:55:19.000+0000</td></tr>
</table>

<h3>Description</h3>

The attached project demonstrates that if a Titanium app is bundled with a watchOS (2) app, interactive notifications with FOREGROUND activationMode or TEXTINPUT behavior do not work as expected when the Watch App is installed.

*Steps to reproduce*

<h4>Install on an iPhone but not yet install the bundled Watch App.</h4>

*Works via iPhone*

<h4>Open the app, tap the button and quickly press the iPhone home button.</h4>
<h4>Drag down the notification banner when it appears.</h4>
<h4>Tap either action and confirm that the <code>localnotificationaction</code> event appears in the console (after entering input).</h4>

*Works via Apple Watch when Watch App is not installed*

<h4>Open the app, tap the button and quickly lock the iPhone.</h4>
<h4>On the Apple Watch tap either action and confirm that the <code>localnotificationaction</code> event appears in the console (after entering input).</h4>

*Fails via Apple Watch when Watch App is installed*

<h4>Install the bundled Watch App via the Watch companion app.</h4>
<h4>Open the app, tap the button and quickly lock the iPhone.</h4>
<h4>Tap the _Works_ action and confirm that the <code>localnotificationaction</code> event appears in the console.</h4>
<h4>On the Apple Watch tap the _Fails_ action and confirm that nothing happens.</h4>

You can also change the <code>app.js</code> to use FOREGROUND activationMode without TEXTINPUT behavior and confirm that this does open the Watch App as expected but again the iOS app does not receive the <code>localnotificationaction</code> event.

*Whose bug is this?*

Run [this Swift iOS and WatchOS2 project](<a href="https://github.com/satheeshwaran/Notifications-iOS9)" rel="nofollow" target="_blank">https://github.com/satheeshwaran/Notifications-iOS9)</a> to confirm that here the expected function of the iOS app *does* get called for the above TEXTINPUT scenario. So it does seem to be a Titanium bug, although [this Apple Forum topic](<a href="https://forums.developer.apple.com/thread/22453)" rel="nofollow" target="_blank">https://forums.developer.apple.com/thread/22453)</a> looks related as well.

For the FOREGROUND scenario you will have to modify <code>AppDelegate.swift</code> and add the following function. You'll see that this doesn't seem to get called. I guess this is normal when the bundled Watch App is installed although I didn't see this 100% confirmed in the docs. 

<code><pre>
    func application(application: UIApplication, handleActionWithIdentifier identifier: String?, forLocalNotification notification: UILocalNotification, completionHandler: () -> Void){
        
        NSLog("Without text")
        completionHandler()
        
    }
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-20105_57697/internotify.zip">internotify.zip</td></td><td>2015-12-07T15:32:54.000+0000</td><td>4269542</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2015-12-07

   /cc [~hansknoechel]</li>
</ol>


<p><a href="/TIMOB/TIMOB-20105.json">JSON Source</a></p>