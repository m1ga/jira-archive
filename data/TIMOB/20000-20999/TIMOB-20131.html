---
title: "[TIMOB-20131] iOS: Ti.UI.iOS.ApplicationShortcuts does not work on device with LiveView enabled"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2016-11-16T18:48:36.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS, LiveView, Tooling</td></tr>
<tr><th>Labels</th><td>ios, liveview</td></tr>
<tr><th>Reporter</th><td>Jason Kneen</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2015-12-11T12:35:21.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-27T20:46:16.000+0000</td></tr>
</table>

<h3>Description</h3>

Running the following code on device fails if liveview is enabled. The result is:

<code><pre>TypeError: undefined is not a function (evaluating 'Ti.UI.iOS.createApplicationShortcuts()')</pre></code>

Running with LiveView off works.

<code><pre>
if (OS_IOS && Ti.UI.iOS.forceTouchSupported) {
    var appShortcuts = Ti.UI.iOS.createApplicationShortcuts();

    appShortcuts.addDynamicShortcut({
        itemtype: "post_text",
        title: "Text",
        subtitle: "Tap to post text",
        icon: Ti.UI.iOS.SHORTCUT_ICON_TYPE_COMPOSE,
        userInfo: {
            post: {
                type: "text"
            }
        }
    });

    appShortcuts.addDynamicShortcut({
        itemtype: "post_photo",
        title: "Photo",
        subtitle: "Tap to post a photo",
        icon: Ti.UI.iOS.SHORTCUT_ICON_TYPE_CAPTURE_PHOTO,
        userInfo: {
            post: {
                type: "photo"
            }
        }
    });

    appShortcuts.addDynamicShortcut({
        itemtype: "post_video",
        title: "Video",
        subtitle: "Tap to post a video",
        icon: Ti.UI.iOS.SHORTCUT_ICON_TYPE_CAPTURE_VIDEO,
        userInfo: {
            post: {
                type: "video"
            }
        }
    });
}</pre></code>

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2015-12-11

   Looks like when you've enabled LiveView the define isn't set:
   <a href="https://github.com/appcelerator/titanium_mobile/search?utf8=" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/search?utf8=</a>✓&q=USE_TI_UIIOSAPPLICATIONSHORTCUTS
   
   We scan the code here:
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/node_modules/titanium-sdk/lib/jsanalyze.js#L102-L145" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/node_modules/titanium-sdk/lib/jsanalyze.js#L102-L145</a>
   
   And set the defines here:
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/cli/commands/_build.js#L5440" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/cli/commands/_build.js#L5440</a>
   
   Could it be that since LiveView replaces the app's <code>app.js</code> it doesn't find these? Then we'd need to fix this by copying in the original <code>app.js</code> (as <code>_app.js</code>) as well with LiveView enabled.</li>
<li>Chee Kiat Ng 2016-02-19

   [~jasonkneen] did you try with our 5.2.0.RC? I tried to reproduce here but I don't see the error.</li>
<li>Hans Knöchel 2016-03-25

   Just pinged Jason via mail. Maybe the <code>&lt;run-on-main-thread/&gt;</code> flag was enabled?</li>
<li>Feon Sua Xin Miao 2016-04-19

   This happens to Ti.UI.create* apis too, i.e <code>Ti.UI.createWindow, Ti.UI.iOS.createNavigationWindow, Ti.UI.createLabel</code>
   
   Create a classic titanium app, do <code>ti build -p ios -T device --liveview</code>, launch the app, it fails with similar error:
   <code><pre>
   [ERROR] Error: invalid method (createTabGroup) passed to UIModule
   [ERROR] File: app.js
   </pre></code>
   
   This seems like a SDK issue. </li>
<li>Chee Kiat Ng 2016-05-19

   Thanks [~fmiao] this is a good reproducible case.
   The problem lies where the command call has to include the flag --deploy-type development in order for this to work, because by default, if you target device, it's --deploy-type test
   I'm not sure if this was by design but leaving a note here first until we decide the best approach to fixing this.
   
   Also, if you do this in studio, the flag is --deploy-type development so there won't be an issue.</li>
<li>Hans Knöchel 2016-10-02

   So this is device-only? I know that we include [all defines](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/defines.h)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/defines.h)</a> when running a sim-build and generate the symbols manually for device-builds (see _build.js above). So if this issue affects all <code>Ti.UI</code> namespaces, I'm wondering how this ever worked before then. </li>
<li>Hans Knöchel 2016-11-16

   Just tested with 6.0.0.GA and I'm not able to reproduce this issue anymore. To be validated by the QE team. Thx!</li>
<li>Lee Morris 2017-03-27

   Closing ticket as the issue cannot be reproduced, with reference to the above comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-20131.json">JSON Source</a></p>