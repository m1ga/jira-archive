---
title: "[TIMOB-20141] Global scope variables can be shared with CommonJS modules"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-01-06T15:29:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.0.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>engSchedule, ios, iphone</td></tr>
<tr><th>Reporter</th><td>Eric</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2015-02-03T17:31:49.000+0000</td></tr>
<tr><th>Updated</th><td>2020-01-06T15:29:00.000+0000</td></tr>
</table>

<h3>Description</h3>

module.js
<code><pre>
console.log(controllerVariable);
moduleVariable = "moduleVariable";
module.exports = {};
</pre></code>

controller.js
<code><pre>
controllerVariable = "controllerVariable";
var module = require("module");
console.log(moduleVariable);
</pre></code>

Output when running the application is:
moduleVariable
controllerVariable

Expected that the global scope of the controller would not be shared with the global scope of the module.

<h3>Comments</h3>

<ol>
<li>Mauro Parra-Miranda 2015-02-04

   Hello,
   please read the guide to report issues:
   
   <a href="http://docs.appcelerator.com/titanium/3.0/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/3.0/#</a>!/guide/How_to_Submit_a_Bug_Report
   
   and provide at least:
   
   - Description of the problem
   - Steps to reproduce
   - Expected Results
   - Actual Results
   
   If you want/need to add a new feature, explain what you need, why you need it, and what you expect to be a solution. </li>
<li>Eric 2015-02-04

   Description of the problem: Global scope variables can be shared with CommonJS modules
   
   Steps to reproduce:
   
   1) Here is the source for the module:
   
   module.js
   <code><pre>
   console.log(controllerVariable);
   moduleVariable = "moduleVariable";
   module.exports = {};
   </pre></code>
   
   2) Here is the source for the controller:
   
   controller.js
   <code><pre>
   controllerVariable = "controllerVariable";
   var module = require("module");
   console.log(moduleVariable);
   </pre></code>
   
   Actual results (console output):
   moduleVariable
   controllerVariable
   
   Expected results (neither variable should be defined in the scope it is logged):
   undefined
   undefined
   
   If it was strict mode, I would expect an exception for not finding the variables.
   
   What other information is necessary so that I can provide it to you? This was all in the original report.</li>
<li>Ewan Harris 2019-12-10

   node-titanium-sdk PR: <a href="https://github.com/appcelerator/node-titanium-sdk/pull/129" rel="nofollow" target="_blank">https://github.com/appcelerator/node-titanium-sdk/pull/129</a></li>
<li>Christopher Williams 2019-12-10

   merged the node-titanium-sdk PR, once 4.0.0 goes out we'll need to fold that into the SDK</li>
<li>Christopher Williams 2019-12-10

   merged to master for 9.0.0: <a href="https://github.com/appcelerator/titanium_mobile/pull/11387" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11387</a></li>
<li>Samir Mohammed 2020-01-06

   </li>
</ol>


<p><a href="/TIMOB/TIMOB-20141.json">JSON Source</a></p>