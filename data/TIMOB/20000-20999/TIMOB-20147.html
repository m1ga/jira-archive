---
title: "[TIMOB-20147] iOS: Ti.Contacts.showContacts() selectedPerson returns empty on iOS 8.4"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-12-23T01:40:42.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>contacts</td></tr>
<tr><th>Reporter</th><td>Angel Petkov</td></tr>
<tr><th>Assignee</th><td>Srikanth Sombhatla</td></tr>
<tr><th>Created</th><td>2015-12-15T04:15:06.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-23T21:04:44.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Steps to reproduce</h4>
1. Create titanium classic app
2. Use this sample code
<code><pre>
var win = Ti.UI.createWindow({
	backgroundColor: 'white'
});
var btn3 = Ti.UI.createButton({
	title: 'show Contacts',
	top:'15%'
});

btn3.addEventListener('click', function(e){
	Ti.Contacts.showContacts({
		cancel: function(e) {
			alert('cancelled');
		},
		selectedPerson: function(e) {
			var person = e.person;
			Ti.API.info(person);
			alert('person selected is ' + person.fullName);
		},
//		selectedProperty: function(e) {
//			alert('property selected\n' + e.property +'\n' + e.label +'\n'+e.value);
//			Ti.API.info(e.value);
//			Ti.API.info(e.person.fullName);
//			Ti.API.info(e.property);
//			Ti.API.info(e.value);
//			Ti.API.info(e.label);
//		}
	});
});
win.add(btn3);
win.open();
</pre></code>
3. Show Contacts
4. Select a person

<h4>Expected Result</h4>
alert dialog with person's name shown

<h4>Actual Result</h4>
alert dialog with 'no name' shown

<h3>Comments</h3>

<ol>
<li>Srikanth Sombhatla 2015-12-16

   PR <a href="https://github.com/appcelerator/titanium_mobile/pull/7585" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7585</a>
   Use the test case provided in the ticket. 
   
   In iOS 8 presenting contact picker don't need User permission anymore. But in this case we cannot query meta data like recordId. This was not handled when updated to iOS 8 API. So is this issue. Note that person.recordId will be -1 when contacts permission is not granted by User. But once permission is granted, person.recordId will return expected value. 
   
   <a href="https://developer.apple.com/library/ios/releasenotes/General/RN-iOSSDK-8.0/" rel="nofollow" target="_blank">https://developer.apple.com/library/ios/releasenotes/General/RN-iOSSDK-8.0/</a>
   </li>
<li>Angel Petkov 2015-12-23

   CR and FT approved. Thats Srikanth!</li>
<li>Lee Morris 2017-03-23

   Can verify this ticket as fixed. Tested with the following environment;
   iPhone 7 (10.2)
   MacOS 10.11.6 (15G31)
   Studio 4.8.1.201612050850
   Ti SDK 6.0.3 GA
   Appc NPM 4.2.8
   Appc CLI 6.1.0
   Ti CLI 5.0.11
   Alloy 1.9.5
   Arrow 1.10.1
   Xcode 8.2 (8C38)
   Node v4.6.0
   Java 1.7.0_80</li>
</ol>


<p><a href="/TIMOB/TIMOB-20147.json">JSON Source</a></p>