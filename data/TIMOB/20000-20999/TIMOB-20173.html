---
title: "[TIMOB-20173] Windows: Ti.Platform.username on Windows 10"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-05-20T16:25:31.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>qe-5.4.0</td></tr>
<tr><th>Reporter</th><td>Kota Iguchi</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2015-12-23T00:15:38.000+0000</td></tr>
<tr><th>Updated</th><td>2016-06-15T19:53:01.000+0000</td></tr>
</table>

<h3>Description</h3>

On Windows 10, <code>Ti.Platform.username</code> always returns empty string. FYI internally we are using <code>Windows::System::User::FindAllAsync</code> and <code>User::GetPropertyAsync(KnownUserProperties::AccountName)</code> to get the accound info on Windows 10.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-20173_59317/windows_accounts.png">windows_accounts.png</td></td><td>2016-05-19T17:31:53.000+0000</td><td>51952</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-20173_59322/windows_local.PNG">windows_local.PNG</td></td><td>2016-05-19T21:58:04.000+0000</td><td>5104</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-20173_59321/windows_ms.PNG">windows_ms.PNG</td></td><td>2016-05-19T21:58:04.000+0000</td><td>5855</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2016-01-03

   PR: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/517" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/517</a></li>
<li>Harry Bryant 2016-05-12

   [~gmathews] Tested this and <code>Ti.Platform.username</code> returns no value. Using the demo code the label is blank, and when including <code>Ti.API.info(Ti.Platform.username)</code> nothing is returned to the console. Using the same code on iOS returns the correct value. 
   
   Tested on: 
   Windows 10 Pro 
   Windows Phone 10.0 & 8.1 (Microsoft Lumia 640 LTE) 
   Appc Studio: 4.6.0.201605030516
   Ti SDK: 5.3.0.v20160509143032
   Appc NPM: 4.2.5-5
   Appc Core: 5.3.0-44
   Node: v4.4.4</li>
<li>Harry Bryant 2016-05-18

   Reopening Ticket.</li>
<li>Gary Mathews 2016-05-19

   Currently we attempt to retrieve the users <code>DisplayName</code>, however, sometimes Windows cannot retrieve this information.
   
   <a href="https://social.msdn.microsoft.com/Forums/fr-FR/a5af64d0-4908-481e-9254-3ce23cc2d734/uwp-user-getpropertyasyncknownuserpropertiesdisplayname-returns-empty-string?forum=wpdevelop" rel="nofollow" target="_blank">https://social.msdn.microsoft.com/Forums/fr-FR/a5af64d0-4908-481e-9254-3ce23cc2d734/uwp-user-getpropertyasyncknownuserpropertiesdisplayname-returns-empty-string?forum=wpdevelop</a>
   
   I have made a PR that will attempt to obtain the <code>AccountName</code> or <code>DisplayName</code> if either is available. If both cannot be retrieved it will fallback onto the users first and last name.
   
   It appears Windows uses the first and last name as the username if the user is signed into a Microsoft Account (_Settings > Accounts > Your email and accounts_)
   
   !windows_accounts.png|thumbnail!!windows_local.PNG|thumbnail!!windows_ms.PNG|thumbnail!
   
   master: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/708" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/708</a>
   5_3_X: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/707" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/707</a>
   
   *tiapp.xml Capability*
   <code><pre>
   ..
   &lt;windows&gt;
     &lt;Capabilities&gt;
       &lt;uap:Capability Name="userAccountInformation" /&gt;
     &lt;/Capabilities&gt;
   &lt;windows&gt;
   ...
   </pre></code>
   
   *Test Case*
   <code><pre>
   var win = Ti.UI.createWindow(),
       lbl = Ti.UI.createLabel({ text: Ti.Platform.username });
   win.add(lbl);
   win.open();
   </pre></code></li>
<li>Kota Iguchi 2016-05-19

   Moved this ticket to 5.4.0 as we need to discuss more on how to get the valid username.</li>
<li>Harry Bryant 2016-05-19

   [~gmathews] To clarify, When I ran <code>Ti.Platform.username</code> on an iOS device, it returned the system's "name". This matches what the documentation states. (see <a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.Platform-property-username)
   
   In the case of a windows 10 phone, <code>Ti.Platform.username</code> should ideally return the name found under *Settings > System > About > Device Name*</li>
<li>Gary Mathews 2016-05-20

   master: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/708" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/708</a>
   
   <code>Titanium.Platform.username</code> returns the device name. The <code>tiapp.xml</code> capability required before is not necessary.</li>
<li>Harry Bryant 2016-06-15

   Verified as fixed, Ti.Platform.username now returns the appropriate device name, without the need for Capabilities in the tiapp.xml. Editing the Device name and relaunching the app reflects the change correctly.
   
   Tested on: 
   Windows 10 Pro 
   Windows Phone 10.0 (Microsoft Lumia 640 LTE) 
   Appc Studio: 4.6.0.201605201934
   Ti SDK:  5.4.0.v20160608165242
   Appc NPM: 4.2.7-2
   Appc Core: 5.4.0-15
   Node: v4.4.5
   
   *Closing Ticket.*</li>
</ol>


<p><a href="/TIMOB/TIMOB-20173.json">JSON Source</a></p>