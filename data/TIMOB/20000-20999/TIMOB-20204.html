---
title: "[TIMOB-20204] iOS: ListView - onload events of template items not fired"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-07-27T08:03:26.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>listview, mainthread, qe-5.4.0</td></tr>
<tr><th>Reporter</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-01-06T23:11:35.000+0000</td></tr>
<tr><th>Updated</th><td>2016-10-01T23:11:30.000+0000</td></tr>
</table>

<h3>Description</h3>

For iOS, <code>onload</code> event attached to any listview template items is not fired. It does fire for Android.

<h4>Step to reproduce</h4>
1. Run attach app on iOS Simulator
2. Run attach app on on Android Emulator
3. Compare both results

<h4>Expected Result</h4>
On 3rd row, images are animating for both OS

<h4>Actual Result</h4>
On 3rd row, images are animating on Android, but not on iOS.



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-20204_57895/classiApp.zip">classiApp.zip</td></td><td>2016-01-06T23:06:51.000+0000</td><td>120516</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-20204_58690/Simulator Screen Shot Mar 22, 2016, 4.11.56 PM.png">Simulator Screen Shot Mar 22, 2016, 4.11.56 PM.png</td></td><td>2016-03-22T23:12:19.000+0000</td><td>48535</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Srikanth Sombhatla 2016-02-15

   [~fmiao] 
   Since expected result is: 
   <code>On 3rd row, images are animating for both OS</code>
   
   I see them animated in 3rd row and <code>load</code> event is invoked on all three rows as well. 
   <code><pre>
   [INFO] - imageLoad:  [object TiUIImageView]
   [INFO] - imageLoad:  [object TiUIImageView]
   [INFO] - imageLoad:  [object TiUIImageView]
   </pre></code>
   
   Can you please reverify and update this ticket. </li>
<li>Feon Sua Xin Miao 2016-03-22

   [~ssombhatla], I still get the same result, the 3rd row is blank, attached a screenshot of what I see after the simulator is loaded.
   
   <code><pre>
   SDK: 5.4.0.v20160322115854 
   iOS Simulator: iPhone 5
   iOS: 9.2
   Xcode: 7.2
   </pre></code></li>
<li>Srikanth Sombhatla 2016-03-24

   This is <code>TI_USE_KROLL_THREAD</code> issue. 
   A quick work around is to set <code><pre>&lt;run-on-main-thread&gt;true&lt;/run-on-main-thread&gt;</pre></code> under <code>ios</code> in tiapp.xml. I need to investigate for the fix. </li>
<li>Srikanth Sombhatla 2016-03-24

   When <code>TI_USE_KROLL_THREAD</code> is enabled, the image is loaded before the events are added. So <code>load</code> event is not fired. This fix will listen to added events and then fire the load event. 
   
   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7879" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7879</a>
   
   Use the attached app.js. Test by changing values on 
   <code><pre> &lt;run-on-main-thread&gt;true&lt;/run-on-main-thread&gt; </pre></code> 
   under <code>ios</code> in tiapp.xml</li>
<li>Josh Longton 2016-07-07

   Verified as fixed, the event is fired and the image is animated with <code>run-on-main-thread</code> set to true/false.
   
   Tested on: 
   iPhone 5s (9.2)
   iOS Simulator (9.3)
   Android emulator (6.0) 
    Mac OSX El Capitan 10.11.5
   Studio: 4.7.0.201607070843
    Ti SDK: 5.4.0.v20160705213725
    Appc NPM: 4.2.8-1
   Appc CLI: 5.4.0-26
    Xcode 7.3.1
   Node v4.4.4
   * Closing Ticket*</li>
<li>Hans Knöchel 2016-07-26

   Reopening. This fix produces a regression for all images in both standalone imageviews and embedded imageviews in lists/tables. The exact issue is [here](<a href="https://github.com/appcelerator/titanium_mobile/commit/a2ce6d1dfac7d75d73ad66656ffbe11200061db3#diff-bda46bd3120801c618c5afee61c97391R67)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/a2ce6d1dfac7d75d73ad66656ffbe11200061db3#diff-bda46bd3120801c618c5afee61c97391R67)</a>, so we need to check what's going wrong there exactly
   
   Demo to reproduce:
   <code><pre>
   var win = Ti.UI.createWindow({
       backgroundColor: "#fff"
   });
   var img1 = Ti.UI.createImageView({
       image: "default_app_logo.png",
       imageActive: "/images/apple_logo.jpg",
       height: 50,
       top: 50,
   });
   var img2 = Ti.UI.createImageView({
       image: "",
       backgroundColor: "#ff0",
       width: 50,
       imageActive: "/images/apple_logo.jpg",
       height: 50,
       top: 125,
   });
   var img3 = Ti.UI.createImageView({
       image: "default_app_logo.png",
       imageActive: "/images/apple_logo.jpg",
       height: 50,
       top: 200
   });
   
   var lbl = Ti.UI.createLabel({
       bottom: 20
   });
   
   win.add(lbl);
   win.add(img1);
   win.add(img2);
   win.add(img3);
   
   function cl(e){
       lbl.text = "Before " +e.source.image;
       e.source.image = e.source.imageActive;
       console.log(e.source.image);
       lbl.text += " after " +e.source.image;
   }
   
   img1.addEventListener("click", cl);
   img2.addEventListener("click", cl);
   img3.addEventListener("click", cl);
   
   win.open();
   </pre></code>
   
   Expected behavior: The images change on click
   Actual behaior: The images do not change on click
   
   Thanks to [~michael] for reporting!
   
   *EDIT*: Diving deeper into that issue, I noticed that he overwrote a proxy delegate method which has bad impact on the whole proxy handling. So we may -revert this PR for 5.4.0 so the regression to the user-cases is fixed and try to- fix this issue differently.</li>
<li>Hans Knöchel 2016-07-26

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/8158" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8158</a>
   PR (5_4_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/8159" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8159</a>
   
   This needs be tested against both the original demo-code (list-view with images) as well as the regression demo in the comment above. For QE: Please also test this with the KitchenSink app and the "Employee Directory" app from Studio. [~bgrantges@appcelerator.com] reported a possible regression issue (TIMOB-23669) recently that is surely related to this one.</li>
<li>Michael Gangolf 2016-07-27

   @hansknoechel 5_4_x patched worked fine with the provided demo. All images update on click with and without main-thread.</li>
<li>Chee Kiat Ng 2016-07-27

   CR and FT passed. Approved!</li>
<li>Harry Bryant 2016-08-03

    Verified as fixed. Tested both the original demo-code as well as the second test case above. Also verified TIMOB-23669 and closed.
    
    Tested On:
    iPhone 6S (9.3.3) Device
    Mac OSX El Capitan 10.11.6
    Ti SDK: 5.4.0.v20160802165655
    Appc Studio: 4.7.0.201607111053
    Appc NPM: 4.2.7	
    App CLI: 5.4.0-37
    Xcode 7.3
    Node v4.4.7
    
    *Closing ticket.*</li>
</ol>


<p><a href="/TIMOB/TIMOB-20204.json">JSON Source</a></p>