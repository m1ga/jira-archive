---
title: "[TIMOB-20223] Android: cannot list files on lib directory with Filesystem.getFiles - getDirectoryListing"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2018-06-12T21:35:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, filesystem, lib</td></tr>
<tr><th>Reporter</th><td>Mauro Piccotti</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2015-12-16T18:05:03.000+0000</td></tr>
<tr><th>Updated</th><td>2018-06-12T21:35:45.000+0000</td></tr>
</table>

<h3>Description</h3>

Under lib directory I created a "repositories" dir, and under this dir I put some kind of commonjs modules I would like to load dinamically.
On iOS I do this and it works:
   requirePath = "repositories/";
   repositoriesDir = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory + requirePath);
   repositoriesFiles = repositoriesDir.getDirectoryListing();
   // requires and other operations with those files

On Android apparently I cannot read files contained inside that directory.
I've found one guy with the same problem on your old forum, but now it's closed and there isn't an answer:
<a href="https://developer.appcelerator.com/question/179048/where-are-my-alloy-lib-files-in-the-filesystem-on-android" rel="nofollow" target="_blank">https://developer.appcelerator.com/question/179048/where-are-my-alloy-lib-files-in-the-filesystem-on-android</a>

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2015-12-17

   Hello [~pic], I have trieded a sample code on Android 4.4.2. It's working. I modified your code a bit. Use "requirePath = "/repositories/"" as like this. 
   
   <h4>My Test</h4>
   
   <code><pre>
   $.nav.open();
   var requirePath = "/resmon/11788.png";
   var repositoriesDir = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory + requirePath);
   //repositoriesFiles = repositoriesDir.getDirectoryListing();
   $.images.image = repositoriesDir;
   </pre></code>
   
   <code><pre>
   &lt;Alloy&gt;
   		&lt;Window id="nav" backgroundColor="#fff"&gt;
   			&lt;ImageView id="images" height='400' width='400' /&gt;
   		&lt;/Window&gt;
   &lt;/Alloy&gt;
   </pre></code>
   
   [More info](<a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.Filesystem.File-method-getDirectoryListing) on getDirectoryListing(). Hope this helps, Thanks.
   
   
   
   
   </li>
<li>Mauro Piccotti 2015-12-17

   Thank you for your answer Sharif but you did another thing, that slash doesn't solve my problem. I'm quite sure that getFile is bugged, and that question on Appcelerator's forum is exactly like mine. I was trying to work with conventions for avoiding mistakes and some configurations but apparently it work's only on iOS.
   My code:
       requirePath = "/repositories/";
       repositoriesDir = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory + "/repositories/");
       Ti.API.info(repositoriesDir.resolve()); // the same with nativePath
       repositoriesFiles = repositoriesDir.getDirectoryListing();
       Ti.API.info(repositoriesFiles);
   What it print:
       [INFO] :   file:///android_asset/Resources//repositories/
       [INFO] :   </li>
<li>Sharif AbuDarda 2015-12-22

   Hello, According to my code I can take a file from "resmon" folder through "getFile" and use it to another purpose. I tested this with Android 4.4.2. Seeing your code the 
   "repositoriesDir = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory + "/repositories/");" 
   should be 
   "repositoriesDir = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory + requirePath );".
   Thanks.</li>
<li>Mauro Piccotti 2015-12-22

   I'm a bit confused because I'm speaking about listing files inside a folder, and not taking a file. It would be great if somebody would answer my question instead of doing other things, I also linked a discussion about one guy with exactly the same problem...
   I thank in advance anybody who will show me hot to list files inside "lib" directory with Android (in iOS it works). I need it for making a dynamic require of modules and for storing them inside an object literal.</li>
<li>Mauro Piccotti 2016-01-05

   I reproduced the bug in a test environment you can download from here:
   <a href="https://github.com/nonno/Ti.TestProject/tree/dynamic-require-bug" rel="nofollow" target="_blank">https://github.com/nonno/Ti.TestProject/tree/dynamic-require-bug</a>
   (you should click on the label)
   
   It works on iOS, it doesn't work on Android 5. I would be happy if you reopen this bug.</li>
<li>Ashraf Abu 2016-01-13

   With a default alloy project, I ran:-
   <code><pre>
   function doClick(e) {
   var repositoriesDir, repositoriesFiles ;
    
   Ti.API.info("Listing repository files");
    
   
   repositoriesDir = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory );
   Ti.API.info("Listing repository files at "+Ti.Filesystem.resourcesDirectory);
   Ti.API.info("Dir"+repositoriesDir);
   repositoriesFiles = repositoriesDir.getDirectoryListing();
    
   Ti.API.info(repositoriesFiles);
   }
   
   
   $.index.open();
   </pre></code>
   And it works. I get back a list of files, which in this case is just one file <code>TiAPI   :  appicon.png</code>. back. You need to know the correct path the files are in to get them. Or in this case, you need to put the "repositories/" folder in `Resources/' folder. I.e. "Resources/repositories"
   
   </li>
<li>Ashraf Abu 2016-01-13

   Ran on both Alloy and Classic app. No issues.</li>
<li>Mauro Piccotti 2016-02-23

   I tested it with the new sdk 5.2.0.GA on a Samsung Galaxy Tab S2 with Android 5.0, it still doesn't work.</li>
<li>Joshua Quick 2018-06-12

   Ticket [TIMOB-25231] will resolve this issue.
   This fix is scheduled to be in Titanium 7.3.0.</li>
</ol>


<p><a href="/TIMOB/TIMOB-20223.json">JSON Source</a></p>