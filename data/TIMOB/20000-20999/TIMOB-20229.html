---
title: "[TIMOB-20229] Android: Titanium.Network."Cookie" API is not Working."
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-02-29T03:06:20.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.2.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>Android, cookies, webView</td></tr>
<tr><th>Reporter</th><td>Motiur Rahman</td></tr>
<tr><th>Assignee</th><td>Ashraf Abu</td></tr>
<tr><th>Created</th><td>2016-01-13T09:10:42.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-03T00:08:01.000+0000</td></tr>
</table>

<h3>Description</h3>

We tried to setup  cookie on a web view using this method "createCookie", "addHTTPCookie" and "addSystemCookie". But it does not work it only reads the default cookies but not set the cookie. Please take a look my sample code.

*Steps to reproduce*
1. Just run this sample code then check the consol log.
<code><pre>
var win = Ti.UI.createWindow({
	layout : 'vertical'
});
var url = '<a href="http://www.appcelerator.com/" rel="nofollow" target="_blank">http://www.appcelerator.com/</a>'; //Or any html file
var reload = Ti.UI.createButton({
	title : 'reload',
	height : 50,
	width : 100,
	top : 5,
});

reload.addEventListener('click', function() {
	web.url = url;
});

win.add(reload);

var web = Ti.UI.createWebView({
	url : url,
	width : Ti.UI.FILL,
	top : 100,
	height : Ti.UI.FILL,

});

win.add(web);
var i = 1;

web.addEventListener('load', function(e) {

	var d = new Date();
	d.setTime(d.getTime() + (2 * 24 * 60 * 60 * 1000));
	
	// You can try this("addHTTPCookie",  "addSystemCookie") insted of "createCookie"

	var cookie = Ti.Network.createCookie({
		name : 'helloWorld',
		domain : url,
		value : "testCoockie",
		expiryDate : d,

	});

	Ti.API.info("createCookie -&gt; " + JSON.stringify(cookie));

	var cookies = web.evalJS("document.cookie").split(";");
	Ti.API.info("# of cookies -&gt; " + cookies.length);
	for ( i = 0; i &lt;= cookies.length - 1; i++) {
		Ti.API.info("cookie -&gt; " + cookies[i]);
	}

});

win.open();


</pre></code>

Thanks.



<h3>Comments</h3>

<ol>
<li>Ashraf Abu 2016-02-11

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7706" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7706</a></li>
<li>Ashraf Abu 2016-02-29

   PR merged into master</li>
<li>Ashraf Abu 2016-02-29

   Backport 5_2_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/7784" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7784</a>
   [~hpham] for review.</li>
<li>Lokesh Choudhary 2016-03-03

   Verified the fix.
   
   "createCookie", "addHTTPCookie" and "addSystemCookie" works as expected.
   
   Closing.
   
   Environment:
   Appc Studio : 4.5.0.201602170831
   Ti SDK :  5.2.1.v20160228190750
   Ti CLI : 5.0.6
   Alloy : 1.7.33
   MAC El Capitan : 10.11.13
   Appc NPM : 4.2.3
   Appc CLI : 5.2.0
   Node: 4.2.2
   Nexus 6P - Android 6.0.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-20229.json">JSON Source</a></p>