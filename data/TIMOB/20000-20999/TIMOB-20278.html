---
title: "[TIMOB-20278] Android: java.lang.IllegalArgumentException when ti.map and ti.geofence modules were added"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-10-11T13:02:37.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Eduardo Gomez</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2016-01-27T23:51:42.000+0000</td></tr>
<tr><th>Updated</th><td>2016-10-11T22:12:59.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Steps to reproduce</h4>
1) Create a sample app 
2) Attach both modules
3) Run through CLI: $ appc run -p android -T device
4) Monitor console output

<h4>Stack Trace</h4>
<code><pre>
[ERROR] Failed to run dexer:
[ERROR]   
[ERROR] UNEXPECTED TOP-LEVEL EXCEPTION:
[ERROR] java.lang.IllegalArgumentException: already added: Lcom/google/android/gms/maps/LocationSource;
[ERROR]         at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:122)
[ERROR]         at com.android.dx.dex.file.DexFile.add(DexFile.java:161)
[ERROR]         at com.android.dx.command.dexer.Main.processClass(Main.java:732)
[ERROR]         at com.android.dx.command.dexer.Main.processFileBytes(Main.java:673)
[ERROR]         at com.android.dx.command.dexer.Main.access$300(Main.java:83)
[ERROR]         at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:602)
[ERROR]         at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:284)
[ERROR]         at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:166)
[ERROR]         at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:144)
[ERROR]         at com.android.dx.command.dexer.Main.processOne(Main.java:632)
[ERROR]         at com.android.dx.command.dexer.Main.processAllFiles(Main.java:510)
[ERROR]         at com.android.dx.command.dexer.Main.runMonoDex(Main.java:280)
[ERROR]         at com.android.dx.command.dexer.Main.run(Main.java:246)
[ERROR]         at com.android.dx.command.dexer.Main.main(Main.java:215)
[ERROR]         at com.android.dx.command.Main.main(Main.java:106)
[ERROR] 1 error; aborting
</pre></code>

<h4>Work around</h4>
Downgrading ti.map to 2.3.1 instead of 2.3.4
<code><pre>
&lt;modules&gt; 
&lt;module platform="android" version="2.3.1"&gt;ti.map&lt;/module&gt; 
&lt;module platform="android" version="1.1.2"&gt;ti.geofence&lt;/module&gt; 
&lt;/modules&gt; 
</pre></code>

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2016-10-11

   Fixed by <a href="https://github.com/appcelerator-modules/ti.geofence/pull/36" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.geofence/pull/36</a></li>
<li>Lokesh Choudhary 2016-10-11

   Verified the fix.
   
   No <code>java.lang.IllegalArgumentException</code> when ti.map & ti.admob are added to the project.
   Closing.
   
   Environment:
   Appc Studio : 4.8.0.201610060953
   Ti SDK :  6.0.0.v20161011102836
   Ti CLI : 5.0.10
   Alloy : 1.9.2
   MAC El Capitan : 10.11.6
   Appc NPM : 4.2.8-7
   Appc CLI : 6.0.0-57
   Node: 4.6.0
   Nexus 6 - Android 6.0.1
   ti.map : 3.0.1
   ti.geofence : 2.0.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-20278.json">JSON Source</a></p>