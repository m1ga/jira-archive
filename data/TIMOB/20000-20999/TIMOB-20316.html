---
title: "[TIMOB-20316] Windows: Make use of an LRU cache for cached property values"
---
<table>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Won't Do</td></tr>
<tr><th>Resolution Date</th><td>2020-06-30T14:48:51.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Kota Iguchi</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2016-02-02T17:51:50.000+0000</td></tr>
<tr><th>Updated</th><td>2020-06-30T14:48:52.000+0000</td></tr>
</table>

<h3>Description</h3>

Kota made great strides in eliminating a large source of memory hogging going on: storing all constant property values in fields of the enclosing type. We'd not only store them for the class definition but also for every instance! Now that we store them in an unordered_map and generate them on-demand they're only cached once per class. But it'd be a good improvement to move to something like an LRU cache to evict older constants out of the in-memory cache if we ever need to free some memory.
 It'd be good to have more details on just how much memory these are taking up and what the speed/perf overhead of always generating them on-demand would be (or if that'd even be feasible whether the constants would be considered equal when regenerated).

<h3>Comments</h3>

<ol>
<li>Kota Iguchi 2016-03-08

   <a href="https://github.com/appcelerator/HAL/pull/61" rel="nofollow" target="_blank">https://github.com/appcelerator/HAL/pull/61</a></li>
<li>Ewan Harris 2016-07-04

   [~kota] It looks like <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/576" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/576</a> didn't get merged? Does this ticket need to be moved out of 5.4.0?</li>
<li>Kota Iguchi 2016-07-05

   Right. Reopened and moved out of 5.4.0.</li>
</ol>


<p><a href="/TIMOB/TIMOB-20316.json">JSON Source</a></p>