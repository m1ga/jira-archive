---
title: "[TIMOB-20405] iconInsets: Weird behaviour when not repositioning but also enlarging icon"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-02-19T03:48:31.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.2.1, Release 5.4.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-02-15T14:12:17.000+0000</td></tr>
<tr><th>Updated</th><td>2016-03-01T23:31:13.000+0000</td></tr>
</table>

<h3>Description</h3>

Using the new property introduced by TIMOB-18515 you get strange behaviour when you play with <code>iconSets</code> to not only reposition but also enlarge the icon:

<code><pre>
"Tab": {
  iconInsets: {
    top: 2,
    right: -4,
    bottom: -10,
    left: -4
  }
}
</pre></code>

The icon resizes when you select/unselect the tab. And when you repeatedly tap on the icon it will continue to grow. See the attached video. While the behavior is native, we should only allow the <code>top</code> and <code>left</code> property to calculate the negative <code>bottom</code> and <code>right</code> automatically.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-20405_58239/insets.mov">insets.mov</td></td><td>2016-02-15T14:12:09.000+0000</td><td>359672</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2016-02-15

   If it is only meant to be used to reposition we should expose only top and left and calculate bottom and right. (negative of their counterparts).</li>
<li>Hans Knöchel 2016-02-15

   Just created a native demo project, it's a native behavior: <a href="https://www.dropbox.com/s/bvqi8ro5a7muplo/Native.mov?dl=0" rel="nofollow" target="_blank">https://www.dropbox.com/s/bvqi8ro5a7muplo/Native.mov?dl=0</a>
   
   What we can do (and [~cng] suggested) is to update the docs and link to the Apple docs to ensure people don't set "bad" values. Or (what [~fokkezb] suggested) to handle it internally. What's the best solution? I would stick to the native behavior if possible. Calculating stuff internally can always cause more trouble.</li>
<li>Fokke Zandbergen 2016-02-16

   Let's just remove right and bottom and calculate those as the negative of what you set to left and top. That way you can still off-center it any way you like but not stretch and get strange behavior.
   
   We could do this in 5.2.1 since it would not break anything.</li>
<li>Hans Knöchel 2016-02-16

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7742" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7742</a>
   Demo: 
   <code><pre>
   Titanium.UI.setBackgroundColor('#fff');
   var tabGroup = Titanium.UI.createTabGroup();
   
   var win1 = Titanium.UI.createWindow();
   var tab1 = Titanium.UI.createTab({
   	window: win1,
   	icon:'images/tabs/KS_nav_ui.png',
   	iconInsets: {
   		top: 6
   	}
   });
   
   var win2 = Titanium.UI.createWindow();
   var tab2 = Titanium.UI.createTab({
   	window: win2,
   	icon:'images/tabs/KS_nav_ui.png',
   	title: "Test"
   });
   
   tabGroup.addTab(tab1);
   tabGroup.addTab(tab2);
   
   tabGroup.open();
   </pre></code>
   
   You guys decide if it's 5.2.1 or 5.4.0 :-)</li>
<li>Chee Kiat Ng 2016-02-19

   PR Merged!</li>
<li>Hans Knöchel 2016-02-23

   5.2.1 backport: <a href="https://github.com/appcelerator/titanium_mobile/pull/7769" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7769</a></li>
<li>Eric Wieber 2016-03-01

   Verified fixed, using:
   
   MacOS 10.11.3 (15D21)
   Studio 4.5.0.201602170821
   Ti SDK 5.2.1.v20160228190750
   Appc NPM 4.2.3
   Appc CLI 5.2.0
   Alloy 1.7.33
   Xcode 7.2 (7C68)
   
   Icons no longer change size when tapping on them multiple times, with the iconInsets property set. Tested using the provided code and modifying the two-tab sample project.</li>
</ol>


<p><a href="/TIMOB/TIMOB-20405.json">JSON Source</a></p>