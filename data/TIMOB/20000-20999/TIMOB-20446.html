---
title: "[TIMOB-20446] iOS: HTTPClient fails to deallocate"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2017-04-13T05:32:12.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>5.1.0, 5.2.0, HttpClient, ios, leak</td></tr>
<tr><th>Reporter</th><td>Mike Stancliffe</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2016-02-18T21:39:19.000+0000</td></tr>
<tr><th>Updated</th><td>2017-05-31T23:17:42.000+0000</td></tr>
</table>

<h3>Description</h3>

HTTPClient iOS fails to deallocate.  running the sample app below and using instruments, TiNetworkHTTPClientProxy never goes down, even after status is DONE, slowly eating up memory

See this behaviour in 5.2.0 RC(5.2.0.v20160216202526) as well as 5.1.2 

<code><pre>
var win1 = Titanium.UI.createWindow({  
    backgroundColor:'#fff'
});

var label1 = Titanium.UI.createLabel({
	color:'#999',
	text:'Ping Test',
	font:{fontSize:20,fontFamily:'Helvetica Neue'},
	textAlign:'center',
});

win1.add(label1);

function ping() {

  var pingTimeStart = (new Date).getTime();
  var pingTimeEnd = 0;
  var url = '<a href="http://www.google.com/" rel="nofollow" target="_blank">http://www.google.com/</a>';
  var pingTest = Ti.Network.createHTTPClient();


  pingTest.onload = function(e) {
    pingTimeEnd = (new Date).getTime();
    Ti.API.warn('PING COMPLETE : '+(pingTimeEnd-pingTimeStart));
  };
  pingTest.onerror = function(e) {
    pingTimeEnd = (new Date).getTime();
    Ti.API.error('PING FAIL : ' + (pingTimeEnd - pingTimeStart));
  };

  pingTest.open("HEAD", url);
  pingTest.timeout = 2000;
  pingTest.send();
}


var pingAway = setInterval(function() {
    ping();
  }, 10000);

win1.open();

</pre></code>

<h3>Comments</h3>

<ol>
<li>Vijay Singh 2017-04-13

   This is duplicate of TIMOB-24364.</li>
<li>Lee Morris 2017-05-31

   Closing ticket as duplicate.</li>
</ol>


<p><a href="/TIMOB/TIMOB-20446.json">JSON Source</a></p>