---
title: "[TIMOB-20449] Ti.UI.Animation.anchorPoint is not working on Android"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2018-04-19T13:43:13.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.1.2</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>Ti.UI.Animation.anchorPoint</td></tr>
<tr><th>Reporter</th><td>CREATIVE KAIZEN</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2016-02-23T15:40:42.000+0000</td></tr>
<tr><th>Updated</th><td>2018-04-19T13:43:14.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Steps to Reproduce</h4>
Use the code from documentation (<a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.UI.Animation-property-anchorPoint)

Using an anchorPoint (Android and iOS)
<code><pre>
var animationType = [
  { name: 'Top Left', anchorPoint: {x:0, y:0} },
  { name: 'Top Right', anchorPoint: {x:1, y:0} },
  { name: 'Bottom Left', anchorPoint: {x:0, y:1} },
  { name: 'Bottom Right', anchorPoint: {x:1, y:1} },
  { name: 'Center', anchorPoint: {x:0.5, y:0.5} }
];
var animationTypeLength = animationType.length;
var animationCount = 0;
var animationTypePointer = 0;

var t = Ti.UI.create2DMatrix();
t = t.rotate(90);

// animation properties
var a = {
  transform: t,
  duration: 2000,
  autoreverse: true
};

Ti.UI.backgroundColor = 'white';
var win = Ti.UI.createWindow();

var view = Ti.UI.createView({
  backgroundColor:'#336699',
  width:100, height:100
});
win.add(view);

var button = Ti.UI.createButton({
  title:'Animate ' + animationType[animationTypePointer].name,
  height: (Ti.UI.Android) ? 80 : 40,
  width: (Ti.UI.Android) ? 300 : 200,
  top:30
});
win.add(button);

function updateButton(name){
  button.title = 'Animate ' + name;
}

button.addEventListener('click', function(){
  // set new anchorPoint on animation for Android
  a.anchorPoint = animationType[animationTypePointer].anchorPoint;

  // set new anchorPoint on view for iOS
  view.anchorPoint = animationType[animationTypePointer].anchorPoint;

  animationCount++;

  // determine position of next object in animationType array or return to first item
  // using modulus operator
  animationTypePointer = animationCount % animationTypeLength;

  // animate view, followed by callback to set next button title
  view.animate(a, function(){
    updateButton(animationType[animationTypePointer].name);
  });
});

win.open();
</pre></code>

<h4>Actual Result</h4>
On Android anchorPoint is always in the center of view no matter what value is set. Such situation occurs on real device (Android 5.1.1) and on GenyMotion devices (Android 4.1, 5.2).
On iOS code works as it should.
The bug may be old because I encountered it with other project but gave up that time (<a href="https://archive.appcelerator.com/topic/3536/anchor-point-is-not-working-on-android/1)" rel="nofollow" target="_blank">https://archive.appcelerator.com/topic/3536/anchor-point-is-not-working-on-android/1)</a>

<h4>Expected Result</h4>
Anchor point should work and view should rotate around the anchor point no matter if it is iOS or Android.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-20449_58301/.log">.log</td></td><td>2016-02-23T15:41:38.000+0000</td><td>7627791</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-20449_58302/diagnostic4019658390838144197.log">diagnostic4019658390838144197.log</td></td><td>2016-02-23T15:41:51.000+0000</td><td>146105</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>CREATIVE KAIZEN 2016-04-27

   Hello,
   Is there any chance to fix that bug anytime soon? It blocks all rotations on Android, except with centered anchorPoint.
   
   Thansk</li>
<li>Tim Poulsen (ACV) 2016-06-08

   This is a parity issue, or perhaps a documentation issue. On Android, you set the anchor point on the view being animated. On iOS, you set the anchor point on the animation object. At least, that's how it used to work back when I wrote this gist <a href="https://gist.github.com/skypanther/08a0334f674afb394445" rel="nofollow" target="_blank">https://gist.github.com/skypanther/08a0334f674afb394445</a></li>
<li>VINCENZO QUACQUARELLI 2016-06-12

   I have the same problem. I need a solution, please.</li>
<li>CREATIVE KAIZEN 2016-06-13

   @Tim:
   1. I think you mix things. On Android you use anchor point on the animation object, and on the view for iOS.
   2. My code fulfills both situations: adding anchor point to view and animation (same as yours).
   3. Your code doesn't work properly on Android due same issue.</li>
<li>Tim Poulsen (ACV) 2016-06-13

   Like I said, this is old code that I haven't looked at in years. That code used to work; I used it in an app as well as in demonstrations in the Titanium classes I taught. 
   
   So, this is a regression.</li>
<li>Yordan Banev 2018-04-19

   Closing this ticket as duplicate.</li>
</ol>


<p><a href="/TIMOB/TIMOB-20449.json">JSON Source</a></p>