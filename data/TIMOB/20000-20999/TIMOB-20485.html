---
title: "[TIMOB-20485] LivePhoto: Proxy should override apiName"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-08-05T18:30:51.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios, livephotos, qe-5.4.0</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-02-29T13:59:21.000+0000</td></tr>
<tr><th>Updated</th><td>2016-08-05T18:30:57.000+0000</td></tr>
</table>

<h3>Description</h3>

When I read <code>Ti.UI.iOS.LivePhoto.apiName</code> it return <code>Ti.Proxy</code> and logs:

<code><pre>
[ERROR] Subclasses must override the apiName API endpoint.
</pre></code>

Which comes from:
<a href="https://github.com/appcelerator/titanium_mobile/blob/bdfbe4d530e81caf440b595351bc84bef79f27d4/iphone/Classes/TiProxy.m#L1310" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/bdfbe4d530e81caf440b595351bc84bef79f27d4/iphone/Classes/TiProxy.m#L1310</a>



<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2016-02-29

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7785" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7785</a></li>
<li>Hans Knöchel 2016-08-04

   Demo:
   <code><pre>
   Ti.API.warn(Ti.UI.iOS.LivePhoto.apiName);
   </pre></code>
   
   Expected result: "Ti.UI.iOS.LivePhoto"
   
   *EDIT*: See the below demo-code with the current usage instead.</li>
<li>Josh Longton 2016-08-04

   *Reopening*, <code>Ti.API.warn(Ti.UI.iOS.LivePhoto.apiName)</code> returns an undefined object error.
   
   *ENV*
   <code><pre>
   iPhone 6s (9.3.1)
   iOS Simulator (9.3)
    Mac OSX El Capitan 10.11.6
   Studio: 4.7.0.201607250649
    Ti SDK: 5.4.0.v20160804021257
    Appc NPM: 4.2.7
   Appc CLI: 5.4.0-38
   Node: v4.4.4
   </pre></code>
   
   *Error*
   
   <code><pre>
   [ERROR] :  Script Error {
   [ERROR] :      column = 461;
   [ERROR] :      line = 1;
   [ERROR] :      message = "undefined is not an object (evaluating 'Ti.UI.iOS.LivePhoto.apiName')";
   [ERROR] :      sourceURL = "file:///var/containers/Bundle/Application/AE7515B1-3A96-48B8-9E63-1862B94724E5/TIMOB-20396.app/app.js";
   [ERROR] :      stack = "success@file:///var/containers/Bundle/Application/AE7515B1-3A96-48B8-9E63-1862B94724E5/TIMOB-20396.app/app.js:1:461";
   [ERROR] :  }
   </pre></code>
   
   
   *App.js used*
   
   <code><pre>
   Ti.API.warn(Ti.UI.iOS.LivePhoto.apiName);
   </pre></code>
   
   <code><pre>
   var window = Ti.UI.createWindow({
       backgroundColor: "white"
   });
   
   var btn1 = Ti.UI.createButton({
       title: "Select live photo!",
       top: 30
   });
   
   btn1.addEventListener("click", openGallery);
   window.add(btn1);
   window.open();
   
   function openGallery() {
       Ti.Media.openPhotoGallery({
           mediaTypes: [Ti.Media.MEDIA_TYPE_PHOTO, Ti.Media.MEDIA_TYPE_LIVEPHOTO],
           success: function(e) {
               var livePhoto = e.livePhoto // Live photo of type Ti.UI.iOS.LivePhoto
   
               if (livePhoto) {
                   var livePhotoView = Ti.UI.iOS.createLivePhotoView({
                       livePhoto: livePhoto,
                       muted: true,
                       width: 300
                   });
   
                   livePhotoView.addEventListener("start", function(e) {
                       Ti.API.warn("-- Start playback --");
                       Ti.API.warn(e);
                   });
   
                   livePhotoView.addEventListener("stop", function(e) {
                       Ti.API.warn("-- Stop playback --");
                       Ti.API.warn(e);
                   });
                window.add(livePhotoView);
                Ti.API.warn(Ti.UI.iOS.LivePhoto.apiName);
               }
           }
       });
   }
   </pre></code>
   </li>
<li>Hans Knöchel 2016-08-05

   Hey Josh, sorry, my mistake in providing the test-case. Of course, we cannot check the <code>apiName</code> on the LivePhoto itself. Updated demo-code attached. Now, we log the <code>apiName</code> after a live-photo is selected from the library, which returns a <code>Ti.UI.iOS.LivePhoto</code> instance. Thanks!
   
   Demo:
   <code><pre>
   var window = Ti.UI.createWindow({
       backgroundColor: "white"
   });
    
   var btn1 = Ti.UI.createButton({
       title: "Select live photo!",
       top: 30
   });
    
   btn1.addEventListener("click", openGallery);
   window.add(btn1);
   window.open();
    
   function openGallery() {
       Ti.Media.openPhotoGallery({
           mediaTypes: [Ti.Media.MEDIA_TYPE_PHOTO, Ti.Media.MEDIA_TYPE_LIVEPHOTO],
           success: function(e) {
               var livePhoto = e.livePhoto // Live photo of type Ti.UI.iOS.LivePhoto
              
               // Log the apiName
               Ti.API.warn(livePhoto.apiName);
    
               if (livePhoto) {
                   var livePhotoView = Ti.UI.iOS.createLivePhotoView({
                       livePhoto: livePhoto,
                       muted: true,
                       width: 300
                   });
    
                   livePhotoView.addEventListener("start", function(e) {
                       Ti.API.warn("-- Start playback --");
                       Ti.API.warn(e);
                   });
    
                   livePhotoView.addEventListener("stop", function(e) {
                       Ti.API.warn("-- Stop playback --");
                       Ti.API.warn(e);
                   });
                window.add(livePhotoView);
               }
           }
       });
   }
   </pre></code></li>
<li>Josh Longton 2016-08-05

   Verified as fixed, thanks [~hansknoechel].
   Tested on:
   <code><pre>
   iPhone 6s plus (9.3.1)
    Mac OSX El Capitan 10.11.6
   Studio: 4.7.0.201607250649
    Ti SDK: 5.4.0.v20160804185318
    Appc NPM: 4.2.7
   Appc CLI: 5.4.0-40
   Node: v4.4.4
   </pre></code>
   
   *Closing ticket*</li>
</ol>


<p><a href="/TIMOB/TIMOB-20485.json">JSON Source</a></p>