---
title: "[TIMOB-20544] Align permission methods Ti.Media.AudioRecorder with the others"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-05-06T14:35:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.2.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Components</th><td>Android, iOS, Windows</td></tr>
<tr><th>Labels</th><td>android, merge-6.1.0</td></tr>
<tr><th>Reporter</th><td>Fokke Zandbergen</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2016-03-10T12:32:34.000+0000</td></tr>
<tr><th>Updated</th><td>2017-05-11T00:02:45.000+0000</td></tr>
</table>

<h3>Description</h3>

To request permission for using the currently iOS and Windows only Ti.Media.AudioRecorder you need [Ti.Media.requestAuthorization()](<a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.Media-method-requestAuthorization)

To achieve parity and consistency with other new permission APIs we need:

* To deprecate <code>Ti.Media.requestAuthorization()</code>
* To add <code>Ti.Media.requestRecorderPermission()</code> for iOS and Windows

While we're at it we should also resolve TIMOB-1028 to bring Ti.Media.AudioRecorder to Android

Reported on SO:
<a href="http://stackoverflow.com/questions/35890378/titanium-studio-audio-recording-request-permission-on-android-6-0" rel="nofollow" target="_blank">http://stackoverflow.com/questions/35890378/titanium-studio-audio-recording-request-permission-on-android-6-0</a>

<h3>Comments</h3>

<ol>
<li>Fokke Zandbergen 2016-04-19

   This needs more priority:
   
   * <a href="http://stackoverflow.com/questions/36683249/android-6-0-audio-permissions-and-titanium-jar-in-5-2-2ga" rel="nofollow" target="_blank">http://stackoverflow.com/questions/36683249/android-6-0-audio-permissions-and-titanium-jar-in-5-2-2ga</a>
   * <a href="http://stackoverflow.com/questions/35890378/how-to-request-run-time-recording-permission-on-android-6-0" rel="nofollow" target="_blank">http://stackoverflow.com/questions/35890378/how-to-request-run-time-recording-permission-on-android-6-0</a></li>
<li>Ashraf Abu 2016-04-27

   With TIMOB-20320 merged into 5.4.0, you can now do this:-
   <code><pre>
   var audioPermission = "android.permission.RECORD_AUDIO";
   var hasAudioPerm = Ti.Android.hasPermission(audioPermission);
   var permissionsToRequest = [];
   if (!hasAudioPerm) {
       permissionsToRequest.push(audioPermission);
   } 
   if (permissionsToRequest.length &gt; 0) {
       Ti.Android.requestPermissions(permissionsToRequest, function(e) {
           if (e.success) {
               Ti.API.info("SUCCESS");
           } else {
               Ti.API.info("ERROR: " + e.error);
           }
       });
   }
   </pre></code>
   
   That would give you RECORD_AUDIO permission.
   
   That aside, from my understanding based on this doc, <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.Media.AudioRecorder is not supported/available in Android. Am I missing something? [~fokkezb]
   </li>
<li>Fokke Zandbergen 2016-05-05

   We should implement Ti.Media.AudioRecorder for Android first and then align the permission methods with the other APIs
   
   TIMOB-1028</li>
<li>Ashraf Abu 2016-05-13

   [~rramirez] This would allow you to get the other permissions in 5.4.0. If everything else is okay, I would think this ticket does not require any more action done on it. Let me know if it suffices. 
   <code><pre>
   
   var audioPermission = "android.permission.RECORD_AUDIO";
   var hasAudioPerm = Ti.Android.hasPermission(audioPermission);
   
   var storagePermission = "android.permission.READ_EXTERNAL_STORAGE";
   var hasStoragePerm = Ti.Android.hasPermission(storagePermission);
   
   var permissionsToRequest = [];
   if (!hasAudioPerm) {
       permissionsToRequest.push(audioPermission);
   } 
   if (!hasStoragePerm) {
       permissionsToRequest.push(storagePermission);
   } 
   if (permissionsToRequest.length &gt; 0) {
       Ti.Android.requestPermissions(permissionsToRequest, function(e) {
           if (e.success) {
               Ti.API.info("SUCCESS");
           } else {
               Ti.API.info("ERROR: " + e.error);
           }
       });
   }
   </pre></code></li>
<li>Gary Mathews 2016-12-28

   titanium_mobile_windows: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/909" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/909</a>
   
   Merged!</li>
<li>Chee Kiat Ng 2016-12-29

   Looks like we still need iOS to be aligned here. [~vijaysingh]</li>
<li>Vijay Singh 2016-12-29

   IN iOS I can see -
   Ti.Media.requestAuthorization()  is deprecated and new api  Ti.Media. requestAudioPermissions() introduced in "5.1.0" .
   </li>
<li>Chee Kiat Ng 2016-12-29

   Right but in this scenario i think we wanted requestRecorderPermissions().</li>
<li>Vijay Singh 2017-01-23

   PR (for iOS) : <a href="https://github.com/appcelerator/titanium_mobile/pull/8767" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8767</a>
   
   Test code - 
   
   
   <code><pre>
   var win = Ti.UI.createWindow({
       backgroundColor: '#fff'
   });
   
   var btn = Ti.UI.createButton({
       title: 'Trigger'
   });
   
   btn.addEventListener('click', function() {
       Ti.Media.requestAudioRecorderPermissions(function(e){
           if (e.success) {
               Ti.API.info('permission granted');
           }
           else {
               console.error(e);
           }
   
       });
   });
   
   win.add(btn);
   win.open();
   </pre></code></li>
<li>Hans Knöchel 2017-01-23

    Some issue that appear in the iOS PR but will other effect other platforms:
    - We use the plural when requesting permissions (e.g. <code>requestLocationPermissions</code>, <code>requestCalendarPermissions</code> and <code>requestContactsPermissions</code>), but in this case it's singular
    - The method is called <code>requestRecorderPermission</code>, but it should rather be <code>recordAudioRecorderPermissions</code> to avoid API confusions
    - There is still no Android and Windows implementation. We should use this ticket and PR to align that platform as well
    
    So question: [~gmathews] Looking at the merge-date of your Windows PR, it should not be included in any SDK so far. Can you still rename it without causing problems? I don't see docs-updates, so we might want to add those as well.</li>
<li>Kota Iguchi 2017-03-24

    [~hansknoechel],
    
    {quote}
    The method is called <code>requestRecorderPermission</code>, but it should rather be <code>recordAudioRecorderPermissions</code> to avoid API confusions
    {quote}
    
    <code>requestAudioRecorderPermissions</code>, right? (I saw your comment on [PR 8767](<a href="https://github.com/appcelerator/titanium_mobile/pull/8767))" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8767))</a>
    That sounds good to me, pushed <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/965" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/965</a>
    </li>
<li>Hans Knöchel 2017-03-24

    Thanks Kota, looks good! Waiting for [~vijaysingh] to do the iOS change then, and Android of course. </li>
<li>Vijay Singh 2017-03-27

    iOS changes done.</li>
<li>Vijay Singh 2017-04-12

    [~hansknoechel]
    Backported PR(6_1_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/8955" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8955</a></li>
<li>Samir Mohammed 2017-05-05

    Verified on Windows using SDK  6.2.0.v20170505081953 and 6.1.0.v20170504175418 </li>
<li>Samir Mohammed 2017-05-11

    Verified on Titanium SDK: 6.2.0.v20170510084833 and 6.1.0.v20170509170935. Windows was verified earlier on SDK 6.2.0.v20170505081953 and 6.1.0.v20170504175418. Test and other information can be found at: 
    
    6_1_X (Windows): <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/979" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/979</a> 
    6_1_X(iOS): <a href="https://github.com/appcelerator/titanium_mobile/pull/8955" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8955</a>
    Master(Windows): <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/965" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/965</a>
    Master(iOS): <a href="https://github.com/appcelerator/titanium_mobile/pull/8767" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8767</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-20544.json">JSON Source</a></p>