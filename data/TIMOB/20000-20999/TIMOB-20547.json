{
	"id": "155609",
	"key": "TIMOB-20547",
	"fields": {
		"issuetype": {
			"id": "2",
			"description": "A new feature of the product, which has yet to be developed.",
			"name": "New Feature",
			"subtask": false
		},
		"project": {
			"id": "10153",
			"key": "TIMOB",
			"name": "Titanium SDK/CLI",
			"projectCategory": {
				"id": "10100",
				"description": "Titanium and related SDKs used in application development",
				"name": "Client"
			}
		},
		"fixVersions": [
			{
				"id": "17608",
				"name": "Release 6.1.0",
				"archived": false,
				"released": true,
				"releaseDate": "2017-05-26"
			}
		],
		"resolution": {
			"id": "1",
			"description": "A fix for this issue is checked into the tree and tested.",
			"name": "Fixed"
		},
		"resolutiondate": "2017-01-11T04:25:30.000+0000",
		"created": "2016-03-10T19:22:46.000+0000",
		"priority": {
			"name": "Medium",
			"id": "3"
		},
		"labels": [],
		"versions": [],
		"issuelinks": [
			{
				"id": "53320",
				"type": {
					"id": "10003",
					"name": "Relates",
					"inward": "relates to",
					"outward": "relates to"
				},
				"outwardIssue": {
					"id": "164344",
					"key": "TIMOB-24094",
					"fields": {
						"summary": "Ti.TouchID module timeout extension",
						"status": {
							"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
							"name": "Closed",
							"id": "6",
							"statusCategory": {
								"id": 3,
								"key": "done",
								"colorName": "green",
								"name": "Done"
							}
						},
						"priority": {
							"name": "None",
							"id": "6"
						},
						"issuetype": {
							"id": "4",
							"description": "An improvement or enhancement to an existing feature or task.",
							"name": "Improvement",
							"subtask": false
						}
					}
				}
			}
		],
		"assignee": {
			"name": "hknoechel",
			"key": "hansknoechel",
			"displayName": "Hans Knöchel",
			"active": true,
			"timeZone": "Europe/Berlin"
		},
		"updated": "2017-02-02T15:23:45.000+0000",
		"status": {
			"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
			"name": "Closed",
			"id": "6",
			"statusCategory": {
				"id": 3,
				"key": "done",
				"colorName": "green",
				"name": "Done"
			}
		},
		"components": [
			{
				"id": "10206",
				"name": "iOS",
				"description": "iOS Platform"
			}
		],
		"description": "Customers are unable to secure a key-value pair in the Keychain and then unlock it using Touch Id or passcode. \r\n\r\nHere is a talk by Apple at WWDC 2014 that describes what users are looking to do. \r\nhttps://developer.apple.com/videos/play/wwdc2014/711/",
		"attachment": [],
		"flagged": false,
		"summary": "iOS: Add Keychain-access to Ti.TouchID, add passcode-fallback mode, expose new iOS 10 TouchID API's",
		"creator": {
			"name": "rramirez",
			"key": "rramirez",
			"displayName": " Ricardo Ramirez",
			"active": true,
			"timeZone": "America/Los_Angeles"
		},
		"subtasks": [],
		"reporter": {
			"name": "rramirez",
			"key": "rramirez",
			"displayName": " Ricardo Ramirez",
			"active": true,
			"timeZone": "America/Los_Angeles"
		},
		"environment": "Xcode 7.2\r\niOS 9.4",
		"closedSprints": [
			{
				"id": 787,
				"state": "closed",
				"name": "2017 Sprint 01 SDK",
				"startDate": "2016-12-31T02:15:33.446Z",
				"endDate": "2017-01-14T02:15:00.000Z",
				"completeDate": "2017-01-15T00:00:19.006Z",
				"originBoardId": 114
			}
		],
		"comment": {
			"comments": [
				{
					"id": "379532",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "We have [ti.touchid|https://github.com/appcelerator-modules/ti.touchid] for fingerprint-secured access and there is a [native module|https://github.com/pegli/ti_keychain] that supports keychain access. ",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-03-11T12:48:47.000+0000",
					"updated": "2016-03-11T12:48:47.000+0000"
				},
				{
					"id": "386062",
					"author": {
						"name": "rramirez",
						"key": "rramirez",
						"displayName": " Ricardo Ramirez",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "[~cng] [~hansknoechel] Any update here ? \r\n\r\nThe Appcelerator ti.touchid module only uses LocalAuthentication and does not involve the KeyChain so its basically useless if you want to use it to replace a password. \r\n\r\nThe https://github.com/pegli/ti_keychain native module wraps the KeyChain but does not utilize TouchId.",
					"updateAuthor": {
						"name": "rramirez",
						"key": "rramirez",
						"displayName": " Ricardo Ramirez",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2016-05-18T16:49:38.000+0000",
					"updated": "2016-05-18T16:49:38.000+0000"
				},
				{
					"id": "386065",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "[~rramirez] iOS does not expose the keychain together with the touchID-dialog (same natively). So Apple does not see that use-case, yet. Similar discussion here: https://github.com/appcelerator-modules/ti.touchid/issues/15",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-05-18T17:08:17.000+0000",
					"updated": "2016-05-18T17:08:17.000+0000"
				},
				{
					"id": "386068",
					"author": {
						"name": "CollinPrice",
						"key": "collinprice",
						"displayName": "Collin Price",
						"active": true,
						"timeZone": "America/Toronto"
					},
					"body": "Hans, this functionality was added in iOS 9. Apple created a sample project to demonstrate it.\r\n\r\nhttps://developer.apple.com/library/ios/samplecode/KeychainTouchID/Introduction/Intro.html",
					"updateAuthor": {
						"name": "CollinPrice",
						"key": "collinprice",
						"displayName": "Collin Price",
						"active": true,
						"timeZone": "America/Toronto"
					},
					"created": "2016-05-18T17:12:52.000+0000",
					"updated": "2016-05-18T17:12:52.000+0000"
				},
				{
					"id": "386069",
					"author": {
						"name": "CollinPrice",
						"key": "collinprice",
						"displayName": "Collin Price",
						"active": true,
						"timeZone": "America/Toronto"
					},
					"body": "Also, issue 15 on ti.touchid is completely unrelated. Replacing a password was just an example I brought up. What we are looking for is to secure a key-value pair in the keychain that is only accessible through TouchId.",
					"updateAuthor": {
						"name": "CollinPrice",
						"key": "collinprice",
						"displayName": "Collin Price",
						"active": true,
						"timeZone": "America/Toronto"
					},
					"created": "2016-05-18T17:17:41.000+0000",
					"updated": "2016-05-18T17:17:41.000+0000"
				},
				{
					"id": "386077",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "Hey Collin, thanks for the feedback! So the Github reference dealt with the ability to enter the native PIN, so thats why I called it \"similar\". I checked the example. So it is possible to save a password and in the keychain and fetch it using TouchID. Is that what you want? And how would you like to access it from the JS? As more infos the better. Thanks!",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-05-18T18:19:51.000+0000",
					"updated": "2016-05-18T18:19:51.000+0000"
				},
				{
					"id": "386082",
					"author": {
						"name": "CollinPrice",
						"key": "collinprice",
						"displayName": "Collin Price",
						"active": true,
						"timeZone": "America/Toronto"
					},
					"body": "Ultimately our ask is for iOS/Android KeyChain access. Both platforms allow data to be encrypted within a keychain at a variety of levels.\r\n\r\n*Basic*: Securely store key-value pairs in the Keychain. These values are only released once a device has been unlocked.\r\n*Enchanced*: These values are only released once a device has been unlocked with a passcode/pattern/fingerprint and the key-values are removed automatically if the passcode/pattern/fingerprint are ever removed.\r\n*Biometric*: same as Enhanced but only applies to fingerprints.\r\n\r\nIf you're looking at TouchId only an API might look like this:\r\n\r\nisTouchIdSupported() : boolean\r\nisTouchIdEnabled() : boolean\r\nsaveWithTouchId(key, value) : boolean\r\nreadWithTouchId(key, callback) : void // where callback returns a success or error\r\n\r\nAndroid M (SDK 23) has introduced similar support for fingerprint access and keychain integration so a cross-platform module could be created.",
					"updateAuthor": {
						"name": "CollinPrice",
						"key": "collinprice",
						"displayName": "Collin Price",
						"active": true,
						"timeZone": "America/Toronto"
					},
					"created": "2016-05-18T18:41:23.000+0000",
					"updated": "2016-05-18T18:41:23.000+0000"
				},
				{
					"id": "391114",
					"author": {
						"name": "ingo",
						"key": "ingo",
						"displayName": "Ingo Muschenetz",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "[~hansknoechel] Can we use Hyperloop here?",
					"updateAuthor": {
						"name": "ingo",
						"key": "ingo",
						"displayName": "Ingo Muschenetz",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2016-07-20T19:02:44.000+0000",
					"updated": "2016-07-20T19:02:44.000+0000"
				},
				{
					"id": "394650",
					"author": {
						"name": "rramirez",
						"key": "rramirez",
						"displayName": " Ricardo Ramirez",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Any update ? ",
					"updateAuthor": {
						"name": "rramirez",
						"key": "rramirez",
						"displayName": " Ricardo Ramirez",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2016-08-29T17:02:03.000+0000",
					"updated": "2016-08-29T17:02:03.000+0000"
				},
				{
					"id": "395224",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "Ok, so the primary request is to enable the key-value storage and protect it with a fingerprint. Since all keychain-operations need to be done on a C-level, Apple provides an (official) [Objective-C wrapper|https://developer.apple.com/library/ios/samplecode/GenericKeychain/Listings/Classes_KeychainItemWrapper_h.html] we could use to wrap it. (*EDIT*: See the full demo below)\r\n\r\n[~CollinPrice] Is that something you could work with? Of course the PR is not ready for production, yet and is awaiting feedback on the public interface-proposal. :-)",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-09-02T19:51:44.000+0000",
					"updated": "2016-11-03T11:58:46.000+0000"
				},
				{
					"id": "395269",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "After thinking it a bit more, I would not add the {{authorizationRequired}} to that API, since it would no the same as we already expose with the {{authenticate}} method. So chaining that one before calling the above method to save / access data would make more sense to me. Also, looking into the sample app that Apple provides for keychain access, there is a special dialog to save passwords to the keychain by typing and confirming it in a system-dialog. \r\n\r\nWe could also expose that one to {{addPasswordToKeychain}} if needed. Please let me know what exactly is required in the first step as well as future steps for additional implementations. Thanks!",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-09-03T14:11:07.000+0000",
					"updated": "2016-09-03T14:11:07.000+0000"
				},
				{
					"id": "395318",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "PR: https://github.com/appcelerator-modules/ti.touchid/pull/23\r\nNew version (1.3.0): [Download|https://www.dropbox.com/s/ro3lknh5v7j2rqy/ti.touchid-iphone-1.3.0.zip?dl=0]\r\n\r\nThe above PR adds support for writing, reading and deleting values from the native iOS-keychain. As discussed about, I removed the {{authorizationRequired}} from the params list to keep the keychain clean. Please let me know if you need additional fields to be covered.\r\n\r\n*EDIT*: I will add docs and put this in review as soon as the public interface is approved. \r\n\r\nDemo:\r\n{code:javascript}\r\nvar win = Ti.UI.createWindow({\r\n    backgroundColor : \"#fff\",\r\n    layout: \"vertical\"\r\n}); \r\n\r\nvar btnSave = Ti.UI.createButton({\r\n    title : \"Save password to keychain\",\r\n    top: 40\r\n});\r\n\r\nbtnSave.addEventListener(\"click\", function() {\r\n    var TouchID = require(\"ti.touchid\");\r\n    \r\n    TouchID.saveValueToKeychain({\r\n        identifier: \"password\",\r\n        accessGroup: \"com.appcelerator\",\r\n        value: \"s3cr3t_p4$$w0rd\",\r\n        success: function(e) {\r\n            Ti.API.info(\"Success!\");\r\n            Ti.API.info(e);\r\n        },\r\n        error: function(e) {\r\n            Ti.API.error(\"Error!\");\r\n            Ti.API.error(e);\r\n        }\r\n    });\r\n});\r\n\r\nvar btnRead = Ti.UI.createButton({\r\n    title : \"Read password from keychain\",\r\n    top: 40\r\n});\r\n\r\nbtnRead.addEventListener(\"click\", function() {\r\n    var TouchID = require(\"ti.touchid\");\r\n    \r\n    TouchID.readValueFromKeychain({\r\n        identifier: \"password\",\r\n        accessGroup: \"com.appcelerator\",\r\n        success: function(e) {\r\n            Ti.API.info(\"Success!\");\r\n            Ti.API.info(e);\r\n        },\r\n        error: function(e) {\r\n            Ti.API.error(\"Error!\");\r\n            Ti.API.error(e);\r\n        }\r\n    });\r\n});\r\n\r\n\r\nvar btnDelete = Ti.UI.createButton({\r\n    title : \"Delete password from keychain\",\r\n    top: 40\r\n});\r\n\r\nbtnDelete.addEventListener(\"click\", function() {\r\n    var TouchID = require(\"ti.touchid\");\r\n    \r\n    TouchID.deleteValueFromKeychain({\r\n        identifier: \"password\",\r\n        accessGroup: \"com.appcelerator\"\r\n    });\r\n});\r\n\r\nwin.add(btnSave);\r\nwin.add(btnRead);\r\nwin.add(btnDelete);\r\nwin.open();\r\n{code}",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-09-05T08:00:52.000+0000",
					"updated": "2016-09-05T08:05:03.000+0000"
				},
				{
					"id": "400327",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "The PR is ready to review now! I'll update the exmaple above and add another example that covers the new TouchID features that I also added.",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-11-03T11:06:06.000+0000",
					"updated": "2016-11-03T11:06:06.000+0000"
				},
				{
					"id": "400335",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "Ok, so I kind of escalated here (in a good way :-). We now support the following new features:\r\n- Save, read and delete values with the native iOS keychain\r\n- Expose the properties {{maxBiometryFailures}}, {{allowableReuseDuration}}, {{fallbackTitle}} and {{cancelTitle}} to customize the Touch ID experience\r\n- Expose the {{invalidate()}} method to hide the Touch ID dialog programatically \r\n- Major refactoring in both code-base and documentation\r\n- Align module versions to match 2.1.0\r\n\r\nPackaged module: https://github.com/appcelerator-modules/ti.touchid/releases/tag/2.1.0-beta.1\r\n\r\nTest-Case 1: Write, read and delete from the keychain\r\n{code:javascript}\r\nvar win = Ti.UI.createWindow({\r\n    backgroundColor : \"#fff\",\r\n    layout: \"vertical\"\r\n}); \r\n \r\nvar btnSave = Ti.UI.createButton({\r\n    title : \"Save password to keychain\",\r\n    top: 40\r\n});\r\n \r\nbtnSave.addEventListener(\"click\", function() {\r\n    var TouchID = require(\"ti.touchid\");\r\n    \r\n    TouchID.saveValueToKeychain({\r\n        identifier: \"password\",\r\n        accessGroup: \"com.appcelerator\",\r\n        value: \"s3cr3t_p4$$w0rd\",\r\n        callback: function(e) {\r\n            if (!e.success) {\r\n                Ti.API.error(\"Error! Please check the logs for the exact error\");\r\n                return;\r\n            }\r\n            Ti.API.info(\"Success!\");\r\n            Ti.API.info(e);\r\n        },\r\n    });\r\n});\r\n \r\nvar btnRead = Ti.UI.createButton({\r\n    title : \"Read password from keychain\",\r\n    top: 40\r\n});\r\n \r\nbtnRead.addEventListener(\"click\", function() {\r\n    var TouchID = require(\"ti.touchid\");\r\n    \r\n    TouchID.readValueFromKeychain({\r\n        identifier: \"password\",\r\n        accessGroup: \"com.appcelerator\",\r\n        callback: function(e) {\r\n            if (!e.success) {\r\n                Ti.API.error(\"Error! \" + e.error);\r\n                return;\r\n            }\r\n            Ti.API.info(\"Success!\");\r\n            Ti.API.info(e);\r\n        },\r\n    });\r\n});\r\n \r\n \r\nvar btnDelete = Ti.UI.createButton({\r\n    title : \"Delete password from keychain\",\r\n    top: 40\r\n});\r\n \r\nbtnDelete.addEventListener(\"click\", function() {\r\n    var TouchID = require(\"ti.touchid\");\r\n    \r\n    TouchID.deleteValueFromKeychain({\r\n        identifier: \"password\",\r\n        accessGroup: \"com.appcelerator\"\r\n    });\r\n});\r\n \r\nwin.add(btnSave);\r\nwin.add(btnRead);\r\nwin.add(btnDelete);\r\nwin.open();\r\n{code}\r\n\r\nTest-Case 2: Expose new Touch ID properties, allow the user to invalidate the dialog manually (cc [~emerriman]):\r\n{code:javascript}\r\nvar TiTouchId = require('ti.touchid');\r\n\r\nvar win = Ti.UI.createWindow();\r\nvar btn = Ti.UI.createButton({\r\n\ttitle: 'authenticate'\r\n});\r\n\r\nwin.add(btn);\r\nwin.open();\r\n\r\nbtn.addEventListener('click', function(){\r\n\r\n\tif(!TiTouchId.isSupported()) {\r\n\t\talert(\"Touch ID is not supported on this device!\");\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tTiTouchId.authenticate({\r\n\t\treason: 'We need your fingerprint to continue.',\r\n\t\tmaxBiometryFailures: 3, // iOS 9+, optional, maximal attempts: 5\r\n\t\tallowableReuseDuration: 5, // iOS 9+, optional, in seconds\r\n        fallbackTitle: \"Use different auth method?\", // iOS 10+, optional\r\n        cancelTitle: \"Get me outta here!\", // iOS 10+, optional\r\n\t\tcallback: function(e) {\r\n\t\t\tif (!e.success) {\r\n\t\t\t\talert('Error! Message: ' + e.error + '\\nCode: ' + e.code);\r\n\t\t\t\tswitch(e.code) {\r\n\t\t\t\t\tcase TiTouchId.ERROR_AUTHENTICATION_FAILED: Ti.API.info('Error code is TiTouchId.ERROR_AUTHENTICATION_FAILED'); break;\r\n\t\t\t\t\tcase TiTouchId.ERROR_USER_CANCEL: Ti.API.info('Error code is TiTouchId.ERROR_USER_CANCEL'); break;\r\n\t\t\t\t\tcase TiTouchId.ERROR_USER_FALLBACK: Ti.API.info('Error code is TiTouchId.ERROR_USER_FALLBACK'); break;\r\n\t\t\t\t\tcase TiTouchId.ERROR_SYSTEM_CANCEL: Ti.API.info('Error code is TiTouchId.ERROR_SYSTEM_CANCEL'); break;\r\n\t\t\t\t\tcase TiTouchId.ERROR_PASSCODE_NOT_SET: Ti.API.info('Error code is TiTouchId.ERROR_PASSCODE_NOT_SET'); break;\r\n\t\t\t\t\tcase TiTouchId.ERROR_TOUCH_ID_NOT_AVAILABLE: Ti.API.info('Error code is TiTouchId.ERROR_TOUCH_ID_NOT_AVAILABLE'); break;\r\n                    case TiTouchId.ERROR_TOUCH_ID_NOT_ENROLLED: Ti.API.info('Error code is TiTouchId.ERROR_TOUCH_ID_NOT_ENROLLED'); break;\r\n                    case TiTouchId.ERROR_TOUCH_ID_NOT_ENROLLED: Ti.API.info('Error code is TiTouchId.ERROR_TOUCH_ID_NOT_ENROLLED'); break;\r\n                    case TiTouchId.ERROR_APP_CANCELLED: Ti.API.info('Error code is TiTouchId.ERROR_APP_CANCELLED'); break;\r\n                    case TiTouchId.ERROR_INVALID_CONTEXT: Ti.API.info('Error code is TiTouchId.ERROR_INVALID_CONTEXT'); break;\r\n                    case TiTouchId.ERROR_TOUCH_ID_LOCKOUT: Ti.API.info('Error code is TiTouchId.ERROR_TOUCH_ID_LOCKOUT'); break;\r\n                    default: Ti.API.info('Error code is unknown'); break;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t  \t// do something useful\r\n\t\t\t\talert('YAY! success');\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t\r\n\t// When uncommented, it should invalidate (hide) after 2 seconds\r\n\tsetTimeout(function() {\r\n\t\t// TiTouchId.invalidate();\r\n\t}, 5000);\r\n});\r\n{code}\r\n",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-11-03T13:30:07.000+0000",
					"updated": "2016-11-03T13:38:45.000+0000"
				},
				{
					"id": "400359",
					"author": {
						"name": "CollinPrice",
						"key": "collinprice",
						"displayName": "Collin Price",
						"active": true,
						"timeZone": "America/Toronto"
					},
					"body": "Is there documentation for the accessControlMode and accessibilityMode iOS arguments?",
					"updateAuthor": {
						"name": "CollinPrice",
						"key": "collinprice",
						"displayName": "Collin Price",
						"active": true,
						"timeZone": "America/Toronto"
					},
					"created": "2016-11-03T19:26:23.000+0000",
					"updated": "2016-11-03T19:26:23.000+0000"
				},
				{
					"id": "400364",
					"author": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Could you please provide reference for accessControlMode possible values?",
					"updateAuthor": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2016-11-03T20:42:12.000+0000",
					"updated": "2016-11-03T20:42:12.000+0000"
				},
				{
					"id": "400402",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "Chillll :-) It's [here|https://github.com/hansemannn/ti.touchid/blob/fa99e6cdf935acabd51f06baa61a939b3966485a/apidoc/TouchId.yml#L541-L556] with some constants to use there like advised natively.",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-11-04T14:13:22.000+0000",
					"updated": "2016-11-04T14:13:22.000+0000"
				},
				{
					"id": "400420",
					"author": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Hi Hans,\r\n\r\nI've done a bit of testing using your examples above and here are my results: \r\n\r\nCase 1.\r\n\r\n1) There is an error in the docs stating that for iOS 10 and up I need to add entitlements file in order to access keychain. I had to do that on my test device that is running iOS 8.2, otherwise callback was successfull, but I could see native iOS error being thrown. I was also not able to retrieve saved keychain item in that case.\r\n2) Saving to keychain without using {{accessibilityMode}} and {{accessControlMode}} works as expected\r\n3) Retrieving from keychain works as expected\r\n4) Deleting from keychain works as expected\r\n5) Saving to keychain without using with {{accessControlMode}} flag being set crashes the app without any errors being throw. Tested with all possible values.\r\n6) Saving to keychain using {{accessibilityMode}} does not seem to be working as expected for values ending with {{*THIS_DEVICE_ONLY}}. I've saved to keychain with this flag, backed up device, restored backup on another device and I was still able to retrieve item from keychain.\r\n\r\nCase 2. \r\n\r\n1) {{TiTouchId.isSupported}} does not work as intended. In case neither password/fingerprint are set up, {{TiTouchId.isSupported}}\r\nreturns false on devices that actually support the feature (Tested on devices with/without the fingerprint reader). \r\n\r\n2) Using {{TouchID.authenticate}} without checking {{TiTouchId.isSupported}}: \r\n*  Passcode turned off, no fingerprints added  -> recieved  {{TiTouchId.ERROR_TOUCH_ID_NOT_AVAILABLE}} instead of {{TiTouchId.ERROR_PASSCODE_NOT_SET}} or {{TiTouchId.ERROR_TOUCH_ID_NOT_ENROLLED}}\r\n*  Passcode turned on, no fingerprints added -> recieved {{TiTouchId.ERROR_TOUCH_ID_NOT_AVAILABLE}} instead  {{TiTouchId.ERROR_TOUCH_ID_NOT_ENROLLED}}\r\n\r\n3) When touchId is being locked out due to user failing to provide correct fingerprint\r\n* {{maxBiometryFailures}} value does not work, I've set it to values from 1 to 5, I've always been asked 5 times before lockout.\r\n* after being locked out, on iPhone 6 OS v8.2 further attempt to authenticate launch passcode unlock screen. On iPhone7 OS 10.0.2 further attempts to authenticate only yield {{TiTouchId.ERROR_TOUCH_ID_NOT_AVAILABLE}} code being thrown and no unlock modal is presented.\r\n* On iPhone7, after 5th incorrect authentication attempt {{TiTouchId.ERROR_TOUCH_ID_LOCKOUT}} is being thrown, which is correct, but any consecutive tries only cause {{TiTouchId.ERROR_TOUCH_ID_NOT_AVAILABLE}}. I believe either unlock modal should be presented or {{TiTouchId.ERROR_TOUCH_ID_LOCKOUT}} code should be shown.\r\n\r\n4) {{allowableReuseDuration}}, {{fallbackTitle}} and {{cancelTitle}} do not seem to work at all.\r\n\r\n5) All other cases i.e. user cancel, user fallback, authentication failed, authentication passed, system cancel etc work as expected. \r\n\r\n----\r\n\r\nTested with: iPhone6 OS v8.2, iPhone7 OS7 v10.0.2, iPad Mini (without fingerprint scanner), SDK v5.5.1GA, TiTouchId Module v 2.1.0\r\n\r\nSorry for the long post. Please let me know if you have any questions.\r\n",
					"updateAuthor": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2016-11-04T17:08:23.000+0000",
					"updated": "2016-11-04T17:18:30.000+0000"
				},
				{
					"id": "400429",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "Hey Nikita, addressing your comments line by line:\r\n{quote}\r\n1) There is an error in the docs stating that for iOS 10 and up I need to add entitlements file in order to access keychain. I had to do that on my test device that is running iOS 8.2, otherwise callback was successfull, but I could see native iOS error being thrown. I was also not able to retrieve saved keychain item in that case.\r\n{quote}\r\nSo the keychain access entitlement is also required for iOS 8? Then I'll update the docs. And you meant \"otherwise callback was unsuccessful\", right? Otherwise, I don't get the sentence structure \r\n{quote}\r\n2) Saving to keychain without using accessibilityMode and accessControlMode works as expected\r\n{quote}\r\nOK\r\n {quote}\r\n3) Retrieving from keychain works as expected\r\n{quote}\r\nOK\r\n{quote}\r\n4) Deleting from keychain works as expected\r\n{quote}\r\nOK\r\n{quote}\r\n5) Saving to keychain without using with accessControlMode flag being set crashes the app without any errors being throw. Tested with all possible values.\r\n{quote}\r\nExample please\r\n{quote}\r\n6) Saving to keychain using accessibilityMode does not seem to be working as expected for values ending with *THIS_DEVICE_ONLY. I've saved to keychain with this flag, backed up device, restored backup on another device and I was still able to retrieve item from keychain.\r\nCase 2.\r\n{quote}\r\nExample please\r\n{quote}\r\n1) TiTouchId.isSupported does not work as intended. In case neither password/fingerprint are set up, TiTouchId.isSupported\r\nreturns false on devices that actually support the feature (Tested on devices with/without the fingerprint reader).\r\n2) Using TouchID.authenticate without checking TiTouchId.isSupported:\r\nPasscode turned off, no fingerprints added -> recieved TiTouchId.ERROR_TOUCH_ID_NOT_AVAILABLE instead of TiTouchId.ERROR_PASSCODE_NOT_SET or TiTouchId.ERROR_TOUCH_ID_NOT_ENROLLED\r\nPasscode turned on, no fingerprints added -> recieved TiTouchId.ERROR_TOUCH_ID_NOT_AVAILABLE instead TiTouchId.ERROR_TOUCH_ID_NOT_ENROLLED\r\n3) When touchId is being locked out due to user failing to provide correct fingerprint\r\nmaxBiometryFailures value does not work, I've set it to values from 1 to 5, I've always been asked 5 times before lockout.\r\nafter being locked out, on iPhone 6 OS v8.2 further attempt to authenticate launch passcode unlock screen. On iPhone7 OS 10.0.2 further attempts to authenticate only yield TiTouchId.ERROR_TOUCH_ID_NOT_AVAILABLE code being thrown and no unlock modal is presented.\r\nOn iPhone7, after 5th incorrect authentication attempt TiTouchId.ERROR_TOUCH_ID_LOCKOUT is being thrown, which is correct, but any consecutive tries only cause TiTouchId.ERROR_TOUCH_ID_NOT_AVAILABLE. I believe either unlock modal should be presented or TiTouchId.ERROR_TOUCH_ID_LOCKOUT code should be shown.\r\n{quote}\r\n1) We don't use custom business logic to check this, we just use the system API {{canEvaluatePolicy}}. If your device can use Touch ID but has not been set up to use it, it will return false. And the method didn't change.\r\n2) Same here. We use the {{isSupported}} method internally and will throw {{ERROR_TOUCH_ID_NOT_AVAILABLE}} whenever {{isSupported}} returns {{false}}. But I can see that we can improve this by using {{deviceCanAuthenticate}} instead that also returns the exact error code which we can bubble up. I will add that to the PR. *EDIT*: Changed in the latest commit-sets.\r\n3) I will check {{maxBiometryFailures}} but it did work in my tests-cases before. And what do you mean with \"modal unlock\"? *EDIT*: I removed the property again. It's deprecated since 9.0 (introduced in 8.3) so Apple probably disabled the usage of the property in iOS 10+ already. \r\n{quote}\r\n4) allowableReuseDuration, fallbackTitle and cancelTitle do not seem to work at all.\r\n{quote}\r\nThey all did work for me (see the attached image in the Github release page). Ensure to call it as the params of the {{authenticate}} method. *EDIT*: After some checks, I found out that this property is only used for authentications from the lock-screen, not in-app: \"This property is meant only for reusing Touch ID matches from the device lock screen. \"It does not allow reusing previous Touch ID matches in application or between applications.\"\r\n{quote}\r\n5) All other cases i.e. user cancel, user fallback, authentication failed, authentication passed, system cancel etc work as expected.\r\n{quote}\r\nOK\r\n\r\nAnd thank you very much for the detailed review, appreciate that!\r\n\r\n*EDIT*: 2.1.0 Beta 2 is out, having all fixed listed in https://github.com/appcelerator-modules/ti.touchid/releases/tag/2.1.0-beta.2",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-11-04T20:59:37.000+0000",
					"updated": "2016-11-05T18:15:45.000+0000"
				},
				{
					"id": "400464",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "Oh, and the more I think about this, the more I would like to remove {{writeToKeychain}}, {{readFromKeychain}} and {{deleteFromKeychain}} and use an own namespace for managing them. Like this:\r\n{code:javascript}\r\nva keychainItem = TouchID.createKeychainItem({\r\n    identifier: \"password\",\r\n    accessGroup: \"<TeamID>.com.appc.touchidtest\",\r\n    // More configuration like accessibilityMode and accessControlMode\r\n});\r\n\r\nkeychainItem.addEventListener(\"read\", function(e) {\r\n    // A keychain item was read or failed\r\n});\r\n\r\nkeychainItem.addEventListener(\"write\", function(e) {\r\n    // A keychain item was written or failed\r\n});\r\n\r\nkeychainItem.addEventListener(\"delete\", function(e) {\r\n    // A keychain item was deleted or failed\r\n});\r\n\r\nkeychainItem.write(\"my_value\"); // Will trigger \"write\" event\r\nkeychainItem.read(); // Will trigger \"read\" event\r\nkeychainItem.delete(); // Will trigger \"delete\" event\r\n{code}\r\n\r\nAnd maybe some additional utilities:\r\n{code:javascript}\r\nvar exists = keychainItem.exists();\r\nvar isValid = keychainItem.isValid();\r\n{code}\r\n\r\nSo we either put this interface changes in this PR or merge it and do an additional ticket where we deprecate the old one again. ",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-11-06T14:40:35.000+0000",
					"updated": "2016-11-06T14:43:18.000+0000"
				},
				{
					"id": "400520",
					"author": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "HI Hans,\r\n\r\nThank you for timely and descriptive response. Here are my test notes for updated module: \r\n\r\nCase 1.\r\n\r\n- {{accessControlMode}} no longer crashes the app when set. However, I've tried different values and they do not seem to have any effect. I'll post my exact test code below.\r\n- {{accessibilityMode}} also appears to do nothing. I've tried all possible values and they do not seem to alter app behaviour.\r\n\r\nBased off that, I suspect  I might not be using those flags correctly. Please refer to test code below.\r\n\r\nCase 2.\r\n\r\n- I was able to confirm that {{ERROR_TOUCH_ID_NOT_ENROLLED}} and {{ERROR_PASSCODE_NOT_SET}} messages are now working correctly.\r\n- When user chooses to enter passcode after unsuccessful fingerprint authentication, correct message ({{ERROR_USER_FALLBACK}}) is being thrown. However, no dialogue to enter passcode is presented. This worked correctly in the previous iteration of the module.\r\n\r\nWhen user is being locked out due to maximum unsuccessful authentication attempts\r\n* On iPhone 6 OS v8.2 incorrect message is being thrown {{ERROR_AUTHENTICATION_FAILED.}} Subsequent authentication attempt launches passcode modal. When user enters correct passcode he is able to try to authenticate with fingerprint again\r\n* On iPhone 7 OS v10.0.2 correct message is being thrown {{ERROR_TOUCH_ID_LOCKOUT}}. Subsequent authentication attempt throws same message again. Enter passcode modal dialogue is not being presented.\r\n\r\nI believe both cases should yield same result: {{ERROR_TOUCH_ID_LOCKOUT}} message when lockout happens, passcode modal dialogue on subsequent attempts to authenticate.\r\n\r\nLastly, I appreciate your comment regarding {{isSupported}} functionality. Its weird that it works that way, especially given the fact that {{TouchID.authenticate}} is actually able to make a distinction between not having fingerprint scanner, password not being set and not having any fingerprints in the system. Is there any way you could leverage {{TouchID.authenticate}} functionality to enhance {{isSupported}}.  \r\n\r\n----\r\n\r\nMy code:\r\n\r\nindex.xml:\r\n\r\n{code:java}\r\n<Alloy>\r\n  <Window class=\"container\">\r\n    <Button id=\"case1\" title=\"Case 1\" onClick=\"launchCase1\" top=\"200\"/>\r\n    <Button id=\"case2\" title=\"Case 2\" onClick=\"launchCase2\"/>\r\n  </Window>\r\n</Alloy>\r\n{code}\r\n\r\nindex.tss: \r\n\r\n{code:java}\r\n\".container\": {\r\n\tbackgroundColor:\"white\",\r\n\tlayout: 'vertical'\r\n}\r\n\r\n\"Button\":{\r\n\ttop: 10,\r\n\twidth: 100,\r\n\theight: 50,\r\n\tbackgroundColor: \"#000\",\r\n\tcolor: \"#fff\"\r\n}\r\n{code}\r\n\r\n\r\nindex.js: \r\n\r\n{code:java}\r\n\r\n$.index.open();\r\n\r\nfunction launchCase1(){\r\n\t\r\n\tvar win = Ti.UI.createWindow({\r\n\t    backgroundColor : \"#fff\",\r\n\t    layout: \"vertical\"\r\n\t}); \r\n\t \r\n\tvar btnSave = Ti.UI.createButton({\r\n\t    title : \"Save password to keychain\",\r\n\t    top: 40,\r\n\t\twidth: 300,\r\n\t\theight: 50,\r\n\t\tbackgroundColor: \"#000\",\r\n\t\tcolor: \"#fff\"\r\n\t});\r\n\t \r\n\tbtnSave.addEventListener(\"click\", function() {\r\n\t    var TouchID = require(\"ti.touchid\");\r\n\t    \r\n\t  \tTouchID.saveValueToKeychain({\r\n            identifier: \"password\",\r\n            value: \"my_password\",\r\n            accessibilityMode: TouchID.ACCESSIBLE_WHEN_PASSCODE_SET_THIS_DEVICE_ONLY,\r\n            accessControlMode: TouchID.ACCESS_CONTROL_TOUCH_ID_CURRENT_SET,\r\n            callback: function(e) {\r\n                alert(e);\r\n            }\r\n        });\r\n\t});\r\n\t \r\n\tvar btnRead = Ti.UI.createButton({\r\n\t    title : \"Read password from keychain\",\r\n\t\twidth: 300,\r\n\t\theight: 50,\r\n\t\tbackgroundColor: \"#000\",\r\n\t\tcolor: \"#fff\",\r\n\t\ttop: 10\r\n\t});\r\n\t \r\n\tbtnRead.addEventListener(\"click\", function() {\r\n\t    var TouchID = require(\"ti.touchid\");\r\n\t    \r\n\t    TouchID.readValueFromKeychain({\r\n            identifier: \"password\",\r\n            callback: function(e) {\r\n                alert(e);\r\n            }\r\n        });\r\n\t});\r\n\t \r\n\t \r\n\tvar btnDelete = Ti.UI.createButton({\r\n\t    title : \"Delete password from keychain\",\r\n\t    width: 300,\r\n\t\theight: 50,\r\n\t\tbackgroundColor: \"#000\",\r\n\t\tcolor: \"#fff\",\r\n\t\ttop: 10\r\n\t});\r\n\t\r\n\tbtnDelete.addEventListener(\"click\", function() {\r\n\t    var TouchID = require(\"ti.touchid\");\r\n\t    \r\n\t    TouchID.deleteValueFromKeychain({\r\n            identifier: \"password\"\r\n        });\r\n\t});\r\n\t\r\n\tvar btnClose = Ti.UI.createButton({\r\n\t    title : \"Go Back\",\r\n\t    width: 300,\r\n\t\theight: 50,\r\n\t\tbackgroundColor: \"#000\",\r\n\t\tcolor: \"#fff\",\r\n\t\ttop: 10\r\n\t});\r\n\t\r\n\tbtnClose.addEventListener(\"click\", function() {\r\n\t\twin.close();\r\n\t});\r\n\t\r\n\twin.add(btnSave);\r\n\twin.add(btnRead);\r\n\twin.add(btnDelete);\r\n\twin.add(btnClose);\r\n\twin.open();\r\n\t \r\n}\r\n\r\n\r\nfunction launchCase2(){\r\n\tvar TiTouchId = require('ti.touchid');\r\n \r\n\tvar win = Ti.UI.createWindow({\r\n\t\theight: Ti.UI.FILL,\r\n\t\twidth: Ti.UI.FILL,\r\n\t\tbackgroundColor: \"#fff\",\r\n\t\tlayout: \"vertical\"\r\n\t});\r\n\tvar btn = Ti.UI.createButton({\r\n\t\ttitle: 'authenticate',\r\n\t\twidth: 300,\r\n\t\theight: 50,\r\n\t\tbackgroundColor: \"#000\",\r\n\t\tcolor: \"#fff\",\r\n\t\ttop: 50\r\n\t});\r\n\t\r\n\tvar btnClose = Ti.UI.createButton({\r\n\t    title : \"Go Back\",\r\n\t    width: 300,\r\n\t\theight: 50,\r\n\t\tbackgroundColor: \"#000\",\r\n\t\tcolor: \"#fff\",\r\n\t\ttop: 10\r\n\t});\r\n\t\r\n\tbtnClose.addEventListener(\"click\", function() {\r\n\t\twin.close();\r\n\t});\r\n\t\r\n\twin.add(btn);\r\n\twin.add(btnClose);\r\n\twin.open();\r\n\t \r\n\tbtn.addEventListener('click', function(){\r\n\t \r\n\t\tif(!TiTouchId.isSupported()) {\r\n\t\t\t//Ti.API.info(\"Touch ID is not supported on this device!\");\r\n\t\t\t//return;\r\n\t\t}\r\n\t\t\r\n\t\tTiTouchId.authenticate({\r\n\t\t\treason: 'Show me your jazz hands.', //works \r\n\t\t\tcallback: function(e) {\r\n\t\t\t\tif (!e.success) {\r\n\t\t\t\t\t//Ti.API.info('Error! Message: ' + e.error + '\\nCode: ' + e.code);\r\n\t\t\t\t\tswitch(e.code) {\r\n\t\t\t\t\t\tcase TiTouchId.ERROR_AUTHENTICATION_FAILED: Ti.API.info('Error code is TiTouchId.ERROR_AUTHENTICATION_FAILED'); break;\t//works\r\n\t\t\t\t\t\tcase TiTouchId.ERROR_USER_CANCEL: Ti.API.info('Error code is TiTouchId.ERROR_USER_CANCEL'); break;\t\t\t\t\t\t//works\r\n\t\t\t\t\t\tcase TiTouchId.ERROR_USER_FALLBACK: Ti.API.info('Error code is TiTouchId.ERROR_USER_FALLBACK'); break;\t\t\t\t\t//works - 8.2 no passcode window\r\n\t\t\t\t\t\tcase TiTouchId.ERROR_SYSTEM_CANCEL: Ti.API.info('Error code is TiTouchId.ERROR_SYSTEM_CANCEL'); break;\t\t\t\t\t//works \r\n\t\t\t\t\t\tcase TiTouchId.ERROR_PASSCODE_NOT_SET: Ti.API.info('Error code is TiTouchId.ERROR_PASSCODE_NOT_SET'); break;\t\t\t//works\r\n\t\t\t\t\t\tcase TiTouchId.ERROR_TOUCH_ID_NOT_AVAILABLE: Ti.API.info('Error code is TiTouchId.ERROR_TOUCH_ID_NOT_AVAILABLE'); break;//when not setTest 1 \r\n\t                    case TiTouchId.ERROR_TOUCH_ID_NOT_ENROLLED: Ti.API.info('Error code is TiTouchId.ERROR_TOUCH_ID_NOT_ENROLLED'); break;\t//works\r\n\t                    case TiTouchId.ERROR_APP_CANCELLED: Ti.API.info('Error code is TiTouchId.ERROR_APP_CANCELLED'); break;\t\t\t\t\t//not able to recreate\r\n\t                    case TiTouchId.ERROR_INVALID_CONTEXT: Ti.API.info('Error code is TiTouchId.ERROR_INVALID_CONTEXT'); break;\t\t\t\t//not able to recreate\r\n\t                    case TiTouchId.ERROR_TOUCH_ID_LOCKOUT: Ti.API.info('Error code is TiTouchId.ERROR_TOUCH_ID_LOCKOUT'); break;\t\t\t//doesnt work - 8.2 not thrown\r\n\t                    default: Ti.API.info('Error code is unknown'); break;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t  \t// do something useful\r\n\t\t\t\t\tTi.API.info('YAY! success');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// When uncommented, it should invalidate (hide) after 2 seconds\r\n\t\tsetTimeout(function() {\r\n\t\t\t// TiTouchId.invalidate();\r\n\t\t}, 5000);\r\n\t});\r\n}\r\n\r\n{code}\r\n\r\n----\r\nI feel like we are moving in the right direction. Lets keep momentum going!\r\n\r\nNikita.\r\n\r\n",
					"updateAuthor": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2016-11-07T19:00:30.000+0000",
					"updated": "2016-11-07T19:02:16.000+0000"
				},
				{
					"id": "400522",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "{quote}\r\nHowever, no dialogue to enter passcode is presented. This worked correctly in the previous iteration of the module.\r\n{quote}\r\nNot sure what you mean with pass code. A video demonstrating that old behavior would be more than useful\r\n\r\nRegarding the accessControl, use an array, since you (could) combine multiple access control modes. *EDIT*: It's because some constants are iOS9+ (ERROR_TOUCH_ID_LOCKOUT, ERROR_APP_CANCELLED and ERROR_INVALID_CONTEXT)\r\n\r\nAnd for the error-codes, it now uses the internal error codes that are bubbled up, so it might be an OS behavior change causing the differences. I can not think of other ways this could happen.",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-11-07T19:20:01.000+0000",
					"updated": "2016-11-07T19:21:07.000+0000"
				},
				{
					"id": "400530",
					"author": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Tried accessControl with array of control modes. It did not do anything. Could you please post a sample test case? It is possible that my test cases are incorrect. \r\n\r\n\r\n{noformat}\r\nHowever, no dialogue to enter passcode is presented. This worked correctly in the previous iteration of the module.{noformat}\r\n\r\nWhen user calls TouchID.authenticate, tries to authenticate with fingerprint and fails, he is authentication window has the button that says \"Enter Password\", which allows user to enter passcode the he set in \"Touch ID & Passcode\" section of Settings. In previous version of the module, when user pressed that button he was able to enter passcode and authenticate that way (which corresponds to ERROR_USER_FALLBACK message). In the new version of the module correct message is thrown, but the screen where user would enter his password is missing. ",
					"updateAuthor": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2016-11-07T21:29:28.000+0000",
					"updated": "2016-11-07T21:37:08.000+0000"
				},
				{
					"id": "400535",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "This is not how it worked in the past. The fallback button only triggers the fallback event key so the developer can present an alternative UI to authorize (e.g. a login-form). This has also been discussed natively several times. But if I missed something here, a video demonstrating the feature with previous ti.touchid versions would be interesting.\r\n\r\nFor the {{accessibilityMode}}, it seems to receive the correct values down to the keychain creation ({{SecAdd()}}. For {{accessControlMode}}, it seems like the underlaying type (SecAccessControlCreateFlags = CFOptionFlags = long) seems to make problems. I need to check what's the best way to cast that value correctly.",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-11-07T21:56:14.000+0000",
					"updated": "2016-11-07T21:56:14.000+0000"
				},
				{
					"id": "400536",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "Hey [~nradaev], just solved the casting, and the constants for {{accessControlMode}} can be either be supplied as a single arg or in logical-or order.\r\n\r\nNew version: https://www.dropbox.com/s/291lj6t0bebhep4/ti.touchid-iphone-2.1.0.zip?dl=0\r\n\r\nDemo:\r\n{code:javascript}\r\n TouchID.saveValueToKeychain({\r\n     identifier: \"password\",\r\n     accessibilityMode: TouchID.ACCESSIBLE_AFTER_FIRST_UNLOCK,\r\n     // or: accessControlMode: TouchID.ACCESS_CONTROL_DEVICE_PASSCODE,\r\n     accessControlMode: TouchID.ACCESS_CONTROL_DEVICE_PASSCODE | TouchID.ACCESS_CONTROL_PRIVATE_KEY_USAGE,\r\n     accessGroup: appIdentifierPrefix + \".com.appc.touchidtest\",\r\n     value: \"s3cr3t_p4$$w0rd\",\r\n     callback: function(e) {\r\n         if (!e.success) {\r\n             Ti.API.error(\"Error: \" + e.error + \" (Code: \" + e.code + \")\");\r\n             return;\r\n         }\r\n         Ti.API.info(\"Success!\");\r\n         Ti.API.info(e);\r\n     },\r\n });\r\n{code}",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-11-07T22:12:08.000+0000",
					"updated": "2016-11-07T22:12:08.000+0000"
				},
				{
					"id": "400589",
					"author": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Hi Hans,\r\n\r\nRetested with the provided code - access group seems  to be causing issue now:\r\n\r\n{code:java}\r\n[ERROR] :   SecOSStatusWith error:[-25243] The operation couldn’t be completed. (OSStatus error -25243 - Remote error : The operation couldn‚Äôt be completed. (OSStatus error -25243 - NoAccessForItem))\r\n[ERROR] :  Error: Error creating keychain item (Code: -25243) //this is the error code i got on iPhone 6, on iPhone7 error code is -34018\r\n{code}\r\n\r\nAfter that I commented out accessGroup value. Afterwards I tried using single value for accessControlMode as well as multiple values - no effect.\r\n\r\n{code:java}\r\naccessControlMode: TouchID.ACCESS_CONTROL_TOUCH_ID_CURRENT_SET | TouchID.ACCESS_CONTROL_USER_PRESENCE | TouchID.ACCESS_CONTROL_DEVICE_PASSCODE,\r\n{code}\r\n\r\nI was able to save/read values after adding/removing fingerprints to current set, 2nd value never caused app to ask for passcode/fingerprint, 3rd value did not affect app functionality whether there was passcode or not.\r\n\r\nFurthermore,  I tested accessibilityMode and had similar result - it did not work for me, i was able to save/read keychain values with/without password set: \r\n\r\n{code:java}\r\n accessibilityMode: TouchID.ACCESSIBLE_WHEN_PASSCODE_SET_THIS_DEVICE_ONLY,\r\n{code}\r\n\r\nI've also tried different values for this property and none of them seem to work.\r\n\r\n\r\n",
					"updateAuthor": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2016-11-08T15:27:31.000+0000",
					"updated": "2016-11-08T15:27:31.000+0000"
				},
				{
					"id": "400656",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "Updated the constants-casting, give it a try: https://www.dropbox.com/s/291lj6t0bebhep4/ti.touchid-iphone-2.1.0.zip?dl=1\r\n\r\nTried with the following code:\r\n{code:javascript}\r\n/**\r\nvar TouchID = require(\"ti.touchid\");\r\n\r\nvar win = Ti.UI.createWindow({\r\n    backgroundColor: \"#fff\",\r\n    layout: \"vertical\"\r\n});\r\n\r\nvar btnSave = Ti.UI.createButton({\r\n    title: \"Save password to keychain\",\r\n    top: 40\r\n});\r\n\r\nvar appIdentifierPrefix = \"<YOUR-TEAM-ID>\";\r\n\r\nbtnSave.addEventListener(\"click\", function() {\r\n    TouchID.saveValueToKeychain({\r\n        identifier: \"password\",\r\n        accessibilityMode: TouchID.ACCESSIBLE_AFTER_FIRST_UNLOCK,\r\n        accessControlMode: TouchID.ACCESS_CONTROL_DEVICE_PASSCODE | TouchID.ACCESS_CONTROL_PRIVATE_KEY_USAGE,\r\n        accessGroup: appIdentifierPrefix + \".com.appc.touchidtest\",\r\n        value: \"s3cr3t_p4$$w0rd\",\r\n        callback: function(e) {\r\n            if (!e.success) {\r\n                Ti.API.error(\"Error: \" + e.error + \" (Code: \" + e.code + \")\");\r\n                return;\r\n            }\r\n            Ti.API.info(\"Success!\");\r\n            Ti.API.info(e);\r\n        },\r\n    });\r\n});\r\n\r\nvar btnRead = Ti.UI.createButton({\r\n    title: \"Read password from keychain\",\r\n    top: 40\r\n});\r\n\r\nbtnRead.addEventListener(\"click\", function() {\r\n    TouchID.readValueFromKeychain({\r\n        identifier: \"password\",\r\n        accessGroup: appIdentifierPrefix + \".com.appc.touchidtest\",\r\n        callback: function(e) {\r\n            if (!e.success) {\r\n                Ti.API.error(\"Error! Probably the keychain item does not exist\");\r\n                return;\r\n            }\r\n            Ti.API.info(\"Success!\");\r\n            Ti.API.info(e);\r\n        },\r\n    });\r\n});\r\n\r\n\r\nvar btnDelete = Ti.UI.createButton({\r\n    title: \"Delete password from keychain\",\r\n    top: 40\r\n});\r\n\r\nbtnDelete.addEventListener(\"click\", function() {\r\n    TouchID.deleteValueFromKeychain({\r\n        identifier: \"password\",\r\n        accessGroup: appIdentifierPrefix + \".com.appc.touchidtest\",\r\n    });\r\n    Ti.API.info(\"Deleted keychain item!\");\r\n});\r\n\r\nwin.add(btnSave);\r\nwin.add(btnRead);\r\nwin.add(btnDelete);\r\nwin.open();\r\n{code}",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-11-09T15:49:00.000+0000",
					"updated": "2016-11-09T15:49:21.000+0000"
				},
				{
					"id": "400667",
					"author": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Hi Hans, \r\n\r\nsetting {{accessGroup}} property still throws this: \r\n\r\n{code:java}\r\n[ERROR] :  Error: Error creating keychain item (Code: -25243)\r\n[ERROR] :   SecOSStatusWith error:[-25243] The operation couldn’t be completed. (OSStatus error -25243 - Remote error : The operation couldn‚Äôt be completed. (OSStatus error -25243 - NoAccessForItem))\r\n[ERROR] :  Error: Error creating keychain item (Code: -25243)\r\n{code}\r\n\r\nAfter commenting it out and testing further, the only change I noticed is in reading deleted or not set keychain item. Once item is deleted from keychain and user tries to access it, app throws this: \r\n\r\n{code:java}\r\n[ERROR] :  Error: undefined (Code: undefined)\r\n{code}\r\n\r\nPrevious version of the module handled this differently. \r\n\r\n{{accessibilityMode}} and {{accessControlMode}}  +still dont work as expected+\r\n\r\n\r\n\r\n",
					"updateAuthor": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2016-11-09T19:41:41.000+0000",
					"updated": "2016-11-09T19:42:37.000+0000"
				},
				{
					"id": "400842",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "[~nradaev] I contacted you via email to not spam this thread with our discussion. I guess that's the quickest way to resolve the remaining issues  asap. Thx!",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-11-12T10:15:36.000+0000",
					"updated": "2016-11-12T10:15:36.000+0000"
				},
				{
					"id": "403216",
					"author": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "It looks like this module is in stable and functioning condition.\r\n\r\nThank you Hans.",
					"updateAuthor": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2016-12-12T21:27:00.000+0000",
					"updated": "2016-12-12T21:27:00.000+0000"
				},
				{
					"id": "403898",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "Added one additional feature to complete the Touch ID API: Being able to change the authentication policy from biometrics to passcode, so people can fallback to entering their passcode instead of a custom password mask (MOD-2211). Example:\r\n\r\n{code:javascript}\r\n// Or: AUTHENTICATION_POLICY_BIOMETRICS for the default behavior\r\nTiTouchId.setAuthenticationPolicy(TiTouchId.AUTHENTICATION_POLICY_PASSCODE); \r\n\r\n// Check device support and  authenticate like before ...\r\n{code}",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2016-12-28T18:25:18.000+0000",
					"updated": "2016-12-28T18:25:18.000+0000"
				},
				{
					"id": "405503",
					"author": {
						"name": "lmorris",
						"key": "lmorris",
						"displayName": "Lee Morris",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Any input [~vijaysingh] ?",
					"updateAuthor": {
						"name": "lmorris",
						"key": "lmorris",
						"displayName": "Lee Morris",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2017-01-27T18:13:47.000+0000",
					"updated": "2017-01-27T18:13:47.000+0000"
				},
				{
					"id": "405545",
					"author": {
						"name": "vijaysingh",
						"key": "vijaysingh",
						"displayName": "Vijay Singh",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "[~lmorris]\r\n\r\nPlease follow steps mentioned below -\r\n1. Include App Groups in App ID at apple developer account and create a provisioning profile using the same app id. Download it and use for running on device.\r\n2. Get team id as required in test cases. You can get it from apple developer account or open provisioning profile using textedit and search for “ApplicationIdentifierPrefix”. Get corresponding value. It will be something like - “WP4952RUHJ”\r\n3. This feature should be test on device.\r\n4. Use test samples given in the TouchId code base - app.js, keychain-basic.js, keychain-touchid.js\r\n\r\nPlease let me know, if you need anything else.",
					"updateAuthor": {
						"name": "vijaysingh",
						"key": "vijaysingh",
						"displayName": "Vijay Singh",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2017-01-28T01:59:32.000+0000",
					"updated": "2017-01-28T01:59:32.000+0000"
				},
				{
					"id": "406057",
					"author": {
						"name": "lmorris",
						"key": "lmorris",
						"displayName": "Lee Morris",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Can finally confirm that this fix works and has been verified. Tested with;\r\niPhone 7 (10) & (10.2)\r\nMacOS 10.11.6 (15G31)\r\nStudio 4.8.1.201612050850\r\nTi SDK 6.1.0.v20170131132207\r\nAppc NPM 4.2.8\r\nAppc CLI 6.2.0-12\r\nTi CLI 5.0.11\r\nAlloy 1.9.6\r\nArrow 1.10.2\r\nXcode 8.2 (8C38)\r\nNode v4.6.0\r\nJava 1.7.0_80",
					"updateAuthor": {
						"name": "lmorris",
						"key": "lmorris",
						"displayName": "Lee Morris",
						"active": false,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2017-02-01T17:40:23.000+0000",
					"updated": "2017-02-01T17:40:23.000+0000"
				},
				{
					"id": "406149",
					"author": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Guys, \r\n\r\nI believe I just found some irregularities with this module.  I've tried using it this way: \r\n\r\n{code:java}\r\n     var keychainItem = TouchID.createKeychainItem({\r\n\t    identifier: \"mypassword\",\r\n\t    accessibilityMode: TouchID.ACCESSIBLE_AFTER_FIRST_UNLOCK,\r\n\t});\r\n\t\r\n\tkeychainItem.addEventListener(\"save\", function(e) {\r\n\t    if (!e.success) {\r\n\t        alert(\"Error saving to the keychain: \" + e.error);\r\n\t        return;\r\n\t    }\r\n\t\r\n\t    alert(\"Successfully saved!\" + e);\r\n\t});\r\n\t\r\n\tbtnSave.addEventListener(\"click\", function() {\r\n\t    keychainItem.save(\"s3cr3t_p4$$w0rd\");\r\n\t});\r\n{code}\r\n\r\nWhen I try to read the value back I am consistently being asked for password. Same goes for ACCESSIBLE_ALWAYS, ACCESSIBLE_WHEN_UNLOCKED, ACCESSIBLE_WHEN_UNLOCKED_THIS_DEVICE_ONLY, ACCESSIBLE_ALWAYS_THIS_DEVICE_ONLY.\r\n\r\nAccording to https://developer.apple.com/reference/security/keychain_services/keychain_item_accessibility_constants I should not be asked the password... Tested with TouchID module v 2.1.0 Ti.SDK 6.0.1 GA on iPhone 7 os 10.2. \r\n\r\nPlease reopen the ticket.\r\n",
					"updateAuthor": {
						"name": "nradaev",
						"key": "nradaev",
						"displayName": "Nikita Radaev",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2017-02-02T15:09:41.000+0000",
					"updated": "2017-02-02T15:09:41.000+0000"
				},
				{
					"id": "406151",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "[~nradaev] We'd rather create a new ticket for this specific use-case. Can you file one, then I'll move it accordingly. Thx!",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2017-02-02T15:23:45.000+0000",
					"updated": "2017-02-02T15:23:45.000+0000"
				}
			],
			"maxResults": 49,
			"total": 49,
			"startAt": 0
		}
	}
}