---
title: "[TIMOB-20577] Windows: App crashes when calling fetch() on any collection that has data"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-03-22T13:59:39.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.2.1, Alloy 1.8.1</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>supportTeam</td></tr>
<tr><th>Reporter</th><td>Joe Finnigan</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2016-03-09T16:54:52.000+0000</td></tr>
<tr><th>Updated</th><td>2019-05-15T14:09:57.000+0000</td></tr>
</table>

<h3>Description</h3>

Creating a collection, and calling fetch if it is emtpy doesn't crash. Create 1 model and save it, then re-fetch the collection the app crashes in the emulator. This is a pretty serious issue if you can't fetch any data?!

Not sure what version this dates back to as we're new to windows dev in Titanium. We're adding windows support to longstanding iOS/Android Ti apps.

Index.js:
<code><pre>
var library = Alloy.createCollection("userForms");
library.fetch();

var user = Alloy.createModel('userForms', {
	Name: "Hello world"
});
user.save();

library.fetch();

$.index.open();
</pre></code>

Model:
<code><pre>
config: {
		columns: {
		    "Name": "TEXT"
		},
		adapter: {
			type: "sql",
			collection_name: "userForms"
		}
	}
</pre></code>

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2016-03-16

   [~joef][~nsalahin] This may be fixed by our fix to TIMOB-20222. Can you try this out on a 5.3.0 build of the SDK?
   
   You can get a 5.3.0 build by doing:
   <code><pre>
   appc ti idk install -b 5_3_X
   </pre></code>
   
   Then you'll need to update your project's tiapp.xml to use it.</li>
<li>Joe Finnigan 2016-03-16

   I've tried it with Ti SDK: 5.3.0.v20160315093329
   
   And it still crashes, getting an error message now that wasn't previously displayed in the console:
   
   
   {panel:title=ConsoleLog}
   [ERROR] :  The remote procedure call failed.
   [ERROR] :  Error: The remote procedure call failed.
       at ChildProcess.<anonymous> (C:\ProgramData\Titanium\mobilesdk\win32\5.3.0.v20160315093329\node_modules\windowslib\lib\wptool.js:703:10)
       at emitTwo (events.js:87:13)
       at ChildProcess.emit (events.js:172:7)
       at maybeClose (internal/child_process.js:821:16)
       at Process.ChildProcess._handle.onexit (internal/child_process.js:211:5)
   {panel}</li>
<li>Gary Mathews 2016-03-22

   PR: <a href="https://github.com/appcelerator/alloy/pull/771" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/pull/771</a></li>
<li>Christopher Williams 2016-03-22

   Fix was in Alloy itself, so updating to Alloy 1.8.1 should fix the issue for the user.</li>
<li>Ewan Harris 2016-03-23

   Verified using:
   
   Windows 10 Pro
   Appc NPM: 4.2.4-2
   Appc Core: 5.2.1-20
   Titanium SDK: 5.2.1.v20160318225121
   Alloy: 1.8.1
   
   Using the code provided in the description, the app no longer crashes when calling fetch.
   
   Closing ticket</li>
</ol>


<p><a href="/TIMOB/TIMOB-20577.json">JSON Source</a></p>