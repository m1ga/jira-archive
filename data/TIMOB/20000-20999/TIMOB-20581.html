---
title: "[TIMOB-20581] Windows: Ti App Properties Crashes while storing large data"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-03-28T13:25:33.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.3.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>windows, windows8.1, windowsphone</td></tr>
<tr><th>Reporter</th><td>Binay Das</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2016-03-14T11:08:39.000+0000</td></tr>
<tr><th>Updated</th><td>2016-04-12T05:10:58.000+0000</td></tr>
</table>

<h3>Description</h3>

Ti.App.Properties.setString crashes when I try to store a large string with more than 2048 characters on Windows Phone. The same thing works fine on iOS and Android where I am able to store and retrieve strings with more than 4096 characters.

Steps to Reproduce :
1. Create a mobile app project
2. Add the code from below text file into app.js
<a href="http://ctrlv.it/txt/4925/1177307313" rel="nofollow" target="_blank">http://ctrlv.it/txt/4925/1177307313</a>
3. Run the app

Expected Result
Prints the strings onto the console
(Tested on iOS and Android)

Actual Result
Error in console :
{noformat}
[ERROR] :  Application Error: {
[ERROR] :    "line": 2,
[ERROR] :    "column": 10,
[ERROR] :    "message": "Error while require(/app) unknown exception",
[ERROR] :    "native_stack": [
[ERROR] :      "JSExportClass<class Titanium::GlobalObject>::CallNamedFunction"
[ERROR] :    ]
[ERROR] :  }
{noformat}
Check attachment for Screenshot of App screen.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-20581_58624/Capture.PNG">Capture.PNG</td></td><td>2016-03-14T11:05:56.000+0000</td><td>37162</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2016-03-21

   According to <a href="https://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings" rel="nofollow" target="_blank">https://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings</a> :
   <code><pre>
   The name of each setting can be 255 characters in length at most. Each setting can be up to 8K bytes in size and each composite setting can be up to 64K bytes in size.
   </pre></code>
   
   Given that Platform::String is char16, that means we should be able to get up to 4096 characters as a value. What I can't confirm, however, is if the limits mentioned are the same on 8.1 as they are on Win 10 (which is what these docs are referring to). Unfortunately MS has basically combined the WInRT API docs for 8.1/10, so I can't know for sure if the limits used to be lower.
   
   Anyways, we should likely be smart enough to catch the exception and spit out a better error for exceeding the size limits here. Also, we should see if maybe our string conversion is somehow inflating the string size causing it to take up more space.</li>
<li>Kota Iguchi 2016-03-28

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/596" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/596</a></li>
<li>Binay Das 2016-03-29

   In Android and iOS, I was able to store about 200K characters in a single string property without any issue. Hope it'll work the same way on Windows after the fix.
   ~Thanks</li>
<li>Ewan Harris 2016-04-12

   Verified using:
   
   Windows 10 Pro
   Visual Studio 2015 Community Update 2
   Appc Core: 5.3.0-12
   Appc NPM: 4.2.5-1
   Ti SDK: 5.3.0.v20160411153728
   Windows Phone Emulator 8.1, 10
   Lumia 930 10
   Lumai 520 8.1
   
   Using the code provided the app no longer crashes
   
   Closing ticket</li>
</ol>


<p><a href="/TIMOB/TIMOB-20581.json">JSON Source</a></p>