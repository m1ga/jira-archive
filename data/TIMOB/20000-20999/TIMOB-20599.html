---
title: "[TIMOB-20599] Windows: picker updating data throws unknown exception"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-04-04T16:50:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>picker, qe-5.4.0, windows_phone</td></tr>
<tr><th>Reporter</th><td>Zakhar Zhuravlev</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2016-03-16T11:44:43.000+0000</td></tr>
<tr><th>Updated</th><td>2016-06-13T22:03:16.000+0000</td></tr>
</table>

<h3>Description</h3>

It's affected 5.2.0. 

How to reproduce:

<code><pre>
function onTest() {
	var column = picker.columns[0];
	_.each(column.rows, function(row) {
		column.removeRow(row);
	});
	
	var data = [];
	data[0]=Ti.UI.createPickerRow({title:'2 Bananas'});
	data[1]=Ti.UI.createPickerRow({title:'2 Strawberries'});
	data[2]=Ti.UI.createPickerRow({title:'2 Mangos'});
	data[3]=Ti.UI.createPickerRow({title:'2 Grapes'});
	
	picker.add(data);
}

//----------------------------

var picker = Ti.UI.createPicker({
  top:50
});

var data = [];
data[0]=Ti.UI.createPickerRow({title:'Bananas'});
data[1]=Ti.UI.createPickerRow({title:'Strawberries'});
data[2]=Ti.UI.createPickerRow({title:'Mangos'});
data[3]=Ti.UI.createPickerRow({title:'Grapes'});

picker.add(data);

$.win.add(picker);
$.win.open();

_.delay(onTest, 2000);
</pre></code>


<h3>Comments</h3>

<ol>
<li>Kota Iguchi 2016-03-29

   Picker <code>removeRow</code> and Row/Column editing operation (through <code>PickerRow</code> and <code>PickerColum</code> is not implemented yet. Moving this to 5.4.0.</li>
<li>Kota Iguchi 2016-04-01

   Plain Picker still has some issues. Re-opening this.</li>
<li>Kota Iguchi 2016-04-04

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/606" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/606</a></li>
<li>Kota Iguchi 2016-04-04

   Note: 
   
   <code><pre>
   _.each(column.rows, function(row) {
   	column.removeRow(row);
   });
   </pre></code>
   
   I think this sample code may be not quite right because <code>column.removeRow</code> updates <code>column.rows</code> while iteration. So everytime <code>_.each</code> evaluates <code>column.rows</code>, it may have been changed (which causes undesired result). So make sure to use immutable array:
   
   <code><pre>
   var rows = column.rows;
   _.each(rows, function(row) {
   	column.removeRow(row);
   });
   </pre></code></li>
<li>Josh Longton 2016-06-13

   Verified as fixed.
   Tested on:
   Microsoft Lumia 640 (8.1)
   Windows Simulator (8.1)
   Microsoft Lumia 640 (10)
   Windows Simulator (10)
   Windows 10 Pro
   Studio:  4.7.0.201606100920
   Ti SDK: 5.4.0.v20160608165242
   Appc NPM: 4.2.7-2
   App CLI: 5.4.0-15
   Node v4.4.4
   *Closing Ticket.*</li>
</ol>


<p><a href="/TIMOB/TIMOB-20599.json">JSON Source</a></p>