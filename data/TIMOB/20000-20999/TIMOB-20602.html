---
title: "[TIMOB-20602] Hyperloop: Build doesn't work with 5.4.0"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-04-01T02:29:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Components</th><td>Hyperloop</td></tr>
<tr><th>Labels</th><td>hyperloop, ios, qe-5.4.0</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Chee Kiat Ng</td></tr>
<tr><th>Created</th><td>2016-03-20T15:26:24.000+0000</td></tr>
<tr><th>Updated</th><td>2016-07-21T22:00:03.000+0000</td></tr>
</table>

<h3>Description</h3>

Currently, Hyperloop does not work with the latest master, because we moved the <run-on-main-thread/> flag from the <ios> section to the root level of the tiapp.xml. 

Because we will make the main-thread enabled by default and people won't have the flag in new projects, we need to remove the check from the CLI hook.

<h3>Comments</h3>

<ol>
<li>Chee Kiat Ng 2016-03-28

   PR here: <a href="https://github.com/appcelerator/hyperloop.next/pull/9" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/pull/9</a>
   PR dependent on related ticket. Once ready, to test:
   1. *appc new* using latest SDK on master branch or merged PR on dependent ticket
   2. in tiapp.xml, use *<property name="run-on-main-thread" type="bool">true</property>*
   3. Include hyperloop module built using this PR.
   4. Write a some simple hyperloop code or use it on the <a href="https://github.com/appcelerator/hyperloop-examples" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop-examples</a> 
   5. If you use it on the current master branch of hyperloop-examples repo (not including the PR in below comment), make sure that the platform folder should be in app/
   6. *appc run -p ios* or *appc run -p android*
   7. If building on hyperloop-examples repo, you have to use *ti build -p ios* or *ti build -p android*
   
   <h4>Expected result</h4>
   App should build correctly and run hyperloop correctly in both ios and android platform.
   
   Other test cases include the following changes in tiapp.xml:
   removing "run-on-main-thread" in the ios section.
   NOT removing "run-on-main-thread" in the ios section. 
   removing all "run-on-main-thread" properties (this will make the app default to false for run-on-main-thread, and hyperloop won't work)</li>
<li>Chee Kiat Ng 2016-03-31

   Another PR here for the hyperloop-example git: <a href="https://github.com/appcelerator/hyperloop-examples/pull/21" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop-examples/pull/21</a>
   
   Updated so that it supports hyperloop 1.1.2 and SDK 5.4.0.</li>
<li>Chee Kiat Ng 2016-04-01

   PRs merged.</li>
<li>Josh Longton 2016-07-21

   Verified as fixed Hyperloop applications now successfully build with SDK 5.4.0.
   
   Tested on:
   Nexus 5X (6.0.1)
   Android Emulator (6.0)
   iPhone 6 plus (9.1) 
   iOS Simulator (9.3) 
    Mac OSX El Capitan 10.11.6
   Studio: 4.7.0.201607130543
    Ti SDK: 5.4.0.v20160720201924
    Xcode 7.3.1 
    Appc NPM: 4.2.7
   Appc CLI: 5.4.0-33 
   Hyperloop:1.2.3
   Node v4.4.4 
   * Closing Ticket*</li>
</ol>


<p><a href="/TIMOB/TIMOB-20602.json">JSON Source</a></p>