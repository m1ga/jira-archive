---
title: "[TIMOB-20609] Windows: ImageView.image doesn't handle Windows-style path"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-03-28T13:25:27.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.3.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>filesystem, image, qe-5.3.0, windows_phone</td></tr>
<tr><th>Reporter</th><td>Zakhar Zhuravlev</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2016-03-20T09:01:29.000+0000</td></tr>
<tr><th>Updated</th><td>2016-04-19T23:05:18.000+0000</td></tr>
</table>

<h3>Description</h3>

It's affected 5.2.0. Tested on  emulator and on real device (same behaviour)

What doing this sample app: copy .png file from Resources folder to dataDirectory and try to set copied image to imageView;

*index.js:*
<code><pre>
var directory = (Ti.Filesystem.isExternalStoragePresent()) ? Ti.Filesystem.externalStorageDirectory : Ti.Filesystem.applicationDataDirectory;
var fileIndex = 0;
var toFile;

function listFiles() {
    if(OS_WINDOWS) {
    	alert(Ti.Filesystem.getFile(directory).getDirectoryListing());
    } else {
    	console.warn(Ti.Filesystem.getFile(directory).getDirectoryListing());	
    }    
}

function copyFile() {
	fileIndex++;
	var fromFile = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, "test.png");
	toFile = Ti.Filesystem.getFile(directory, '' + fileIndex + '.png');
	toFile.write(fromFile.read());
}
function onImageClick() {
	$.imageView.image = toFile;
        // below another approaches
        // $.imageView.image = toFile.read();
        // $.imageView.image = toFile.nativePath;
        // $.imageView.image = directory + '/' + fileIndex + '.png';
}

$.win.open();
</pre></code>

*index.xml:*
{noformat}
<Alloy>
    <Window id='win' backgroundColor="green" layout='vertical'>
		 <Button top='10dp' backgroundColor="red" title='List files' onClick="listFiles" />
		 <Button top='10dp' backgroundColor="blue" title='Copy' onClick="copyFile" />
		 <View width='300dp' height='150dp' backgroundColor='yellow' top='30dp' onClick='onImageClick' >
		 	<ImageView id='imageView' width='Ti.UI.FILL' height='Ti.UI.FILL' />
		 </View>
    </Window>
</Alloy>
{noformat}

----

BUT, I found the way when it's working on windows phone(emulator and device).

*index.js:*
<code><pre>
var directory = ''; // when directory is empty string, image will save in the root folder

function onImageClick() {
        $.imageView.image = directory + '/' + fileIndex + '.png'; // set image by path
}
</pre></code>


<h3>Comments</h3>

<ol>
<li>Kota Iguchi 2016-03-24

   As far as I can see, this issue is not because of <code>Ti.Filesystem</code> but because <code>Ti.UI.ImageView</code> does not handle image path when it has Windows-style full path such as <code>C:\Data\Users\DefApps\APPDATA\Local\Packages\etc\etc</code>. Tuns out that <code>Image.image</code> doesn't handle <code>Ti.File</code> and <code>Ti.Blob</code> object too. I've changed title of this ticket.
   </li>
<li>Kota Iguchi 2016-03-24

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/593" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/593</a></li>
<li>Kota Iguchi 2016-03-27

   Broke down Ti.Blob & Ti.Filesystem.File support into (TIMOB-23115). Now TIMOB-20609 (this ticket) is but fix for file path with string.</li>
<li>Kota Iguchi 2016-03-28

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/593" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/593</a>
   
   Fix bugs when you use <code>ImageView.image</code> with Windows path string such as <code>toFile.nativePath</code>. Test cases: [ti.ui.imageview.test.js](<a href="https://github.com/infosia/titanium_mobile_windows/blob/TIMOB-20609/Examples/NMocha/src/Assets/ti.ui.imageview.test.js#L40)" rel="nofollow" target="_blank">https://github.com/infosia/titanium_mobile_windows/blob/TIMOB-20609/Examples/NMocha/src/Assets/ti.ui.imageview.test.js#L40)</a>
   
   Note that we split <code>File</code> and <code>Blob</code> support into TIMOB-23115.</li>
<li>Josh Longton 2016-04-19

   </li>
</ol>


<p><a href="/TIMOB/TIMOB-20609.json">JSON Source</a></p>