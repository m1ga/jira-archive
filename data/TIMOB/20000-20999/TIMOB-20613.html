---
title: "[TIMOB-20613] Android native modules build is getting failed with Android NDK r11"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-03-22T17:38:28.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Kondal Kolipaka</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2016-03-22T06:30:28.000+0000</td></tr>
<tr><th>Updated</th><td>2016-05-31T12:22:01.000+0000</td></tr>
</table>

<h3>Description</h3>

Android native modules build is checking for a release.txt file to validate the Android NDK directory, but with the android NDK r11, <code>release.txt</code> file is removed.

<a href="https://github.com/appcelerator/titanium_mobile/blob/master/node_modules/titanium-sdk/lib/android.js#L927" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/node_modules/titanium-sdk/lib/android.js#L927</a>

Here is the log:


<code><pre>
kondals-MacBook-Pro:module4 kondalkolipaka$ appc run --platform android --project-dir /Users/kondalkolipaka/development/workspaces/runtime-Titanium-360/module4/android --build-only
Appcelerator Command-Line Interface, version 5.2.1-12
Copyright (c) 2014-2016, Appcelerator, Inc.  All Rights Reserved.
 
3/18/2016, 2:39:42 PM
 
Operating System
  Name                        = Mac OS X
  Version                     = 10.11
  Architecture                = 64bit
  # CPUs                      = 8
  Memory                      = 17179869184
 
Node.js
  Node.js Version             = 4.2.2
  npm Version                 = 2.14.7
 
Titanium CLI
  CLI Version                 = 5.0.6
 
Titanium SDK
  SDK Version                 = 5.3.0.v20160317110758
  SDK Path                    = /Users/kondalkolipaka/Library/Application Support/Titanium/mobilesdk/osx/5.3.0.v20160317110758
  Target Platform             = android
 
Command
  /usr/local/bin/node /Users/kondalkolipaka/.appcelerator/install/5.2.1-12/package/node_modules/titanium/lib/titanium.js build run --platform android --project-dir /Users/kondalkolipaka/development/workspaces/runtime-Titanium-360/module4/android --config-file /var/folders/9n/xpk1tm596cbctmwyfhcqysfw0000gn/T/build-1458283177511.json --log-level info --no-banner --project-dir /Users/kondalkolipaka/development/workspaces/runtime-Titanium-360/module4/android
 

2016-03-18T06:39:42.984Z | ERROR  | An uncaught exception was thrown!
Cannot read property 'path' of null
2016-03-18T06:39:42.986Z | ERROR  | Cannot read property 'path' of null
</pre></code>

*Workaround*: Manually create a <code>release.txt</code> file in the NDK home directory and run the build.

Studio checks for ndk-build , ndk-gdb , build , prebuilt , platforms files/folders to validate the NDK. How about using the same here ?

<h3>Comments</h3>

<ol>
<li>Chris Barber 2016-03-22

   Master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7873" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7873</a>
   5_3_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7874" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7874</a></li>
<li>Chris Barber 2016-03-22

   To test, just run <code>ti info -t android -o json</code> and locate the <code>ndk</code> section. You can try with no NDKs, 1 NDK, or several NDKs.
   
   Note that if you have more than 1 NDK installed, it will only show the first NDK it found.
   
   I should point out that there was a bug where if you didn't have the <code>android.ndkPath</code> set, you didn't have the <code>ANDROID_NDK</code> environment variable set, and if the <code>ndk-build</code> executable was not in the system PATH, then it would scan <code>/opt</code>, <code>/opt/local</code>, <code>/usr</code>, <code>/usr/local</code>, and <code>~</code> looking for an Android SDK instead of and NDK. Whoops!</li>
<li>Feon Sua Xin Miao 2016-03-22

   PRs merged.</li>
<li>Lokesh Choudhary 2016-04-06

   Verified the fix.
   
   The CLI now detects NDK r11c & the modules are built successfully.
   
   Environment:
   Appc Studio : 4.6.0.201604041329
   Ti SDK :  5.3.0.v20160404105211
   Ti CLI : 5.0.7
   Alloy : 1.8.5
   MAC El Capitan : 10.11.4
   Appc NPM : 4.2.5-2
   Appc CLI : 5.3.0-12
   Node: 4.2.2</li>
<li>Liam Potter 2016-05-31

   </li>
<li>Feon Sua Xin Miao 2016-05-31

   [~evo], you are using Titanium SDK version 5.1.1.GA, the fix will be available in Titanium SDK version 5.3.0.GA.</li>
</ol>


<p><a href="/TIMOB/TIMOB-20613.json">JSON Source</a></p>