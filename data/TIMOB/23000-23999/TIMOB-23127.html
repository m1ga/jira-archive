---
title: "[TIMOB-23127] Windows: Ti.Network.HTTPClient.setRequestHeader is crashing"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-04-01T12:55:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.3.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Jörgen Buder</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2016-03-31T07:53:08.000+0000</td></tr>
<tr><th>Updated</th><td>2016-04-15T16:26:45.000+0000</td></tr>
</table>

<h3>Description</h3>

the setRequestHeader of the HTTP obj is not working, when used the send() crashes all the time

If I remove the setRequeestHeader and handle the type by default in the back then the send() works again..

We need of course this feature in windows..

Example code:
<code><pre>
var http = Ti.Network.createHTTPClient({
		onload: function() {
			Ti.API.info('API: step onload');
			var res = JSON.parse(this.responseText);
			

		},
		onerror: function(error) {
			Ti.API.info('API: step onerror');
			
		},
		timeout: 90000
	});
	
	http.open('POST', url);
	*// If I unmark the setRequestHEader the below send() crashes..*
	//http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	
	http.send(data);
</pre></code>

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2016-03-31

   [~buder] Just for curiosity's sake, what if you use the header name "Content-Type" (case must match) instead of "Content-type"?</li>
<li>Jörgen Buder 2016-03-31

   Hi
   
   Argh, I will try this now, how ever for Android and iOS the current "Content-type" has been working for us without any crashes, I will get back to you. It only crashes for Windows..
   
   /Jörgen</li>
<li>Ewan Harris 2016-04-12

   Verified using:
   
   Windows 10 Pro
   Visual Studio 2015 Community Update 2
   Appc Core: 5.3.0-12
   Appc NPM: 4.2.5-1
   Ti SDK: 5.3.0.v20160411153728
   Windows Phone Emulator 8.1, 10
   Lumia 930 10
   Lumia 520 8.1
   
   When using setRequestHeader, if the header does not match the expected case then the app no longer crashes and the request is successful
   
   <code><pre>
   var win = Ti.UI.createWindow({backgroundColor:'red'});
   
   win.addEventListener('open', function() {
       var http = Ti.Network.createHTTPClient({
           onload: function() {
               Ti.API.info('API: step onload');
               alert('ok')
               // var res = JSON.parse(this.responseText);
               Ti.API.info('x' + res);
           },
           onerror: function(error) {
               Ti.API.info('API: step onerror');
   
           },
           timeout: 90000
       });
   
       http.setRequestHeader("content-type", "application/x-www-form-urlencoded");
       http.setRequestHeader("accept", "text/html");
       http.open('POST', '<a href="http://www.appcelerator.com/" rel="nofollow" target="_blank">http://www.appcelerator.com/</a>');
   
       http.send('TIMOB-23127');
   });
   win.open();
   </pre></code>
   
   <code><pre>
   
   var win = Ti.UI.createWindow({backgroundColor:'red'});
   
   win.addEventListener('open', function() {
       var http = Ti.Network.createHTTPClient({
           onload: function(e) {
               Ti.API.info('API: step onload');
               alert('ok');
           },
           onerror: function(error) {
               Ti.API.info('API: step onerror');
   
           },
           timeout: 90000
       });
   
      	http.setRequestHeader('authorization', 'Basic dXNlcjpwYXNzd2Q=');
       http.open('GET', '<a href="http://httpbin.org/basic-auth/user/passwd" rel="nofollow" target="_blank">http://httpbin.org/basic-auth/user/passwd</a>');
   
       http.send();
   });
   win.open();
   </pre></code>
   
   Closing ticket</li>
</ol>


<p><a href="/TIMOB/TIMOB-23127.json">JSON Source</a></p>