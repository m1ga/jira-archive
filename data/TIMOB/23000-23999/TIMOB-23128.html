---
title: "[TIMOB-23128] iOS: Add missing local notification properties"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2016-07-26T09:50:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.2.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios, localnotification</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-03-31T11:05:38.000+0000</td></tr>
<tr><th>Updated</th><td>2016-07-26T09:50:24.000+0000</td></tr>
</table>

<h3>Description</h3>

There are missing two properties inside the <code>Ti.App.iOS.scheduleLocalNotification</code>:
* alertTitle: The title of the alert being displayed (alertBody already covered)
* region: The region in which the notification can be triggered



<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2016-03-31

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/7899" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7899</a></li>
<li>Angel Petkov 2016-04-01

   Uncomment region upon second run and a notification should not be displayed. 
   
   Demo code :
   <code><pre>
    Ti.App.iOS.registerUserNotificationSettings({
   	    types: [
               Ti.App.iOS.USER_NOTIFICATION_TYPE_ALERT,
               Ti.App.iOS.USER_NOTIFICATION_TYPE_SOUND,
               Ti.App.iOS.USER_NOTIFICATION_TYPE_BADGE
           ]
       });
   
   var notification = Ti.App.iOS.scheduleLocalNotification({
       alertTitle: "Feature Test",
       alertAction: "update",
       alertBody: "New content available! Update now?",
       badge: 12,
       date: new Date(new Date().getTime() + 3000),
       sound: "/alert.wav",
       userInfo: { "url":"<a href="http://www.download.com/content/asset.json" rel="nofollow" target="_blank">http://www.download.com/content/asset.json</a>"},
       //region:{latitude:35.6895,longitude:139.6917} //Japan
   }); 
   </pre></code></li>
<li>Josh Longton 2016-07-07

   I am unable to get a notification with region added, adding my demo code below;
   
   *app.js*
   <code><pre>
    Ti.App.iOS.registerUserNotificationSettings({
   	    types: [
               Ti.App.iOS.USER_NOTIFICATION_TYPE_ALERT,
               Ti.App.iOS.USER_NOTIFICATION_TYPE_SOUND,
               Ti.App.iOS.USER_NOTIFICATION_TYPE_BADGE
           ]
       });
       
       var notification = Ti.App.iOS.scheduleLocalNotification({
       alertTitle: "Feature Test",
       alertAction: "update",
       alertBody: "New content available! Update now?",
       badge: 12,
       date: new Date(new Date().getTime() + 3000),
       sound: "/alert.wav",
       userInfo: { "url":"<a href="http://www.download.com/content/asset.json" rel="nofollow" target="_blank">http://www.download.com/content/asset.json</a>"},
       //region:{latitude:35.6895,longitude:139.6917} //Japan
       region:{latitude:37.36,longitude:-121.91} //office
   }); 
   
   
       var authorization = Titanium.Geolocation.locationServicesAuthorization;
       Ti.API.info('Authorization:' + authorization);
   
       Titanium.Geolocation.accuracy = Titanium.Geolocation.ACCURACY_BEST;
       Titanium.Geolocation.addEventListener('location', function(e) {
           Ti.API.info('Location Update ::' + JSON.stringify(e));
          
       });
   </pre></code>
   
   *Reopening ticket*</li>
<li>Hans Knöchel 2016-07-08

   PR's to adjust the docs: 
   - master: <a href="https://github.com/appcelerator/titanium_mobile/pull/8117" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8117</a>
   - 5_4_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/8118" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8118</a></li>
<li>Angel Petkov 2016-07-11

   [~jlongton] Could you please re-test with the updated docs to make sure you're able to get the local notifications, once confirmed we can resolve and close the ticket :). </li>
<li>Hans Knöchel 2016-07-12

   Many many silly mistakes  in that PR. First of all, use this demo-code:
   <code><pre>
   
   
   var win = Ti.UI.createWindow({
     backgroundColor : "#fff"
   });
    
   var btn = Ti.UI.createButton({
     title : "Schedule notification"
   });
   
   Ti.App.iOS.addEventListener('notification', function(e) {
       alert("Received!");
   });
   
   btn.addEventListener("click", function() {
       if (!Ti.Geolocation.hasLocationPermissions(Ti.Geolocation.AUTHORIZATION_ALWAYS)) {
           Ti.Geolocation.requestLocationPermissions(Ti.Geolocation.AUTHORIZATION_ALWAYS, function(e) {
               if (!e.success) {
                   Ti.API.error("No permissions granted!");
                   return;
               }
               
               scheduleNotification();
           })
       } else {
           scheduleNotification();
       }
   });
   
   win.add(btn);
   win.open();
   
   function scheduleNotification() {
       Ti.App.iOS.cancelAllLocalNotifications();
       Ti.App.iOS.registerUserNotificationSettings({
           types: [
               Ti.App.iOS.USER_NOTIFICATION_TYPE_ALERT,
               Ti.App.iOS.USER_NOTIFICATION_TYPE_SOUND,
               Ti.App.iOS.USER_NOTIFICATION_TYPE_BADGE
           ]
       });
           
       var notification = Ti.App.iOS.scheduleLocalNotification({
           alertTitle: "Feature Test",
           alertAction: "update",
           alertBody: "New content available! Update now?",
           badge: 12,
           userInfo: { "url":"<a href="http://www.download.com/content/asset.json" rel="nofollow" target="_blank">http://www.download.com/content/asset.json</a>"},
           region:{
               latitude: 52.672,
               longitude: 7.299,
               radius: 10000,
               triggersOnce: false,
               identifier: "WTF"
           }
       }); 
   }
   </pre></code>
   
   I also pushed changes to the master-PR, adding it to the backport as soon as it works on master.</li>
<li>Hans Knöchel 2016-07-18

   Removing from review for 5.4.0 because of the <code>region</code> issue. I possibly fix it as part of the TIMOB-23527 effort. [~cng] fyi</li>
</ol>


<p><a href="/TIMOB/TIMOB-23128.json">JSON Source</a></p>