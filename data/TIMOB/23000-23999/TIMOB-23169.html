---
title: "[TIMOB-23169] Windows: Animations are not animating correctly on iterations or bucles"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2016-04-12T08:06:47.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.2.0, Release 5.2.1, Release 5.2.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.3.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td> Ricardo Ramirez</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2016-04-07T22:47:43.000+0000</td></tr>
<tr><th>Updated</th><td>2016-04-28T22:35:40.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue Description</h4>
When an animation is inserted inside a iteration or bucle, the animation is running just the first time. 

<h4>Steps to Replicate</h4>

<h4>Create a new appcelerator alloy project for windows</h4>
<h4>Open Index.xml and replace the code with the next:</h4>
<code><pre>
<Alloy>
	<Window class="container">
		<!--Label id="label" onClick="doClick">Hello, World</Label-->
		<View id='test' height='100' width='100' left='0' backgroundColor='red'/>
	</Window>
</Alloy>
</pre></code>
<h4>Open Index.js and replace the code with the next:</h4>
<code><pre>
function animateBox() {
    var animation = Titanium.UI.createAnimation();
	//animation.backgroundColor = 'black';
	animation.left = 100;
	animation.duration = 1000;
	var animationBack = Titanium.UI.createAnimation();	
	var animationHandler = function() {
	  //animation.removeEventListener('complete',animationHandler);
	  //animation.left = 0;
	  //animation.duration = 1000;
	  $.test.left = 100;
	  var animateBack = Ti.UI.createAnimation();
	  animateBack.left = 0;
	  animateBack.duration = 1000;
	  $.test.animate(animateBack);
	  
	  
	  var animationHandlerBack = function() {
	  	//animationBack.removeEventListener('complete',animationHandlerBack);
	  	animationBack.left = 0;
	  	
	  };	  
	  animation.addEventListener('complete',animationHandlerBack);
	};
	animation.addEventListener('complete',animationHandler);
	$.test.animate(animation);	
}

setTimeout(animateBox, 2000);

$.index.open();
</pre></code>
<h4>Run</h4>
<h4>The box is just animating once</h4>

<h4>Expected Behavior</h4>
The animations should repeat. 

<h3>Comments</h3>

<ol>
<li>Kota Iguchi 2016-04-11

   Tested this example but animation does not repeat even on iOS. Would you update the example so we can validate it?
   
   FYI Classic app:
   <code><pre>
   var win = Ti.UI.createWindow({ backgroundColor: 'green' });
   var test = Ti.UI.createView({height:100, width:100, backgroundColor:'red', left:0});
   
   win.add(test);
   
   function animateBox() {
       var animation = Titanium.UI.createAnimation();
       animation.left = 100;
       animation.duration = 1000;
       var animationBack = Titanium.UI.createAnimation();
       var animationHandler = function () {
           test.left = 100;
           var animateBack = Ti.UI.createAnimation();
           animateBack.left = 0;
           animateBack.duration = 1000;
           test.animate(animateBack);
   
           var animationHandlerBack = function () {
               animationBack.left = 0;
   
           };
           animation.addEventListener('complete', animationHandlerBack);
       };
       animation.addEventListener('complete', animationHandler);
       test.animate(animation);
   }
   
   win.addEventListener('open', function () {
       setTimeout(animateBox, 2000);
   });
   
   win.open();
   </pre></code>
   </li>
<li>Nazmus Salahin 2016-04-11

   Hello,
   I have tested the code on Android and found that it animates only once. Then I changed the following line 
   <code><pre>
   setTimeout(animateBox, 2000);
   </pre></code>
   to
   <code><pre>
   setInterval(animateBox, 3000);
   </pre></code>
   Now it does animate properly on android repeatedly with a time interval. But on Windows it animates properly the first time and then it keeps jumping and is not able to fulfill the animation.
   So it seems that it is a valid issue.
   Thanks
   
   
   
   *Environment*:
   
   *Device info:* Nexus7 (android 6.0.1) , Nokia Lumia (Windows Phone 8.1)
   *Node.js Version:* 0.12.7
   *npm Version:* 2.11.3
   *Titanium SDKs:* 5.2.2.GA and 5.2.1.GA
   *Java Development Kit Version:* 1.8.0_73
   *Titanium CLI Version:*  5.0.5
   *Appcelerator CLI Version:*  5.2.2
   *Appcelerator Studio:* 4.4.0.201511241829</li>
<li>Kota Iguchi 2016-04-12

   Fixed by TIMOB-20598.</li>
<li>Ewan Harris 2016-04-28

   Closing as duplicate ticket is now closed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-23169.json">JSON Source</a></p>