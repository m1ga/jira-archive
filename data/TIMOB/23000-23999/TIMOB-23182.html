---
title: "[TIMOB-23182] Facebook login is not working on iOS "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2016-04-10T18:53:56.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.2.2</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>facebook, ios, login</td></tr>
<tr><th>Reporter</th><td>Mostafizur Rahman</td></tr>
<tr><th>Assignee</th><td>Chee Kiat Ng</td></tr>
<tr><th>Created</th><td>2016-04-08T19:03:01.000+0000</td></tr>
<tr><th>Updated</th><td>2016-04-10T18:53:56.000+0000</td></tr>
</table>

<h3>Description</h3>

Facebook login is not working on latest SDK.
*Testing Environment:*
Titanium SDK: 5.2.2.GA
Appcelerator Command-Line Interface, version 5.2.2
Facebook module version: 5.0.1
Testing device: iPod 5G(9.2)

*Testing Code:*
<code><pre>
var fb = require('facebook');
var win = Ti.UI.createWindow({
	title : 'Login/Logout',
	backgroundColor : '#fff',

});
var label = Ti.UI.createLabel({
	text : 'Logged In = ' + fb.loggedIn,
	color : '#000',
	font : {
		fontSize : 20
	},
	top : 10,
	textAlign : 'center'
});
win.add(label);
fb.addEventListener('login', function(e) {
	if (e.success) {
		alert('login from uid: ' + e.uid + ', name: ' + JSON.parse(e.data).name);
		label.text = 'Logged In = ' + fb.loggedIn;
	} else if (e.cancelled) {
		// user cancelled
		alert('cancelled');
	} else {
		alert(e.error);
	}
});
fb.authorize();
fb.addEventListener('logout', function(e) {
	alert('logged out');
	label.text = 'Logged In = ' + fb.loggedIn;
});
var loginButton = fb.createLoginButton({
	readPermissions : ['email'],
	top : 100,
	width : 150,
	height : 100
});

win.add(loginButton);
win.open();
</pre></code>

*Testing Result:*
Facebook login not working and login dialog not appear for IOS.

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2016-04-08

   Hello, 
   
   I have tested the issue in iOS simulator and device with SDK 5.2.1.GA, 5.2.2.GA. I couldn't reproduce the issue. Facebook Login is working as expected. Use the below code instead. Facebook module Version 5.1.0
   
   <code><pre>
   var fb = require('facebook');
   
   var win = Ti.UI.createWindow({
   
       title : 'Login/Logout',
   
       backgroundColor : '#fff',
   
   });
   
   var label = Ti.UI.createLabel({
   
       text : 'Logged In = ' + fb.loggedIn,
   
       color : '#000',
   
       font : {
   
           fontSize : 20
   
       },
   
       top : 10,
   
       textAlign : 'center'
   
   });
   
   win.add(label);
   
   fb.addEventListener('login', function(e) {
   
       if (e.success) {
   
           alert('login from uid: ' + e.uid + ', name: ' + JSON.parse(e.data).name);
   
           label.text = 'Logged In = ' + fb.loggedIn;
   
       } else if (e.cancelled) {
   
           // user cancelled
   
           alert('cancelled');
   
       } else {
   
           alert(e.error);
   
       }
   
   });
   
   fb.initialize();
   fb.authorize();
   fb.addEventListener('logout', function(e) {
   
       alert('logged out');
   
       label.text = 'Logged In = ' + fb.loggedIn;
   
   });
   
   var loginButton = fb.createLoginButton({
   
       readPermissions : ['email'],
   
       top : 100,
   
       width : 150,
   
       height : 100
   
   });
   
   win.add(loginButton);
   
   win.open();
   </pre></code>
   
   I have added this additional code. This is required after you set up login/logout listeners and permissions
   <code><pre>
   fb.initialize();
   </pre></code>
   
   Regards,
   Sharif.
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-23182.json">JSON Source</a></p>