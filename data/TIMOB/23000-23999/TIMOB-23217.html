---
title: "[TIMOB-23217] Windows: Packaging for dist-winstore with 8.1 SDK fails"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-04-20T14:56:18.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.3.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.3.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>qe-5.3.0, regression</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2016-04-14T18:24:54.000+0000</td></tr>
<tr><th>Updated</th><td>2016-04-20T14:56:22.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

When attempting to package an app for dist-winstore using the 8.1 Windows SDK the build will fail with the error below

<code><pre>
[ERROR] C:\Users\Ewan\.titanium\vsbuild\pkgtest\store.x86\Package.appxmanifest(39,10): error APPX1674: App manifest defines lock screen notifications without specifying one of appropriate background task types: timer, control channel, push notification, or location. [C:\Users\Ewan\.titanium\vsbuild\pkgtest\store.x86\Pkgtest.vcxproj]
[ERROR] "C:\Users\Ewan\.titanium\vsbuild\pkgtest\store.x86\Pkgtest.vcxproj.metaproj" (default target) (2) -&gt;
"C:\Users\Ewan\.titanium\vsbuild\pkgtest\store.x86\Pkgtest.vcxproj" (default target) (6) -&gt;
(_ValidateAppxManifest target) -&gt;
  C:\Users\Ewan\.titanium\vsbuild\pkgtest\store.x86\Package.appxmanifest(39,10): error APPX1674: App manifest defines lock screen notifications without specifying one of appropriate background task types: timer, control channel, push notification, or location. [C:\Users\Ewan\.titanium\vsbuild\pkgtest\store.x86\Pkgtest.vcxproj]

    0 Warning(s)
    1 Error(s)

Time Elapsed 00:00:14.76
</pre></code>

*This is a regression from 5.2.2.GA*

<h4>Steps to reproduce</h4>

1. Package an application using <code>appc run -p windows -T dist-winstore</code> or <code>appc run -p windows -T dist-winstore --wp-sdk 8.1</code>

<h4>Actual result</h4>

The app fails to package with the error above

<h4>Expected result</h4>

The app should successfully package

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2016-04-15

   Weird, never ran into this before. I'm guess maybe this is related? <a href="https://social.msdn.microsoft.com/Forums/vstudio/en-US/f0339531-123d-4764-927d-8ed9251ce65a/why-do-i-have-to-specify-a-background-task?forum=csharpgeneral" rel="nofollow" target="_blank">https://social.msdn.microsoft.com/Forums/vstudio/en-US/f0339531-123d-4764-927d-8ed9251ce65a/why-do-i-have-to-specify-a-background-task?forum=csharpgeneral</a>
   
   It's possible the app you used had an app image that we could use for a badge, so we generated one and stuck a reference to it in the manifest and then Windows went nuts thinking that meant you had a background task?
   
   Can you attach/paste the contents of C:\Users\Ewan\.titanium\vsbuild\pkgtest\store.x86\Package.appxmanifest ?</li>
<li>Christopher Williams 2016-04-15

   [~eharris] So I put up a PR for the fix, but I'm not 100% sure if this will do it or not. One easy way to test out if it will is to edit the package manifest template we use for 8.1 store apps. In the SDK's windows/templates/build/Package.store.appxmanifest.in.ejs file, remove the line:
   <code><pre>
           &lt;m2:LockScreen Notification="badge" BadgeLogo="Square24x24Logo.png" /&gt;
   </pre></code>
   
   And then try and clean/rebuild the project and see if that fixes it. If so, the PR fix should work.</li>
<li>Ewan Harris 2016-04-18

   Verified using:
   
   Windows 10 Pro
   Visual Studio 2015 Community Update 2
   Appc Core: 5.3.0-18
   Appc NPM: 4.2.5-2
   Ti SDK: 5.3.0.v20160418111755
   Appc Studio: 4.6.0.201604180847
   
   When packaging using <code>appc run -p windows -T dist-winstore --wp-sdk 8.1</code> the appxbundle is now successfully created.
   
   Closing ticket</li>
</ol>


<p><a href="/TIMOB/TIMOB-23217.json">JSON Source</a></p>