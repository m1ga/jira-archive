---
title: "[TIMOB-23237] Windows: Inconsistencies in Ti.API.log"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-04-29T14:35:19.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.3.0, Release 5.2.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.3.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>parity, qe-5.3.0</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2016-04-19T18:02:40.000+0000</td></tr>
<tr><th>Updated</th><td>2016-05-03T15:27:42.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

*This is not a regression*

When using Ti.API.log there are some inconsistencies with other platforms. Firstly, by default it appears that it will log at the debug level when the specified log level is not recognised rather than info, with the log message prefixed with the unrecognised string

Also it appears that any logging performed using Ti.API.log will always take on the log level of the last statement, so if I log Ti.API.error('log') and then Ti.API.log('info, 'log') the Ti.API.log statement will be printed out at the error logging level. See below for an example

<code><pre>
Ti.API.log('meh','I am default log');

Ti.API.error('logging to change other Ti.API.log statements');

Ti.API.log('error','I am error from log');
Ti.API.log('debug', 'I am debug from log');
Ti.API.log('info', 'I am info from log');
Ti.API.log('trace', 'I am trace from log');
Ti.API.log('warn', 'I am warn from log');
</pre></code>

<code><pre>
[DEBUG] I am default log
[ERROR] logging to change other Ti.API.log statements
[ERROR] I am error from log
[ERROR] I am debug from log
[ERROR] I am info from log
[ERROR] I am trace from log
[ERROR] I am warn from log
</pre></code>

<code><pre>
[INFO]  [meh]  I am default log
[ERROR] logging to change other Ti.API.log statements
[ERROR] I am error from log
[INFO]  I am info from log
[WARN]  I am warn from log
</pre></code>

<h4>Steps to reproduce</h4>

1. Using the code above build to a Windows emulator using <code>appc run -p windows -T wp-emulator</code>
(This also happens with wp-device and ws-local)

<h4>Actual result</h4>

<h4>All logging takes place at the DEBUG level by default </h4>
<h4>A log can change the log level for logs that follow it</h4>
<h4>An unrecognised level is not logged as [INFO] [level] <msg></h4>

<h4>Expected result</h4>

#The logging should take place at the level specified in the code
<h4>An unrecognised level should be logged as [INFO] [level] <msg></h4>
<h4>A log should not be able to change the log level of logs that follow it</h4>

<h3>Comments</h3>

<ol>
<li>Kota Iguchi 2016-04-20

   
   On iOS <code>Ti.API.log('meh', 'I am default log');</code> prints nothing. I'll make Windows align with iOS.
   
   <code><pre>
    [ERROR] logging to change other Ti.API.log statements
    [ERROR] I am error from log
    [INFO]  I am info from log
    [WARN]  I am warn from log
   </pre></code>
   
   </li>
<li>Kota Iguchi 2016-04-20

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/637" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/637</a></li>
<li>JÃ¶rgen Buder 2016-04-20

   </li>
<li>Harry Bryant 2016-04-27

   [~kota] Upon investigation, <code>Ti.API.log('meh', 'I am default log');</code> appears to print nothing on iOS unless you set the log-level to DEBUG or TRACE, it actually seems to print the custom log message under [DEBUG]. However, when tested on windows it does not print anything at all. Below is the following console at TRACE level on *Windows*:
   
   <code><pre>
   [ERROR] :  logging to change other Ti.API.log statements
   [ERROR] :  I am error from log
   [DEBUG] :  I am debug from log
   [INFO] :   I am info from log
   [TRACE] :  I am trace from log
   [WARN] :   I am warn from log
   </pre></code>
   
   console at TRACE level on *iOS*:
   <code><pre>
   [DEBUG] :  [MEH] I am default log
   [INFO] :   I am info from log
   [ERROR] :  logging to change other Ti.API.log statements
   [ERROR] :  I am error from log
   [DEBUG] :  I am debug from log
   [TRACE] :  I am trace from log
   [WARN] :   I am warn from log
   </pre></code>
   
   
   To maintain consistency between the platforms, I would suggest either: 
   1. Android be changed to match the behaviour seen on Windows, and to remove the custom log messages on iOS appearing as [DEBUG]. 
   2. Change iOS & Windows to support custom log messages, to match Android.
   
   Tested on: 
   Windows 10 Pro 
   Windows Phone 10.0 & 8.1 (Microsoft Lumia 640 LTE) 
   Appc Studio: 4.6.0.201604081249 
   Ti SDK: 5.3.0.v20160421080259 
   Appc NPM: 4.2.5-3
   Appc Core: 5.3.0-36
   Node: v4.4.2
    </li>
<li>Christopher Williams 2016-04-28

   [~kota] So the difference here seems to be that we ignore custom log levels, and iOS spits them out under [DEBUG] [CUSTOM_UPPERCASE]. So we should match that on Windows.
   
   [~htbryant] As for Android, well I think another ticket should be opened up for parity to fix on that platform. We considered iOS to be the "reference" platform in this case.</li>
<li>Kota Iguchi 2016-04-29

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/650" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/650</a>
   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/651" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/651</a>
   </li>
<li>Harry Bryant 2016-04-29

   </li>
<li>Harry Bryant 2016-05-02

   Verified as fixed
   
   Tested on: 
   Windows 10 Pro 
   Windows Phone 10.0 (Microsoft Lumia 640 LTE) 
   Appc Studio: 4.6.0.201604290815
   Ti SDK: 5.3.0.v20160430043601
   Appc NPM: 4.2.5-5
   Appc Core: 5.3.0-40
   Node: v4.4.2
   
   *Closing Ticket.*</li>
</ol>


<p><a href="/TIMOB/TIMOB-23237.json">JSON Source</a></p>