---
title: "[TIMOB-23285] Unable to build for Android and iOS using node 6.0 with 5.2.2.GA & latest 5.3.0 components"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-05-17T07:20:42.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.3.0, Release 5.2.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Components</th><td>Tooling</td></tr>
<tr><th>Labels</th><td>qe-5.3.0</td></tr>
<tr><th>Reporter</th><td>Lokesh Choudhary</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2016-04-28T00:21:13.000+0000</td></tr>
<tr><th>Updated</th><td>2016-07-26T22:29:35.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Steps to reproduce:</h4>
1. Install node 6.0 & use components mentioned in the environment.
2. Using studio build an android or ios app to device & emulator/simulator.

<h4>Actual Results:</h4>
1. The build fails with logs below:
<code><pre>
Appcelerator Command-Line Interface, version 5.2.2
Copyright (c) 2014-2016, Appcelerator, Inc.  All Rights Reserved.
2016-04-27T23:27:59.471Z | TRACE  | set environment to {"registry":"<a href="https://software.appcelerator.com" rel="nofollow" target="_blank">https://software.appcelerator.com</a>","security":"<a href="https://security.appcelerator.com" rel="nofollow" target="_blank">https://security.appcelerator.com</a>","baseurl":"<a href="https://platform.appcelerator.com" rel="nofollow" target="_blank">https://platform.appcelerator.com</a>"}
2016-04-27T23:27:59.472Z | TRACE  | checking credentials for existing session
2016-04-27T23:27:59.616Z | TRACE  | Attempting to load session info from config file
2016-04-27T23:27:59.621Z | TRACE  | check if session is invalidated
2016-04-27T23:27:59.830Z | TRACE  | session expiry 1462220900328 false
2016-04-27T23:27:59.831Z | TRACE  | Arrow Cloud config file: /Users/lokeshchoudhary/.acs
2016-04-27T23:27:59.846Z | TRACE  | found Arrow Cloud login { mid: 'bef35912719c03b47a3f16fecf654742a42d9010',
  publishPort: 443,
  publishHost: '<a href="https://admin.cloudapp-enterprise.appcelerator.com" rel="nofollow" target="_blank">https://admin.cloudapp-enterprise.appcelerator.com</a>',
  username: 'lchoudhary@appcelerator.com',
  cookie: [ 'connect.sid=s%3AgQRieH8zJPK4EVZBWJ9Z%2BpU2.y8Xd0GfPjSJdSUoAlU0RUVV0FHFmVcNmhKeOapJjqac; Path=/; Expires=Mon, 09 May 2016 20:28:22 GMT; HttpOnly' ],
  defaultEP: 
   { publishHost: '<a href="https://admin.cloudapp-enterprise.appcelerator.com" rel="nofollow" target="_blank">https://admin.cloudapp-enterprise.appcelerator.com</a>',
     publishPort: 443 } } , checking nodeACSEndpoint= <a href="https://admin.cloudapp-enterprise.appcelerator.com" rel="nofollow" target="_blank">https://admin.cloudapp-enterprise.appcelerator.com</a>
2016-04-27T23:27:59.847Z | TRACE  | Arrow Cloud cookie expiry [ 1462825702000 ]
2016-04-27T23:27:59.847Z | TRACE  | session already loaded in opts.session
2016-04-27T23:27:59.848Z | TRACE  | getCredentials() session:
{
  "ipaddress": "10.0.12.110",
  "username": "lchoudhary@appcelerator.com",
  "password": "<OMITTED>",
  "session": "<OMITTED>",
  "nonce": "<OMITTED>",
  "environment": {
    "name": "production",
    "isProduction": true,
    "acsBaseUrl": "<a href="https://api.cloud.appcelerator.com" rel="nofollow" target="_blank">https://api.cloud.appcelerator.com</a>",
    "acsAuthBaseUrl": "<a href="https://secure-identity.cloud.appcelerator.com" rel="nofollow" target="_blank">https://secure-identity.cloud.appcelerator.com</a>",
    "nodeACSEndpoint": "<a href="https://admin.cloudapp-enterprise.appcelerator.com" rel="nofollow" target="_blank">https://admin.cloudapp-enterprise.appcelerator.com</a>"
  },
  "token": "<OMITTED>",
  "fingerprint": "bef35912719c03b47a3f16fecf654742a42d9010",
  "fingerprint_description": "Mac OSX Serial Number: C02J54GWDV35",
  "org_id": 100000675,
  "expiry": 1462220900328
}
2016-04-27T23:27:59.849Z | TRACE  | loading plugins for command "run"
2016-04-27T23:27:59.899Z | TRACE  | run search paths:
[
  "/Users/lokeshchoudhary/.appcelerator/install/5.2.2/package",
  "/Users/lokeshchoudhary/.appcelerator/install/5.2.2/package/node_modules",
  "/Applications/Appcelerator Studio/AppceleratorStudio.app/Contents/MacOS/node_modules",
  "/Applications/Appcelerator Studio/AppceleratorStudio.app/Contents/node_modules",
  "/Applications/Appcelerator Studio/AppceleratorStudio.app/node_modules",
  "/Applications/Appcelerator Studio/node_modules",
  "/Applications/node_modules",
  "/node_modules",
  "/Users/lokeshchoudhary/.appcelerator/.npm/lib/node_modules"
]
2016-04-27T23:27:59.900Z | DEBUG  | [PLUGIN-LOAD] 0ms /Users/lokeshchoudhary/.appcelerator/install/5.2.2/package/appc.js
(node:70951) fs: re-evaluating native module sources is not supported. If you are using the graceful-fs module, please update it to a more recent version.
2016-04-27T23:28:00.009Z | DEBUG  | [PLUGIN-LOAD] 108ms /Users/lokeshchoudhary/.appcelerator/install/5.2.2/package/node_modules/appc-cli-titanium/appc.js
2016-04-27T23:28:00.010Z | DEBUG  | run plugin: /Users/lokeshchoudhary/.appcelerator/install/5.2.2/package/node_modules/appc-cli-titanium
2016-04-27T23:28:00.014Z | DEBUG  | [PLUGIN-LOAD] 1ms /Users/lokeshchoudhary/.appcelerator/install/5.2.2/package/node_modules/arrow/appc.js
2016-04-27T23:28:00.017Z | DEBUG  | run plugin: /Users/lokeshchoudhary/.appcelerator/install/5.2.2/package/node_modules/arrow
2016-04-27T23:28:00.020Z | TRACE  | plugin "arrow" failed its "when" function check, skipping...
2016-04-27T23:28:00.021Z | TRACE  | loading plugin "titanium" for command "run" CLI options via function
2016-04-27T23:28:00.023Z | TRACE  | loading plugin "titanium" for command "run" CLI options via array
2016-04-27T23:28:00.025Z | TRACE  | executing command "run" with the following plugins:
["titanium"]
2016-04-27T23:28:00.026Z | TRACE  | Attempting to load session info from config file
2016-04-27T23:28:00.027Z | TRACE  | check if session is invalidated
2016-04-27T23:28:00.144Z | TRACE  | session expiry 1462220900328 false
2016-04-27T23:28:00.144Z | TRACE  | session already loaded in opts.session
2016-04-27T23:28:00.146Z | DEBUG  | Titanium Downloads Last Checked: 1461798168878
2016-04-27T23:28:00.294Z | TRACE  | No project alloy hook; skipping update to 1.0.0
2016-04-27T23:28:01.228Z | ERROR  | An uncaught exception was thrown!
Cannot read property 'devices' of undefined
2016-04-27T23:28:01.229Z | ERROR  | Cannot read property 'devices' of undefined
2016-04-27T23:28:01.229Z | TRACE  | TypeError: Cannot read property 'devices' of undefined
    at iOSBuilder.<anonymous> (/Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/iphone/cli/commands/_build.js:298:11)
    at /Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/node_modules/ioslib/index.js:115:12
    at /Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/node_modules/async/lib/async.js:721:13
    at /Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/node_modules/async/lib/async.js:52:16
    at done (/Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/node_modules/async/lib/async.js:241:17)
    at /Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/node_modules/async/lib/async.js:44:16
    at /Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/node_modules/async/lib/async.js:718:17
    at /Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/node_modules/async/lib/async.js:167:37
    at /Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/node_modules/ioslib/index.js:85:6
    at /Users/lokeshchoudhary/Library/Application Support/Titanium/mobilesdk/osx/5.2.2.GA/node_modules/ioslib/lib/device.js:51:12
</pre></code>
2. Same issue is seen with latest components & SDK.

<h4>Expected Results:</h4>
1. The build should not fail.

<h3>Comments</h3>

<ol>
<li>Feon Sua Xin Miao 2016-05-04

   <code>node-ios-device@0.9.5</code> should probably fix this issue.</li>
<li>Chris Barber 2016-05-16

   Master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8001" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8001</a>
   
   To test, install Node.js 6.0 or 6.1, then run <code>ti info -t ios</code> with and without a device connected. Then build an app for the iOS device and it should install and stream the system log.</li>
<li>Feon Sua Xin Miao 2016-05-17

   PR merged.</li>
<li>Wilson Luu 2016-07-26

   Closing ticket as fixed *for iOS.* Verified that I am able to build and install an app to an iOS device/simulator while using node 6.3.1. *However,* I am getting a <code>ERROR  | Path must be a string. Received undefined</code> when I build and install to an Android device/emulator; strictly from Appc CLI. Will file a separate ticket for the new Android issue.
   
   Tested on:
   
   Appc CLI NPM: 4.2.7
   Appc CLI Core: 5.4.0-35
   Arrow: 1.8.2
   SDK: 5.4.0.v20160725003348
   Node: v6.3.1
   OS: Mac OS X (10.11.6)
   Xcode: 7.3.1
   Device: iphone 6 plus (9.1), iphone 6s simulator (9.3)
   </li>
<li>Chris Barber 2016-07-26

   [~wluu] is there a ticket for the Android issue? There's been an issue on Github for a couple weeks that I'd like to close with a link to a Jira ticket: <a href="https://github.com/appcelerator/titanium/issues/248." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium/issues/248.</a></li>
<li>Wilson Luu 2016-07-26

   [~cbarber], CLI-1056. One thing to note is that I wasn't able to reproduce the issue with Titanium and Alloy CLIs independently. This issue seems strictly with Appc CLI.</li>
</ol>


<p><a href="/TIMOB/TIMOB-23285.json">JSON Source</a></p>