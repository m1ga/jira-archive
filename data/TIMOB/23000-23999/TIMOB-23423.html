---
title: "[TIMOB-23423] Android: Add rotation, rotationX, rotationY, scaleX, scaleY to view"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-06-27T06:48:59.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.2.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, community, rotate, scale, transform</td></tr>
<tr><th>Reporter</th><td>Michael Gangolf</td></tr>
<tr><th>Assignee</th><td>Hieu Pham</td></tr>
<tr><th>Created</th><td>2016-05-21T14:09:10.000+0000</td></tr>
<tr><th>Updated</th><td>2016-08-12T22:36:35.000+0000</td></tr>
</table>

<h3>Description</h3>

Allow to set rotation (x,y,z) and scaling (x,y) to a view without the need of 2dmatrix. Similar to the existing translationX(), translationY() (with a small bugfix allowing to use views with borders, too).

With these settings it is possible to do smooth rotation/scaling in a drag event.
GIF comparing 2dmatrix vs setters: <a href="http://migaweb.de/matrix.gif" rel="nofollow" target="_blank">http://migaweb.de/matrix.gif</a>

Reference:
<a href="https://developer.android.com/reference/android/view/View.html#setRotation%28float%29" rel="nofollow" target="_blank">https://developer.android.com/reference/android/view/View.html#setRotation%28float%29</a>

Example:

<code><pre>
var win = Ti.UI.createWindow({
    backgroundColor: "white"
});
var view = Ti.UI.createView({
    width: 150,
    height: 300,
    backgroundColor: "red",
    borderRadius: 10, touchEnabled:false
})
win.add(view);
var sx = 0;
var sy = 0;
var cx = 0;
var cy = 0;
var dpi = Ti.Platform.displayCaps.logicalDensityFactor;
var WIDTH = Ti.Platform.displayCaps.platformWidth / dpi;
var HEIGHT = Ti.Platform.displayCaps.platformHeight / dpi;

function onTouchStart(e) {
    // start movement
    sx = e.x;
    sy = e.y;
    cx = e.x;
    cy = e.y;
}

function onTouchMove(e) {
   var xDistance = cx - sx;
    var yDistance = cy - sy;

    var rotationStrength = Math.min(xDistance / (WIDTH), 1);
    var rotationAngel = (2 * Math.PI * rotationStrength / 16);
    
    var rotationStrengthX = Math.min(yDistance / (HEIGHT), 1);
    var rotationAngelX = (2 * Math.PI * rotationStrengthX / 16);
        
    var scaleStrength = 1 - Math.abs(rotationStrength) / 4;
    var scale = Math.max(scaleStrength, 0.93)

    view.rotation = rotationAngel * 20;
    view.rotationX = rotationAngelX * 20;
    view.translationX = xDistance;
    view.setTranslationY(yDistance);
    view.scaleX = scale;
    view.scaleY = scale;

    console.log(view.rotation);
    console.log(view.getScaleX());

    cx = e.x;
    cy = e.y;
}
win.addEventListener("touchmove", onTouchMove);
win.addEventListener("touchstart", onTouchStart);
win.open();
</pre></code>


<h3>Comments</h3>

<ol>
<li>Michael Gangolf 2016-05-21

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8010" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8010</a></li>
<li>Hieu Pham 2016-05-24

   PR tested and looks good. Waiting for 5.4.0 branch to be created so we can merge it into master. Thanks for the PR</li>
<li>Michael Gangolf 2016-05-24

   Thanks! 
   
   Perhaps someone can implement rotationX/Y and scaleX/Y for parity on iOS. CATransform3DRotate/CATransform3DScale should be equivalent functions (they are used in the 3dmatrix already)</li>
<li>Chee Kiat Ng 2016-05-25

   Thanks [~michael]! Will appreciate if you could create a parity ticket for the iOS :)</li>
<li>Lokesh Choudhary 2016-08-12

   Verified the improvement.
   
   Rotation, rotation X, rotation Y, scale X, scale Y are now added to view.
   Closing.
   
   Environment:
   Appc Studio : 4.7.0.201607250649
   Ti SDK :  6.0.0.v20160811221444
   Ti CLI : 5.0.9
   Alloy : 1.9.1
   MAC El Capitan : 10.11.6
   Appc NPM : 4.2.7
   Appc CLI : 6.0.0-24
   Node: 4.4.4
   Nexus 5 - Android 6.0.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-23423.json">JSON Source</a></p>