---
title: "[TIMOB-23446] Hyperloop: iOS: Error when built with TiCore"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-05-30T08:53:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Components</th><td>Hyperloop, iOS</td></tr>
<tr><th>Labels</th><td>qe-5.4.0</td></tr>
<tr><th>Reporter</th><td>Chee Kiat Ng</td></tr>
<tr><th>Assignee</th><td>Chee Kiat Ng</td></tr>
<tr><th>Created</th><td>2016-05-27T07:14:04.000+0000</td></tr>
<tr><th>Updated</th><td>2016-07-01T22:04:14.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Steps to reproduce</h4>
1. using the latest timob master and the latest hyperloop master. (see my env ^)
2. *appc new --classic*
3. install hyperloop module. configure tiapp.xml accordingly: 
<code><pre>
  &lt;modules&gt;
    &lt;module platform="iphone"&gt;hyperloop&lt;/module&gt;
  &lt;/modules&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;hyperloop&lt;/plugin&gt;
  &lt;/plugins&gt;
</pre></code>
4. write this in app.js <a href="https://gist.github.com/hansemannn/3ea14512f894bc507a5cea57336b7f77" rel="nofollow" target="_blank">https://gist.github.com/hansemannn/3ea14512f894bc507a5cea57336b7f77</a>
5. *appc run -p ios*

<h4>Expected Result</h4>
App builds normally and shows 2 colored squares

<h4>Actual Result</h4>
red screen of death. as attached.

If you include 
<code><pre>
  &lt;ios&gt;
    &lt;use-jscore-framework&gt;true&lt;/use-jscore-framework&gt;
  &lt;/ios&gt;
</pre></code>
it will work. if you set to false, same red screen of death.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-23446_59427/Simulator Screen Shot 27 May 2016, 3.04.21 PM.png">Simulator Screen Shot 27 May 2016, 3.04.21 PM.png</td></td><td>2016-05-27T07:14:36.000+0000</td><td>161408</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Chee Kiat Ng 2016-05-30

   PR here:
   <a href="https://github.com/appcelerator/hyperloop.next/pull/33" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/pull/33</a>
   
   <h4>Steps to test</h4>
   1. build this hyperloop module ./build.sh
   2. install it
   3. *appc new --classic*
   4. in tiapp.xml, have 
   <code><pre>
     &lt;modules&gt;
       &lt;module platform="iphone"&gt;hyperloop&lt;/module&gt;
     &lt;/modules&gt;
     &lt;plugins&gt;
       &lt;plugin&gt;hyperloop&lt;/plugin&gt;
     &lt;/plugins&gt;
   </pre></code>
   5. use this in app.js
   <code><pre>
   var UIAlertController = require('UIKit/UIAlertController'),
       UIAlertAction = require('UIKit/UIAlertAction'),
       UIAlertControllerStyleAlert = require('UIKit').UIAlertControllerStyleAlert,
       UIAlertActionStyleDefault = require('UIKit').UIAlertActionStyleDefault,
       TiApp = require('Titanium/TiApp');
   
   var alertController = UIAlertController.alertControllerWithTitleMessagePreferredStyle(
       'My Title',
       'My Message',
       UIAlertControllerStyleAlert
   );
   
   var alertAction = UIAlertAction.actionWithTitleStyleHandler('OK', UIAlertActionStyleDefault, function () {
   });
   
   alertController.addAction(alertAction);
   
   var win = Ti.UI.createWindow({
     backgroundColor: 'white'
   });
   
   var btn = Ti.UI.createButton({
     title: 'press me'
   });
   
   
   btn.addEventListener('click', function(e){
     TiApp.app().showModalController(alertController, true);
   });
       
   win.add(btn);
   win.open();
   </pre></code>
   6. *appc run -p ios*
   
   <h4>Expected Result</h4>
   It will run successfully.
   You can tests more cases by setting this property as well:
       <use-jscore-framework>false</use-jscore-framework>  </li>
<li>Chee Kiat Ng 2016-05-30

   The change is inspired by this:
   <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf" rel="nofollow" target="_blank">https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf</a>
   where by our ticore lib actually doesn't recognise "setPrototypeOf" so we Polyfill instead.
   The solution is unfortunately not the most elegant, as i'm directly writing code in the template file.
   [~jhaynie] Since we know where the problem lies, can you propose a better way to resolve it and i'll investigate?
   
   Thanks.</li>
<li>Josh Longton 2016-07-01

   I was unable to reproduce the issue with the steps and environment provided above.
   
   <code>5.4.0.v20160519143319</code> did not allow me to build the project.
   
   *There was no error or "Red screen of death" present.*
   
   Tested on: 
   iPhone 6s Plus (9.3.1)
   iOS Simulator (9.3)
    Mac OSX El Capitan 10.11.5
   Studio: 4.7.0.201606220541
    Ti SDK: 5.4.0.v20160629063537
    Appc NPM: 4.2.7-2
   Appc CLI: 5.4.0-23
    Xcode 7.3.1
   Node v4.4.4
   * Closing Ticket.*</li>
</ol>


<p><a href="/TIMOB/TIMOB-23446.json">JSON Source</a></p>