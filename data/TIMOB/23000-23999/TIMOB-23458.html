---
title: "[TIMOB-23458] Build command should include -d option or support its own flag for Android builds"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-07-19T19:05:32.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Components</th><td>Android, Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Tim Poulsen (ACV)</td></tr>
<tr><th>Assignee</th><td>Chee Kiat Ng</td></tr>
<tr><th>Created</th><td>2016-05-27T13:16:19.000+0000</td></tr>
<tr><th>Updated</th><td>2016-09-30T23:10:41.000+0000</td></tr>
</table>

<h3>Description</h3>

Scenario:

Build an app for android (with ti build or appc run) to device. Switch git branches or take other actions that result in having tiapp.xml set a lower app version number. Try to build again, and you get the following failure:

<code><pre>
[INFO]  Installing app on device: SM-G900V
[ERROR] Failed to install apk on "7d4c9760"
[ERROR] Error: INSTALL_FAILED_VERSION_DOWNGRADE
</pre></code>

Instead of forcing developers to update the tiapp (which adds complexity to git workflows, like when you're reviewing a co-worker's PR), the build/run command should either automatically include the <code>-d</code> (allow downgrade) on the <code>adb install</code> command it execs, or it should have its own flag to enable that adb option.

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2016-05-27

   Hello, 
   
   I tried to test your issue as you described. First I run an app with "appc run -p android -T device", App runs perfectly in device. Later I changed SDK version to a lower version and-and try running as "appc run -p android -T device". The app run again successfully.
   
   Please, explain if I am missing something.
   
   Regards,
   Sharif.
   </li>
<li>Tim Poulsen (ACV) 2016-05-27

   Sorry, not the SDK version, the *app* version. 
   
   For example, you create a branch off of master while the app version is 1.5. Shak makes a few changes and now master is at 1.6. He has the app installed on his phone. You submit your PR and he goes to review it. He builds the app and when it gets to the point where the build tools try to install it on his phone, they will fail with the INSTALL_FAILED_VERSION_DOWNGRADE message above.</li>
<li>Tim Poulsen (ACV) 2016-07-19

   PR <a href="https://github.com/appcelerator/titanium_mobile/pull/8142" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8142</a></li>
<li>Lokesh Choudhary 2016-09-21

   Verified the fix.
   
   The apk installs & does not give <code>INSTALL_FAILED_VERSION_DOWNGRADE</code> error.
   
   Closing.
   
   Environment:
   Appc Studio : 4.8.0.201609191928
   Ti SDK :  6.0.0.v20160919141738
   Ti CLI : 5.0.9
   Alloy : 1.9.1
   MAC El Capitan : 10.11.6
   Appc NPM : 4.2.8-6
   Appc CLI : 6.0.0-46
   Node: 4.4.4
   Nexus 6 - Android 6.0.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-23458.json">JSON Source</a></p>