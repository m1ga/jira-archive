---
title: "[TIMOB-23511] iOS10: Support SiriKit"
---
<table>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-12-01T07:44:08.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.1</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios10, qe-6.0.1</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Chee Kiat Ng</td></tr>
<tr><th>Created</th><td>2016-06-13T23:01:55.000+0000</td></tr>
<tr><th>Updated</th><td>2016-12-21T19:59:12.000+0000</td></tr>
</table>

<h3>Description</h3>

iOS 10 finally exposed SiriKit, the public framework to interact with Siri. It allows the developer to send requests to Siri in order to fetch information from the following services:

- Audio or video calling
- Messaging
- Payments
- Searching photos
- Workouts
- Ride booking

Docs: <a href="https://developer.apple.com/library/prerelease/content/documentation/Intents/Conceptual/SiriIntegrationGuide/index.html" rel="nofollow" target="_blank">https://developer.apple.com/library/prerelease/content/documentation/Intents/Conceptual/SiriIntegrationGuide/index.html</a>

We should expose it as <code>ti.siri</code> with Hyperloop to access the <code>Intents</code> and <code>IntentsUI</code> framework. The big problem to solve here is, that Siri needs to be implemented inside a new target, which currently is only supported by creating a native target manually.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-23511_60813/IMG_0177.PNG">IMG_0177.PNG</td></td><td>2016-11-30T17:56:36.000+0000</td><td>1719310</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-23511_60812/IMG_0178.PNG">IMG_0178.PNG</td></td><td>2016-11-30T17:56:42.000+0000</td><td>355690</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-23511_60811/IMG_0179.png">IMG_0179.png</td></td><td>2016-11-30T17:56:41.000+0000</td><td>642785</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-23511_60810/IMG_0180.png">IMG_0180.png</td></td><td>2016-11-30T17:56:40.000+0000</td><td>704298</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-23511_60809/sirikit-sample-app.zip">sirikit-sample-app.zip</td></td><td>2016-11-30T17:59:53.000+0000</td><td>2580207</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Carlos Henrique Zinato 2016-07-13

   That would be awesome!
   What is a target @hans?
   Thanks</li>
<li>Hans Knöchel 2016-07-13

   [~chmiiller] A target is configured as part of an Xcode project. Currently, we have one target that represents the (universal) iOS application. Having support for watchOS apps, we can link native targets (aka extensions) to the Titanium application. So in order to support this, we need both some CLI adjustments as well as the receiver in the Titanium application. That's why I did not set a "Release Version" yet.</li>
<li>Hans Knöchel 2016-11-30

   Hey guys,
   
   I was able to create a (basic) proof of concept to use Siri to send Messages via the <code>INSendMessageIntent</code> (it's one of the above intents). Following the steps in TIMOB-17335, I did the following:
   
   1. Create a native Titanium App with <code>appc new</code>
   2. The name of the example is <code>TestApp</code>, the <id> in tiapp.xml will be something like <code>com.appc.testapp</code> 
   3. Open Xcode and create new project File->New Project->Other->Empty
   4. Name it <code>TestApp</code>
   4. Use <code>File->New->Target->Application Extension->Intents Extension</code> to create the target. By default, Xcode will add some demo code to handle Message Intents, but you can use whatever you want there.
   5. Name it <code>TestApp</code> and change Organization Identifier to <code>com.appc.testapp</code> so that the <code>Bundle Identifier</code> is <code>com.appc.testapp.testapp</code> - You can also suffix it to something like <code>siriextension</code>, but this is more simple for now
   6. If you wish, you can activate scheme when prompted, it doesn't matter. 
   7. Create folder <code>extensions</code> in Titanium Project (root) folder and copy the Xcode extension project into it.
   8. In tiapp.xml, include these properties in <ios> section:
   <code><pre>
   <extensions>
       <extension projectPath="extensions/TestApp/TestApp.xcodeproj">
           <target name="testapp"> <!-- or "siriextension" if you name the target differently -->
               <provisioning-profiles>
                   <device/>
                   <dist-appstore/>
                   <dist-adhoc/>
               </provisioning-profiles>
           </target>
       </extension>
   </extensions>
   </pre></code>
   10. Create or edit your App-ID to include the "Siri" capabilities, just like you would do with "Access Groups" or "Push Notifications" in the iOS dev-center
   11. Create one app without a wildcard and one with a wildcard (e.g. <code>com.appc.testapp.*</code> and <code>com.appc.testapp</code>). The first one is linked in the provisioning profiles section of the target (<code><provisioning-profiles></code>), the latter one is used to build the main target / your app.
   12. Add the following to the ios-plist-section of your tiapp.xml (<code><tiapp></code> -> <code><ios></code> -> <code><plist></code>):
   <code><pre>
   <key>NSSiriUsageDescription</key>
   <string>Can we use Siri to do great stuff?</string>
   </pre></code>
   13. Create a file called <code>TestApp.entitlements</code> in your Titanium project root (Note: if you also use push-entitlements, copy those keys over there as well, since it will override the CLI-generated one) and paste the following into it:
   <code><pre>
   <?xml version="1.0" encoding="UTF-8"?>
   <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "<a href="http://www.apple.com/DTDs/PropertyList-1.0.dtd" rel="nofollow" target="_blank">http://www.apple.com/DTDs/PropertyList-1.0.dtd</a>">
   <plist version="1.0">
   <dict>
       <key>com.apple.developer.siri</key>
       <true/>
   </dict>
   </plist>
   </pre></code>
   14. You made it!! Use <code>appc run -p ios -T device</code> or Appcelerator Studio to run your app on the device - SiriKit does not work on the Simulator
   
   You can test the changes by talking to Siri: 
   {quote}Send a Message with TestApp{quote} 
   It will know that your app uses the <code>Intent Extension</code> for handling messages and will ask you for Siri permissions by displaying the message you specified in your plist. You can also specify multiple intents of course, just create another target and link it the same way as above. 
   
   And finally, use Hyperloop or a native module to handle the Intent's responses. Since there dozens of classes and delegates to implement here, you should look for the ones your Intent uses and it will be notified by your extension.
   
   We may also release a Hyperloop sample app for this, covering a specific Intent use-case, but that's how you can already start using SiriKit today! I also attached some images from my test-app will the app itself as well.
   
   Code strong!
   
   *EDIT*: Also made a new guide "[Creating iOS Extensions: Siri Intents](<a href="https://wiki.appcelerator.org/display/guides2/Creating+iOS+Extensions%3A+Siri+Intents)" rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/guides2/Creating+iOS+Extensions%3A+Siri+Intents)</a>" with screenshots and more details. Thanks guys!</li>
<li>Brenton House 2016-11-30

   Awesome [~hansknoechel]!!!</li>
<li>Harry Bryant 2016-12-21

   Validated, successfully created a titanium app with support for SiriKit, following the guide provided above.
   
   Tested On:
   iPhone 6 Plus 10.1.2 Device
   Mac OS Sierra (10.12.2)
   Ti SDK: 6.0.1.v20161219165108
   Appc Studio: 4.8.0.201611121409
   Appc NPM: 4.2.8
   App CLI: 6.0.0
   Xcode 8.2.1
   Node v4.4.7
   
   *Closing ticket.*
   
   
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-23511.json">JSON Source</a></p>