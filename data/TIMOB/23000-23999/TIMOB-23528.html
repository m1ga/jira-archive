---
title: "[TIMOB-23528] iOS10: Support new CoreSpotlight APIs"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-07-12T22:14:04.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.5.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios10</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-06-14T23:59:59.000+0000</td></tr>
<tr><th>Updated</th><td>2016-09-13T10:44:44.000+0000</td></tr>
</table>

<h3>Description</h3>

iOS 10 offers new API's for the <code>CoreSpotlight</code> framework. In detail, these are new attributes for the <code>CSSearchableItemAttributeSet</code> as well as the <code>CSSearchQuery</code> to query an attribute set by it's attribute name. An API should be proposed here first.

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2016-06-16

   First PR to support the new API's in <code>CSSearchableItemAttributeSet</code>: <a href="https://github.com/appcelerator/titanium_mobile/pull/8070" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8070</a>
   
   We should clone this ticket for supporting the <code>CSSearchQuery</code>.
   
   *Demo*:
   <code><pre>
   var win = Ti.UI.createWindow({
     backgroundColor : "#fff"
   }); 
   
   var btn = Ti.UI.createButton({
       title : "Add searchable index"
   });
   
   btn.addEventListener("click", function() {
       addToSearchableIndex();
   });
   
   win.add(btn);
   
   var nav = Ti.UI.iOS.createNavigationWindow({window: win});
   nav.open();
   
   function addToSearchableIndex() {
       
       var itemAttr = Ti.App.iOS.createSearchableItemAttributeSet({
           itemContentType: Ti.App.iOS.UTTYPE_AUDIO,
           title: 'Who rocks iOS 10?',
           
           // iOS 10 only
           fullyFormattedAddress: "1732 N 1st St, San Jose, CA 95112",
           postalCode: "95112",
           thoroughfare: "N 1st St",
           subThoroughfare: "1732",
           
           keywords: ['appcelerator', 'titanium_mobile', 'ios10', 'corespotlight']
       });
   
       var item = Ti.App.iOS.createSearchableItem({
           identifier: 'core-spotlight',
           domainIdentifier: 'ios10',
           attributeSet: itemAttr
       });
   
       var indexer = Ti.App.iOS.createSearchableIndex();
       indexer.addToDefaultSearchableIndex([item], function(e) {
           if (e.success) {
               alert('Press the home button and now search for your keywords');
           } else {
               alert('Error: ' + JSON.stringify(e.error));
           }
       });
   }
   </pre></code></li>
<li>Hans Knöchel 2016-08-14

   PR (5_5_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/8221" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8221</a></li>
<li>Eric Wieber 2016-08-25

   Verified implemented, using:
   
   MacOS 10.12 (16A239m)
   Ti SDK 5.5.0.v20160825003900
   Appc NPM 4.2.7
   Appc CLI 5.5.0-5
   Alloy 1.9.1
   Xcode 8.0 (8S201h)
   
   Able to create searchableItems and search for them outside of the app, without error. Tested using the provided code, code from the SearchableItemAttributeSet documentation, as well as self made tests that create, configure, and search for the searchable items.</li>
<li>Eric Wieber 2016-08-25

   [~hansknoechel], created TIMOB-23828 to track <code>CSSearchQuery</code> implementation</li>
<li>Jason Kneen 2016-09-13

   note -- should be uniqueIndentifier or you get errors</li>
</ol>


<p><a href="/TIMOB/TIMOB-23528.json">JSON Source</a></p>