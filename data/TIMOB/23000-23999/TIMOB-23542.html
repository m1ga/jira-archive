---
title: "[TIMOB-23542] Memory-leaks and warnings across the iOS-project"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-04-24T22:37:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.1.0, Release 6.0.4</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios, memoryleak, xcode</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-06-20T00:47:46.000+0000</td></tr>
<tr><th>Updated</th><td>2017-04-24T22:39:01.000+0000</td></tr>
</table>

<h3>Description</h3>

We have around 70 memory-leaks that lie in the Titanium source project since years. We should resolve them all, as well as fixing the additional warnings regarding casting, unused variables etc.

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2016-06-20

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8074" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8074</a>
   
   This PR will require a major testing environment...I would like to setup unit tests everywhere possible, since they are perfect for ensuring the proxy-correctness.</li>
<li>Chee Kiat Ng 2016-07-05

   [~hansknoechel] any great ideas how we can check and test this?</li>
<li>Hans Knöchel 2016-07-23

   Well, most of it deals with objects that have not been deallocated in the <code>dealloc</code> method. In addition, Titanium proxies usually get autoreleased (e.g TiBlob). Not sure what's the best way to setup test-cases.</li>
<li>Chee Kiat Ng 2016-07-28

   Have put some comments in PR. I prefer to push this to a later version so i can take a more extensive look at each fix you included, because I'm pretty sure some these 'leaks' were intentional.</li>
<li>Chee Kiat Ng 2016-12-07

   PR Here: <a href="https://github.com/appcelerator/titanium_mobile/pull/8663" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8663</a>
   
   <h4>To Test</h4>
   1. Open the iPhone Xcode project in the titanium SDK.
   2. Choose Product->Analyse.
   
   <h4>Expected Results</h4>
   There will be no more static analyzer warnings
   
   Also, check to see all Jenkins unit tests has passed successfully.
   </li>
<li>Hans Knöchel 2016-12-07

   We need test-cases for every API that is affected by this changes:
   - Ti.Calendar (any API)
   - Ti.Filesysten.getAsset()
   - Any native module (just see that it loads)
   - Ti.Media.requestPhotoGalleryPermissions()
   - Ti.App.shortcutItems event <code>shortcutitemclick</code>
   - Ti.App.iOS.scheduleLocalNotification()
   - Ti.App.iOS.SearchQuery
   - Ti.UI.iOS.PreviewContext
   - Ti.UI.TextField.hintTextColor 
   - Ti.UI.WebView.data
   - Ti.UI.iOS.createLivePhotoBadge
   - Ti.UI.ActivityIndicatorStyle
   
   We need an actual test-app for this, since simple unit-tests won't catch possible errors due to retain-cycles that might only occur in a specific context. I will help providing the above test-cases.</li>
<li>Hans Knöchel 2016-12-07

   Test-Case (wip): <a href="https://gist.github.com/hansemannn/108aaa09c478f53be9174d2d169e94fb" rel="nofollow" target="_blank">https://gist.github.com/hansemannn/108aaa09c478f53be9174d2d169e94fb</a></li>
<li>Chee Kiat Ng 2016-12-15

   PR for unit tests: <a href="https://github.com/appcelerator/titanium-mobile-mocha-suite/pull/15" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-mobile-mocha-suite/pull/15</a></li>
<li>Abir Mukherjee 2017-04-24

   Testing with this environment, and not able to run Product>Analyze succesfully:
   Node Version: 6.10.1
   NPM Version: 3.10.10
   Mac OS: 10.12.4
   Appc CLI: 6.2.0
   Appc CLI NPM: 4.2.9
   Titanium SDK version: 6.0.3.GA
   Xcode 8.2.1
   
   After choosing Product > Analyze, the following 5 errors were seen:
   
   cp: /Users/amukherjee/Library/Application Support/Titanium/mobilesdk/osx/6.0.4/iphone/iphone/../../demos/KitchenSink/Resources/.: No such file or directory
   
   cp: /Users/amukherjee/Library/Application Support/Titanium/mobilesdk/osx/6.0.4/iphone/iphone/../Resources/modules/facebook/.: No such file or directory
   
   cp: /Users/amukherjee/Library/Application Support/Titanium/mobilesdk/osx/6.0.4/iphone/iphone/../Resources/modules/ui/.: No such file or directory
   
   /Users/amukherjee/Library/Developer/Xcode/DerivedData/Titanium-douwoqomfrhjgpbvwlwoeewhzxfk/Build/Intermediates/Titanium.build/Debug-iphoneos/Titanium.build/Script-241EAF36118E30260081A5BE.sh: line 7: /Users/amukherjee/Library/Application Support/Titanium/mobilesdk/osx/6.0.4/iphone/iphone/../../support/common/localecompiler.py: No such file or directory
   
   /Users/amukherjee/Library/Developer/Xcode/DerivedData/Titanium-douwoqomfrhjgpbvwlwoeewhzxfk/Build/Intermediates/Titanium.build/Debug-iphoneos/Titanium.build/Script-241EAF36118E30260081A5BE.sh: line 8: /Users/amukherjee/Library/Application Support/Titanium/mobilesdk/osx/6.0.4/iphone/iphone/../../support/common/css/csscompiler.py: No such file or directory</li>
<li>Hans Knöchel 2017-04-24

    Something is wrong with your PR-copy. I was able to successfully analyse, build, compile and package for iOS. Your error looks like you still have parts of the master / non 6_0_X branch in your Xcode cache. Ensure to clean your build (CMD+Shift+K) and your build folder (CMD+Shift+Alt+K).</li>
<li>Abir Mukherjee 2017-04-24

    Passed FR with this environment:
    Node Version: 6.10.1
    NPM Version: 3.10.10
    Mac OS: 10.12.4
    Appc CLI: 6.2.0
    Appc CLI NPM: 4.2.9
    Titanium SDK version: 6.0.4
    Xcode 8.2
    
    I ran Analyzer in Xcode on Titanium.xcodeproj and found no errors. Warnings were generally on deprecation warnings. Closing this ticket as fixed.
    
    Changes were verified to be found in SDK 6.0.4.v20170424150521.</li>
</ol>


<p><a href="/TIMOB/TIMOB-23542.json">JSON Source</a></p>