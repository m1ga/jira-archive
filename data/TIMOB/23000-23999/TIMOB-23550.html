---
title: "[TIMOB-23550] CLI: Use platform-specific moduleApiVersions and enforce them in lookup of modules"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android, CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Christopher Williams</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2016-06-22T18:29:07.000+0000</td></tr>
<tr><th>Updated</th><td>2016-09-26T05:03:21.000+0000</td></tr>
</table>

<h3>Description</h3>

As part of upgrading to latest V8, the native module API version should be bumped solely for android. We have the concept of a moduleApiVersion that gets written into the manifest.json of the SDK, but we don't appear to enforce that version whatsoever when we look up modules for packaging into the app. We also have no means of incrementing the module api version per-platform (so if we update V8 on Android, we can only bump Android's native module api version and not iOS' as well).

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2016-07-18

   This would be nice to enforce/validate at the CLI level like we do for other attributes of modules in node-apps's timodule.js #find() method. However, it is not *required* to get the new modules working, and often times the minsdk attribute would partially suffice.
   
   Studio does some validation of the apiversion when filtering the list of modules to add to a project, so we at least filter/validate when adding - but with the module api version change from 5.4 -> 6.0 for Android, we're likely to run into cases of people swapping between those versions on one project and not realizing the 5.4.x/apiversion="2" modules won't work on 6.0.0 (until it breaks at project build time with an error about undefined symbols while the emulator is launching).</li>
</ol>


<p><a href="/TIMOB/TIMOB-23550.json">JSON Source</a></p>