---
title: "[TIMOB-23623] iOS: Ti.setUserAgent() doesn't exist"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-07-12T04:23:02.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>parity</td></tr>
<tr><th>Reporter</th><td>Christopher Williams</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-07-11T19:40:26.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-23T18:09:10.000+0000</td></tr>
</table>

<h3>Description</h3>

The documentation says that we can set Ti.userAgent via a setter method: <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium-property-userAgent

That method does not exist on iOS.

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2016-07-11

   <a href="https://github.com/appcelerator/titanium-mobile-mocha-suite/blob/master/Resources/ti.test.js#L76" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-mobile-mocha-suite/blob/master/Resources/ti.test.js#L76</a></li>
<li>Hans Knöchel 2016-07-11

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8122" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8122</a>
   
   The demo starts three requests:
   1) Using the system-default user-agent (e.g. "Appcelerator Titanium\/0.0.0 (iPhone\/9.0; iPhone OS; en_US;\)")
   2) Override the default user-agent with "my-custom-user-agent"
   3) Leave the current (custom) user-agent, but se the request-header "User-Agent". It will throw a warning about duplicate user-agents and the APSHTTPClient will concatenate the user-agents.
   
   Demo:
   <code><pre>
   Ti.API.warn(Ti.getUserAgent());
   
   Ti.UI.createWindow().open();
   
   // 1 ---- Use the default Appc user agent
   
   var url = "<a href="http://hans-knoechel.de/ua.php" rel="nofollow" target="_blank">http://hans-knoechel.de/ua.php</a>";
   var client = Ti.Network.createHTTPClient({
   	// function called when the response data is available
   	onload : function(e) {
   		Ti.API.info("First request completed");
   		Ti.API.info("Received text: " + this.responseText);
   		
   		// 2 ---- This time, set the Ti.userAgent manually.
   		
   		Ti.setUserAgent("my-custom-user-agent");
   		Ti.API.warn(Ti.getUserAgent());
   		
   		var url2 = "<a href="http://hans-knoechel.de/ua.php" rel="nofollow" target="_blank">http://hans-knoechel.de/ua.php</a>";
   		var client2 = Ti.Network.createHTTPClient({
   			// function called when the response data is available
   			onload : function(e) {
   				Ti.API.info("Second request completed");
   				Ti.API.info("Received text: " + this.responseText);
   				
   				var url3 = "<a href="http://hans-knoechel.de/ua.php" rel="nofollow" target="_blank">http://hans-knoechel.de/ua.php</a>";
   				var client3 = Ti.Network.createHTTPClient({
   					// function called when the response data is available
   					onload : function(e) {
   						Ti.API.info("Third request completed");
   						Ti.API.info("Received text: " + this.responseText);
   					},
   					// function called when an error occurs, including a timeout
   					onerror : function(e) {
   						Ti.API.debug(e.error);
   						alert('error');
   					},
   					timeout : 5000  // in milliseconds
   				});
   				// Prepare the connection.
   				client3.open("GET", url3);
   				
   				// 3 ---- This time, override the request header inside the http client (highist prio)
   				client3.setRequestHeader('User-Agent', 'another-user-agent');
   
   				// Send the request.
   				client3.send();	
   				
   			},
   			// function called when an error occurs, including a timeout
   			onerror : function(e) {
   				Ti.API.debug(e.error);
   				alert('error');
   			},
   			timeout : 5000  // in milliseconds
   		});
   		// Prepare the connection.
   		client2.open("GET", url2);
   		// Send the request.
   		client2.send();	
   	},
   	// function called when an error occurs, including a timeout
   	onerror : function(e) {
   		Ti.API.debug(e.error);
   		alert('error');
   	},
   	timeout : 5000  // in milliseconds
   });
   
   // Prepare the connection.
   client.open("GET", url);
   // Send the request.
   client.send();
   </pre></code></li>
<li>Chee Kiat Ng 2016-07-12

   APPROVED</li>
<li>Lee Morris 2017-03-23

   Closing ticket as fixed with reference to the above comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-23623.json">JSON Source</a></p>