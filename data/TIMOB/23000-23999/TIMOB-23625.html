---
title: "[TIMOB-23625] Windows: Progressive loading for ListView/TableView"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Kota Iguchi</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2016-07-12T01:58:26.000+0000</td></tr>
<tr><th>Updated</th><td>2016-08-26T07:21:30.000+0000</td></tr>
</table>

<h3>Description</h3>

Currently <code>TableView</code> and <code>ListView</code> has performance issue where it can not load chunk of data at once because it requires a lot of CPU/memory resource. We might want to introduce UI virtualization or progressive data loading or something like that so that we can load data as many as possible.

Per comments in TIMOB-23411

{quote}
I'm guessing we need to do some deep looks into trying to optimize our usage of the ListView implementation under the hood to avoid these issues.

I'm guessing perhaps the way the controls are nested, we're hitting a use case where the phone's UI virtualization for the ListView is defeated. See <a href="https://msdn.microsoft.com/windows/uwp/debug-test-perf/optimize-gridview-and-listview" rel="nofollow" target="_blank">https://msdn.microsoft.com/windows/uwp/debug-test-perf/optimize-gridview-and-listview</a> 

The critical portion being:
bq. The concept of a viewport is critical to UI virtualization because the framework must create the elements that are likely to be shown. In general, the viewport of an ItemsControl is the extent of the logical control. For example, the viewport of a ListView is the width and height of the ListView element. Some panels allow child elements unlimited space, examples being ScrollViewer and a Grid, with auto-sized rows or columns. When a virtualized ItemsControl is placed in a panel like that, it takes enough room to display all of its items, which defeats virtualization. Restore virtualization by setting a width and height on the ItemsControl.

Lots more links out there on GridView/ListView performance problems:

- <a href="https://blogs.msdn.microsoft.com/alainza/2014/09/03/listview-basics-and-virtualization-concepts/" rel="nofollow" target="_blank">https://blogs.msdn.microsoft.com/alainza/2014/09/03/listview-basics-and-virtualization-concepts/</a>
- <a href="https://www.interact-sw.co.uk/iangblog/2014/07/15/phone-listview-grouping" rel="nofollow" target="_blank">https://www.interact-sw.co.uk/iangblog/2014/07/15/phone-listview-grouping</a>
- <a href="http://nanovazquez.com/2013/11/28/windows-8.1-gridview-and-listview-performance-improvements/" rel="nofollow" target="_blank">http://nanovazquez.com/2013/11/28/windows-8.1-gridview-and-listview-performance-improvements/</a>
- <a href="http://stackoverflow.com/questions/28944705/multiple-listview-ui-virtualization" rel="nofollow" target="_blank">http://stackoverflow.com/questions/28944705/multiple-listview-ui-virtualization</a>
- <a href="http://mikaelkoskinen.net/post/winrt-xaml-gridview-performance-problems-on-windows-rt-tablets" rel="nofollow" target="_blank">http://mikaelkoskinen.net/post/winrt-xaml-gridview-performance-problems-on-windows-rt-tablets</a>


Long story short? First make sure you explicitly set a size on the ListView impl and not let it FILL, or it'll never virtualize. Second, it looks like sometimes grouping can basically kill UI virtualization as well, as each group effectively becomes auto-scaled in size to contain it's items.
{quote}

We also want to tackle with performance difference between <code>TableView</code> and <code>ListView</code>, currently creating ListView data is 5x times slower than TableView. It is likely because ListView is relatively complex component with custom template support, but we'd like to close the gap as much as we can.

*TableView*

<code><pre>
var win = Ti.UI.createWindow();

var data = [];
var start = +new Date();
for (var i = 0; i < 20; i++) {
    var sectionFruit = Ti.UI.createTableViewSection({ headerTitle: 'Fruit' });
    sectionFruit.add(Ti.UI.createTableViewRow({ title: 'Apples' }));
    sectionFruit.add(Ti.UI.createTableViewRow({ title: 'Bananas' }));
    data.push(sectionFruit);

    var sectionVeg = Ti.UI.createTableViewSection({ headerTitle: 'Vegetables' });
    sectionVeg.add(Ti.UI.createTableViewRow({ title: 'Carrots' }));
    sectionVeg.add(Ti.UI.createTableViewRow({ title: 'Potatoes' }));
    data.push(sectionVeg);

    var sectionFish = Ti.UI.createTableViewSection({ headerTitle: 'Fish' });
    sectionFish.add(Ti.UI.createTableViewRow({ title: 'Cod' }));
    sectionFish.add(Ti.UI.createTableViewRow({ title: 'Haddock' }));
    data.push(sectionFish);
}

var table = Ti.UI.createTableView({
    data: data
});

Ti.API.info('Elapsed: ' + (+new Date() - start));

win.add(table);
win.open();
</pre></code>

*ListView*

<code><pre>
var win = Ti.UI.createWindow({ backgroundColor: 'green' });
var listView = Ti.UI.createListView();
var sections = [];

var start = +new Date();
for (var i = 0; i < 20; i++) {
    var fruitSection = Ti.UI.createListSection({ headerTitle: 'Fruits' });
    var fruitDataSet = [
        { properties: { title: 'Apple' } },
        { properties: { title: 'Banana' } },
    ];
    fruitSection.setItems(fruitDataSet);
    sections.push(fruitSection);

    var vegSection = Ti.UI.createListSection({ headerTitle: 'Vegetables' });
    var vegDataSet = [
        { properties: { title: 'Carrots' } },
        { properties: { title: 'Potatoes' } },
    ];
    vegSection.setItems(vegDataSet);
    sections.push(vegSection);

    var fishSection = Ti.UI.createListSection({ headerTitle: 'Fish' });
    var fishDataSet = [
        { properties: { title: 'Cod' } },
        { properties: { title: 'Haddock' } },
    ];
    fishSection.setItems(fishDataSet);
    sections.push(fishSection);
}

listView.sections = sections;

Ti.API.info('Elapsed: ' + (+new Date() - start));

win.add(listView);
win.open();
</pre></code>


<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-23625.json">JSON Source</a></p>