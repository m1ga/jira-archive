---
title: "[TIMOB-23634] iOS: Toolbar on TextField doesn't hide smoothly when calling blur"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-01-10T11:18:16.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.3.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.0.2</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>TCSupportTriage, escalation, ios8, merge-7.0.2, toolbar</td></tr>
<tr><th>Reporter</th><td>Phil Smithson</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2014-11-12T04:17:07.000+0000</td></tr>
<tr><th>Updated</th><td>2018-01-24T23:11:27.000+0000</td></tr>
</table>

<h3>Description</h3>

Setup:  

>Textfield with a Ti.UI.IOS.Toolbar with one button.
>Click eventlistener on the button which calls .blur() on the textfield

The keypad slides down, leaving the Toolbar at the top.  When the keypad has slid off the page, only then does the Toolbar start to slide down.

Here's a slow-mo GIF: <a href="http://i.stack.imgur.com/x2zc2.gif" rel="nofollow" target="_blank">http://i.stack.imgur.com/x2zc2.gif</a> 

Sample code:

Causes a noticeable flash for the user.


<TextField id="txt_contactNumber" class="txt_inputshort">
          <KeyboardToolbar>
                <Toolbar id="numberToolbar" bottom="0">
                    <Items>
                        <Button id="flexSpace" systemButton="Ti.UI.iPhone.SystemButton.FLEXIBLE_SPACE" />
                        <Button id="cancelContact" systemButton="Ti.UI.iPhone.SystemButton.DONE" />
                    </Items>
                </Toolbar>
            </KeyboardToolbar>
        </TextField>

$.cancelContact.addEventListener('click', function(){
    $.txt_contactNumber.blur();
});

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-23634_52497/x2zc2.gif">x2zc2.gif</td></td><td>2014-11-12T04:17:07.000+0000</td><td>340175</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Motiur Rahman 2014-11-18

   Hello,
   We have tested this issue but we did not reproduce it. Toolbar on TextField is hidden smoothly when calling blur.
   *Result:* It works as expected.
   
   <h4>Testing Environment: </h4>
   Titanium SDK: 3.4.1
   Titanium CLI: 3.4.1
   iOS Version: 8.1 iPad 5G,
   OS X Version: 10.9.5,
   Appcelerator Studio: 3.4.1
   
   
   <h4>Steps to Test:</h4>
   1. Create an Alloy project.
   3. Run this code with the testing environment.
   4. Touch the textField and click the done button. 
   
   <h4>Test Code</h4>
   <code><pre>
   $.doneContact.addEventListener('click', function() {
   	$.txt_contactNumber.blur();
   });
   
   $.index.open();
   
   </pre></code>
   
   <code><pre>
   &lt;Alloy&gt;
   	&lt;Window title="Red Window" backgroundColor="#fff"  title="textField"&gt;
   		&lt;TextField id="txt_contactNumber" keyboardToolbarColor="#999" keyboardToolbarHeight="40" top="30" width="200" height="50" borderStyle="Ti.UI.INPUT_BORDERSTYLE_ROUNDED" keyboardType = "Titanium.UI.KEYBOARD_NUMBER_PAD"&gt;
   			&lt;KeyboardToolbar&gt;
   				&lt;Toolbar id="numberToolbar" bottom="0"&gt;
   					&lt;Items&gt;
   						&lt;Button id="flexSpace" systemButton="Ti.UI.iPhone.SystemButton.FLEXIBLE_SPACE" /&gt;
   						&lt;Button id="doneContact" style="Ti.UI.iPhone.SystemButtonStyle.DONE"&gt;Done&lt;/Button&gt;
   					&lt;/Items&gt;
   				&lt;/Toolbar&gt;
   			&lt;/KeyboardToolbar&gt;
   		&lt;/TextField&gt;
   	&lt;/Window&gt;
   &lt;/Alloy&gt;   
   </pre></code>
   
   Thanks.
   </li>
<li>Phil Smithson 2014-12-08

   any update on this? It's annoying as the effect is to make the application look amateurish</li>
<li>Mauro Parra-Miranda 2014-12-09

   Hello [~philsmithson]! 
   
   Can you please take a look to  the above testcase? 
   
   Thanks! </li>
<li>Brian Knorr 2015-11-06

   This should be re-opened...still happens in latest Ti SDK 5.0.2.GA</li>
<li>Neeraj Mishra 2016-07-13

   We can reproduce the issue in kitchen sink app and click on TextField-->ToolBar. Click on any of the text field and this will pop up the keyboard toolbar and softkeyboard. The keyboard toolbar animates faster than the keyboard and once we click on send, keyboard toolbar animates slower than the soft keyboard and then disappears.
   
   </li>
<li>Ygor Lemos 2016-07-27

   Any news on this one? Seems to be happening for a long time...</li>
<li>Chee Kiat Ng 2016-10-26

   PR here. <a href="https://github.com/appcelerator/titanium_mobile/pull/8549" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8549</a>
   See comments on PR.</li>
<li>Shuo Liang 2017-01-25

   Update?</li>
<li>Vijay Singh 2017-12-06

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/9656" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9656</a>
   
   Test Case 1.
   
   <code><pre>
   var win = Ti.UI.createWindow({backgroundColor: 'white'});
    
   var view = Ti.UI.createView({backgroundColor : 'green'});
   view.addEventListener('click', function() {
     textfield.blur();
    });
    
   var camera = Ti.UI.createButton({
       systemButton : Titanium.UI.iOS.SystemButton.CAMERA,
   });
    
   camera.addEventListener("click", function(){
     Ti.API.info('Tool bar will set to a custom view');
     textfield.setKeyboardToolbar(view);
   });
   
   var cancel = Ti.UI.createButton({
       systemButton : Titanium.UI.iOS.SystemButton.CANCEL
   });
   cancel.addEventListener("click", function(){
     textfield.blur();
   });
    
   var flexSpace = Ti.UI.createButton({
       systemButton : Titanium.UI.iOS.SystemButton.FLEXIBLE_SPACE
   });
    
   var textfield = Ti.UI.createTextField({
       borderStyle : Ti.UI.INPUT_BORDERSTYLE_BEZEL,
       hintText : 'Focus to see keyboard with toolbar',
       keyboardToolbar : [camera, flexSpace, cancel],
       keyboardToolbarColor : '#999',
       keyboardToolbarHeight : 40,
       top : 80,
       width : 300, 
       height : 35
   });
    
   var trash = Ti.UI.createButton({
       systemButton : Titanium.UI.iOS.SystemButton.TRASH,
   });
   trash.addEventListener("click", function(){
     Ti.API.info('Tool bar will remove tollbar');
     textArea.setKeyboardToolbar(null);
   });
   
    
   var done = Ti.UI.createButton({
       systemButton : Titanium.UI.iOS.SystemButton.DONE
   });
   done.addEventListener("click", function(){
     textArea.blur();
   });
    
   var flexSpace1 = Ti.UI.createButton({
       systemButton : Titanium.UI.iOS.SystemButton.FLEXIBLE_SPACE
   });
   
   var textArea = Ti.UI.createTextArea({
       backgroundColor: 'lightGray',
       value : 'Focus to see keyboard with toolbar',
       keyboardToolbar : [trash, flexSpace1, done],
       keyboardToolbarColor : 'red',
       keyboardToolbarHeight : 40,
       top : 180,
       width : 300, 
       height : 60
   });
    
   win.add(textfield);
   win.add(textArea);
   win.open();
   </pre></code>
   
   Test Case 2 (Textfield on scroll view. Textfield should scroll up to be visible).
   
   <code><pre>
   var win = Ti.UI.createWindow({backgroundColor: 'white'});
    
   var scrollView = Ti.UI.createScrollView({backgroundColor: 'blue'});
   
   var camera = Ti.UI.createButton({
       systemButton : Titanium.UI.iOS.SystemButton.CAMERA,
   });
   var cancel = Ti.UI.createButton({
       systemButton : Titanium.UI.iOS.SystemButton.CANCEL
   });
   cancel.addEventListener("click", function(){
     textfield.blur();
   });
    
   var flexSpace = Ti.UI.createButton({
       systemButton : Titanium.UI.iOS.SystemButton.FLEXIBLE_SPACE
   });
    
   var textfield = Ti.UI.createTextField({
       borderStyle : Ti.UI.INPUT_BORDERSTYLE_BEZEL,
       hintText : 'Focus to see keyboard with toolbar',
       keyboardToolbar : [camera, flexSpace, cancel],
       keyboardToolbarColor : '#999',
       keyboardToolbarHeight : 40,
       top : 380,
       width : 300, height : 35
   });
   
   scrollView.add(textfield);
   win.add(scrollView);
   win.open();
   </pre></code></li>
<li>Abir Mukherjee 2018-01-05

    FR passed.</li>
<li>Eric Merriman  2018-01-09

    [~vijaysingh] Please back port, thanks!</li>
<li>Vijay Singh 2018-01-10

    PR (7_0_X) : <a href="https://github.com/appcelerator/titanium_mobile/pull/9712" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9712</a></li>
<li>Abir Mukherjee 2018-01-24

    Verified fix is found in:
    SDK 7.0.2.v20180124113923
    SDK 7.1.0.v20180124115505</li>
</ol>


<p><a href="/TIMOB/TIMOB-23634.json">JSON Source</a></p>