---
title: "[TIMOB-23652] iOS10: Unable to build Hyperloop projects containing Swift sources"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-07-21T20:33:28.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Components</th><td>Hyperloop</td></tr>
<tr><th>Labels</th><td>hyperloop, ios10, swift</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-07-19T07:36:34.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-20T20:02:28.000+0000</td></tr>
</table>

<h3>Description</h3>

When using swift sources in iOS 10 with Hyperloop (e.g. the [hyperloop-examples](<a href="https://github.com/appcelerator/hyperloop-examples)" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop-examples)</a> project), the problem fails with the following log: <a href="https://gist.github.com/hansemannn/7645aad70c821557cc6a99802b4a59ad" rel="nofollow" target="_blank">https://gist.github.com/hansemannn/7645aad70c821557cc6a99802b4a59ad</a>

The main error is
{quote}
[ERROR] <unknown>:0: warning: using sysroot for 'iPhoneSimulator' but targeting 'MacOSX'
{quote}

I guess it is a dynlib that is hardcoded somewhere and / or the renaming from MacOSX to macOS.

Steps to reproduce:
1. Download the latest Hyperloop version from [here](<a href="https://github.com/appcelerator/hyperloop.next/releases)" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/releases)</a>
2. Include the module in the hyperloop-examples project
3. Run the project

Expected behavior:
The build finishes successfully and you can access the Swift example

Actual behavior:
The build fails with the above error

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2016-07-19

   More infos: We are trying to run <code>swiftc -sdk /Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.0.sdk -dump-ast /Users/hans/Documents/Apps/hyperloop-examples/src/MySwift.swift</code> that fails.
   
   We don't go into the if-statement that sets the target, because xcodeTargetOS is <code>iphonesimulator</code> and not <code>iphoneos</code>. If we add it to the statement, <code>-target armv7-apple-ios7.1</code> is added, because iOS 7.1 is our mininum SDK. Unfortunately, that still does not work. I thought changing it to 10.0, but that does not change much.
   
   *Update*: Changing the following line in swift.js generates the correct metabase:
   <code><pre>
   if (xcodeTargetOS === 'iphoneos' || xcodeTargetOS === 'iphonesimulator') {
   	args.push('-target');
   	args.push((xcodeTargetOS === 'iphoneos' ? 'armv7' : 'i386') + '-apple-ios' + iosMinVersion);
   }
   </pre></code>
   
   But in the very end, it complains about a corrupt Info.plist (which I THINK we fixed in another open PR, right??): 
   {quote}
   [ERROR] Failed to parse app's Info.plist: /Users/hans/Documents/Apps/hyperloop-examples/build/iphone/build/Products/Debug-iphonesimulator/Hyperloop_Sample.app/Info.plist
   {quote}
   
   *Update 2*: It's TIMOB-23518 and it works on Titanium 6.0.
   
   [~cng] [~jvennemann]</li>
<li>Hans Knöchel 2016-07-19

   PR: <a href="https://github.com/appcelerator/hyperloop.next/pull/42" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/pull/42</a></li>
<li>Lee Morris 2017-03-20

   Closing ticket as fixed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-23652.json">JSON Source</a></p>