---
title: "[TIMOB-23665] [Hyperloop] iOS: custom class is not added to Xcode project and compiled if no other frameworks are being used in the project"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-07-29T22:58:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Components</th><td>Hyperloop, iOS, Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chris Bowley</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2016-07-20T19:12:01.000+0000</td></tr>
<tr><th>Updated</th><td>2016-08-01T20:28:54.000+0000</td></tr>
</table>

<h3>Description</h3>

Creating a new project, enabling Hyperloop and adding a custom class does not work unless a Cocoa Touch framework is also referenced.

Steps:
* Create new project
* Configure the project for Hyperloop 
* Add a custom Obj-C class '<code>MyClass</code>', declare it in <code>appc.js</code> and require it in <code>index.js</code> controller

Result:
* MyClass metabase JS file is generated
* MyClass is not added to the Xcode project and therefore not compiled
* No build-time error, run time error <code>Cannot find class with name: MyClass</code>

I have tracked down the cause: 

Custom classes and frameworks are added to the Xcode project in the plugin <code>updateXcodeProject</code> function. This function makes this check for content in <code>this.nativeModules</code>: <a href="https://github.com/appcelerator/hyperloop.next/blob/master/iphone/plugin/hyperloop.js#L672." rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/blob/master/iphone/plugin/hyperloop.js#L672.</a> <code>this.nativeModules</code> is populated here: <a href="https://github.com/appcelerator/hyperloop.next/blob/master/iphone/plugin/hyperloop.js#L574." rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/blob/master/iphone/plugin/hyperloop.js#L574.</a>

I have attached an example project which demonstrates the error.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-23665_59841/CustomClassTest.zip">CustomClassTest.zip</td></td><td>2016-07-20T19:11:57.000+0000</td><td>10475506</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Jan Vennemann 2016-07-28

   PR: <a href="https://github.com/appcelerator/hyperloop.next/pull/43" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/pull/43</a>
   
   Thanks [~cbowley] for the detailed description of this issue! Really helped me to jump right in^^ Thanks to your demo project i was able to address a similar issue with swift files. The PR contains fixes for both issues.</li>
<li>Chee Kiat Ng 2016-07-29

   CR and FT passed.
   
   <h4>Steps to test</h4>
   1. download the sample app
   2. configure it accordingly to the correct version of hyperloop
   3. *appc run -p ios -l trace*
   
   <h4>Expected result</h4>
   On the console, you will see <code>[INFO]  MyClass.hello(): hello</code> and no errors.</li>
<li>Wilson Luu 2016-07-29

   Reopening ticket. I do not see this fix in Ti SDK 5.4.0.v20160727143921. Looks like the fix went only into master branch.</li>
<li>Hans Kn√∂chel 2016-07-29

   [~wluu] Just to be ensure: The fix is part of the Hyperloop module, not the core SDK. So you need to replace the Hyperloop version with the latest hyperloop.next build (not in the releases tab, yet). Can you compile the module and test it from there? Otherwise, I would compile it for you on Monday.</li>
<li>Wilson Luu 2016-07-29

   [~hansknoechel], My bad, misread the PR. But yes, I was able to verify the fix with the latest Hyperloop module 1.2.5. Will resolve ticket again, but won't close until Hyperloop 1.2.5 is released.
   
   Tested on:
   
   Appc CLI NPM: 4.2.7
   Appc CLI Core: 5.4.0-37
   Arrow: 1.8.2
   SDK: 5.4.0.v20160727143921
   Hyperloop: 1.2.5
   Node: v4.4.7
   OS: Mac OS X (10.11.6)
   Xcode: 7.3.1
   Device: iphone 6 simulator (9.3)</li>
<li>Wilson Luu 2016-08-01

   Closing ticket as fixed. Verified that if I use the attached sample with Hyperloop 1.2.5, then I do not get the runtime error.
   
   Tested on:
   
   Appc CLI NPM: 4.2.7
   Appc CLI Core: 5.4.0-37
   Arrow: 1.8.2
   SDK: 5.4.0.v20160801022303
   Hyperloop: 1.2.5
   Node: v4.4.7
   OS: Mac OS X (10.11.6)
   Xcode: 7.3.1
   Device: iphone 6 plus (9.1)
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-23665.json">JSON Source</a></p>