---
title: "[TIMOB-23672] Android: Hyperloop - A meaningful error message should appear If you try to stringify an object instance"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android, Hyperloop</td></tr>
<tr><th>Labels</th><td>qe-5.4.0</td></tr>
<tr><th>Reporter</th><td>Wilson Luu</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2016-07-21T20:42:25.000+0000</td></tr>
<tr><th>Updated</th><td>2017-09-22T15:11:12.000+0000</td></tr>
</table>

<h3>Description</h3>

*Details:* Currently with Android Hyperloop, if you try to stringify an object instance, a <code>Uncaught RangeError: Maximum call stack size exceeded</code> runtime error is thrown. This is expected, but the returned error message looks like this:
<code><pre>
[ERROR] TiExceptionHandler: (main) [9945,9945] ----- Titanium Javascript Runtime Error -----
[ERROR] TiExceptionHandler: (main) [0,9945] - In ti:/titanium.js:0,0
[ERROR] TiExceptionHandler: (main) [0,9945] - Message: Uncaught RangeError: Maximum call stack size exceeded
[ERROR] TiExceptionHandler: (main) [0,9945] - Source: (function (exports, require, module, __filename, __dirname, Titanium, Ti, glob
[ERROR] V8Exception: Exception occurred at ti:/titanium.js:0: Uncaught RangeError: Maximum call stack size exceeded
[ERROR] V8Exception: RangeError: Maximum call stack size exceeded
</pre></code>

On iOS, if you stringify an object instance, you will get back a meaningful error message:
<code><pre>
[ERROR] Script Error {
[ERROR]     column = 35;
[ERROR]     line = 14;
[ERROR]     message = "JSON.stringify cannot serialize cyclic structures.";
[ERROR]     sourceURL = "file:///Users/wilson_san/Library/Developer/CoreSimulator/Devices/E0D90275-BCED-43E8-9A05-36D3BBF73A52/data/Containers/Bundle/Application/F53BA1D6-12DA-4D52-A229-D1CDA2B87800/monkey23198.app/alloy/controllers/index.js";
[ERROR]     stack = "stringify@[native code]\ndoClick@file:///Users/wilson_san/Library/Developer/CoreSimulator/Devices/E0D90275-BCED-43E8-9A05-36D3BBF73A52/data/Containers/Bundle/Application/F53BA1D6-12DA-4D52-A229-D1CDA2B87800/monkey23198.app/alloy/controllers/index.js:14:35";
[ERROR] } 
[ERROR] 2016-07-21 13:14:36.120 monkey23198[38836:3930678] Attempting to load the view of a view controller while it is deallocating is not allowed and may result in undefined behavior (&lt;UIAlertController: 0x7fa96bc3a190&gt;)
[TRACE] [monkey23198] Attempting to load the view of a view controller while it is deallocating is not allowed and may result in undefined behavior (&lt;UIAlertController: 0x7fa96bc3a190&gt;)
[ERROR]   
</pre></code>

*Steps to reproduce:*
<h4>Create a Hylperloop enabled project: <code>appc new</code></h4>
<h4>In the index.js, replace the code with this:</h4>
<code><pre>
var String = require('java.lang.String');

function doClick(e) {
    alert($.label.text);
    var empty = new String();
    console.log(JSON.stringify(empty));
}

$.index.open();
</pre></code>
<h4>Install the app to an Android device/emulator: <code>appc run -p android</code></h4>

*Actual:* A <code>RangeError: Maximum call stack size exceeded</code> runtime error is thrown; see above for stack trace.

*Expected:* A meaningful message should appear for Android, similar to iOS.

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-23672.json">JSON Source</a></p>