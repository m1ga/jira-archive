---
title: "[TIMOB-23681] Hyperloop: NSInteger or NSUInteger are not working well"
---
<table>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-12-11T22:49:15.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Hyperloop</td></tr>
<tr><th>Labels</th><td>hyperloop</td></tr>
<tr><th>Reporter</th><td>Shuo Liang</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2016-07-26T01:02:02.000+0000</td></tr>
<tr><th>Updated</th><td>2018-12-11T22:49:15.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Reproduce</h4>
1. If you have following method in custom SDK.
<code><pre>
#import &lt;Foundation/Foundation.h&gt;

@interface TestLib : NSObject 

// Takes pointer to NSInteger as third argument to store result
+(void)addNumber: (NSInteger)num1 with:(NSInteger)num2 result:(NSInteger*)result;

@end
</pre></code>
2. And call it in a app like following
<code><pre>
var result = 0;
	
    TestLib.addNumberWithResult(1, 2, result); // throws [NSInvocation setArgument:atIndex:]: NULL address argument error
    										   // TestLib expects a pointer to NSInteger as third argument
    alert('Result: ' + result);
</pre></code>

3.Then you will get error like following which seems hyperloop do not recognise the pointer to NSIntege or NSUInteger.
<code><pre>
-[NSInvocation setArgument:atIndex:]: NULL address argument 
[ERROR] : Script Error { 
[ERROR] : column = 26; 
[ERROR] : description = "-[NSInvocation setArgument:atIndex:]: NULL address argument"; 
[ERROR] : line = 98; 
[ERROR] : message = "-[NSInvocation setArgument:atIndex:]: NULL address argument"; 
[ERROR] : name = NSInvalidArgumentException; 
</pre></code>

<h4>Note</h4>
Note sure is this expected. If yes, please change this to a feature request ticket since customer try to use a RSA SDK, but can't do it because of the above issue.

<h3>Comments</h3>

<ol>
<li>Chee Kiat Ng 2016-10-28

   Hmm. The method uses a pointer to NSInteger as the third parameter, which is unconventional. I think Hyperloop presumes you use the iOS api with objective C in a conventional way.
   you can't exactly assign a <code>var result</code> to a pointer. and so it errors out.
   It's expected behavior, unless there's someway using nodeJS you give result as a memory address or pointer. [~hansknoechel] thoughts?</li>
<li>Shuo Liang 2017-01-24

   [~hansknoechel] [~jvennemann]
   
   Please update this. Thanks.</li>
<li>Jan Vennemann 2017-01-24

   [~sliang], as Kiat already mentioned, Javascript doesn't support the concept of pointers like in C-style languages, so what the customer is trying to achieve in his example is not possible. Although Javascript passes objects in a pass-by-reference style there is now way to control that. Primitive values like integers are always passed by value hence invoking a native function which uses a pointer to pass a primitive value back to it's calling context won't work.
   Please note that this only applies to primitive values. Objects created with Hyperloop proxy classes like <code>var view = new UIView()</code> can be modified and those changes will be available in the calling context.
   To workaround this limitation the customer has make use of return values instead of pointers for primitive values.</li>
</ol>


<p><a href="/TIMOB/TIMOB-23681.json">JSON Source</a></p>