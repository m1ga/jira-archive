---
title: "[TIMOB-23734] Windows: section updateItemAt updates wrong item"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-08-12T01:55:39.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.4.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>listView, qe-5.4.0, windowsphone</td></tr>
<tr><th>Reporter</th><td>Zakhar Zhuravlev</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2016-08-04T09:39:49.000+0000</td></tr>
<tr><th>Updated</th><td>2016-08-17T16:13:54.000+0000</td></tr>
</table>

<h3>Description</h3>

affect version - 5_4_X 5.4.0.v20160802165655

*index.js:*
<code><pre>
function onUpdate() {
	$.section.updateItemAt(1, {info: {text: 'update'}});
}

$.section.appendItems([
	{info: {text: 'title 1'}},
	{info: {text: 'title 2'}},
	{info: {text: 'title 3'}}
]);
$.win.open();
</pre></code>

*index.xml:*
<code><pre>
&lt;Alloy&gt;
    &lt;Window id="win" backgroundColor='black'&gt;
		&lt;ListView id="list" defaultItemTemplate="template"&gt;

            &lt;Templates&gt;
                &lt;ItemTemplate name="template"&gt;
                    &lt;Label bindId="info" id="title" /&gt;
                &lt;/ItemTemplate&gt;
            &lt;/Templates&gt;

            &lt;ListSection id='section' /&gt;
        &lt;/ListView&gt;
        
        &lt;Button width='100dp' height='50dp' bottom="50dp" backgroundColor='red' onClick='onUpdate' /&gt;
	&lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>


in 5_4_X 5.4.0.v20160802165655 updates 2nd elem instead of 1st.
in 5.3.0 working fine

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2016-08-05

   Reopening as a 5.4.0 regression for now, [~gmathews] already looks into it. Thanks!</li>
<li>Gary Mathews 2016-08-08

   I cannot reproduce the issue, this test case seems to work fine
   
   *TEST CASE #1*
   <code><pre>
   var win = Ti.UI.createWindow({ backgroundColor: 'blue' }),
       section = Ti.UI.createListSection({
           headerTitle: 'Letters',
           items: [
               { properties: { title: '0: A' } },
               { properties: { title: '1: A' } },
               { properties: { title: '2: C' } },
               { properties: { title: '3: D' } }
           ]
       }),
       listView = Ti.UI.createListView({ sections: [section] });
   
   listView.addEventListener('click', function (e) {
       section.updateItemAt(1, { properties: { title: '1: B' } });
   });
   
   win.add(listView);
   win.open();
   </pre></code>
   
   *Please note that the item index starts at 0, the first item in the list is at index 0 and not index 1.*</li>
<li>Zakhar Zhuravlev 2016-08-08

   Of course, I know that array index starts from 0.
   
   Your example works for me!! But you don't use .xml file. Try MY example! MY EXAMPLE DOESN'T WORK CORRECTLY!!!!</li>
<li>Harry Bryant 2016-08-08

   I can confirm that this is a valid bug. with [~gmathews]'s test code, the correct item is updated (set to 1, second item in the list). But with [~zozo4kin]'s test code:
   
   *updateItemAt 0:* Second item is updated.
   *updateItemAt 1:* Third item is updated.
   *updateItemAt 2:*  Runtime Error: Exception Unknown.
   
   Seems that the indexing is being read incorrectly with Alloy Projects.
   
   Tested on: 
   Windows 10 Pro 
   Windows Phone 10.0 (Microsoft Lumia 640 LTE) 
   Appc Studio: 4.7.0.201607250649
   Ti SDK: 5.4.0.v20160804185318
   Appc NPM: 4.2.7
   Appc Core: 5.4.0-40
   Node: v4.4.4
   
   *Reopening Ticket.*</li>
<li>Gary Mathews 2016-08-08

   Ah, the problem was the inclusion of a <code>headerTitle</code>. Apologies.
   
   *TEST CASE #2*
   <code><pre>
   var win = Ti.UI.createWindow({ backgroundColor: 'blue' }),
       section = Ti.UI.createListSection({
           items: [
               { properties: { title: '0: A' } },
               { properties: { title: '1: A' } },
               { properties: { title: '2: C' } },
               { properties: { title: '3: D' } }
           ]
       }),
       listView = Ti.UI.createListView({ sections: [section] });
    
   listView.addEventListener('click', function (e) {
       section.updateItemAt(1, { properties: { title: '1: B' } });
   });
    
   win.add(listView);
   win.open();
   </pre></code>
   
   master: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/808" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/808</a>
   5_4_X: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/809" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/809</a></li>
<li>Ewan Harris 2016-08-09

   Verified using:
   
   Windows 10 Pro
   Appc core: 5.4.0-40
   Appc NPM: 4.2.7
   Ti SDK: 5.4.0.v20160809033140
   Lumia 930: 10.0
   Lumia 520: 8.1
   
   When calling section.updateItemAt on a section with no header the correct item is now updated
   
   Closing ticket</li>
<li>Zakhar Zhuravlev 2016-08-10

   IT IS NOT WORKING FOR 0 index!
   
   try update item at 0 index and ypu will get exception:  
   
   message: "invalid vector <T> subscript"
   native_stack: ["JSExportClass<class Titanium::UI::ListSection>::CallNamedFunction"]</li>
<li>Ewan Harris 2016-08-10

   [~zozo4kin] Thanks. I'll reopen this ticket.
   
   Windows 10 Pro
   Appc core: 5.4.0-40
   Appc NPM: 4.2.7
   Ti SDK: 5.4.0.v20160809033140
   
   <code><pre>
   var win = Ti.UI.createWindow({ backgroundColor: 'blue' }),
       section = Ti.UI.createListSection({
           items: [
               { properties: { title: '0: A' } },
               { properties: { title: '1: A' } },
               { properties: { title: '2: C' } },
               { properties: { title: '3: D' } }
           ]
       }),
       listView = Ti.UI.createListView({ sections: [section] });
    
   listView.addEventListener('click', function (e) {
       section.updateItemAt(0, { properties: { title: '1: B' } });
   });
    
   win.add(listView);
   win.open();
   </pre></code></li>
<li>Gary Mathews 2016-08-10

   master: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/813" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/813</a></li>
<li>Zakhar Zhuravlev 2016-08-11

    Why 6.0.0 ? =((( It's very critical bug, I'm waiting for it. It was working in 5.3.0 and 5.3.1....</li>
<li>Hans Knöchel 2016-08-11

    [~zozo4kin] We just released 5.4.0.GA today and the ticket was just raised this week. After it is merged, it needs to go through our quality engineering to be tested in detail. The next possible release therefore is 6.0.0, but you can still apply the PR manually to your SDK and patch it. Please see our guides on how to do that, thanks!</li>
<li>Ewan Harris 2016-08-17

    Verified using:
    
    Windows 10 Pro
    Appc core: 6.0.0-26
    Appc NPM: 4.2.8-5
    Ti SDK: 6.0.0.v20160817065403
    
    updateItemAt now updates the correct item and no longer errors on index 0 when not using headerTitle.
    
    Closing ticket</li>
</ol>


<p><a href="/TIMOB/TIMOB-23734.json">JSON Source</a></p>