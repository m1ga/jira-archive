---
title: "[TIMOB-23790] node-ios-device: emitter error during process exit and uncaught exception"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-08-22T06:37:44.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.5.0, node-ios-device 0.11.1, ioslib 0.13.1, node-ios-device 0.11.2, ioslib 0.13.2, ioslib 0.15.0, ioslib 0.15.1, ioslib 0.15.2, ioslib 0.15.3, ioslib 0.15.4, node-ios-device 1.0.0, ioslib 1.0.0, ioslib 1.0.1</td></tr>
<tr><th>Components</th><td>iOS, Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2016-08-18T20:50:19.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:49:11.000+0000</td></tr>
</table>

<h3>Description</h3>

Running an iOS app on device from Ti CLI causes exception when quitting via CTRL-C.

<code><pre>
/Users/chris/Library/Application Support/Titanium/mobilesdk/osx/6.1.0/node_modules/node-ios-device/ios-device.js:199
		if (emitter._events[udid].length &lt;= 0) {
                           ^
TypeError: Cannot read property 'length' of undefined
    at stop (/Users/chris/Library/Application Support/Titanium/mobilesdk/osx/6.1.0/node_modules/node-ios-device/ios-device.js:199:28)
    at /Users/chris/Library/Application Support/Titanium/mobilesdk/osx/6.1.0/node_modules/ioslib/lib/device.js:118:16
    at EventEmitter.handler (/Users/chris/Library/Application Support/Titanium/mobilesdk/osx/6.1.0/node_modules/node-ios-device/ios-device.js:102:12)
    at emitOne (events.js:77:13)
    at EventEmitter.emit (events.js:169:7)
</pre></code>

I also noticed that node-ios-device would sometimes blow up due to an uncaught exception:

<code><pre>
&lt;snip&gt;
[TRACE] ** BUILD SUCCEEDED **
[INFO]  Finished building the application in 37s 687ms
  node-ios-device Calling binding.devices() +44s
  node-ios-device Found 1 device +1ms
[INFO]  Installing app on device: Milkshake
  node-ios-device Found 1 device +978ms
libc++abi.dylib: terminating with uncaught exception of type std::runtime_error
Abort trap: 6
</pre></code>

<h3>Comments</h3>

<ol>
<li>Chris Barber 2016-08-18

   node-ios-device PR: <a href="https://github.com/appcelerator/node-ios-device/pull/21" rel="nofollow" target="_blank">https://github.com/appcelerator/node-ios-device/pull/21</a>
   Published node-ios-device@0.11.1
   
   ioslib PR: <a href="https://github.com/appcelerator/ioslib/pull/40" rel="nofollow" target="_blank">https://github.com/appcelerator/ioslib/pull/40</a>
   Published ioslib@0.13.1
   
   tisdk master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8240" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8240</a>
   tisdk 6_0_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8241" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8241</a>
   tisdk 5_5_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8242" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8242</a></li>
<li>Chris Barber 2016-08-18

   To test, build an iOS app for device. Make sure the device is connected over both USB and Wifi. How do you know if you are connected via Wifi? I have no clue.
   
   Another way to test this is to just run node-ios-device's log test since the bug essentially has to do with starting the syslog service.</li>
<li>Eric Merriman  2018-08-06

   Cleaning up older fixed issues. If this issue should not have been closed as fixed, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-23790.json">JSON Source</a></p>