---
title: "[TIMOB-23818] Hyperloop: Command to trigger metabase generation"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Hyperloop, Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2016-08-24T19:52:01.000+0000</td></tr>
<tr><th>Updated</th><td>2017-11-10T17:08:39.000+0000</td></tr>
</table>

<h3>Description</h3>

Run a Hyperloop enable project with Liveview, modify project file with new Hyperloop requires will trigger a Liveview reload. If the required reference hasn't been generated on the first build, Liveview will spit out error,  i.e <code>Couldn't find module: UIKit/UITableView for architecture: x86_64</code>.

Liveview needs a way to trigger hyperloop metabase regeneration. 

*Step to Reproduce*
1. Create a project with Hyperloop enabled, add <code>var UIView = require('UIKit/UIView');</code>
2. Enable Liveview, run the project
3. Modify the code to reference Hyperloop, add <code>var UITableView = require('UIKit/UITableView');</code>

*Actual Result*
<code>Couldn't find module: UIKit/UITableView for architecture: x86_64</code> error in the output.

If you look into <code>&lt;projectDir&gt;/build/iphone/build/Products/Debug-iphonesimulator/&lt;APPNAME&gt;.app/hyperloop/uikit</code> folder, you'll find <code>uitableview.js</code> file missing.




<h3>Comments</h3>

<ol>
<li>Hans Kn√∂chel 2016-09-06

   There is a public <code>generateMetabase</code> that could be triggered, although it would need refactoring to be called independently.</li>
<li>Jan Vennemann 2016-12-13

   As Liveview works outside of the normal build pipeline there is currently no way make it work properly with Hyperloop. Although it would be possible to regenerate missing JS files there is also some native helper code required to properly support blocks and framework function such as <code>CGRectMake</code>. Those would required a new build to be available in the app, something which Liveview is not capable of. The only way to fix that would be to generate ALL available APIs during the build, not just the ones that are actually used in the code but that would have an significant impact on the app size and i wouldn't consider that as a viable solution at all.
   
   I added a new section to the [Hyperloop FAQ](<a href="https://wiki.appcelerator.org/display/FAQ/Hyperloop+FAQ#HyperloopFAQ-Liveview)" rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/FAQ/Hyperloop+FAQ#HyperloopFAQ-Liveview)</a> to reflect the current limitations related to Hyperloop usage with Liveview.
   
   *Edit:* Just an idea: We could try to alter the metabase generation behavior into dev and production. So in dev we generate all JS proxies and helper code so on consequent build we don't have to check for any new Hyperloop requires and Liveview would work. This should also have a positive impact on build time for consequent build. On release builds we continue with our current behavior and only generate things for APIs that are actually used.</li>
</ol>


<p><a href="/TIMOB/TIMOB-23818.json">JSON Source</a></p>