---
title: "[TIMOB-23848] Ti.Media add focus methods and properties"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android, iOS</td></tr>
<tr><th>Labels</th><td>android, camera, continuous, focus, ios, media, mode</td></tr>
<tr><th>Reporter</th><td>Ricardo Pereira</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2016-08-31T14:09:44.000+0000</td></tr>
<tr><th>Updated</th><td>2020-02-14T11:15:26.000+0000</td></tr>
</table>

<h3>Description</h3>

The focus is set by default to the AUTO, there is no way to change it, in my case I need to use the continuous focus mode.

android:
FOCUS_MODE_CONTINUOUS_PICTURE & FOCUS_MODE_CONTINUOUS_VIDEO

iOS
AVCaptureFocusMode ContinuousAutoFocus or AVCaptureFocusModeContinuousAutoFocus

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2016-08-31

   Hello, Thanks for creating the ticket. Our engineers will look into it. We will let you know if and when we will make avialble of this features. Thanks.</li>
<li>Hans Knöchel 2016-08-31

   Sounds interesting. can you propose an API for this interface? It is for the <code>showCamera</code> arguments, right? Maybe something like:
   <code><pre>
   Ti.Media.showCamera({
       focusMode: Ti.Media.FOCUS_MODE_AUTO // default, other constants available
   });
   </pre></code>
   
   EDIT: 
   
   iOS has
   <code><pre>
   AVCaptureFocusModeLocked
   AVCaptureFocusModeAutoFocus
   AVCaptureFocusModeContinuousAutoFocus
   </pre></code>
   Android has:
   <code><pre>
   FOCUS_MODE_AUTO
   FOCUS_MODE_CONTINUOUS_PICTURE
   FOCUS_MODE_CONTINUOUS_VIDEO
   FOCUS_MODE_EDOF
   FOCUS_MODE_FIXED
   FOCUS_MODE_INFINITY
   FOCUS_MODE_MACRO
   </pre></code>
   
   We could use the auto-ones for the default values, the continuous ones cross-platform and the others platform-specific. Makes sense?</li>
<li>Ricardo Pereira 2016-09-01

   </li>
<li>Tiago Miguel Filipe Duarte 2016-12-05

   </li>
<li>Vijay Singh 2016-12-06

   PR : <a href="https://github.com/appcelerator/titanium_mobile/pull/8662" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8662</a>
   
   [~hansknoechel] Please review above PR  and let me know your feedback. Unit test cases part I will do later. 
   
   Implementation example -
   
   <code><pre>
   var win = Titanium.UI.createWindow({
   	backgroundColor:'white'
   });
   
   var button = Titanium.UI.createButton({
   	top: 20,
   	width:100,
   	height: 60,
   	title: 'OpenCamera'
   });
   
   button.addEventListener('click', function(e) {
   	Titanium.Media.showCamera({
   
   	success:function(event)
   	{
   		var cropRect = event.cropRect;
   		if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO)
   		{
   			var imageView = Ti.UI.createImageView({
   				width:200,
   				height:200,
   				image:event.media
   			});
   			win.add(imageView);
   		}
   	},
   	cancel:function()
   	{
   	},
   	error:function(error)
   	{
   	},
   	focusMode:Ti.Media.FOCUS_MODE_FIXED,
   	showControls:true,
   	saveToPhotoGallery:true,
   	allowEditing:true,
   });
   });
   win.add(button);
   win.open();
   </pre></code>
   
   
   
   </li>
<li>Vijay Singh 2016-12-14

   In above PR I was trying to get the AVCaptureDevice and changing the property . But after changing, it get reset  to its default one. So this will not work.
   Actually the mentioned property is available in AVFoundation framework in iOS .
   We are currently using UIImagePickerController to open camera i.e available in UIKit framework.
   If we want to integrate the mentioned property , we have to use AVCaptureSession. There we can  use AVCaptureDevice and manage the properties .
   [~cng] [~hansknoechel] We have to discuss on same because it is major change.
   
   <a href="https://www.objc.io/issues/21-camera-and-photos/camera-capture-on-ios/" rel="nofollow" target="_blank">https://www.objc.io/issues/21-camera-and-photos/camera-capture-on-ios/</a></li>
<li>Ricardo Pereira 2016-12-14

   </li>
<li>Vijay Singh 2016-12-15

   Same with torch mode ( TIMOB-23856 ).
   I don't think it is possible to use these properties right now until  the mentioned changes happen.
   Or is it possible with Hyperloop ?
   [~hansknoechel]  Can you confirm please.</li>
<li>Hans Knöchel 2016-12-19

   That is correct. Unfortunately, iOS only exposed the focus- and torch-modes for the <code>AVCaptureDevice</code>, not the <code>UIImagePickerController</code>. TIMOB-23947 tracks progress of that improvement.</li>
<li>Vijay Singh 2017-05-11

    In iOS for this ticket including TIMOB-23947 and TIMOB-23856 , we are creating a  camera module as  mentioned in wiki <a href="https://wiki.appcelerator.org/display/pe/Custom+Camera+Support+in+iOS" rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/pe/Custom+Camera+Support+in+iOS</a> .</li>
</ol>


<p><a href="/TIMOB/TIMOB-23848.json">JSON Source</a></p>