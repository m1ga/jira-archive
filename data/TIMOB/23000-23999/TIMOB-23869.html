---
title: "[TIMOB-23869] Windows: Ti.Media.takePicture usage does not include videosLibrary capability"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-09-14T00:41:50.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>qe-6.0.0</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2016-09-06T11:17:25.000+0000</td></tr>
<tr><th>Updated</th><td>2016-09-16T14:12:21.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

When using the code below and not adding the videosLibrary capability, when the picture is taken the app will crash. If the videosLibrary capability is added then it will work as expected. From testing it appears that the generation of used capabilities by the CLI does not add the videosLibrary capability.

<code><pre>
var win = Ti.UI.createWindow({ backgroundColor: 'green', layout: 'vertical' }),
    openButton = Ti.UI.createButton({ title: 'OPEN CAMERA', backgroundColor: 'blue' }),
    imageView = Ti.UI.createImageView({ width: Ti.UI.FILL, height: '70%' });
 
var overlay = Ti.UI.createView({
    layout: 'vertical',
    height: '20%', width: Ti.UI.FILL,
    bottom: 0
}),
takeButton = Ti.UI.createButton({ title: 'TAKE A PHOTO', backgroundColor: 'red' }),
hideButton = Ti.UI.createButton({ title: 'HIDE PREVIEW', backgroundColor: 'red' });
 
takeButton.addEventListener('click', function () {
    Ti.Media.takePicture();
});
hideButton.addEventListener('click', function () {
    Ti.Media.hideCamera();
});
overlay.add(takeButton);
overlay.add(hideButton);
 
openButton.addEventListener('click', function () {
    Ti.Media.showCamera({
        whichCamera: Titanium.Media.CAMERA_FRONT, // Titanium.Media.CAMERA_REAR
        mediaTypes: [Ti.Media.MEDIA_TYPE_PHOTO],
        overlay: overlay,
        success: function (e) {
            Ti.API.info('showCamera() success');
        },
        error: function (e) {
            alert('showCamera() error: ' + JSON.stringify(e));
        }
    });
});
 
win.add(openButton);
win.add(imageView);
win.open();
</pre></code>

<h4>Steps to reproduce</h4>

<h4>Add the code above to an existing app.js</h4>
<h4>Build for a device</h4>
<h4>Click OPEN CAMERA</h4>
<h4>Click TAKE PHOTO</h4>

<h4>Actual result</h4>

The app will crash as the videosLibrary is not included

<h4>Expected result</h4>

App should not crash, correct capabilities should be added

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2016-09-06

   master: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/853" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/853</a>
   6_0_X: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/854" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/854</a></li>
<li>Ewan Harris 2016-09-09

   Reopening ticket:
   
   OS: Microsoft Windows 10 Pro 10.0.14393
   Appc core: 6.0.0-38
   Appc NPM: 4.2.8-6
   Ti SDK: 6.0.0.v20160909001132
   
   Code in description crashes still. Seems like <Capability Name="picturesLibrary" /> is also required</li>
<li>Gary Mathews 2016-09-12

   master: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/866" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/866</a>
   6_0_X: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/867" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/867</a></li>
<li>Ewan Harris 2016-09-16

   Verified using:
   
   OS: Microsoft Windows 10 Pro 10.0.14393
   Appc core: 6.0.0-42
   Appc NPM: 4.2.8-6
   Ti SDK: 6.0.0.v20160915125929
   Appc Studio: 4.8.0.201609101003
   Lumia 930 10.0
   
   Using the code in the description the app no longer crashes.
   
   Closing ticket</li>
</ol>


<p><a href="/TIMOB/TIMOB-23869.json">JSON Source</a></p>