---
title: "[TIMOB-23907] Hyperloop: Incomplete Metadata for forward declarations"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-03-03T14:02:57.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Hyperloop 2.0.1</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Jan Vennemann</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2016-09-15T06:45:42.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-16T13:11:47.000+0000</td></tr>
</table>

<h3>Description</h3>

The class SFSpeechRecognitionResult will be detected but does not include any metadata info about its properties or methods. This is due to the class being forward declared with <code>@class</code> and then being used as a block argument which is an argument to another method.

SFSpeechRecognizer.h:
<code><pre>
- (SFSpeechRecognitionTask *)recognitionTaskWithRequest:(SFSpeechRecognitionRequest *)request resultHandler:(void (^)(SFSpeechRecognitionResult * __nullable result, NSError * __nullable error))resultHandler;
</pre></code>

This probably applies to other Classes that are also referenced like this.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-23907_61669/one_more_thing.mp3">one_more_thing.mp3</td></td><td>2017-02-23T14:56:48.000+0000</td><td>220472</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Jan Vennemann 2017-02-23

   PR (master): <a href="https://github.com/appcelerator/hyperloop.next/pull/125" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/pull/125</a>
   PR (2_0_X): <a href="https://github.com/appcelerator/hyperloop.next/pull/126" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/pull/126</a>
   
   *Testing steps*
   1. Create a new Hyperloop enabled classic app
   2. Add a usage description to the plist section in tiapp.xml
   <code><pre>
   &lt;key&gt;NSSpeechRecognitionUsageDescription&lt;/key&gt;
   &lt;string&gt;Use speech recognition&lt;/string&gt;
   </pre></code>
   3. Paste the following code in your app.js
   <code><pre>
   var SFSpeechRecognizer = require("Speech/SFSpeechRecognizer");
   var SFSpeechURLRecognitionRequest = require("Speech/SFSpeechURLRecognitionRequest");
   var NSBundle = require('Foundation/NSBundle');
   var NSLocale = require("Foundation/NSLocale");
   var NSURL = require('Foundation/NSURL');
   var speechRecognizer = SFSpeechRecognizer.alloc().initWithLocale(NSLocale.alloc().initWithLocaleIdentifier("en_US"));
   if (speechRecognizer.isAvailable()) {
     var soundPath = NSBundle.mainBundle.pathForResourceOfType("one_more_thing", "mp3");
     var soundURL = NSURL.fileURLWithPath(soundPath);
     var request = SFSpeechURLRecognitionRequest.alloc().initWithURL(soundURL);
     speechRecognizer.recognitionTaskWithRequestResultHandler(request, function(result, error) {
       Ti.API.debug(result.bestTranscription.formattedString);
       Ti.API.debug(result.isFinal());
     });
   } else {
     Ti.API.info('Speech recognizer not available');
   }
   </pre></code>
   4. Save the attached audio file under <code>Resources/iphone</code>
   5. Build and launch the app on a device. It should log the transcriptions process.</li>
<li>Harry Bryant 2017-03-16

   Verified as fixed, testing with both Hyperloop module versions 2.0.1 & 2.1.0, the demo code provided above now transcribes audio files correctly.
   
   Tested On:
   Hyperloop Module (2.0.1 / 2.1.0)
   CocoaPods 1.2.0
   iPhone 7 10.2 Device
   Mac OS Sierra (10.12.2)
   Ti SDK: 6.0.3.v20170314141715
   Appc NPM: 4.2.9-1
   App CLI: 6.1.0
   Xcode 8.2.1
   Node v4.6.0
   
   *Closing ticket.*
   
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-23907.json">JSON Source</a></p>