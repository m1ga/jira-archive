---
title: "[TIMOB-23924] iOS: Random app-rejection due to usage of non-public API"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-09-22T02:01:05.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 5.5.1</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>focus, private_api, rejection, symbols</td></tr>
<tr><th>Reporter</th><td>Ivan Skugor</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-09-19T11:16:15.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:49:13.000+0000</td></tr>
</table>

<h3>Description</h3>

Hi. Recently my app got rejected from Apple. This was all right few weeks ago. I used 5.1.1.GA and I didn't change anything significant. I also tried to resubmit app with 5.5.0.GA but that didn't go through also. 

Also, noticed this is not isolated issue as one more developer experienced the same issue.


Here is response from Apple:

Performance - 2.5.1


    Your app uses or references the following non-public APIs:

    focus:

    The use of non-public APIs is not permitted on the App Store because it can lead to a poor user experience should these APIs change.



And more info about error in Ti SDK:

Thank you for your reply. Our team has re-reviewed this app to ensure our findings were accurate, we found this app contains references to the following selectors:

"focus:" was found in the method -[TiRootViewController manuallyRotateToOrientation:duration:]



Please take a look at this asap. Thanks.

<h3>Comments</h3>

<ol>
<li>Ivan Skugor 2016-09-19

   I may have opened this issue in wrong project. Sorry :(</li>
<li>Hans Knöchel 2016-09-19

   Apple seems to go crazy now..The method is one of our own methods. I have an open discussion with them and will ping this ticket as soon as I receive a list of possible API's they have problems with.</li>
<li>Ivan Skugor 2016-09-19

   Thanks!</li>
<li>Hans Knöchel 2016-09-19

   For now, please write Apple that it is no private API, but only a method that is called "focus". They can check [this line](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/TiRootViewController.m#L1490)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/TiRootViewController.m#L1490)</a> to validate.</li>
<li>Ivan Skugor 2016-09-20

   Thanks. The other developer that run into this issue said he managed to submit app after commenting out that line in generated XCode project. Are you aware of any possible issues if that's done?</li>
<li>Hans Knöchel 2016-09-21

   Well, it's the public <code>focus()</code> method that you are removing there. So when you are < iOS 8 and rotate the screen and a field is currently focussed, it won't refocus after the orientation change. So either Apple removed the selector from the (random) blacklist or we need to do method swizzling, which I really want to prevent. It would replace this:
   <code><pre>
   [kfvProxy focus:nil];
   </pre></code>
   with
   <code><pre>
   [kfvProxy performSelector:NSSelectorFromString([NSString stringWithFormat:@"%@c%@:", @"fo", @"us"]) withObject:nil];
   </pre></code>
   
   (cc [~cng]: I will make all PR's from master to 5.5.x. You can decide if you take all or only master and 6_0_X)</li>
<li>Hans Knöchel 2016-09-21

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/8408" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8408</a>
   PR (6_0_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/8409" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8409</a>
   PR (5_5_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/8410" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8410</a>
   
   Steps to test:
   1. Create a new Titanium app
   2. Submit the app to the App Store
   
   Expected behavior: *No rejection!*</li>
<li>Ivan Skugor 2016-09-21

   Thanks. At the end I managed to submit app by letting Apple know it's not non-public method. :)</li>
<li>Chee Kiat Ng 2016-09-22

   PRs merged.</li>
<li>Eric Merriman  2018-08-06

    Cleaning up older fixed issues. If this issue should not have been closed as fixed, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-23924.json">JSON Source</a></p>