---
title: "[TIMOB-23925] iOS: App rejected because some <key> in the Info.plist aren't specified"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-10-04T08:32:04.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.5.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>nicolomonili</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-09-19T08:55:51.000+0000</td></tr>
<tr><th>Updated</th><td>2018-06-14T21:42:11.000+0000</td></tr>
</table>

<h3>Description</h3>

From SDK 5.5.0.G.A Titanium require some new keys in the Info.plist file <a href="https://www.appcelerator.com/blog/2016/09/ga-release-for-titanium-sdk-5-5-0-appcelerator-cli-5-5-0-appcelerator-studio-4-7-1/" rel="nofollow" target="_blank">https://www.appcelerator.com/blog/2016/09/ga-release-for-titanium-sdk-5-5-0-appcelerator-cli-5-5-0-appcelerator-studio-4-7-1/</a>

<code><pre>
<ios>
    <plist>
        <dict>
            <key>NSContactsUsageDescription</key>
            <string>Can we use to your contacts?</string>
            <key>NSCameraUsageDescription</key>
            <string>Can we use your camera?</string>
            <key>NSCalendarsUsageDescription</key>
            <string>Can we use your calendar?</string>
            <key>NSPhotoLibraryUsageDescription</key>
            <string>Can we save to your library?</string>
            <key>NSMicrophoneUsageDescription</key>
            <string>Can we use your microphone?</string>
        </dict>
    </plist>
</ios>
</pre></code>

This is the (first) email that i received from iTunes Connect after the upload of an update of my app with *SDK 5.5.0.G.A*.
I haven't included any of the previous keys because the app not use any of that functionality.

<code><pre>
Dear developer,

We have discovered one or more issues with your recent delivery for "App Name". To process your delivery, the following issues must be corrected:

This app attempts to access privacy-sensitive data without a usage description. The app's Info.plist must contain an NSPhotoLibraryUsageDescription key with a string value explaining to the user how the app uses this data.

This app attempts to access privacy-sensitive data without a usage description. The app's Info.plist must contain an NSMicrophoneUsageDescription key with a string value explaining to the user how the app uses this data.

This app attempts to access privacy-sensitive data without a usage description. The app's Info.plist must contain an NSAppleMusicUsageDescription key with a string value explaining to the user how the app uses this data.

Once these issues have been corrected, you can then redeliver the corrected binary.

Regards,

The App Store team
</pre></code>

Ok , after the first email i have update the Info.plist file adding the *NSPhotoLibraryUsageDescription* and the *NSMicrophoneUsageDescription* keys (i don't use any of this functionality). After the second upload , this is the email (second) that i received from iTunes Connect.

<code><pre>
Dear developer,

We have discovered one or more issues with your recent delivery for "App Name". To process your delivery, the following issues must be corrected:

This app attempts to access privacy-sensitive data without a usage description. The app's Info.plist must contain an NSAppleMusicUsageDescription key with a string value explaining to the user how the app uses this data.

Once these issues have been corrected, you can then redeliver the corrected binary.

Regards,

The App Store team
</pre></code>

Ok , after the second email i have update the Info.plist file adding the *NSAppleMusicUsageDescription* key (i don't use this functionality). After the third upload all is ok.

So : 
- Some keys seem to be required (NSMicrophoneUsageDescription and NSPhotoLibraryUsageDescription), even if the feature is not used
- Add in the docs (and in the article) this keys *NSAppleMusicUsageDescription*


<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2016-09-19

   Hey there,
   
   the keys <code>NSPhotoLibraryUsageDescription</code> and <code>NSMicrophoneUsageDescription</code> are even required when you use any camera- or photo-related API. The <code>NSAppleMusicUsageDescription</code> can be necessary when using any music-related API's, but also media-related queries.  The latter one is also discussed in TIMOB-23923.
   
   Although this does not seem to be a Titanium SDK-issue, I would check your source-code anyway (confidential). If you want that, please let me know.</li>
<li>nicolomonili 2016-09-19

   I can confirm that this app dont' use any *camera or photo-related API* /  *music-related API's*. In fact from the app settings (Settings / App) there is only the cellular data option.</li>
<li>Hans Knöchel 2016-09-19

   Ok, if that's the case, we may need to adjust out compiler-symbols. We only compile certain *classes* when the namespace is used, e.g. <code>USE_TI_MEDIA</code> for any <code>Ti.Media</code> API. But in the case that you have an API on the  <code>Ti.Media</code>, all other methods are generated as well. So I would like to know if we can generate method-based symbols to detect this and only compile certain methods if they are actually used.
   
   Need some time to think about that.</li>
<li>Hans Knöchel 2016-09-19

   [~cbarber] We use [this lines](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/cli/commands/_build.js#L5675)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/cli/commands/_build.js#L5675)</a> to generate symbols like <code>USE_TI_MEDIA</code> for all <code>Ti.Media</code> methods. Could we integrate a "whitelist" / regex that also detects the usage of <code>Ti.Media.queryMusicLibrary</code>, <code>Ti.Media.showCamera</code> and <code>Ti.Media.openPhotoGallery</code>? Then we could use precompile-macros for those, e.g. <code>USE_TI_MEDIA_QUERYMUSICLIBRARY</code> and Apple won't complain in the future.
   
   *EDIT*: Looks like it already does something in the build-process:
   <code><pre>
   { ANALYTICS: 1,
     API: 1,
     NETWORK: 1,
     PLATFORM: 1,
     UI: 1,
     UISETBACKGROUNDCOLOR: 1,
     UITABGROUP: 1,
     UIWINDOW: 1,
     UITAB: 1,
     UILABEL: 1,
     MEDIASHOWCAMERA: 1,
     MEDIA: 1 }
   </pre></code>
   So maybe <code>USE_TI_MEDIASHOWCAMERA</code> could actually be generated.</li>
<li>Chris Barber 2016-09-20

   [~hansknoechel] The build will detect all Titanium calls and defines preprocessor constants for the API and its parent. So <code>Ti.Media.showCamera</code> will generate <code>USE_TI_MEDIASHOWCAMERA</code> and <code>USE_TI_MEDIA</code>. There is no need for a whitelist. iOS simply needs to refer to the more specific <code>USE_TI_MEDIASHOWCAMERA</code> and <code>USE_TI_MEDIAQUERYMUSICLIBRARY</code> instead of just <code>USE_TI_MEDIA</code>. We can use this symbol map to generate missing keys in the <code>Info.plist</code> or show a warning that they are missing.</li>
<li>Hans Knöchel 2016-09-20

   Gotcha. But since we currently only wrap the whole <code>MediaModule</code> class with one  <code>#ifdef USE_TI_MEDIA</code>, affected methods like <code>-(void)showCamera:(id)args</code> would even be generated without using them. So we need to a) wrap all related methods (this is huge) and b) detect used symbols to throw warnings beforehand. But I would neglect b) since we already throw a warning in the methods themselves. 
   
   I have a wip-PR for this, but since it's very easy to break stuff with compiler-macros, it needs some more testing before submitting something. Assigning to fix-version 6.0.0 for now.</li>
<li>Chris Barber 2016-09-20

   How many related methods are there? Ti.Media isn't that big. There's a boat load of constants, but there aren't that many methods. And maybe we leave the methods there, but <code>#ifdef</code> the implementation and leave the methods in place, perhaps emit a warning or exception if invoked. We should do this anyways. What happens if you build an app for device that does an <code>eval('Ti.Media.showCamera()')</code>? There are scenarios where the implementation will not exist, but it the API can still be invoked.</li>
<li>Hans Knöchel 2016-09-24

   Correct. We need the same for all other related API's, e.g. Ti.Calendar, Ti.Contacts and probably Ti.Geolocation. I just read another post about this on Slack (regarding contacts usage). [~cng] Do you want me to work on this?</li>
<li>Chee Kiat Ng 2016-09-26

   [~hansknoechel] yes please. Thanks!</li>
<li>David Fox 2016-09-26

    I'm having this same issue while trying to build my app.
    
    Just to confirm though, as a temporary workaround, adding these keys despite not actually using the functionality won't break anything, is that correct?</li>
<li>nicolomonili 2016-09-26

    correct </li>
<li>christian ribe 2016-09-28

    I am having the same issue. The NSAppleMusicUsageDescription requirement surprised the heck out of me...
    What should we put in the string key ? Since apple refuses empty strings... "Not used" ??</li>
<li>Hans Knöchel 2016-09-28

    Anything that makes sense, e.g. "Can we access your music library to select music?". I know it's a pseudo-sentence, but since you don't use the API, it won't be prompted anyway. And as soon as this ticket is resolved, you can remove the key again.</li>
<li>christian ribe 2016-09-28

    Makes sense thanks Hans.</li>
<li>Hans Knöchel 2016-10-01

    PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8456" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8456</a>
    Packaged version of this PR: [mobilesdk-6.1.0-osx.zip](<a href="https://www.dropbox.com/s/n8czyv57ytxtadq/mobilesdk-6.1.0-osx.zip?dl=1)" rel="nofollow" target="_blank">https://www.dropbox.com/s/n8czyv57ytxtadq/mobilesdk-6.1.0-osx.zip?dl=1)</a>
    
    *Some notes*:
    * The current status should already resolve all of the above warnings
    * -I will check Ti.Contacts and Ti.Calendar next (should not be as critical as Ti.Media, since they don't include that many different API's)-
    * This needs to be very very well reviewed before merging. I already did tons of both logical tests, but I may have forgot a method-dependency.
    
    *EDIT*: I can't see problems with non-used Ti.Calendar / Ti.Contacts issues. If your app was rejected because of <code>NSCalendarsUsageDescription</code> or <code>NSContactsUsageDescription</code> and you did *not* use the above API's, please let us know!
    
    *This part is only relevant for the review of this ticket*:
    
    Here is how you scan your packaged app:
    <h4>Unzip the AppName.ipa file after renaming AppName.ipa to AppName.zip</h4>
    <h4>Open the AppName.app file and navigate to the AppName file (no suffix, thats a binary)</h4>
    <h4>Copy the AppName file to the desktop</h4>
    <h4>Open the terminal and navigate to the desktop</h4>
    <h4>Use <code>nm AppName | grep _EK</code> to check for Ti.Calendar API's</h4>
    <h4>Use <code>nm AppName | grep _AV</code> to check for Ti.Media API's</h4>
    <h4>Use <code>nm AppName | grep _CN</code> to check for Ti.Contacts API's (neglect <code>_CNCopy*</code> results)</h4>
    <h4>Use <code>nm AppName | grep CLLocation</code> to check for Ti.Geolocation API's (should already be wrapped correctly before)</h4>
    
    *Additional review-steps*:
    1. Create a new app with the packaged version of this PR
    2. Build the app for device 
    3. Follow the above steps to check the symbols of our new apps which are the base for all other ones
    
    Also please test the KitchenSink for possible problems regarding Ti.Media API's. I will try to setup another test-case that includes all major Ti.Media API's (showCamera, saveToGallery, openPhotoGallery, openMusicLibrary, queryMusicLibrary).</li>
<li>Hans Knöchel 2016-10-01

    [~nicolomonili] And I noticed that you used <code>Appcelerator Studio 4.3.3.201510212245</code> which is very outdated. Please use Studio 4.7.x for iOS 10 compatibility.</li>
<li>nicolomonili 2016-10-02

    @Hans Knoechel ok I'll update! strange that is not detected the new version though ..</li>
<li>Chee Kiat Ng 2016-10-03

    See comments on PR for KitchenSink-found issues. Scanning a new project that doesn't include any Media / Contacts related API yields no results, which is correct.</li>
<li>Chee Kiat Ng 2016-10-04

    PR approved. Let's do a backport for 6_0_X please. [~hansknoechel]</li>
<li>Hans Knöchel 2016-10-04

    PR (6_0_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/8469" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8469</a></li>
<li>Chee Kiat Ng 2016-10-04

    PR merged.</li>
<li>Eric Wieber 2016-11-11

    Verified fixed, using:
    MacOS 10.12 (16A323)
    Studio 4.8.0.201611020954
    Ti SDK 6.0.0.v20161111062138
    Appc NPM 4.2.8-9
    Appc CLI 6.0.0-69
    Alloy 1.9.4
    Xcode 8.1 (8B62)
    
    Scanned and submitted apps with different combinations of permissions or no permissions at all. All were accepted and only showed usage of permissions that were actually used. </li>
<li>Junaid Younus 2017-01-24

    We were able to reproduce this issue with the 6.0.1 release of the SDK.
    
    Here's the email:
    
    <code><pre>
    Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app's Info.plist must contain an NSCalendarsUsageDescription key with a string value explaining to the user how the app uses this data.
    
    Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app's Info.plist must contain an NSPhotoLibraryUsageDescription key with a string value explaining to the user how the app uses this data.
    </pre></code>
    
    
    We don't use any Calendar or Photo functionality in our app, I did a project-wide search for Ti.Calendar and Ti.Media and there's nothing in our code, only in some auto generated build files. We bypassed the issue by adding the appropriate keys to the tiapp.xml files.</li>
<li>Hans Knöchel 2017-01-24

    [~jyounus] Can you post the contents of the <code>build/iphone/Classes/defines.h</code> file here? We are currently working on a 6.0.2 version, thx!</li>
<li>Hans Knöchel 2017-01-24

    And are you using an Admob module? It's a known issue on their side that they fixed recently. Update the module version in that case.</li>
<li>Danny Pham 2017-03-17

    I have received the same rejection message with missing NSCalendarsUsageDescription key using latest Titanium SDK 6.0.2 and latest Admob version 2.1.0</li>
<li>Eric Merriman  2017-03-17

    Hello [~crossbits] 
    Did you add the NSCalendarsUsageDescription key and value to the tiapp.xml plist section?</li>
<li>Danny Pham 2017-03-17

    After the rejection, yes. Now the upload seems fine. But I don't use any calender functions.</li>
<li>Eric Merriman  2017-03-17

    Hmmm... If you look in the folder: <your project>/build/ios and find the Xcode project, and launch it in Xcode, does a search of your code for NSCalendar object give us any clue about where the source of the rejection would've come from?</li>
<li>Hans Knöchel 2017-03-17

    [~crossbits] Let's work on that then! Can you reach out to me on Ti-Slack and send me the generated defines.m from <code>build/iphone/Classes/</code>? Thx!</li>
<li>Hans Knöchel 2017-03-20

    The issue was inside the Admob library. Should be fixed after [this update](<a href="https://github.com/appcelerator-modules/ti.admob/pull/67)." rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.admob/pull/67).</a></li>
<li>Hans Knöchel 2017-03-25

    The new Ti.Admob version 2.1.1 is released and includes the above fixes as well.</li>
<li>Michael Gangolf 2017-10-19

    My TestFlight app with 6.3.0.RC got rejected because it didn't include *NSAppleMusicUsageDescription* again. I'm only using Camera, PhotoGallery and these Modules:
    <code><pre>
    <module platform="iphone">dk.napp.slidemenu</module>
    <module platform="commonjs">reste</module>
    <module platform="commonjs">nl.fokkezb.html2as</module>
    <module>av.imageview</module>
    </pre></code>
    I'll add it again but I have 4 versions online already (6.2.0.GA) which didn't need the key in tiapp.xml</li>
<li>Jason Kneen 2017-10-30

    Seeing the music and photo error from Apple when the app we're building doesn't access camera or photos and doesn't access music.
    
    It does play / stream remote videos.</li>
<li>Jason Kneen 2017-10-30

    That's on 6.2.2.GA btw</li>
<li>Mitul Bhalia 2018-01-09

    One of my app is rejected yesterday with ti sdk 6.3.1 saying NSBluetoothPeripheralUsageDesc key is missing.
    
    @Jason Kneen 
    </li>
<li>Jason Kotchoff 2018-06-14

    Apple rejected our app today which was built with Ti 7.1.1 stating:
    
    bq. We identified one or more issues with a recent delivery for your app, "xxx". Please correct the following issues, then upload again.
    bq. Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app's Info.plist must contain an NSPhotoLibraryUsageDescription key with a string value explaining to the user how the app uses this data.
    bq. Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app's Info.plist must contain an NSBluetoothPeripheralUsageDescription key with a string value explaining to the user how the app uses this data.
    bq. Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app's Info.plist must contain an NSMicrophoneUsageDescription key with a string value explaining to the user how the app uses this data.
    
    Our app doesn't use the photo library, bluetooth or the microphone however I managed to get a build accepted by apple by adding the following to the tiapp.xml:
    
    <code><pre>
    <dict>
      <key>NSPhotoLibraryUsageDescription</key>
      <string>Can we save to your photo library?</string>
      <key>NSBluetoothPeripheralUsageDescription</key>
      <string>Can we use your bluetooth?</string>
      <key>NSMicrophoneUsageDescription</key>
      <string>Can we use your microphone?</string>
    </dict>
    </pre></code>
    
    The app doesn't use admob so this must be related to the core Titanium SDK.</li>
<li>Jason Kotchoff 2018-06-14

    Actually, a friend told me his app was rejected for containing vague descriptions like this so I'll change this to:
    
    <code><pre>
    <dict>
        <key>NSPhotoLibraryUsageDescription</key>
        <string>APP_NAME does not use your photo library</string>
        <key>NSBluetoothPeripheralUsageDescription</key>
        <string>APP_NAME does not use your bluetooth</string>
        <key>NSMicrophoneUsageDescription</key>
        <string>APP_NAME does not use your microphone</string>
    </dict>
    </pre></code>
    
    based on:
    [<a href="https://stackoverflow.com/questions/39519773/nsphotolibraryusagedescription-key-must-be-present-in-info-plist-to-use-camera-r/39519960#39519960" rel="nofollow" target="_blank">https://stackoverflow.com/questions/39519773/nsphotolibraryusagedescription-key-must-be-present-in-info-plist-to-use-camera-r/39519960#39519960</a>](<a href="http://example.com)" rel="nofollow" target="_blank">http://example.com)</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-23925.json">JSON Source</a></p>