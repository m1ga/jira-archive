---
title: "[TIMOB-23956] Hyperloop: Improve error handling for non-default Xcode installations"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-09-29T12:22:22.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>hyperloop 1.2.7</td></tr>
<tr><th>Fix Version/s</th><td>Hyperloop 2.2.0</td></tr>
<tr><th>Components</th><td>Hyperloop, Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Jan Vennemann</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2016-09-28T07:34:14.000+0000</td></tr>
<tr><th>Updated</th><td>2017-10-06T23:48:24.000+0000</td></tr>
</table>

<h3>Description</h3>

Currently we solely rely on the user having the correct Xcode Version under <code>/Applications/Xcode.app</code> as stated in the [Enabling Hyperloop](<a href="https://wiki.appcelerator.org/display/guides2/Enabling+Hyperloop)." rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/guides2/Enabling+Hyperloop).</a> This can easily lead to unexpected behaviour when different Xcode versions are installed. We should evaluate if it is possible to detected the libclang version that is loaded and then require a minimum version to avoid wrong metabase generation. Also when the user does not have Xcode installed in the above default directory the metebase generation will fail due to the hardcoded rpath. We should catch this error and tell the user what to do to fix it.

<h3>Comments</h3>

<ol>
<li>Chris Barber 2016-11-03

   I thought the Hyperloop CLI plugin was getting the correct path from <code>builder.xcodeEnv.path</code>?</li>
<li>Jan Vennemann 2016-11-03

   Yes it is, but the runpath to the libclang library is hardcorded at compile time in the metabase executable. So if anyone has a non-default xcode install location the metabase generation will fail or use the wrong library when different xcode versions are installed.</li>
<li>Jan Vennemann 2017-09-29

   Possible approach to allow different Xcode locations: We might be able to check the result of <code>xcode-select -p</code>, compare the path with the one in the binary with <code>otool -l</code> and then fix it using <code>install_name_tool</code>. A version check inside the metabase binary would be required then to see if we can use the libclang version of the currently selected Xcode.</li>
<li>Abir Mukherjee 2017-10-06

   </li>
</ol>


<p><a href="/TIMOB/TIMOB-23956.json">JSON Source</a></p>