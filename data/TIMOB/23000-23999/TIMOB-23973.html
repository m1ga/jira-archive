---
title: "[TIMOB-23973] iOS: Events on images inside ListViewItem templates not fired (regression)"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-10-04T04:21:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 5.4.0, Release 5.5.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>imageview, kroll-thread, listview, load, qe-6.0.0, regression</td></tr>
<tr><th>Reporter</th><td>Nuno Costa</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-09-28T21:36:04.000+0000</td></tr>
<tr><th>Updated</th><td>2016-10-05T17:00:49.000+0000</td></tr>
</table>

<h3>Description</h3>

I think I found an issue on images inside ListViewItem templates,  the event did not fire if we have  *"+image+" property*. 
Works just fine on 5.2.X and 5.3.X, but not on 5.4.GA and 5.5.GA.
Actually is very irregular.

*Not fire the event: (with "+image=""+" property)*
<code><pre>
&lt;ItemTemplate id="template" name="template"&gt;
  &lt;ImageView bindId="imageGrid" id="imageGrid" image="2313275.jpg" onClick="Test" /&gt;
  &lt;/ItemTemplate&gt;
</pre></code>

*Fired normally! ({color:red}without{color} "+image=""+" property)*

<code><pre>
 &lt;ImageView bindId="imageGrid" id="imageGrid" onClick="Test" /&gt;
</pre></code>


Also seams if I put "run-on-main-thread  TRUE",  the event fires normally too, but I can't do that in our project.

<code><pre>
&lt;property name="run-on-main-thread" type="bool"&gt;true&lt;/property&gt;
</pre></code>


In our project is comment out, like:

<code><pre>
 &lt;!--&lt;property name="run-on-main-thread" type="bool"&gt;true&lt;/property&gt;--&gt;
</pre></code>


P.S. In our case we have 3 events, which they worked acceptably well on the 5.2.x and 5.3.x sdk.
We have this issues since the 5.4.GA, but just yesterday is that I've isolated the problem in detail.


<code><pre>
 &lt;ImageView bindId="imageGrid" id="imageGrid" onDoubletap="flip" onLongpress="doShowBtns" onSingletap="doTap" /&gt;

</pre></code>


There is any workaround until the fix? We need to release the app :)

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-23973_60372/2313275.jpg">2313275.jpg</td></td><td>2016-09-28T21:37:31.000+0000</td><td>42590</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-23973_60370/index.js">index.js</td></td><td>2016-09-28T21:34:34.000+0000</td><td>258</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-23973_60373/index.tss">index.tss</td></td><td>2016-09-28T21:48:21.000+0000</td><td>479</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-23973_60371/index.xml">index.xml</td></td><td>2016-09-28T21:34:23.000+0000</td><td>457</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-23973_60401/TIMOB-23973_used_images.zip">TIMOB-23973_used_images.zip</td></td><td>2016-10-03T16:09:18.000+0000</td><td>86993</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Nuno Costa 2016-09-28

   </li>
<li>Nuno Costa 2016-10-03

   Let me know if you want me test/change something in this/my side in order to speedup the process? Any "Objc-C" code anything is fine!</li>
<li>Hans Knöchel 2016-10-03

   The issue was initially caused by [this commit](<a href="https://github.com/appcelerator/titanium_mobile/pull/7879)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/7879)</a> and was fixed for one of the use-cases with [this commit](<a href="https://github.com/appcelerator/titanium_mobile/pull/8158)." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8158).</a> So either we revert the <code>load</code>-event ticket completely or find a way to process this special event on the kroll-thread correctly.</li>
<li>Hans Knöchel 2016-10-03

   Hui, just fixed it the first issue (load-event). Basically we need to revert all those proxy-changes that have been made by the previous two PR's and add the correct delegate to the view. Yay!</li>
<li>Hans Knöchel 2016-10-03

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/8461" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8461</a>
   PR (6_0_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/8462" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8462</a>
   
   Test-cases (run with and without main-thread, use the attached images):
   <a href="https://gist.github.com/hansemannn/0f654bcaee125e7df994625bedc6d840" rel="nofollow" target="_blank">https://gist.github.com/hansemannn/0f654bcaee125e7df994625bedc6d840</a>
   
   -But I noticed that this will only work for the load-event, when the <code>load</code> event does not need to be triggered asynchronously (which is a likely use-case). So I still need to find out how to delegate the string through the proxy and fire it as soon as it's available.- -- *Fixed!*</li>
<li>Nuno Costa 2016-10-03

   Glad you solved it! 
   Took me hours, days to isolate this issue :)
   
   I will test then I will report back Hans Knoechel.</li>
<li>Nuno Costa 2016-10-03

   Hans Knoechel, Im running here 5.5.1.GA, I duplicated the sdk folder to 5.5.1.dev (usual I do this), now what is PR that I should use:
   
   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/8461" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8461</a> 
   PR (6_0_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/8462" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8462</a></li>
<li>Hans Knöchel 2016-10-03

   To patch it manually, fork the 5_5_X branch and cherry-pack from either of both (they should both integrate well into 5_5_X). But don't simply replace the files, that could lead to bad side-effects. Cherry-picking is the way to go here.</li>
<li>Nuno Costa 2016-10-03

   Usually for small changes I do the above. Many Thanks!</li>
<li>Nuno Costa 2016-10-03

    My quick tests, says to me this works like  is supposed to! #Kudos for #Hans Knoechel and to #all
    Should be Fixed and works ok on 5.5.1.dev :)
    
    *P.S:* Tested +against our app+ with +use case above reported+ , *is fixed*.</li>
<li>Chee Kiat Ng 2016-10-04

    CR and FT passed. PRs merged. Good job.</li>
<li>Josh Longton 2016-10-05

    Verified as fixed, events are now being fired.
    
    Tested On:
    
    {noformat}
    iPhone 6 10.0 Device
    iPhone 7 10.0 Sim
    iPhone 5 9.3.5 Device
    Mac OSX El Capitan 10.12
    Ti SDK: 6.0.0.v20161005072811
    Appc Studio: 4.8.0.201609292239
    Appc NPM: 4.2.8-7
    App CLI: 6.0.0-56
    Xcode 8.0 
    Node v4.4.7
    {noformat}
    
    *Closing ticket.*</li>
</ol>


<p><a href="/TIMOB/TIMOB-23973.json">JSON Source</a></p>