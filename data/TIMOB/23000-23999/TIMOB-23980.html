---
title: "[TIMOB-23980] CLI: Android module build errors out with spawn ti ENOENT when building without --build-only"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2017-07-03T13:59:16.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.0, Release 5.5.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android, Tooling</td></tr>
<tr><th>Labels</th><td>qe-6.0.0</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2016-10-04T10:31:33.000+0000</td></tr>
<tr><th>Updated</th><td>2017-07-03T13:59:16.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

*This is not a regression, occurs using 5.5.1.GA components*

When building an Android module without <code>--build-only</code> the build process errors out with the below. This comes from the CLI attempting to [spawn ti](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/cli/commands/_buildModule.js#L1487)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/cli/commands/_buildModule.js#L1487)</a>, there is a check if spawning on Windows but it is never triggered as the statement does not return true as <code>.bat</code> is not present in the command

* This happens using ti cli and appc cli
* The spawning of ti may lead to issues when running appc cli as a user might not have the titanium cli installed

<code><pre>
[DEBUG] Staging module project at C:\Users\ewan\AppData\Local\Temp\ti-android-module-build-11694-1752-g5y5p0
Error: spawn ti ENOENT
    at exports._errnoException (util.js:907:11)
    at Process.ChildProcess._handle.onexit (internal/child_process.js:178:32)
    at onErrorNT (internal/child_process.js:344:16)
    at nextTickCallbackWith2Args (node.js:442:9)
    at process._tickCallback (node.js:356:17)
---------------------------------------------
    at ChildProcess.spawn (internal/child_process.js:281:13)
    at exports.spawn (child_process.js:362:9)
    at runTiCommand (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\android\cli\commands\_buildModule.js:1453:15)
    at AndroidModuleBuilder.&lt;anonymous&gt; (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\android\cli\commands\_buildModule.js:1487:4)
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:718:13
    at iterate (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:262:13)
    at async.forEachOfSeries.async.eachOfSeries (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:281:9)
    at _parallel (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:717:9)
    at Object.async.series (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:739:9)
---------------------------------------------
    at AndroidModuleBuilder.tasks (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\android\cli\commands\_buildModule.js:1327:15)
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:718:13
    at iterate (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:262:13)
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:274:29
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:44:16
    at Object.&lt;anonymous&gt; (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:723:17)
    at Object.&lt;anonymous&gt; (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:167:37)
    at CLI._fireHookCallback (C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\lib\hook.js:269:12)
    at C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\lib\hook.js:248:10
---------------------------------------------
    at Object.run (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\lib\subprocess.js:59:8)
    at AndroidModuleBuilder.&lt;anonymous&gt; (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\android\cli\commands\_buildModule.js:1277:22)
    at C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\lib\hook.js:256:13
    at C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\node_modules\async\lib\async.js:697:13
    at C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\node_modules\async\lib\async.js:52:16
    at iterate (C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\node_modules\async\lib\async.js:263:24)
    at async.forEachOfSeries.async.eachOfSeries (C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\node_modules\async\lib\async.js:284:9)
    at _parallel (C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\node_modules\async\lib\async.js:688:9)
    at Object.async.series (C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\node_modules\async\lib\async.js:710:9)
---------------------------------------------
    at Object.setImmediate (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:194:9)
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:272:35
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:44:16
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:723:17
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:167:37
    at AndroidModuleBuilder.assetFiles (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\android\cli\commands\_buildModule.js:1262:4)
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:718:13
    at iterate (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:262:13)
    at async.forEachOfSeries.async.eachOfSeries (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:281:9)
---------------------------------------------
    at Object.setImmediate (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:194:9)
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:272:35
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:44:16
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:723:17
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:167:37
    at AndroidModuleBuilder.verifyBuildArch (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\android\cli\commands\_buildModule.js:1235:2)
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:718:13
    at iterate (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:262:13)
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:274:29
---------------------------------------------
    at Object.run (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\lib\subprocess.js:59:8)
    at AndroidModuleBuilder.&lt;anonymous&gt; (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\android\cli\commands\_buildModule.js:1176:19)
    at C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\lib\hook.js:256:13
    at C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\node_modules\async\lib\async.js:697:13
    at C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\node_modules\async\lib\async.js:52:16
    at iterate (C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\node_modules\async\lib\async.js:263:24)
    at async.forEachOfSeries.async.eachOfSeries (C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\node_modules\async\lib\async.js:284:9)
    at _parallel (C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\node_modules\async\lib\async.js:688:9)
    at Object.async.series (C:\Users\ewan\AppData\Roaming\npm\node_modules\titanium\node_modules\async\lib\async.js:710:9)
---------------------------------------------
    at Object.setImmediate (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:194:9)
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:272:35
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:44:16
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:723:17
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:167:37
    at AndroidModuleBuilder.ndkLocalBuild (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\android\cli\commands\_buildModule.js:1103:10)
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:718:13
    at iterate (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:262:13)
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:274:29
---------------------------------------------
    at Object.run (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\lib\subprocess.js:59:8)
    at AndroidModuleBuilder.tasks (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\android\cli\commands\_buildModule.js:1063:20)
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:718:13
    at Immediate.iterate (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:262:13)
    at processImmediate [as _immediateCallback] (timers.js:383:17)
---------------------------------------------
    at Object.setImmediate (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:194:9)
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:272:35
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:44:16
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:723:17
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:167:37
    at AndroidModuleBuilder.&lt;anonymous&gt; (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\android\cli\commands\_buildModule.js:1049:4)
    at C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:718:13
    at iterate (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:262:13)
    at async.forEachOfSeries.async.eachOfSeries (C:\ProgramData\Titanium\mobilesdk\win32\6.0.0.v20161002235150\node_modules\node-appc\node_modules\async\lib\async.js:281:9)
</pre></code>

<h4>Steps to reproduce</h4>

<h4>Create an android module on Windows <code>ti create --type module --name awesomOandroid --id com.awesomO.windows-p android --workspace-dir .</code></h4>
<h4><code>cd awesomOandroid \android</code></h4>
<h4><code>ti build -p android</code></h4>

<h4>Actual result</h4>

Module build fails

<h4>Expected result</h4>

Module build should not fail

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2017-07-03

   Closing as a dupe of  TIMOB-24912</li>
</ol>


<p><a href="/TIMOB/TIMOB-23980.json">JSON Source</a></p>