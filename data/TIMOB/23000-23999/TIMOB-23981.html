---
title: "[TIMOB-23981] Windows: Using Ti.Media.showCamera with saveToPhotoGallery throws access denied"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2016-10-20T23:55:41.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>qe-6.0.0</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2016-10-04T17:27:00.000+0000</td></tr>
<tr><th>Updated</th><td>2016-10-20T23:55:41.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

When using Ti.Media.showCamera and setting saveToPhotoGallery to true an error will be thrown after the user has taken a photo. This is fixed by adding the following capabilities 

<code><pre>
&lt;Capability Name="picturesLibrary" /&gt;
&lt;Capability Name="videosLibrary" /&gt;
</pre></code>

<code><pre>
function showCamera() {
    Titanium.Media.showCamera({
        success : function(event) {
            // called when media returned from the camera
            Ti.API.debug('Photo taken successfully');
        },
        cancel : function() {
            // called when user cancels taking a picture
            Ti.API.debug('Photo cancelled.');
        },
        error : function(error) {
            Ti.API.debug('Photo errored.');
            // called when there's an error
            var a = Titanium.UI.createAlertDialog({
                title : "Camera"
            });
            a.setMessage(JSON.stringify(error));
            a.show();
            console.log(JSON.stringify(error));
        },
        saveToPhotoGallery : true
    });
}
if (Ti.Media.hasCameraPermissions()) {
    showCamera();
} else {
    Ti.Media.requestCameraPermissions(function(e) {
        if (e.success === true) {
            showCamera();
        } else {
            alert("Access denied, error: " + e.error);
        }
    });
}
</pre></code>

<h4>Steps to reproduce</h4>

<h4>Add the code above to an existing app.js</h4>
<h4>Build for Windows <code>appc run -p windows -T wp-device</code></h4>
<h4>Take a photo</h4>
<h4>Tap the tick to save the photo</h4>

<h4>Actual result</h4>

Error is thrown

<h4>Expected result</h4>

Error should not be thrown

<h3>Comments</h3>

<ol>
<li>Kota Iguchi 2016-10-20

   I would resolve this as "won't fix", because it is difficult to detect if target property (saveToPhotoGallery) is actually true (or not) at compile time. We need to manually set required permission in this case.</li>
</ol>


<p><a href="/TIMOB/TIMOB-23981.json">JSON Source</a></p>