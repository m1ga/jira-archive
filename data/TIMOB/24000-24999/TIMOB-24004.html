---
title: "[TIMOB-24004] Android: Parameter tlsVersion has no effect in version< 5.0"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2016-10-12T10:19:55.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Michael Bahl</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2016-08-03T09:28:36.000+0000</td></tr>
<tr><th>Updated</th><td>2019-04-24T04:57:27.000+0000</td></tr>
</table>

<h3>Description</h3>



<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2016-08-03

   Hello, I Can't reproduce the issue with the code provided below. I am testing on ANdroid 4.4.4 with SDK 5.3.1.GA.
   
   <code><pre>
   var httpclient = Titanium.Network.createHTTPClient({
   
       validatesSecureCertificate: true,
   
       tlsVersion : Ti.Network.TLS_VERSION_1_2,
   
       onload : function(response) {
   
            Ti.API.info("Received text: " + this.responseText);
   
                    
   
       },
   
       onerror : function(response) {
   
            Ti.API.debug(response.error);
   
       }
   
    
   
   });
   
   httpclient.open("GET","<a href="https://appservices.anvilgroup.com/help" rel="nofollow" target="_blank">https://appservices.anvilgroup.com/help</a>");
   
   httpclient.send();
   </pre></code>
   
   I am getting no such error. 
   <code><pre>
   [INFO] :   Received text: &lt;!DOCTYPE html&gt;
   [INFO] :   &lt;html lang="en"&gt;
   [INFO] :   &lt;head&gt;
   [INFO] :   &lt;meta charset="utf-8" /&gt;
   [INFO] :   &lt;meta name="viewport" content="width=device-width" /&gt;
   [INFO] :   &lt;title&gt;ANVIL App Service API&lt;/title&gt;
   [INFO] :   
   [INFO] :   &lt;/head&gt;
   [INFO] :   &lt;body&gt;
   [INFO] :   
   [INFO] :   
   [INFO] :   &lt;link type="text/css" href="/Areas/HelpPage/HelpPage.css" rel="stylesheet" /&gt;
   [INFO] :   &lt;header class="help-page"&gt;
   [INFO] :   &lt;div class="content-wrapper"&gt;
   [INFO] :   &lt;div class="float-left"&gt;
   [INFO] :   &lt;h1&gt;ANVIL App Service API&lt;/h1&gt;
   [INFO] :   &lt;/div&gt;
   [INFO] :   &lt;/div&gt;
   [INFO] :   &lt;/header&gt;
   [INFO] :   &lt;div id="body" class="help-page"&gt;
   [INFO] :   &lt;section class="featured"&gt;
   [INFO] :   &lt;div class="content-wrapper"&gt;
   [INFO] :   &lt;h2&gt;Introduction&lt;/h2&gt;
   [INFO] :   &lt;p&gt;
   [INFO] :   This API is intended for ANVIL apps
   [INFO] :   &lt;/p&gt;
   [INFO] :   &lt;/div&gt;
   [INFO] :   &lt;/section&gt;
   [INFO] :   &lt;section class="content-wrapper main-content clear-fix"&gt;
   [INFO] :   
   [INFO] :   
   [INFO] :   &lt;h2 id="Assistance"&gt;Assistance&lt;/h2&gt;
   [INFO] :   &lt;p&gt;Supplies / accepts information for assistance&lt;/p&gt;
   [INFO] :   &lt;table class="help-page-table"&gt;
   [INFO] :   &lt;thead&gt;
   [INFO] :   &lt;tr&gt;&lt;th&gt;API&lt;/th&gt;&lt;th&gt;Description&lt;/th&gt;&lt;/tr&gt;
   [INFO] :   &lt;/thead&gt;
   [INFO] :   &lt;tbody&gt;
   [INFO] :   &lt;tr&gt;
   [INFO] :   &lt;td class="api-name"&gt;&lt;a href="/Help/Api/GET-api-ext-Assistance-Lines-id"&gt;GET api/{ext}/Assistance/Lines/{id}&lt;/a&gt;&lt;/td&gt;
   [INFO] :   &lt;td class="api-documentation"&gt;
   [INFO] :   &lt;p&gt;Gets Assistance lines configured for a specific client&lt;/p&gt;
   [INFO] :   &lt;/td&gt;
   [INFO] :   &lt;/tr&gt;
   [INFO] :   &lt;tr&gt;
   [INFO] :   &lt;td class="api-name"&gt;&lt;a href="/Help/Api/GET-api-ext-Assistance-LinesV1-id"&gt;GET api/{ext}/Assistance/LinesV1/{id}&lt;/a&gt;&lt;/td&gt;
   [INFO] :   &lt;td class="api-documentation"&gt;
   [INFO] :   &lt;p&gt;Gets Assistance lines configured for a specific client (using EnterpriseSetup V1 Client Id)&lt;/p&gt;
   [INFO] :   &lt;/td&gt;
   [INFO] :   &lt;/tr&gt;
   [INFO] :   &lt;/tbody&gt;
   [INFO] :   &lt;/table&gt;
   [INFO] :   
   [INFO] :   &lt;h2 id="InfoTree"&gt;InfoTree&lt;/h2&gt;
   [INFO] :   &lt;p&gt;Supply Info Tree items&lt;/p&gt;
   [INFO] :   &lt;table class="help-page-table"&gt;
   [INFO] :   &lt;thead&gt;
   [INFO] :   &lt;tr&gt;&lt;th&gt;API&lt;/th&gt;&lt;th&gt;Description&lt;/th&gt;&lt;/tr&gt;
   [INFO] :   &lt;/thead&gt;
   [INFO] :   &lt;tbody&gt;
   [INFO] :   &lt;tr&gt;
   [INFO] :   &lt;td class="api-name"&gt;&lt;a href="/Help/Api/GET-api-ext-InfoTree-id-type-countryId"&gt;GET api/{ext}/InfoTree/{id}/{type}/{countryId}&lt;/a&gt;&lt;/td&gt;
   [INFO] :   &lt;td class="api-documentation"&gt;
   [INFO] :   &lt;p&gt;Get Info Tree data items (by type) for a defined client&lt;/p&gt;
   [INFO] :   &lt;/td&gt;
   [INFO] :   &lt;/tr&gt;
   [INFO] :   &lt;tr&gt;
   [INFO] :   &lt;td class="api-name"&gt;&lt;a href="/Help/Api/GET-api-ext-InfoTree-id-type-countryId-language"&gt;GET api/{ext}/InfoTree/{id}/{type}/{countryId}/{language}&lt;/a&gt;&lt;/td&gt;
   [INFO] :   &lt;td class="api-documentation"&gt;
   [INFO] :   &lt;p&gt;Get resourced Info Tree data items (by type) for a defined client including a country Id filter&lt;/p&gt;
   [INFO] :   &lt;/td&gt;
   [INFO] :   &lt;/tr&gt;
   [INFO] :   &lt;tr&gt;
   [INFO] :   
   [INFO] :   &lt;td class="api-documentation"&gt;
   [INFO] :   &lt;p&gt;Get resourced Info Tree data items (by type) for a defined client&lt;/p&gt;
   [INFO] :   &lt;/td&gt;
   [INFO] :   &lt;/tr&gt;
   [INFO] :   &lt;/tbody&gt;
   [INFO] :   &lt;/table&gt;
   [INFO] :   
   [INFO] :   &lt;h2 id="Area"&gt;Area&lt;/h2&gt;
   [INFO] :   &lt;p&gt;Supplies information on areas (towns, cities etc)&lt;/p&gt;
   [INFO] :   &lt;table class="help-page-table"&gt;
   [INFO] :   &lt;thead&gt;
   [INFO] :   &lt;tr&gt;&lt;th&gt;API&lt;/th&gt;&lt;th&gt;Description&lt;/th&gt;&lt;/tr&gt;
   [INFO] :   &lt;/thead&gt;
   [INFO] :   &lt;tbody&gt;
   [INFO] :   &lt;tr&gt;
   [INFO] :   &lt;td class="api-name"&gt;&lt;a href="/Help/Api/GET-api-ext-Area-id"&gt;GET api/{ext}/Area/{id}&lt;/a&gt;&lt;/td&gt;
   [INFO] :   &lt;td class="api-documentation"&gt;
   [INFO] :   &lt;p&gt;Get Area record by Id&lt;/p&gt;
   [INFO] :   &lt;/td&gt;
   [INFO] :   &lt;/tr&gt;
   [INFO] :   &lt;tr&gt;
   [INFO] :   &lt;td class="api-name"&gt;&lt;a href="/Help/Api/GET-api-ext-Area-all"&gt;GET api/{ext}/Area/all&lt;/a&gt;&lt;/td&gt;
   [INFO] :   &lt;td class="api-documentation"&gt;
   [INFO] :   &lt;p&gt;Returns all Area records&lt;/p&gt;
   [INFO] :   &lt;/td&gt;
   [INFO] :   &lt;/tr&gt;
   [INFO] :   &lt;tr&gt;
   [INFO] :   &lt;td class="api-name"&gt;&lt;a href="/Help/Api/GET-api-ext-Area-Lookup-all"&gt;GET api/{ext}/Area/Lookup/all&lt;/a&gt;&lt;/td&gt;
   [INFO] :   &lt;td class="api-documentation"&gt;
   [INFO] :   &lt;p&gt;Returns a lookup list of ALL Area records&lt;/p&gt;
   [INFO] :   &lt;/td&gt;
   [INFO] :   &lt;/tr&gt;
   [INFO] :   &lt;tr&gt;
   [INFO] :   &lt;td class="api-name"&gt;&lt;a href="/Help/Api/GET-api-ext-Area-ByCountryId-id"&gt;GET api/{ext}/Area/ByCountryId/{id}&lt;/a&gt;&lt;
   </pre></code>
   
   Thanks.
   
   </li>
<li>Michael Bahl 2016-08-03

   Of cause your example works because <a href="https://appservices.anvilgroup.com" rel="nofollow" target="_blank">https://appservices.anvilgroup.com</a> support both tls1.1 and tls1.2,
   but your example wouldn't work if <a href="https://appservices.anvilgroup.com" rel="nofollow" target="_blank">https://appservices.anvilgroup.com</a> only supports tls1.2.
   
   For example both commands below will work for <a href="https://appservices.anvilgroup.com:" rel="nofollow" target="_blank">https://appservices.anvilgroup.com:</a>
   curl <a href="https://appservices.anvilgroup.com/help" rel="nofollow" target="_blank">https://appservices.anvilgroup.com/help</a> --tlsv1.1
   curl <a href="https://appservices.anvilgroup.com/help" rel="nofollow" target="_blank">https://appservices.anvilgroup.com/help</a> --tlsv1.2
   
   if we try to connect to a server which onyl supports tls1.2 for instance  <a href="https://elster.de:" rel="nofollow" target="_blank">https://elster.de:</a>
   curl <a href="https://elster.de" rel="nofollow" target="_blank">https://elster.de</a> --tlsv1.1 //This will fail
   curl <a href="https://elster.de" rel="nofollow" target="_blank">https://elster.de</a> --tlsv1.2 //This one  will work 
   
   If we try to connect to a server which only supports tls1.2 your titanium sample will fail
   on android < 5.0.
   
   Check it out and let me know your results.</li>
<li>Michael Bahl 2016-08-29

   I have creted a sample project for you --> <a href="https://github.com/MichelBahl/tls-AC-4323." rel="nofollow" target="_blank">https://github.com/MichelBahl/tls-AC-4323.</a>
   Please reopen this ticket.</li>
<li>Michael Bahl 2016-08-29

   Here is a video showing the bug <a href="https://www.youtube.com/watch?v=B8c0cBGIevs&feature=youtu.be" rel="nofollow" target="_blank">https://www.youtube.com/watch?v=B8c0cBGIevs&feature=youtu.be</a></li>
<li>Sharif AbuDarda 2016-09-28

   Hello, Can you try in latest SDK 5.5.0.GA?</li>
<li>Michael Bahl 2016-09-30

   I am gonna check this, this weekend</li>
<li>Michael Bahl 2016-10-03

   It's still not working.
   if you have problems to repdroduce the issue,
   contact me via e-mail to exchange skype name/number.</li>
<li>Sharif AbuDarda 2016-10-04

   Hello, I tried your test project, For me, the app works for both case, I watched your video, I see you are getting the error and for me, I am getting the below log in Android 5.0.0. Make sure you are using the latest SDK 5.5.1.GA. Thanks.
   <code><pre>
   [INFO] :   Received text: &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</a>"&gt;
   [INFO] :   &lt;html  xmlns="<a href="http://www.w3.org/1999/xhtml" rel="nofollow" target="_blank">http://www.w3.org/1999/xhtml</a>" xml:lang="de" lang="de"&gt;
   [INFO] :   &lt;head&gt;
   [INFO] :   &lt;title&gt;ELSTER - Die elektronische Steuererkl&auml;rung&lt;/title&gt;
   [INFO] :   &lt;meta http-equiv="Content-Language" content="de"&gt;
   [INFO] :   &lt;meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"&gt;
   [INFO] :   &lt;meta http-equiv="expires" content="0"&gt;
   [INFO] :   &lt;meta http-equiv="pragma" content="no-cache"&gt;
   [INFO] :   &lt;link rel='stylesheet' href='css/lp.css' type='text/css' /&gt;
   [INFO] :   &lt;link rel='stylesheet' href='css/buttons.css' type='text/css' /&gt;
   [INFO] :   &lt;link rel='stylesheet' href='css/buttons-core.css' type='text/css' /&gt;
   [INFO] :   &lt;link rel='stylesheet' href='css/font-awesome.css' type='text/css' /&gt;
   [INFO] :   &lt;script src="js/jquery-1.9.1.min.js" type="text/javascript"&gt;&lt;/script&gt;
   [INFO] :   &lt;script src="misc.js" type="text/javascript"&gt;&lt;/script&gt;
   [INFO] :   &lt;script type="text/javascript" src="js/jssor.js"&gt;&lt;/script&gt;
   [INFO] :   &lt;script type="text/javascript" src="js/jssor.slider.js"&gt;&lt;/script&gt;
   [INFO] :   &lt;script type="text/javascript" src="js/slider.js"&gt;&lt;/script&gt;
   [INFO] :   &lt;noscript&gt;
   [INFO] :   &lt;style type="text/css"&gt;
   [INFO] :   #slider1_container {display:none;}
   [INFO] :   &lt;/style&gt;
   [INFO] :   &lt;/noscript&gt;
   [INFO] :   &lt;/head&gt;
   [INFO] :   
   [INFO] :   &lt;body&gt;
   [INFO] :   &lt;div id="outmost"&gt;
   [INFO] :   &lt;a name="start"&gt;&lt;/a&gt;
   [INFO] :   &lt;div id="outer"&gt;
   [INFO] :   &lt;div id="content"&gt;
   [INFO] :   &lt;!-- Header Logo --&gt;
   [INFO] :   &lt;h1 class="invisible"&gt;Elster&lt;span lang="en"&gt; Landing Page&lt;/span&gt;&lt;/h1&gt;
   [INFO] :   &lt;img src="image/lphead.gif" alt="ElsterOnline" class="lphead"/&gt;
   [INFO] :   &lt;div id="flashheader"&gt;
   [INFO] :   &lt;noscript&gt;
   [INFO] :   &lt;h2 class="invisible"&gt;Info und n&uuml;tzliche Links&lt;/h2&gt;
   [INFO] :   &lt;div id="flashexample"&gt;&lt;img src="belegabruf/image/vast_motiv.png" alt="Das Bild ist ein Vorschaubild einer Werbeanimation. Es zeigt einen Vater mit seinem Sohn."/&gt;&lt;/div&gt;
   [INFO] :   &lt;div id="flashtext"&gt;
   [INFO] :   &lt;p class="schriftklwth"&gt;
   [INFO] :   Elster&lt;span lang="en" xml:lang="en"&gt;Online&lt;/span&gt; ist Ihr elektronisches Finanzamt. Mit Elster&lt;span lang="en" xml:lang="en"&gt;Online&lt;/span&gt; k&ouml;nnen Sie nach einer kostenlosen &lt;a href="<a href="https://www.elsteronline.de/eportal/eop/auth/Registrierung.tax" rel="nofollow" target="_blank">https://www.elsteronline.de/eportal/eop/auth/Registrierung.tax</a>" class="intextlink" title="Zur Registrierung im ElsterOnline-Portal, Link &ouml;ffnet neues Fenster." target="_blank"&gt;Registrierung&lt;/a&gt; viele Steuerangelegenheiten direkt und bequem am Computer erledigen - ganz ohne Ausdruck, Formulare und Postversand.&lt;br&gt;
   [INFO] :   &lt;/p&gt;
   [INFO] :   &lt;p id="flashtxtlink"&gt;
   [INFO] :   &lt;a href="<a href="https://www.elsteronline.de/eportal" rel="nofollow" target="_blank">https://www.elsteronline.de/eportal</a>" class="pure-button" target="_blank" title="Zum ElsterOnline-Portal, Link &ouml;ffnet neues Fenster"&gt;&lt;i class="fa fa-caret-right"&gt;&lt;/i&gt; Zum ElsterOnline-Portal&lt;/a&gt;&lt;br/&gt;
   [INFO] :   &lt;a href="./elfo_home.php" class="pure-button" target="_blank" title="Zum Download: ElsterFormular, Link &ouml;ffnet neues Fenster"&gt;&lt;i class="fa fa-caret-right"&gt;&lt;/i&gt; Download ElsterFormular&lt;/a&gt;&lt;br/&gt;
   [INFO] :   &lt;a href="./index_web.php" class="pure-button" target="_blank" title="Zur Elster Webseite, Link &ouml;ffnet neues Fenster"&gt;&lt;i class="fa fa-caret-right"&gt;&lt;/i&gt; ELSTER Webseite&lt;/a&gt;&lt;br/&gt;
   [INFO] :   &lt;a href="./belegabruf/index.php" class="pure-button" target="_blank" title="Zur Seite: Belegabruf, Link &ouml;ffnet neues Fenster"&gt;&lt;i class="fa fa-caret-right"&gt;&lt;/i&gt; Vorausgef&uuml;llte Steuererkl&auml;rung&lt;/a&gt;&lt;br/&gt;
   [INFO] :   &lt;/p&gt;
   [INFO] :   &lt;/div&gt;
   [INFO] :   &lt;div id="flashrgbg"&gt;&nbsp;&lt;/div&gt;
   [INFO] :   &lt;/noscript&gt;
   [INFO] :   &lt;!-- Jssor Slider Begin --&gt;
   [INFO] :   &lt;div id="slider1_container"&gt;
   [INFO] :   &lt;div class="loading-slide-parent" u="loading"&gt;
   [INFO] :   &lt;div class="loading-slide-child1"&gt;&lt;/div&gt;
   </pre></code>
   </li>
<li>Michael Bahl 2016-10-04

   I am using the latest SDK and it fails.
   
   Are you using Android 4.4.4 ?</li>
<li>Gary Mathews 2016-10-11

    [~mBahl] [~sdarda] It appears the issue isn't with Titanium, Android 4.1+ does support TLSv1.2. However, the ciphers used by <code><a href="https://elster.de" rel="nofollow" target="_blank">https://elster.de</a></code> are not supported in Android 4.1+.
    
    You can view the ciphers supported by Android 4.1+ here: <a href="https://developer.android.com/reference/javax/net/ssl/SSLSocket.html" rel="nofollow" target="_blank">https://developer.android.com/reference/javax/net/ssl/SSLSocket.html</a>
    
    *TEST CASE FOR TLSv1.2*
    <code><pre>
    var http = Titanium.Network.createHTTPClient(
        {
            validatesSecureCertificate: true,
            tlsVersion: Ti.Network.TLS_VERSION_1_2,
            onload: function (response) {
                var tls = /TLS\s\d\.\d/g.exec(this.responseText);
                if (tls) {
                    Ti.API.info('Android API: ' + Ti.Platform.Android.API_LEVEL);
                    Ti.API.info(tls[0]);
                }
            },
            onerror: function (response) {
                Ti.API.info(response.error);
            }
        }
    );
    http.open('GET', 'www.howsmyssl.com');
    http.send();
    </pre></code>
    <code><pre>
    Android API: 16
    TLS 1.2
    </pre></code></li>
<li>Michael Bahl 2016-10-13

    www.howsmyssl.com is *not* a valid test case.
    
    You have to test against an URL which only supports 1.2
    but not 1.1.</li>
<li>Gary Mathews 2016-10-13

    [~mBahl] I did, I tested against <code><a href="https://elster.de/" rel="nofollow" target="_blank">https://elster.de/</a></code>. My test case above is to prove TLSv1.2 is working on Android 4.1 and that the issue is due to the host using ciphers that are not compatible with < Android 5.0.
    
    The host I tested with <code><a href="https://elster.de/" rel="nofollow" target="_blank">https://elster.de/</a></code> *only* allows the following ciphers to be used:
    <code><pre>
    TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
    TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
    TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
    TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
    TLS_DHE_RSA_WITH_AES_128_GCM_SHA256
    TLS_DHE_RSA_WITH_AES_128_CBC_SHA256
    TLS_DHE_RSA_WITH_AES_256_GCM_SHA384
    TLS_DHE_RSA_WITH_AES_256_CBC_SHA256
    </pre></code>
    
    Compatibility for these ciphers was introduced in Android 5.0 (<a href="https://developer.android.com/reference/javax/net/ssl/SSLSocket.html)" rel="nofollow" target="_blank">https://developer.android.com/reference/javax/net/ssl/SSLSocket.html)</a></li>
<li>Lee Morris 2017-03-24

    Closing ticket as invalid with reference to the above comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-24004.json">JSON Source</a></p>