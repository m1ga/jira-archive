---
title: "[TIMOB-24019] Windows: Listitems do not maintain itemindex when filtered"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-10-18T17:27:12.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td> Ricardo Ramirez</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2016-10-11T22:45:40.000+0000</td></tr>
<tr><th>Updated</th><td>2016-10-21T22:36:09.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue Description </h4>

Listitems do not maintain item index on search filter

<h4>Steps to reproduce</h4>
<h4>Download and run the project </h4>
<h4>Search by number 0-11 (the list should filter down to just that number)</h4>
<h4>Click on the list item with the number (alert with itemindex should pop up)</h4>

Expected: the itemindex matches the item's position in the list
Actual: the itemindex is 0 because the list has been filtered down to one item.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24019_60493/listSearchCase (1).zip">listSearchCase (1).zip</td></td><td>2016-10-11T22:45:38.000+0000</td><td>10483730</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Patrick Clark 2016-10-11

   [~rramirez] is APPTS the correct project for this ticket?</li>
<li>Kota Iguchi 2016-10-13

   ok confirmed that this is a bug, started work on it. We needed to keep "original" data and indexes. What I also noticed is that <code>ListView.sections</code> does not keep the original data, which is a bug too. But one good thing here is that you can actually get the clicked data content by getting <code>ListView.sections\[e.sectionIndex\].items\[e.itemIndex\]</code> because of that. [~rramirez] Do you think you can workaround it by accessing <code>sections</code> and <code>section.items</code> directly like below?
   
   <code><pre>
   var win = Ti.UI.createWindow();
   var win = Ti.UI.createWindow({ backgroundColor: 'green', layout: 'vertical' });
   var searchText = Ti.UI.createTextField({ width: Ti.UI.FILL, height: '10%' });
   
   var listView = Ti.UI.createListView({ width: Ti.UI.FILL, height: '90%', caseInsensitiveSearch: true });
   var sections = [];
   
   var fruitSection = Ti.UI.createListSection({ headerTitle: 'Fruits' });
   var fruitDataSet = [
       { properties: { title: 'Apple', searchableText: 'Apple' } },
       { properties: { title: 'Banana', searchableText: 'Banana' } },
   ];
   fruitSection.setItems(fruitDataSet);
   sections.push(fruitSection);
   
   var vegSection = Ti.UI.createListSection({ headerTitle: 'Vegetables' });
   var vegDataSet = [
       { properties: { title: 'Carrots', searchableText: 'Carrots' } },
       { properties: { title: 'Potatoes', searchableText: 'Potatoes' } },
   ];
   vegSection.setItems(vegDataSet);
   sections.push(vegSection);
   
   listView.sections = sections;
   
   searchText.addEventListener('change', function () {
       listView.searchText = searchText.value;
   });
   
   listView.addEventListener('itemclick', function (evt) {
       var clickItemIndex = evt.itemIndex;
       var clickSectionIndex = evt.sectionIndex;
   
       alert(listView.sections[clickSectionIndex].items[clickItemIndex].properties.title);
   });
   
   win.add(searchText);
   win.add(listView);
   win.open();
   </pre></code>
   </li>
<li>Kota Iguchi 2016-10-18

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/881" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/881</a></li>
<li>Kota Iguchi 2016-10-21

   This should be on 6_0_X now. Check out <code>6.0.0.v20161021034759</code>.
   
   <code><pre>
       appc ti sdk install --branch 6_0_X 6.0.0.v20161021034759
   </pre></code></li>
<li>Ewan Harris 2016-10-21

   Verified using:
   
   OS: Microsoft Windows 10 Pro 10.0.14393
   Appc core: 6.0.0-63
   Appc NPM: 4.2.8-9
   Ti SDK: 6.0.0.v20161021034759
   Lumia 550 10.0
   
   e.itemIndex now corresponds to the values in the original listview and not the filtered listview. Provided test case now works as expected 
   
   Closing ticket</li>
</ol>


<p><a href="/TIMOB/TIMOB-24019.json">JSON Source</a></p>