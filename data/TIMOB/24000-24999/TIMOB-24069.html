---
title: "[TIMOB-24069] iOS: Unable to build for Apple Watch Series 2 WatchOS 3.1 sim"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-12-17T14:09:16.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.1</td></tr>
<tr><th>Components</th><td>iOS, Tooling</td></tr>
<tr><th>Labels</th><td>qe-6.0.0</td></tr>
<tr><th>Reporter</th><td>Eric Wieber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2016-10-24T22:55:04.000+0000</td></tr>
<tr><th>Updated</th><td>2016-12-19T18:43:59.000+0000</td></tr>
</table>

<h3>Description</h3>

When building using Xcode 8.1, for an iOS sim that has an Apple Watch Series 2 (WatchOS 3.1) sim, I get the below error:
<code><pre>
[ERROR] :  An error was encountered processing the command (domain=com.apple.CoreSimulator.SimError, code=161):
Unable to pair devices
At least one of the requested devices is already paired with the maximum number of supported devices and cannot accept another pairing.
</pre></code>

*Steps to reproduce issue*
1. Select Xcode 8.1 <code>sudo xcode-select -s &lt;path_to_xcode_8.1&gt;</code>
2. Create a new project and add an Apple Watch App to it
3. Add a team ID to your tiapp.xml
4. Build the project for an iOS sim with Apple Watch Series 2 (v3.1)

*Expected Results*
The project builds/installs/runs without issue

*Actual Results*
The above error is encountered

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24069_61102/log.txt">log.txt</td></td><td>2016-12-16T18:43:49.000+0000</td><td>33030</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Chris Barber 2016-12-08

   Titanium SDK master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8667" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8667</a></li>
<li>Chris Barber 2016-12-08

   To test, you need to run <code>xcrun simctl list</code>, then locate all of the device pairs. Do <code>xcrun simctl unpair &lt;pair udid&gt;</code> for each device pair. CoreSimulator will automatically re-pair specific iOS and watchOS simulators.
   
   On my computer, it always pairs a "iPhone 7 Plus" sim with a "Apple Watch Series 2 - 42mm" watch sim and a "iPhone 7" sim with a "Apple Watch Series 2 - 38mm" watch sim. To reproduce the problem, you need to pair the "iPhone 7 Plus" sim with the "Apple Watch Series 2 - 38mm" watch sim. You can also try to pair the "Apple Watch Series 2 - 42mm" watch sim with some other iPhone sim such as an iPhone 6s.
   
   What's happening is ioslib will now detect the pair failure try to unpair and re-pair or in worst case will create a new watch sim and use that to pair with the specified iPhone sim.</li>
<li>Chris Barber 2016-12-13

   Bug fixes:
   Titanium SDK master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8683" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8683</a>
   Titanium SDK 6_0_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8684" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8684</a></li>
<li>Samir Mohammed 2016-12-16

   Reopening as error stated in the description still occurs on Xcode 8.2 using the titanium version of the Apple watch series 2 (v3.1)
   [^log.txt]</li>
<li>Chris Barber 2016-12-16

   [~smohammed] Please build the app with the <code>DEBUG=ioslib:*</code> environment var set and attach the new log.</li>
<li>Chris Barber 2016-12-16

   ioslib v1.1.2 PR: <a href="https://github.com/appcelerator/ioslib/pull/53" rel="nofollow" target="_blank">https://github.com/appcelerator/ioslib/pull/53</a></li>
<li>Chris Barber 2016-12-16

   Ti SDK master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8696" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8696</a>
   Ti SDK 6_0_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8697" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8697</a>
   
   To test,
   
   <h4>Make sure you have Xcode 8.1 and Xcode 8.2 installed</h4>
   <h4>Make sure Xcode 8.2 is your selected Xcode: <code>xcode-select -p</code> to check, <code>sudo xcode-select -s /path/to/xcode8.2</code> to change</h4>
   <h4>Run <code><pre>xcrun simctl list | grep "Apple Watch Series 2 - 42mm \[Titanium\]"</pre></code> and check if you have a Titanium created watch sim</h4>
   <h4>If not, run <code>xcrun simctl create "Apple Watch Series 2 - 42mm \[Titanium\]" com.apple.CoreSimulator.SimDeviceType.Apple-Watch-Series-2-42mm com.apple.CoreSimulator.SimRuntime.watchOS-3-1</code></h4>
   <h4>Run <code>xcrun simctl list</code> and find the "Apple Watch Series 2 - 42mm \[Titanium\]" UDID</h4>
   <h4>Check if the Titanium Watch sim is already paired with an iOS sim</h4>
   <h4>If yes, unpair it: <code>xcrun simctl unpair &lt;pair udid&gt;</code></h4>
   <h4>Find the UDID of the iOS 10.1 iPhone SE sim</h4>
   <h4>Pair the iOS 10.1 iPhone SE sim with the Titanium Watch sim: <code>xcrun simctl pair &lt;watch udid&gt; &lt;phone udid&gt;</code></h4>
   <h4>Find the UDID of the iOS 10.2 iPhone 7 Plus sim</h4>
   <h4>Build your Titanium app (that has a watch app): <code>DEBUG=ioslib:* appc run -p ios -I 10.2 --log-level trace --device-id &lt;iphone 7 plus sim udid&gt; --watch-device-id &lt;ti watch sim udid&gt;</code></h4>
   
   By specifying <code>-I 10.2</code>, it will build with Xcode 8.2 and will unpair the iOS 10.1 sim from the Titanium watch sim, then pair it with the 10.2 sim. Everything should launch, install, and run perfectly.</li>
<li>Samir Mohammed 2016-12-19

   Verified fix with the test case mentioned above. Was able to build on Xcode 8.2 with the iOS 10.1 sim being unpaired with the titanium watch sim and then pairing it with the 10.2 sim. 
   *Environement*
   <code><pre>
   XCode 8.2 and 8.1
   Titanium SDK Version: 6.0.1.v20161217061750
   Appcelerator studio Version: 4.8.1.201612050850
   Operating system: Mac OS X Version 10.11.6
   Node.js version: 4.6.0
   NPM Version: 4.2.8
   CLI Version: 6.10.0
   </pre></code>
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-24069.json">JSON Source</a></p>