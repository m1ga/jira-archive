---
title: "[TIMOB-24086] iOS: Label doesn't fire link event correctly"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-11-07T14:59:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>clickevent, communication, fireevent, ios, label, notable</td></tr>
<tr><th>Reporter</th><td>Flavio De Stefano</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-10-31T10:58:31.000+0000</td></tr>
<tr><th>Updated</th><td>2016-11-17T17:12:37.000+0000</td></tr>
</table>

<h3>Description</h3>

Sometimes, don't know why, the Labels doesn't fire the link event.

I indagated in the code, and I found that the method to get the link is by finding the index from the clicked point in the Label.
The problem is that the index, is, sometimes, wrong.

I just re-implemented a more elegant version of the "find index", taken from here: <a href="https://github.com/AliSoftware/OHAttributedStringAdditions/blob/master/Source/UILabel%2BOHAdditions.m" rel="nofollow" target="_blank">https://github.com/AliSoftware/OHAttributedStringAdditions/blob/master/Source/UILabel%2BOHAdditions.m</a>

This is the demo of example that doesn't works and the one that works.

ZIP + MOV.
[tibugt.mov.zip](<a href="https://github.com/appcelerator/titanium_mobile/files/561573/tibugt.mov.zip)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/files/561573/tibugt.mov.zip)</a>

PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8568" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8568</a>

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2016-11-05

   Test-Case:
   <code><pre>
   var win = Titanium.UI.createWindow({
       backgroundColor: '#ddd',
   });
   
   win.open();
   
   var text =  'Bacon ipsum dolor Appcelerator Titanium rocks! sit amet fatback leberkas salami sausage tongue strip steak.';
   
   var attr = Titanium.UI.createAttributedString({
       text: text,
       attributes: [
           {
               type: Ti.UI.ATTRIBUTE_LINK,
               value: "https:/appcelerator.com",
               range: [text.indexOf('Titanium'), ('Titanium').length]
           },
           // Underlines text
           {
               type: Titanium.UI.ATTRIBUTE_UNDERLINES_STYLE,
               value: Ti.UI.ATTRIBUTE_UNDERLINE_STYLE_SINGLE,
               range: [text.indexOf('Titanium'), ('Titanium').length]
           }
       ]
   });
   
   var label = Titanium.UI.createLabel({
       left: 20,
       right: 20,
       height: Titanium.UI.SIZE,
       attributedString: attr
   });
   
   label.addEventListener("link", function(e) {
       alert(e);
   })
   
   win.add(label);
   </pre></code></li>
<li>Eric Wieber 2016-11-17

   Verified fixed, using:
   MacOS 10.12 (16A323)
   Studio 4.8.0.201611121409
   Ti SDK 6.1.0.v20161117072812
   Appc NPM 4.2.9-1
   Appc CLI 6.1.0-13
   Alloy 1.9.4
   Xcode 8.1 (8B62)
   
   Link events are correctly fired for labels. Tested by using the provided sample code as well as adding many different attributes to the attributed string for the label and ensuring all link events were fired.
   
   
   
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-24086.json">JSON Source</a></p>