---
title: "[TIMOB-24146] iOS - HTTPS module crashes on SDK 6.0.0+"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-11-14T23:31:03.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Fix Version/s</th><td>https 2.0.2</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>https, ios</td></tr>
<tr><th>Reporter</th><td>Rodolfo Perottoni</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2016-11-13T23:24:23.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:49:12.000+0000</td></tr>
</table>

<h3>Description</h3>

I'm not being able to use the latest HTTPS module in a project with SDK 6+.
When executing the following code:

<code><pre>
var securityManager = https.createX509CertificatePinningSecurityManager([
    {
         url: "<a href="https://whatever.com" rel="nofollow" target="_blank">https://whatever.com</a>",
        serverCertificate: "blablabla.der"
    },
    {
        url: "<a href="https://whatever2.com" rel="nofollow" target="_blank">https://whatever2.com</a>",
        serverCertificate: "blablabla2.der"
    }
]);
</pre></code>

I get the following error:

<code><pre>
[ERROR] Script Error -[AppceleratorHttpsModule jsobject]: unrecognized selector sent to instance 0x7fa0bec0bef0
</pre></code>

This is happening with wildcard certificates.
I can't provide my code because I'd be breaking a NDA.



<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2016-11-14

   Please attach or send at least the full error log to see which method breaks the process. Thx!
   </li>
<li>Hans Knöchel 2016-11-14

   Ok, so this issue does only happen when using the 2.0.1 module on 6.0.0, it does not happen on 5.5.1.GA. Do it must be something with the changed require-behavior in 6.0.0. Assigned to [~cwilliams] as he worked on the migration, but I'll take a look at well.
   
   *EDIT*: It crashes in [this line](<a href="https://github.com/appcelerator/titanium_mobile/blob/6_0_X/iphone/Classes/KrollBridge.m#L828)." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/6_0_X/iphone/Classes/KrollBridge.m#L828).</a>
   
   *EDIT2*: The difference to other modules like ti.map is that it tries to interprete the module as a JS module ([this code-block](<a href="https://github.com/appcelerator/titanium_mobile/blob/6_0_X/iphone/Classes/KrollBridge.m#L811-L813)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/6_0_X/iphone/Classes/KrollBridge.m#L811-L813)</a> should return already).</li>
<li>Rodolfo Perottoni 2016-11-14

   Yep. I'll be using 5.5.1.GA in the meanwhile.
   Thanks Hans.
   </li>
<li>Hans Knöchel 2016-11-14

   Ok, fixed it. The problem was that we hardcoded the module assets that are usually generated by the compiler. Probably the initial author commited his local file back in the days. I'm still not sure how it could work in Titanium 5.5.x, but the problem was that we check if the JS module based on having module assets (= JS code = NSData) or not. So it returned a false positive and crashed when the SDK tried to evaluate the JS context (<code>jsobject</code> call). 
   
   PR (appcelerator.https/master): <a href="https://github.com/appcelerator-modules/appcelerator.https/pull/42" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/appcelerator.https/pull/42</a>
   
   Test-Case:
   <code><pre>
   var https = require('appcelerator.https'); // This already crashed with the above error
   </pre></code>
   
   Also updated the Github release-page and will ping Patrick to update the version in our dashboard.</li>
<li>Eric Merriman  2018-08-06

   Cleaning up older fixed issues. If this issue should not have been closed as fixed, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-24146.json">JSON Source</a></p>