---
title: "[TIMOB-24157] Windows: CLI doesn't run ws-local app"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-11-24T12:48:23.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.1, windowslib 0.4.24</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>qe-6.0.1</td></tr>
<tr><th>Reporter</th><td>Kota Iguchi</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2016-11-18T01:18:15.000+0000</td></tr>
<tr><th>Updated</th><td>2016-11-30T19:20:48.000+0000</td></tr>
</table>

<h3>Description</h3>

Titanium CLI freezes when you run Windows Store desktop app. It builds the app normally, but then it freezes when it tries to install the app while showing <code>Press enter to continue…</code>.

<code><pre>
appc ti build -p windows -T ws-local
Installing the application
Press enter to continue…
</pre></code>


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24157_60735/certmgr.png">certmgr.png</td></td><td>2016-11-18T15:04:19.000+0000</td><td>59329</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24157_60724/TH4qc7w6A8h8209ODKl16g.png">TH4qc7w6A8h8209ODKl16g.png</td></td><td>2016-11-18T01:21:36.000+0000</td><td>67412</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Kota Iguchi 2016-11-18

   maybe related: [keypress events not working in windows cmd.exe & powershell · Issue #5384 · nodejs/node](<a href="https://github.com/nodejs/node/issues/5384)" rel="nofollow" target="_blank">https://github.com/nodejs/node/issues/5384)</a></li>
<li>Kota Iguchi 2016-11-18

   So it turns out that from at some version of Node.js <code>spawn</code> doesn't accept user input when you execute powershell script. 
   Here's a sample code:
   
   <code><pre>
   var spawn = require('child_process').spawn,
       p = spawn('powershell', ['-NoLogo', '-File', 'Test.ps1']);
   
   p.stdout.on('data', function (data) {
     console.log('stdout: ' + data);
   });
   
   p.stderr.on('data', function (data) {
     console.log('stderr: ' + data);
   });
   
   p.on('close', function (code) {
     console.log('child process exited with code ' + code);
   });
   </pre></code>
   
   And here's the powershell script that shows prompt:
   
   <code><pre>
   Read-Host -Prompt 'Input something'
   </pre></code>
   
   <code>node test.js</code> should show the <code>Input something:</code> prompt, but it doesn't accept user input.
   </li>
<li>Kota Iguchi 2016-11-18

   Tested using following versions of Node.js but none of them fixes the issue.
   
   * 4.4.7
   * 4.6.2
   * 5.5.0
   * 6.3.1
   * 6.9.1
   * 7.1.0
   </li>
<li>Ricardo Pereira 2016-11-18

   Have you tried to user 'run' instead of 'build'?</li>
<li>Kota Iguchi 2016-11-18

    I tried "appc run" too but it doesn’t work well for me. I believe it's because “Press enter to continue…” won’t be shown when you already installed developer certificate. To see if you already installed developer certificate, launch  “Manage user certificates” from control panel and navigate to “Trusted People > Certificates”. “CMake Test Cert” is the developer cert, and when you remove it, “Press enter to continue…” will be displayed for you again.
   
   Warning: I would not recommend deleting developer certificate unless you want to debug this issue because you'll be blocked as you can't launch your app due to this issue... :P
   
   !certmgr.png|thumbnail!</li>
<li>Kota Iguchi 2016-11-22

   <a href="https://github.com/appcelerator/windowslib/pull/60" rel="nofollow" target="_blank">https://github.com/appcelerator/windowslib/pull/60</a></li>
<li>Kota Iguchi 2016-11-22

   Note: This needs to be merged to <code>titanium_mobile</code> in order to close this ticket.</li>
<li>Kota Iguchi 2016-11-25

   [~sliang], To apply this fix manually, replace <code>C:\ProgramData\Titanium\mobilesdk\win32\YOUR_TI_SDK\node_modules\windowslib\lib\winstore.js</code> with [this latest one](<a href="https://github.com/appcelerator/windowslib/blob/master/lib/winstore.js)." rel="nofollow" target="_blank">https://github.com/appcelerator/windowslib/blob/master/lib/winstore.js).</a></li>
<li>Josh Longton 2016-11-30

   Verified as fixed the application now builds and runs successfully.
   
   Tested on:
   
   {noformat}
   Windows 10 Pro (1807)
   Ti SDK: 6.1.0.v20161130023500
   Appc NPM: 4.2.8
   App CLI: 6.0.0
   Windowslib 0.4.20.1
   Node v4.6,0
   {noformat}
   
   Closing Ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-24157.json">JSON Source</a></p>