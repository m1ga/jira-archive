---
title: "[TIMOB-24160] Hyperloop: iOS - Exclude CocoaPods products from being removed"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2016-11-21T19:51:32.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Hyperloop 2.0.1, Hyperloop 2.2.0</td></tr>
<tr><th>Components</th><td>Hyperloop</td></tr>
<tr><th>Labels</th><td>cocoapods, hyperloop, qe-hyperloop</td></tr>
<tr><th>Reporter</th><td>Jan Vennemann</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2016-11-21T12:25:47.000+0000</td></tr>
<tr><th>Updated</th><td>2017-01-06T17:52:09.000+0000</td></tr>
</table>

<h3>Description</h3>

In TIMOB-24057 the output directory for built CocoaPods products was changed. This introduced a regression with sequential builds. The <code>build.ios.removeFiles</code> hook deletes files from the iOS build directory that were not previously unmarked with <code>unmarkBuildDirFile</code>. The CocoaPods libraries need to be explicitly unmarked so they won't get deleted during this hook.

*Steps to reproduce the behavior*
1. Create a new Hyperloop enabled project or use the hyperloop-examples project
2. Make sure the build dir is clean by either deleting it or running <code>appc ti clean</code>
3. Build the project with <code>appc run -p ios</code>
4. Re-run the build again

*Expected behavior*
Able to successfully run subsequent builds

*Actual behavior*
The build fails due to missing libraries during linking
<code><pre>
[TRACE] ld: library not found for -lGLCalendarView
[TRACE] clang: error: linker command failed with exit code 1 (use -v to see invocation)
[ERROR] ** BUILD FAILED **
[ERROR] The following build commands failed:
[ERROR]         Ld build/Products/Debug-iphonesimulator/Hyperloop_Sample.app/Hyperloop_Sample normal x86_64
[ERROR] (1 failure)
</pre></code>

<h3>Comments</h3>

<ol>
<li>Jan Vennemann 2016-11-21

   PR (master): <a href="https://github.com/appcelerator/hyperloop.next/pull/102" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/pull/102</a>
   PR (2_0_X): <a href="https://github.com/appcelerator/hyperloop.next/pull/103" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/pull/103</a></li>
<li>Hans Kn√∂chel 2016-11-21

   PR's merged. Please update the Beta-releases on the Github page accordingly. </li>
<li>Josh Longton 2017-01-06

   Verified as fixed, Subsequential builds are now successful.
   Tested on:
   
   {noformat}
   macOS Sierra 10.12.2
   iPhone 6 
   iOS simulator (10.2, 10.0)
   Ti SDK: 6.1.0.v20170104172642
   Hyperloop: 2.0.1
   Appc CLI: 6.1.0
   Appc NPM: 4.2.8
   Node v4.6.0
   {noformat}
   
   *Closing Ticket.*</li>
</ol>


<p><a href="/TIMOB/TIMOB-24160.json">JSON Source</a></p>