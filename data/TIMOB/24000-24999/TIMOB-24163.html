---
title: "[TIMOB-24163] Hyperloop: iOS - Metabase generation fails for Swift-only classes from system frameworks"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Hyperloop 2.0.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Hyperloop, iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Jan Vennemann</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2016-11-22T21:06:50.000+0000</td></tr>
<tr><th>Updated</th><td>2017-11-10T17:08:46.000+0000</td></tr>
</table>

<h3>Description</h3>

Classes from system frameworks that are Swift exclusive can not be used in custom Swift code in Hyperloop. Example class: <a href="https://developer.apple.com/reference/foundation/url" rel="nofollow" target="_blank">https://developer.apple.com/reference/foundation/url</a>

*Steps to reproduce the behavior*
1. Create a new Hyperloop enabled project
2. Add the following sample code under <code>src/MySwift.swift</code>:
<code><pre>
import Foundation

public class MySwift {
  public func getUrl() -> URL {
    return URL(string: "<a href="http://appcelerator.com" rel="nofollow" target="_blank">http://appcelerator.com</a>")!;
  }
}
</pre></code>
3. Add a <code>appc.js</code> to the project root with the following content:
<code><pre>
module.exports = {
	type: 'app',
	group: 'titanium',
	hyperloop: {
		ios: {
			thirdparty: {
				'MyFramework': {
					source: ['src'],
					header: 'src',
					resource: 'src'
				}
			}
		}
	}
};
</pre></code>
4. Add <code>var MySwift = require('MyFramework/MySwift');</code> to <code>app/controller/index.js</code> to trigger Hyperloop's metabase generation
5. Build the project with <code>appc run -p ios</code>

*Actual behavior*
The build fails with the following error: Swift Generation failed with unknown or unsupported type (URL) found while compiling /Users/jvennemann/Development/appc/swift-url/src/MySwift.swift

*Expected behavior*
The build succeeds and the metabase for Swift-only classes will be generated

*Additional notes*
The reason why this fails is because the <code>import Foundation</code> statement in the Swift source will be mapped to the Objective-C equivalent <code>import <Foundation/Foundation.h></code>. Due to <code>URL</code> being Swift-only the metabase generator can not properly determine a type and fails. SourceKit may be a  possible solution and needs some more investigation.

See also: <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0086-drop-foundation-ns.md" rel="nofollow" target="_blank">https://github.com/apple/swift-evolution/blob/master/proposals/0086-drop-foundation-ns.md</a>

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-24163.json">JSON Source</a></p>