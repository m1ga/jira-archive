---
title: "[TIMOB-24190] Android: Adding getLocationOnScreen() to retrieve location after translation"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2017-03-06T13:31:26.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, community, notable, position</td></tr>
<tr><th>Reporter</th><td>Michael Gangolf</td></tr>
<tr><th>Assignee</th><td>Frankie Merzadyan</td></tr>
<tr><th>Created</th><td>2016-12-01T19:15:36.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-06T13:31:26.000+0000</td></tr>
</table>

<h3>Description</h3>

Animating a view using transform and a 2DMatrix will return the left coordinate and not the new position. The new method <code>getLocationOnScreen()</code> will return the actual x/y value.

Example

<code><pre>
var win = Ti.UI.createWindow({
    backgroundColor: "#fff"
});

var v = Ti.UI.createView({
    left: 0,
    top: 0,
    width: 100,
    height: 100,
    backgroundColor: "#f00"
});

var dpi = Ti.Platform.displayCaps.logicalDensityFactor;

win.addEventListener("open", function() {
    v.animate({
        left: 200,
        duration: 1000
    }, function() {
        console.log("Animate left:");
        console.log("left: " + v.left);
        console.log("rect.x: " + v.rect.x);
        console.log("locationOnScreen: " + v.getLocationOnScreen().x);
        console.log("------------------------");

        var matrix = Ti.UI.create2DMatrix()
        matrix = matrix.translate(-200*dpi, 0);

        v.animate({
            transform: matrix,
            duration: 1000
        }, function() {
            console.log("Animate transform:");
            console.log("left: " + v.left);
            console.log("rect.x: " + v.rect.x);
            console.log("locationOnScreen: " + v.getLocationOnScreen().x);
            console.log("------------------------");
        });
    });
})
win.add(v);
win.open();
</pre></code>

The output will be:

 Animate left:
 left: 200
 rect.x: 200
 locationOnScreen: 200
 ------------------------
 Animate transform:
 left: 200   *<---- wrong, last left value*
 rect.x: 200   *<---- wrong, last left value*
 locationOnScreen: 0 *<-----correct position after translate*
 ------------------------

It can be very handy if you drag objects using translateX/translateY and want to check the actual position

<h3>Comments</h3>

<ol>
<li>Hans Kn√∂chel 2016-12-02

   Danke Michael! [~fmerzadyan], can you do the CR & FT for this? Thx! *EDIT*: The community PR was revoked, so pulling it out of 6.1.0</li>
<li>Gary Mathews 2017-03-06

   </li>
</ol>


<p><a href="/TIMOB/TIMOB-24190.json">JSON Source</a></p>