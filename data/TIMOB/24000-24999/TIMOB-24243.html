---
title: "[TIMOB-24243] Android-Ti.UI.SIZE doesn't work properly with horizontal layouts"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-04-19T17:17:43.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.2</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>merge-6.0.2</td></tr>
<tr><th>Reporter</th><td>Neeraj Mishra</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2016-12-20T04:42:43.000+0000</td></tr>
<tr><th>Updated</th><td>2017-04-19T17:19:56.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem Description:</h4>
When the parent is in horizontal layout and the right child's width is Ti.UI.FILL(occupying the available space left) with its height Ti.UI.SIZE to fit its content,  some of the content is getting chopped off.

<h4>Steps to Reproduce:</h4>
Use the attached app (index.xml, index.js , index.tss) to reproduce the problem and see the behavior.

<h4>Current Behavior:</h4>
You can see that the layout in items 2, 4, 6, 8 and 10 is distorted because of which "ACKNOWLEDGE" portion is chopped off.

Note: If 2 more characters are added to the text in these rows, layout will be adjusted properly. This says that the layout is getting distorted for specific number of characters.

<h4>Expected Behavior:</h4>
The goal is:

-------------------------------
|Header1 | Label1 |
| | Label2 |
| | Label3 |
| | Label4 |
-------------------------------
|Header2 | Label1 |
| | Label2 |
| | Label3 |
| | Label4 |
-------------------------------



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24243_61156/fixed.jpg">fixed.jpg</td></td><td>2016-12-30T01:14:20.000+0000</td><td>279208</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24243_61142/horizontalWrapFalse.jpg">horizontalWrapFalse.jpg</td></td><td>2016-12-22T19:16:43.000+0000</td><td>281152</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24243_61141/horizontalWrapTrue.jpg">horizontalWrapTrue.jpg</td></td><td>2016-12-22T19:16:43.000+0000</td><td>283475</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24243_61116/index.js">index.js</td></td><td>2016-12-20T04:44:23.000+0000</td><td>914</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24243_61114/index.tss">index.tss</td></td><td>2016-12-20T04:44:46.000+0000</td><td>360</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24243_61115/index.xml">index.xml</td></td><td>2016-12-20T04:44:37.000+0000</td><td>613</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24243_61143/label.jpg">label.jpg</td></td><td>2016-12-22T19:17:29.000+0000</td><td>39743</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24243_61117/screenshot-1.png">screenshot-1.png</td></td><td>2016-12-20T04:49:58.000+0000</td><td>124606</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24243_61144/Screen Shot 2016-12-22 at 11.46.57 AM.png">Screen Shot 2016-12-22 at 11.46.57 AM.png</td></td><td>2016-12-22T19:56:38.000+0000</td><td>103542</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24243_61147/screenshot-2016-12-22-with-change.png">screenshot-2016-12-22-with-change.png</td></td><td>2016-12-22T22:13:09.000+0000</td><td>269756</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24243_61283/Screen Shot 2017-01-18 at 3.42.38 PM.png">Screen Shot 2017-01-18 at 3.42.38 PM.png</td></td><td>2017-01-18T23:51:15.000+0000</td><td>123756</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24243_61155/testcase.jpg">testcase.jpg</td></td><td>2016-12-30T01:14:19.000+0000</td><td>38830</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2016-12-22

   I taken a look at your <code>index.xml</code> and found a few issues with the layout. Here's the changes I have made:
   
   *index.xml*
   <code><pre>
   &lt;Alloy&gt;
   	&lt;Window class="container" layout="horizontal"&gt;
   		&lt;ListView id="list" defaultItemTemplate="template"&gt;
   			&lt;Templates&gt;
   				&lt;ItemTemplate name="template"&gt;
   					&lt;View layout="vertical"&gt;
   						&lt;View layout="horizontal" horizontalWrap="false" width="Ti.UI.FILL" height="Ti.UI.SIZE"&gt;
   							&lt;Label bindId="serialNum"/&gt;
   							&lt;Label bindId="detail"/&gt;
   						&lt;/View&gt;
   						&lt;View bindId="ackCheck" layout="horizontal" width="Ti.UI.FILL" height="Ti.UI.SIZE"&gt;
   							&lt;Label bindId="ackLbl" class="ackText"/&gt;
   							&lt;View class="checkbox"/&gt;
   						&lt;/View&gt;
   					&lt;/View&gt;
   				&lt;/ItemTemplate&gt;
   			&lt;/Templates&gt;
   			&lt;ListSection/&gt;
   		&lt;/ListView&gt;
   	&lt;/Window&gt;
   &lt;/Alloy&gt;
   </pre></code>
   
   NOTE: <code>horizontalWrap</code> will change the wrapping of the <code>detail</code> label. Here's screenshots of how it will look on a mobile device with text that is too long to fit on one line.
   
   *horizontalWrap="false"*
   !horizontalWrapFalse.jpg|thumbnail!
   
   *horizontalWrap="true"*
   !horizontalWrapTrue.jpg|thumbnail!
   
   Hope this solves your issue!</li>
<li>Gary Mathews 2016-12-22

   However, I have noticed an issue with wrapping of <code>Label</code>. It creates a space and doesn't wrap the text onto the next line.
   
   Adding more characters or padding <code>right: 10</code> fixes this.
   
   *TEST CASE*
   <code><pre>
   var w = Ti.UI.createWindow({backgroundColor: 'grey'}),
       v = Ti.UI.createView({
           top: 0,
           backgroundColor: 'red',
           width: Ti.UI.FILL,
           height: Ti.UI.SIZE,
           layout: 'horizontal'
       }),
       n = Ti.UI.createLabel({
           top: 0,
           text: '1.',
           backgroundColor: 'purple'
       }),
       t = Ti.UI.createLabel({
           text: 'Replenish the Uranium rod with dry ice every 6 hours.',
           width: Ti.UI.FILL,
           backgroundColor: 'orange'
       });
   
   v.add([n, t]);
   
   w.add(v);
   w.open();
   </pre></code>
   
   !label.jpg|thumbnail!</li>
<li>Gary Mathews 2016-12-22

   [~nmishra] That seems to work.
   
   <code><pre>
   &lt;View width="Ti.UI.SIZE" layout="vertical"&gt;
   &lt;Label bindId="detail" width="95%"/&gt;
   </pre></code>
   
   Also works</li>
<li>Gary Mathews 2016-12-30

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/8720" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8720</a>
   
   To resolve the layout issue with this fix amend the following:
   <code><pre>
   &lt;View layout="horizontal"&gt;
       ...
           &lt;Label bindId="detail" width="Ti.UI.FILL"/&gt;
   </pre></code>
   
   !fixed.jpg|thumbnail!</li>
<li>Dongwoo Gim 2017-01-13

   </li>
<li>Abir Mukherjee 2017-01-18

   Tested with this environment:
   NPM Version: 2.15.9
   Node Version: 4.5.0
   Mac OS: 10.12.1
   Appc CLI: 6.1.0
   Appc CLI NPM: 4.2.8
   Titanium SDK version: 6.1.0.v20170118081704
   Appcelerator Studio, build: 4.8.1.201612050850
   Xcode 8.2
   Android Device: 6.0.1
   
   I tested with the above environment, and the "ACKNOWLEDGE" portion is still getting truncated when question wraps around to two lines. This can also be seen with the Emulator (attached). 
   [~gmathews] Above you mention that some code needs to be amended. Can you please clarify how to amend it? Or better, if you can attach/paste the complete code.
   
   !Screen Shot 2017-01-18 at 3.42.38 PM.png|thumbnail!</li>
<li>Dongwoo Gim 2017-01-20

   Bugs fix and commit cleanup 
   <a href="https://github.com/appcelerator/titanium_mobile/pull/8766" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8766</a></li>
<li>Gary Mathews 2017-01-26

   6_0_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/8794" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8794</a></li>
<li>Andy Waldman 2017-01-27

   Friday 27th January 2017
   ENV:
   MacOS:10.12.1 
   XCODE: 8.2.1 GM (golden master) 
   APPC CLI Core: 6.1.0 
   APPC CLI NPM: 4.2.8 
   SDK: 6.0.2.v20170126173908 
   Studio build: 4.8.1.201612050850 
   NPM: 2.15.9 
   Node: 4.5.0 
   
   Step 1) copy this into app.js:
   
   <code><pre>
   var win = Ti.UI.createWindow({
     backgroundColor: '#fff',
     layout: "vertical"
   });
   
   // first row
   var view = Ti.UI.createView({
     height: Ti.UI.SIZE,
     width: Ti.UI.FILL,
     layout: "horizontal",
     backgroundColor: "gray"
   });
   
   var view1 = Ti.UI.createView({
     width: "25%",
     height: 100,
     backgroundColor: "red"
   });
   
   var view2 = Ti.UI.createView({
     width: "25%",
     height: 100,
     backgroundColor: "green"
   });
   
   var view3 = Ti.UI.createView({
     width: "25%",
     height: 100,
     backgroundColor: "blue"
   });
   
   var view4 = Ti.UI.createView({
     width: "25%",
     height: 100,
     backgroundColor: "yellow"
   });
   
   view.add(view1);
   view.add(view2);
   view.add(view3);
   view.add(view4);
   
   // second row
   var v = Ti.UI.createView({
     backgroundColor: 'red',
     width: Ti.UI.FILL,
     height: Ti.UI.SIZE,
     layout: 'horizontal'
   });
   
   var n = Ti.UI.createLabel({
     top: 0,
     text: '1.',
     backgroundColor: 'purple'
   });
   
   var t = Ti.UI.createLabel({
     text: 'Replenish the Uranium rod with dry ice every 6 hours Hello andy how are you.',
     width:  Ti.UI.FILL,
     backgroundColor: 'orange'
   });
   
   v.add(n);
   v.add(t);
   
   // third row
   var third = Ti.UI.createView({
     backgroundColor: 'grey',
     left: 20, right: 20,
     width: Ti.UI.FILL,
     height: Ti.UI.SIZE,
     layout: 'horizontal'
   });
   
   function createItem(_text) {
     var wrap = Ti.UI.createView({
       backgroundColor:"#ffffff",
       width:Ti.UI.SIZE, height:31,
       left:3, right:3, top:4, bottom: 4,
       borderColor: "#ff5757", borderRadius: 15.5, borderWidth: 1
     });
   
     var labelWrap = Ti.UI.createView({
       width:Ti.UI.SIZE, height: Ti.UI.SIZE,
       left: 14, right: 14
     });
   
     var label = Ti.UI.createLabel({
       height : 18,
       width: Ti.UI.SIZE,
       wordWrap:false,
       color:"#ff5757", font: { fontSize: 14, fontWeight: 'regular' },
       textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER, verticalAlign: Ti.UI.TEXT_VERTICAL_ALIGNMENT_CENTER,
       text: _text
     });
   
     labelWrap.add(label);
     wrap.add(labelWrap);
     return wrap;
   }
   
   third.add( createItem('#한자급수') );
   third.add( createItem('#자유학기제') );
   third.add( createItem('#기반학습') );
   third.add( createItem('#많은수업시간') );
   third.add( createItem('#레벨시스템') );
   third.add( createItem('#담임제도') );
   
   // add to win
   win.add(view);
   win.add(v);
   win.add(third);
   win.open();
   </pre></code>
   
   Step 2) run the application 
   Step 3) see that the writing wraps properly horizontally 
   
   I can verify this ticket is working and will close it 
   </li>
<li>Michael Gangolf 2017-04-10

    I have a very complex layout with multiple textfields and labels (all height: ti.ui.size) inside a view/scrollview (like a popup) with horizontal layout. 6.0.1.GA shows all elements but >=6.0.2.GA the elements are only visible up to a certain height. I will try to narrow it down and create a example. But it looks like this patch made it stop working on android.</li>
<li>Hans Knöchel 2017-04-11

    [~michael] Reopened the ticket, can you try to provide your specific test-case asap? I saw this behavior as well, but it's also a quite complex (Alloy-based) layout.</li>
<li>Michael Gangolf 2017-04-19

    At the moment I wasn't able to create a test case. I can provide some log output if that helps. Its a very complex layout and can't extract the layout that easily. I have some screenshots, a video of the hierarchy view and could add some logs in TiCompositeLayout.java. </li>
</ol>


<p><a href="/TIMOB/TIMOB-24243.json">JSON Source</a></p>