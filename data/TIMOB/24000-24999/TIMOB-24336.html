---
title: "[TIMOB-24336] Windows: App crashes when Ti.Network.Socket.TCP fails to connect"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-01-25T04:06:07.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Kota Iguchi</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-01-23T04:42:11.000+0000</td></tr>
<tr><th>Updated</th><td>2017-01-25T19:16:43.000+0000</td></tr>
</table>

<h3>Description</h3>

<code>Ti.Nework.Socket.TCP</code> doesn't invoke <code>error</code> callback on <code>connect()</code> when it fails to connect to the server. App crashes instead.

Steps to reproduce: Run following code when server isn't up.

<code><pre>
ï»¿var win = Ti.UI.createWindow();

var lbl = Ti.UI.createLabel({
    text: 'TCP Test'
});
win.add(lbl);

win.addEventListener('open', function () {
    var socket = Ti.Network.Socket.createTCP({
        host: '192.168.x.xx',
        port: 6262,
        timeout: 3000,
        connected: function (e) {
            console.log("[TEST] connected");
        },
        error: function (e) {
            socket = null;
            alert("[TEST] socket error");
            console.error(e);
        }
    });

    console.log("[TEST] open connection");
    socket.connect();
});

win.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2017-01-24

   master: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/933" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/933</a></li>
<li>Samir Mohammed 2017-01-25

   Verified fix, <code>Error</code> callback is now invoked when the app fails to connect to the server and the App no longer crashes. 
   This was tested with the test coded provided by [~gmathews] in <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/933." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/933.</a> 
   
   *Environment*
   <code><pre>
   Lumia 640 LTE (RM-1073) (OS Build 10.0.14393.693)
   Operating System
   Name                        = Microsoft Windows 10 Pro
   Version                     = 10.0.14393
   Architecture                = 64bit
   <h4>CPUs                      = 4</h4>
   Memory                      = 17034395648
    
   Node.js
   Node.js Version             = 4.6.0 
   npm Version                 = 2.11.3
    
   Titanium SDK
   SDK Version                 =  6.1.0.v20170125103400
   </pre></code>
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-24336.json">JSON Source</a></p>