---
title: "[TIMOB-24337] iOS: Using Ti.App.iOS.createSearchQuery without other UserActivity API's causes build to fail on device"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-01-25T11:49:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.0, Release 6.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.2</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td> Ricardo Ramirez</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2017-01-23T17:28:11.000+0000</td></tr>
<tr><th>Updated</th><td>2017-01-25T11:50:05.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue Description </h4>

Unable to build an app  in device when Ti.App.iOS.createSearchQuery is used, I get this error below:
<code><pre>
[ERROR] :  ** BUILD FAILED **
[ERROR] :  The following build commands failed:
[ERROR] :  	CompileC build/Intermediates/QueensMemoryProject.build/Debug-iphoneos/QueensMemoryProject.build/Objects-normal/armv7/TiAppiOSSearchQueryProxy.o Classes/TiAppiOSSearchQueryProxy.m normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
[ERROR] :  (1 failure)
</pre></code>

H5. Steps to reproduce
<h4>Create a new Alloy projects</h4>
<h4>Add Titanium 6.0.0 SDK on tiapp.xml.</h4>
<h4>Execute this function below: </h4>
<code><pre>
// The search-query
var searchQuery = Ti.App.iOS.createSearchQuery({
	queryString : 'title == "Titanium*"',
	attributes : ["title", "displayName", "keywords", "contentType"]
});
</pre></code>

<h4>Expected Result</h4>
The search query is created and ready to start. 

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2017-01-23

   This happens because the Ti.App.iOS.SearchQuery depends on the Ti.App.iOS.SearchableItem / Ti.App.iOS.SearchableItemAttributeSet API. If those are not used, the API does not make any sense. Anyway, we can wrap those calls, but the workaround is to use the API as documented in the docs.
   
   *EDIT*: There is a case where the <code>Ti.App.iOS.SearchableItem</code> proxies can only be returned. So I'll push a fix that will ease that use-case as well. It will be included in the 6.0.2.GA.</li>
<li>Hans Knöchel 2017-01-23

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/8777" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8777</a>
   PR (6_0_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/8778" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8778</a>
   
   Use the above and the test-case from TIMOB-23828. The reason we didn't catch this error was that we used the above described API's when testing the use-case. Although this one is very specific, it's fine to fix it.</li>
<li> Ricardo Ramirez 2017-01-24

   Thank you Hans ! </li>
<li>Eric Wieber 2017-01-24

   Verified in builds:
   6.0.2.v20170124145857
   6.1.0.v20170124145731</li>
</ol>


<p><a href="/TIMOB/TIMOB-24337.json">JSON Source</a></p>