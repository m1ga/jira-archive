---
title: "[TIMOB-24347] Android: Get image frames at times out of local video "
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-03-03T15:30:16.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.0, Release 6.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>qe-6.1.0</td></tr>
<tr><th>Reporter</th><td> Ricardo Ramirez</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-01-25T19:30:51.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-09T19:46:59.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Issue Description </h4>

Customer want to get some thumbnails from a video in android using the function Titanium.Media.VideoPlayer.requestThumbnailImagesAtTimes, but it seems not being working with local videos.

Using this function with a remote video, it works just fine, trying with a local video on android and call this function and it just doesn't work.

<h4>Steps to Reproduce </h4>
<h4>Create a new Alloy Project </h4>
<h4>Replace the index.js code for the next</h4>
<code><pre>
var videoPlayer = null,
    videoUri = null;

//ThumbSelector is a slider with values from 0 to selected video length
$.thumbSelector.addEventListener("change", function(e) {
    if (videoPlayer && e.value &gt; 0) {
        videoPlayer.requestThumbnailImagesAtTimes([e.value], Titanium.Media.VIDEO_TIME_OPTION_CLOSEST_SYNC, function(thumbCallback) {
            $.thumb.image = thumbCallback.image;
        });
    }
});

function durationavailable(e) {
    $.thumbSelector.max = Math.floor(e.duration / 1000);
    $.thumbSelector.show();
};

function openVideo() {
    var intent = Ti.Android.createIntent({
        action: Ti.Android.ACTION_PICK,
        type: "video/*"
    });
    intent.addCategory(Ti.Android.CATEGORY_DEFAULT);
    $.index.getActivity().startActivityForResult(intent, function(e) {
        if (e.error) {
            Ti.UI.createAlertDialog({
                title: "Error",
                message: "Loading error..."
            }).show();
        } else {
            if (e.resultCode === Titanium.Android.RESULT_OK) {
                var videoUri = e.intent.data;

                var closePlayerBtn = Ti.UI.createButton({
                    title: "Close",
                    height: 40,
                    width: 100,
                    top: 15
                });
                // videoUri = source.nativePath;
                videoPlayer = Titanium.Media.createVideoPlayer({
                    url: videoUri,

                    scalingMode: Titanium.Media.VIDEO_SCALING_ASPECT_FIT,
                    fullscreen: false,
                    autoplay: true
                });
                videoPlayer.addEventListener("durationavailable", durationavailable);

                videoPlayer.add(closePlayerBtn);

                closePlayerBtn.addEventListener("click", function() {
                    videoPlayer.hide();
                    videoPlayer.release();
                    videoPlayer = null;
                });
                $.vwPlayerWrapper.add(videoPlayer);
            } else {
                Ti.UI.createAlertDialog({
                    title: "Error",
                    message: "Loading error..."
                }).show();
            };
        };
    });
};

$.index.open();
</pre></code>
<h4>replace the index.xml code to the next</h4>
<code><pre>
&lt;Alloy&gt;
    &lt;Window class="container"&gt;
        &lt;ScrollView top="0" bottom="0" width="Ti.UI.FILL" layout="vertical"&gt;
            &lt;View height="Ti.UI.SIZE" top="0"&gt;
                &lt;Button onClick="openVideo"&gt;Open Video&lt;/Button&gt;
            &lt;/View&gt;
            &lt;View id="vwPlayerWrapper" height="300" width="Ti.UI.FILL" backgroundColor="#000"&gt;
                &lt;!-- HERE GOES THE VIDEO PLAYER --&gt;
            &lt;/View&gt;
            &lt;View height="100" top="10" layout="horizontal" &gt;
                &lt;Slider id="thumbSelector" width="70%" min="0" max="100" height="Ti.UI.SIZE" visible="false" top="5"&gt;&lt;/Slider&gt;
                &lt;ImageView id="thumb" height="40" width="40" borderColor="#000" top="5"&gt;&lt;/ImageView&gt;
            &lt;/View&gt;
            &lt;ImageView id="test" backgroundColor="#000" width="200" height="Ti.UI.SIZE"&gt;&lt;/ImageView&gt;
        &lt;/ScrollView&gt;
    &lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>
<h4>Run</h4>
<h4>Load local video</h4>
<h4>Try to get the image</h4>

Facts:
- This is not working with any local video on Android
- This work fine on iOS. 
- By 'local video' we mean videos picked from the video gallery of the device


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24347_61547/test.png">test.png</td></td><td>2017-02-10T15:59:16.000+0000</td><td>405771</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2017-02-10

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/8830" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8830</a></li>
<li> Ricardo Ramirez 2017-03-02

   Guys when the review is finished? </li>
<li>Josh Longton 2017-03-09

   
   
   {noformat}
   Mac OS Version : 10.12.3
   Appc CLI : 6.1.0
   Appc NPM : 4.2.9-1
   Node : v4.6.0
   Device: Nexus 5x(6.0.1) Pixel XL(7.1.1)
   Emulator: (6.0), (4.4.2)
   {noformat}
   
   Using above env passed FR. After merge, the changes are present in SDK <code>6.1.0.v20170307133328</code>.
   
   *Closing*</li>
</ol>


<p><a href="/TIMOB/TIMOB-24347.json">JSON Source</a></p>