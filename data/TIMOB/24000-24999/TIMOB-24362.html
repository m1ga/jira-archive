---
title: "[TIMOB-24362] iOS: Unable to package for Ad Hoc with Xcode 8.3 Beta"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-02-02T19:43:13.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.2</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>qe-6.0.1</td></tr>
<tr><th>Reporter</th><td>Eric Wieber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2017-02-01T00:23:12.000+0000</td></tr>
<tr><th>Updated</th><td>2017-05-07T16:41:19.000+0000</td></tr>
</table>

<h3>Description</h3>

When using Xcode 8.3 Beta 1 and trying to package for ad hoc, I get the following error:
<code><pre>
[ERROR] Failed to package application
[ERROR] /bin/sh: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/PackageApplication: No such file or directory
[ERROR]
</pre></code>

*Steps to reproduce issue*
1. Ensure you have installed, launched, and selected Xcode 8.3 Beta
2. Create a new project
3. Package the project for Ad Hoc: <code>appc run -p ios -T dist-adhoc</code>

*Expected Results*
The ipa is successfully created

*Actual Results*
The build fails with the above error

<h3>Comments</h3>

<ol>
<li>Chris Barber 2017-02-01

   Confirmed. I'll need to research alternatives to <code>PackageApplication</code>.</li>
<li>Hans Knöchel 2017-02-01

   We should use <code>xcodebuild archive</code>, similar to [this StackOverflow](<a href="http://stackoverflow.com/a/19856005/5537752)." rel="nofollow" target="_blank">http://stackoverflow.com/a/19856005/5537752).</a></li>
<li>Chris Barber 2017-02-01

   I updated the iOS build to use <code>xcodebuild archive</code> and then export the archive to an ipa, but I'm running into problems.
   
   First off, here's the commit with my changes: <a href="https://github.com/cb1kenobi/titanium_mobile/commit/4aa90b891d7d5a6b25a79d53205ff06a0336e4dc." rel="nofollow" target="_blank">https://github.com/cb1kenobi/titanium_mobile/commit/4aa90b891d7d5a6b25a79d53205ff06a0336e4dc.</a> You can pull my <code>timob-24362</code> branch to test.
   
   When I run an adhoc build, I get this:
   
   <code><pre>
   [TRACE] ** ARCHIVE SUCCEEDED **
   [INFO]  Packaging for Ad Hoc distribution
   [DEBUG] Running: /Applications/Xcode-8.3-beta.app/Contents/Developer/usr/bin/xcodebuild -exportArchive -archivePath "/Users/chris/appc/workspace/testapp/build/iphone/testapp.xcarchive" -exportPath "/Users/chris/appc/workspace/testapp/dist/testapp.ipa" -exportOptionsPlist "/Users/chris/appc/workspace/testapp/build/iphone/export_options.plist"
   [ERROR] Failed to export archive to ipa
   [ERROR] 2017-02-01 14:41:28.735 xcodebuild[37353:957450] [MT] IDEDistribution: -[IDEDistributionLogging _createLoggingBundleAtPath:]: Created bundle at path '/var/folders/wx/j1v32g355xj28rnt9yb_6hfm0000gn/T/testapp_2017-02-01_14-41-28.734.xcdistributionlogs'.
   [ERROR] 1.2.840.113635.100.1.61
   [ERROR] 2017-02-01 14:41:28.815 xcodebuild[37353:957450] [MT] IDEDistribution: -[IDEDistributionProvisioning _itemToSigningInfoMap:]: Can't find any applicable signing identities for items: (
   [ERROR]     "&lt;IDEDistributionItem: 0x7fa5318ccc00 'com.appcelerator.testapp3' '&lt;DVTFilePath:0x7fa531a24c60:'/Users/chris/appc/workspace/testapp/build/iphone/testapp.xcarchive/Products/Applications/testapp.app'&gt;'&gt;"
   [ERROR] )
   [ERROR] Errors={
   [ERROR]     "&lt;DVTSigningCertificate: 0x7fa52e7d9450; name='iPhone Distribution: Appcelerator, Inc. (&lt;TEAM_ID&gt;)', hash='DDF3902B870376432F073F04E7C4A1EE0B0BEBC5', serialNumber='77062BBF3933640C', certificateKind='1.2.840.113635.100.6.1.4, issueDate='2016-09-20 22:06:04 +0000''&gt;" =     {
   [ERROR]         "&lt;IDEDistributionItem: 0x7fa5318ccc00 'com.appcelerator.testapp3' '&lt;DVTFilePath:0x7fa531a24c60:'/Users/chris/appc/workspace/testapp/build/iphone/testapp.xcarchive/Products/Applications/testapp.app'&gt;'&gt;" = "Error Domain=IDECodesignResolverErrorDomain Code=10 \"No matching provisioning profiles found\" UserInfo={NSLocalizedRecoverySuggestion=No valid 'ad-hoc' profiles were found., NSLocalizedDescription=No matching provisioning profiles found, IDECodesignResolverError_ResolutionInputsKey=&lt;IDECodesignResolutionInputs: 0x7fa531a6dbe0; portalTeamID='&lt;TEAM_ID&gt;', usingTeamBasedSigning='NO', bundleIdentifier='com.appcelerator.testapp3', targetName='(null)', provisioningProfilePurpose='2', requiresProvisioningProfile='YES', provisioningProfilePlatform='iOS', certificateKind='1.2.840.113635.100.6.1.4', requiredEntitlements='{\n    \"application-identifier\" = \"&lt;TEAM_ID&gt;.com.appcelerator.testapp3\";\n    \"aps-environment\" = production;\n    \"get-task-allow\" = 0;\n    \"keychain-access-groups\" =     (\n        \"&lt;TEAM_ID&gt;.com.appcelerator.testapp3\"\n    );\n}', requiredCodesignableDevices='(null)', requiredFeatures='(null)'&gt;\n}";
   [ERROR]     };
   [ERROR] }
   [ERROR] 2017-02-01 14:41:28.815 xcodebuild[37353:957450] [MT] IDEDistribution: Step failed: &lt;IDEDistributionSigningAssetsStep: 0x7fa52e737420&gt;: Error Domain=IDEDistributionErrorDomain Code=3 "(null)" UserInfo={IDEDistributionErrorSigningIdentityToItemToUnderlyingErrorKey={
   [ERROR]     "&lt;DVTSigningCertificate: 0x7fa52e7d9450; name='iPhone Distribution: Appcelerator, Inc. (&lt;TEAM_ID&gt;)', hash='DDF3902B870376432F073F04E7C4A1EE0B0BEBC5', serialNumber='77062BBF3933640C', certificateKind='1.2.840.113635.100.6.1.4, issueDate='2016-09-20 22:06:04 +0000''&gt;" =     {
   [ERROR]         "&lt;IDEDistributionItem: 0x7fa5318ccc00 'com.appcelerator.testapp3' '&lt;DVTFilePath:0x7fa531a24c60:'/Users/chris/appc/workspace/testapp/build/iphone/testapp.xcarchive/Products/Applications/testapp.app'&gt;'&gt;" = "Error Domain=IDECodesignResolverErrorDomain Code=10 \"No matching provisioning profiles found\" UserInfo={NSLocalizedRecoverySuggestion=No valid 'ad-hoc' profiles were found., NSLocalizedDescription=No matching provisioning profiles found, IDECodesignResolverError_ResolutionInputsKey=&lt;IDECodesignResolutionInputs: 0x7fa531a6dbe0; portalTeamID='&lt;TEAM_ID&gt;', usingTeamBasedSigning='NO', bundleIdentifier='com.appcelerator.testapp3', targetName='(null)', provisioningProfilePurpose='2', requiresProvisioningProfile='YES', provisioningProfilePlatform='iOS', certificateKind='1.2.840.113635.100.6.1.4', requiredEntitlements='{\n    \"application-identifier\" = \"&lt;TEAM_ID&gt;.com.appcelerator.testapp3\";\n    \"aps-environment\" = production;\n    \"get-task-allow\" = 0;\n    \"keychain-access-groups\" =     (\n        \"&lt;TEAM_ID&gt;.com.appcelerator.testapp3\"\n    );\n}', requiredCodesignableDevices='(null)', requiredFeatures='(null)'&gt;\n}";
   [ERROR]     };
   [ERROR] }}
   [ERROR] error: exportArchive: The operation couldn’t be completed. (IDEDistributionErrorDomain error 3.)
   [ERROR]
   [ERROR] Error Domain=IDEDistributionErrorDomain Code=3 "(null)" UserInfo={IDEDistributionErrorSigningIdentityToItemToUnderlyingErrorKey={
   [ERROR]     "&lt;DVTSigningCertificate: 0x7fa52e7d9450; name='iPhone Distribution: Appcelerator, Inc. (&lt;TEAM_ID&gt;)', hash='DDF3902B870376432F073F04E7C4A1EE0B0BEBC5', serialNumber='77062BBF3933640C', certificateKind='1.2.840.113635.100.6.1.4, issueDate='2016-09-20 22:06:04 +0000''&gt;" =     {
   [ERROR]         "&lt;IDEDistributionItem: 0x7fa5318ccc00 'com.appcelerator.testapp3' '&lt;DVTFilePath:0x7fa531a24c60:'/Users/chris/appc/workspace/testapp/build/iphone/testapp.xcarchive/Products/Applications/testapp.app'&gt;'&gt;" = "Error Domain=IDECodesignResolverErrorDomain Code=10 \"No matching provisioning profiles found\" UserInfo={NSLocalizedRecoverySuggestion=No valid 'ad-hoc' profiles were found., NSLocalizedDescription=No matching provisioning profiles found, IDECodesignResolverError_ResolutionInputsKey=&lt;IDECodesignResolutionInputs: 0x7fa531a6dbe0; portalTeamID='&lt;TEAM_ID&gt;', usingTeamBasedSigning='NO', bundleIdentifier='com.appcelerator.testapp3', targetName='(null)', provisioningProfilePurpose='2', requiresProvisioningProfile='YES', provisioningProfilePlatform='iOS', certificateKind='1.2.840.113635.100.6.1.4', requiredEntitlements='{\n    \"application-identifier\" = \"&lt;TEAM_ID&gt;.com.appcelerator.testapp3\";\n    \"aps-environment\" = production;\n    \"get-task-allow\" = 0;\n    \"keychain-access-groups\" =     (\n        \"&lt;TEAM_ID&gt;.com.appcelerator.testapp3\"\n    );\n}', requiredCodesignableDevices='(null)', requiredFeatures='(null)'&gt;\n}";
   [ERROR]     };
   [ERROR] }}
   </pre></code>
   
   Obviously, it can't figure out the provisioning profile. There used to be a <code>-exportProvisioningProfile</code> option to <code>xcodebuild</code>, but it no longer exists. It appears to be replaced with <code>-exportOptionsPlist</code> which I have the iOS build generate and looks like:
   
   <code><pre>
   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "<a href="http://www.apple.com/DTDs/PropertyList-1.0.dtd" rel="nofollow" target="_blank">http://www.apple.com/DTDs/PropertyList-1.0.dtd</a>"&gt;
   &lt;plist version="1.0"&gt;
   &lt;dict&gt;
   	&lt;key&gt;method&lt;/key&gt;
   	&lt;string&gt;ad-hoc&lt;/string&gt;
   	&lt;key&gt;team&lt;/key&gt;
   	&lt;string&gt;&lt;TEAM_ID&gt;&lt;/string&gt;
   &lt;/dict&gt;
   &lt;/plist&gt;
   </pre></code>
   
   Next, I created a vanilla native iOS app and built it using:
   
   <code><pre>
   DEVELOPER_DIR=/Applications/Xcode-8.3-beta.app/Contents/Developer /Applications/Xcode-8.3-beta.app/Contents/Developer/usr/bin/xcodebuild archive -target testapp3 -configuration Release -scheme testapp3 -archivePath /Users/chris/appc/testapp3/testapp3.xcarchive
   </pre></code>
   
   The build succeeds. Then I run:
   
   <code><pre>
   /Applications/Xcode-8.3-beta.app/Contents/Developer/usr/bin/xcodebuild -exportArchive -archivePath /Users/chris/appc/testapp3/testapp3.xcarchive -exportPath /Users/chris/appc/testapp3/testapp.ipa -exportOptionsPlist /Users/chris/appc/testapp3/export_options.plist
   </pre></code>
   
   and it errors with:
   
   <code><pre>
   2017-02-01 17:11:55.878 xcodebuild[39056:1073982] [MT] IDEDistribution: -[IDEDistributionLogging _createLoggingBundleAtPath:]: Created bundle at path '/var/folders/wx/j1v32g355xj28rnt9yb_6hfm0000gn/T/testapp3_2017-02-01_17-11-55.876.xcdistributionlogs'.
   1.2.840.113635.100.1.61
   2017-02-01 17:11:56.005 xcodebuild[39056:1073982] [MT] IDEDistribution: -[IDEDistributionProvisioning _itemToSigningInfoMap:]: Can't find any applicable signing identities for items: (
       "&lt;IDEDistributionItem: 0x7fc6a109a7a0 'com.appcelerator.testapp3' '&lt;DVTFilePath:0x7fc69e6c0f20:'/Users/chris/appc/testapp3/testapp3.xcarchive/Products/Applications/testapp3.app'&gt;'&gt;"
   )
   Errors={
       "&lt;DVTSigningCertificate: 0x7fc6a13462c0; name='iPhone Distribution: Appcelerator, Inc. (&lt;TEAM_ID&gt;)', hash='DDF3902B870376432F073F04E7C4A1EE0B0BEBC5', serialNumber='77062BBF3933640C', certificateKind='1.2.840.113635.100.6.1.4, issueDate='2016-09-20 22:06:04 +0000''&gt;" =     {
           "&lt;IDEDistributionItem: 0x7fc6a109a7a0 'com.appcelerator.testapp3' '&lt;DVTFilePath:0x7fc69e6c0f20:'/Users/chris/appc/testapp3/testapp3.xcarchive/Products/Applications/testapp3.app'&gt;'&gt;" = "Error Domain=IDECodesignResolverErrorDomain Code=10 \"No matching provisioning profiles found\" UserInfo={NSLocalizedRecoverySuggestion=No valid 'ad-hoc' profiles were found., NSLocalizedDescription=No matching provisioning profiles found, IDECodesignResolverError_ResolutionInputsKey=&lt;IDECodesignResolutionInputs: 0x7fc6a112f9b0; portalTeamID='&lt;TEAM_ID&gt;', usingTeamBasedSigning='NO', bundleIdentifier='com.appcelerator.testapp3', targetName='(null)', provisioningProfilePurpose='2', requiresProvisioningProfile='YES', provisioningProfilePlatform='iOS', certificateKind='1.2.840.113635.100.6.1.4', requiredEntitlements='{\n    \"application-identifier\" = \"&lt;TEAM_ID&gt;.com.appcelerator.testapp3\";\n    \"keychain-access-groups\" =     (\n        \"&lt;TEAM_ID&gt;.com.appcelerator.testapp3\"\n    );\n}', requiredCodesignableDevices='(null)', requiredFeatures='(null)'&gt;\n}";
       };
   }
   2017-02-01 17:11:56.005 xcodebuild[39056:1073982] [MT] IDEDistribution: Step failed: &lt;IDEDistributionSigningAssetsStep: 0x7fc6a132c150&gt;: Error Domain=IDEDistributionErrorDomain Code=3 "(null)" UserInfo={IDEDistributionErrorSigningIdentityToItemToUnderlyingErrorKey={
       "&lt;DVTSigningCertificate: 0x7fc6a13462c0; name='iPhone Distribution: Appcelerator, Inc. (&lt;TEAM_ID&gt;)', hash='DDF3902B870376432F073F04E7C4A1EE0B0BEBC5', serialNumber='77062BBF3933640C', certificateKind='1.2.840.113635.100.6.1.4, issueDate='2016-09-20 22:06:04 +0000''&gt;" =     {
           "&lt;IDEDistributionItem: 0x7fc6a109a7a0 'com.appcelerator.testapp3' '&lt;DVTFilePath:0x7fc69e6c0f20:'/Users/chris/appc/testapp3/testapp3.xcarchive/Products/Applications/testapp3.app'&gt;'&gt;" = "Error Domain=IDECodesignResolverErrorDomain Code=10 \"No matching provisioning profiles found\" UserInfo={NSLocalizedRecoverySuggestion=No valid 'ad-hoc' profiles were found., NSLocalizedDescription=No matching provisioning profiles found, IDECodesignResolverError_ResolutionInputsKey=&lt;IDECodesignResolutionInputs: 0x7fc6a112f9b0; portalTeamID='&lt;TEAM_ID&gt;', usingTeamBasedSigning='NO', bundleIdentifier='com.appcelerator.testapp3', targetName='(null)', provisioningProfilePurpose='2', requiresProvisioningProfile='YES', provisioningProfilePlatform='iOS', certificateKind='1.2.840.113635.100.6.1.4', requiredEntitlements='{\n    \"application-identifier\" = \"&lt;TEAM_ID&gt;.com.appcelerator.testapp3\";\n    \"keychain-access-groups\" =     (\n        \"&lt;TEAM_ID&gt;.com.appcelerator.testapp3\"\n    );\n}', requiredCodesignableDevices='(null)', requiredFeatures='(null)'&gt;\n}";
       };
   }}
   error: exportArchive: The operation couldn’t be completed. (IDEDistributionErrorDomain error 3.)
   
   Error Domain=IDEDistributionErrorDomain Code=3 "(null)" UserInfo={IDEDistributionErrorSigningIdentityToItemToUnderlyingErrorKey={
       "&lt;DVTSigningCertificate: 0x7fc6a13462c0; name='iPhone Distribution: Appcelerator, Inc. (&lt;TEAM_ID&gt;)', hash='DDF3902B870376432F073F04E7C4A1EE0B0BEBC5', serialNumber='77062BBF3933640C', certificateKind='1.2.840.113635.100.6.1.4, issueDate='2016-09-20 22:06:04 +0000''&gt;" =     {
           "&lt;IDEDistributionItem: 0x7fc6a109a7a0 'com.appcelerator.testapp3' '&lt;DVTFilePath:0x7fc69e6c0f20:'/Users/chris/appc/testapp3/testapp3.xcarchive/Products/Applications/testapp3.app'&gt;'&gt;" = "Error Domain=IDECodesignResolverErrorDomain Code=10 \"No matching provisioning profiles found\" UserInfo={NSLocalizedRecoverySuggestion=No valid 'ad-hoc' profiles were found., NSLocalizedDescription=No matching provisioning profiles found, IDECodesignResolverError_ResolutionInputsKey=&lt;IDECodesignResolutionInputs: 0x7fc6a112f9b0; portalTeamID='&lt;TEAM_ID&gt;', usingTeamBasedSigning='NO', bundleIdentifier='com.appcelerator.testapp3', targetName='(null)', provisioningProfilePurpose='2', requiresProvisioningProfile='YES', provisioningProfilePlatform='iOS', certificateKind='1.2.840.113635.100.6.1.4', requiredEntitlements='{\n    \"application-identifier\" = \"&lt;TEAM_ID&gt;.com.appcelerator.testapp3\";\n    \"keychain-access-groups\" =     (\n        \"&lt;TEAM_ID&gt;.com.appcelerator.testapp3\"\n    );\n}', requiredCodesignableDevices='(null)', requiredFeatures='(null)'&gt;\n}";
       };
   }}
   
   ** EXPORT FAILED **
   </pre></code>
   
   I'm at a loss of what to do. I've followed the information on <a href="http://subathrathanabalan.com/2016/01/07/building-ipa-export-archive/" rel="nofollow" target="_blank">http://subathrathanabalan.com/2016/01/07/building-ipa-export-archive/</a> and <a href="http://www.matrixprojects.net/p/xcodebuild-export-options-plist/" rel="nofollow" target="_blank">http://www.matrixprojects.net/p/xcodebuild-export-options-plist/</a>, but I don't see anything that I'm not already doing.</li>
<li>Chris Barber 2017-02-02

   TiSDK master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8814" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8814</a>
   TiSDK 6_0_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8815" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8815</a>
   
   To test, clean your project, then run a <code>dist-adhoc</code> build. Ensure that Xcode 8.3 beta is selected by specifying <code>-I 10.3</code>.</li>
<li>Eric Wieber 2017-02-03

   Verified fixed, using:
   MacOS 10.12 (16A323)
   Studio 4.8.1.201701192045
   Ti SDK 6.0.2.v20170202114945
   Appc NPM 4.2.8
   Appc CLI 6.1.0
   Alloy 1.9.5
   Xcode 8.2 (8C38) & Xcode 8.3 (8W109m)
   
   Able to package for ad-hoc using Xcode 8.3 and Xcode 8.2, without issue.</li>
<li>Joshua A. Ceaser 2017-04-26

   I'm still seeing this issue with 8.3.2(8E2002)
   
   Appcelerator Command-Line Interface, version 6.2.0
   Copyright (c) 2014-2017, Appcelerator, Inc.  All Rights Reserved.
   
   Operating System
     Name                        = Mac OS X
     Version                     = 10.12.4
     Architecture                = 64bit
     # CPUs                      = 4
     Memory                      = 4.0GB
   
   Node.js
     Node.js Version             = 4.6.0
     npm Version                 = 2.15.9
   
   Titanium CLI
     CLI Version                 = 5.0.12
     node-appc Version           = 0.2.41</li>
<li>Eric Wieber 2017-04-26

   [~jceaser], which SDK do you have selected on your system and which SDK are you using to build your project with?
   You can check these by running <code>appc ti sdk list</code> and looking for the "selected" tag and by looking in your tiapp.xml to see which SDK is present there. </li>
<li>Joshua A. Ceaser 2017-04-26

   Here is the output. The app sdk is 5.5.1
   
   Appcelerator Command-Line Interface, version 6.2.0
   Copyright (c) 2014-2017, Appcelerator, Inc.  All Rights Reserved.
   
   SDK Install Locations:
      /Library/Application Support/Titanium
      /Users/Shared/Jenkins/Library/Application Support/Titanium [default]
    
   Installed SDKs:
      6.0.3.GA [selected]  6.0.3.v20170322115949  /Users/Shared/Jenkins/Library/Application Support/Titanium/mobilesdk/osx/6.0.3.GA
      5.5.1.GA             5.5.1.v20160927053850  /Users/Shared/Jenkins/Library/Application Support/Titanium/mobilesdk/osx/5.5.1.GA
   
   Thanks.</li>
<li>Eric Wieber 2017-04-26

   [~jceaser], changing the SDK version in your tiapp.xml to 6.0.2.GA or later should get you working again.
   Based on your output, you have 6.0.3.GA installed and selected at the system level, so just change the tiapp.xml SDK (app level) to 6.0.3.GA and you're good to go.
   The fix was in SDK 6.0.2.GA, so you will still see the issue when using SDKs prior to that (in your case, 5.5.1).</li>
<li>michael warnes 2017-05-07

    thanks for updating this guys, was hitting this problem with no clue what was going on until I saw this ticket. Thank you</li>
</ol>


<p><a href="/TIMOB/TIMOB-24362.json">JSON Source</a></p>