---
title: "[TIMOB-24380] iOS: Cannot package for iOS iTunes Store; PhaseScriptExecution error"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-04-18T02:00:42.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.4</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>qe-6.1.0</td></tr>
<tr><th>Reporter</th><td>Lee Morris</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2017-02-07T18:39:32.000+0000</td></tr>
<tr><th>Updated</th><td>2017-04-21T16:52:27.000+0000</td></tr>
</table>

<h3>Description</h3>

*Description*
When packaging an app to the iOS Tunes Store using the Ti SDK 6.1.0.v20170206114448, the following error appears in the console log;
[ERROR] :  ** ARCHIVE FAILED **

[ERROR] :  The following build commands failed:

[ERROR] :  PhaseScriptExecution Copy\ Resources\ to\ Archive build/Intermediates/andorra.build/Release-iphoneos/andorra.build/Script-000000000000000000000001.sh

[ERROR] :  (1 failure)

*Steps to reproduce*
1. Create new application
2. Package to iOS Tunes Store

*Expected result*
An alert appears which says that the app has packaged and no errors appear in the console log. However, a ticket has been opened on this matter because the app does NOT package

*Actual Result*
The app does not package and the error stated above appears in the console log.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24380_61549/dave 3.zip">dave 3.zip</td></td><td>2017-02-10T17:33:15.000+0000</td><td>10314564</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24380_61542/Trace for TIMOB 24380.rtf">Trace for TIMOB 24380.rtf</td></td><td>2017-02-09T23:56:47.000+0000</td><td>3354839</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Eric Wieber 2017-02-07

   I am able to reproduce this issue as well, with SDK 6.1.0.
   
   Packaging for App Store works with SDK 6.0.1.GA and 6.0.2
   Also checked Ad Hoc packaging and it is working as expected with all latest SDKs.</li>
<li>Chris Barber 2017-02-09

   Unable to reproduce using Titanium SDK master (6.1.0) and Xcode 8.2 (iOS 10.2) and Xcode 8.3 beta 2 (iOS 10.3).</li>
<li>Lee Morris 2017-02-09

   I have been able to reproduce this error. Environment used;
   MacOS 10.11.6 (15G31)
   Studio 4.8.1.201612050850
   Ti SDK 6.1.0.v20170206114448
   Appc NPM 4.2.8
   Appc CLI 6.2.0-12
   Ti CLI 5.0.11
   Alloy 1.9.6
   Arrow 1.10.2
   Xcode 8.2 (8C38)
   Node v4.6.0
   Java 1.7.0_80</li>
<li>Chris Barber 2017-02-09

   [~lmorris] Please attach the full TRACE log output from a CLEAN build of your app. Also, please zip up your test app and attach it so I can give it a try. You could have a edge case that I'm not seeing such as a space in a directory name or something. Thank you!</li>
<li>Lee Morris 2017-02-10

   [~cbarber] Trace level output log and zipped App have been uploaded to this ticket.</li>
<li>Abir Mukherjee 2017-04-14

   Steps to reproduce this issue:
   1. Create a new classic app in Studio.
         a. The SDK version should be 6.1.0.
         b. Uncheck "Enable Services"
   2. Package to iTunes Store
   3. The reported error will be seen:
   [ERROR] : PhaseScriptExecution Copy\ Resources\ to\ Archive build/Intermediates/andorra.build/Release-iphoneos/andorra.build/Script-000000000000000000000001.sh</li>
<li>Chris Barber 2017-04-14

   Ti SDK master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8962" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8962</a>
   Ti SDK 6_1_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8963" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8963</a>
   Ti SDK 6_0_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8964" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8964</a>
   
   The problem here is quite simple. If you have app thinning turned on, which is the default for new apps created in Studio using the default template, then the <code>ArchiveStaging</code> directory is empty. The "Copy Resources to Archive" script was using a wildcard which apparently will cause <code>cp</code> to complain if there's no files in the directory. Simply removing the <code>*</code> fixes it.
   
   To test, build a vanilla classic app for <code>dist-appstore</code> with both app thinning enabled and disabled. You can do this from either the CLI or Studio.
   
   Also note that this change also affects <code>dist-adhoc</code> builds too.</li>
<li>Abir Mukherjee 2017-04-14

   [~hansknoechel] Yes, the error occurs with the lastest builds. Specifically:
   
   It occurs with:
   6.1.0.v20170412080612
   6.2.0.v20170414065620
   
   It does not occur with:
   6.0.4.v20170410103627</li>
<li>Chris Barber 2017-04-14

   [~amukherjee] it should occur with 6.0.4 because the wildcard is present: <a href="https://github.com/appcelerator/titanium_mobile/blob/6_0_X/iphone/cli/commands/_build.js#L3074." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/6_0_X/iphone/cli/commands/_build.js#L3074.</a> Perhaps something with the app thinning changed in 6.1.x that leaves at least one file in the <code>ArchiveStaging</code> directory, but that's easily testable by deleting all images in the Resources directory.</li>
<li>Abir Mukherjee 2017-04-14

    [~cbarber] Deleting all the images from the Resources directory did not help. However, when I disabled app thinning, packaging to iTunes Store did succeed with no errors.</li>
<li>Abir Mukherjee 2017-04-18

    Passed FR with this environment:
    Node Version: 6.10.1
    NPM Version: 3.10.10
    Mac OS: 10.12.4
    Appc CLI NPM: 4.2.9
    Titanium SDK version: 6.0.3.GA
    Appcelerator Studio, build: 4.8.1.201612050850
    Xcode 8.2.1
    SDK Version 6.04, 6.1.0, 6.2.0
    
    Packaged app to iOS iTunes Store, and Adhoc; no errors were thrown. Packaging was successful as well. FR passed.
    
    EDIT: Closing ticket as fixes were found in the following SDK's:
    6.2.0.v20170421072718
    6.1.0.v20170421082637
    6.0.4.v20170420100617</li>
</ol>


<p><a href="/TIMOB/TIMOB-24380.json">JSON Source</a></p>