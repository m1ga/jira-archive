---
title: "[TIMOB-24404] Titanium projects specify \"global.global != global\" different"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-12-14T19:46:02.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.1.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Jay Phelps</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2017-02-15T00:05:26.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-14T18:16:26.000+0000</td></tr>
</table>

<h3>Description</h3>

One of the users of the [RxJS](<a href="https://github.com/ReactiveX/rxjs)" rel="nofollow" target="_blank">https://github.com/ReactiveX/rxjs)</a> library reported that Appcelarator doesn't define <code>global.global = global</code> like node.js does.

Since node.js doesn't have an official spec, I can't link to this behavior (it's also not documented best I can tell) but it was almost certainly borrowed from the fact that in browsers <code>window.window = window</code>--[that's spec'd here](<a href="https://html.spec.whatwg.org/multipage/browsers.html#the-window-object)." rel="nofollow" target="_blank">https://html.spec.whatwg.org/multipage/browsers.html#the-window-object).</a>

Since appcelerator says it has [full node.js support](<a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/guide/Node.js_Support) minus some documented caveats, we were wondering if it would be easy and acceptable to also have <code>global.global = global</code>?

Note that RxJS not the only library using <code>global.global == global</code> checks. There are [many](<a href="https://www.npmjs.com/package/window-or-global)." rel="nofollow" target="_blank">https://www.npmjs.com/package/window-or-global).</a> It's mostly done to confirm we're not accidentally using a variable that happens to be named <code>global</code> but isn't really what we're looking for.

Separately, we're going to discuss whether we could relax this check--but I think appcelerator would benefit from defining it regardless, cause others rely on it.

RxJS issue: <a href="https://github.com/ReactiveX/rxjs/issues/2366" rel="nofollow" target="_blank">https://github.com/ReactiveX/rxjs/issues/2366</a>

<h3>Comments</h3>

<ol>
<li>Jan Vennemann 2017-10-25

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/9552" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9552</a></li>
<li>Christopher Williams 2017-11-21

   Folded this into my PR here: <a href="https://github.com/appcelerator/titanium_mobile/pull/9512" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9512</a>
   
   This PR cherry-picks Jan's iOS implementation and adds the Android implementation and a test for it. I've contacted [~kiguchi] on Teams to see if he can do the same for Windows.</li>
<li>Christopher Williams 2017-12-14

   I merged the iOS half of this. There's a couple commits in my PR to do the same for Android. I'll see if I can cherry-pick and merge those without having to wait for the transpile PR.</li>
<li>Christopher Williams 2017-12-14

   cherry-picked to it's own PR for android: <a href="https://github.com/appcelerator/titanium_mobile/pull/9689" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9689</a></li>
<li>Christopher Williams 2017-12-14

   Merged android PR as well. Windows was already good on this one.</li>
<li>Lokesh Choudhary 2018-03-14

   Verified the fix in SDK 7.1.0.v20180308150545 & 7.2.0.v20180313125304.
   
   Closing.
   
   Studio Ver: 5.0.0.201712081732
   OS Ver: 10.13.2
   Xcode Ver: Xcode 9.2
   Appc NPM: 4.2.12
   Appc CLI: 7.0.2
   Daemon Ver: 1.0.1
   Ti CLI Ver: 5.0.14
   Alloy Ver: 1.11.0
   Node Ver: 8.9.1
   NPM Ver: 5.5.1
   Java Ver: 1.8.0_101
   Devices: ⇨ google Nexus 5 — Android 6.0.1
   ⇨ google Nexus 6P — Android 8.0.0</li>
</ol>


<p><a href="/TIMOB/TIMOB-24404.json">JSON Source</a></p>