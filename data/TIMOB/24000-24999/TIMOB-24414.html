---
title: "[TIMOB-24414] Android - Fails to cast Ti ListView to native ListView"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Hyperloop</td></tr>
<tr><th>Labels</th><td>android, engSchedule, hyperloop, listview, searchview</td></tr>
<tr><th>Reporter</th><td>James O'Leary</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2017-02-16T18:56:40.000+0000</td></tr>
<tr><th>Updated</th><td>2019-09-24T15:47:15.000+0000</td></tr>
</table>

<h3>Description</h3>

I'm trying to access native ListView methods. I need to cast a Ti ListView to a native Android ListView to access the native methods. 

I'm using the following link as a reference: [<a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/guide/Android_Hyperloop_Programming_Guide]

You can use the snippet of code:
<code><pre>
var tiListView = Ti.UI.createListView({});
var ListViewClass = require('android.widget.ListView');
var nativeListView = new ListViewClass(tiListView);
</pre></code>

Running the above code will give you the following error:

{noformat}
[ERROR] :  HyperloopProxy: (main) [5496,10667] Unable to find matching constructor for class: android.widget.ListView, args: [ti.modules.titanium.ui.widget.listview.TiListView$ListViewWrapper{d8c5545 V.E...CL. ......I. 0,0-0,0 #1e}]
{noformat}

You can also can get the Hyperloop-Examples project from appcelerator's github page and replace the button.js controller in the project with the button.js file I attached.
[<a href="https://github.com/appcelerator/hyperloop-examples" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop-examples</a>]

The reason why I want to access native methods on the ListView is to get the count of visible ListViewRows in the ListView when searching through the ListView with a SearchView. It seems that I can only get the count of all(visible and hidden) ListViewRows in the ListView. If you have a solution for this without using Hyperloop, I'd love to hear that as well.

Thank you in advanced.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24414_61621/button.js">button.js</td></td><td>2017-02-16T18:51:33.000+0000</td><td>5508</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2017-02-16

   Hello, Whats your SDK version and Hyperloop version that you are testing on? </li>
<li>James O'Leary 2017-02-16

   @sdarda
   
   SDK 6.0.1.GA
   Hyperloop 2.0.0</li>
<li>Sharif AbuDarda 2017-02-17

   I have teste dthe issue with SDK 6.0.1.GA with the sample code provided and the hyperloop example project. This is a valid bug. </li>
<li>Igor Kalashnikov 2017-05-08

   Hi, I've found same issue
   I think rootcause is that in Android ListView is wrapped by 'ListViewWrapper'
   [TiListView.java#L331](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/ui/src/java/ti/modules/titanium/ui/widget/listview/TiListView.java#L331)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/ui/src/java/ti/modules/titanium/ui/widget/listview/TiListView.java#L331)</a>
   
   <code><pre>
   //initializing listView and adapter
   ListViewWrapper wrapper = new ListViewWrapper(activity);
   wrapper.setFocusable(false);
   wrapper.setFocusableInTouchMode(false);
   listView = new ListViewScrollEvent(activity);
   listView.setLayoutParams(new ViewGroup.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
   wrapper.addView(listView); // &lt;==================== HERE
   adapter = new TiBaseAdapter(activity);
   </pre></code></li>
<li>Josh Lambert 2018-02-17

   I'm seeing this same bug on the latest TiSDK+Hyperloop. Any updates on patching it?
   
   <code><pre>
   [ERROR] HyperloopProxy: (main) [172,492] Unable to find matching constructor for class: android.widget.ListView, args: [ti.modules.titanium.ui.widget.listview.TiListView$ListViewWrapper{882ebb0 V.ED..CL. ......ID 0,0-0,0 #1}]
   </pre></code>
   </li>
<li>James O'Leary 2018-02-20

   @Josh, I think @Ihor is on track with finding a solution. I haven't tried this code or Hyperloop in a while but I think you must use the ListViewWrapper in order to cast the Ti ListView to a native Android ListView. Anyway I'm commenting to say that I've moved on. I've decided Hyperlooop is more of a headache than it's worth. My team is in the transition to write more Native apps while still keeping Appcelerator in our back pocket for select apps. Good luck!</li>
<li>Igor Kalashnikov 2018-11-11

   <code><pre>
       if (OS_ANDROID) {
           const ListView = require('android.widget.ListView');
           const View = require('android.view.View');
           const ViewGroup = require('android.view.ViewGroup');
   
           (function (tiList) {
               const listWrapper = new View(tiList);
               const nativeListView = ViewGroup.cast(listWrapper).getChildAt(1);
               const list = ListView.cast(nativeListView); // Got ListView here 
               list.smoothScrollToPositionFromTop((itemIndex + 1 /* 1st section*/), 0, 100);
           })($.eventsFeed);
       } 
   </pre></code>
   
   I'm getting to Android's native ListView using this code (hope it will helps)</li>
<li>Michael Gangolf 2018-11-11

   </li>
</ol>


<p><a href="/TIMOB/TIMOB-24414.json">JSON Source</a></p>