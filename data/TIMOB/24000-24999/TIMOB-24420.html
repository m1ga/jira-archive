---
title: "[TIMOB-24420] Hyperloop : Android: Unable to access getApplicationContext method in android.content.Context class"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2017-03-08T22:21:33.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.0, Release 6.0.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android, Hyperloop</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Neeraj Mishra</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2017-02-21T17:58:09.000+0000</td></tr>
<tr><th>Updated</th><td>2017-05-31T22:30:56.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem Description:</h4>

Unable to access method getApplicationContext in android.content.Context class using Hyperloop while trying to use thord party library Localytics for Android. (attached the third party library as well)

<h4>Steps to reproduce:</h4>
1. Create a classic app and enable Hyperloop.
2. Run the attached (app.js) code.
3. You will see the below error message:

<code><pre>
[ERROR] :  TiExceptionHandler: (main) [42,42] ----- Titanium Javascript Runtime Error -----
[ERROR] :  TiExceptionHandler: (main) [0,42] - In /app.js:5,56
[ERROR] :  TiExceptionHandler: (main) [0,42] - Message: Uncaught SyntaxError: Invalid or unexpected token
[ERROR] :  TiExceptionHandler: (main) [0,42] - Source: var appContext = (new context).getApplicationContext();​​​
[DEBUG] :  OpenGLRenderer: Use EGL_SWAP_BEHAVIOR_PRESERVED: true
[DEBUG] :  D/        : HostConnection::get() New Host Connection established 0xe98bfe40, tid 1965
[ERROR] :  V8Exception: Exception occurred at /app.js:5: Uncaught SyntaxError: Invalid or unexpected token
</pre></code>

<h4>Expected Result:</h4>
To be able to get the ApplicationContext in order to use it for localytics method parameter.




<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24420_61651/app.js">app.js</td></td><td>2017-02-21T17:58:43.000+0000</td><td>218</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24420_61650/localytics.jar">localytics.jar</td></td><td>2017-02-21T17:58:50.000+0000</td><td>530347</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Jan Vennemann 2017-02-28

   [~nmishra], the code they are using is wrong. <code>android.content.context</code> is an abstract class which cannot be instantiated. Also it is not possible to hook into the application's <code>onCreate</code> method from Hyperloop, which is the designated place to run <code>Localytics.autoIntegrate()</code> according to the documentation of the Localytics SDK.
   
   They can try this, but it won't log the first activity launched.
   <code><pre>
   var Activity = require('android.app.Activity');
   var currentActivity = new Activity(Ti.Android.currentActivity);
   var Localytics = require('com.localytics.android.Localytics');
   Localytics.autoIntegrate(currentActivity.getApplicationContext());
   Localytics.setLoggingEnabled(true);
   // Example how to use listeners
   var AnalyticsListenerAdapter = require('com.localytics.android.AnalyticsListenerAdapter');
   var listener = new AnalyticsListenerAdapter({
       localyticsSessionWillOpen: function(isFirst, isUpgrade, isResume) {
       // ... do something ...
       Ti.API.debug('Localytics session will open');
     }
   });
   Localytics.setAnalyticsListener(listener);
   </pre></code>
   
   For a full integration they could write a module, place the Localytics SDK there and include a method annotated with <code>@Kroll.onAppCreate</code> where the Localytics SDK can be properly initialized. After that they can then continue to use Hyperloop to make all other calls to the Localytics SDK.</li>
<li>Jan Vennemann 2017-02-28

   It's a key provided by Localytics to identify the app. Please see their docs: <a href="https://docs.localytics.com/dev/android.html#modify-androidmanifest-android" rel="nofollow" target="_blank">https://docs.localytics.com/dev/android.html#modify-androidmanifest-android</a> and our docs how to add that: <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/guide/Maintaining_a_Custom_AndroidManifest.xml
   
   </li>
<li>Neeraj Mishra 2017-02-28

   [~jvennemann]: Thanks much. It will help.</li>
<li>Neeraj Mishra 2017-03-08

   [~jvennemann]: This worked at customer end too and we can close this jira too. Thanks for your help.</li>
<li>Lee Morris 2017-05-31

   Closing ticket with reference to the above comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-24420.json">JSON Source</a></p>