---
title: "[TIMOB-24438] Android: Update bundled Android libraries to 23.4.0"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-05-11T23:11:23.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>merge-6.1.0</td></tr>
<tr><th>Reporter</th><td>Jan Vennemann</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2017-02-28T17:39:56.000+0000</td></tr>
<tr><th>Updated</th><td>2017-05-15T20:52:38.000+0000</td></tr>
</table>

<h3>Description</h3>

Our current SDK release targets API level 23. Some bundled libraries like the Android Support Library were not updated to also target API23.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24438_62168/Screen Shot 2017-05-04 at 2.41.28 PM.png">Screen Shot 2017-05-04 at 2.41.28 PM.png</td></td><td>2017-05-04T21:44:08.000+0000</td><td>144543</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Jan Vennemann 2017-03-03

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8858" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8858</a></li>
<li>Lokesh Choudhary 2017-05-02

   [~jvennemann], Can you please give us a test case to do an FR.</li>
<li>Jan Vennemann 2017-05-03

   [~lchoudhary], the easiest way to test this would be to use one of new features added in 23.4.0, like the [AppLaunchChecker](<a href="https://developer.android.com/reference/android/support/v4/app/AppLaunchChecker.html)." rel="nofollow" target="_blank">https://developer.android.com/reference/android/support/v4/app/AppLaunchChecker.html).</a>
   
   *Steps for FR*
   1. Create a new Titanium module
   2. Add the following import to your <code><ModuleName>Module.java</code>:
   <code>import android.support.v4.app.AppLaunchChecker;</code>
   3. Add this line inside the <code>onAppCreate</code> method:
   <code>Log.d(LCAT, String.format("hasStartedFromLauncher: %b", AppLaunchChecker.hasStartedFromLauncher(app)));</code>
   4. Build the module
   5. Copy the module into an app, add it to <code>tiapp.xml</code> and run it, check the log for the above debug message containing <code>hasStartedFromLauncher</code> right after it started.
   
   *Additional tests*
   Run the kitchen sink app to verify compatibility with existing apps.</li>
<li>Lokesh Choudhary 2017-05-03

   [~jvennemann], I get the below error when I try to build the module:
   <code><pre>
   [ERROR] :  Failed to compile Java source files:
   [ERROR] :  
   [ERROR] :  warning: [options] bootstrap class path not set in conjunction with -source 1.6
   [ERROR] :  Note: [KrollBindingGen] Running Kroll binding generator.
   [ERROR] :  Note: [KrollBindingGen] No binding data found, creating new data file: org.appcelerator.titanium.bindings/testmodule.json
   [ERROR] :  Note: [KrollBindingGen] Found binding for proxy Example
   [ERROR] :  Note: [KrollBindingGen] Found binding for module Testmodule
   [ERROR] :  /Users/lchoudhary/Desktop/workspaces/workspace_2016/testmodule/android/src/com/app/testmodule/TestmoduleModule.java:16: error: cannot find symbol
   [ERROR] :  import android.support.v4.app.AppLaunchChecker;
   [ERROR] :                               ^
   [ERROR] :    symbol:   class AppLaunchChecker
   [ERROR] :    location: package android.support.v4.app
   [ERROR] :  Note: [KrollBindingGen] Generating JSON: file:/Users/lchoudhary/Desktop/workspaces/workspace_2016/testmodule/android/build/generated/json/org/appcelerator/titanium/bindings/testmodule.json
   [ERROR] :  1 error
   </pre></code>
   
   its not able to resolve <code>android.support</code> in <code>import android.support.v4.app.AppLaunchChecker;</code></li>
<li>Jan Vennemann 2017-05-04

   [~lchoudhary], are you sure you were building with the correct SDK built from PR [#8858](<a href="https://github.com/appcelerator/titanium_mobile/pull/8858)." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8858).</a> Note that that PR is for master so it's 6.2.0.
   
   [~gmathews], backport for 6_1_X branch: <a href="https://github.com/appcelerator/titanium_mobile/pull/9016" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9016</a></li>
<li>Lokesh Choudhary 2017-05-04

   [~jvennemann], Yes I am building with the correct PR.
   !Screen Shot 2017-05-04 at 2.41.28 PM.png|thumbnail!
   
   I have attached my SDK folder structure. It shows I have the correct <code>jar</code> files from the PR.
   Also, When I add <code>import android.support.v4.app.AppLaunchChecker;</code> I get <code>The import android.support cannot be resolved</code>.
   
   Tried it for both <code>master</code> & <code>6.1.0</code> PR.</li>
<li>Jan Vennemann 2017-05-04

   [~lchoudhary], ok thanks for double checking. Can you please do a module build where you are encountering the error and send me the complete log with the log level set to trace? Maybe there is something different between our environments.
   
   As for the unresolved import warning, that is most likely a Studio issue. You need to import the support libraries via Project properties > Java Build Path > Libraries > Add external JARs, so Studio knows about them.
   
   </li>
<li>Lokesh Choudhary 2017-05-09

   FR passed with both master & backport PR.
   </li>
<li>Lokesh Choudhary 2017-05-09

   Verified the fix using the steps above.
   Closing.
   
   Studio Ver:     4.9.0.201704240654
   SDK Ver:        6.1.0.v20170509114242
   OS Ver:         10.12.3
   Xcode Ver:      Xcode 8.3.2
   Appc NPM:       4.2.9
   Appc CLI:       6.2.0
   Ti CLI Ver:     5.0.12
   Alloy Ver:      1.9.11
   Node Ver:       6.10.1
   Java Ver:       1.8.0_101
   Devices:        > google Nexus 6 --- Android 6.0.1</li>
<li>Jan Vennemann 2017-05-11

    Re-opening issue due to a crash when running on devices with Android <= 5.1.
    
    <code><pre>
    [ERROR] TiApplication: Caused by: java.lang.ClassNotFoundException: Didn't find class "android.support.graphics.drawable.VectorDrawableCompat" on path: DexPathList[[zip file "/data/app/com.appc.toolbartest-1/base.apk"],nativeLibraryDirectories=[/data/app/com.appc.toolbartest-1/lib/x86
    </pre></code>
    
    Google introduced support libraries for vector drawables on those devices with Support Libraries version 23.2.0. To resolve this the new support libraries <code>animated-vector-drawable</code> and <code>support-vector-drawable</code> need to be added as well.</li>
<li>Jan Vennemann 2017-05-11

    PR (6_1_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/9053" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9053</a>
    
    I just did a fix for 6_1_X because we have [#9027](<a href="https://github.com/appcelerator/titanium_mobile/pull/9027)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9027)</a> open on master which updates the libraries to 25.3.1 and that PR already includes the vector drawable libraries.</li>
<li>Lokesh Choudhary 2017-05-11

    FR passed for <a href="https://github.com/appcelerator/titanium_mobile/pull/9053" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9053</a></li>
<li>Lokesh Choudhary 2017-05-15

    Verified the fix.
    
    Followed the test steps above & tests passed.
    Closing.
    
    Studio Ver:     4.9.0.201705110256
    SDK Ver:        6.1.0.v20170514022959
    OS Ver:         10.12.3
    Xcode Ver:      Xcode 8.3.2
    Appc NPM:       4.2.9
    Appc CLI:       6.2.1
    Ti CLI Ver:     5.0.13
    Alloy Ver:      1.9.11
    Node Ver:       6.10.1
    Java Ver:       1.8.0_101
    Devices:        ⇨ google Nexus 6 --- Android 6.0.1
                    ⇨ google Nexus 6P --- Android 7.1.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-24438.json">JSON Source</a></p>