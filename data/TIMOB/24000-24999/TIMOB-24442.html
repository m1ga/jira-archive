---
title: "[TIMOB-24442] Android: Ti.UI.View.rect is not updated after animation"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-03-08T19:14:47.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.3</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Gary Mathews</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-03-01T14:35:43.000+0000</td></tr>
<tr><th>Updated</th><td>2017-11-23T13:20:05.000+0000</td></tr>
</table>

<h3>Description</h3>

- <code>Titanium.UI.View.rect</code> <code>x</code> and <code>y</code> properties are not updated after a transform animation has taken place.

*TEST CASE*
<code><pre>
var win = Ti.UI.createWindow({backgroundColor: 'gray'}),
    view = Ti.UI.createView({
        left: 0,
        top: 0,
        width: 100,
        height: 100,
        backgroundColor: 'red'
    });

win.addEventListener('open', function() {
    Ti.API.info('Initial');
    Ti.API.info('  rect.x: ' + view.rect.x);
    Ti.API.info('  rect.y: ' + view.rect.y);

    view.animate({
        top: 200,
        left: 200,
        duration: 1000
    }, function() {
        Ti.API.info('After Animation');
        Ti.API.info('  rect.x: ' + view.rect.x);
        Ti.API.info('  rect.y: ' + view.rect.y);
    });
})
win.add(view);
win.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2017-03-01

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/8855" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8855</a></li>
<li>Abir Mukherjee 2017-03-08

   [~gmathews] I believe this ticket also needs backport to 6.0.3.</li>
<li>Gary Mathews 2017-03-09

   6_0_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/8869" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8869</a></li>
<li>Samir Mohammed 2017-03-09

   Verified fix is present in 6.1.0.v20170309114832 and 6.0.3.v20170309114200. Testing can be found at <a href="https://github.com/appcelerator/titanium_mobile/pull/8855" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8855</a> </li>
<li>Michael Gangolf 2017-05-10

   Just a side-note: 
   I've updated an app from 6.0.2 to 6.0.4 that has a view inside a view:
   <code>window -&gt; view a -&gt; view b</code>
   and I am moving "view b" inside "view a". With this patch I have to subtract the <code>"view a" left</code> position from <code>"view b".rect.x</code> because it is now using <code>getLocationInWindow</code> and before it was returning the x position in my parent view.
   
   Perhaps that should be added to the documentation</li>
<li>Michael Gangolf 2017-05-10

   And iOS is referring to the parent view and not the window so the position is not the same!</li>
<li>Guile 2017-11-23

   This fix has raised other problems.</li>
<li>Guile 2017-11-23

   </li>
</ol>


<p><a href="/TIMOB/TIMOB-24442.json">JSON Source</a></p>