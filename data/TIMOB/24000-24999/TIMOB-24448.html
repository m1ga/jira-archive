---
title: "[TIMOB-24448] iOS: App not compiling due to Ti.Media.systemMusicPlayer"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-03-08T00:23:09.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.3</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>mikezal1</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2017-03-02T01:44:07.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-09T16:45:53.000+0000</td></tr>
</table>

<h3>Description</h3>

The app will not compile if " Titanium.Media.appMusicPlayer or the Titanium.Media.systemMusicPlayer" are used in my app. However, it works fine in the simulator or when the iPhone is connected using the LiveView. The app will compile if I code out the line with Titanium.Media.appMusicPlayer.
----


<code><pre>
try {
	var player = Titanium.Media.systemMusicPlayer;
	Ti.API.info("&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; player.playbackState", player.playbackState);

} catch (e) {
	Ti.API.info(e);
}

Ti.API.info("AudioSessionCategory: " + Ti.Media.getAudioSessionCategory());
</pre></code>



<code><pre>
[ERROR] :  ** BUILD FAILED **
[ERROR] :  The following build commands failed:
[ERROR] :  	CompileC build/Intermediates/Triathlon.build/Debug-iphoneos/Triathlon.build/Objects-normal/armv7/MediaModule.o Classes/MediaModule.m normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
[ERROR] :  (1 failure)
</pre></code>


<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2017-03-02

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8857" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8857</a>
   
   Details: We wrapped *all* music API's based on the methods that use them. That caused a lot of cross-dependencies between those API's, resulting in a) a messed-up core and b) some edge-cases that cause exactly those issues. This PR removes those macros again, since the AppStore rejections weren't affected to the Music API's but the Camera API's. So we open up the SDK again to make it easier to access certain API's.</li>
<li>Eric Wieber 2017-03-08

   FR Passed, using:
   MacOS 10.12 (16A323)
   Studio 4.8.1.201612050850
   Ti SDK 6.1.0
   Appc NPM 4.2.8
   Appc CLI 6.1.0
   Alloy 1.9.5
   Xcode 8.2.1 (8C1002)
   
   Tested using the provided code in TIMOB-24448 and TIMOB-24449 as well as running the QE Media Test Suite and submitting an app to the store that uses many ti.media methods/properties. All projects compiled and no errors were encountered</li>
<li>Eric Wieber 2017-03-08

   [~hansknoechel], [~vijaysingh]: I believe we need a back port 6_0_X and fixVersion update here.</li>
<li>Hans Knöchel 2017-03-08

   Backport merged: <a href="https://github.com/appcelerator/titanium_mobile/pull/8865" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8865</a></li>
<li>Eric Wieber 2017-03-09

   Verified in SDKs 6.0.3.v20170309031327 and 6.1.0.v20170307133328</li>
</ol>


<p><a href="/TIMOB/TIMOB-24448.json">JSON Source</a></p>