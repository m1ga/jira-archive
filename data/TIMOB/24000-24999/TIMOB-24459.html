---
title: "[TIMOB-24459] Android: Can’t remove unused permissions from AndroidManifest.xml using Ti SDK 6.x"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-04-14T10:02:31.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android-manifest, module_build, qe-6.1.0, regression</td></tr>
<tr><th>Reporter</th><td>Dirlei Dionísio</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-03-07T01:00:59.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-09T01:26:04.000+0000</td></tr>
</table>

<h3>Description</h3>

In an Alloy project I have a custom AndroidManifest.xml at app/platform/android without any tags <uses-permission>.

In app/controllers/index.js I have this only line:

<code><pre>
alert('hello world!');
</pre></code>

On tiapp.xml I have:

<code><pre>
<analytics>false</analytics>
</pre></code>

and

<code><pre>
    <android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>">
        <abi>armeabi-v7a</abi>
    </android>
</pre></code>

When I build with SDK 5.5.1 the resulted AndroidManifest.xml at build/android folder has no tags <uses-permission> as expected.

But when a build using any SDK >= 6.0, the resulted AndroidManifest.xml at build/android folder has this unused permissions:

<code><pre>
	<uses-permission android:name="android.permission.INTERNET"/>
	<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
	<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
	<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
	<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
	<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
	<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>
</pre></code>

When I build for distribution, the three “ACCESS_” are removed from the manifest.

It will be very appreciated if we can choose one of two options, maybe whith a special tag in tiapp.xml:

1) Having only permissions needed automatically added to final AndroidManifest.xml

or

2) Indicating that we want to replace completely the final AndroidManifest.xml

But none of them are possible using SDKs 6.x.

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2017-03-13

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/8881" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8881</a></li>
<li>Josh Longton 2017-03-29

   
   {noformat}
   Mac OS Version : 10.12.3
   Appc CLI : 6.1.0
   Appc NPM : 4.2.9-1
   Node : v4.6.0
   Device: Nexus 5x(6.0.1) Pixel XL(7.1.2)
   Emulator: (6.0), (4.4.2)
   {noformat}
   
   Using above env passed FR. After merge, the changes are present in SDK <code>6.1.0.v20170328172120</code>.
   
   *Closing*</li>
<li>Eric Merriman  2017-04-13

   [~gmathews] can you also back port this to 6.0.4 and set the FixVersion when complete?</li>
</ol>


<p><a href="/TIMOB/TIMOB-24459.json">JSON Source</a></p>