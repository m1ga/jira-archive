---
title: "[TIMOB-24465] Android: ImageView quality (gradient banding)"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-05-03T08:24:23.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.2.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>android, banding, imageview, quality</td></tr>
<tr><th>Reporter</th><td>carlo</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-03-07T17:56:50.000+0000</td></tr>
<tr><th>Updated</th><td>2017-09-01T08:41:08.000+0000</td></tr>
</table>

<h3>Description</h3>

ImagesViews in my app have poor quality, seems that a reduced palette is used.
This didn't happen when the same image is used as backgroundImage.

Open attached "banding_evidence.jpg" at full size on a contrasted screen.

<code><pre>
var win = Ti.UI.createWindow({
	backgroundImage:"/images/gradient.jpg"
});

win.add(Ti.UI.createImageView({
 	image:"/images/gradient.jpg"
}));

win.open();
</pre></code>


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24465_61801/banding_evidence.jpg">banding_evidence.jpg</td></td><td>2017-03-08T09:42:02.000+0000</td><td>1454285</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24465_61795/gradient.jpg">gradient.jpg</td></td><td>2017-03-07T17:32:02.000+0000</td><td>24876</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24465_62074/gradient.png">gradient.png</td></td><td>2017-04-20T14:59:45.000+0000</td><td>32589</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24465_61804/project.zip">project.zip</td></td><td>2017-03-08T12:41:20.000+0000</td><td>737778</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24465_61794/Screenshot_20170307-181448.png">Screenshot_20170307-181448.png</td></td><td>2017-03-07T17:32:14.000+0000</td><td>316331</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2017-03-07

   Hello, The issue is not valid. See the guide <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/guide/Images_and_ImageView_APIs 
   
   For background image By default, image will be scaled (stretched or squeezed) to fit the dimensions of the component. 
   
   For Image view, since you have not define the height or width of the image view the the imageView will be the exact pixel size of the image you define. 
   
   </li>
<li>carlo 2017-03-07

   It's not about size, it's about the quality.
   In the small image you can see circles of different colours instead of a gradient dithering as the background.
   With some kind of images this behaviour results in very ugly photos (attachment added).</li>
<li>carlo 2017-03-08

   Tried to disable hardware acceleration, no luck.
   
   Attachment updated.
   Please have a look.</li>
<li>carlo 2017-03-08

   My guess is that one of those defaults sets the wrong inPreferredConfig (Android use ARGB_8888 for the images):
   <a href="https://github.com/appcelerator/titanium_mobile/search?utf8=%E2%9C%93&q=inPreferredConfig" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/search?utf8=%E2%9C%93&q=inPreferredConfig</a>
   <a href="https://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inPreferredConfig" rel="nofollow" target="_blank">https://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inPreferredConfig</a>
   
   Maybe backgroundImage bring view his pixel format and this is why it works?
   
   Unfortunatly I can't spend more time on this, hope that this help to solve, because at the moment there's no way to put a gradient in a ImageView and display it correctly on Android and this is inexplicable for me...
   </li>
<li>Flavio De Stefano 2017-04-05

   We tried: <a href="https://github.com/caffeinalab/titanium_mobile/commit/c8020471229c00755dd73ce3a7b64852394c36f2" rel="nofollow" target="_blank">https://github.com/caffeinalab/titanium_mobile/commit/c8020471229c00755dd73ce3a7b64852394c36f2</a>
   and in our custom build, no more "funny" gradients :)
   
   </li>
<li>Gary Mathews 2017-04-20

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/8978" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8978</a></li>
<li>Carlos Henrique Zinato 2017-08-04

   Hi everyone,
   great that you found a solution for that! Is there a way to use this "opts.inPreferredConfig" without SDK 6.2.0.GA? I'm on 6.0.x now and would need a fix for a imageView.
   Thanks!</li>
<li>Ewan Harris 2017-08-28

   [~chmiiller] I think the best way would be to maybe try building the SDK locally with the required fix. You should be able to clone the repo, checkout the 6_0_X branch, then edit with the and build, the build produced will basically be identical to 6.0.4 with a version change plus your change.
   
   Check out [this](<a href="https://github.com/appcelerator/titanium_mobile#building-locally)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile#building-locally)</a> for some more info on building locally, and I guess either <code>#core-contributions</code> or <code>#helpme</code> on tislack for any help
   
   Changes verified in 6.2.0.v20170825165823 and 7.0.0.v20170825165854. Closing ticket.</li>
<li>Carlos Henrique Zinato 2017-09-01

   Great that this is fixed now! I'm using window.backgroundImage instead of a imageView and that has fixed my problem, but it is good that we can use ImageView now!
   Thank you so much</li>
</ol>


<p><a href="/TIMOB/TIMOB-24465.json">JSON Source</a></p>