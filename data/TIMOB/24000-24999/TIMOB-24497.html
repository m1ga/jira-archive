---
title: "[TIMOB-24497] Android: Resuming app from intent does not provide EXTRA"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-04-21T22:34:42.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.4</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>qe-6.0.3</td></tr>
<tr><th>Reporter</th><td>Gary Mathews</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-03-17T15:12:30.000+0000</td></tr>
<tr><th>Updated</th><td>2017-04-21T23:51:21.000+0000</td></tr>
</table>

<h3>Description</h3>

1. Press "CREATE SHORTCUT" 
2. Kill the app
3. Start the app via shortcut - observe correct behaviour (WITH EXTRA: TEST)
4. Move app into background
5. Resume the app using shortcut - observe invalid behaviour WITH EXTRA : null

<code><pre>
var win = Ti.UI.createWindow({
        layout: 'vertical'
    }),
    bar = Ti.UI.createView({
        layout: 'horizontal',
        width: Ti.UI.FILL,
        height: Ti.UI.SIZE
    })
    createShortcut = Ti.UI.createButton({
        title: 'CREATE SHORTCUT',
        left: 0
    }),
    clear = Ti.UI.createButton({
        title: 'CLEAR',
        right: 0
    }),
    scrollView = Ti.UI.createScrollView({
        layout: 'vertical',
        height: Ti.UI.FILL,
        backgroundColor: 'white'
    });
 
// create homescreen shortcut
createShortcut.addEventListener('click', function (e) {
    var currentIntent = Ti.Android.currentActivity.getIntent(),
        shortcutIntent = Ti.Android.createIntent({
            action: "com.android.launcher.action.INSTALL_SHORTCUT",
        });
 
    currentIntent.setAction(Ti.Android.ACTION_MAIN);
    currentIntent.putExtra("shortcut", "TEST");
    currentIntent.addCategory(Ti.Android.CATEGORY_HOME);
 
    shortcutIntent.putExtra(Ti.Android.EXTRA_SHORTCUT_NAME, "SHORTCUT");
    shortcutIntent.putExtra(Ti.Android.EXTRA_SHORTCUT_INTENT, currentIntent);
 
    Ti.Android.currentActivity.sendBroadcast(shortcutIntent);
});
 
// clear intent log
clear.addEventListener('click', function (e) {
    scrollView.removeAllChildren();
});
 
// intent listener
Ti.Android.currentActivity.addEventListener('newintent', function (e) {
    scrollView.add(Ti.UI.createLabel({
        top: 10,
        color: 'black',
        text: 'INTENT ' + JSON.stringify(e.intent) + ' WITH EXTRA: ' + e.intent.getStringExtra('shortcut')
    }));
});
 
// launch intent
scrollView.add(Ti.UI.createLabel({
    top: 10,
    color: 'black',
    text: 'LAUNCH INTENT ' + JSON.stringify(Ti.Android.currentActivity.getIntent()) + ' WITH EXTRA: ' + Ti.Android.currentActivity.getIntent().getStringExtra('shortcut')
}));
 
bar.add(createShortcut);
bar.add(clear);
win.add(bar);
win.add(scrollView);
win.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2017-03-20

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/8894" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8894</a></li>
<li>Gary Mathews 2017-03-21

   6_0_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/8901" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8901</a></li>
<li>Josh Longton 2017-03-22

   
   
   {noformat}
   Mac OS Version : 10.12.3
   Appc CLI : 6.1.0
   Appc NPM : 4.2.9-1
   Node : v4.6.0
   Device: Nexus 5x(6.0.1) Pixel XL(7.1.2)
   Emulator: (6.0), (4.4.2)
   {noformat}
   
   Using above env passed FR. After merge, the changes are present in SDK <code>6.0.3.v20170322110142</code>.
   
   *Closing*</li>
<li>Eric Merriman  2017-03-22

   Since this PR and the related ticket are inter-related, will reopen this and move to SDK 6.0.4 since we are unable to merge the other PR.
   </li>
<li>Gary Mathews 2017-03-28

   6_0_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/8910" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8910</a></li>
<li>Nikita Radaev 2017-04-21

   Tested with 6.0.4.v20170420100617 -> doesnt work 
   Tested with 6.1.0.v20170420092509 -> works fine 
   
   Has this been added into latest 6.0.4 build?</li>
<li>Lokesh Choudhary 2017-04-21

   FR Done.
   Merged 6.0.4 PR waiting for build from CI to close.</li>
<li>Lokesh Choudhary 2017-04-21

   Verified the fix in 6.0.4.v20170421153428.
   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-24497.json">JSON Source</a></p>