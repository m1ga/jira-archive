---
title: "[TIMOB-24517] Android: Add APK signature scheme v2 support"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-01-10T15:19:06.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, apk, sign</td></tr>
<tr><th>Reporter</th><td>Eric Merriman </td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2017-03-20T20:26:14.000+0000</td></tr>
<tr><th>Updated</th><td>2020-01-10T15:19:06.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
Titanium currently only supports signing with v1 signature scheme.

We should add v2 signing support, which can be verified on Android 7.0 and higher.
<a href="https://source.android.com/security/apksigning/v2" rel="nofollow" target="_blank">https://source.android.com/security/apksigning/v2</a>

Note that an APK can be signed by both v1 and v2 at the same time. We still need v1 support for Android OS versions older than 7.0.

*Note 1:*
This can be signed manually via Android SDK build tool "apksigner".
<a href="https://developer.android.com/studio/command-line/apksigner" rel="nofollow" target="_blank">https://developer.android.com/studio/command-line/apksigner</a>

*Note 2:*
The "gradle" build system automatically signs all built APKs with both v1 and v2. When we add "gradle" build support, then we get v2 signing for free.

*Testing:*
You can verify which versioning schemes an APK has been signed with at the command line by doing the following...
<h4>Open the Mac "Terminal".</h4>
<h4><code>CD</code> to directory: <code>~/Library/Android/sdk/build-tools/&lt;NewestVersion&gt;</code></h4>
<h4>Enter: <code>./apksigner verify -v &lt;PathToApk&gt;</code></h4>
<h4>The tool will output something like the below. Make sure v2 is flagged <code>true</code>.</h4>
<code><pre>
Verified using v1 scheme (JAR signing): true
Verified using v2 scheme (APK Signature Scheme v2): true
Verified using v3 scheme (APK Signature Scheme v3): false
</pre></code>


<h3>Comments</h3>

<ol>
<li>Hans Kn√∂chel 2017-03-20

   TIMOB-23803 ?</li>
<li>Gary Mathews 2017-06-04

   Using build-tools <code>24+</code> using <a href="https://developer.android.com/studio/command-line/apksigner.html" rel="nofollow" target="_blank">https://developer.android.com/studio/command-line/apksigner.html</a> will automatically use v2 signing when appropriate.
   
   <code><pre>
   apksigner sign --ks this.keystore --ks-pass pass:this.keystoreStorePassword app.apk
   </pre></code></li>
<li>Lokesh Choudhary 2019-12-19

   Master: <a href="https://github.com/appcelerator/titanium_mobile/pull/11339" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11339</a></li>
<li>Lokesh Choudhary 2019-12-20

   FR Passed.
   PR Merged.</li>
<li>Samir Mohammed 2020-01-10

   Closing ticket, New feaure verified in SDK Version <code>9.0.0.v20200109153329</code>.
   
   Test and other information can be found at: 
   <a href="https://github.com/appcelerator/titanium_mobile/pull/11339" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11339</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-24517.json">JSON Source</a></p>