---
title: "[TIMOB-24533] Windows: WebView does not set html property"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-05-30T02:14:30.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.2.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>webview, windows</td></tr>
<tr><th>Reporter</th><td>Derrick Huth</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2017-03-22T11:11:33.000+0000</td></tr>
<tr><th>Updated</th><td>2017-05-31T17:26:06.000+0000</td></tr>
</table>

<h3>Description</h3>

On the Windows platform the WebView ui component does not set the html property when loading web pages.  This makes interacting with web pages impossible.

Sample index.js (tested with SDK 6.0.2.GA):

$.index.open();
$.webview.setUrl("<a href="http://www.perfecthomecomputers.co.uk" rel="nofollow" target="_blank">http://www.perfecthomecomputers.co.uk</a>");
$.webview.addEventListener('load',function(e) {
	setTimeout( function(){
		Ti.API.info("> HTML: "+$.webview.getHtml());
		$.label.text = "HTML: " + $.webview.getHtml();
	}, 10000);
});

The timeout was only put there just in case the html attribute became populated after the load event fired.

Sample project can be downloaded from:  [<a href="https://github.com/DesHuth/titanium-test" rel="nofollow" target="_blank">https://github.com/DesHuth/titanium-test</a>]


<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2017-03-22

   Hello, Can you explain the issue here? I can load the webview fine with the sample project. Thanks.</li>
<li>Derrick Huth 2017-03-22

   Sorry I wasn't clear, yes the webview loads content fine.  What it does not do is set the html property of the webview.
   
   That is even with visible content in the webview webview.getHtml() returns "".  This means the app cannot get information from the page contents.  For the same reason webview.evalJS() will always return "".
   
   I need this to function for a single sign on process that returns keys in the webpage javascript functions that I would expect to access using evalJS.
   
   If you look at the above script there is a label below the webview that should display the webview html.  It displays no result.
   </li>
<li>Sharif AbuDarda 2017-03-24

   Hello, I can see the issue in Windows machine for Windows phone emulator. It does not log the webview html. The issue is not happening for Android. Moving to Engineering. </li>
<li>Eric Merriman  2017-05-15

   [~smohammed] Can you see if you can reproduce please?</li>
<li>Samir Mohammed 2017-05-15

   [~emerriman] I am able to reproduce on Windows using the test case from: <a href="https://github.com/DesHuth/titanium-test" rel="nofollow" target="_blank">https://github.com/DesHuth/titanium-test</a> Webview and Webview content is blank.</li>
<li>Kota Iguchi 2017-05-18

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1000" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1000</a></li>
<li>Kota Iguchi 2017-05-30

   CR & FR passed and then merged.</li>
<li>Samir Mohammed 2017-05-31

   Verified fix in SDK version: 6.2.0.v20170531081104. Was able to view the WebView property.
   
   Tested with the following test case: 
   
   <code><pre>
   var win = Ti.UI.createWindow(),
       webview = Ti.UI.createWebView(),
       textarea = Ti.UI.createTextArea({
           width: Ti.UI.FILL,
           height: Ti.UI.FILL
       });
   
   win.addEventListener('open', function () {
       webview.setUrl("<a href="http://www.appcelerator.com/" rel="nofollow" target="_blank">http://www.appcelerator.com/</a>");
   });
   
   webview.addEventListener('load', function (e) {
       setTimeout(function () {
           var html = webview.getHtml();
           textarea.value = html;
       }, 3000);
   });
   
   win.add(webview);
   win.add(textarea);
   win.open();
   </pre></code>
   
   *Test Environement*
   <code><pre>
   APPC Studio: 4.9.0.201705251638
   APPC CLI: 6.2.2
   Nokia Lumia 650 (windows 10.0)
   Operating System:
   Name = Microsoft Windows 10 Pro
   Version = 10.0.14393
   Architecture = 32bit
   CPUs = 4
   Memory = 17034395648
   Node.js:
   Node.js Version = 6.10.1
   </pre></code>
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-24533.json">JSON Source</a></p>