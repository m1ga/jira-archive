---
title: "[TIMOB-24537] Android: Ti.Gesture should provide device orientation like iOS"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-11-15T00:09:36.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.3</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, breaking-change, gesture, orientation, parity</td></tr>
<tr><th>Reporter</th><td>Victor Vazquez Montero</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2017-03-27T19:29:36.000+0000</td></tr>
<tr><th>Updated</th><td>2017-11-15T06:21:23.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description </h4>
TI Gesture does not fire orientationchange event on Android. It works fine on iOS

<h4>Steps to Replicate</h4>
1. Lauch app and tilt the device.

<h4>Expected results</h4>
Fire event as it does on iOS


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24537_62017/S5_video.mp4">S5_video.mp4</td></td><td>2017-04-12T20:59:52.000+0000</td><td>5237043</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24537_61914/TiGestureTest.zip">TiGestureTest.zip</td></td><td>2017-03-27T19:30:04.000+0000</td><td>10475776</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Lokesh Choudhary 2017-04-04

   [~emerriman], I could not reproduce the issue. For me <code>orientationchange</code> in <code>Ti.Gesture</code> is correctly fired for the different orientation types.
   In the example app, I see the window is set to have 2 orientation modes <code>Titanium.UI.PORTRAIT</code> & <code>Titanium.UI.UPSIDE_PORTRAIT</code>. 
   
   From the docs:
   <code><pre>
   Android and Mobile Web do not report the "reverse" orientations, UPSIDE_PORTRAIT and LANDSCAPE_RIGHT. These are reported as PORTRAIT and LANDSCAPE_LEFT, respectively.
   </pre></code>
   
   Ref: <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.Gesture-event-orientationchange</li>
<li>Victor Vazquez Montero 2017-04-06

   Hey [~lchoudhary], in the sample app Event is not fired first time the screen is rotated as it does on iOS. I have attached a video to shows what I am seeing. As well, I've removed the orientation modes from the tss file. 
   <a href="https://axwaysoftware-my.sharepoint.com/personal/vvazquezmontero_axway_com/_layouts/15/guestaccess.aspx?guestaccesstoken=FpIUW41Uy1lcTHHqLCzVjS3RFgDdAHRD82lbvxihe30%3d&docid=2_1a556a9c1988e4b90861e13375920cbcb&rev=1" rel="nofollow" target="_blank">https://axwaysoftware-my.sharepoint.com/personal/vvazquezmontero_axway_com/_layouts/15/guestaccess.aspx?guestaccesstoken=FpIUW41Uy1lcTHHqLCzVjS3RFgDdAHRD82lbvxihe30%3d&docid=2_1a556a9c1988e4b90861e13375920cbcb&rev=1</a>
   Best, 
   Victor Montero</li>
<li>Lokesh Choudhary 2017-04-06

   [~vvazquezmontero], Thanks, appreciate it. I will check it out.</li>
<li>Eric Merriman  2017-04-10

   [~lchoudhary] please check this out again, then assign to Josh if able to repro. If unable, let me know.
   </li>
<li>Lokesh Choudhary 2017-04-11

   [~emerriman], [~vvazquezmontero] I tried again with the 6.0.3.GA & with code below & event gets fired properly even for the first time the device is rotated.
   
   One thing I am seeing is on emulator it does not fire the event for the first time while on device it does everytime. 
   
   I tried it on 2 devices: 
   1. One plus one android 6.0.1
   2. Nexus 6 android 6.0.1
   
   I won't take what you see on an emulator as final result for orientation as most of orientation stuff is device sensor dependent if orientations are not explicitly specified, can you please try on a device if you still see the issue ?
   
   More ref: <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.UI.Window-property-orientationModes
   
   *index.js code:*
   <code><pre>
   function doClick(e) {
       alert($.label.text);
   }
   
   $.index.open();
   
   Ti.Gesture.addEventListener('orientationchange', function(){
   	alert('Orientation Changed');
   });
   </pre></code>
   
   *index.tss code:*
   <code><pre>
   ".container": {
   	backgroundColor:"white"
   }
   
   "Label": {
   	width: Ti.UI.SIZE,
   	height: Ti.UI.SIZE,
   	color: "#000"
   }
   
   "#label": {
   	font: {
   		fontSize: 12
   	}
   }
   </pre></code></li>
<li>Victor Vazquez Montero 2017-04-12

   Hey [~lchoudhary], 
   User says they can reproduce this bug on the following devices: 
   An s5 running lollipop
   An s6 running marshmallow
   An htc one m8 running marshmallow
   A moto x running lollipop
   Best, 
   Victor Montero</li>
<li>Lokesh Choudhary 2017-04-12

   [~vvazquezmontero], Ok we have a Samsung S5 will try to reproduce.</li>
<li>Lokesh Choudhary 2017-04-12

   [~vvazquezmontero], I tried on the S5 android 5.0 (lollipop) we had but still couldn't reproduce with the code above. I have attached this video for ref : [^S5_video.mp4]. 
   Unsure why the customer is seeing the issue.</li>
<li>Victor Vazquez Montero 2017-04-12

   I'l share with the customer and see what they give back. Thank you [~lchoudhary]</li>
<li>Victor Vazquez Montero 2017-04-13

    Hey [~lchoudhary] the user is still seeing the same behavior where the ti.gesture is not firing using the code you provided. 
    This is what they are responding
    "I'm looking for parity between the ios and android behavior. On ios orientationchange is fired when the device's orientation is changed, not the window (because the window is locked to portrait). I'm looking for the same behavior on android."</li>
<li>Victor Vazquez Montero 2017-04-25

    [~lchoudhary] Hey Lokesh any update on this ticket with the additional comment from the cusomter? </li>
<li>Lokesh Choudhary 2017-04-26

    [~vvazquezmontero], We are working on this issue.</li>
<li>Lokesh Choudhary 2017-04-26

    Failing review as PR was declined.</li>
<li>Joshua Quick 2017-04-26

    We currently document that Android provides the window orientation and iOS provides the device orientation here...
       <a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.Gesture-property-orientation
    
    So, at the moment, this is currently by design.  What's being asked here is for us to make a breaking change and have this "orientation" property return the device orientation on Android to match the iOS (and Windows Phone) behavior.  This is understandable since I'm not aware of any other API that provides device orientation, which means that an Android developer has no means of accessing device orientation.  (An iOS and Windows Phone developer can listen to a Window's "postlayout" event to determine if the window orientation has changed.)
    
    This is being discussed internally by engineering at the moment.  No ETA yet.</li>
<li>Victor Vazquez Montero 2017-05-08

    [~jquick] Hello Joshua, 
    Is there any viable work around which the customer can do to get the desired behavior? 
    </li>
<li>Joshua Quick 2017-05-08

    [~vvazquezmontero], unfortunately no.</li>
<li>Victor Vazquez Montero 2017-08-24

    [~jquick] Thanks for the update!</li>
<li>Joshua Quick 2017-11-04

    PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/9585" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9585</a></li>
<li>Lokesh Choudhary 2017-11-07

    FR Passed.
    Waiting for merge to get enabled to merge.</li>
<li>Abir Mukherjee 2017-11-15

    PR merged.</li>
<li>Abir Mukherjee 2017-11-15

    Changes are seen in SDK 7.0.0.v20171114202841.</li>
</ol>


<p><a href="/TIMOB/TIMOB-24537.json">JSON Source</a></p>