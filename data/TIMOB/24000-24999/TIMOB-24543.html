---
title: "[TIMOB-24543] iOS: Module assets not copied to packaged module, additional weird behaviors"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>cb-tooling</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2017-03-29T11:47:41.000+0000</td></tr>
<tr><th>Updated</th><td>2020-01-31T20:53:45.000+0000</td></tr>
</table>

<h3>Description</h3>

Here is the thing: The developer has a native iOS module, creates it with <code>appc ti new -t timodule</code> and finds the "assets" directory in the top directory. You create a "test.js" or place an image in there. When using the (deprecated) build.py, it will encrypt the files and copy the generated ones into /iphone/assets. When using the <code>appc ti build -p ios --build-only</code> command, the directory will not be copied to the zip and the generated "assets" directory is not copied to iphone/assets. If you place the assets in iphone/assets directly, this will still not copy it to the module zip.

See the attached module project and use the above comments to check the output.

Proposed fixes:
- Copy the encrypted assets into the zip file
- Do not place the generated "assets" diretory in /iphone (only happening with build.py, so that's fine since it's deprecated).

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2017-03-29

   Hey [~cbarber], more iOS module CLI stuff! I also noticed that the generated .zip is sometimes corrupt and throws a zip-error, but that's something different.</li>
<li>Chris Barber 2017-03-30

   I'm not very well versed on how .js files should be handled during the module build. CommonJS module should definitely be encrypted via <code>titanium_prep</code>, but for a native module has a .js file in the assets directory, I'm not certain the expected behavior.
   
   Regarding the corrupt zip files, that's interesting. We switched to archiver instead of adm-zip and we haven't had too many issues. Every Android build uses archiver to generate the apk. One thing that comes to mind is I have a pending PR (<a href="https://github.com/appcelerator/titanium_mobile/pull/8900)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8900)</a> just waiting for someone to click the merge button that will update archiver from v1.0.1 to v1.3.0. There may have been a known issue that has been resolved?</li>
</ol>


<p><a href="/TIMOB/TIMOB-24543.json">JSON Source</a></p>