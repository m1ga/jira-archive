---
title: "[TIMOB-24555] Android: Latest Android Tools breaks development with Titanium"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-04-10T23:26:25.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.3</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.0.4</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, build-tools</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2017-04-04T05:12:01.000+0000</td></tr>
<tr><th>Updated</th><td>2017-04-21T17:54:49.000+0000</td></tr>
</table>

<h3>Description</h3>

The latest Android tooling seems to break the usage with Titanium, because the <code><android-sdk>/tools/android</code> command is deprecated in favor of the one embedded in Android Studio. 

This issue was raised by the community, here are some more details:
{quote}
I have just updated my Android Studio installation with the latest android tools and now Ti doesn’t recognize the Android sdk anymore on ti info, the platforms list is always empty.

This is likely because /tools/android is deprecated and Google now uses the sdkmanager binary to handle sdk versions. It is really annoying having to maintain 2 separate android sdks on the same machine as it consumes an awful lot of space.
{quote}

Further references:
* <a href="https://code.google.com/p/android/issues/detail?id=235455" rel="nofollow" target="_blank">https://code.google.com/p/android/issues/detail?id=235455</a>
* <a href="http://tools.android.com/recent/androidsdktoolsrevision2530feb2017" rel="nofollow" target="_blank">http://tools.android.com/recent/androidsdktoolsrevision2530feb2017</a>
* <a href="https://developer.android.com/studio/tools/help/android.html" rel="nofollow" target="_blank">https://developer.android.com/studio/tools/help/android.html</a>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-24555_61964/sdkmanager.jpg">sdkmanager.jpg</td></td><td>2017-04-04T12:09:10.000+0000</td><td>72614</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2017-04-04

   Currently, <code>25.2.3</code> is the latest command-line tools available to download from <a href="https://developer.android.com/studio/index.html" rel="nofollow" target="_blank">https://developer.android.com/studio/index.html</a>
   
   However, <a href="https://developer.android.com/studio/releases/sdk-tools.html" rel="nofollow" target="_blank">https://developer.android.com/studio/releases/sdk-tools.html</a> shows 26.0.1 is available, which is only available as a preview.
   
   !sdkmanager.jpg|thumbnail!
   
   *SDK Manager*
   <a href="https://developer.android.com/studio/command-line/sdkmanager.html" rel="nofollow" target="_blank">https://developer.android.com/studio/command-line/sdkmanager.html</a></li>
<li>Hans Knöchel 2017-04-04

   They recommend the <code>sdkmanager</code> and <code>avdmanager</code> for 25.2.3 and later. Some usage details:
   
   *SDK-Manager options*:
   <code><pre>
     sdkmanager [--uninstall] [<common args>] [--package_file <file>] [<packages>...]
     sdkmanager --update [<common args>]
     sdkmanager --list [<common args>]
     sdkmanager --licenses [<common args>]
   
   In its first form, installs, or uninstalls, or updates packages.
       By default, the listed packages are installed or (if already installed)
       updated to the latest version.
   
       --uninstall: uninstalled listed packages.
   
       <package> is a sdk-style path (e.g. "build-tools;23.0.0" or
                "platforms;android-23").
       <package-file> is a text file where each line is a sdk-style path
                      of a package to install or uninstall.
       Multiple --package_file arguments may be specified in combination
       with explicit paths.
   
   In its second form (with --update), all installed packages are
       updated to the latest version.
   
   In its third form, all installed and available packages are printed
       out.
   
   In its fourth form (with --licenses), show and offer the option to
        accept licenses for all available packages that have not already been
        accepted.
   
   Common Arguments:
       --sdk_root=<sdkRootPath>: Use the specified SDK root instead of the SDK 
                                 containing this tool
   
       --channel=<channelId>: Include packages in channels up to <channelId>.
                              Common channels are:
                              0 (Stable), 1 (Beta), 2 (Dev), and 3 (Canary).
   
       --include_obsolete: With --list, show obsolete packages in the
                           package listing. With --update, update obsolete
                           packages as well as non-obsolete.
   
       --no_https: Force all connections to use http rather than https.
   
       --proxy=<http | socks>: Connect via a proxy of the given type.
   
       --proxy_host=<IP or DNS address>: IP or DNS address of the proxy to use.
   
       --proxy_port=<port #>: Proxy port to connect to.
   
   * If the env var REPO_OS_OVERRIDE is set to "windows",
     "macosx", or "linux", packages will be downloaded for that OS.
   </pre></code>
   
   *AVD-Manager options*:
   <code><pre>
   Usage:
         avdmanager [global options] [action] [action options]
         Global options:
     -s --silent     : Silent mode, shows errors only.
     -v --verbose    : Verbose mode, shows errors, warnings and all messages.
        --clear-cache: Clear the SDK Manager repository manifest cache.
     -h --help       : Help on a specific command.
   
   Valid actions are composed of a verb and an optional direct object:
   -   list              : Lists existing targets or virtual devices.
   -   list avd          : Lists existing Android Virtual Devices.
   -   list target       : Lists existing targets.
   -   list device       : Lists existing devices.
   - create avd          : Creates a new Android Virtual Device.
   -   move avd          : Moves or renames an Android Virtual Device.
   - delete avd          : Deletes an Android Virtual Device.
   </pre></code>
   
   *List of Android SDK's*: <code>/opt/android-sdk/tools/bin/sdkmanager --list</code>:
   <code><pre>
   Installed packages:
     Path                              | Version | Description                       | Location                         
     -------                           | ------- | -------                           | -------                          
     add-ons;addon-g..._apis-google-23 | 1.0.0   | Google APIs, Android 23           | add-ons/addon-g...apis-google-23/
     build-tools;21.1.2                | 21.1.2  | Android SDK Build-Tools 21.1.2    | build-tools/21.1.2/              
     build-tools;22.0.1                | 22.0.1  | Android SDK Build-Tools 22.0.1    | build-tools/22.0.1/              
     build-tools;23.0.3                | 23.0.3  | Android SDK Build-Tools 23.0.3    | build-tools/23.0.3/              
     build-tools;25.0.2                | 25.0.2  | Android SDK Build-Tools 25.0.2    | build-tools/25.0.2/              
     emulator                          | 26.0.0  | Android Emulator                  | emulator/   
   ...
   </pre></code>
   *List of Android devices*: <code>/opt/android-sdk/tools/bin/avdmanager list</code>:
   <code><pre>
   ----------
   id: 3 or "android-23"
        Name: Android API 23
        Type: Platform
        API level: 23
        Revision: 3
   ----------
   id: 4 or "android-25"
        Name: Android API 25
        Type: Platform
        API level: 25
        Revision: 3
   ...
   </pre></code>
   *Create new Android Emulator*: 
   <code><pre>
   /opt/android-sdk/tools/bin/avdmanager create avd --name TiEmulator --device 1 --package "system-images;android-23;default;x86_64"}}
   </pre></code>
   
   Reminds me of the iOS simulator list.
   More infos: <a href="https://developer.android.com/studio/command-line/sdkmanager.html" rel="nofollow" target="_blank">https://developer.android.com/studio/command-line/sdkmanager.html</a>
   </li>
<li>Gary Mathews 2017-04-04

   <code><android-sdk>/tools/android.*</code> is removed in <code>Revision 25.3.0 (March 2017)</code> but this revision and later is currently not available to download. I believe Google may have pulled these revisions due to this breaking change.
   
   UPDATE: Android Studio 2.3 ships with SDK Tools <code>25.3.1</code></li>
<li>Chris Barber 2017-04-05

   Titanium SDK master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8929" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8929</a>
   Titanium SDK 6_1_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8935" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8935</a>
   Titanium SDK 6_0_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/8931" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8931</a>
   
   To test,
   
   1. Run <code>ti info -t android</code> and <code>ti info -t android -o json</code> and verify output
   2. Run <code>ti build -p android</code>
   3. Run <code>ti build -p android --device-id foo</code>
   4. Run <code>ti build -p android --device-id <valid id from ti info></code>
   5. Run <code>ti build -p android --build-only</code>
   6. Run <code>ti build -p android -T device --build-only</code>
   7. Run <code>ti build -p android -T dist-playstore</code></li>
<li>Lokesh Choudhary 2017-04-10

   Verified & merged the fix in the above mentioned PR's, waiting for the build from CI to close the ticket.</li>
<li>Lokesh Choudhary 2017-04-21

   Verified the fix in 6.0.4.v20170420100617.
   Closing.
   
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-24555.json">JSON Source</a></p>