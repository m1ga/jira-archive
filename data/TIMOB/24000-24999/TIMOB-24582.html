---
title: "[TIMOB-24582] Android: Navigation parity for a cross-platform Ti.UI.NavigationWindow"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Done</td></tr>
<tr><th>Resolution Date</th><td>2019-01-11T02:17:29.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>NavigationWindow, android, parity</td></tr>
<tr><th>Reporter</th><td>Hans Kn√∂chel</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-04-16T18:32:58.000+0000</td></tr>
<tr><th>Updated</th><td>2019-01-11T02:17:32.000+0000</td></tr>
</table>

<h3>Description</h3>

On iOS, we have the <code>Ti.UI.iOS.NavigationWindow</code> to handle a stack of windows that can be opened and closed. Unfortunately, on Android and Windows, we have to do that manually and it required the (Alloy) developer to either write custom (per platform) logic or use plugins like [xp.ui](<a href="https://github.com/FokkeZB/UTiL/blob/master/app/lib/xp.ui.js)." rel="nofollow" target="_blank">https://github.com/FokkeZB/UTiL/blob/master/app/lib/xp.ui.js).</a>

Proposed API-changes:
* iOS: Deprecate <code>Ti.UI.iOS.NavigationWindow</code> in favor of <code>Ti.UI.NavigationWindow</code>
* Android / Windows: Support NavigationWindow, add the native [back button](<a href="https://developer.android.com/training/implementing-navigation/temporal.html)" rel="nofollow" target="_blank">https://developer.android.com/training/implementing-navigation/temporal.html)</a>
* Android / Windows: Expose the <code>openWindow</code>, <code>closeWindow</code> and <code>popToRootWindow</code> if possible
* Adjust Alloy to make the <code>&lt;NavigationWindow&gt;</code> tag available for all platforms

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24582_65535/nav-bar-example.png">nav-bar-example.png</td></td><td>2018-09-18T18:22:10.000+0000</td><td>17661</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24582_65534/Untitled-2.png">Untitled-2.png</td></td><td>2018-09-18T18:21:33.000+0000</td><td>17661</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Kota Iguchi 2017-11-20

   Cloned to TIMOB-25537 for Windows so we can track the ticket independently.</li>
<li>Kota Iguchi 2017-11-22

   Pushed mocha testbed for <code>Ti.UI.NavigationWindow</code> that is meant to be cross-platform. <a href="https://github.com/appcelerator/titanium-mobile-mocha-suite/pull/31." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-mobile-mocha-suite/pull/31.</a> Just implemented few basic navigation tests and we can start from there.
   </li>
<li>Jan Vennemann 2018-09-18

   Just my two cents on this topic since my mic seemed to be broken during our recent discussion.
   
   We should also think of this as a common abstraction of the Android ActionBar and the iOS NavigationWindow (and whatever it is called on Windows^^). So apart from handling the window stack and navigation, this should also include setting bar items. Ideally it would rely on <code>leftNavButtons</code> and <code>rightNavButtons</code> on iOS and <code>Ti.Android.Menu</code> on Android exposed as a unified API.
   
   I have something like this in mind for configuring the ActionBar/UINavigationBar:
   <code><pre>
   &lt;window&gt;
     &lt;!-- ActionBar/NavigationWindow setup --&gt;
     &lt;navigation-bar title="Example"&gt;
       &lt;nav-item @click="shareMyStuff" :ios:systemIcon="Ti.UI.iOS.SystemButton.ACTION" ios:position="left" :android:systemIcon="Ti.Android.R.drawable.ic_menu_share" android:position="actionBar"&gt;&lt;/nav-item&gt;
       &lt;nav-item @click="deleteMyStuff" :ios:systemIcon="Ti.UI.iOS.SystemButton.TRASH" ios:position="right" android:text="Delete" android:position="menu"&gt;&lt;/nav-item&gt;
     &lt;/navigation-bar&gt;
   
     &lt;!-- The rest of the content --&gt;
     &lt;label&gt;Content&lt;/label&gt;
   &lt;/window&gt;
   </pre></code>
   or programmatically configurable via a <code>navigationBar</code> property on <code>Ti.UI.Window</code> for example.
   
   This would result in:
   !nav-bar-example.png|thumbnail! 
   
   For the general navigation functionality in our apps we could build upon [titanium-navigator](<a href="https://github.com/appcelerator/titanium-navigator)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-navigator)</a>, which exposes a set of APIs for navigation through an app. It's currently tailored to handle components from Angular and Vue. Behind the scenes it inspects the root view of that component and handles navigation accordingly so it should be easy to make it work for Alloy or Classic apps too.
   
   Some pseudo code demonstrating the usage:
   <code><pre>
   import { NavigationManager } from 'titanium-navigator';
   
   const navigationManager = new NavigationManager();
   
   // assuming Ti.UI.createNavigationWindow is the factory for our new cross-platform stacked window management
   const rootWindow = Ti.UI.createNavigationWindow({});
   const child1 = Ti.UI.createWindow({});
   const child2 = Ti.UI.createWindow({});
   rootWindow.push(child1);
   
   // Open the root window. Will call open() on rootWindow
   navigationManager.open(rootWindow);
   // open subsequent windows. Will push the child view to the window stack and open it.
   navigationManager.open(child2);
   // programmatically navigate back, will close the last window in the stack.
   navigationManager.back();
   </pre></code>
   
   Internally <code>titanium-navigator</code> has a set of rules so it knows how to handle navigation. See [AbstractNavigator](<a href="https://github.com/appcelerator/titanium-navigator/blob/master/src/navigators/AbstractNavigator.ts)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-navigator/blob/master/src/navigators/AbstractNavigator.ts)</a> and [NavigationManager.open()](<a href="https://github.com/appcelerator/titanium-navigator/blob/master/src/NavigationManager.ts#L145)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-navigator/blob/master/src/NavigationManager.ts#L145)</a> to get a rough idea how it works.
   </li>
<li>Gary Mathews 2018-10-10

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/10375" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10375</a></li>
<li>Keerthi Mahalingam 2018-11-20

   FR passed. Waiting for CR To Merge.</li>
<li>Christopher Williams 2018-12-04

   Already FR'd before merge</li>
</ol>


<p><a href="/TIMOB/TIMOB-24582.json">JSON Source</a></p>