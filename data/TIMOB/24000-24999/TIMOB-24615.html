---
title: "[TIMOB-24615] Windows -HTTPClient - responseText is not cleared between two requests"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-05-03T01:49:04.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.4</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>httpclient, responseText, windows</td></tr>
<tr><th>Reporter</th><td>JSubramanian</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2017-04-19T09:48:27.000+0000</td></tr>
<tr><th>Updated</th><td>2017-05-05T19:05:58.000+0000</td></tr>
</table>

<h3>Description</h3>

I use the HTTPClient to do a service request.
Doing simultaneous http request , the responseText holds values of the first request.
As a result the values gets duplicated.
Below is the code.

<code><pre>
var count =0;
  var client = Ti.Network.createHTTPClient();
  client.onerror = function(e){
   
  };
  client.onload = function(e){
   count = count + 1;
   console.log("Server executed " + count + " time(s)");
   console.log(client.responseText);
   if(count != 2){
    client.open("GET", "<a href="https://httpbin.org/get" rel="nofollow" target="_blank">https://httpbin.org/get</a>");
    client.send();
   }
  };
  client.setTimeout(60000);
  client.validatesSecureCertificate = false;
  client.open("GET", "<a href="https://httpbin.org/get" rel="nofollow" target="_blank">https://httpbin.org/get</a>");
  client.send();
</pre></code>

The response of the above as below
----
[INFO] :   Server executed 1 time(s)
[INFO] :   {
[INFO] :     "args": {}, 
[INFO] :     "headers": {
[INFO] :       "Accept-Encoding": "gzip, deflate", 
[INFO] :       "Connection": "close", 
[INFO] :       "Host": "httpbin.org", 
[INFO] :       "User-Agent": "Appcelerator Titanium/6.0.3.GA (Microsoft Virtual/6.3.9651.0; windowsphone; English_United States.1252;)", 
[INFO] :       "X-Titanium-Id": "49c36bc6-4470-4689-9111-a81411c54643"
[INFO] :     }, 
[INFO] :     "origin": "182.75.8.94", 
[INFO] :     "url": "<a href="https://httpbin.org/get" rel="nofollow" target="_blank">https://httpbin.org/get</a>"
[INFO] :   }

[INFO] :   Server executed 2 time(s)
[INFO] :   {
[INFO] :     "args": {}, 
[INFO] :     "headers": {
[INFO] :       "Accept-Encoding": "gzip, deflate", 
[INFO] :       "Connection": "close", 
[INFO] :       "Host": "httpbin.org", 
[INFO] :       "User-Agent": "Appcelerator Titanium/6.0.3.GA (Microsoft Virtual/6.3.9651.0; windowsphone; English_United States.1252;)", 
[INFO] :       "X-Titanium-Id": "49c36bc6-4470-4689-9111-a81411c54643"
[INFO] :     }, 
[INFO] :     "origin": "182.75.8.94", 
[INFO] :     "url": "<a href="https://httpbin.org/get" rel="nofollow" target="_blank">https://httpbin.org/get</a>"
[INFO] :   }
[INFO] :   {
[INFO] :     "args": {}, 
[INFO] :     "headers": {
[INFO] :       "Accept-Encoding": "gzip, deflate", 
[INFO] :       "Connection": "close", 
[INFO] :       "Host": "httpbin.org", 
[INFO] :       "User-Agent": "Appcelerator Titanium/6.0.3.GA (Microsoft Virtual/6.3.9651.0; windowsphone; English_United States.1252;)", 
[INFO] :       "X-Titanium-Id": "49c36bc6-4470-4689-9111-a81411c54643"
[INFO] :     }, 
[INFO] :     "origin": "182.75.8.94", 
[INFO] :     "url": "<a href="https://httpbin.org/get" rel="nofollow" target="_blank">https://httpbin.org/get</a>"
[INFO] :   }


Please let me know if you need more information.


<h3>Comments</h3>

<ol>
<li>Samir Mohammed 2017-04-20

   [~sdarda] Hey, I Can verify that duplicated values are being returned. </li>
<li>Samir Mohammed 2017-04-21

   Hey [~sdarda], the environment details are listed below and I ran the test case above using <code>appc ti build -p windows -T ws-local</code> in the CLI. 
   *Environment*
   <code><pre>
   APPC CLI: 6.2.0
   SDK Version = 6.0.3.GA
   Operating System:
   Name = Microsoft Windows 10 Pro
   Version = 10.0.14393
   Architecture = 32bit
   CPUs = 4
   Memory = 17034395648
   Node.js:
   Node.js Version = 6.10.1
   </pre></code>
   
   </li>
<li>Kota Iguchi 2017-05-02

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/985" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/985</a></li>
<li>Samir Mohammed 2017-05-05

   Verified fix in 6.2.0.v20170505081953 and 6.1.0.v20170504175418
   Test and other information can be found at:
   6_1_X: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/986" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/986</a>
   Master:<a href="https://github.com/appcelerator/titanium_mobile_windows/pull/985" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/985</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-24615.json">JSON Source</a></p>