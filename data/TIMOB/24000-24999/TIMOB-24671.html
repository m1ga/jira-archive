---
title: "[TIMOB-24671] Windows: JS Callback in async should be done on UI thread"
---
<table>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Done</td></tr>
<tr><th>Resolution Date</th><td>2017-05-24T22:29:16.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Kota Iguchi</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2017-05-10T08:44:37.000+0000</td></tr>
<tr><th>Updated</th><td>2017-06-06T11:03:52.000+0000</td></tr>
</table>

<h3>Description</h3>

We should make sure all JavaScript callback that is in async operation is done on UI thread. Otherwise we saw crash when callback touches UI properties especially on Windows Store apps. We haven't usually see this problem on Windows Phone apps.

Typically we use <code>TitaniumWindows::Utility::RunOnUIThread</code>. It's going to look like below:

<code><pre>
concurrency::create_task(object__->DoSomethingAsync()).then([]()({
    TitaniumWindows::Utility::RunOnUIThread([](){
        js_callback();
    });
})
</pre></code>


<h3>Comments</h3>

<ol>
<li>Kota Iguchi 2017-05-24

   Done with <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1001" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1001</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-24671.json">JSON Source</a></p>