---
title: "[TIMOB-24691] Forked correct SDK command args doesn't resolve platform when using short flag"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-05-13T03:49:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Components</th><td>Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2017-05-12T21:25:48.000+0000</td></tr>
<tr><th>Updated</th><td>2017-05-15T18:04:27.000+0000</td></tr>
</table>

<h3>Description</h3>

When you run a build where the selected SDK differs from the one in the tiapp.xml, it forks the correct sdk build command. However, if you specify the platform as <code>\-p</code> instead of <code>\-\-platform</code>, it doesn't define <code>platform</code> and thus the platform is never injected into the forked command arguments.

Since Studio always passes in <code>\-\-platform</code>, this really only affects CLI users. When <code>\-\-platform</code> is not set in the forked command args, it will simply prompt for the platform (or error and exit if prompting is disabled).

<h3>Comments</h3>

<ol>
<li>Chris Barber 2017-05-12

   TiSDK master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/9059" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9059</a>
   TiSDK 6_1_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/9060" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9060</a></li>
<li>Chris Barber 2017-05-15

   To test:
   
   1. Set the selected SDK to the version containing this fix
   2. Set the <code>&lt;sdk-version&gt;</code> in the <code>tiapp.xml</code> to any other version
   3. Run <code>appc run \-p ios</code> or any other platform (the key is you MUST use the <code>\-p</code> switch instead of <code>\-\-platform</code>)
   
   Near the top of the output you should see "Forking correct SDK command:" followed by the command and its arguments about to be spawned. Notice that <code>\-p</code> will have been replaced with <code>\-\-platform &lt;platform name&gt;</code>.</li>
<li>Abir Mukherjee 2017-05-15

   Node Version: 6.10.1
   NPM Version: 3.10.10
   Mac OS: 10.12.4
   Appc CLI: 6.2.2-master.7
   Appc CLI NPM: 4.2.9
   Titanium SDK Select version: 6.0.4.GA
   Titanium SDK tiapp.xml version: 6.1.0.v20170514022959
   Xcode 8.3.2
   
   I followed the instructions in Chris Barber's comment, and validated the fix. I did see "Forking correct SDK command", and saw the --platform <platform name> printed in the output.</li>
</ol>


<p><a href="/TIMOB/TIMOB-24691.json">JSON Source</a></p>