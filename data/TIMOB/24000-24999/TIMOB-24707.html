---
title: "[TIMOB-24707] Android: Add video support to Ti.Media.openPhotoGallery()"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-05-10T18:44:05.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, gallery, video</td></tr>
<tr><th>Reporter</th><td>Fazlul Haque</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2017-05-18T15:51:38.000+0000</td></tr>
<tr><th>Updated</th><td>2018-07-02T22:00:54.000+0000</td></tr>
</table>

<h3>Description</h3>

Hello,

We have tried to open the videos from Android  gallery but its not opening.

*Testing Environment:*
Titanium SDK: 6.0.4.GA
Appcelerator Command-Line Interface, version 6.2.0
Android device: Samsung Galaxy Grand Prime(5.1.1)

*Test Code:*
<code><pre>

var storagePermission = "android.permission.READ_EXTERNAL_STORAGE";

var hasStoragePermission = Ti.Android.hasPermission(storagePermission);

var permissionsToRequest = [];

var win = Ti.UI.createWindow({

    title : 'mywin',

    backgroundColor : '#fff',

    width : Ti.UI.FILL,

    height : Ti.UI.FILL

});

win.open();

if (!hasStoragePermission) {

    permissionsToRequest.push(storagePermission);

}

if (permissionsToRequest.length > 0) {

    Ti.Android.requestPermissions(permissionsToRequest, function(e) {

        if (e.success) {

            Ti.API.info("SUCCESS");

        } else {

            Ti.API.info("ERROR: " + e.error);

        }

    });

}

var btn1 = Ti.UI.createButton({

    title : 'Click',

    top : 60

});

win.add(btn1);


btn1.addEventListener('click', function() {

Ti.Media.openPhotoGallery({
    mediaTypes: [Ti.Media.MEDIA_TYPE_VIDEO],
    success: function (e) {
        Ti.API.info("Success");
    },
    cancel: function () {
    },
    error: function (e) {
        Ti.API.error(JSON.stringify(e));
    }
});

}); </pre></code>

Tiapp.xml
<code><pre>
<manifest>

 

            <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>

 

            <application android:hardwareAccelerated="true" android:largeHeap="true"/>

 

</manifest>  
</pre></code>


*Test Result:*
Just Opening the Photos from gallery but videos are not Opening.

*Expected Result:*
Open the videos also from Android App Gallery.

Photo gallery API shows videos too for iOS. Am I missing something or this is not available for Android? If not available for Android, Can we consider it for improvement? 

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2017-05-18

   This is a valid query for Android. Moving to Engineering. </li>
<li>Frankie Merzadyan 2017-07-17

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/9223" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9223</a></li>
<li>Joshua Quick 2017-12-07

   Frankie's PR has been updated. Pending final review.</li>
<li>Hans Kn√∂chel 2018-02-09

   [~jquick] Just to be sure: AC-5581 is something else right?</li>
<li>Joshua Quick 2018-02-09

   [~hknoechel], my updated PR for this case fixes the blob/file handling for videos too, allowing it to be played via a VideoPlayer. So, it should theoretically upload the video file now **BUT** our HTTPClient API is currently coded to write a blob to file before uploading it, which we don't want to do since videos tend to be huge.
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/network/src/java/ti/modules/titanium/network/TiHTTPClient.java#L904" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/network/src/java/ti/modules/titanium/network/TiHTTPClient.java#L904</a>
   
   We might not have enough storage space and it'll cause a significant delay before starting the upload (must wait until it finishes writing to storage). It should probably be optimized to stream the bytes from blob instead.
   
   *Edit:*
   Actually, it sounds like [AC-5581] is a really a WebView issue where the JavaScript is unable to show a video selection dialog?</li>
<li>Gary Mathews 2018-02-14

   Bumping from 7.1.0, we need to cleanup this PR and fix conflicts.</li>
<li>Lokesh Choudhary 2018-05-09

   FR Passed.
   Waiting merge to get enabled.</li>
<li>Lokesh Choudhary 2018-05-10

   PR Merged.
   
   </li>
<li>Lokesh Choudhary 2018-07-02

   Verified the fix in SDK7.3.0.v20180628132121.
   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-24707.json">JSON Source</a></p>