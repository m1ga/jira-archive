---
title: "[TIMOB-24726] iOS: Error when requiring ES6 class "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-05-23T21:44:30.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>ES6, Titanium</td></tr>
<tr><th>Reporter</th><td>Brenton House</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2017-05-23T20:35:36.000+0000</td></tr>
<tr><th>Updated</th><td>2017-05-23T21:44:30.000+0000</td></tr>
</table>

<h3>Description</h3>

When calling <code>require('animal')</code> I am getting the following error:

{noformat}
[ERROR]     message = "Unexpected use of reserved word 'class'";
{noformat}


animal.js


<code><pre>
'use strict';

class Animal { 
	constructor(name) {
		this.name = name;
	}
	speak() {
		console.log(this.name + ' makes a noise.');
	}
}

module.exports = Animal;
</pre></code>


<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2017-05-23

   Hello, Can you provide a full reproducible code and steps to generate the issue? Thanks.</li>
<li>Brenton House 2017-05-23

   Steps to recreate:
   
   1.  Create new Titanium app using CLI
   2.  Create new file:  <code>lib/animal.js</code>
   
   
   
   <code><pre>
   'use strict';
   
   class Animal { 
   	constructor(name) {
   		this.name = name;
   	}
   	speak() {
   		console.log(this.name + ' makes a noise.');
   	}
   }
   
   module.exports = Animal;
   </pre></code>
   
   3.  Add the following line to <code>controllers/index.js</code>:
   
   
   <code><pre>
   require('animal');
   </pre></code>
   
   3. Run the app: <code>appc ti build --platform ios --target simulator --log-level trace</code></li>
<li>Christopher Williams 2017-05-23

   Is this at runtime? If so, it's because you need to switch to the bundled JSCore engine from iOS to get ES6 support. Our TiCore fork is very old. You do that by setting a special value in your tiapp.xml:
   
   <code><pre>
   &lt;ti:app&gt;
       &lt;ios&gt;
           &lt;use-jscore-framework&gt;true&lt;/use-jscore-framework&gt;
       &lt;/ios&gt;
   &lt;/ti:app&gt;
   </pre></code>
   
   there's more details on the PR itself about this: <a href="https://github.com/appcelerator/titanium_mobile/pull/8972" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8972</a>
   
   But basically, we do not transpire your ES6 code down to ES5 on older engines (yet). We pass the code through and it's up the JS engine if it supports it. TiCore is very old and does not. Using bundled JSCore means it's up to the iOS version you're running (see <a href="https://kangax.github.io/compat-table/es6/)" rel="nofollow" target="_blank">https://kangax.github.io/compat-table/es6/)</a></li>
<li>Brenton House 2017-05-23

   Sorry about that [~cwilliams]!  Forgot to switch that on for the new project.   You can close this ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-24726.json">JSON Source</a></p>