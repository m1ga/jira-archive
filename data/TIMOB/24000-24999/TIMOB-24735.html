---
title: "[TIMOB-24735] Android: AttributedString link underline color "
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2021-02-19T15:02:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.4, Release 7.0.1, Release 7.1.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 10.0.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>android, attributedString, parity</td></tr>
<tr><th>Reporter</th><td>Patricia Peruga</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-05-23T15:43:33.000+0000</td></tr>
<tr><th>Updated</th><td>2021-02-19T15:02:45.000+0000</td></tr>
</table>

<h3>Description</h3>

*Problem description*

When trying to change ATTRIBUTE_UNDERLINE_COLOR of a link AttributedString, on Android does not change anything, on iOS it is working.

This is a problem if you need to keep the link on a label but without the underline (just like ClickableSpan on native), on iOS just set the underline color to "transparent" works.

The attachment screenshots show how the second label on iOS has transparent color, while on Android it keeps the same color as the ATTRIBUTE_FOREGROUND_COLOR.

Trying to not set the underline attribute also causes the same effect.

*Steps to reproduce*

1. Create a new mobile project classic titanium
2. Add this code to app.js:


<code><pre>
var win = Ti.UI.createWindow({
	layout : 'vertical'
});

win.add(createLabel());

var lbl = createLabel();
colorLinks(lbl.attributedString);
win.add(lbl);

win.open();

function createLabel() {

	var label = Ti.UI.createLabel({
		top : 50,
		attributedString : Ti.UI.createAttributedString({
			text : 'Check out the Appcelerator Developer Portal',
			attributes : [{
				type : Ti.UI.ATTRIBUTE_LINK,
				value : '<a href="https://developer.appcelerator.com" rel="nofollow" target="_blank">https://developer.appcelerator.com</a>',
				range : [14, 29]
			}]
		})
	});

	label.addEventListener('link', function(e) {
		Ti.Platform.openURL(e.url);
	});

	return label;
}

function colorLinks(as) {
	var colorText = '#CD1625';
	//var colorUnderline = "#FFFFFF";
	var colorUnderline = "transparent";

	as.attributes.forEach(function(attribute) {

		if (attribute.type === Ti.UI.ATTRIBUTE_LINK) {

			as.addAttribute({
				type : Ti.UI.ATTRIBUTE_FOREGROUND_COLOR,
				value : colorText,
				range : attribute.range
			});
			
			// This is not working on Android
			as.addAttribute({
				type : Ti.UI.ATTRIBUTE_UNDERLINE_COLOR,
				value : colorUnderline,
				range : attribute.range
			});
		}
	});

	return as;
}

</pre></code>


3. Run in a device or simulator

*Actual results*

Android does not change the color of the link, it just takes the default link color or the ATTRIBUTE_FOREGROUND_COLOR

*Expected results*

Being able to change underline color of the links or just keep the link without any underline, like CSS text-decoration property.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24735_62273/screenshot-2017-05-23_17.37.09.918.png">screenshot-2017-05-23_17.37.09.918.png</td></td><td>2017-05-23T15:37:54.000+0000</td><td>59047</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24735_62274/Simulator Screen Shot 23 May 2017, 17.35.45.png">Simulator Screen Shot 23 May 2017, 17.35.45.png</td></td><td>2017-05-23T15:36:13.000+0000</td><td>46697</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2017-05-25

   I can reproduce the issue for Android. Tested with SDK 6.0.4.GA.</li>
<li>Michael Gangolf 2018-01-16

   Same for 7.0.1.GA
   Here is a short example on how to add color in an Android app: <a href="https://stackoverflow.com/a/43584166/5193915" rel="nofollow" target="_blank">https://stackoverflow.com/a/43584166/5193915</a>
   Should work in Ti too (place to add it: <a href="https://github.com/appcelerator/titanium_mobile/blob/b758504ce898d0e93e461849cbb8975283da85bc/android/modules/ui/src/java/ti/modules/titanium/ui/AttributedStringProxy.java#L202)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/b758504ce898d0e93e461849cbb8975283da85bc/android/modules/ui/src/java/ti/modules/titanium/ui/AttributedStringProxy.java#L202)</a></li>
<li>Simon Buckingham 2018-06-05

   I have the same problem. 
   testing in Ti SDK 7.1.1 GA.
   With Android 4.3 and 7.1.</li>
<li>Sohail Saddique 2021-02-03

   Issue still exists today, under 9.3.1.GA.</li>
<li>Gary Mathews 2021-02-12

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/12471" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/12471</a></li>
<li>Satyam Sekhri 2021-02-17

   FR Passed.
   Waiting for Jenkins build.</li>
<li>Christopher Williams 2021-02-19

   merged to master for 10.0.0 target</li>
</ol>


<p><a href="/TIMOB/TIMOB-24735.json">JSON Source</a></p>