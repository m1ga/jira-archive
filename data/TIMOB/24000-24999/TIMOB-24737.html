---
title: "[TIMOB-24737] Android: Reading property "WebView.disableContextMenu" causes crash if never assigned"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-05-26T18:46:12.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, regression, webview</td></tr>
<tr><th>Reporter</th><td>Anthony Chung</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-05-25T18:06:38.000+0000</td></tr>
<tr><th>Updated</th><td>2017-06-14T17:58:45.000+0000</td></tr>
</table>

<h3>Description</h3>

*Edit from [~jquick]:*
The stack-trace indicates that this is actually a WebView bug, not a ListView bug. Please see my comment below this post.

*Original Post:*
Please check/test 6.1.0.Rc on Android with Listview error, console log attached with file.

This error occurs when I use 6.1.0.RC with a listview in our production app. 
Switching back to 6.0.4.GA, the error goes away.

Version I was testing with 
6.1.0.v20170524102117

iOS does not seem to be affected. Only on Android.

Cannot share full code as production code. 

Listview has a headerView.
ListItem is...
<code><pre>
var listitem = {
	template: 'template',
	title: {text: item.title},
	subtitle: {text: item.subtitle},
	properties: {
		accessoryType: Ti.UI.LIST_ACCESSORY_TYPE_DISCLOSURE,
		itemId: item.itemId,
		modname: item.modname,
		resourcetype: item.template
	}
};
</pre></code>

Output:
<code><pre>
[WARN] :   W/System.err: java.lang.IllegalArgumentException: Unable to convert null to boolean.
[WARN] :   W/System.err: 	at org.appcelerator.titanium.util.TiConvert.toBoolean(TiConvert.java:357)
[WARN] :   W/System.err: 	at ti.modules.titanium.ui.WebViewProxy.getDisableContextMenu(WebViewProxy.java:354)
[WARN] :   W/System.err: 	at org.appcelerator.kroll.runtime.v8.V8Object.nativeFireEvent(Native Method)
[WARN] :   W/System.err: 	at org.appcelerator.kroll.runtime.v8.V8Object.fireEvent(V8Object.java:62)
[WARN] :   W/System.err: 	at org.appcelerator.kroll.KrollProxy.doFireEvent(KrollProxy.java:872)
[WARN] :   W/System.err: 	at org.appcelerator.kroll.KrollProxy.handleMessage(KrollProxy.java:1095)
[WARN] :   W/System.err: 	at org.appcelerator.titanium.proxy.TiViewProxy.handleMessage(TiViewProxy.java:360)
[WARN] :   W/System.err: 	at ti.modules.titanium.ui.widget.listview.ListViewProxy.handleMessage(ListViewProxy.java:320)
[WARN] :   W/System.err: 	at android.os.Handler.dispatchMessage(Handler.java:98)
[WARN] :   W/System.err: 	at android.os.Looper.loop(Looper.java:148)
[WARN] :   W/System.err: 	at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:118)
[ERROR] :  TiExceptionHandler: (main) [103,25598] ----- Titanium Javascript Runtime Error -----
[ERROR] :  TiExceptionHandler: (main) [0,25598] - In ti:/titanium.js:207,24
[ERROR] :  TiExceptionHandler: (main) [0,25598] - Message: Uncaught Unable to convert null to boolean.
[ERROR] :  TiExceptionHandler: (main) [0,25598] - Source: 			serialized[k] = this[k];
[DEBUG] :  ViewRootImpl: #1 mView = com.android.internal.policy.PhoneWindow$DecorView{99b1dd3 V.E...... R.....I. 0,0-0,0}
[ERROR] :  V8Exception: Exception occurred at ti:/titanium.js:207: Uncaught Unable to convert null to boolean.
[ERROR] :  V8Exception: Unable to convert null to boolean.
[WARN] :   TiBlob: (KrollRuntimeThread) [41,25639] getNativePath not supported for non-file blob types.
[WARN] :   TiBlob: (KrollRuntimeThread) [0,25639] getFile not supported for non-file blob types.
</pre></code>

<h3>Comments</h3>

<ol>
<li>Anthony Chung 2017-05-25

   In the production scenario where error is occuring: The headerview being applied to listsection headerview in this scenario is an Android webview.</li>
<li>Hans Kn√∂chel 2017-05-26

   Looks like an issue inside the Web-View (do you embed one in your list-view)? Especially, do you use the <code>disableContextMenu</code> property? If you use the web-view inside the list-view, but don't use the above property, it may be something with default-values.</li>
<li>Joshua Quick 2017-05-26

   I've confirmed that this is a WebView bug.  It crashes when reading the "WebView.disableContextMenu" property if the property was never assigned.
   
   The following code reproduces this issue:
   
   <code><pre>
   var window = Ti.UI.createWindow();
   var webView = Ti.UI.createWebView(
   {
   	url: "<a href="https://appcelerator.com" rel="nofollow" target="_blank">https://appcelerator.com</a>",
   //	disableContextMenu: true,
   });
   window.add(webView);
   window.open();
   
   // Crashes when accessing "disableContextMenu" if property was never assigned.
   Ti.API.info("- webView.disableContextMenu: " + webView.disableContextMenu.toString());
   </pre></code>
   
   We're looking into fixing this bug now.  Thanks for reporting this issue.
   
   *Work-around:*
   Set the "disableContextMenu" property to true/false in your createWebView() function call.
   </li>
<li>Gary Mathews 2017-05-26

   [~jquick] Sorry, I forgot to mark it as <code>In Progress</code> when I assigned it to myself. It's an easy fix, I'm not sure if this issue is a regression though.
   
   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/9092" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9092</a>
   6_1_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/9093" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9093</a></li>
<li>Samir Mohammed 2017-06-14

   Closing ticket as fix is verified in 6.1.0.GA, 6.1.1.v20170609153006 and 6.2.0.v20170612114319. Test and other information can be found at: 
   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/9092" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9092</a>
   6_1_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/9093" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9093</a> </li>
</ol>


<p><a href="/TIMOB/TIMOB-24737.json">JSON Source</a></p>