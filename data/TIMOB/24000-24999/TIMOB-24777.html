---
title: "[TIMOB-24777] iOS: HttpRequests escape URLs with # symbols in them"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2017-06-06T13:49:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Shuo Liang</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2017-06-06T02:06:59.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:52:07.000+0000</td></tr>
</table>

<h3>Description</h3>

Reproduce:
1. Run the attached codes in a Alloy project.
2. Click those two buttons.
3. Check the output.

Problem:
The part of URL after # does not get included in the senting URL. The output always like
<code><pre>
 Received text: {"args":{},"headers":{"Accept":"*/*","Accept-Encoding":"gzip, deflate","Accept-Language":"en-us","Connection":"close","Host":"httpbin.org","User-Agent":"Appcelerator Titanium/6.1.0 (iPhone/10.3; iOS; en_US;)","X-Requested-With":"XMLHttpRequest","X-Titanium-Id":"c2bbbb9f-5bc7-4761-9111-bca83e6b6d8e"},"method":"GET","origin":"114.253.205.80","url":"<a href="http://httpbin.org/anything" rel="nofollow" target="_blank">http://httpbin.org/anything</a>"}
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24777_62422/index.js">index.js</td></td><td>2017-06-06T02:06:54.000+0000</td><td>1286</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-24777_62423/index.xml">index.xml</td></td><td>2017-06-06T02:06:44.000+0000</td><td>191</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Hans Kn√∂chel 2017-06-06

   The test-case looks invalid for me. What would be expected? That the payload parameter <code>url</code> include the <code>#allTheThings</code> suffix? If so, the test-case is not correct, because opening [the URL](<a href="http://httpbin.org/anything#allTheThings)" rel="nofollow" target="_blank">http://httpbin.org/anything#allTheThings)</a> in the browser gives the same result as the app. 
   
   I created [another test-case](<a href="http://hans-knoechel.de/TIMOB-24777.php#allTheThings)" rel="nofollow" target="_blank">http://hans-knoechel.de/TIMOB-24777.php#allTheThings)</a> just to ensure, and it also does not print the suffix (both from browser and app). [Here](<a href="https://stackoverflow.com/a/940923/5537752)" rel="nofollow" target="_blank">https://stackoverflow.com/a/940923/5537752)</a> is the reason why:
   {quote}
   The main problem is that the browser won't even send a request with a fragment part. The fragment part is resolved right there in the browser. So it's reachable through JavaScript.
   
   Anyway, you could parse a URL into bits, including the fragment part, using parse_url(), but it's obviously not your case.
   {quote}
   
   This is not a Titanium issue, so either the backend should be fixed to use proper get-parameters like <code>?option=allTheThings</code> or preprocess the <code>#</code> suffix with Javascript (what it's usually used for).</li>
<li>Eric Merriman  2018-08-06

   Closing as "not our bug". If you disagree, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-24777.json">JSON Source</a></p>