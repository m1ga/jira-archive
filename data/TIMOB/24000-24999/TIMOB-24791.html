---
title: "[TIMOB-24791] Android: SDK 6_X_X issue with local JS require"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 6.0.0, Release 6.1.0, Release 6.0.4</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ibrahim MESLEM</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2017-06-07T09:14:07.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T19:55:03.000+0000</td></tr>
</table>

<h3>Description</h3>

Hello,

I am facing an issue since the SDK 6_X_X on android , where i have the issue bellow

*[ERROR] :  TiExceptionHandler: (main) [125,125] ----- Titanium Javascript Runtime Error -----
[ERROR] :  TiExceptionHandler: (main) [0,125] - In ti:/module.js:303,2
[ERROR] :  TiExceptionHandler: (main) [0,125] - Message: Uncaught Error: Requested module not found: crypto-js/hmac
[ERROR] :  TiExceptionHandler: (main) [0,125] - Source: 	throw new Error("Requested module not found: " + request); // TODO Set 'code' property to 'MODULE_NOT_FOUND' to match Node?
[ERROR] :  V8Exception: Exception occurred at ti:/module.js:303: Uncaught Error: Requested module not found: crypto-js/hmac
*
The same lib working fine on 5_5_X, could you please help me with this.

Best regards.









<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2017-06-07

   Hey there, is the same happening for 6.1.0.GA?</li>
<li>Ibrahim MESLEM 2017-06-07

   Hey , yes :(</li>
<li>Hans Knöchel 2017-06-07

   Thank you! Can you attach the file that caused the issue and an example code triggering the error as well?</li>
<li>Ibrahim MESLEM 2017-06-07

   yes ofcourse,
   This is the lib that im using
   <a href="https://drive.google.com/file/d/0B7S72-3VTSUfenZIb0xUOTBnUHM/view?usp=sharing" rel="nofollow" target="_blank">https://drive.google.com/file/d/0B7S72-3VTSUfenZIb0xUOTBnUHM/view?usp=sharing</a>
   
   
   var CryptoJS = require(crypto-js/aes);
   
   
   
   </li>
<li>Christopher Williams 2017-06-07

   [~bahinapster] We'd need to know the folder structure of your app (specifically the file calling require and the crypto-js/aes file).
   
   "Legacy"-style requires with no prefix should still be handled and assumed to be relative to your Resources folder (so <code>require('crypto-js/aes')</code> should look for <code>Resources/crypto-js/aes.js</code>) - but are now discouraged in favor of either explicitly absolute or relative require paths (i.e. <code>require('./crypto-js/aes')</code> to look relative to the current file, <code>require('/crypto-js/aes')</code> to look at <code>Resources/crypto-js/aes.js</code>)</li>
<li>Ibrahim MESLEM 2017-06-07

   Both lib and my file are under app/lib as bellow
   app/lib/crypto-js
   app/lib/myfile.js</li>
<li>Ewan Harris 2017-06-07

   Minimal test case
   
   <h4>Add the below to your titanium project (assuming classic here)</h4>
   <h4>Build for Android</h4>
   
   <code><pre>
   var CryptoJS = require('index');
   console.log(CryptoJS)
   </pre></code>
   
   <code><pre>
   ;(function (root, factory) {
   	module.exports = exports = factory();
   }(this, function (CryptoJS) {
   	(function () {
   		var x = 'foo';
   	}());
   }));
   </pre></code>
   
   
   
   I am able to fix this by either removing the nested iife in index.js or returning that iife. I tried this on iOS and it appears to load fine, -I have not tried Windows-
   
   Update:
   
   Window works as expected
   Removed foo.js file as index.js is enough to repro</li>
</ol>


<p><a href="/TIMOB/TIMOB-24791.json">JSON Source</a></p>