---
title: "[TIMOB-24881] Android: Label ellipsize modes START and MIDDLE don't work if \"autoLink\" is true"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-05-21T21:58:13.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.1.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.1.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, label</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2017-06-23T00:05:58.000+0000</td></tr>
<tr><th>Updated</th><td>2019-05-21T21:58:13.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
When a Label is set up to "autoLink" its text which contains at least 1 URL, then ellipsize modes START and MIDDLE are not honored. The label will use ellipsize mode END instead.

*Code Example:*

<code><pre>
var window = Ti.UI.createWindow();
window.add(Ti.UI.createLabel(
{
	text: "<a href="https://www.appcelerator.com" rel="nofollow" target="_blank">https://www.appcelerator.com</a>",
	font: { fontSize: "50dp" },
	autoLink: Ti.UI.AUTOLINK_URLS,
//	ellipsize: Ti.UI.TEXT_ELLIPSIZE_TRUNCATE_START,
	ellipsize: Ti.UI.TEXT_ELLIPSIZE_TRUNCATE_MIDDLE,
	width: "100%",
}));
window.open();
</pre></code>

*Result:*
Ellipsis are shown at the end instead of the start or middle.

*Reason:*
Android's Java "TextView does not support displaying START or MIDDLE ellipsis while a "MovementMethod" (such as "LinkMovementMethod" in this case) is applied to it. Our existing "TiUILabel.java" code works-around this problem and applies an END ellipsis in this case instead.

*Suggested Solution:*
Android 5.0 and above supports URL taps without a MovementMethod, but Android 4.0 does not (I'm not sure which OS versions in the middle do support it). This is because Google's "TextView.java" code in its onTouchEvent() method handles URL taps for newer OS versions (see their code on github). So, the recommended solution here is to not set a MovementMethod in "TiUILabel.java" and for us to replicate what Google does in their TextView.onTouchEvent() in our TiUILabel code so that we can support URL taps on all Android OS versions.

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2019-05-15

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/10887" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10887</a></li>
<li>Keerthi Mahalingam 2019-05-21

   Verified the fix on SDK 8.1.0.v20190521052940.Label ellipsize works as expected.
   
   *Test Environment:*
   {CODE}
   Name                        = Mac OS X
     Version                     = 10.13.6
     Architecture                = 64bit
     # CPUs                      = 8
     Memory                      = 17179869184
   Node.js
     Node.js Version             = 8.9.1
     npm Version                 = 5.5.1
   Titanium CLI
     CLI Version                 = 5.1.1
   Titanium SDK
     SDK Version                 = 8.1.0.v20190521052940
   Device =Samsung s5 android 6
   Emulator = Pixel android 9,galaxy nexus android 4.4
   {CODE}</li>
</ol>


<p><a href="/TIMOB/TIMOB-24881.json">JSON Source</a></p>