---
title: "[TIMOB-24910] Hyperloops iOS - Allow protocols declared within other classes"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2019-09-17T15:10:50.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Hyperloop, iOS</td></tr>
<tr><th>Labels</th><td>delegate, engTriage, hyperloop</td></tr>
<tr><th>Reporter</th><td>Rodolfo Perottoni</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2016-09-22T23:22:33.000+0000</td></tr>
<tr><th>Updated</th><td>2019-12-02T23:06:28.000+0000</td></tr>
</table>

<h3>Description</h3>

I'm trying to use the Braintree SDK with Hyperloop and found an issue while trying to create a protocol bridge.

<code><pre>
Caught exception: JSParseError: invalid protocol specified "BTDropInViewControllerDelegate"
</pre></code>

It happenes because of this:

<code><pre>
var delegate = Hyperloop.defineClass('delegate', 'NSObject', ['BTDropInViewControllerDelegate']);

//rest of code doesn't matter.

module.exports = delegate;
</pre></code>

I'm requiring this file in a controller and the error above pops up when building the project.
I think this issue is happening because the *BTDropInViewControllerDelegate* protocol is not declared in a file with the same name - and I guess that's what's Hyperloop expects.
This protocol is being defined inside the file *BTDropInViewController*.

I'm importing Braintree with Pods.

<code><pre>
platform :ios, '8.0'
target 'loopmodules-braintree' do
	pod 'Braintree', '~> 3.9'
end
</pre></code>



<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2016-09-23

   The delegate is not available in recent Braintree SDK-versions and has been replaced with 
   <code><pre>
   - (void)dropInViewController:(BTDropInViewController *)viewController didSucceedWithTokenization:(BTPaymentMethodNonce *)paymentMethodNonce;
   </pre></code></li>
<li>Hans Knöchel 2016-09-24

   Resolving for now. Probably you used the v3 docs and the v4 source that changed the selector as described above. If not, let us know.</li>
<li>Rodolfo Perottoni 2016-09-29

   Hey @Hans. As you've said, I'm using the v3.
   
   
   <code><pre>
   install! 'cocoapods',
            :integrate_targets => false
   
   platform :ios, '8.0'
   target 'loopmodules-braintree' do
   	pod 'Braintree', '~> 3.9'
   end
   </pre></code>
   
   
   v4 is not working because of another problem - the documentation tells me to use something that's not included in the pods, but this is not a problem you should be concerned about.
   
   As for what you said above, the delegate I'm using does have that method I'm declaring. You can check that here:
   <a href="http://cocoadocs.org/docsets/Braintree/3.9.7/Protocols/BTDropInViewControllerDelegate.html" rel="nofollow" target="_blank">http://cocoadocs.org/docsets/Braintree/3.9.7/Protocols/BTDropInViewControllerDelegate.html</a>
   
   
   </li>
<li>Rodolfo Perottoni 2016-10-09

   waiting...</li>
<li>Rodolfo Perottoni 2016-10-21

   This ticket is valid and I've found the cause of the issue.
   There's nothing to do with different versions of the Braintree SDK.
   
   Hyperloop is not being able to find the *BTDropInViewControllerDelegate* protocol because it is defined within the class *BTDropInViewController*. As of now Hyperloop looks for a file with the exact name of the protocol you're trying to support. 
   
   There should be a way to specify where a protocol is being defined in case it "doesn't have its own file". 
   
   </li>
<li>paul@appwapp.com 2017-07-05

   Have there been any changes to Hyperloop to support protocols declared inside other files? I am currently experiencing this issue using Google VR SDK in Hyperloop, and the Hyperloop documentation has not discussed this issue in any sort of useful detail.</li>
<li>Hans Knöchel 2017-11-29

   [Hyperloop 3.0.1](<a href="https://github.com/appcelerator-modules/hyperloop-builds/releases/tag/v3.0.1)" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/hyperloop-builds/releases/tag/v3.0.1)</a> may solve this by being more smart regarding framework imports. Will validate next week after the 7.0.0 release.</li>
</ol>


<p><a href="/TIMOB/TIMOB-24910.json">JSON Source</a></p>