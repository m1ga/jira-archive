---
title: "[TIMOB-24922] Windows: Unable to package with VS 2017"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-07-25T20:45:45.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>windowslib 0.4.29, Release 6.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.2.0</td></tr>
<tr><th>Components</th><td>CLI, Tooling, Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2017-07-03T13:47:59.000+0000</td></tr>
<tr><th>Updated</th><td>2017-08-22T09:29:54.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

Packaging a Windows application with VS2017 errors out with the below on cert creation (added logging to show the error message), based off other changes in the VS2017 addition I swapped this (and other occurrences of vcvarsalll) to vsdevcmd and it worked

<code><pre>
'MakeCert' is not recognized as an internal or external command,
operable program or batch file.

[ERROR:~nx0] Error in script usage. The correct usage is:
Syntax:
    vcvarsall.bat [arch]
  or
    vcvarsall.bat [arch] [version]
  or
    vcvarsall.bat [arch] [platform_type] [version]
where :
    [arch]: x86 | amd64 | x86_amd64 | x86_arm | x86_arm64 | amd64_x86 | amd64_arm | amd64_arm64
    [platform_type]: {empty} | store | uwp
    [version] : full Windows 10 SDK number (e.g. 10.0.10240.0) or "8.1" to use the Windows 8.1 SDK.

The store parameter sets environment variables to support Universal Windows Platform application
development and is an alias for 'uwp'.

For example:
    vcvarsall.bat x86_amd64
    vcvarsall.bat x86_amd64 10.0.10240.0
    vcvarsall.bat x86_arm uwp 10.0.10240.0
    vcvarsall.bat x86_arm onecore 10.0.10240.0
    vcvarsall.bat x64 8.1
    vcvarsall.bat x64 store 8.1

Please make sure either Visual Studio or C++ Build SKU is installed.
</pre></code>

<h4>Steps to reproduce</h4>

<h4>Create an app <code>appc new -t titanium -n myawesomeapp --id com.foo --no-services</code></h4>
<h4>Build the app using <code>appc run -p windows -T dist-phonestore</code></h4>
<h4>Follow the prompts</h4>

<h4>Actual</h4>

When creating a cert the process will error out

<h4>Expected</h4>

Process should not error out, cert should be created after prompting

<h3>Comments</h3>

<ol>
<li>Kota Iguchi 2017-07-03

   [~eharris] Isn't this happen in <code>windowslib</code>? Then <code>affectVersion</code> should have <code>windowslib</code>. I guess the bug is around [here](<a href="https://github.com/appcelerator/windowslib/blob/master/lib/certs.js#L224)" rel="nofollow" target="_blank">https://github.com/appcelerator/windowslib/blob/master/lib/certs.js#L224)</a>, and it needs changes similar to [this](<a href="https://github.com/appcelerator/titanium_mobile_windows/pull/959/commits/ee65518a8a24a923fffdaa61feec2cbc8a3adeff#diff-3c070925992beb37da472db6eddf146d)." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/959/commits/ee65518a8a24a923fffdaa61feec2cbc8a3adeff#diff-3c070925992beb37da472db6eddf146d).</a></li>
<li>Ewan Harris 2017-07-03

   [~kiguchi] Yeah it's fixed by switching to vsDevCmd, I'm gonna push a PR for it in a little while once I've switched back to my main machine
   
   Just read your comment fully sorry. I'll add it now</li>
<li>Ewan Harris 2017-07-03

   PR: <a href="https://github.com/appcelerator/windowslib/pull/71" rel="nofollow" target="_blank">https://github.com/appcelerator/windowslib/pull/71</a></li>
<li>Kota Iguchi 2017-07-04

   <code>windowslib</code> updated. (windowslib 0.5.1) Now <code>titanium_mobile</code> needs this changes in order to resolve this ticket.</li>
<li>Ewan Harris 2017-07-10

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/9203" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9203</a></li>
<li>Ewan Harris 2017-07-25

   Merged as part of TIMOB-24591</li>
<li>Ewan Harris 2017-08-22

   Verified changes in 6.2.0.v20170821203442</li>
</ol>


<p><a href="/TIMOB/TIMOB-24922.json">JSON Source</a></p>