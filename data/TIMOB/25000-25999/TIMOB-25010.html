---
title: "[TIMOB-25010] nodejs build script: npm install failing on linux and windows"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-07-24T19:24:17.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.0.0</td></tr>
<tr><th>Components</th><td>Tooling</td></tr>
<tr><th>Labels</th><td>android, linux, nodejs, npm, windows</td></tr>
<tr><th>Reporter</th><td>Michael Gangolf</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2016-06-26T20:12:15.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:49:35.000+0000</td></tr>
</table>

<h3>Description</h3>

When trying to install the node packages with <code>npm install</code> on Linux and Windows. It will stop because it has a <code>node-ios-device</code> dependency. 

The error when installing <code>node-ios-device</code> is:


<code><pre>
npm ERR! Linux 4.5.7-200.fc23.x86_64
npm ERR! argv "/usr/local/bin/node" "/usr/local/bin/npm" "install" "node-ios-device"
npm ERR! node v4.2.2
npm ERR! npm  v2.14.7
npm ERR! code EBADPLATFORM

npm ERR! notsup Unsupported
npm ERR! notsup Not compatible with your operating system or architecture: node-ios-device@0.9.5
npm ERR! notsup Valid OS:    darwin
npm ERR! notsup Valid Arch:  any
npm ERR! notsup Actual OS:   linux
npm ERR! notsup Actual Arch: x64
</pre></code>


SDK 6.0.0 (git 26.06.2016)
Fedora Linux


<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2016-06-27

   Hello, Appcelerator support for Linus is revoked. Please ask nodsjs support in their community.</li>
<li>Michael Gangolf 2017-07-22

   Please reopen this ticket again. This problem is affecting windows,too. Since the node_modules folder is not included with Ti SDK 7 anymore you have to run <code>npm install</code> now. On Windows and Linux it will fail because ioslib is a dependency in the package.json:
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/package.json#L38" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/package.json#L38</a>
   
   This will fail because <code>node-ios-device</code> is <code>darwin</code> only! If you move the dependency to an optionalDependency it will warn you but continue to install the other modules:
   
   <code><pre>
     "optionalDependencies":{
       "ioslib": "^1.4.9"
     }
   </pre></code></li>
<li>Gary Mathews 2017-07-24

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/9242" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9242</a></li>
<li>Chris Barber 2017-07-24

   Stealing ticket from [~gmathews].</li>
<li>Chris Barber 2017-07-24

   Fixed by TIMOB-25016.</li>
<li>Eric Merriman  2018-08-06

   Cleaning up older fixed issues. If this issue should not have been closed as fixed, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25010.json">JSON Source</a></p>