---
title: "[TIMOB-25018] Add Windows support to the test script"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Technical task</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Done</td></tr>
<tr><th>Resolution Date</th><td>2017-11-30T14:59:14.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2017-07-25T12:47:02.000+0000</td></tr>
<tr><th>Updated</th><td>2017-11-30T14:59:14.000+0000</td></tr>
</table>

<h3>Description</h3>

Windows support needs to be added to the test.js script. We need to consider support a little differently to iOS and Android as it will need to hit both ws-local and wp-emulator targets

At a high level here are the tasks

<h4>Allow a user to pass in a target</h4>
** As we allow a user to pass in multiple platforms we should just outright error if platforms.length >1 and target is defined
** This target should then be used passed to the build phase
<h4>When no target is defined select a default</h4>
** In keeping with the other probably want to target wp-emulator when not defined
<h4>Make sure it does not break Android and iOS usage</h4>
<h4>Review <a href="https://github.com/appcelerator/titanium_mobile_windows/blob/66ccc0a080360d147dd2b59c748a075b87107233/Tools/Scripts/build/test.js" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/blob/66ccc0a080360d147dd2b59c748a075b87107233/Tools/Scripts/build/test.js</a> to see whether there is any Windows specific logic we need to handle (device id, copying windows SDK across, specific name for each platform we target etc.)</h4>

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2017-07-25

   Initial work pushed in <a href="https://github.com/appcelerator/titanium-mobile-mocha-suite/pull/17/commits/4b75b3f057ad8771bc0d0f2ebf249096462a9207" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-mobile-mocha-suite/pull/17/commits/4b75b3f057ad8771bc0d0f2ebf249096462a9207</a> need to test that I didn't break current usage in titanium_mobile. Keeping scope limited to usage within titanium_mobile_windows i.e single platform usage
   
   examples
   
   node test.js -p windows -T ws-local -> builds to ws-local
   node test.js -p windows -T wp-emulator -C 10-0-1 -> build to wp-emulator 10-0-1 device id
   node test.js -p windows -C 10-0-1 -> errors out
   node test.js -p windows,android -T ws-local -> errors out</li>
<li>Ewan Harris 2017-08-30

   Note to self, split out the SDK installation steps out of the test scripts. Then we can see whether the test do really take 20 minutes on Windows, or whether that's just because it's gotta download an SDK and that counts towards our test time
   </li>
<li>Ewan Harris 2017-08-30

   Further note to self, lets mirror the flow of titanium_mobile if we can, build the SDK, then run the unit test in a separate 'step' splitting out ws-local and wp-emulator onto different nodes. We probably could also write some nice new build scripts for titanium_mobile_windows that match titanium_mobile?</li>
</ol>


<p><a href="/TIMOB/TIMOB-25018.json">JSON Source</a></p>