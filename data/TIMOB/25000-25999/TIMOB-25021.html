---
title: "[TIMOB-25021] Android: Unable to release weak global references"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-08-01T20:35:05.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Gary Mathews</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-07-25T18:07:48.000+0000</td></tr>
<tr><th>Updated</th><td>2017-11-16T01:03:18.000+0000</td></tr>
</table>

<h3>Description</h3>

- Sometimes an application will crash when attempting to re-launch after closing.

<code><pre>
07-19 21:13:57.396: I/KeyButtonView(5652): sendEvent(0,0,666070799,false) back
07-19 21:13:57.419: I/KeyButtonView(5652): sendEvent(1,0,666070824,false) back
07-19 21:13:57.424: D/ActivityTrigger(5200): ActivityTrigger activityPauseTrigger 
07-19 21:13:57.482: I/Adreno(9584): QUALCOMM build                   : 6933d31, I73c5708217
07-19 21:13:57.482: I/Adreno(9584): Build Date                       : 12/28/16
07-19 21:13:57.482: I/Adreno(9584): OpenGL ES Shader Compiler Version: XE031.09.00.04
07-19 21:13:57.482: I/Adreno(9584): Local Branch                     : 
07-19 21:13:57.482: I/Adreno(9584): Remote Branch                    : quic/LA.BR.1.3.6_rb1.11
07-19 21:13:57.482: I/Adreno(9584): Remote Branch                    : NONE
07-19 21:13:57.482: I/Adreno(9584): Reconstruct Branch               : NOTHING
07-19 21:13:57.504: I/InputMethodManagerService(5200): Disable input method client, cs=ClientState{fd755d6 uid 10628 pid 28593}
07-19 21:13:57.504: D/InputMethodManagerService(5200): Switching to client com.google.android.googlequicksearchbox(9584), IME=com.google.android.inputmethod.latin/com.android.inputmethod.latin.LatinIME
07-19 21:13:57.504: I/InputMethodManagerService(5200): Enable input method client, cs=ClientState{2298a1b uid 10055 pid 9584}
07-19 21:13:57.851: D/Window(28593): Window is closed normally.
07-19 21:13:58.104: W/(526): debuggerd: handling request: pid=28593 uid=10628 gid=10628 tid=28593
07-19 21:13:58.183: A/DEBUG(28675): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
07-19 21:13:58.183: A/DEBUG(28675): Build fingerprint: 'htc/hiaeuhl_00401/htc_hiaeuhl:7.0/NRD90M/876837.2:user/release-keys'
07-19 21:13:58.183: A/DEBUG(28675): Revision: '0'
07-19 21:13:58.183: A/DEBUG(28675): ABI: 'arm'
07-19 21:13:58.183: A/DEBUG(28675): pid: 28593, tid: 28593, name: com.miga.test  &gt;&gt;&gt; com.miga.test &lt;&lt;&lt;
07-19 21:13:58.183: A/DEBUG(28675): signal 6 (SIGABRT), code -6 (SI_TKILL), fault addr --------
07-19 21:13:58.190: A/DEBUG(28675): Abort message: 'art/runtime/indirect_reference_table.cc:66] JNI ERROR (app bug): see above.'
07-19 21:13:58.190: A/DEBUG(28675):     r0 00000000  r1 00006fb1  r2 00000006  r3 00000008
07-19 21:13:58.190: A/DEBUG(28675):     r4 f6f4758c  r5 00000006  r6 f6f47534  r7 0000010c
07-19 21:13:58.190: A/DEBUG(28675):     r8 f6e83400  r9 f433eb33  sl f433eb12  fp ffffffff
07-19 21:13:58.190: A/DEBUG(28675):     ip 00000002  sp ff7f4ed8  lr f5c15077  pc f5c178f8  cpsr 200f0010
07-19 21:13:58.197: A/DEBUG(28675): backtrace:
07-19 21:13:58.197: A/DEBUG(28675):     #00 pc 0004a8f8  /system/lib/libc.so (tgkill+12)
07-19 21:13:58.197: A/DEBUG(28675):     #01 pc 00048073  /system/lib/libc.so (pthread_kill+34)
07-19 21:13:58.197: A/DEBUG(28675):     #02 pc 0001d7f9  /system/lib/libc.so (raise+10)
07-19 21:13:58.197: A/DEBUG(28675):     #03 pc 000192f1  /system/lib/libc.so (__libc_android_abort+34)
07-19 21:13:58.197: A/DEBUG(28675):     #04 pc 00017358  /system/lib/libc.so (abort+4)
07-19 21:13:58.197: A/DEBUG(28675):     #05 pc 0031bec5  /system/lib/libart.so (_ZN3art7Runtime5AbortEv+252)
07-19 21:13:58.197: A/DEBUG(28675):     #06 pc 000b4d79  /system/lib/libart.so (_ZN3art10LogMessageD2Ev+864)
07-19 21:13:58.197: A/DEBUG(28675):     #07 pc 001be4fb  /system/lib/libart.so (_ZNK3art22IndirectReferenceTable10CheckEntryEPKcPvi+346)
07-19 21:13:58.197: A/DEBUG(28675):     #08 pc 001be203  /system/lib/libart.so (_ZN3art22IndirectReferenceTable6RemoveEjPv+830)
07-19 21:13:58.197: A/DEBUG(28675):     #09 pc 0023b18f  /system/lib/libart.so (_ZN3art9JavaVMExt15DeleteGlobalRefEPNS_6ThreadEP8_jobject+46)
07-19 21:13:58.198: A/DEBUG(28675):     #10 pc 0038fc63  /data/app/com.miga.test-1/lib/arm/libkroll-v8.so (_ZN8titanium10JavaObject13DeleteJavaRefEv+34)
07-19 21:13:58.198: A/DEBUG(28675):     #11 pc 0038fc9d  /data/app/com.miga.test-1/lib/arm/libkroll-v8.so (_ZN8titanium10JavaObjectD2Ev+28)
07-19 21:13:58.198: A/DEBUG(28675):     #12 pc 0038ce1b  /data/app/com.miga.test-1/lib/arm/libkroll-v8.so (_ZN8titanium5ProxyD2Ev+14)
07-19 21:13:58.198: A/DEBUG(28675):     #13 pc 0038ce2d  /data/app/com.miga.test-1/lib/arm/libkroll-v8.so (_ZN8titanium5ProxyD0Ev+4)
07-19 21:13:58.198: A/DEBUG(28675):     #14 pc 0038e507  /data/app/com.miga.test-1/lib/arm/libkroll-v8.so (Java_org_appcelerator_kroll_runtime_v8_V8Object_nativeRelease+74)
07-19 21:13:58.198: A/DEBUG(28675):     #15 pc 003cbd65  /data/app/com.miga.test-1/oat/arm/base.odex (offset 0x3a1000)
</pre></code>

*STEPS*
1. Create a basic application with <code>exitOnClose</code>
<code><pre>
var win = Ti.UI.createWindow({backgroundColor: 'gray', exitOnClose: true});
win.open();
</pre></code>
2. Launch application
3. Press back to exit the application
4. Quickly re-launch the application by pressing the application icon (you may want to add a shortcut to your homescreen)
5. This may take a few attempts

*EXPECTED*
- The application should not crash

*ACTUAL*
- The application crashes

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2017-07-25

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/9246" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9246</a></li>
<li>Lokesh Choudhary 2017-11-16

   Verified the fix with SDK 7.0.0.v20171115153702.
   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25021.json">JSON Source</a></p>