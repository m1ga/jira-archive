---
title: "[TIMOB-25046] iOS: Peek and Pop functionality not working with 6.1.0 G.A and above"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-08-15T22:07:59.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.1.0, Release 6.1.1, Release 6.1.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.2.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Shuo Liang</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2017-08-01T09:26:31.000+0000</td></tr>
<tr><th>Updated</th><td>2017-08-15T23:17:41.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Reproduce</h4>
1. Run the simple app attached in an alloy project
2. On force touch of "Open Window" button.
3. Another window should be opened. But on force touch of button, peek event is not getting fired. 

<h4>Note</h4>
Same issue with 6.1.0.GA 6.1.1.GA
But working well on 6.0.3.GA

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25046_62965/index.js">index.js</td></td><td>2017-08-01T09:26:08.000+0000</td><td>3416</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25046_62963/index.tss">index.tss</td></td><td>2017-08-01T09:26:11.000+0000</td><td>136</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25046_62961/index.xml">index.xml</td></td><td>2017-08-01T09:26:14.000+0000</td><td>90</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25046_62964/pop.js">pop.js</td></td><td>2017-08-01T09:26:08.000+0000</td><td>113</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25046_62962/pop.tss">pop.tss</td></td><td>2017-08-01T09:26:11.000+0000</td><td>22</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25046_62960/pop.xml">pop.xml</td></td><td>2017-08-01T09:26:14.000+0000</td><td>1482</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2017-08-09

   I am able to reproduce the issue on 6.1.x, simplified test-case:
   <code><pre>
   if (!Ti.UI.iOS.forceTouchSupported) {
     alert('NOT SUPPORTED!');
   }
   
   var actions = [];
   
   var win = Ti.UI.createWindow({
     backgroundColor: "white"
   });
   
   // The actions to be added to the preview context.
   var action = Ti.UI.iOS.createPreviewAction({
     title: "Directions",
     style: Ti.UI.iOS.PREVIEW_ACTION_STYLE_DEFAULT
   });
   
   var actionCall = Ti.UI.iOS.createPreviewAction({
     title: "Call",
     style: Ti.UI.iOS.PREVIEW_ACTION_STYLE_DEFAULT
   });
   
   action.addEventListener("click", function(e) {
     alert("Title: " + e.title + " / Style: " + e.style + " / Index: " + e.index);
   });
   
   actionCall.addEventListener("click", function(e) {
     alert("Title: " + e.title + " / Style: " + e.style + " / Index: " + e.index);
   });
   
   var actionProfile = Ti.UI.iOS.createPreviewAction({
     title: "Call Profile",
     style: Ti.UI.iOS.PREVIEW_ACTION_STYLE_DEFAULT
   });
   
   actionProfile.addEventListener("click", function(e) {
     alert("Title: " + e.title + " / Style: " + e.style + " / Index: " + e.index);
   });
   
   actions.push(action);
   actions.push(actionCall);
   actions.push(actionProfile);
   
   var pview = Ti.UI.createView({
     height: 100,
     backgroundColor: 'white'
   });
   
   pview.add(Ti.UI.createLabel({
     text: 'Address\n Title',
     color: 'black'
   }));
   
   // Create the preview context
   var context = Ti.UI.iOS.createPreviewContext({
     actions: actions, // Can have both Ti.UI.iOS.PreviewAction + Ti.UI.iOS.PreviewActionGroup
     contentHeight: 100, // When unspecified, we use the available height
     preview: pview
   });
   
   context.addEventListener("peek", function(e) {
     Ti.API.warn('in peek');
   });
   
   context.addEventListener("pop", function(e) {
     Ti.API.warn('in pop');
   });
   
   // Assign the preview context
   var button = Ti.UI.createButton({
     previewContext: context, // Will be ignored on unsupported devices
     title: "Open Window!",
     backgroundColor: "#A6171C",
     width: 200,
     height: 50,
     tintColor: "#fff"
   });
   
   win.add(button);
   win.open();
   </pre></code></li>
<li>Hans Knöchel 2017-08-09

   The issue was introduced by the fixing the analyser-warnings ([this line](<a href="https://github.com/appcelerator/titanium_mobile/commit/46e83b20895f110fbf0b6adcf93edd84968c4ec9#diff-e1073c3ff26a35a5c8da1098e5020788R87))." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/46e83b20895f110fbf0b6adcf93edd84968c4ec9#diff-e1073c3ff26a35a5c8da1098e5020788R87)).</a> PR ready later today. Might be worth a 6.1.3!</li>
<li>Hans Knöchel 2017-08-09

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/9289" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9289</a>
   PR (6_2_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/9290" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9290</a></li>
<li>Abir Mukherjee 2017-08-15

   Passed FR.
   Fix found in SDK versions:
   6.2.0.v20170815151205
   7.0.0.v20170815144954</li>
</ol>


<p><a href="/TIMOB/TIMOB-25046.json">JSON Source</a></p>