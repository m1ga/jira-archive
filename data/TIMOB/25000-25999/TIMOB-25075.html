---
title: "[TIMOB-25075] Android. v8 LowMemoryNotification"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2018-08-02T09:56:12.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, memory, v8</td></tr>
<tr><th>Reporter</th><td>Sergey Volkov</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2017-08-07T12:39:08.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:41:12.000+0000</td></tr>
</table>

<h3>Description</h3>

v8 supports optional notification "LowMemoryNotification". Call to this method causes proper garbage collection, so many object will be collected on both js and java sides.

In my experience "IdleNotificationDeadline(now+0.1)" is not enough to collect all objects and some times this could lead to huge memory leak (actually it is not leak, because memory in java heap will be freed after gc in v8, for example if I call js heap snapshot creation)

I suggest, that we should add "LowMemoryNotification" call in case of:
- Application.onLowMemory
- Application.onTrimMemory

Also maybe:
- in case OutOfMemoryError in classes, which already handles this exception
- preventive check free heap size (Runtime.getRuntime().freeMemory()) and call when it is low.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-25075_62991/0001-v8-LowMemoryNotification.patch">0001-v8-LowMemoryNotification.patch</td></td><td>2017-08-07T12:13:05.000+0000</td><td>4913</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sergey Volkov 2018-08-02

   In TIMOB-26242 implemented call "LowMemoryNotification".
   This issue could be closed.</li>
<li>Hans Kn√∂chel 2018-08-02

   Thanks for your ongoing eagle-eyes! Resolving as <code>Duplicate</code>.</li>
<li>Eric Merriman  2018-08-06

   Closing as a duplicate. If this is in error, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25075.json">JSON Source</a></p>