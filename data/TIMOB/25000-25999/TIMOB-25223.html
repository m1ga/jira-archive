---
title: "[TIMOB-25223] Android: ListView in front of other views (wrong z-order)"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-09-07T01:22:20.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.2.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>android, automated, listview, regression</td></tr>
<tr><th>Reporter</th><td>Michael Gangolf</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-09-01T15:56:27.000+0000</td></tr>
<tr><th>Updated</th><td>2017-09-15T23:15:40.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
When creating a ListView and adding a loading indicator (view + ActivitiyIndicator) after the ListView, the loading indicator is not visible with 6.2.0.RC

*Code:*
<code><pre>
var win = Ti.UI.createWindow({
		backgroundColor: 'gray'
	}),
	list = Ti.UI.createListView({
		separatorColor: "transparent",
		templates: {
			template: {
				childTemplates: [{
					type: 'Ti.UI.View',
					bindId: 'item',
					properties: {
						top: '5dp',
						bottom: '5dp',
						width: '200dp',
						height: '50dp',
						borderWidth: '8dp',
						backgroundColor: 'green'
					}
				}]
			}
		},
		defaultItemTemplate: 'template'
	}),
	section = Ti.UI.createListSection(),
	items = [];

for (var i = 0; i &lt; 24; i++) {
	var colour = i % 2 ? 'green' : 'yellow';
	items.push({
		item: {
			backgroundColor: colour,
			borderColor: colour
		}
	});
}

section.setItems(items);
list.setSections([section]);
win.add(list);

var fgview = Ti.UI.createView({
	width: Ti.UI.FILL,
	height: Ti.UI.FILL,
	backgroundColor: "rgba(0,0,0,0.5)"
});
var act = Ti.UI.createActivityIndicator({});

fgview.add(act);
win.add(fgview);
act.show();
win.open();
</pre></code>

*Results:*
6.1.2.GA: Black View + ActivityIndicator shown in front of the ListView
6.2.0.RC: ListView stays in front; black view + ActivityIndicator not visible

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2017-09-04

   It's not just related to <code>ActivityIndicator</code>, it's related to the <code>height</code> of the view. It seems <code>Ti.UI.FILL</code> is not being calculated correctly?
   
   *TEST CASE*
   <code><pre>
   var win = Ti.UI.createWindow({
   		backgroundColor: 'gray'
   	}),
   	list = Ti.UI.createListView(),
   	section = Ti.UI.createListSection({
   		items: [
   			{properties: {title: 'Square'}},
   			{properties: {title: 'Circle'}},
   			{properties: {title: 'Triangle'}}
   		]
   	}),
   	view = Ti.UI.createView({
   		width: Ti.UI.FILL,
   		height: 200, //Ti.UI.FILL,
   		backgroundColor: 'red'
   	});
   
   list.setSections([section]);
   win.add([list, view]);
   
   win.open();
   </pre></code></li>
<li>Gary Mathews 2017-09-04

   </li>
<li>Gary Mathews 2017-09-04

   -master-: <a href="https://github.com/appcelerator/titanium_mobile/pull/9397" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9397</a>
   -6_2_X-: <a href="https://github.com/appcelerator/titanium_mobile/pull/9396" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9396</a></li>
<li>Gary Mathews 2017-09-06

   Continued by:
   
   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/9403" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9403</a>
   6_2_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/9404" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9404</a></li>
<li>Lokesh Choudhary 2017-09-07

   FR Passed. PR's merged.</li>
<li>Lokesh Choudhary 2017-09-07

   Verified the fix in SDK 6.2.0.v20170907070223 & 7.0.0.v20170907070720.
   Closing.
   Studio Ver: 4.9.1.201707200100
   OS Ver: 10.12.3
   Xcode Ver: Xcode 8.3.3
   Appc NPM: 4.2.9
   Appc CLI: 6.2.4-9
   Ti CLI Ver: 5.0.14
   Alloy Ver: 1.9.13
   Node Ver: 6.11.2
   Java Ver: 1.8.0_101
   Devices: ⇨ google Nexus 5 — Android 6.0.1
   ⇨ google Pixel — Android 7.1.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-25223.json">JSON Source</a></p>