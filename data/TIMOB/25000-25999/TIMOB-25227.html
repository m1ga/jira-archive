---
title: "[TIMOB-25227] iOS: Building app with module that contains a framework fails on 6.2.0"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-09-07T22:51:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.0.0, Release 6.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.2.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>ios, regression</td></tr>
<tr><th>Reporter</th><td>Hans Kn√∂chel</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2017-09-05T10:27:52.000+0000</td></tr>
<tr><th>Updated</th><td>2017-09-07T23:36:56.000+0000</td></tr>
</table>

<h3>Description</h3>

When building an app project (or CI build like in my case), the build fails on 6.2.0/master because of an error in the new framework-hook (TIMOB-20557). See the full build log in the [travis-build](<a href="https://travis-ci.org/hansemannn/titanium-google-maps)" rel="nofollow" target="_blank">https://travis-ci.org/hansemannn/titanium-google-maps)</a> of my Ti.GoogleMaps module:
<code><pre>
[ERROR] An error occurred during build after 758ms
[ERROR] Error: Unknown framework type:
[ERROR] Mach-O universal binary with 4 architectures: [i386: Mach-O object i386] [x86_64: Mach-O 64-bit object x86_64] [arm_v7: Mach-O object arm_v7] [arm64: Mach-O 64-bit object arm64]
[ERROR] /Users/travis/Library/Application Support/Titanium/modules/iphone/ti.googlemaps/3.9.0/platform/GooglePlacePicker.framework/GooglePlacePicker (for architecture i386):	Mach-O object i386
[ERROR] /Users/travis/Library/Application Support/Titanium/modules/iphone/ti.googlemaps/3.9.0/platform/GooglePlacePicker.framework/GooglePlacePicker (for architecture x86_64):	Mach-O 64-bit object x86_64
[ERROR] /Users/travis/Library/Application Support/Titanium/modules/iphone/ti.googlemaps/3.9.0/platform/GooglePlacePicker.framework/GooglePlacePicker (for architecture armv7):	Mach-O object arm_v7
[ERROR] /Users/travis/Library/Application Support/Titanium/modules/iphone/ti.googlemaps/3.9.0/platform/GooglePlacePicker.framework/GooglePlacePicker (for architecture arm64):	Mach-O 64-bit object arm64
</pre></code>

It looks like the framework-hook does not pick up the "GooglePlacePicker" framework correctly. It was just added a day ago and might have a different structure than before. Google also warned developers who are manually integrating frameworks:
{quote}
Note: - The layout of the static frameworks has changed. There is no longer a Versions directory. The contents of Versions/A has been moved to the root directory of the framework. Developers who manually integrate frameworks with their project should take additional care during the upgrade.
{quote}

We should get this under control in 6.2.0.GA so people do not experience module-related crashes. Please note that this module still using the manual framework linking in the module.xcconfig (for backwards-compatibility with older SDK's).

Investgating it more further, it turns out that the error is thrown by the following lines, not being able to detect the framework type:
<code><pre>
if (stdout.indexOf('current ar archive') !== -1) {
    type = FRAMEWORK_TYPE_STATIC;
} else if (stdout.indexOf('dynamically linked shared library') !== -1) {
    type = FRAMEWORK_TYPE_DYNAMIC;
} else {
    return reject(new Error('Unknown framework type:\n' + stdout));
}
</pre></code>
Which makes sense when you look into the type (Mach-O) that needs to be handled.

<h3>Comments</h3>

<ol>
<li>Jan Vennemann 2017-09-05

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/9399" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9399</a>
   PR (6_2_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/9400" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9400</a></li>
<li>Eric Wieber 2017-09-07

   Review passed; merged.</li>
<li>Eric Wieber 2017-09-07

   Verified in SDK builds 6.2.0.v20170907160102 & 7.0.0.v20170907160213</li>
</ol>


<p><a href="/TIMOB/TIMOB-25227.json">JSON Source</a></p>