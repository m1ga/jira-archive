---
title: "[TIMOB-25281] Windows: Ti.Media.saveToPhotoGallery does not accept a blob"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-11-17T16:53:38.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.0.0, Release 6.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.0.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>parity</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-09-14T15:31:46.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:49:37.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

Calling Ti.Media.saveToPhotoGallery with a blob crashes an application, when running normally the app crashes with no error. Running in debug from VS shows that the error is occurring [here](<a href="https://github.com/appcelerator/titanium_mobile_windows/blob/91c53831aa37f46cda9ec9d0140d444fced41a3e/Source/Media/src/Media.cpp#L378)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/blob/91c53831aa37f46cda9ec9d0140d444fced41a3e/Source/Media/src/Media.cpp#L378)</a> as media is empty

<code><pre>
var win = Ti.UI.createWindow();

var view = Ti.UI.createView({
    backgroundColor: 'red',
    width: 400,
    height: 400,
    borderRadius: 200
});


win.add(view);
win.open();

view.toImage(function(image) {
    console.log('image done');
    console.log(image.length)
    Ti.Media.saveToPhotoGallery(image, {
        success: function(e) {
            console.log('success');
        },
        error: function(e) {
            console.log(' error');
        }
    });
});
</pre></code>

<h4>Steps to reproduce</h4>

<h4>Add to an existing app.js and build for Windows</h4>


<h4>Actual</h4>

App crashes

<h4>Expected</h4>

App shouldn't crash, red circle should be written to gallery

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2017-10-04

   master: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1133" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1133</a></li>
<li>Eric Merriman  2018-08-06

   Cleaning up older fixed issues. If this issue should not have been closed as fixed, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25281.json">JSON Source</a></p>