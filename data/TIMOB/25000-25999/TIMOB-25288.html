---
title: "[TIMOB-25288] Android: addAnnotations in Ti.Map crashes app"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-09-19T08:14:56.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.2.2</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>addAnnotations, android, annotations, maps, module, ti.map</td></tr>
<tr><th>Reporter</th><td>josh.mocek</td></tr>
<tr><th>Assignee</th><td>Yordan Banev</td></tr>
<tr><th>Created</th><td>2017-09-14T21:08:22.000+0000</td></tr>
<tr><th>Updated</th><td>2017-09-26T17:37:16.000+0000</td></tr>
</table>

<h3>Description</h3>

When trying to use the 'addAnnotations' function to add map annotations it causes the android application to fail. iOS seems to work fine. Below I have made an extremely simple project using the addAnnotation(s) functions to demonstrate. The only time I have had an annotation successfully added to a view on android is if the annotation is set when the map view is created. This is happening with version 3.3.0 of ti.map and appcelerator versions 6.2.0 and 6.1.2. The android phone is running marshmallow.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25288_63265/alloy.js">alloy.js</td></td><td>2017-09-14T20:58:50.000+0000</td><td>1696</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25288_63264/index.js">index.js</td></td><td>2017-09-14T20:58:56.000+0000</td><td>1488</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25288_63263/index.xml">index.xml</td></td><td>2017-09-14T20:59:01.000+0000</td><td>86</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25288_63266/modules.zip">modules.zip</td></td><td>2017-09-14T20:58:41.000+0000</td><td>3025624</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Pietro Granati 2017-09-15

   Here same problem! App crash! </li>
<li>Hans Knöchel 2017-09-15

   We are working on a fix for Ti.Map 3.3.1, please use the pre 3.3.0 version until then, thank you!</li>
<li>Yordan Banev 2017-09-15

   [~josh.mocek], [~Pietro] Could you, please, attach the sources from which you have built Ti.Map module?</li>
<li>Mike Stancliffe 2017-09-15

   Same problem here, we didn't build from source we used the packaged module from Axway</li>
<li>josh.mocek 2017-09-15

   @Yordan Banev <a href="https://github.com/benbahrenburg/Ti.GA." rel="nofollow" target="_blank">https://github.com/benbahrenburg/Ti.GA.</a></li>
<li>Pietro Granati 2017-09-18

   I also didn't use source but the package module</li>
<li>Yordan Banev 2017-09-18

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/9442" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9442</a></li>
<li>Gary Mathews 2017-09-18

   ti.map: <a href="https://github.com/appcelerator-modules/ti.map/pull/214" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/214</a>
   3.3.1: <a href="https://github.com/appcelerator-modules/ti.map/releases/tag/android-3.3.1" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/releases/tag/android-3.3.1</a>
   
   *TEST CASE*
   <code><pre>
   alert(require('ti.map').isGooglePlayServicesAvailable());
   </pre></code></li>
<li>Hans Knöchel 2017-09-19

   For everyone having this issue: You can use the new module version 3.3.1 today already, no need to wait for the 6.2.1 release, thanks!</li>
<li>Lokesh Choudhary 2017-09-20

    Closing ticket as version 3.3.1 has the fix.</li>
<li>Muhammad Ahmed Fahad 2017-09-25

    Hi Lokesh, the app doesn't crash anymore but when I add the annotation the map just goes blank.
    
    Could you kindly check if if this is the case on your side as well??
    
    I am using ti.map version 3.3.1.</li>
<li>Lokesh Choudhary 2017-09-26

    [~fahad86], I checked it again but, for me the map does not go blank with 3.3.1 & SDK 6.2.2.GA.
    Can you provide some details about SDK, android version etc.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25288.json">JSON Source</a></p>