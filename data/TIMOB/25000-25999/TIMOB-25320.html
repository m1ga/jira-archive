---
title: "[TIMOB-25320] iOS: CLI errors incorrectly when xcode eula not accepted"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-09-19T21:29:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.2.1</td></tr>
<tr><th>Components</th><td>iOS, Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2017-09-19T19:56:58.000+0000</td></tr>
<tr><th>Updated</th><td>2017-09-19T22:42:50.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>
 
I updated to the latest xcode and forgot to accept the eula, when building I was met with <code>\[ERROR] simctl list failed after 4 tries</code>, I tried to check my info (appc ti info -t ios) and got the below

<code><pre>
2017-09-19T19:52:46.288Z | ERROR  | Cannot read property 'forEach' of undefined
2017-09-19T19:52:46.288Z | TRACE  | TypeError: Cannot read property 'forEach' of undefined
    at /Users/awam/.appcelerator/install/6.2.4/package/node_modules/titanium/lib/commands/info.js:620:22
    at /Users/awam/.appcelerator/install/6.2.4/package/node_modules/titanium/node_modules/async/dist/async.js:3853:9
    at /Users/awam/.appcelerator/install/6.2.4/package/node_modules/titanium/node_modules/async/dist/async.js:484:16
    at iteratorCallback (/Users/awam/.appcelerator/install/6.2.4/package/node_modules/titanium/node_modules/async/dist/async.js:1082:13)
    at /Users/awam/.appcelerator/install/6.2.4/package/node_modules/titanium/node_modules/async/dist/async.js:988:16
    at /Users/awam/.appcelerator/install/6.2.4/package/node_modules/titanium/node_modules/async/dist/async.js:3850:13
    at apply (/Users/awam/.appcelerator/install/6.2.4/package/node_modules/titanium/node_modules/async/dist/async.js:41:25)
    at /Users/awam/.appcelerator/install/6.2.4/package/node_modules/titanium/node_modules/async/dist/async.js:76:12
    at Section.<anonymous> (/Users/awam/Library/Application Support/Titanium/mobilesdk/osx/6.2.0.GA/iphone/cli/lib/info.js:43:11)
    at /Users/awam/Library/Application Support/Titanium/mobilesdk/osx/6.2.0.GA/node_modules/ioslib/index.js:122:12
</pre></code>

Logging err from [here](<a href="https://github.com/appcelerator/titanium_mobile/blob/4c4d67515646aa7b26db73013ba306d0dcd19b8d/iphone/cli/lib/info.js#L40)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/4c4d67515646aa7b26db73013ba306d0dcd19b8d/iphone/cli/lib/info.js#L40)</a> gives the below
<code><pre>
Error: simctl list failed after 4 tries
    at /Users/awam/Library/Application Support/Titanium/mobilesdk/osx/6.2.0.GA/node_modules/ioslib/lib/simctl.js:220:21
    at /Users/awam/Library/Application Support/Titanium/mobilesdk/osx/6.2.0.GA/node_modules/ioslib/node_modules/async/dist/async.js:906:16
    at next (/Users/awam/Library/Application Support/Titanium/mobilesdk/osx/6.2.0.GA/node_modules/ioslib/node_modules/async/dist/async.js:5174:18)
    at /Users/awam/Library/Application Support/Titanium/mobilesdk/osx/6.2.0.GA/node_modules/ioslib/lib/simctl.js:185:13
    at /Users/awam/Library/Application Support/Titanium/mobilesdk/osx/6.2.0.GA/node_modules/ioslib/node_modules/async/dist/async.js:906:16
    at next (/Users/awam/Library/Application Support/Titanium/mobilesdk/osx/6.2.0.GA/node_modules/ioslib/node_modules/async/dist/async.js:5174:18)
    at /Users/awam/Library/Application Support/Titanium/mobilesdk/osx/6.2.0.GA/node_modules/ioslib/lib/simctl.js:584:13
    at ChildProcess.<anonymous> (/Users/awam/Library/Application Support/Titanium/mobilesdk/osx/6.2.0.GA/node_modules/node-appc/lib/subprocess.js:60:3)
</pre></code>

<code><pre>
/Applications/Xcode.app/Contents/Developer/usr/bin/simctl list --json
dyld: Library not loaded: /Library/Developer/PrivateFrameworks/CoreSimulator.framework/Versions/A/CoreSimulator
  Referenced from: /Applications/Xcode.app/Contents/Developer/usr/bin/simctl
  Reason: image not found
Abort trap: 6
</pre></code>

<h4>Steps to reproduce</h4>

<h4>Update to xcode 9, do not accept the eula</h4>
<h4>Run a build <code>appc run -p ios</code> </h4>
<h4>Run info <code>appc ti info -t ios</code></h4>

<h4>Actual</h4>

Errors above

<h4>Expected</h4>

I believe we used to tell people the eula wasn't accepted

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2017-09-19

   I was able to go back to the old behaviour by changing to <code>if (!xcodeInfo.selectedXcode || !xcodeInfo.selectedXcode.eulaAccepted) {</code> here <a href="https://github.com/appcelerator/ioslib/blob/ea1ac3e29fba551413b9b7ccad9ee3ad69913dff/lib/simulator.js#L174" rel="nofollow" target="_blank">https://github.com/appcelerator/ioslib/blob/ea1ac3e29fba551413b9b7ccad9ee3ad69913dff/lib/simulator.js#L174</a></li>
<li>Ewan Harris 2017-09-19

   Just in case the above is correct and Barber approved <a href="https://github.com/appcelerator/ioslib/pull/67" rel="nofollow" target="_blank">https://github.com/appcelerator/ioslib/pull/67</a></li>
<li>Ewan Harris 2017-09-19

   Ti SDK master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/9457" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9457</a>
   Ti SDK 6_2_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/9455" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9455</a>
   Ti SDK 6_2_1 PR <a href="https://github.com/appcelerator/titanium_mobile/pull/9456" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9456</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-25320.json">JSON Source</a></p>