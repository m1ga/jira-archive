{
	"id": "169870",
	"key": "TIMOB-25336",
	"fields": {
		"issuetype": {
			"id": "1",
			"description": "A problem which impairs or prevents the functions of the product.",
			"name": "Bug",
			"subtask": false
		},
		"project": {
			"id": "10153",
			"key": "TIMOB",
			"name": "Titanium SDK/CLI",
			"projectCategory": {
				"id": "10100",
				"description": "Titanium and related SDKs used in application development",
				"name": "Client"
			}
		},
		"fixVersions": [],
		"resolution": {
			"id": "11",
			"description": "Is not a bug in our product",
			"name": "Not Our Bug"
		},
		"resolutiondate": "2020-03-10T17:25:22.000+0000",
		"created": "2017-09-22T19:05:44.000+0000",
		"priority": {
			"name": "Critical",
			"id": "1"
		},
		"labels": [
			"applebug",
			"engReviewed",
			"ios11",
			"openphotogallery"
		],
		"versions": [
			{
				"id": "19542",
				"description": "",
				"name": "Release 6.2.2",
				"archived": false,
				"released": true,
				"releaseDate": "2017-09-19"
			},
			{
				"id": "18414",
				"description": "",
				"name": "Release 6.2.0",
				"archived": false,
				"released": true,
				"releaseDate": "2017-09-13"
			},
			{
				"id": "19922",
				"description": "",
				"name": "Release 6.2.1",
				"archived": false,
				"released": true,
				"releaseDate": "2017-09-18"
			}
		],
		"issuelinks": [
			{
				"id": "57487",
				"type": {
					"id": "10003",
					"name": "Relates",
					"inward": "relates to",
					"outward": "relates to"
				},
				"outwardIssue": {
					"id": "173300",
					"key": "TIMOB-26925",
					"fields": {
						"summary": "IOS: select Image from gallery but got cropped unexpected",
						"status": {
							"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
							"name": "Closed",
							"id": "6",
							"statusCategory": {
								"id": 3,
								"key": "done",
								"colorName": "green",
								"name": "Done"
							}
						},
						"priority": {
							"name": "High",
							"id": "2"
						},
						"issuetype": {
							"id": "1",
							"description": "A problem which impairs or prevents the functions of the product.",
							"name": "Bug",
							"subtask": false
						}
					}
				}
			}
		],
		"assignee": {
			"name": "vijaysingh",
			"key": "vijaysingh",
			"displayName": "Vijay Singh",
			"active": true,
			"timeZone": "America/Los_Angeles"
		},
		"updated": "2020-03-10T17:25:22.000+0000",
		"status": {
			"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
			"name": "Closed",
			"id": "6",
			"statusCategory": {
				"id": 3,
				"key": "done",
				"colorName": "green",
				"name": "Done"
			}
		},
		"components": [
			{
				"id": "10206",
				"name": "iOS",
				"description": "iOS Platform"
			}
		],
		"description": "If you open the devices photos with allowEditing: true you are allowed to crop the photo in device. I have found that with the update to iOS 11 all of my crops do not match what the user as set in the crop window. \r\n\r\nAttached is a simple code to edit a photo and display it. ",
		"attachment": [
			{
				"id": "63348",
				"filename": "1.png",
				"author": {
					"name": "hknoechel",
					"key": "hansknoechel",
					"displayName": "Hans Knöchel",
					"active": true,
					"timeZone": "Europe/Berlin"
				},
				"created": "2017-09-23T18:08:09.000+0000",
				"size": 1236501,
				"mimeType": "image/png"
			},
			{
				"id": "63349",
				"filename": "2.png",
				"author": {
					"name": "hknoechel",
					"key": "hansknoechel",
					"displayName": "Hans Knöchel",
					"active": true,
					"timeZone": "Europe/Berlin"
				},
				"created": "2017-09-23T18:08:24.000+0000",
				"size": 2187749,
				"mimeType": "image/png"
			},
			{
				"id": "63350",
				"filename": "3.png",
				"author": {
					"name": "hknoechel",
					"key": "hansknoechel",
					"displayName": "Hans Knöchel",
					"active": true,
					"timeZone": "Europe/Berlin"
				},
				"created": "2017-09-23T18:08:18.000+0000",
				"size": 1845384,
				"mimeType": "image/png"
			},
			{
				"id": "63347",
				"filename": "app.js",
				"author": {
					"name": "gwolz",
					"key": "gwolz",
					"displayName": "Grant Wolz ",
					"active": true,
					"timeZone": "America/Los_Angeles"
				},
				"created": "2017-09-22T19:01:00.000+0000",
				"size": 949,
				"mimeType": "application/x-javascript"
			},
			{
				"id": "63351",
				"filename": "B1.png",
				"author": {
					"name": "hknoechel",
					"key": "hansknoechel",
					"displayName": "Hans Knöchel",
					"active": true,
					"timeZone": "Europe/Berlin"
				},
				"created": "2017-09-23T18:11:50.000+0000",
				"size": 2407618,
				"mimeType": "image/png"
			},
			{
				"id": "63352",
				"filename": "B2.png",
				"author": {
					"name": "hknoechel",
					"key": "hansknoechel",
					"displayName": "Hans Knöchel",
					"active": true,
					"timeZone": "Europe/Berlin"
				},
				"created": "2017-09-23T18:11:48.000+0000",
				"size": 1252082,
				"mimeType": "image/png"
			},
			{
				"id": "63369",
				"filename": "captured_image.png",
				"author": {
					"name": "vijaysingh",
					"key": "vijaysingh",
					"displayName": "Vijay Singh",
					"active": true,
					"timeZone": "America/Los_Angeles"
				},
				"created": "2017-09-28T09:37:14.000+0000",
				"size": 401444,
				"mimeType": "image/png"
			},
			{
				"id": "63370",
				"filename": "crop_rect.png",
				"author": {
					"name": "vijaysingh",
					"key": "vijaysingh",
					"displayName": "Vijay Singh",
					"active": true,
					"timeZone": "America/Los_Angeles"
				},
				"created": "2017-09-28T09:37:14.000+0000",
				"size": 885356,
				"mimeType": "image/png"
			},
			{
				"id": "63368",
				"filename": "TestCameraImage.zip",
				"author": {
					"name": "vijaysingh",
					"key": "vijaysingh",
					"displayName": "Vijay Singh",
					"active": true,
					"timeZone": "America/Los_Angeles"
				},
				"created": "2017-09-28T09:37:02.000+0000",
				"size": 33756,
				"mimeType": "application/zip"
			}
		],
		"flagged": false,
		"summary": "iOS 11: openPhotoGallery/allowEditing does not crop correctly. ",
		"creator": {
			"name": "gwolz",
			"key": "gwolz",
			"displayName": "Grant Wolz ",
			"active": true,
			"timeZone": "America/Los_Angeles"
		},
		"subtasks": [],
		"reporter": {
			"name": "gwolz",
			"key": "gwolz",
			"displayName": "Grant Wolz ",
			"active": true,
			"timeZone": "America/Los_Angeles"
		},
		"environment": "Mac OS Sierra, xCode 9, Appceletrator SDK 6.2.2, Studio 4.9.1.201707200100, iOS 11, iPhone 6s Device, iOS simulator. ",
		"comment": {
			"comments": [
				{
					"id": "428374",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "hey there, I tried reproducing the issue was unable to. Tested on an iPhone X and the images looks correctly (although in the example you were forcing a square-image which would stretch the image in some cases, e.g. for images where the width is greater than the height). If you can attach your results, we may be able to help, thx! I've added three images to show the select->crop->display flow between iOS < 11 and iOS 11.\r\n\r\n*EDIT*: However, B1 and B2 demonstrate the incorrect behavior, which is interesting because it's not for all kind of crops. Moving to TIMOB for now, but may even be an iOS 11 issue.\r\n\r\n*EDIT 2*: Ok, here is the issue: Edited images usually come/came in a lower quality (640x640px), so we introduced a manual cropping in TIMOB-7511 which now looks like it's causing issues - probably around scaling. Why ever this changed between iOS < 11 and iOS 11.\r\n\r\nThese are the differences between iOS 10.3.1 and iOS 11 (same device, same photo):\r\n\r\n*iOS 10.3.1*:\r\noriginal: <UIImage: 0x608000289c90> size {4288, 2848} \r\nedited: <UIImage: 0x60800009bda0> size {1239, 1239}\r\nedited rect: NSRect: {{0, 0}, {2686, 2686}}\r\n\r\n*iOS 11*:\r\noriginal: <UIImage: 0x60c0000a6000> size {4288, 2848}\r\nedited: <UIImage: 0x60c0000a5dc0> size {1242, 1209}\r\nedited rect: NSRect: {{0, 0}, {1879, 1834}}\r\n",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2017-09-23T17:36:50.000+0000",
					"updated": "2017-09-23T18:45:33.000+0000"
				},
				{
					"id": "428376",
					"author": {
						"name": "gwolz",
						"key": "gwolz",
						"displayName": "Grant Wolz ",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Yes B1 and B2 shows the exact problem that I have been having in my testing. Glad you guys are working on it!",
					"updateAuthor": {
						"name": "gwolz",
						"key": "gwolz",
						"displayName": "Grant Wolz ",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2017-09-23T20:02:01.000+0000",
					"updated": "2017-09-23T20:02:01.000+0000"
				},
				{
					"id": "428562",
					"author": {
						"name": "vijaysingh",
						"key": "vijaysingh",
						"displayName": "Vijay Singh",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "I have verified the behavior in native app (attached “TestCameraImage.zip”) for iOS11 and found that in native app also it is behaving same . I have attached two screenshots - \r\n1. crop_rect.png - Screenshot taken when image is selected and open in crop mode.\r\n2. captured_image.png - Screenshot taken when “choose” button selected and cropped image set to image view.\r\n\r\nIf you see ‘captured_image.png’, you will see that actually captured image has came from area bounded between two horizontal red lines in ‘crop_rect.png’. Ideally it should capture image from default crop rectangle area which can be seen in ‘crop_rect.png’.\r\n\r\nIt looks cropping  rectangle is getting translated in vertical upward direction, which is problem with iOS 11.\r\n I think apple will correct in upcoming  releases of  iOS 11.\r\nThanks!",
					"updateAuthor": {
						"name": "vijaysingh",
						"key": "vijaysingh",
						"displayName": "Vijay Singh",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2017-09-28T09:38:07.000+0000",
					"updated": "2017-09-28T09:38:07.000+0000"
				},
				{
					"id": "428573",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "Thanks for the analysis Vijay! I've filed a bug-report at Apple: https://openradar.appspot.com/radar?id=4946037680635904",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2017-09-28T15:51:26.000+0000",
					"updated": "2017-09-28T15:51:26.000+0000"
				},
				{
					"id": "447473",
					"author": {
						"name": "vijaysingh",
						"key": "vijaysingh",
						"displayName": "Vijay Singh",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Checked on iOS 12.2 / Xcode 10.2 still issue is there. It looks apple has not fixed it yet.",
					"updateAuthor": {
						"name": "vijaysingh",
						"key": "vijaysingh",
						"displayName": "Vijay Singh",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2019-04-04T17:37:57.000+0000",
					"updated": "2019-04-04T17:37:57.000+0000"
				},
				{
					"id": "454640",
					"author": {
						"name": "vijaysingh",
						"key": "vijaysingh",
						"displayName": "Vijay Singh",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Verified it in iOS 13.x . It is working fine. Apple has fixed the issue.",
					"updateAuthor": {
						"name": "vijaysingh",
						"key": "vijaysingh",
						"displayName": "Vijay Singh",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2020-03-10T17:24:59.000+0000",
					"updated": "2020-03-10T17:24:59.000+0000"
				}
			],
			"maxResults": 13,
			"total": 13,
			"startAt": 0
		}
	}
}