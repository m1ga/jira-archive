---
title: "[TIMOB-25364] iOS: CFBundleTypeIconFiles not used in iOS11"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2019-05-06T21:48:18.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios, regression</td></tr>
<tr><th>Reporter</th><td>Raef Akehurst</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2017-10-03T03:20:14.000+0000</td></tr>
<tr><th>Updated</th><td>2019-05-06T21:48:18.000+0000</td></tr>
</table>

<h3>Description</h3>

I have an app that recognizes ".picsafe" files (my own custom extension). Here is an extract from my tiapp.xml file. 

<code><pre>
&lt;key&gt;CFBundleDocumentTypes&lt;/key&gt;
        &lt;array&gt;
          &lt;dict&gt;
            &lt;key&gt;CFBundleTypeName&lt;/key&gt;
            &lt;string&gt;PicSafe File&lt;/string&gt;
            &lt;key&gt;CFBundleTypeIconFiles&lt;/key&gt;
            &lt;array&gt;
              &lt;string&gt;Document-picsafe-320.png&lt;/string&gt;
              &lt;string&gt;Document-picsafe-64.png&lt;/string&gt;
              &lt;string&gt;Document-picsafe-58.png&lt;/string&gt;
              &lt;string&gt;Document-picsafe-29.png&lt;/string&gt;
            &lt;/array&gt;
            &lt;key&gt;LSItemContentTypes&lt;/key&gt;
            &lt;array&gt;
              &lt;string&gt;com.picsafe.med&lt;/string&gt;
            &lt;/array&gt;
            &lt;key&gt;LSHandlerRank&lt;/key&gt;
            &lt;string&gt;Owner&lt;/string&gt;
            &lt;key&gt;CFBundleTypeRole&lt;/key&gt;
            &lt;string&gt;Viewer&lt;/string&gt;
            &lt;key&gt;public.filename-extension&lt;/key&gt;
            &lt;string&gt;picsafe&lt;/string&gt;
          &lt;/dict&gt;
        &lt;/array&gt;
</pre></code>

When I build to a device running iOS 11, it does not use the image specified. It seems to use the app icon. When I build to a device running iOS 10, the correct image is displayed. See the images attached (iOS 11 is running on the device on the left and iOS 10 is running on the device on the right).

Note, I tried deleting my app on the iOS 11 device and you can see that it uses the Telegram icon, and it would appear that it is using the correct CFBundleTypeIconFiles icon for Telegram. That leads me to believe it might be a Titanium issue. 
 


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-25364_63381/IMG_0086.JPG">IMG_0086.JPG</td></td><td>2017-10-03T03:15:16.000+0000</td><td>1174618</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-25364_63382/IMG_0087.JPG">IMG_0087.JPG</td></td><td>2017-10-03T03:12:20.000+0000</td><td>1189123</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Hans Kn√∂chel 2017-10-03

   Hey there! Although we did not change anything related to icon-files over the last months, so it might actually be change of configuration between iOS 10 and iOS 11 that you may need to change in your plist as well. We will still try to investigate it for you and come back once we know more, thanks! 
   
   *EDIT*: After a quick research, you might miss required icon-sizes *or* Apple changed the way icons need to be named. You may download the Telegram IPA file and extract it to see their actual Info.plist and referenced resources. May that help?</li>
<li>Raef Akehurst 2017-10-03

   Hi Hans. Thanks for your help with this. I have done some more research.
   
   According to the Apple documentation (<a href="https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-SW9)" rel="nofollow" target="_blank">https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-SW9)</a> I have the correct file types and there is no mention of this changing for iOS 11. Again, according to the Apple documentation, you can specify the file names in the info.plist. 
   
   I looked at the Telegram source code (it is open source - <a href="https://github.com/peter-iakovlev/Telegram)" rel="nofollow" target="_blank">https://github.com/peter-iakovlev/Telegram)</a> and they don't even use <code>CFBundleTypeIconFiles</code>, they simply fall back to using the app icon. As to why it does not go full width like mine does I don't know.
   
   Next step, I uninstalled Telegram and my app so now it tried to open my custom file in Slack. That icon also looks good. 
   
   Next step. I removed the files from within <code>CFBundleTypeIconFiles</code> on my app. It places the app icon in the image ... and it looks good on iOS 11! It is not full width. 
   
   Next step. I installed on a device running iOS 10 and it also looks good. 
   
   Conclusion. It is not a Titanium issue, it is an Apple iOS 11 issue. I have a solution now so I think we can mark this one as closed.
   
   
   
   
   
   </li>
<li>Alan Hutton 2019-05-06

   Closing per developer comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25364.json">JSON Source</a></p>