---
title: "[TIMOB-25426] Hyperloop: iOS - Metabase binary has wrong file-permissions, causing build to fail"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-10-24T15:41:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Hyperloop 2.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Hyperloop 2.2.1</td></tr>
<tr><th>Components</th><td>Hyperloop, iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2017-10-22T09:52:28.000+0000</td></tr>
<tr><th>Updated</th><td>2017-10-26T00:11:11.000+0000</td></tr>
</table>

<h3>Description</h3>

There are some reports indicating the the Hyperloop metabase binary in <code>plugins/hyperloop/2.2.0/hooks/ios/node_modules/hyperloop-metabase/bin/metabase</code> seems to have incorrect file permissions (<code>\-rw\-rw\-rw\-</code>) that prevents it from being executed. The curious thing is that the Github release has correct ones (<code>-rwxr-xr-x</code>).

So it seems either to be an issue with the dashboard if it's unpacking and repacking it for registry-purposes or with the appc-cli when unpacking it locally after downloading. I remember we had a similar issue a while ago and didn't expect it to come back.

Initially fixed in CLI-1101.

*EDIT*: The real issue is that [this PR](<a href="https://github.com/appcelerator/hyperloop.next/pull/210)" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/pull/210)</a> messed up quite a few node-related build-steps, which we mainly resolved before 2.2.0 already. But it also moved the path of the node_modules from <code>plugins/hyperloop/2.2.0/node_modules/</code> to <code>plugins/hyperloop/2.2.0/ios/node_modules</code> which cannot be detected by the initial [CLI-hook](<a href="https://github.com/appcelerator/appc-cli-titanium/blob/master/plugins/util.js#L554)" rel="nofollow" target="_blank">https://github.com/appcelerator/appc-cli-titanium/blob/master/plugins/util.js#L554)</a> which still searches for the binary in the old directory. We should rather fix the Hyperloop packaging instead of requiring a new appc-cli update. 

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2017-10-22

   cc [~jvennemann], [~pclark], [~emerriman], [~fmiao]</li>
<li>Jan Vennemann 2017-10-23

   PR (master): <a href="https://github.com/appcelerator/hyperloop.next/pull/243" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/pull/243</a>
   PR (2_2_X): <a href="https://github.com/appcelerator/hyperloop.next/pull/244" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/pull/244</a></li>
<li>Hans Knöchel 2017-10-24

   For QE:
   <h4>Copy Hyperloop 2.2.1 into hyperloop-examples and extract it properly</h4>
   <h4>Ensure that the tiapp.xml has set 2.2.1 for the Hyperloop version</h4>
   <h4>Go to <code>plugins/hyperloop/2.2.1/hooks/ios/node_modules/hyperloop-metabase/bin</code></h4>
   <h4>Execute <code>chmod -x metabase</code> (This will force the metabase to have incorrect file-permissions)</h4>
   <h4>Run the app</h4>
   
   Expected behavior: The build does not fail, the permissions are repaired internally</li>
<li>Abir Mukherjee 2017-10-26

   Tested with this environment:
   Node Version: 6.11.5
   NPM Version: 3.10.10
   Mac OS: 10.13
   Appc CLI: 6.3.0-master.16
   Appc CLI NPM: 4.2.10-2
   Titanium SDK version: 6.3.0.v20171018084007
   Appcelerator Studio vers 4.10.0
   Hyperloop 2.2.1 Beta 2
   Xcode 9/iOS 11.0 iPhone 7 Plus
   
   I followed the steps in Han's comments for validation, and I was able to build the app. I also observed that the file whose permissions were changed to the incorrect setting was restored after building the app.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25426.json">JSON Source</a></p>