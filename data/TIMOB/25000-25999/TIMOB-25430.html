---
title: "[TIMOB-25430] Android - java.lang.NoClassDefFoundError in TextFieldProxy"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2017-10-26T17:50:06.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.3.0, Release 6.2.2</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android, Hyperloop</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2017-10-23T11:50:20.000+0000</td></tr>
<tr><th>Updated</th><td>2017-10-26T17:50:06.000+0000</td></tr>
</table>

<h3>Description</h3>

Reported by the community on Slack:
<code><pre>
art: Rejecting re-init on previously-failed class java.lang.Class&lt;ti.modules.titanium.ui.widget.TiUIEditText&gt;: java.lang.NoClassDefFoundError: Failed resolution of: Landroid/support/v4/view/NestedScrollingChild2;
[INFO] :   art:   at org.appcelerator.titanium.view.TiUIView ti.modules.titanium.ui.TextFieldProxy.createView(android.app.Activity) (TextFieldProxy.java:73)
[INFO] :   art:   at org.appcelerator.titanium.view.TiUIView org.appcelerator.titanium.proxy.TiViewProxy.handleGetView() (TiViewProxy.java:499)
[INFO] :   art:   at org.appcelerator.titanium.view.TiUIView org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView() (TiViewProxy.java:485)
[INFO] :   art:   at void org.appcelerator.titanium.proxy.TiViewProxy.realizeViews(org.appcelerator.titanium.view.TiUIView) (TiViewProxy.java:523)
[INFO] :   art:   at org.appcelerator.titanium.view.TiUIView org.appcelerator.titanium.proxy.TiViewProxy.handleGetView() (TiViewProxy.java:507)
[INFO] :   art:   at org.appcelerator.titanium.view.TiUIView org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView() (TiViewProxy.java:485)
[INFO] :   art:   at void org.appcelerator.titanium.proxy.TiViewProxy.realizeViews(org.appcelerator.titanium.view.TiUIView) (TiViewProxy.java:523)
[INFO] :   art:   at org.appcelerator.titanium.view.TiUIView org.appcelerator.titanium.proxy.TiViewProxy.handleGetView() (TiViewProxy.java:507)
[INFO] :   art:   at org.appcelerator.titanium.view.TiUIView org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView() (TiViewProxy.java:485)
[INFO] :   art:   at void org.appcelerator.titanium.proxy.TiViewProxy.realizeViews(org.appcelerator.titanium.view.TiUIView) (TiViewProxy.java:523)
[INFO] :   art:   at org.appcelerator.titanium.view.TiUIView org.appcelerator.titanium.proxy.TiViewProxy.handleGetView() (TiViewProxy.java:507)
[INFO] :   art:   at void android.os.Handler.dispatchMessage(android.os.Message) (Handler.java:105)
</pre></code>
-Not 100 % sure if this is caused by the core or Hyperloop itself-, I requested some more infos from the reporter.

*EDIT*: It seems like it works with SDK 6.2.0 but not with 6.2.2 and 6.3.0.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25430_63464/error.txt">error.txt</td></td><td>2017-10-23T13:07:48.000+0000</td><td>405198</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Mark Henderson 2017-10-23

   So some extra info on the issue (thanks Hans for creating it for me):
   
   Node (just updated today): v6.11.4
   SDK - 6.2.0 (works), 6.2.2 (error above) 6.3.x (error above)
   MacOS
   
   Everything works on 6.2.0, but anything newer and it breaks with the above message repeating many times.. This is on launch after building and deploying the app not during the build.</li>
<li>Hans Knöchel 2017-10-23

   This is very likely related to the scroll-view fixed [~jquick] is already working on, as [~mark.henderson@snagr.co.uk] was able to confirm that the issue happens with a textfield inside a scrollview.</li>
<li>Joshua Quick 2017-10-23

   [~mark.henderson@snagr.co.uk],
   
   Are you using any 3rd party modules? If so, can you list them out please?
   
   I suspect what's happening is that a module your app is using includes an old version of a Google support library which is overwriting the one Titanium uses. As of Titanium 6.2.2, our TextField and TextArea features require Google Support library v26.0.0 which Titanium normally includes with the app. Normally, a module should not include a Google support library to avoid conflicts like this and I suspect one of them is. Thanks.</li>
<li>Mark Henderson 2017-10-24

   Yes I am using the following modules for Android:
    
   <code><pre>
        &lt;module platform="android"&gt;ti.paint&lt;/module&gt;
           &lt;module platform="commonjs"&gt;ti.cloud&lt;/module&gt;
           &lt;module platform="android"&gt;ti.imagefactory&lt;/module&gt;
           &lt;module platform="android"&gt;ti.compression&lt;/module&gt;
           &lt;module platform="android"&gt;dk.napp.downloadmanager&lt;/module&gt;
           &lt;module platform="android"&gt;ti.cloudpush&lt;/module&gt;
           &lt;module platform="android"&gt;fh.imagefactory&lt;/module&gt;
           &lt;module platform="android"&gt;com.boxoutthinkers.reqstorageperm&lt;/module&gt;
           &lt;module platform="android" version="5.5.0"&gt;com.mirasense.scanditsdk&lt;/module&gt;
           &lt;module platform="android"&gt;hyperloop&lt;/module&gt;
   </pre></code>
   
           
   I've also included my AndroidManifest.xml:
   
   
   <code><pre>
   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;manifest android:installLocation="preferExternal" android:uiOptions="splitActionBarWhenNarrow" android:versionCode="143" android:versionName="4.132.0" package="uk.co.foo.foomobile" xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt;
   	&lt;supports-screens android:anyDensity="true" android:largeScreens="true" android:normalScreens="true" android:resizeable="true" android:smallScreens="true" android:xlargeScreens="true"/&gt;
   	&lt;uses-sdk android:targetSdkVersion="25" android:minSdkVersion="16"/&gt;
   	&lt;application android:debuggable="false" android:largeHeap="true" android:icon="@drawable/appicon" android:label="Foo" android:name="FooApplication" android:theme="@style/LightDarkBar"&gt;
   		&lt;service android:name="com.appcelerator.analytics.APSAnalyticsService" android:exported="false"/&gt;
   		&lt;activity android:name="io.intercom.android.sdk.activities.IntercomMessengerActivity"/&gt;
   		&lt;activity android:name="com.intercom.input.gallery.GalleryLightBoxActivity"/&gt;
   		&lt;activity android:name="com.intercom.input.gallery.GalleryInputFullScreenActivity"/&gt;
   	&lt;/application&gt;
   	&lt;meta-data android:name="com.google.android.gms.version" android:value="@integer/google_play_services_version" /&gt;
   	&lt;uses-permission android:name="android.permission.MANAGE_DOCUMENTS"/&gt;
   	&lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/&gt;
   	&lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/&gt;
   	&lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/&gt;
   	&lt;uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/&gt;
   	&lt;uses-permission android:name="android.permission.CAMERA"/&gt;
   	&lt;uses-permission android:name="android.permission.INTERNET"/&gt;
   	&lt;uses-permission android:name="android.permission.GET_ACCOUNTS"/&gt;
   	&lt;uses-permission android:name="android.permission.WAKE_LOCK"/&gt;
   	&lt;uses-permission android:name="com.google.android.c2dm.permission.RECEIVE"/&gt;
   	&lt;uses-permission android:name="android.permission.READ_CALENDAR"/&gt;
   	&lt;uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/&gt;
   	&lt;uses-permission android:name="android.permission.WRITE_CALENDAR"/&gt;
   	&lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;
   	&lt;uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/&gt;
   	&lt;uses-permission android:name="android.permission.READ_PHONE_STATE"/&gt;
   	&lt;uses-permission android:name="android.permission.VIBRATE"/&gt;
   	&lt;uses-permission android:name="android.permission.UPDATE_DEVICE_STATS"/&gt;
   	&lt;uses-permission android:name="uk.co.foo.foomobile.permission.C2D_MESSAGE"/&gt;
   	&lt;permission android:name="uk.co.foo.foomobile.permission.C2D_MESSAGE" android:protectionLevel="signature"/&gt;
   	&lt;uses-feature android:name="android.hardware.camera" android:required="false"/&gt;
   	&lt;uses-feature android:name="android.hardware.telephony" android:required="false"/&gt;
   	&lt;uses-feature android:name="android.hardware.LOCATION" android:required="false"/&gt;
   	&lt;uses-feature android:name="android.hardware.location.GPS" android:required="false"/&gt;
   	&lt;uses-feature android:name="android.hardware.location.NETWORK" android:required="false"/&gt;
   	&lt;uses-feature android:name="android.hardware.TOUCHSCREEN" android:required="false"/&gt;
   &lt;/manifest&gt;
   </pre></code>
   
   I've included the manifest in case there is an issue around the minSDK / targetSDK I'm using as I just had to move targetSDK from 23 > 25 to work with the latest Hyperloop release.</li>
<li>Joshua Quick 2017-10-24

   [~mark.henderson@snagr.co.uk],
   
   I looked up those modules and none of them appear to include Google's support library.
   
   Since you're using hyperloop, are you adding any JAR or AAR files to your project?  That is, do you have any JAR or AAR files under the "./platform/android" directory in your project?
   
   If the answer is "no" to the above question, then we'll need to get a reproducible test project from you, because we're unable to reproduce this issue.</li>
<li>Mark Henderson 2017-10-25

   Sorry I'm HK timezone, so takes a while to reply..
   
   Yes I have AAR files from Intercom (<a href="https://github.com/intercom/intercom-android)" rel="nofollow" target="_blank">https://github.com/intercom/intercom-android)</a>
   
   See screenshot here: <a href="https://imgur.com/a/oJdWC" rel="nofollow" target="_blank">https://imgur.com/a/oJdWC</a>
   
   Maybe the support ones are optional and that's causing the conflict?
   
   Thanks
   </li>
<li>Hans Knöchel 2017-10-25

   Hui, that are many support-libraries. Since 6.2.2 (I think), we bundle the latest support-libraries with the SDK already, so external ones should not be required anymore. If the Intercom SDK requires them, they likely updated their SDK by now as well, so you might wanna try to remove the colliding ones.</li>
<li>Joshua Quick 2017-10-25

   [~mark.henderson@snagr.co.uk],
   
   Please remove the following AAR files from your project:
   - appcompat-v7-25.0.1.aar
   - design-25.0.1.aar
   - recyclerview-v7-25.3.1.aar
   - support-compat-25.3.1.aar
   - support-core-ui-25.3.1.aar
   - support-core-utils-25.3.1.aar
   - support-fragment-25.3.1.aar
   - support-media-compat-25.3.1.aar
   - support-v4-25.3.1.aar
   - support-vector-drawable-25.3.1.aar
   
   The above libraries are already included in Titanium and we'll do our best to keep-up with the newest versions of Google's support libraries. We're currently using v26.0.1 as can be seen here...
   <a href="https://github.com/appcelerator/titanium_mobile/tree/6_3_X/android/modules/appcompat/lib" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/tree/6_3_X/android/modules/appcompat/lib</a>
   <a href="https://github.com/appcelerator/titanium_mobile/tree/6_3_X/android/modules/compat/lib" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/tree/6_3_X/android/modules/compat/lib</a>
   <a href="https://github.com/appcelerator/titanium_mobile/tree/6_3_X/android/modules/design/lib" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/tree/6_3_X/android/modules/design/lib</a>
   
   I'm pretty sure removing the above mentioned AAR files will work. If you can let us know if it solved your problem, then that would be great. Thanks!</li>
<li>Mark Henderson 2017-10-26

   I can confirm that removing those files allows the app to run. Thanks!</li>
</ol>


<p><a href="/TIMOB/TIMOB-25430.json">JSON Source</a></p>