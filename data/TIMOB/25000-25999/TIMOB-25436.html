---
title: "[TIMOB-25436] Hyperloop: iOS - framework-parser should skip "Headers/" in framework if not exists"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-10-24T17:47:57.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Hyperloop 2.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Hyperloop 2.2.1</td></tr>
<tr><th>Components</th><td>Hyperloop, iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2017-10-24T11:42:36.000+0000</td></tr>
<tr><th>Updated</th><td>2017-10-25T23:01:44.000+0000</td></tr>
</table>

<h3>Description</h3>

There is a report on my Ti.Firebase repository on [Github](<a href="https://github.com/hansemannn/titanium-firebase-analytics/issues/2)" rel="nofollow" target="_blank">https://github.com/hansemannn/titanium-firebase-analytics/issues/2)</a> reporting that with Hyperloop 2.2.0, his build fails because Hyperloop tries to generate wrappers for a framework that is referenced via a native module in <code>modules/iphone/*</code>. The real crash then happens, because it tries to loop through the framework's <code>Header/</code> directory which sometimes does not exists, e.g. in the [FirebaseNanoPB.framework](<a href="https://github.com/hansemannn/titanium-firebase-core/tree/master/ios/platform/FirebaseNanoPB.framework)." rel="nofollow" target="_blank">https://github.com/hansemannn/titanium-firebase-core/tree/master/ios/platform/FirebaseNanoPB.framework).</a> 

So there are two related fixes required here:
<h4>Do not process frameworks referenced via native modules, e.g. inside <code>modules/</code> (same for Android, please confirm that this does not happen). A blacklist should help here.</h4>
<h4>Do not try to iterate through the <code>Headers/</code> directory if it does not exist. A simple fs-guard should help here.</h4>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25436_63470/test_firebase.zip">test_firebase.zip</td></td><td>2017-10-24T16:30:42.000+0000</td><td>8658699</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2017-10-24

   PR (master): <a href="https://github.com/appcelerator/hyperloop.next/pull/247" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/pull/247</a>
   PR (2_2_X): <a href="https://github.com/appcelerator/hyperloop.next/pull/248" rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop.next/pull/248</a>
   
   Test-case: 
   * Run the attached app and ensure it does not crash during the build. 
   * Also test with hyperloop-examples for a more advanced test-suite.</li>
<li>Eric Wieber 2017-10-25

   Verified with Hyperloop 2.2.1Beta2. Able to build projects with modules that are referenced via native modules. Tested on iOS and Android using the provided sample project as well as other test projects that contain several modules.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25436.json">JSON Source</a></p>