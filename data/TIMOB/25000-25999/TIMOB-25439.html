---
title: "[TIMOB-25439] Android: Intent extra 'file://' URI not working on Android 7 or higher"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-10-30T20:27:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>Android, File, Intent</td></tr>
<tr><th>Reporter</th><td>Jorge Macias Garcia</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-10-24T11:26:34.000+0000</td></tr>
<tr><th>Updated</th><td>2018-05-16T22:49:59.000+0000</td></tr>
</table>

<h3>Description</h3>

Affects 6.2.2, 6.3.X on Android 8.

It works on Android 7 and 7.1

Android N sets a new restriction in the use of URIs. It must be a Content URI instead a file URI. In that case, if we try to share some file throught nativePath it fails.

Steps:

Read some file in your app (be sure it is placed in the external storage), after that try to share it via intent chooser:


<code><pre>
        var file = Ti.Filesystem.getFile(Ti.Filesystem.externalStorageDirectory, 'example.pdf');
        var intent = Ti.Android.createIntent({
         action: Ti.Android.ACTION_SEND,
         type: file.read()
           .getMimeType()
       });

       intent.addCategory(Ti.Android.CATEGORY_DEFAULT);
       //In this point nativePath is 'file://' URI. It will throw the exception
       intent.putExtraUri(Ti.Android.EXTRA_STREAM, file.nativePath);

       var chooser = Ti.Android.createIntentChooser(intent, 'Share');

       $.win.activity.startActivity(chooser);
</pre></code>


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25439_63469/image-2017-10-24-13-21-26-117.png">image-2017-10-24-13-21-26-117.png</td></td><td>2017-10-24T11:21:27.000+0000</td><td>37577</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25439_63485/IntentActionSendTest.js">IntentActionSendTest.js</td></td><td>2017-10-27T00:30:59.000+0000</td><td>720</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2017-10-26

   This has been addressed here: <a href="https://github.com/appcelerator/titanium_mobile/pull/9559" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9559</a></li>
<li>Joshua Quick 2017-10-27

   The attached  [^IntentActionSendTest.js] script can be used to test Intent.putExtraUri() content provider access.</li>
<li>Gary Mathews 2017-10-27

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/9559" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9559</a>
   6_3_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/9566" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9566</a></li>
<li>Lokesh Choudhary 2017-10-30

   FR passed for both master & backport PR's.
   
   Backport PR merged. Waiting for master merge to get enabled.</li>
<li>Lokesh Choudhary 2017-10-31

   Verified the fix with SDK 6.3.0.v20171030135813.
   
   Studio Ver:     4.10.0.201709271713
   OS Ver:         10.12.3
   Xcode Ver:      Xcode 8.3.3
   Appc NPM:       4.2.10-2
   Appc CLI:       6.3.0-master.15
   Ti CLI Ver:     5.0.14
   Alloy Ver:      1.10.6
   Node Ver:       7.10.1
   Java Ver:       1.8.0_101
   Devices:        ⇨ google Nexus 6P --- Android 8.0.0
                   ⇨ google Nexus 5 --- Android 6.0.1
   </li>
<li>Lokesh Choudhary 2017-11-10

   Master PR merged.
   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25439.json">JSON Source</a></p>