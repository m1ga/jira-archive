---
title: "[TIMOB-25487] Android: Prevent kroll from removing null proxy object pointer"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-11-08T01:14:22.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Gary Mathews</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-11-07T21:48:08.000+0000</td></tr>
<tr><th>Updated</th><td>2017-11-16T00:57:32.000+0000</td></tr>
</table>

<h3>Description</h3>

- Prevent <code>null pointer dereference</code> when removing proxy pointer

*TEST CASE*
- View map and navigate back repeatedly until crash
<code><pre>
var MapModule = require('ti.map'),
    win = Titanium.UI.createWindow({backgroundColor: 'gray'}),
    btn = Ti.UI.createButton({title: 'VIEW MAP'});
    
function viewMap () {
    var win = Ti.UI.createWindow({backgroundColor: 'gray'}),
        mapView = MapModule.createView({
            userLocation: true,
            mapType: MapModule.NORMAL_TYPE,
            animate: true,
            region: {latitude: -33.87365, longitude: 151.20689, latitudeDelta: 0.1, longitudeDelta: 0.1 }
        });
    win.add(mapView);
    win.open();
}

btn.addEventListener('click', function (e) {
	if (Ti.Geolocation.hasLocationPermissions()) {
        viewMap();
    } else {
        Ti.Geolocation.requestLocationPermissions(function (e) {
            if (e.success === true) {
                viewMap();
            } else {
                alert('permissions denied: ' + e.error);
            }
        });
	}
});

win.add(btn);
win.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2017-11-07

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/9587" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9587</a></li>
<li>Lokesh Choudhary 2017-11-16

   Verified the fix in SDK 7.0.0.v20171115153702.
   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25487.json">JSON Source</a></p>