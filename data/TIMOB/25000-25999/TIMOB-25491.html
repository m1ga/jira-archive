---
title: "[TIMOB-25491] iOS: Ti.UI.SearchBar not slide down when set visible a view on top"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-11-28T16:44:01.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.3.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios, iphone</td></tr>
<tr><th>Reporter</th><td>Michele Cavalcanti</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2017-11-08T10:08:58.000+0000</td></tr>
<tr><th>Updated</th><td>2017-11-28T20:30:09.000+0000</td></tr>
</table>

<h3>Description</h3>

Hi, I have a SearchBar inside a Listview and when onChange event is fired i want show a View on top of ListView. With sdk 6.3.0 the Searchbar not slide down but with skd 6.1.2 the SearchBar slide down.

I have attach a complete example code. 

You can test my code with sdk 6.1.2 and 6.3.0 and you can see different behavior  

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25491_63565/bugios.zip">bugios.zip</td></td><td>2017-11-08T09:44:12.000+0000</td><td>10007525</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Vijay Singh 2017-11-21

   PR : <a href="https://github.com/appcelerator/titanium_mobile/pull/9622" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9622</a>
   
   Test Case 1 (TiUIListView) -
   
   <code><pre>
   var rows = [];
   for (var i = 0; i &lt; 20; i++) {
       rows.push({ properties: { title: 'Row '+ i , backgroundColor: 'red', searchableText:'Row '+i}});
   }
   var win = Ti.UI.createWindow({
     title: 'TEST',
     backgroundColor: 'white',
     layout: 'vertical'
   }); 
   var sb = Ti.UI.createSearchBar();
    
   var ls = Ti.UI.createListSection({
     items: rows
   });
    var lv = Ti.UI.createListView({
       sections: [ls],
       searchView: sb,
       left: 30,
       right: 20
   });
    
   sb.setHintText("test");
    sb.addEventListener('change', function(e){
     view.setHeight(50);
     Ti.API.info(e.value);
   });
    //when the return key is hit, remove focus from our searchBar
   sb.addEventListener('return', function(e){
       view.setHeight(0);
       sb.blur();
   });
   sb.addEventListener('cancel', function(e){
       view.setHeight(0);
   });
   lv.addEventListener('itemclick', function(e) {
       Ti.API.info('click at index: ' + e.itemIndex);
   });
   
   var view = Ti.UI.createView({
     backgroundColor : 'blue',
     height : 0,
   });
    view.addEventListener('click', function(e){
       Ti.API.info('view clicked');
     });
   win.add(view);
   win.add(lv);
   win.open();
   </pre></code>
   
   Test Case 2 (TiUITableView) -
   
   <code><pre>
   var rows = [];
   for (var i = 0; i &lt; 10; i++) {
       rows.push({ title: 'Row '+ i});
   }
   
   var win = Ti.UI.createWindow({
     backgroundColor: 'red',
     layout : 'vertical'
   });
     
   var sb = Ti.UI.createSearchBar();
   var lv = Ti.UI.createTableView({
       data: rows,
       search: sb,
       top : 50,
       left : 30
   });
    
    sb.setHintText("test");
    sb.addEventListener('change', function(e){
     Ti.API.info(e.value);
     view.setHeight(50);
   });
    
   sb.addEventListener('return', function(e){
   sb.blur();
   view.setHeight(0);
   });
    
   sb.addEventListener('cancel', function(e){
         view.setHeight(0);
   });
   lv.addEventListener('click', function(e) {
       Ti.API.info('click at index: ' + e.index);
       Ti.API.info('clicked row data: ' + e.rowData.title);
    
   })
    
    var view = Ti.UI.createView({
     backgroundColor : 'blue',
     height : 0,
   });
    view.addEventListener('click', function(e){
       Ti.API.info('view clicked');
     });
   win.add(view);
   win.add(lv);
   win.open();
   
   </pre></code>
   
   Test Case 3 (Offset in ListView):
   <code><pre>
   var rows = [];
   for (var i = 0; i &lt; 20; i++) {
       rows.push({ properties: { title: 'Row '+ i , backgroundColor: 'red', searchableText:'Row '+i}});
   }
   var win = Ti.UI.createWindow({
     backgroundColor: 'white'
   }); 
   var sb = Ti.UI.createSearchBar();
    
   var ls = Ti.UI.createListSection({
     items: rows
   });
    
   var lv = Ti.UI.createListView({
     sections: [ls],
     searchView: sb,
     top: 100,
     left: 30,
     right: 20
   });
    
   sb.addEventListener('change', function(e){
     Ti.API.info(e.value);
   });
   
   // when the return key is hit, remove focus from our searchBar
   sb.addEventListener('return', function(e){
       sb.blur();
   });
   
   lv.addEventListener('itemclick', function(e) {
       Ti.API.info('click at index: ' + e.itemIndex);
   });
    
   win.add(lv);
   win.open();
   </pre></code></li>
<li>Vijay Singh 2017-11-21

   This ticket fix the issue TIMOB-25528 and TIMOB-25532 as well. So we have to verify test cases mentioned in tickets TIMOB-25528 and TIMOB-25532.</li>
<li>Abir Mukherjee 2017-11-28

   FR passed, PR merged.</li>
<li>Eric Wieber 2017-11-28

   Verified in SDK build 7.0.0.v20171128115332</li>
</ol>


<p><a href="/TIMOB/TIMOB-25491.json">JSON Source</a></p>