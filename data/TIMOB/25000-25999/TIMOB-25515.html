---
title: "[TIMOB-25515] Android: ScrollView.scrollTo() ignores "ti.ui.defaultunit" when animated"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-11-16T00:50:27.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, scrollview</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2017-11-15T04:25:23.000+0000</td></tr>
<tr><th>Updated</th><td>2017-11-16T01:56:21.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
The Android ScrollView.scrollTo() method always operates in pixels when set up to be animated. Meaning that it ignores the "ti.ui.defaultunit" property's configured units (such as "dp") in the "tiapp.xml" file.

Note that ScrollView.scrollTo() when not set up to animated does respect the "ti.ui.defaultunit" property.

*Steps to reproduce:*

<h4>Open your project's "tiapp.xml" file.</h4>
<h4>Add a "ti.ui.defaultunit" property set to "dp" as shown below.</h4>
<h4>Create an "app.js" file using the below code.</h4>
<h4>Build and run the app on Android.</h4>
<h4>Tap the "Scroll to Middle" button.</h4>

<code><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ti:app xmlns:ti="<a href="http://ti.appcelerator.org" rel="nofollow" target="_blank">http://ti.appcelerator.org</a>"&gt;
	&lt;property name="ti.ui.defaultunit" type="string"&gt;dp&lt;/property&gt;
&lt;/ti:app&gt;
</pre></code>

<code><pre>
var window = Ti.UI.createWindow();
var scrollView = Ti.UI.createScrollView(
{
	layout: "vertical",
	scrollType: "vertical",
	showHorizontalScrollIndicator: false,
	shorVerticalScrollIndicator: true,
	width: Ti.UI.FILL,
	height: Ti.UI.FILL,
});
var firstView = Ti.UI.createLabel(
{
	text: "First View",
	textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER,
	color: "white",
	backgroundColor: "blue",
	borderColor: "white",
	borderWidth: "1dp",
	width: "100%",
	height: "75%",
});
scrollView.add(firstView);
var middleView = Ti.UI.createLabel(
{
	text: "Middle View",
	textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER,
	color: "white",
	backgroundColor: "#008800",
	borderColor: "white",
	borderWidth: "1dp",
	width: "100%",
	height: "75%",
});
scrollView.add(middleView);
var lastView = Ti.UI.createLabel(
{
	text: "Last View",
	textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER,
	color: "white",
	backgroundColor: "purple",
	borderColor: "white",
	borderWidth: "1dp",
	width: "100%",
	height: "75%",
});
scrollView.add(lastView);
window.add(scrollView);
var button = Ti.UI.createButton(
{
	title: "Scroll to Middle",
	bottom: "10dp",
	right: "10dp",
});
button.addEventListener("click", function(e) {
	scrollView.scrollTo(0, firstView.size.height, { animated: true });
});
window.add(button);
window.open();
</pre></code>

*Result:*
The top of the "middle" view fails to be scrolled to the top of the scroll view.

This is because the view's height was returned in "dp" units but the scrollTo() method interpretted it as "pixels" instead.

*Expected Result:*
The scrollTo() method must respect the project's "ti.ui.defaultunit" setting.

*Work-Around:*
This issue can be worked-around by doing 1 of the following...
* Do not use animated scrolling.
* Set "ti.ui.defaultunit" to pixels.


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2017-11-15

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/9601" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9601</a></li>
<li>Abir Mukherjee 2017-11-15

   FR passed; waiting for CR before merging.</li>
<li>Abir Mukherjee 2017-11-16

   PR merged.</li>
<li>Lokesh Choudhary 2017-11-16

   Verified the fix in SDK 7.0.0.v20171115153702.
   Closing.
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-25515.json">JSON Source</a></p>