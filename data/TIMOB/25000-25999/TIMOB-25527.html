---
title: "[TIMOB-25527] ANDROID  - Camera picture blob ImageView toImage"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Johnson Joseph</td></tr>
<tr><th>Assignee</th><td>Yordan Banev</td></tr>
<tr><th>Created</th><td>2017-11-17T12:40:44.000+0000</td></tr>
<tr><th>Updated</th><td>2017-11-30T15:27:19.000+0000</td></tr>
</table>

<h3>Description</h3>


The Sample Code is here:  <a href="https://www.dropbox.com/s/j0duneeypnzk3z8/AndroidPictureToImageBug.zip?dl=0" rel="nofollow" target="_blank">https://www.dropbox.com/s/j0duneeypnzk3z8/AndroidPictureToImageBug.zip?dl=0</a>

In Android, using Titanium 6.3.0, I cannot toImage an ImageView with an image blob set.  I was able to do this in versions prior to 6.3.0.  I have attached the sample code.

The end result of the code should be a watermarked camera image.  When the toImage() result of the below function is set to the image attribute of an ImageView on the index.xml, the appear appears white or gray with a distorted Label.


function getViewWithLogoOverlay_Android(imgCompressedBlob)
{
	//create image with EZSmiles logo
	var imgView = Ti.UI.createImageView();
	imgView.width = Ti.UI.FILL;
	imgView.height = Ti.UI.FILL;
	imgView.image = imgCompressedBlob;
	imgView.defaultImage = imgCompressedBlob;
	imgView.backgroundColor = 'transparent';
	
	imgView.addEventListener("load", function() {
		
		console.log("helllooooo HELLLOOOOO");
		
	}); 
	
	var imgLogo1 = Ti.UI.createLabel();
	imgLogo1.color = "#e2e2e2";
	imgLogo1.opacity = .5;
	imgLogo1.text = "Powered By";
	imgLogo1.font = {
		fontFamily: 'Nunito-Regular',
		fontSize: 12
	};
	
	var imgLogo = Ti.UI.createLabel();
	imgLogo.color = "#e2e2e2";
	imgLogo.opacity = .5;
	imgLogo.text = "EZSmiles";
	imgLogo.font = {
		fontFamily: 'Nunito-Regular',
		fontSize: 24
	};
	
	var imgViewColl = Ti.UI.createView();
	imgViewColl.width = Ti.UI.SIZE;
	imgViewColl.height = Ti.UI.SIZE;
	imgViewColl.layout = "vertical";
	imgViewColl.left = "10%";
	imgViewColl.top = "75%";
	imgViewColl.add(imgLogo1);
	imgViewColl.add(imgLogo);
	
	
	var templateView = Ti.UI.createView();
	templateView.width = "100%";
	templateView.height = "100%";
	
	templateView.add(imgView);
	templateView.add(imgViewColl);
	
	return templateView.toImage();
}




<h3>Comments</h3>

<ol>
<li>Yordan Banev 2017-11-21

   [~jjoseph] Hello! Have you had any trouble with the same code on iOS after switching SDK versions ?</li>
<li>Johnson Joseph 2017-11-21

   No, I don't.  It works properly in iOS in 6.3.0</li>
<li>Yordan Banev 2017-11-22

   [~jjoseph] Recent changes for layout handling (in 6.2.0) have caused that. It is a conflict between the templateView and ImgView dimensions - both have relative values and templateView does not have a parent to use as a base. Workaround for that would be to set the dimensions of imgView to:
   <code><pre>
   var imgView = Ti.UI.createImageView();
   imgView.width = Ti.UI.SIZE;
   imgView.height = Ti.UI.SIZE;
   </pre></code>
   so they are based on the content of the image source.
   Let me know if that works out for you. </li>
<li>Johnson Joseph 2017-11-22

   This worked!  Thank you for the quick response on this.  Very much appreciated.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25527.json">JSON Source</a></p>