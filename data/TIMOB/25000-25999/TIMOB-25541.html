---
title: "[TIMOB-25541] Android: EmailDialog file attachments not working on Android 7 and higher"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-01-19T23:16:27.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.2.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.0.2</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, email, emaildialog</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2017-11-20T22:36:28.000+0000</td></tr>
<tr><th>Updated</th><td>2018-04-20T21:54:54.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
As of Titanium 6.2.2, the EmailDialog fails to attach files on Android 7.0 and newer OS versions.

*Steps to reproduce:*

<h4>Set up a project using Titanium 6.2.2 or higher.</h4>
<h4>Build and run the app on an Android 7.0 or newer device.</h4>
<h4>Tap on the "Send E-Mail" button.</h4>

<code><pre>
var window = Ti.UI.createWindow();
var button = Ti.UI.createButton({ title: "Send E-Mail" });
button.addEventListener("click", function(e) {
	var file1 = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, "File1.txt");
	file1.write("Hello World!");
	var file2 = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, "File2.txt");
	file2.write("This is a test.");
	var dialog = Ti.UI.createEmailDialog();
	dialog.subject = "E-Mail Test";
	dialog.toRecipients = ["john.doe@domain.com", "jane.doe@domain.com"];
	dialog.messageBody = "This is the e-mail's body.\nThis is the second line.";
	dialog.addAttachment(file1);
	dialog.addAttachment(file2);
	dialog.open();
});
window.add(button);
window.open();
</pre></code>

*Result:*
An e-mail window gets displayed, but notice that there are no file attachments. This is the bug.

*Expected Result:*
There should be 2 files attached to the e-mail, "File1.txt" and "File2.txt".

*Work-Around:*
In Titanium 7.0.0 and higher, you can target API Level 23 in the "tiapp.xml" file to work-around this issue.

<code><pre>
&lt;android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt;
	&lt;manifest&gt;
		&lt;uses-sdk android:minSdkVersion="16" android:targetSdkVersion="23"/&gt;
	&lt;/manifest&gt;
&lt;/android&gt;
</pre></code>

For Titanium 6.3.x and 6.2.2, there is no work-around. You must build with Titanium 6.2.1 or older instead.


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2017-11-20

   The following PR is a community made fix, but it's a work-in-progress...
   <a href="https://github.com/appcelerator/titanium_mobile/pull/9520" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9520</a>
   </li>
<li>Joshua Quick 2017-11-30

   Work is complete.
   
   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/9520" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9520</a></li>
<li>Joshua Quick 2018-01-09

   PR (7.0.x): <a href="https://github.com/appcelerator/titanium_mobile/pull/9709" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9709</a></li>
<li>Lokesh Choudhary 2018-01-10

   FR passed for master & PR merged.
   FR passed for backport , waiting for merge to get enabled.</li>
<li>Lokesh Choudhary 2018-01-19

   Master & backport Pr's merged.</li>
<li>Lokesh Choudhary 2018-01-22

   Verified the fix with SDK 7.1.0.v20180121202754 & 7.0.2.v20180119173957.
   
   Closing.
   
   Studio Ver:     5.0.0.201712081732
   SDK Ver:        7.0.2.v20180119173957, 7.1.0.v20180121202754
   OS Ver:         10.13.2
   Xcode Ver:      Xcode 9.2
   Appc NPM:       4.2.11
   Appc CLI:       7.0.1
   Daemon Ver:     1.0.1
   Ti CLI Ver:     5.0.14
   Alloy Ver:      1.10.10
   Node Ver:       8.9.1
   NPM Ver:        5.5.1
   Java Ver:       1.8.0_101
   Devices:        samsung SM-G955U1 --- Android 7.0
                         google Nexus 5 --- Android 6.0.1
                         google Pixel --- Android 7.1.1
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-25541.json">JSON Source</a></p>