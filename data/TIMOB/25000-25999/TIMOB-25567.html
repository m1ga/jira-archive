---
title: "[TIMOB-25567] Android: customView of Map.Annotation won't show the first time app runs if it has an image"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 6.3.0, Release 8.0.2</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>engSchedule, map, mapView</td></tr>
<tr><th>Reporter</th><td>Guillermo Figueras</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-11-24T11:22:10.000+0000</td></tr>
<tr><th>Updated</th><td>2019-07-30T15:39:49.000+0000</td></tr>
</table>

<h3>Description</h3>

When using customView property on an Annotation which contains an ImageView and a Label, the first time you open the app you won't see the image. If you go back and open the map again, the images will show.

I uploaded a couple of files. One of them is a video showing the bug, the other one is a test case project (remember to change google maps API_KEY on tiapp.xml).

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25567_63687/bug_map_customview.mov">bug_map_customview.mov</td></td><td>2017-11-24T11:14:31.000+0000</td><td>9639473</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25567_63686/BugMapTest.zip">BugMapTest.zip</td></td><td>2017-11-24T11:14:31.000+0000</td><td>10013298</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Mostafizur Rahman 2017-11-26

   Hello [~gfigueras],
   
   Thanks for sharing with us. We  have tested the issue on HUAWEI GR3 2017 using SDK 6.3.0.GA with the sample project provided by you but unable to produce the issue. When we press "Click here" the pages shows nothing. Only a white blank [page](<a href="https://s19.postimg.org/7yn43ze9v/imgpsh_fullsize2.jpg)" rel="nofollow" target="_blank">https://s19.postimg.org/7yn43ze9v/imgpsh_fullsize2.jpg)</a> is visible. Please share us a complete reproducible test case to reproduce the issue on our end.
   
   Thanks</li>
<li>Guillermo Figueras 2017-11-27

   That's because you have to use your own google maps API key <a href="https://i.imgur.com/KeCVm3y.png" rel="nofollow" target="_blank">https://i.imgur.com/KeCVm3y.png</a>
   
   <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/guide/Google_Maps_v2_for_Android-section-src-36739898_GoogleMapsv2forAndroid-ObtainandAddaGoogleAPIKey</li>
<li>Guillermo Figueras 2018-01-18

   Well, I came up with a solution for the images not showing, just in case someone is facing the same problem.
   
   At first I was adding an ImageView and a Label inside a View, which was the customView of the Annotation, but now instead of doing that, I'm doing this:
   <code><pre>
   var view = Ti.UI.createView({
   	height: "40dp",
   	width: "25dp",
   	backgroundImage: "/images/pin_red.png"
   });
   		
   var number = Ti.UI.createLabel({
   	text: (i+1),
   	top: "10%"
   });
   		
   view.add(number);
   		
   var annotation = MapModule.createAnnotation({
           latitude : legs[i].start_location.lat,
           longitude : legs[i].start_location.lng,
           title: legs[i].start_address,
           id : i,
           customView: view
   });
   </pre></code>
   
   Anyways, customView property isn't working properly if you add an ImageView to it.</li>
<li>Gary Mathews 2018-01-18

   This should be fixed by <a href="https://github.com/appcelerator-modules/ti.map/releases/tag/android-4.1.1" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/releases/tag/android-4.1.1</a></li>
<li>Guillermo Figueras 2018-01-19

   I tried the old code (the one attached to the ticket) with the new ti.map version but the bug is still there.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25567.json">JSON Source</a></p>