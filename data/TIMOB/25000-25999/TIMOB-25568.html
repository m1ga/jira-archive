---
title: "[TIMOB-25568] Android: EmailDialog fails to attach more than 1 blob"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, blob, email, emaildialog, engSchedule</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2017-11-29T03:21:02.000+0000</td></tr>
<tr><th>Updated</th><td>2019-06-18T15:35:30.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
When adding multiple blobs as attachments to an EmailDialog, only the last blob gets attached to the e-mail. And the last blob attached is duplicated in the e-mail for every previous blob attachment attempted to be added.

*Steps to Reproduce:*
<h4>Set up an Android device with a working mail app.</h4>
<h4>Build and run the below code on that device.</h4>
<h4>Tap the "Send E-Mail" button.</h4>

<code><pre>
var window = Ti.UI.createWindow();
var button = Ti.UI.createButton({ title: "Send E-Mail" });
button.addEventListener("click", function(e) {
	var dialog = Ti.UI.createEmailDialog();
	dialog.subject = "E-Mail Test";
	dialog.toRecipients = ["john.doe@domain.com", "jane.doe@domain.com"];
	dialog.messageBody = "This is the e-mail's body.\nThis is the second line.";
	dialog.addAttachment(window.toImage());
	dialog.addAttachment(button.toImage());
	dialog.open();
});
window.add(button);
window.open();
</pre></code>

*Result:*
The e-mail draft shows 2 image file attachments that are exactly the same when it shouldn't. They should be different images.

*Expected Result:*
The e-mail draft should have 2 image file attachments.
* Screenshot of the entire Titanium app window.
* Screenshot of just the "Send E-Mail" button.

*Work-Around:*
Write the blobs to file and attach the files instead.

*Reason it Fails:*
Titanium's "EmailDialogProxy" Java class writes all blobs to a temp file with the same file name, "attachment". So, each blob added overwrites the previous one in the temp directory.
<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/ui/src/java/ti/modules/titanium/ui/EmailDialogProxy.java#L217" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/ui/src/java/ti/modules/titanium/ui/EmailDialogProxy.java#L217</a>


<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-25568.json">JSON Source</a></p>