---
title: "[TIMOB-25617] Android: Push notifications not shown in statusbar on Android 8 if app is backgrounded"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-01-16T18:07:16.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.0.2</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, cloudpush, notifications</td></tr>
<tr><th>Reporter</th><td>Shuo Liang</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2017-12-19T12:22:24.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-06T18:26:43.000+0000</td></tr>
</table>

<h3>Description</h3>



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-25617_63906/Screenshot.png">Screenshot.png</td></td><td>2018-01-06T04:08:13.000+0000</td><td>81729</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2017-12-22

   [~sliang],
   
   Can you ask for the person's "tiapp.xml" file please?
   
   I ask because Titanium does not fully support "targeting" Android 8.x yet. We haven't resolved all of its breaking changes and notifications failing to post to the status bar is one of them (they now require us to use notification channels).
   
   However, notifications will work on Android 8.x if the Titanium app targets Android 7.x (aka: API Level 25) and below. Titanium targets Android 7.x by DEFAULT and will NEVER automatically target Android 8.x. But Titanium does allow customers to opt-in to targeting Android 8.x (which is experimental) via the "tiapp.xml" as follows...
   
   <code><pre>
   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;ti:app xmlns:ti="<a href="http://ti.appcelerator.org" rel="nofollow" target="_blank">http://ti.appcelerator.org</a>"&gt;
   	&lt;android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt;
   		&lt;manifest&gt;
   			&lt;uses-sdk android:minSdkVersion="16" android:targetSdkVersion="26"/&gt;
   		&lt;/manifest&gt;
   	&lt;/android&gt;
   &lt;/ti:app&gt;
   </pre></code>
   
   So, if the customer is doing the above, then ask him/her to remove the "uses-sdk" XML element or drop the target API Level to "25".
   
   Also note that "ti.cloudpush" issue [NATIVESDK-352] has not been fixed yet either. So, if the app has been restored from backup on Android 6.0 or above, the app will never receive notifications again. I've posted code on that ticket that'll provide a work-around.</li>
<li>Gary Mathews 2018-01-08

   [~spulipakkam] "_miscellaneous_" is a reserved Android channel ID (see here <a href="https://developer.android.com/reference/android/app/NotificationChannel.html#DEFAULT_CHANNEL_ID)." rel="nofollow" target="_blank">https://developer.android.com/reference/android/app/NotificationChannel.html#DEFAULT_CHANNEL_ID).</a> For compatibility with older Android apps that do not specify a channel ID.
   
   The user should not create a channel using this ID as this could interfere with the behavior of Android OS. Any other ID is fine.</li>
<li>Gary Mathews 2018-01-11

   aps_sdk: <a href="https://github.com/appcelerator/aps_sdk/pull/307" rel="nofollow" target="_blank">https://github.com/appcelerator/aps_sdk/pull/307</a>
   cloudpush: <a href="https://github.com/appcelerator-modules/cloudpush/pull/36" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/cloudpush/pull/36</a>
   
   ti.cloudpush: <a href="https://github.com/appcelerator-modules/cloudpush/releases/tag/android-5.0.2" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/cloudpush/releases/tag/android-5.0.2</a></li>
<li>Lokesh Choudhary 2018-01-12

   FR Passed. Waiting to get merged.</li>
<li>Lokesh Choudhary 2018-01-16

   PR's merged.</li>
<li>Lokesh Choudhary 2018-01-17

   Verified the fix with Cloudpush module <code>5.0.2</code>.
   Closing.
   
   </li>
<li>Christopher Williams 2018-02-06

   [~eharris] That's because the file doesn't exist up on S3.
   
   Generally for non-private modules it's pretty easy to just point to the zipfile on Github itself, but this module is private she we need to manually push a copy to S3.
   
   To update the packaged version in the SDK:
   - Open a PR on titanium_mobile
   - Upload the cloudpush zip file to S3
   - Update the pre-packaged modules listing. On 7_0_X it's fairly easy, just update the URL. On master we use hashes for integrity, so you can use the scans command I added to get that info:
   <code>./build&gt; ./scons ssri <a href="https://s3.amazonaws.com/timobile.appcelerator.com/modules/ti.cloudpush-android-5.0.2.zip" rel="nofollow" target="_blank">https://s3.amazonaws.com/timobile.appcelerator.com/modules/ti.cloudpush-android-5.0.2.zip</a></code>
   
   Then stick that into support/modules/packaged/modules.json
   
   In any case, I've opened PRs for this on master/7_0_X:
   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/9806" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9806</a>
   7_0_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/9805" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9805</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-25617.json">JSON Source</a></p>