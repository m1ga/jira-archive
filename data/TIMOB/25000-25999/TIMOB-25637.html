---
title: "[TIMOB-25637] iOS: Window toolbar animates when opening window"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-01-17T16:47:07.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.0.2</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>IOS, Sliding, Toolbar, Window, iPhoneX, merge-7.0.2</td></tr>
<tr><th>Reporter</th><td>Thomas Neerup</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2017-11-13T11:40:13.000+0000</td></tr>
<tr><th>Updated</th><td>2018-01-24T23:05:23.000+0000</td></tr>
</table>

<h3>Description</h3>

When opening Windows in a NavigationWindow the toolbar on The window is animated sliding in from the bottom. Event the first window in the NavigationWindow slides in. Toolbars should not slide in when opening windows. When doing the same in Mail the toolbar does not slide in from the button, it just follows the window.

Am I missing something? Is there some way to avoid all this sliding in? 

I have added a test case showing the sliding in of toolbars :) 

Thanks

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-25637_63582/iPhoneToolbarTest2.zip">iPhoneToolbarTest2.zip</td></td><td>2017-11-13T11:33:31.000+0000</td><td>8648644</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-25637_63586/Screen Shot 2017-11-14 at 07.01.54.png">Screen Shot 2017-11-14 at 07.01.54.png</td></td><td>2017-11-14T06:02:13.000+0000</td><td>28829</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2017-11-13

   Hello, I tested your sample app. I am not sure what seems to be the issue here! Opening window is sliding from the right to left for me and toolbar at the bottom also slides from the right to left. What seems to be the issue here? Please elaborate. Thanks.</li>
<li>Thomas Neerup 2017-11-14

   Hi Sharif..
   I'm sorry it seems like it only happens on iPhone X I have added a screenshot ...</li>
<li>Hans Knöchel 2017-11-14

   We don't reposition the toolbar manually, so this might either be a Simulator- or iOS-bug. Did you get in touch with Apple to report this issue so far? We reported quite a few tickets to them so far, with success (like with TIMOB-25269). Let us know, thanks!</li>
<li>Sharif AbuDarda 2017-11-19

   Hello [~thomas.neerup@eg.dk], As Hans mentioned this might be iOS-bug. Did you try to get in touch with them?</li>
<li>Thomas Neerup 2017-11-20

   Hi Sharif..
   No I did not contact Apple. I would rather not be the man in the middle when I have no clue to how Appcelerator uses the native api's.</li>
<li>Mostafizur Rahman 2017-11-29

   [~thomas.neerup@eg.dk],
   Thanks for your feedback. Hyperloop gives you direct access to the native APIs. Please follow the [link](<a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/guide/Hyperloop). Hope this helps.
   
   Best</li>
<li>Hans Knöchel 2017-11-29

   [~thomas.neerup@eg.dk] No worries, we are taking care of it! I'll try to reproduce it on a native project and file an issue with Apple if it also occurs there. </li>
<li>Hans Knöchel 2017-12-30

   Moving to TIMOB for closer investigation and comparison with native projects.</li>
<li>Vijay Singh 2018-01-02

   [~thomas.neerup@eg.dk] Can you update  index.xml and window.xml with following code and see if this solves your problem -
   
   index.xml -
   
   <code><pre>
   &lt;Alloy&gt;
   	&lt;NavigationWindow id="index" &gt;
   		&lt;Window class="container" onClick="doClick"&gt;
   			&lt;Label text="Click to open window" &gt;&lt;/Label&gt;
   			&lt;Toolbar bottom="0"&gt;
           &lt;Items&gt;
   				&lt;Button id="send" title="Send" /&gt;
   				&lt;Button id="camera" title="Camera" /&gt;
   				&lt;Button id="cancel" title="Cancel" /&gt;
           &lt;/Items&gt;
   			&lt;/Toolbar&gt;
   		&lt;/Window&gt;
   	&lt;/NavigationWindow&gt;&gt;
   
   &lt;/Alloy&gt;
   </pre></code>
    
   
   window.xml -
   
   
   <code><pre>
   &lt;Alloy&gt;
   	&lt;Window id="window" class="container"&gt;
       &lt;Toolbar bottom="0"&gt;
         &lt;Items&gt;
   			&lt;Button id="send" title="Send2" /&gt;
   			&lt;Button id="camera" title="Camera2" /&gt;
   			&lt;Button id="cancel" title="Cancel2" /&gt;
         &lt;/Items&gt;
   		&lt;/Toolbar&gt;
   	&lt;/Window&gt;
   &lt;/Alloy&gt;
   </pre></code>
   
   You can see doc <a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.UI.Toolbar. Thanks!</li>
<li>Vijay Singh 2018-01-03

    PR : <a href="https://github.com/appcelerator/titanium_mobile/pull/9698" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9698</a>
    
    Test Case -
    
    <code><pre>
    var win1 = Ti.UI.createWindow({
        backgroundColor: 'white',
         toolbarSettings: {
             translucent: false,
             animated: false,
             barColor: 'red'
         }
    });
    
    var navWindow = Titanium.UI.iOS.createNavigationWindow({
      backgroundColor: 'white',
       window: win1
    });
    
    var btn = Ti.UI.createButton({
        title: 'Open Next Window'
    });
    btn.addEventListener('click', function() {
        navWindow.openWindow(getWindow(), {animated:true});
    });
    win1.add(btn);
    
    var button1 = Ti.UI.createButton({
        title: 'Button 1'
    });
    var button2 = Ti.UI.createButton({
        title: 'Button 2'
    });
    win1.setToolbar([button1, button2]);
    
    navWindow.open();
    
    function getWindow() {
        var win2 = Ti.UI.createWindow({
            backgroundColor: 'white',
            toolbarSettings: {
                translucent: false,
                animated: false,
                barColor: 'red'
            }
        });
    
        var close = Ti.UI.createButton({
            title: 'Close'
        });
        close.addEventListener('click', function() {
            win2.close();
        });
        win2.add(close);
    
        var button3 = Ti.UI.createButton({
            title: 'Button 3'
        });
        var button4 = Ti.UI.createButton({
            title: 'Button 4'
        });
        win2.setToolbar([button3, button4]);
        return win2;
    }
    </pre></code></li>
<li>Thomas Neerup 2018-01-03

    Hi Vijay Singh 
    I have tried using the Toolbar instead of the WindowToolbar, and it semi works, the toolbar does not animate but I do not get the native look of the toolbar being extra tall on the iPhoneX. 
    </li>
<li>Hans Knöchel 2018-01-03

    [~thomas.neerup@eg.dk] I did the code-review for this ticket and tested it. Let me share a video I've just made that looked fine to me (iPhone X based): <a href="https://www.dropbox.com/s/n6haj1x8jfpn5va/iphone-x-toolbar.mov?dl=0" rel="nofollow" target="_blank">https://www.dropbox.com/s/n6haj1x8jfpn5va/iphone-x-toolbar.mov?dl=0</a></li>
<li>Thomas Neerup 2018-01-03

    Hi Hans... 
    The video shows the bug perfectly... 
    The menu animates from the bottom up at the same time slides in from the side... 
    That is not the intended animation... It should only slide in from the side... Like in the mail Mail app. when opening a mail . .</li>
<li>Hans Knöchel 2018-01-03

    Hey Thomas! I was on the wrong branch / wrong video. It seems fine here: <a href="https://www.dropbox.com/s/i7tc74w35bqfkpg/iphone-x-toolbar-2.mov?dl=0" rel="nofollow" target="_blank">https://www.dropbox.com/s/i7tc74w35bqfkpg/iphone-x-toolbar-2.mov?dl=0</a>
    
    How did you patch your local source? The PR is not merged so far, so unless you patched it manually in <code>~/Library/Application Support</code>, you either need to do that or wait for the 7.1.0 release.</li>
<li>Thomas Neerup 2018-01-03

    Hi Hans...
    I'll take your word for it...
    I'll wait for 7.1.0 </li>
<li>Hans Knöchel 2018-01-03

    I'd love to see if it works for you already. Basically, go to:
    <code><pre>
    ~/Library/Application Support/Titanium/mobilesdk/osx/7.0.1.GA/iphone/Classes/TiUIWindowProxy.m
    </pre></code>
    remove line 945:
    <code><pre>
    [[controller navigationController] setToolbarHidden:!hasToolbar animated:YES];
    </pre></code>
    and re-insert it after
    <code><pre>
    SETPROPOBJ(@"toolbar", setToolbar);
    </pre></code></li>
<li>Eric Merriman  2018-01-09

    [~vijaysingh] Please back port to 7.0.2. Thanks!</li>
<li>Vijay Singh 2018-01-10

    PR (7_0_X) : <a href="https://github.com/appcelerator/titanium_mobile/pull/9713" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9713</a></li>
<li>Abir Mukherjee 2018-01-12

    Passed FR.</li>
<li>Abir Mukherjee 2018-01-24

    Verified fix is found in:
    SDK 7.0.2.v20180124113923
    SDK 7.1.0.v20180124115505</li>
</ol>


<p><a href="/TIMOB/TIMOB-25637.json">JSON Source</a></p>