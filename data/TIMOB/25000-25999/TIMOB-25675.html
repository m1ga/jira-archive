---
title: "[TIMOB-25675] iOS11: Button in navigation-bar remains in pressed state when opening new window (Apple bug)"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-02-06T04:32:49.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.0.2</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>applebug</td></tr>
<tr><th>Reporter</th><td>Vijay Singh</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2018-01-16T08:21:56.000+0000</td></tr>
<tr><th>Updated</th><td>2018-06-07T23:38:24.000+0000</td></tr>
</table>

<h3>Description</h3>

In following test case, when we click on "Trigger" button a window get pushed in navigation window. When we pop that window , there  comes a semi transparent view above"Trigger" button. This problem is not in iOS 10.

<code><pre>
var btn = Ti.UI.createButton({
  title: 'Trigger'
});
 
var win = Ti.UI.createWindow({
  rightNavButton: btn
});
 
var nav = Ti.UI.iOS.createNavigationWindow({
  window: win
});
 
btn.addEventListener('click', function() {
  var win2 = Ti.UI.createWindow({
    backgroundColor: 'red'
  });
  
  win2.add(Ti.UI.createListView());
  nav.openWindow(win2);
});
 
win.add(Ti.UI.createListView());
nav.open();
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25675_63972/After_push_and_back.png">After_push_and_back.png</td></td><td>2018-01-17T08:58:13.000+0000</td><td>23077</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25675_63971/Before_push.png">Before_push.png</td></td><td>2018-01-17T08:58:13.000+0000</td><td>23470</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25675_64803/NavTest.zip">NavTest.zip</td></td><td>2018-02-05T01:52:43.000+0000</td><td>42991</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2018-01-16

   I cannot reproduce this issue on iOS 11.2 and an iPhone SE. I've made a screenshot of both before and after opening + popping the window and it still looks the same. 
   
   *EDIT*: Thanks for the screens. It rather looks like the active/pressed state remains although it shouldn't. But still, I could not reproduce it on my end, so hopefully you can isolate it? Maybe kroll vs main-thread or jscore vs ticore?</li>
<li>Vijay Singh 2018-01-17

   [~hknoechel] You are correct :). It's on main thread only. I'll look in this.</li>
<li>Vijay Singh 2018-02-05

   This issue is in native iOS also. It can be seen in attached app "NavTest.zip". The workaround is discussed [here](<a href="https://stackoverflow.com/questions/47754472/ios-uinavigationbar-button-remains-faded-after-segue-back)." rel="nofollow" target="_blank">https://stackoverflow.com/questions/47754472/ios-uinavigationbar-button-remains-faded-after-segue-back).</a></li>
<li>Vijay Singh 2018-02-05

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/9799" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9799</a>
   PR (7_0_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/9802" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9802</a></li>
<li>Hans Knöchel 2018-02-05

   This is duplicated by AC-5550 as well. Might be a 7.0.2 candidate due to the severity of the glitch.</li>
<li>Vijay Singh 2018-02-05

   Filed a bug to apple -
   <a href="https://openradar.appspot.com/radar?id=5012750401011712" rel="nofollow" target="_blank">https://openradar.appspot.com/radar?id=5012750401011712</a></li>
<li>Eric Wieber 2018-02-06

   FR Passed. Navigation bar buttons do not stay grayed out or in depressed state. Tested using the provided samples as well as the navbar suite.</li>
<li>Eric Wieber 2018-02-06

   Verified in SDK builds 7.0.2.v20180205145048 & 7.1.0.v20180205203710</li>
<li>Hans Knöchel 2018-06-07

   The original apple bug has officially been fixed in iOS 12.0. [~vijaysingh] Can you do a PR to adjust your initial PR to only be applied between >= 11.2 and < 12.0?</li>
</ol>


<p><a href="/TIMOB/TIMOB-25675.json">JSON Source</a></p>