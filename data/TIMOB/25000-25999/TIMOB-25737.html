---
title: "[TIMOB-25737] Android -  change attribute in ListDataItem - crash app"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-05-22T19:24:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.5.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>android, engTriage</td></tr>
<tr><th>Reporter</th><td>Michele Cavalcanti</td></tr>
<tr><th>Assignee</th><td>Shak Hossain</td></tr>
<tr><th>Created</th><td>2018-01-29T17:39:38.000+0000</td></tr>
<tr><th>Updated</th><td>2019-05-22T19:24:35.000+0000</td></tr>
</table>

<h3>Description</h3>

SDK : 7.0.1

Hi, i have listview with Textfield hidden in a View. When Click in one row the onItemclick event it's fired, in this method i change the visible and height attribute of the view  and call updateItemAt. Write in TextField and click the second row, app is killed.

This code works perdect on iOS device




Exception:
[WARN] :   View: requestLayout() improperly called by ti.modules.titanium.ui.widget.listview.TiNestedListView$ApiLevel21$NestedListView{b0dc302 VFED.VC.. ......ID 0,0-1440,2112} during layout: running second layout pass
[ERROR] :  TiApplication: (main) [8966,8966] Sending event: exception on thread: main msg:java.lang.IndexOutOfBoundsException: setSpan (2 ... 2) ends beyond length 0; Titanium 7.0.1,2017/12/18 10:42,undefined
[ERROR] :  TiApplication: java.lang.IndexOutOfBoundsException: setSpan (2 ... 2) ends beyond length 0
[ERROR] :  TiApplication: 	at android.text.SpannableStringBuilder.checkRange(SpannableStringBuilder.java:1265)
[ERROR] :  TiApplication: 	at android.text.SpannableStringBuilder.setSpan(SpannableStringBuilder.java:684)
[ERROR] :  TiApplication: 	at android.text.SpannableStringBuilder.setSpan(SpannableStringBuilder.java:677)
[ERROR] :  TiApplication: 	at android.text.Selection.setSelection(Selection.java:76)
[ERROR] :  TiApplication: 	at android.text.Selection.setSelection(Selection.java:87)
[ERROR] :  TiApplication: 	at android.widget.EditText.setSelection(EditText.java:103)
[ERROR] :  TiApplication: 	at ti.modules.titanium.ui.widget.listview.TiListView$ListViewWrapper.onLayout(TiListView.java:175)
[ERROR] :  TiApplication: 	at android.view.View.layout(View.java:17637)
[ERROR] :  TiApplication: 	at android.view.ViewGroup.layout(ViewGroup.java:5575)
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.view.TiCompositeLayout.onLayout(TiCompositeLayout.java:862)
[ERROR] :  TiApplication: 	at android.view.View.layout(View.java:17637)
[ERROR] :  TiApplication: 	at android.view.ViewGroup.layout(ViewGroup.java:5575)
[ERROR] :  TiApplication: 	at org.appcelerator.titanium.view.TiCompositeLayout.onLayout(TiCompositeLayout.java:862)
[ERROR] :  TiApplication: 	at android.view.View.layout(View.java:17637)
[ERROR] :  TiApplication: 	at android.view.ViewGroup.layout(ViewGroup.java:5575)
[ERROR] :  TiApplication: 	at android.widget.FrameLayout.layoutChildren(FrameLayout.java:323)
[ERROR] :  TiApplication: 	at android.widget.FrameLayout.onLayout(FrameLayout.java:261)
[ERROR] :  TiApplication: 	at android.view.View.layout(View.java:17637)
[ERROR] :  TiApplication: 	at android.view.ViewGroup.layout(ViewGroup.java:5575)
[ERROR] :  TiApplication: 	at android.support.v7.widget.ActionBarOverlayLayout.onLayout(ActionBarOverlayLayout.java:443)
[ERROR] :  TiApplication: 	at android.view.View.layout(View.java:17637)
[ERROR] :  TiApplication: 	at android.view.ViewGroup.layout(ViewGroup.java:5575)
[ERROR] :  TiApplication: 	at android.widget.FrameLayout.layoutChildren(FrameLayout.java:323)
[ERROR] :  TiApplication: 	at android.widget.FrameLayout.onLayout(FrameLayout.java:261)
[ERROR] :  TiApplication: 	at android.view.View.layout(View.java:17637)
[ERROR] :  TiApplication: 	at android.view.ViewGroup.layout(ViewGroup.java:5575)
[ERROR] :  TiApplication: 	at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1741)
[ERROR] :  TiApplication: 	at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1585)
[ERROR] :  TiApplication: 	at android.widget.LinearLayout.onLayout(LinearLayout.java:1494)
[ERROR] :  TiApplication: 	at android.view.View.layout(View.java:17637)
[ERROR] :  TiApplication: 	at android.view.ViewGroup.layout(ViewGroup.java:5575)
[ERROR] :  TiApplication: 	at android.widget.FrameLayout.layoutChildren(FrameLayout.java:323)
[ERROR] :  TiApplication: 	at android.widget.FrameLayout.onLayout(FrameLayout.java:261)
[ERROR] :  TiApplication: 	at com.android.internal.policy.DecorView.onLayout(DecorView.java:726)
[ERROR] :  TiApplication: 	at android.view.View.layout(View.java:17637)
[ERROR] :  TiApplication: 	at android.view.ViewGroup.layout(ViewGroup.java:5575)
[ERROR] :  TiApplication: 	at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:2346)
[ERROR] :  TiApplication: 	at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2068)
[ERROR] :  TiApplication: 	at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1254)
[ERROR] :  TiApplication: 	at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:6337)
[ERROR] :  TiApplication: 	at android.view.Choreographer$CallbackRecord.run(Choreographer.java:874)
[ERROR] :  TiApplication: 	at android.view.Choreographer.doCallbacks(Choreographer.java:686)
[ERROR] :  TiApplication: 	at android.view.Choreographer.doFrame(Choreographer.java:621)
[ERROR] :  TiApplication: 	at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:860)
[ERROR] :  TiApplication: 	at android.os.Handler.handleCallback(Handler.java:751)
[ERROR] :  TiApplication: 	at android.os.Handler.dispatchMessage(Handler.java:95)
[ERROR] :  TiApplication: 	at android.os.Looper.loop(Looper.java:154)
[ERROR] :  TiApplication: 	at android.app.ActivityThread.main(ActivityThread.java:6119)
[ERROR] :  TiApplication: 	at java.lang.reflect.Method.invoke(Native Method)
[ERROR] :  TiApplication: 	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)
[ERROR] :  TiApplication: 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25737_64776/20180129_180715.gif">20180129_180715.gif</td></td><td>2018-01-29T17:24:56.000+0000</td><td>516867</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25737_64775/bugAndroid.zip">bugAndroid.zip</td></td><td>2018-01-29T17:31:17.000+0000</td><td>1995588</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Emiliano 2018-02-05

   I've the same issue...</li>
<li>Alan Hutton 2019-05-22

   Unable to reproduce with 7.5.0.GA > 8.0.1.GA</li>
</ol>


<p><a href="/TIMOB/TIMOB-25737.json">JSON Source</a></p>