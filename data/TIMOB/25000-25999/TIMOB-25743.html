---
title: "[TIMOB-25743] Windows: Auto-increment version numbering"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-02-22T22:36:26.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.1.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Kota Iguchi</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2018-02-02T04:12:27.000+0000</td></tr>
<tr><th>Updated</th><td>2018-05-16T23:37:55.000+0000</td></tr>
</table>

<h3>Description</h3>

We might want to introduce automatic-increment for build number during build due to deployment issues  (See TIMOB-25616 and TIMOB-25017).

Here's some starting point to discuss:

- Do we accept the difference between version numbering in tiapp.xml and actual app? Note that Developers may want to determine specific version number for the release build.
- We could introduce special placeholder like <code><version>1.0.*</version></code> but this may cause breaking change and parity issue between platforms. Do we wan to do like this? Or we could just say "If you omit the build number, we just automatically increment it behind scenes, only on Windows platform".
- Do we accept this breaking change regarding new version numbering spec? 
- Do we want to enable it by default? Otherwise do we want to introduce new property in tiapp.xml like <code><enable-auto-build-numvering/> or so</code>?
- Do we want to introduce this new version numbering spec for other platforms? Do we want to keep parity for it?
- Do we want to make it configurable from Appc Studio? For instance ["Automatically increment" checkbox in UWP packager](<a href="https://docs.microsoft.com/en-us/windows/uwp/packaging/images/packaging-screen5.jpg)" rel="nofollow" target="_blank">https://docs.microsoft.com/en-us/windows/uwp/packaging/images/packaging-screen5.jpg)</a>


<h3>Comments</h3>

<ol>
<li>Kota Iguchi 2018-02-06

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1177" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1177</a></li>
<li>Samir Mohammed 2018-02-22

   Master and 7_1_X merged. test and other information can be found at: 
   
   Master: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1177" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1177</a>
   7_1_x: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1199" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1199</a></li>
<li>Samir Mohammed 2018-03-02

   Closing ticket; Verified fix in SDK Version: 7.1.0.v20180228160738 and SDK Version: 7.2.0.v20180301101144.</li>
<li>Shuo Liang 2018-03-09

   [~kiguchi]
   
   Customer update that, please check
   
   We've been testing the version auto-increment Appc just implemented for Windows and we noticed that an error is being thrown every time if we run a ti build. 
   
   Sample project (which is really an empty app) 
   
   Steps: 
   1) Compile and install app (ti build -p windows -T ws-local) 
   2) Wait for it to complete and the app to be launched. Then close it. 
   3) Run a ti clean 
   4) Compile and install the app again 
   5) Observe error 
   
   [INFO] Project built successfully in 1m 5s 162ms 
   
   [ERROR] Error: Failed to install app: Found bundle: C:\Users\karom\.titanium\vsbuild\BlankApp\win10.x86\AppPackages\BlankApp\BlankApp_1.16.10.1_Test\BlankApp_1.16.10.1_x86.appxbundle 
   
   Installing app... 
   Found dependency package(s): 
   C:\Users\karom\.titanium\vsbuild\BlankApp\win10.x86\AppPackages\BlankApp\BlankApp_1.16.10.1_Test\Dependencies\x86\Microsoft.VCLibs.x86.14.00.appx 
   C:\Users\karom\.titanium\vsbuild\BlankApp\win10.x86\AppPackages\BlankApp\BlankApp_1.16.10.1_Test\Dependencies\x64\Microsoft.VCLibs.x64.14.00.appx 
   Add-AppxPackage : Deployment failed with HRESULT: 0x80073CFB, The provided package is already installed, and reinstallation of the package was blocked. Check the AppXDeployment-Server event log for details. 
   
   Deployment of package com.propelics.blankApp_1.16.10.1_x86__d7c8pgvss6ysm was blocked because the provided package has the same identity as an already-installed package but the contents are different. Increment the version number of the package to be installed, or remove the old package for every user on 
   the system before installing this package. 
   
   NOTE: For additional information, look for [ActivityId] b4aafe06-b585-0004-3ead-bcb485b5d301 in the Event Log or use the command line Get-AppxLog -ActivityID b4aafe06-b585-0004-3ead-bcb485b5d301 
   
   At C:\Users\karom\.titanium\vsbuild\BlankApp\win10.x86\AppPackages\BlankApp\BlankApp_1.16.10.1_Test\Add-AppDevPackage.ps1:388 char:13 
   + Add-AppxPackage -Path $DeveloperPackagePath.FullName -Dep ... 
   + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
   + CategoryInfo : ResourceExists: (C:\Users\karom\..._x86.appxbundle:String) [Add-AppxPackage], PSInvalidOperationException 
   + FullyQualifiedErrorId : DeploymentError,Microsoft.Windows.Appx.PackageManager.Commands.AddAppxPackageCommand 
   
   Error: Could not install the app. 
   
   at C:\ProgramData\Titanium\mobilesdk\win32\7.1.0.v20180301114750\node_modules\windowslib\lib\winstore.js:104:14 
   at ChildProcess.<anonymous> (C:\ProgramData\Titanium\mobilesdk\win32\7.1.0.v20180301114750\node_modules\node-appc\lib\subprocess.js:60:3) 
   at emitTwo (events.js:126:13) 
   at ChildProcess.emit (events.js:214:7) 
   at maybeClose (internal/child_process.js:925:16) 
   at Process.ChildProcess._handle.onexit (internal/child_process.js:209:5) 
   
   
   This is a bug, right? 
   
   
   
   Environment details: 
   {quote}
   $ appc info 
   Appcelerator Command-Line Interface, version 7.0.2 
   Copyright (c) 2014-2018, Appcelerator, Inc. All Rights Reserved. 
   
   Operating System 
   Name = Microsoft Windows 10 Pro 
   Version = 10.0.16299 
   Architecture = 64bit 
   <h4>CPUs = 8 </h4>
   Memory = 15.9GB 
   
   Node.js 
   Node.js Version = 8.9.3 
   npm Version = 5.5.1 
   
   Appcelerator CLI 
   Installer = 4.2.12 
   Core Package = 7.0.2 
   
   Titanium CLI 
   CLI Version = 5.0.14 
   node-appc Version = 0.2.41 
   
   Titanium SDKs 
   7.1.0.v20180301114750 
   Version = 7.1.0 
   Install Location = C:\ProgramData\Titanium\mobilesdk\win32\7.1.0.v20180301114750 
   Platforms = android, windows 
   git Hash = 764bcdd 
   git Timestamp = 3/1/2018 19:52 
   node-appc Version = 0.2.43 
   7.0.2.GA 
   Version = 7.0.2 
   Install Location = C:\ProgramData\Titanium\mobilesdk\win32\7.0.2.GA 
   Platforms = android, windows 
   git Hash = 5ef0c56 
   git Timestamp = 2/9/2018 19:02 
   node-appc Version = 0.2.43 
   
   Microsoft (R) Visual Studio 
   14.0 (selected) 
   Path = C:\Program Files (x86)\Microsoft Visual Studio 14.0\ 
   CLR Version = v4.0.30319 
   MSBuild Version = v14.0.25420.1 
   Windows Phone SDKs = not installed 
   
   Microsoft (R) Windows Phone SDK 
   10.0 (selected) 
   Path = C:\Program Files (x86)\Windows Kits\10\ 
   8.1 **Not supported by Titanium SDK 7.1.0.v20180301114750** 
   Path = C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.1\ 
   
   Windows PowerShell 
   Enabled = yes 
   {quote}</li>
<li>Kota Iguchi 2018-03-09

   {quote}
    3) Run a ti clean
   {quote}
   
   You don't need to run <code>ti clean</code> on each time on build. Would you try it without <code>ti clean</code>? It means resets the auto increment numbering. We actually designed it that way, in this case you need to 
   
   * Stop using <code>ti clean</code> on each build
   
   Or,
   
   * Use <code>--forceUnInstall</code> flag to explicitly uninstall existing app
   
   I would think this is by design but we could improve error message though.
   </li>
<li>Shuo Liang 2018-03-09

   Thanks a lot for info. Will forward to customer. </li>
</ol>


<p><a href="/TIMOB/TIMOB-25743.json">JSON Source</a></p>