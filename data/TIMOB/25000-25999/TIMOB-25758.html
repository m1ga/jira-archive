---
title: "[TIMOB-25758] iOS: Image will be cut in the bottom after apply imageAsCompressed and imageAsSized"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2018-02-07T08:46:32.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Shuo Liang</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2018-02-07T07:26:43.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-07T08:46:32.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Reproduce</h4>
1.Add following simple code to classic app.
2.Run the app on iOS device.
3.Click button to pick one of your image, then display it. You will see the image is cut in the bottom.
<code><pre>
var win = Ti.UI.createWindow({
    backgroundColor:"white"
});

var button = Ti.UI.createButton({
    title : 'Open Gallery',
    width : 100,
    height : 50,
    top : 20
});

var imageView = Ti.UI.createImageView({
    top : 100
});

button.addEventListener('click', function(){
    Ti.Media.openPhotoGallery({
        success: function(event) {
            Ti.API.debug(event.mediaType);
            if (event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {
                
                var obj = calculateAspectRatioFit(event.media.width, event.media.height, 700, 700);
                var resizedBlob = event.media.imageAsResized(obj.width, obj.height);
                resizedBlob.imageAsCompressed(0.7);

                imageView.image = resizedBlob;
                win.add(imageView);
            }
        },
        cancel: function() {},
        error: function(e) {
            Ti.API.error(e.code);
        },
    });
});

win.add(button);
win.open()

function calculateAspectRatioFit(srcWidth, srcHeight, maxWidth, maxHeight) {
    var ratio = Math.min(maxWidth / srcWidth, maxHeight / srcHeight);

    return {
        width : srcWidth * ratio,
        height : srcHeight * ratio
    };
}
</pre></code>

<h4>Note.</h4>
Seems only happened to iOS.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-25758_64814/01517988429_original.png">01517988429_original.png</td></td><td>2018-02-07T08:08:10.000+0000</td><td>1146976</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-25758_64813/IMG_4269.png">IMG_4269.png</td></td><td>2018-02-07T08:07:57.000+0000</td><td>1180818</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Shuo Liang 2018-02-07

   Duplicate to TIMOB-25336</li>
</ol>


<p><a href="/TIMOB/TIMOB-25758.json">JSON Source</a></p>