---
title: "[TIMOB-25807] Hyperloop - ES6: Cannot find scoped "this" methods anymore"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2018-03-21T10:00:52.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Hyperloop 3.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Hyperloop</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2018-02-24T19:05:01.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:37:03.000+0000</td></tr>
</table>

<h3>Description</h3>

When using ES6 in Hyperloop methods, e.g. 
<code><pre>
    var ButtonDelegate = Hyperloop.defineClass('ButtonDelegate', 'NSObject');

    ButtonDelegate.addMethod({
        selector: 'buttonPressed:',
        instance: true,
        arguments: ['UIButton'],
        callback: (sender) => { 
            if (this.buttonPressed) {
//              ^-- Here is the issue - it cannot find the declared method
                this.buttonPressed(sender);
            }
        }
    });

    var delegate = new ButtonDelegate();

    // Not found when being used in "Hyperloop.addMethod"
    delegate.buttonPressed = function(sender) {
        alert('Button pressed!');
    };
</pre></code>
the <code>this.buttonPressed</code> method cannot be found, although declared. We use this pattern many times, to assign methods to instances afterwards. If there is a better approach, we should replace the usages in the hyperloop-examples sample app.

*EDIT*: It only seems to be an issue if the delegate is in the same file as its usage. It works fine for other delegates / sub classes like [here](<a href="https://github.com/appcelerator/hyperloop-examples/blob/master/app/lib/ios/subclasses/tableviewdatasourcedelegate.js#L9)." rel="nofollow" target="_blank">https://github.com/appcelerator/hyperloop-examples/blob/master/app/lib/ios/subclasses/tableviewdatasourcedelegate.js#L9).</a>

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2018-03-11

   [~cwilliams] Not sure if this is an SDK- or Hyperloop- or code-design-related issue.</li>
<li>Hans Knöchel 2018-03-21

   Resolving as <code>Invalid</code> as ES6 arrow functions have a different scope. To solve this, simply use non-Arrow functions and make use of the global / file-wide <code>this</code> scope.</li>
<li>Eric Merriman  2018-08-06

   Closing as invalid. If incorrect, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25807.json">JSON Source</a></p>