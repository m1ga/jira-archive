---
title: "[TIMOB-25838] iOS: Horizontal/Vertical layout miscalculates percent width/height when default unit is not "dp""
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 6.3.0, Release 8.0.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>defaultunit, engSchedule, ios, layout, percent</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2018-03-06T02:30:57.000+0000</td></tr>
<tr><th>Updated</th><td>2019-04-16T16:16:10.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
When setting the "tiapp.xml" property "ti.ui.defaultunit" to a unit other than "dp", layouts "vertical" and "horizontal" will miscalculate percentage based "width" and "height" properties.

*Steps to Reproduce:*
<h4>Modify project's "tiapp.xml" with the below "ti.ui.defaultunit" property. (Sets it to pixels.)</h4>
<h4>Build and run the below JavaScript on an iOS device.</h4>
<h4>Observe the size of the gray rectangle. It's supposed to be 50% wide and 50% tall.</h4>

<code><pre>
<?xml version="1.0" encoding="UTF-8"?>
<ti:app xmlns:ti="<a href="http://ti.appcelerator.org" rel="nofollow" target="_blank">http://ti.appcelerator.org</a>">
	<property name="ti.ui.defaultunit" type="string">px</property>
</ti:app>
</pre></code>

<code><pre>
var window = Ti.UI.createWindow(
{
	layout: "vertical",
//	layout: "horizontal",
});
window.add(Ti.UI.createView(
{
	backgroundColor: "gray",
	borderColor: "black",
	borderWidth: "1dp",
	top: "25%",
	left: "25%",
	width: "50%",
	height: "50%",
}));
window.open();
</pre></code>

*Result:*
Looks like attached "Screenshot-Bad.png" where the gray rectangle is *NOT* centered onscreen, with a 50% width and 50% height.

*Expected Result:*
Should look like attached "Screenshot-Good.png".

*Notes:*
* This bug does not occur if "ti.ui.defaultunit" is set to "dp".
* This bug does not occur with "composite" layouts, which works with all units.
* This is not an issue with percentage based "top", "bottom", "left", or "right" properties.
* This is not an issue on Android.


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25838_64925/Screenshot-Bad.png">Screenshot-Bad.png</td></td><td>2018-03-06T02:28:23.000+0000</td><td>20057</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25838_64924/Screenshot-Good.png">Screenshot-Good.png</td></td><td>2018-03-06T02:28:27.000+0000</td><td>20007</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-25838.json">JSON Source</a></p>