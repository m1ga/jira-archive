---
title: "[TIMOB-25884] Windows: Add "Ti.Platform.architecture" support"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2018-03-19T22:42:22.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>architecture, windows</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2018-03-19T21:05:36.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-19T22:42:22.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
On Windows, the <code>Ti.Platform.architecture</code> property returns an empty string.
[PlatformModule.cpp#L30](<a href="https://github.com/appcelerator/titanium_mobile_windows/blob/7b0db6e247c1662c535b2e4bd3f0c141ae95a5a0/Source/TitaniumKit/src/PlatformModule.cpp#L30)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/blob/7b0db6e247c1662c535b2e4bd3f0c141ae95a5a0/Source/TitaniumKit/src/PlatformModule.cpp#L30)</a>

It should return the same CPU architecture strings that our APS library uses when collection analytics. Either call the APS library's method or copy and paste the code into the Windows Titanium code.
[Analytics.cs#L174](<a href="https://github.com/appcelerator/aps_sdk/blob/195633dd10a37d96ecf52be35c0c712dff5ef331/windows/Analytics.cs#L174)" rel="nofollow" target="_blank">https://github.com/appcelerator/aps_sdk/blob/195633dd10a37d96ecf52be35c0c712dff5ef331/windows/Analytics.cs#L174)</a>

*Note:*
Ideally, we should return a more descriptive string when running on an ARM processor. On iOS, we return the following architecture strings:
* arm
* armv6
* armv7
* armv7s
* arm64
* x86_64
* i386

Odds are the "arm" string will never be returned on iOS and will tend to return "armv7", "armv7s", or "arm64".
[APSUtility.m#L24](<a href="https://github.com/appcelerator/aps_sdk/blob/195633dd10a37d96ecf52be35c0c712dff5ef331/ios/support/analytics/APSAnalytics/APSUtility.m#L24)" rel="nofollow" target="_blank">https://github.com/appcelerator/aps_sdk/blob/195633dd10a37d96ecf52be35c0c712dff5ef331/ios/support/analytics/APSAnalytics/APSUtility.m#L24)</a>


<h3>Comments</h3>

<ol>
<li>Ewan Harris 2018-03-19

   [~jquick] Windows does implement this, see <a href="https://github.com/appcelerator/titanium_mobile_windows/blob/7b0db6e247c1662c535b2e4bd3f0c141ae95a5a0/Source/Ti/src/Platform.cpp#L71-L89" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/blob/7b0db6e247c1662c535b2e4bd3f0c141ae95a5a0/Source/Ti/src/Platform.cpp#L71-L89</a>
   
   The Windows architecture is different to the rest, TitaniumKit is intended to be a common cross-platform C++ layer that stubs all APIs and implements those that can be done in a cross platform way. So your link points to the stub, and the link I've provided implements the Windows specific APIs to determine this (I'm sure Kota can explain this 100x better than I can :) )</li>
<li>Joshua Quick 2018-03-19

   Oh shoot. Well if this is the case, then we can close this ticket out.</li>
<li>Joshua Quick 2018-03-19

   Already implemented.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25884.json">JSON Source</a></p>