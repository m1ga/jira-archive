---
title: "[TIMOB-25889] Android: Emulator builds should not add additional permissions"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-01-27T22:30:28.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, engSchedule, geolocation, manifest, permissions, tiapp</td></tr>
<tr><th>Reporter</th><td>Rene Pot</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2018-03-20T16:35:17.000+0000</td></tr>
<tr><th>Updated</th><td>2020-01-27T22:30:28.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
When building with deployment type "development" (ie: for the Android emulator), the Titanium build system adds the following permissions to the "AndroidManifest.xml" file, even if they're not defined in the "tiapp.xml" file.
* <code>android.permission.ACCESS_COARSE_LOCATION</code>
* <code>android.permission.ACCESS_FINE_LOCATION</code>
* <code>android.permission.ACCESS_MOCK_LOCATION</code>

The above behavior was intentional and was intended for fast incremental builds with LiveView and the emulator. However, this behavior has been known to cause confusion.

*To-Do:*
In Titanium 9.0.0, we should remove the above behavior. The build system should produce a consistent "AndroidManifest.xml" for all deployment types (ie: "test", "development", and "production").

*Note:*
Titanium should still include its default permissions listed below.
* <code>android.permission.INTERNET</code>
* <code>android.permission.ACCESS_WIFI_STATE</code>
* <code>android.permission.ACCESS_NETWORK_STATE</code>
* <code>android.permission.WRITE_EXTERNAL_STORAGE</code>

If you don't want the above default permissions injected, then you can set the following in your "tiapp.xml" file to override this behavior.
<code><pre>
<ti:app xmlns:ti="<a href="http://ti.appcelerator.org" rel="nofollow" target="_blank">http://ti.appcelerator.org</a>">
	<override-permissions>true</override-permissions>
</ti:app>
</pre></code>


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-25889_64979/AndroidManifest.xml">AndroidManifest.xml</td></td><td>2018-03-20T16:34:02.000+0000</td><td>2234</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2018-03-20

   This is not a bug.
   
   A location permission will be automatically injected if:
   <h4>You use the "Ti.Geolocation" API.</h4>
   <h4>You include a module that injects/requires this permission.</h4>
   <h4>When building with deploy-type "development". _(The default when building for the emulator.)_</h4>
   
   I suspect #3 is happening to you above. Try building for a real device or for deploy-type "test". Or do a release/production build. As long as your app is not doing #1 and #2 above, the generated "AndroidManifest.xml" won't contain the location permissions.
   
   <code><pre>appc run -p android --deploy-type test --build-only</pre></code>
   </li>
<li>Rene Pot 2018-03-20

   [~jquick] yep that indeed appears to be happening. It is not happening when I run the command you provided. 
   
   Is there any reason for it to happen on dev builds though? 
   
   I'll point the person who reported the issue to this ticket, asking if he can also reproduce what I can now. Thanks for checking it</li>
<li>Joshua Quick 2018-03-20

   To be honest, I don't know what the reasoning there is for this. And I agree that it's a bit confusing.
   
   The deploy-type of "development" and "test" is something that was inherited from the iOS build system where a simulator build *+is+* completely different than a mobile test build. On Android, it doesn't have to be this way (an APK is universal), but it was made this way to be consistent.
   </li>
<li>Rene Pot 2018-03-21

   The user confirmed it is fixed also when doing the command provided. So unless this is unwanted to happen for development builds this ticket can be resolved</li>
<li>Joshua Quick 2020-01-27

   This task was completed by ticket [TIMOB-19300] for Titanium 9.0.0.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25889.json">JSON Source</a></p>