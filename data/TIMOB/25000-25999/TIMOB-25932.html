---
title: "[TIMOB-25932] Android: Cannot build SDK with JDK 10 (missing javah tool)"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-08-20T15:59:49.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.5.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, ant, build, jdk, sdk</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2018-04-04T19:04:55.000+0000</td></tr>
<tr><th>Updated</th><td>2018-10-15T20:25:33.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
If you attempt to build the Titanium SDK (ie: titanium_mobile) with JDK 10 installed, the build will fail due to a missing "javah" tool. This tool has been removed in JDK 10.

*Steps to reproduce:*
<h4>Instal JDK 10 if not done already.</h4>
<h4>Open the terminal.</h4>
<h4><code>cd</code> to the <code>titanium_mobile/build</code> directory.</h4>
<h4>Enter: <code>node scons.js build android</code></h4>

*Result:*
Build fails due to missing "javah" tool.

*Work-Around:*
Build with JDK 8 or 9.

*Recommended Solution:*
Remove Titanium's usage of the "javah" tool and the <code>#include</code>'s to the generated headers files. They're not needed.

The generated header files and function prototypes are useless by themselves. We have to create the function implementation ourselves, which we've already done and they're already publicly exported via <code>JNIEXPORT</code> in their respective C++ files. Since the implementation side already exports the functions, the function prototypes are not needed.
<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/runtime/v8/src/native/JSDebugger.cpp" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/runtime/v8/src/native/JSDebugger.cpp</a>
<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/runtime/v8/src/native/V8Object.cpp" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/runtime/v8/src/native/V8Object.cpp</a>
<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/runtime/v8/src/native/V8Runtime.cpp" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/runtime/v8/src/native/V8Runtime.cpp</a>


----
*Original Description:*
JDK 10 has dropped the <code>javah</code> tool (<a href="http://openjdk.java.net/jeps/313)" rel="nofollow" target="_blank">http://openjdk.java.net/jeps/313)</a> which is required by our tooling when building the Android platform. We need to use <code>javac</code>'s <code>-h</code> flag instead. <code>javah</code> generated the header files from the compiled <code>.class</code> files in the jars, however <code>javac -h</code> used the original <code>.java</code> files.

We'll likely have to move the header generation out of the native compile step and into the Java compile step. We can do this by specifying the <code>nativeheaderdir</code> attribute in the <code>javac</code> task in the <code>common.xml</code> file. However, the <code>nativeheaderdir</code> attribute is only supported in ant 1.9.8+ (<a href="https://ant.apache.org/manual/Tasks/javac.html)" rel="nofollow" target="_blank">https://ant.apache.org/manual/Tasks/javac.html)</a> and we ship <code>ant</code> 1.8.0 with Titanium. The Android build also depends on <code>ant-contrib</code> and <code>ant-nodeps</code> which may not be compatible with ant 1.9.8 or newer.

In the meantime, we'll have to use JDK 9 to build the Titanium SDK.

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2018-08-15

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/10257" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10257</a></li>
<li>Keerthi Mahalingam 2018-10-15

   Verified the fix on master 7.5 version. build successfully  built and run on android in Mac as well  as windows. Closing.
   <code><pre>
   Mac configuration:
     Name                        = Mac OS X
     Version                     = 10.13.6
     Architecture                = 64bit
   Node.js
     Node.js Version             = 8.9.1
     npm Version                 = 5.5.1
   Titanium CLI
     CLI Version                 = 5.1.1
   Titanium SDK
     SDK Version                 =master 7.5
   Device				=Pixel 2 xl android 8 emulator
   </pre></code> 
   <code><pre>
   Windows configurations
      Name                        = Microsoft Windows 10 Pro 
     Version                     = 10.0.17134 
     Architecture                = 64bit 
     Node.js 
     Node.js Version             = 8.9.1 
     npm Version                 = 5.5.1 
   Titanium CLI 
     CLI Version                 = 5.1.1 
   Titanium SDK 
     SDK Version                 = master 7.5 
   Device 
   Samsung s5 android 6 device
   </pre></code></li>
</ol>


<p><a href="/TIMOB/TIMOB-25932.json">JSON Source</a></p>