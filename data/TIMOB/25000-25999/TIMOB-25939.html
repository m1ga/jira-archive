---
title: "[TIMOB-25939] Android: Improve horizontal ScrollView scrolling that is set up with a RefreshControl"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-04-18T00:25:37.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>ScrollView, android, refreshcontrol</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2018-04-05T21:53:34.000+0000</td></tr>
<tr><th>Updated</th><td>2018-06-21T21:35:14.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
When a horizontal <code>ScrollView</code> has been assigned a <code>RefreshControl</code>, it is difficult to scroll it horizontally. While scrolling it horizontally, if you slightly drag your finger up/down, the <code>RefreshControl</code> will then cancel horizontal scrolling and then steal/intercept all touch events.

*Steps to Reproduce:*
<h4>Build and run the below code on Android.</h4>
<h4>Start dragging the <code>ScrollView</code> horizontally.</h4>
<h4>As you drag it horizontally, drag down without lifting your finger from the screen.</h4>
<h4>Notice that the <code>RefreshControl</code> progress circle is being pulled down by your finger.</h4>
<h4>As you drag down, attempt to drag horizontally without lifting your finger from the screen.</h4>
<h4>Notice that you can no longer scroll the <code>ScrollView</code> horizontally anymore.</h4>

<code><pre>
var window = Ti.UI.createWindow(
{
	fullscreen: true,
	layout: "vertical",
	backgroundColor: "white",
});
var refreshControl = Ti.UI.createRefreshControl(
{
	title: Ti.UI.createAttributedString({ text: "Refreshing" }),
	tintColor: "red",
});
refreshControl.addEventListener("refreshstart", function(e) {
	Ti.API.info("@@@ 'refreshstart' event received.");
	setTimeout(function() {
		if (!scrollView.refreshCount) {
			scrollView.refreshCount = 1;
		}
		else {
			scrollView.refreshCount++;
		}
		scrollView.add(Ti.UI.createLabel(
		{
			text: "Refresh " + scrollView.refreshCount.toString(),
			textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER,
			color: "white",
			backgroundColor: "gray",
			left: "5dp",
		}));
		refreshControl.endRefreshing();
	}, 2000);
});
var scrollView = Ti.UI.createScrollView(
{
	refreshControl: refreshControl,
	layout: "horizontal",
	scrollType: "horizontal",
	showVerticalScrollIndicator: false,
	showHorizontalScrollIndicator: true,
	width: Ti.UI.FILL,
	height: "90%",
});
scrollView.add(Ti.UI.createLabel(
{
	text: "Pull\nDown\nto\nRefresh",
	textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER,
	color: "white",
	backgroundColor: "black",
	height: Ti.UI.FILL,
}));
for (var index = 1; index &lt;= 10; index++) {
	scrollView.add(Ti.UI.createLabel(
	{
		text: "Label " + index.toString(),
		textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER,
		color: "white",
		backgroundColor: "gray",
		left: "5dp",
	}));
}
window.add(scrollView);
window.add(Ti.UI.createLabel(
{
	text: "Horizontal ScrollView",
	textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER,
	color: "white",
	backgroundColor: "blue",
	width: Ti.UI.FILL,
	height: Ti.UI.FILL,
}));
window.open();
</pre></code>

*Expected Result:*
Once you start scrolling horizontally, you should not be able to pull down the <code>RefreshControl</code> progress circle. It should only allow horizontally scrolling. And if you start dragging vertically, it should only pull down the <code>RefreshControl</code> and not allow horizontal scrolling of the <code>ScrollView</code>. It should only be one or the other since it's too difficult for a person to drag perfectly horizontally or vertically.

*Cause:*
This happens because Google's Java <code>HorizontalScrollView</code> class does not support nested scrolling. Google's <code>SwipeRefreshLayout</code> ignores a <code>requestDisallowInterceptTouchEvent()</code> method calls from child views that do not support nested scrolling, which causes it to intercept all touch events once you drag vertically.
[SwipeRefreshLayout.java#L735](<a href="https://github.com/aosp-mirror/platform_frameworks_support/blob/master/core-ui/src/main/java/android/support/v4/widget/SwipeRefreshLayout.java#L735)" rel="nofollow" target="_blank">https://github.com/aosp-mirror/platform_frameworks_support/blob/master/core-ui/src/main/java/android/support/v4/widget/SwipeRefreshLayout.java#L735)</a>

*Note:*
This is not an issue with a vertical <code>ScrollView</code> using a <code>RefreshControl</code>. This is only an issue with a horizontal <code>ScrollView</code>.

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2018-04-06

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/9985" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9985</a></li>
<li>Lokesh Choudhary 2018-04-18

   FR Passed. PR merged.</li>
<li>Lokesh Choudhary 2018-06-21

   Verified the fix in SDK  7.3.0.v20180618182516.
   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25939.json">JSON Source</a></p>