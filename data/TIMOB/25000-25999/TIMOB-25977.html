---
title: "[TIMOB-25977] Android: AlertDialog not firing \"click\" event when canceled"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-04-19T22:36:14.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>alertdialog, andoid, eventlistener, parity</td></tr>
<tr><th>Reporter</th><td>josh.mocek</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2018-04-19T14:31:26.000+0000</td></tr>
<tr><th>Updated</th><td>2018-06-19T17:58:42.000+0000</td></tr>
</table>

<h3>Description</h3>

The alert dialog doesn't fire a cancel event if you press outside of the alertDialog box in 7.1.0. The event listener actually doesn't console anything if done this way. If you switch it back to 6.2.2 it works correctly and fires the eventlistener when the user touches outside of the alert dialog.

Make a sample AppSellHerHater project and paste the index.js below. Then build to android on 7.1.0 and watch it not work. Then build with 6.2.2 and watch it work correctly.

<code><pre>
//Replace the index.js code with this
function doClick(e) {
	myAlert.show();
}

$.index.open();

var myAlert = Ti.UI.createAlertDialog({
	cancel: 1,
	buttonNames: ['Ok', 'Cancel'],
	message: "Event listener doesn't fire if you press outside of alert on android...",
	title: 'Confirm Ok'
});

myAlert.addEventListener('click', function(e) {
	console.info('e.index: ' + e.index);
	$.label.text = (e.index == 0) ? "You pressed 'Ok'..." : "You cancelled the alert...";
	alert('e.index: ' + e.index);
});
</pre></code>


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2018-04-19

   I believe the change for [TIMOB-25919] will resolve this issue as well.
   That ticket's change is scheduled to be made in Titanium 7.2.0. Stay tuned.</li>
<li>Joshua Quick 2018-04-19

   Classic app test code...
   
   <code><pre>
   var window = Ti.UI.createWindow();
   var button = Ti.UI.createButton({ title: "Show Alert" });
   button.addEventListener("click", function(e) {
   	var dialog = Ti.UI.createAlertDialog({
   		title: "Alert Dialog",
   		message: "This is the alert message.",
   		buttonNames: ["OK", "Cancel", "Maybe"],
   		cancel: 1,
   	});
   	dialog.addEventListener("click", function(e) {
   		Ti.API.info("@@@ Dialog 'click' index: " + e.index + ", button: " + e.button + ", cancel: " + e.cancel);
   	});
   	dialog.show();
   });
   window.add(button);
   window.open();
   </pre></code>
   </li>
<li>Joshua Quick 2018-04-19

   Confirmed fixed by [TIMOB-25919]</li>
<li>josh.mocek 2018-04-26

   Just making sure this is also resolved for when the back button is pressed?</li>
<li>Joshua Quick 2018-04-26

   Yes. We've confirmed that pressing the back button will fire a "click" event matching the cancel button index as well with the above fix.</li>
<li>Lokesh Choudhary 2018-06-19

   Verified the fix with SDK 7.3.0.v20180618182516.
   
   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-25977.json">JSON Source</a></p>