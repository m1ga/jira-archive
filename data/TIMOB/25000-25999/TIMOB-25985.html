---
title: "[TIMOB-25985] TiAPI: Disable accessibility features on Ti.UI.Button by using AttributedString"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-06-21T14:42:45.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.5.0</td></tr>
<tr><th>Components</th><td>Android, iOS</td></tr>
<tr><th>Labels</th><td>android, ios</td></tr>
<tr><th>Reporter</th><td>nicolomonili</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2018-04-24T08:00:15.000+0000</td></tr>
<tr><th>Updated</th><td>2018-09-28T14:23:04.000+0000</td></tr>
</table>

<h3>Description</h3>

In my apps i use font-icons for:
- title of buttons
- text of label

*Example:*
<code><pre>
var IconicFont = require('IconicFont');
var Icons = new IconicFont({
	font: 'listIcons'
});
var btn = Ti.UI.createButton({
	height : 50,
        width : 50,
	color: 'white',
	font: {
		fontSize: 24,
		fontFamily: Icons.fontfamily
	},
	title: Icons.icon("add"),
	textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER,
	verticalAlign: Ti.UI.TEXT_VERTICAL_ALIGNMENT_CENTER,
});
</pre></code>

If the user active this option _Settings / General / Accessibility / Button Shapes_ , the result is the attached image, an underline on every buttons. I know this is normal, but i would like to know if it was possible to disable this effect.

I tried to active this option *accessibilityHidden*, but without result.
I also thought about using the *attributeString* (with the param [Titanium.UI.ATTRIBUTE_UNDERLINE_STYLE_NONE](<a href="http://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/platform/latest/#</a>!/guide/Attributed_Strings-section-src-37538231_AttributedStrings-Underline)), but it's only for _Label_, _TextArea_ or _TextField_.

Info link1: [<a href="https://stackoverflow.com/questions/23246543/remove-underline-on-uibutton-in-ios-7" rel="nofollow" target="_blank">https://stackoverflow.com/questions/23246543/remove-underline-on-uibutton-in-ios-7</a>](<a href="https://stackoverflow.com/questions/23246543/remove-underline-on-uibutton-in-ios-7)" rel="nofollow" target="_blank">https://stackoverflow.com/questions/23246543/remove-underline-on-uibutton-in-ios-7)</a>
Info link2: [<a href="https://developer.apple.com/documentation/uikit/accessibility/uiaccessibility" rel="nofollow" target="_blank">https://developer.apple.com/documentation/uikit/accessibility/uiaccessibility</a>]

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-25985_65080/Schermata 2018-04-24 alle 09.40.58.png">Schermata 2018-04-24 alle 09.40.58.png</td></td><td>2018-04-24T07:43:08.000+0000</td><td>30161</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2018-04-24

   Thanks for raising this! You could expose the native <code>attributedTitleForState:</code> API in the SDK and we'd be happy to review it. Moving to TIMOB to track this.
   
   *EDIT*: You could try to:
   1. Add the following to your TiUIButton.m
   <code><pre>
   - (void)setAttributedString_:(id)arg
   {
   #ifdef USE_TI_UIATTRIBUTEDSTRING
     ENSURE_SINGLE_ARG(arg, TiUIAttributedStringProxy);
     [[self proxy] replaceValue:arg forKey:@"attributedString" notification:NO];
     [[self button] setAttributedTitle:[arg attributedString] forState:UIControlStateNormal];
     [(TiViewProxy *)[self proxy] contentsWillChange];
   #endif
   }
   </pre></code>
   2. Add the TiUIAttributedString import to the top of the file:
   <code><pre>
   #ifdef USE_TI_UIATTRIBUTEDSTRING
   #import "TiUIAttributedStringProxy.h"
   #endif
   </pre></code>
   3. Use the new property "attributedString" on the button and pass a well configured Ti.UI.AttributedString instance.</li>
<li>nicolomonili 2018-04-24

   I have to modify this file _Appcelerator Workspace / App Name / build / iphone / Classes / TiUIButton.m_ or this one _User / Library / Application Support / Titanium / mobilesdk / osx / SDK_VERSION / iphone / Classes / TiUIButton.m_ ?</li>
<li>Hans Knöchel 2018-04-24

   What do you think? ;-) Spoiler: It's the Application Support one, since the build directory is flushed on clean builds.</li>
<li>nicolomonili 2018-04-24

   Yes, i understood it while i was writing. I'm doing some tests ..</li>
<li>Hans Knöchel 2018-04-24

   I am still not sure it solves it for you. Here is my test case:
   <code><pre>
   var win = Ti.UI.createWindow({
       backgroundColor: '#fff'
   });
   
   var text = '&lt;apple-emoji&gt;';
   
   var attr = Titanium.UI.createAttributedString({
       text: text,
       attributes: [
           // Remove underline
           {
               type: Titanium.UI.ATTRIBUTE_UNDERLINES_STYLE,
               value: Ti.UI.ATTRIBUTE_UNDERLINE_STYLE_NONE,
               range: [0, text.length]
           }
       ]
   });
   
   var btn = Ti.UI.createButton({
     attributedString: attr,
     textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER
   });
   
   win.add(btn);
   win.open();
   </pre></code>
   How can I enable the underlines as part of accessibility?</li>
<li>nicolomonili 2018-04-24

   _Settings / General / Accessibility / Button Shapes_</li>
<li>Hans Knöchel 2018-04-24

   Works like a charm :-).</li>
<li>nicolomonili 2018-04-24

   I can confirm, this edit works!
   
   By applying _Titanium.UI.ATTRIBUTE_UNDERLINES_STYLE_ it's possible to remove the underline effect added by the accessibility features -> Settings / General / Accessibility / Button Shapes
   </li>
<li>Hans Knöchel 2018-04-24

   Cool! I will prepare a pull request and schedule it for 7.3.0.</li>
<li>nicolomonili 2018-04-24

    I was hoping for the next release .. I'll wait, thanks!</li>
<li>Hans Knöchel 2018-04-25

    The next release is already closed for new features. I have added Android parity as well, so it will be worth waiting.</li>
<li>Hans Knöchel 2018-04-25

    PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/10010" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10010</a></li>
<li>Hans Knöchel 2018-06-21

    [~nicolomonili] The new feature was just added to master (7.4.0), have fun! And it was not moved from 7.3.0 to 7.4.0, but 7.4.0 is basically the new 7.3.0 because 7.2.0 squezzed in for GDPR compliance.</li>
<li>nicolomonili 2018-08-21

    So, it's in the actual 7.3.0.G.A ?</li>
<li>Hans Knöchel 2018-08-21

    it's in the "new new" 7.4.0, because it was moved out to make place for more critical bugs. The capacity of the quality engineering team is limited, so we wanted to focus on Android in that release. </li>
<li>Samir Mohammed 2018-09-28

    *Closing ticket.* Verified fix in SDK Version <code>7.5.0.v20180927102615</code> Able to disable accessibility features on Ti.UI.Button by using <code>AttributedString</code>.
    
    *FR Passed (Test Steps)*
    <h4>Created a new Titanium application </h4>
    <h4>Added the test case above by Hans in to the <code>app.js</code></h4>
    <h4>Ran the program </h4>
    <h4>Unable to see the button have an underline </h4>
    <h4>Uncommented <code> Ti.UI.ATTRIBUTE_UNDERLINE_STYLE_NONE</code></h4>
    <h4>Able to see the underline again</h4>
    
    *Test Environment*
    <code><pre>
    APPC Studio: 5.1.0.201808080937
    iPhone 6 (12.0)
    APPC CLI: 7.0.7-master.4
    Operating System Name: Mac OS Mojave
    Operating System Version: 10.14
    Node.js Version: 8.9.1
    Xcode 10.0
    </pre></code>
    </li>
</ol>


<p><a href="/TIMOB/TIMOB-25985.json">JSON Source</a></p>