---
title: "[TIMOB-26031] Hyperloop: iOS - Constructor with block-argument is unable to return valid instance"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Hyperloop 3.0.5</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Hyperloop, iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Brian García</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2018-05-10T06:56:55.000+0000</td></tr>
<tr><th>Updated</th><td>2019-04-10T10:46:42.000+0000</td></tr>
</table>

<h3>Description</h3>

Trying to implement BraintreeDropIn the controller instance return null, as a result it can't be presented. 



<code><pre>
var BraintreeDropIn = require('BraintreeDropIn/BraintreeDropIn');
	var BTDropInRequest = require('BraintreeDropIn/BTDropInRequest');
	var BTDropInController = require('BraintreeDropIn/BTDropInController');
	var BTDropInResult = require('BraintreeDropIn/BTDropInResult');
	var NSError = require('Foundation/NSError');
	var TiApp = require('Titanium/TiApp');
	var request = BTDropInRequest.alloc().init();
	var token ="sometoken"
var controller = BTDropInController.alloc().init();
	var result = BTDropInResult.alloc().init();
	var error = new NSError();
	console.log(controller, result, error);
	var dropIn = BTDropInController.alloc().initWithAuthorizationRequestHandler(token, request, function (controller, result, error) {
		console.log('here');
	});
	console.log(request);
	console.log(dropIn);

	TiApp.app().showModalController(dropIn, true);
</pre></code>
 

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26031_65149/build_iphone.log">build_iphone.log</td></td><td>2018-05-10T06:57:22.000+0000</td><td>575625</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26031_65147/metabase-10-iphonesimulator-985858376b81cabfa6f3b13fd4210dfe.h">metabase-10-iphonesimulator-985858376b81cabfa6f3b13fd4210dfe.h</td></td><td>2018-05-10T06:56:09.000+0000</td><td>20077</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26031_65146/metabase-cocoapods-bcdc13d42012d5143d2548c404186f3a.json">metabase-cocoapods-bcdc13d42012d5143d2548c404186f3a.json</td></td><td>2018-05-10T06:56:09.000+0000</td><td>18541</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26031_65144/metabase-mappings-iphonesimulator-10.json">metabase-mappings-iphonesimulator-10.json</td></td><td>2018-05-10T06:56:11.000+0000</td><td>731986</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26031_65145/metabase-mappings-iphonesimulator-8.0.json">metabase-mappings-iphonesimulator-8.0.json</td></td><td>2018-05-10T06:56:10.000+0000</td><td>731989</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26031_65143/metadata-framework-availability.json">metadata-framework-availability.json</td></td><td>2018-05-10T06:56:09.000+0000</td><td>2106</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26031_65148/Podfile">Podfile</td></td><td>2018-05-10T06:56:00.000+0000</td><td>325</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26031_65142/symbol_references.json">symbol_references.json</td></td><td>2018-05-10T06:56:09.000+0000</td><td>18118</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2018-05-11

   Hello, Please share a full reproducible code/project for us to test. Thanks.</li>
<li>Hans Knöchel 2018-05-11

   Looks valid to me, moving to TIMOB! But I am wondering why this specific constructor would fail.</li>
<li>Brian García 2018-05-11

   Another one: 
   <code><pre>
   var BTAppSwitch = require("Braintree/BTAppSwitch");   
   BTAppSwitch.setReturnURLScheme("com.demo.braintree.payments"); // returns an error regarding method setReturnURLScheme doesn't exist
   BTAppSwitch.returnURLScheme = "com.demo.braintree.payments";//does not have any effect
   
   </pre></code></li>
<li>Alberto Marcone 2019-04-10

   I'm experiencing the same exact issues on my project. Installed the pods:
   
   <code><pre>
   install! 'cocoapods',
            :integrate_targets =&gt; false
   
   platform :ios, '9.0'
   target 'BraintreeAlloy' do
   	use_frameworks!
   	pod 'Braintree'
   	pod 'BraintreeDropIn'
   	pod 'Braintree/PayPal'
   
   end
   </pre></code>
   
   added the first snippet from OP on my project, and I get the error
   
   <code><pre>
   Application tried to present a nil modal view controller on target
   </pre></code>
   
   the controller is indeed null.
   
   I get the same error from @bgarcia with the second snippet:
   <code><pre>
   "BTAppSwitch.setReturnURLScheme is not a function.
   </pre></code>
   
   Can anyone look into this? I'm using TiSDK 8.0.1 and Hyperloop 4.0.2.</li>
</ol>


<p><a href="/TIMOB/TIMOB-26031.json">JSON Source</a></p>