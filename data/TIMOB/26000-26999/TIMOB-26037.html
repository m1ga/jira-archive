---
title: "[TIMOB-26037] Hyperloop: Accessing internal WebSocket library"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2019-07-30T01:09:12.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.1.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>android, engTriage, hyperloop, websocket</td></tr>
<tr><th>Reporter</th><td>Michael Gangolf</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2018-05-08T17:02:01.000+0000</td></tr>
<tr><th>Updated</th><td>2020-03-19T00:52:19.000+0000</td></tr>
</table>

<h3>Description</h3>

Titanium is shipping a <code>java_websocket.jar</code> in <code>/linux/7.1.1.GA/android/</code> which I can use in a normal Android module by just importing it with <code>import org.java_websocket.client.WebSocketClient;</code>. No need to put the jar into my project folder.

When trying the same with Hyperloop I always get the error, that the module is not found. When placing the jar into the project folder it complains about duplicate classes.

Is there a way to access the libraries inside the Android folder using Hyperloop?

Titanium SDK 7.1.1.GA


<h3>Comments</h3>

<ol>
<li>Alan Hutton 2019-07-02

   Devs can use our "titanium-socketio" module for websocket support.
   <a href="https://github.com/appcelerator-modules/titanium-socketio" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/titanium-socketio</a></li>
<li>Michael Gangolf 2019-07-02

   [~ahutton] we've tried to connect to a Websocket server (not a socket.io server!) with the Socketio module today and weren't able to do that because of <code>xhr poll</code> errors.
   
   I didn't try it but I guess the same error as in the description would appear for other modules inside the SDKs library folder (so you can't use exifinterface.jar or a support library in HL?)</li>
<li>Joshua Quick 2019-07-25

   [~michael], hyperloop currently does not support referencing Titanium's core JARs and the JARs it directly includes. It's not part of hyperloop's lookup path. And adding the WebSocket JAR to your "modules" directory will cause a build failure due to Java class collision (renaming the JAR file won't solve this).
   
   I think your only option is to make a native module and leverage the WebSocket JAR that Titanium already includes.
   
   Ideally, hyperloop should be changed to lookup Titanium's core JARs as well. I don't think there is any technical reason why this limitation should exist. But I don't see us doing this in the near future though.
   
   Side Note: Titanium uses web sockets for debugging.</li>
<li>Joshua Quick 2019-07-25

   Alternatively, you can use a command line tool to change the package names of all Java classes within the WebSocket JAR and include that in your "modules" directory. That would work, but it's kind of a slimy hack.
   <a href="https://stackoverflow.com/questions/13746737/hand-edit-a-jar-to-change-package-names" rel="nofollow" target="_blank">https://stackoverflow.com/questions/13746737/hand-edit-a-jar-to-change-package-names</a>
   
   That said, Google has a tool that transitions JARs from the old Google Support libraries to the new AndroidX libraries. For example, their tool change references from <code>android.support.v7.app.AppCompatActivity</code> to <code>androidx.appcompat.app.AppCompatActivity</code>. So, Google sanctions hacks like this. Not quite the same for what I'm suggesting above, but if you need any justification, here it is. :P
   <a href="https://developer.android.com/jetpack/androidx/migrate" rel="nofollow" target="_blank">https://developer.android.com/jetpack/androidx/migrate</a>
   </li>
<li>Michael Gangolf 2019-07-25

   Thanks [~jquick] for all the details! I think the module will be the easiest way :)</li>
<li>Joshua Quick 2019-07-30

   [~michael], I wrote this up as a feature request here: [TIMOB-27297]
   </li>
<li>Joshua Quick 2020-03-19

   [~michael], as of Titanium 9.0.0 you can do this now.
   
   I recommend that you copy our "titanium.socketio" module's "build.gradle" via the link below and copy it to your project's <code>./platform/android</code> directory.
   <a href="https://github.com/appcelerator-modules/titanium-socketio/blob/master/android/build.gradle" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/titanium-socketio/blob/master/android/build.gradle</a>
   
   This will allow hyperloop to access the Java classes you see in the below repo.
   <a href="https://github.com/socketio/socket.io-client-java" rel="nofollow" target="_blank">https://github.com/socketio/socket.io-client-java</a>
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-26037.json">JSON Source</a></p>