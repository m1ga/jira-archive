---
title: "[TIMOB-26081] CLI: Fix new Buffer deprecation warnings in build scripts"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-06-12T14:35:13.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.1.1, Release 7.3.0, Release 7.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.5.0</td></tr>
<tr><th>Components</th><td>CLI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2018-05-31T09:56:36.000+0000</td></tr>
<tr><th>Updated</th><td>2018-10-18T21:26:18.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

Node 10 produces a deprecation warning when the <code>new Buffer</code> constructor is used. See <a href="https://nodesource.com/blog/understanding-the-buffer-deprecation-in-node-js-10/" rel="nofollow" target="_blank">https://nodesource.com/blog/understanding-the-buffer-deprecation-in-node-js-10/</a> if you're curious

In most cases I believe the most appropriate swap for us to do is turn <code>new Buffer</code> into <code>Buffer.from</code>

In titanium_mobile there are two instances <a href="https://github.com/appcelerator/titanium_mobile/search?l=JavaScript&q=%22new+Buffer%22" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/search?l=JavaScript&q=%22new+Buffer%22</a>
, however checking all modules (*lib, node-appc, node-titanium-sdk etc.) would also be good as there deprecation warning will not be shown for code that resides under <code>node_modules</code> I believe.

We might also wish to update eslint-config-axway to include the <code>no-buffer-constructor</code> rule

Steps to reproduce to be added as replacement happens

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2018-06-05

   [~hknoechel] [~cwilliams] I've assigned you as reviewers, mainly due to the dropping of Node 4 here.
   
   cc [~emerriman] [~amukherjee], could you review my (lengthy) comment around dropping Node 4 in the PR, as I understand our [deprecation policy](<a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/guide/Axway_Appcelerator_Deprecation_Policy) I believe this is within our policies as Node 4 is now EOL
   
   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/10090" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10090</a></li>
<li>Keerthi Mahalingam 2018-10-18

   Verified the fix on SDK  7.5.0.v20181018071438 . don't see ERR_INVALID_CALLBACK error when building with node 10, able to built app successfully  and don't see  deprecation warnings from new Buffer usage.works fine. Closing.
   <code><pre>
   Operating System
     Name                        = Mac OS X
     Version                     = 10.13.6
     Architecture                = 64bit
   Node.js
      Node.js Version             = 10.12.0
     npm Version                 = 6.4.1
   Titanium CLI
     CLI Version                 = 5.1.1
   Titanium SDK
     SDK Version                 =7.5.0.v20181018071438
   Device                           =iPhone 6s iOS 12 ,Samsung s5 android 6.
   </pre></code></li>
</ol>


<p><a href="/TIMOB/TIMOB-26081.json">JSON Source</a></p>