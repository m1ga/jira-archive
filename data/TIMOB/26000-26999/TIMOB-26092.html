---
title: "[TIMOB-26092] Android: Way to use own custom libc++_shared.so file"
---
<table>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2018-08-17T21:19:57.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, libc++shared.so, module</td></tr>
<tr><th>Reporter</th><td>Shuo Liang</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2018-06-05T09:36:05.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-17T21:19:57.000+0000</td></tr>
</table>

<h3>Description</h3>

When building a Mobile app, Titanium is injecting/copying its own libc++_shared.so (e.g Android NDK r11) file. 
The file that is copied during the build phase is located within the Titanium SDK:  sdk/android/native/libs/*/libc++_shared.so. 
But when we provide our own libc++_shared.so file within Ti Module, it gets overridden. 

This step within the build phase makes it impossible to use a custom libc++_shared.so file
e.g. provided by a third party. Because in some cases, a library that a third party vendor provides relies on another libc++_shared.so file (thus NDK version) that might not be compatible with the built-in one provided by Titanium. 

Is there an approach or way to cope with this behaviour? I know that you shouldn't and can't mix libc++_shared.so files 
and this libc++_shared.so file is also crucial for Titanium features to work, but there should be a way to cope with this. 


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2018-06-11

   This is working as intended.
   
   If we were to allow the app developer to replace the standard C++ library Titanium's .so files link to, then you run the risk of running into a ABI compatibility issue with Titanium's prebuilt .so libraries. It would be the reverse issue that you brought up.
   
   What you're running into reminds me of Windows DLL hell. It's the same type of issue. Although Microsoft solved it by adding the C++ runtime version to the DLL name for libraries to link to (ex: "msvcr130.dll", "msvcr140.dll", etc.). Unfortunately, Google's Android NDK has not done the same.
   
   Are you building the .so libraries yourself? If so, then I recommend that you build with Android NDK r16c and LLVM. This will use the same "libc++_shared.so" that Titanium uses.</li>
<li>Shuo Liang 2018-06-12

   Got it</li>
</ol>


<p><a href="/TIMOB/TIMOB-26092.json">JSON Source</a></p>