---
title: "[TIMOB-26093] Integrate Karma unit test runner into SDK"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2019-06-04T18:53:49.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>CLI, Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Jan Vennemann</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2018-06-05T13:25:08.000+0000</td></tr>
<tr><th>Updated</th><td>2019-06-04T18:53:49.000+0000</td></tr>
</table>

<h3>Description</h3>

This ticket is about integrating the [titanium-karma-runner](<a href="https://github.com/appcelerator/titanium-karma-runner)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-karma-runner)</a> into the SDK.

Ideally we should go with an approach like the following:

* The above standalone Titanium Karma runner app is intended for testing libraries that are not part of any Appc project, like [titanium-vdom](<a href="https://github.com/appcelerator/titanium-vdom)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-vdom)</a> for example.
* For app and module projects, Introduce a new test command that will run unit tests using the Titanium Karma client. This could either be a new flag to the run command like <code>appc run --unit</code> or a separate command like <code>appc test</code>.

What needs to be done:
* (/) Bundle the Titanium Karma client and place it somewhere in the SDK so it can replace a project's default app.js during unit testing. (Implemented as a node module here: [titanium-karma-client](<a href="https://github.com/appcelerator/titanium-karma-client))" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-karma-client))</a>
* Implement the <code>appc test</code> command. This will start a local Karma server, build the project with the altered app.js, then launches the app and passes the URL of the Karma server so tests can be executed.
* (/) Create the karma-titanium-launcher which will start test run execution by passing the Karma server URL to the build testing app. (Implemented as a Karma plugin: [karma-titanium-launcher](<a href="https://github.com/appcelerator/karma-titanium-launcher))" rel="nofollow" target="_blank">https://github.com/appcelerator/karma-titanium-launcher))</a>
* Nice to have: Maybe integrate with device farms?

<h3>Comments</h3>

<ol>
<li>Jan Vennemann 2018-08-03

   [~emerriman], this can currently be used independently of the SDK via <code>npm</code> scripts. Example projects that already use the Karma unit testing are [titanium-vdom](<a href="https://github.com/appcelerator/titanium-vdom)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-vdom)</a> and [titanized](<a href="https://github.com/appcelerator/titanized)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanized)</a> (also includes end-to-end tests with Appium and Webdriver.io).
   
   What todo next here is:
   * Add more examples about the usage in TIMOB-26254
   * Evaluate Karma setup for app and module projects. The projects that already use Karma unit testing are node packages with a TypeScript source code base. App and module projects will need a different setup to work well.
   
   Currently i would refrain from introducing a new CLI command like <code>appc run --unit</code> or <code>appc test</code> because unit testing can easily be started with <code>npm</code> run scripts. Also it gives the user more control over how they want to configure their tests and which tools to use.
   
   </li>
<li>Jan Vennemann 2019-06-04

   Closing this in favor of TIMOB-27129</li>
</ol>


<p><a href="/TIMOB/TIMOB-26093.json">JSON Source</a></p>