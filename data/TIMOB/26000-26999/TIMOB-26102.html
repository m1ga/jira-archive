---
title: "[TIMOB-26102] Android: Push notifications should create default channel if not assigned when targeting Android 8"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-06-07T00:51:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, notification, pushnotification</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2018-06-06T01:42:36.000+0000</td></tr>
<tr><th>Updated</th><td>2018-06-19T17:54:03.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
Our APS library (which implements Android push notifications) correctly uses Google's <code>DEFAULT_CHANNEL_ID</code> on Android 8 when targeting API Level 25 or lower.
[APSCloudPush.java#L409](<a href="https://github.com/appcelerator/aps_sdk/blob/897b735961c10ce1b6e74f9fd48b48edb4eec83e/android/cloudpush/APSCloudPush/src/main/java/com/appcelerator/aps/APSCloudPush.java#L409)" rel="nofollow" target="_blank">https://github.com/appcelerator/aps_sdk/blob/897b735961c10ce1b6e74f9fd48b48edb4eec83e/android/cloudpush/APSCloudPush/src/main/java/com/appcelerator/aps/APSCloudPush.java#L409)</a>

However, when targeting API Level 26 or higher, you cannot use Google's <code>DEFAULT_CHANNEL_ID</code> which means notifications will fail to be posted to the status bar. So, the APS library must be changed to create its own default notification channel if one was not supplied from the payload... and it should only do so when targeting API Level 26 or higher.

*Recommended Solution:*
We should use a similar solution used by Titanium's local notifications as shown here...
<a href="https://github.com/appcelerator/titanium_mobile/pull/9945" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9945</a>

It probably should use a separate notification channel name than what Titanium uses. This may be needed to avoid collision with how Titanium configures its channel.


<h3>Comments</h3>

<ol>
<li>Gary Mathews 2018-06-06

   aps_cloudpush: <a href="https://github.com/appcelerator/aps_sdk/pull/321" rel="nofollow" target="_blank">https://github.com/appcelerator/aps_sdk/pull/321</a>
   cloudpush: <a href="https://github.com/appcelerator-modules/cloudpush/pull/41" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/cloudpush/pull/41</a>
   
   ti.cloudpush: <a href="https://github.com/appcelerator-modules/cloudpush/releases/tag/android-5.1.2" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/cloudpush/releases/tag/android-5.1.2</a></li>
<li>Lokesh Choudhary 2018-06-07

   FR Passed.
   PR Merged.</li>
<li>Lokesh Choudhary 2018-06-18

   [~gmathews], we would need to update the cloud push module version in the SDK so that 5.1.2 cloud push module can be included with the SDK 7.3.0 & master.</li>
<li>Gary Mathews 2018-06-18

   titanium_mobile-7_3_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/10119" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10119</a></li>
<li>Lokesh Choudhary 2018-06-19

   Verified with SDK 7.3.0.v20180618182516. 
   Cloudpush 5.1.2 is included with the SDK.
   
   Closing.
   
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-26102.json">JSON Source</a></p>