{
	"id": "171763",
	"key": "TIMOB-26110",
	"fields": {
		"issuetype": {
			"id": "1",
			"description": "A problem which impairs or prevents the functions of the product.",
			"name": "Bug",
			"subtask": false
		},
		"project": {
			"id": "10153",
			"key": "TIMOB",
			"name": "Titanium SDK/CLI",
			"projectCategory": {
				"id": "10100",
				"description": "Titanium and related SDKs used in application development",
				"name": "Client"
			}
		},
		"fixVersions": [
			{
				"id": "20183",
				"description": "",
				"name": "Release 7.4.0",
				"archived": false,
				"released": true,
				"releaseDate": "2018-09-17"
			}
		],
		"resolution": {
			"id": "1",
			"description": "A fix for this issue is checked into the tree and tested.",
			"name": "Fixed"
		},
		"resolutiondate": "2018-06-20T14:32:59.000+0000",
		"created": "2018-06-08T00:27:47.000+0000",
		"epic": {
			"id": 170940,
			"key": "TIMOB-25708",
			"name": "Support iOS 12",
			"summary": "iOS: Support iOS 12 and Xcode 10",
			"color": {
				"key": "color_6"
			},
			"done": false
		},
		"priority": {
			"name": "Critical",
			"id": "1"
		},
		"labels": [
			"cb-tooling"
		],
		"versions": [],
		"issuelinks": [],
		"assignee": {
			"name": "hknoechel",
			"key": "hansknoechel",
			"displayName": "Hans Knöchel",
			"active": true,
			"timeZone": "Europe/Berlin"
		},
		"updated": "2018-11-01T14:18:39.000+0000",
		"status": {
			"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
			"name": "Closed",
			"id": "6",
			"statusCategory": {
				"id": 3,
				"key": "done",
				"colorName": "green",
				"name": "Done"
			}
		},
		"components": [
			{
				"id": "10206",
				"name": "iOS",
				"description": "iOS Platform"
			}
		],
		"description": "When using Xcode 10 and the new build system, the app build fails because the <project>/build/iphone/build directory is generated by our CLI instead of the actual xcodebuild command. While this was okay in the past, the new build system complains about that. \r\n\r\nI filed a radar at https://openradar.appspot.com/40906897 and talked to the Apple engineers during WWDC. They assume it to be an issue in the new build system, but we can actually fix it on our end by now pre-creating the directory and let xcodebuild create it. I tested it as a local change and it works with both Xcode 10 and 9.\r\n\r\nError:\r\n{code}\r\n[INFO]  Cleaning Xcode derived data\r\n[DEBUG] Invoking: DEVELOPER_DIR=/Applications/Xcode-beta.app/Contents/Developer /Applications/Xcode-beta.app/Contents/Developer/usr/bin/xcodebuild clean\r\n[ERROR] note: Using new build system\r\n[ERROR] error: Could not delete `/Users/hknoechel/Documents/Apps/myapp/build/iphone/build` because it was not created by the build system and it is not a subfolder of derived data.\r\n[ERROR] ** CLEAN FAILED **\r\n{code}",
		"attachment": [],
		"flagged": false,
		"summary": "Xcode 10: Cannot build application with new (default) build system",
		"creator": {
			"name": "hknoechel",
			"key": "hansknoechel",
			"displayName": "Hans Knöchel",
			"active": true,
			"timeZone": "Europe/Berlin"
		},
		"subtasks": [],
		"reporter": {
			"name": "hknoechel",
			"key": "hansknoechel",
			"displayName": "Hans Knöchel",
			"active": true,
			"timeZone": "Europe/Berlin"
		},
		"environment": null,
		"closedSprints": [
			{
				"id": 1045,
				"state": "closed",
				"name": "2018 Sprint 13 SDK",
				"startDate": "2018-06-17T20:47:13.621Z",
				"endDate": "2018-07-01T20:47:00.000Z",
				"completeDate": "2018-07-02T18:40:05.029Z",
				"originBoardId": 114
			}
		],
		"comment": {
			"comments": [
				{
					"id": "438546",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "PR: https://github.com/appcelerator/titanium_mobile/pull/10123",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2018-06-20T10:13:46.000+0000",
					"updated": "2018-06-20T10:13:46.000+0000"
				},
				{
					"id": "441087",
					"author": {
						"name": "smohammed",
						"key": "smohammed",
						"displayName": "Samir Mohammed",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "[~hknoechel] Using 7_4_X (7.4.0.v20180824134643) I get the error below but on Master (7.5.0.v20180824145645) the application runs without issues. \r\n\r\n{code:java}\r\n[ERROR] :  note: Using new build system\r\n[ERROR] :  error: Could not delete `/Users/Samir/Desktop/newWS/test3/build/iphone/build` because it was not created by the build system and it is not a subfolder of derived data.\r\n[ERROR] :  ** CLEAN FAILED **\r\n{code}\r\n\r\n*Test Environment*\r\n{code:java}\r\nAPPC Studio:  5.1.0.201808080937\r\nAPPC CLI: 7.0.6-Master.5\r\niphone 6 simulator (12.0)\r\nOperating System Name: Mac OS High Sierra\r\nOperating System Version: 10.13.6\r\nNode.js Version: 8.9.1\r\nXcode 10.0 beta 6\r\n{code}\r\n",
					"updateAuthor": {
						"name": "smohammed",
						"key": "smohammed",
						"displayName": "Samir Mohammed",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2018-08-27T15:31:19.000+0000",
					"updated": "2018-08-27T15:31:26.000+0000"
				},
				{
					"id": "441134",
					"author": {
						"name": "smohammed",
						"key": "smohammed",
						"displayName": "Samir Mohammed",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "*Closing ticket* Verified fix in SDK version: {{7.4.0.v20180827125633}} and {{7.5.0.v20180827102657.}}\r\n\r\n*Test Steps (FR Passed):*\r\n# Created a new titanium project \r\n# Ran the program ensuring newest beta of XCode is installed along with IOS 12. beta\r\n# Application no longer showed the error above in the description and ran without issues\r\n\r\n*Test Environment*\r\n{code:java}\r\nAPPC Studio:  5.1.0.201808080937\r\nAPPC CLI: 7.0.6-Master.5\r\niphone 6 simulator (12.0)\r\nOperating System Name: Mac OS High Sierra\r\nOperating System Version: 10.13.6\r\nNode.js Version: 8.9.1\r\nXcode 10.0 beta 6\r\n{code}\r\n",
					"updateAuthor": {
						"name": "smohammed",
						"key": "smohammed",
						"displayName": "Samir Mohammed",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2018-08-28T09:04:50.000+0000",
					"updated": "2018-08-28T09:04:50.000+0000"
				},
				{
					"id": "443007",
					"author": {
						"name": "jackSparrow",
						"key": "jacksparrow",
						"displayName": "jack sparrow",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "i have same issue any solution  ?",
					"updateAuthor": {
						"name": "jackSparrow",
						"key": "jacksparrow",
						"displayName": "jack sparrow",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2018-10-27T08:41:48.000+0000",
					"updated": "2018-10-27T08:41:48.000+0000"
				},
				{
					"id": "443008",
					"author": {
						"name": "alexcc",
						"key": "alexcc",
						"displayName": "alejandro_capel",
						"active": true,
						"timeZone": "Europe/Madrid"
					},
					"body": "Hi Jack, it is a very strange thing!!\r\n\r\nI have reproduced this issue several times. In my case I have to delete build folder while compiling en iOS simulator. Try to do it.\r\n\r\nRegards.",
					"updateAuthor": {
						"name": "alexcc",
						"key": "alexcc",
						"displayName": "alejandro_capel",
						"active": true,
						"timeZone": "Europe/Madrid"
					},
					"created": "2018-10-27T09:10:36.000+0000",
					"updated": "2018-10-27T09:10:36.000+0000"
				},
				{
					"id": "443023",
					"author": {
						"name": "dfreniche",
						"key": "dfreniche",
						"displayName": "Diego Freniche",
						"active": true,
						"timeZone": "Africa/Ceuta"
					},
					"body": "What I've done is just use inside `<ios>` tag:\r\n\r\n{code:java}\r\n<ios>\r\n    <use-new-build-system>false</use-new-build-system>\r\n{code}\r\n",
					"updateAuthor": {
						"name": "dfreniche",
						"key": "dfreniche",
						"displayName": "Diego Freniche",
						"active": true,
						"timeZone": "Africa/Ceuta"
					},
					"created": "2018-10-29T16:07:56.000+0000",
					"updated": "2018-10-29T16:07:56.000+0000"
				},
				{
					"id": "443085",
					"author": {
						"name": "ray@raymondverbruggen.nl",
						"key": "ray@raymondverbruggen.nl",
						"displayName": "Raymond Verbruggen",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "URGENT!\r\n\r\nI have checked-out a SDK 6.3.0 project from subversion in order to implement a small update.\r\nThe same error appears here. Adding the <use-new-build-system>false</use-new-build-system> into the <ios> section does not help.\r\n\r\nWhat to do?",
					"updateAuthor": {
						"name": "ray@raymondverbruggen.nl",
						"key": "ray@raymondverbruggen.nl",
						"displayName": "Raymond Verbruggen",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2018-10-30T13:19:44.000+0000",
					"updated": "2018-10-30T13:19:44.000+0000"
				},
				{
					"id": "443086",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "[~ray@raymondverbruggen.nl] This change was added in 7.4.0 as part of the general Xcode 10 support. If you cannot update to SDK 7.4.0+ so far, you either need to use Xcode 9 or patch your SDK manually (adding {{-UseNewBuildSystem=NO}} to the \"xcodebuild\" commands (build and clean).",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2018-10-30T13:49:14.000+0000",
					"updated": "2018-10-30T13:49:14.000+0000"
				},
				{
					"id": "443087",
					"author": {
						"name": "ray@raymondverbruggen.nl",
						"key": "ray@raymondverbruggen.nl",
						"displayName": "Raymond Verbruggen",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "I cannot update to SDK 7, because the supplier of the Bluetooth module is not willing to update...\r\nHow can I patch the SDK manually?\r\n\r\nI checked-out another SDK 6.3.0 project from subversion and that project builds without errors... It is a classic project (from 2012), so not alloy. Is that logical?",
					"updateAuthor": {
						"name": "ray@raymondverbruggen.nl",
						"key": "ray@raymondverbruggen.nl",
						"displayName": "Raymond Verbruggen",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2018-10-30T13:57:45.000+0000",
					"updated": "2018-10-30T13:57:45.000+0000"
				},
				{
					"id": "443120",
					"author": {
						"name": "ray@raymondverbruggen.nl",
						"key": "ray@raymondverbruggen.nl",
						"displayName": "Raymond Verbruggen",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "Good morning!\r\n\r\nYesterday evening I checked out two SDK 6.3.0 projects (both alloy) and in the first try it did not got the above error message.\r\nHowever when I do a Project-Clean, every project gives the error message.\r\n\r\n1) How do I this suggestion from you: adding -UseNewBuildSystem=NO to the \"xcodebuild\" commands (build and clean)?\r\n\r\n2) OR: create a patch that enables SDK 6.x to work with the new build system :)",
					"updateAuthor": {
						"name": "ray@raymondverbruggen.nl",
						"key": "ray@raymondverbruggen.nl",
						"displayName": "Raymond Verbruggen",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2018-10-31T06:59:08.000+0000",
					"updated": "2018-10-31T06:59:08.000+0000"
				},
				{
					"id": "443128",
					"author": {
						"name": "cbarber",
						"key": "cbarber",
						"displayName": "Chris Barber",
						"active": true,
						"timeZone": "America/Chicago"
					},
					"body": "I suspect the problem stems from this line: https://github.com/appcelerator/titanium_mobile/blob/7_5_X/iphone/cli/commands/_build.js#L2462-L2463 where we force the new build system when using Xcode 10 or newer. You CANNOT disable the new build system in the {{tiapp.xml}} when building with Xcode 10 or newer. We then pass {{-UseNewBuildSystem=YES}} into both the {{xcodebuild clean}} and {{xcodebuild build}} calls.\r\n\r\nIf I recall correctly, the problem isn't that we're being explicit, but rather that Xcode 10 defaults to the new build system for {{xcodebuild clean}} command, but not the {{build}} action. So we chose to be explicit to override Xcode's inconsistent default behaviors.\r\n\r\nWhat \"we\" (myself, Titanium developers, contributors) need to do is install both Xcode 9 and Xcode 10 and test all combinations (clean builds, incremental builds, with flag set in tiapp, vice versa, etc). I'll raise this issue in standup and maybe someone can investigate sooner than I can.",
					"updateAuthor": {
						"name": "cbarber",
						"key": "cbarber",
						"displayName": "Chris Barber",
						"active": true,
						"timeZone": "America/Chicago"
					},
					"created": "2018-10-31T12:25:48.000+0000",
					"updated": "2018-10-31T12:25:48.000+0000"
				},
				{
					"id": "443129",
					"author": {
						"name": "ray@raymondverbruggen.nl",
						"key": "ray@raymondverbruggen.nl",
						"displayName": "Raymond Verbruggen",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "Beautiful, thank you for your update!\r\n\r\nI would prefer to determine on a per-project basis whether to use the new build system or not. For example in the tiapp.xml file.\r\nFor maintenance of apps (I am working with appcelerator already since 2013) I need to be able to do small updates to \"old\" apps without the need of going for example from SDK 6.3 to 7.4 or so.\r\n\r\nI also added some comments in this great blog by Jason Keen: https://www.appcelerator.com/blog/2018/10/running-xcode-9-xcode-10-side-side/\r\nMaybe there is an opportunity of improving the overall situation.",
					"updateAuthor": {
						"name": "ray@raymondverbruggen.nl",
						"key": "ray@raymondverbruggen.nl",
						"displayName": "Raymond Verbruggen",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2018-10-31T12:57:07.000+0000",
					"updated": "2018-10-31T12:57:07.000+0000"
				},
				{
					"id": "443189",
					"author": {
						"name": "cbarber",
						"key": "cbarber",
						"displayName": "Chris Barber",
						"active": true,
						"timeZone": "America/Chicago"
					},
					"body": "I tested this with Xcode 9.4.1/iOS 11.4 and Xcode 10.1/iOS 12.1 and with Titanium SDK 7.4.1.GA and sadly I cannot reproduce. I tested both simulator and device builds. I will need to mess around a bit more and see if I can put stuff in {{build/iphone/build}} and cause the clean to fail, then try to figure out why.\r\n\r\nCan somebody who is encountering this problem try creating a new Alloy app and see if you can reproduce?\r\n\r\nI'd like to know:\r\n* Does this happen for new apps?\r\n* Does it happen during a clean build or an incremental build?\r\n* Are you using a Titanium module that could be copying in some assets that are causing the problem?\r\n* Is this happening for simulator builds, device builds, or both?\r\n* Are you using the CLI or Studio?\r\n* What Node.js version? (I doubt this matters, but you never know)",
					"updateAuthor": {
						"name": "cbarber",
						"key": "cbarber",
						"displayName": "Chris Barber",
						"active": true,
						"timeZone": "America/Chicago"
					},
					"created": "2018-11-01T14:18:39.000+0000",
					"updated": "2018-11-01T14:18:39.000+0000"
				}
			],
			"maxResults": 15,
			"total": 15,
			"startAt": 0
		}
	}
}