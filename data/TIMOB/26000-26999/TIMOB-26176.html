---
title: "[TIMOB-26176] Android: Opening/Closing a dialog should fire a window's blur/focus events (parity)"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>alert, android, blur, dialog, focus, parity, window</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2018-07-02T20:59:00.000+0000</td></tr>
<tr><th>Updated</th><td>2020-01-14T21:53:26.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
When opening and closing a dialog, the parent window should fire a "blur" and "focus" event respectively. This is to match iOS' behavior.

*Steps to reproduce:*
<h4>Build and run the below code on Android.</h4>
<h4>Tap on the "Show Alert" button.</h4>
<h4>View the Android log. Notice that a "blur" event was not received.</h4>
<h4>Close the alert dialog.</h4>
<h4>View the Android log. Notice that a "focus" event was not received.</h4>

<code><pre>
var window = Ti.UI.createWindow({
	layout: "vertical",
	fullscreen: true,
});
var alertButton = Ti.UI.createButton({
	title: "Show Alert",
	top: "20%",
});
alertButton.addEventListener("click", function(e) {
	// An alert dialog does not trigger window focus/blur events.
	alert("Alert!");
});
window.add(alertButton);
var windowButton = Ti.UI.createButton({
	title: "Show Child Window",
	top: "20%",
});
windowButton.addEventListener("click", function(e) {
	// Displaying a child window does trigger parent window's focus/blur events.
	var childWindow = Ti.UI.createWindow({ backgroundColor: "orange" });
	var closeButton = Ti.UI.createButton({ title: "Close Me" });
	closeButton.addEventListener("click", function(e) {
		childWindow.close();
	});
	childWindow.add(closeButton);
	childWindow.open();
});
window.add(windowButton);
window.addEventListener("focus", function(e) {
	Ti.API.info("@@@ Window 'focus' event received.");
});
window.addEventListener("blur", function(e) {
	Ti.API.info("@@@ Window 'blur' event received.");
});
window.open();
</pre></code>

*Expected Result:*
Opening a dialog should fire the window's "blur" event.
Close a dialog should fire the window's "focus" event.

*Notes:*
The window's focus/blur events are correctly fired when displaying a child window or when doing a suspend/resume. This is only an issue with displaying dialogs within a window.

*Recommended Solution:*
Override the Java <code>Activity.onWindowFocusChanged()</code> method. This method will be invoked when opening/closing dialogs and child activities.
<a href="https://developer.android.com/reference/android/app/Activity.html#onWindowFocusChanged(boolean)" rel="nofollow" target="_blank">https://developer.android.com/reference/android/app/Activity.html#onWindowFocusChanged(boolean)</a>

We'll need to re-evaluate the focus/blur handling via our <code>TiBaseActivity</code> class' <code>onResume()</code> and <code>onPause()</code> methods since the <code>onWindowFocusChanged()</code> method provides what we need. The current handling is used to handle focus/blur for TabGroup tabs.

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-26176.json">JSON Source</a></p>