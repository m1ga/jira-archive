---
title: "[TIMOB-26217] iOS: File methods isFile() and isDirectory() are missing for encrypted assets"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-09-19T21:35:07.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.5.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>file, ios, parity</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2018-07-18T02:16:15.000+0000</td></tr>
<tr><th>Updated</th><td>2018-10-03T18:39:39.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
On iOS, when loading an encrypted asset such as "app.js" via <code>Ti.Filesystem.getFile()</code>, the returned <code>File</code> object is missing methods <code>isFile()</code> and <code>isDirectory()</code>. Attempting to call these methods will cause JavaScript runtime error.

This is an issue for iOS "production" builds and "test" builds for device.
This is not an issue for iOS Simulator builds since JS files are not encrypted.
This is not an issue on Android.

*Steps to reproduce:*
<h4>Create a Titanium project with the below code.</h4>
<h4>Build and run to an iOS device.</h4>
<h4>Notice that the app crashes on startup.</h4>
<h4>Build and run to the iOS simulator.</h4>
<h4>The <code>isFile()</code> and <code>isDirectory()</code> methods work and are correctly logged.</h4>

<code><pre>
var file = Ti.Filesystem.getFile("app.js");
Ti.API.info("@@@ app.js isFile(): " + file.isFile());
Ti.API.info("@@@ app.js isDirectory(): " + file.isDirectory());
</pre></code>

*Cause:*
Our <code>TiFileSystemBlobProxy.m</code> code is missing the <code>isFile()</code> and <code>isDirectory()</code> methods.


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2018-07-18

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/10112" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10112</a></li>
<li>Joshua Quick 2018-07-18

   The diff can be found here...
   <a href="https://github.com/appcelerator/titanium_mobile/pull/10112/commits/afc75ad2a229f11a5febbaa48edff2697b484a4c" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10112/commits/afc75ad2a229f11a5febbaa48edff2697b484a4c</a>
   </li>
<li>Hans Kn√∂chel 2018-07-18

   While I would rather want to see this in an own PR, I think it's okay to do it as part of TIMOB-26015.</li>
<li>Lokesh Choudhary 2018-09-19

   FR Passed.
   
   The returned <code>File</code> object is contains methods <code>isFile()</code> and <code>isDirectory()</code> for both production & test builds.
   
   Studio Ver:     5.1.1.201809051655
   SDK Ver:        7.5.0 local build
   OS Ver:         10.13.5
   Xcode Ver:      Xcode 9.4.1
   Appc NPM:       4.2.13
   Appc CLI:       7.0.6
   Daemon Ver:     1.1.3
   Ti CLI Ver:     5.1.1
   Alloy Ver:      1.13.2
   Node Ver:       8.9.1
   NPM Ver:        5.5.1
   Java Ver:       10.0.2
   Device: Iphone 7 IOS 11.4
   Simulator: Iphone 8 IOS 11.4</li>
<li>Lokesh Choudhary 2018-09-19

   PR Merged.</li>
<li>Keerthi Mahalingam 2018-10-03

   Verified the fix on sdk 7.5.0.v20181003071100.No crash on start up. isFile() and isDirectory() method works fine and logged correctly. Closing.
   <code><pre>
   Operating System
     Name                        = Mac OS X
     Version                     = 10.13.6
     Architecture                = 64bit
   Node.js
     Node.js Version             = 8.9.1
     npm Version                 = 5.5.1
   Titanium CLI
     CLI Version                 = 5.1.1
   Titanium SDK
     SDK Version                 =7.5.0.v20181003071100
   Device			      = iPhone 6s -ios 12 
   			             iPhone 6 plus-ios 11 simulator
   </pre></code></li>
</ol>


<p><a href="/TIMOB/TIMOB-26217.json">JSON Source</a></p>