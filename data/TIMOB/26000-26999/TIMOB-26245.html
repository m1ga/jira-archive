---
title: "[TIMOB-26245] iOS: Exclude 32-Bit architectures for iOS 11+ targets"
---
<table>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>cb-tooling</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2018-07-27T21:39:12.000+0000</td></tr>
<tr><th>Updated</th><td>2019-10-22T13:23:33.000+0000</td></tr>
</table>

<h3>Description</h3>

If the Titanium developer targets iOS 11+, we can remove the 32-bit architectures for all builds, because iOS 11+ does not run on these devices anymore. There is a related discussion over at [CocoaPods](<a href="https://github.com/CocoaPods/CocoaPods/issues/7148)" rel="nofollow" target="_blank">https://github.com/CocoaPods/CocoaPods/issues/7148)</a> about it.

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2018-07-27

   [~cbarber] Do you know which parts we should touch for this?</li>
<li>Chris Barber 2018-08-08

   I believe this is implicitly handled these days in the Xcode project settings.
   
   Long time ago, we used to explicitly list the architectures we were building for: <a href="https://github.com/appcelerator/titanium_mobile/blob/3_3_X/iphone/cli/commands/_build.js#L2505." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/3_3_X/iphone/cli/commands/_build.js#L2505.</a> I believe I removed it around the time time I added watchOS support.
   
   I believe the problem is in order to not build for i386, we'd need to explicitly tell xcodebuild what to build for and whatever is selected is inherited when it builds watchOS apps and since those run on devices with different architectures, it won't work.
   
   So, you can try setting the <code>ARCHS</code>, but maybe you need to do <code>VALID_ARCHS</code>, but you'd probably also need to set <code>ONLY_ACTIVE_ARCH</code> to <code>NO</code>.
   
   I also believe I say "I believe" too much.</li>
<li>Chris Barber 2019-10-22

   Note: for iOS Simulator builds, the iOS build sets <code>ONLY_ACTIVE_ARCH=1</code>. However in Titanium SDK >=8.2.1, the iOS build will pick an arbitrary iOS simulator for the <code>xcodebuild</code> destination so long as the device type family matches. We have to specify a destination so Xcode correctly builds apps containing watch apps. If the selected device type is not 64-bit, such as an iPhone 5 or iPad Retina, then <code>ONLY_ACTIVE_ARCH</code> is not set and will build for all architectures.</li>
</ol>


<p><a href="/TIMOB/TIMOB-26245.json">JSON Source</a></p>