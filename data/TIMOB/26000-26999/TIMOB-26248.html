---
title: "[TIMOB-26248] Hyperloop: Android - Cannot use android.provider.MediaStore.Images.Media API"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-05-01T20:36:41.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Hyperloop</td></tr>
<tr><th>Labels</th><td>engReviewed, hyperloop</td></tr>
<tr><th>Reporter</th><td>Donald Anderson</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2018-07-31T11:14:06.000+0000</td></tr>
<tr><th>Updated</th><td>2020-05-01T20:36:41.000+0000</td></tr>
</table>

<h3>Description</h3>

If I create a new project and add <code><pre>var mediastore = require('android.provider.MediaStore.Images.Media');</pre></code> I get the following error.
<code><pre>
Requested module not found: android.provider.MediaStore.Images.Media
</pre></code>

Trace level logs are attached



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-26248_65403/Android MediaStore.Images.Media logs">Android MediaStore.Images.Media logs</td></td><td>2018-07-31T11:13:35.000+0000</td><td>362871</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2018-07-31

   What if you only require <code>android.provider.MediaStore</code> and access <code>Images.Media</code> from the result? e.g.
   <code><pre>
   var MediaStore = require('android.provider.MediaStore');
   var DATE_ADDED = MediaStore.Images.Media.DATE_ADDED;
   </pre></code>
   Looking [here](<a href="https://stackoverflow.com/questions/23343783/how-can-i-fix-errors-about-imports-in-this-code)" rel="nofollow" target="_blank">https://stackoverflow.com/questions/23343783/how-can-i-fix-errors-about-imports-in-this-code)</a>, someone tried your import natively and it did not work either, so you may need to import it like above. It may be because of it's static context, but thats just troubleshooting. In other examples like [here](<a href="https://stackoverflow.com/questions/13772138/android-read-any-specific-image-from-sd-card-and-display-it-as-bitmap)" rel="nofollow" target="_blank">https://stackoverflow.com/questions/13772138/android-read-any-specific-image-from-sd-card-and-display-it-as-bitmap)</a>, it's always <code>MediaStore</code> being required, it's sub-constants are accessed via it then.</li>
<li>Donald Anderson 2018-07-31

   I can't seem to get at the media sub-class. if I use this.
   <code><pre>
   var mediastore = require('android.provider.MediaStore');
   console.log("1:", mediastore.Images);
   console.log("2:", mediastore.Images.Media);
   </pre></code>
   it prints the following
   <code><pre>
   [INFO] :   1: function () {
   [INFO] :   var result;
   [INFO] :   // Allow the constructor to either invoke the real java constructor, or function as a "wrapping" method that will take
   [INFO] :   // a single argument that is a native hyperloop proxy for this class type and just wraps it in our JS type.
   [INFO] :   if (arguments.length == 1 && arguments[0].isNativeProxy && arguments[0].isInstanceProxy && arguments[0].isInstanceOf('android.provider.MediaStore$Images')) {
   [INFO] :   result = arguments[0];
   [INFO] :   }
   [INFO] :   else {
   [INFO] :   result = Images.class.newInstance(arguments);
   [INFO] :   }
   [INFO] :   
   [INFO] :   this.$native = result;
   [INFO] :   this._hasPointer = result != null;
   [INFO] :   this._private = {};
   [INFO] :   }
   [INFO] :   2: undefined
   </pre></code>
   If I use this
   <code><pre>
   var Images = require('android.provider.MediaStore.Images');
   console.log("1:", Images);
   console.log("2:", Images.Media);
   </pre></code>
   It prints this.
   <code><pre>
   [INFO] :   1: function () {
   [INFO] :   var result;
   [INFO] :   // Allow the constructor to either invoke the real java constructor, or function as a "wrapping" method that will take
   [INFO] :   // a single argument that is a native hyperloop proxy for this class type and just wraps it in our JS type.
   [INFO] :   if (arguments.length == 1 && arguments[0].isNativeProxy && arguments[0].isInstanceProxy && arguments[0].isInstanceOf('android.provider.MediaStore$Images')) {
   [INFO] :   result = arguments[0];
   [INFO] :   }
   [INFO] :   else {
   [INFO] :   result = Images.class.newInstance(arguments);
   [INFO] :   }
   [INFO] :   
   [INFO] :   this.$native = result;
   [INFO] :   this._hasPointer = result != null;
   [INFO] :   this._private = {};
   [INFO] :   }
   [INFO] :   2: undefined
   </pre></code>
   It doesn't seem to matter if I try to import the class directly or access it though it's parents, it doesn't seem to exist.
   </li>
<li>Hans Knöchel 2018-07-31

   Then it might indeed be a bug. [~jquick] [~gmathews] do you know more?</li>
<li>Joshua Quick 2018-07-31

   This appears to be a Hyperloop limitation.
   
   The <code>Media</code> class within <code>android.provider.MediaStore$Images$Media</code> is an inner class within another <code>Images</code> inner class. Hyperloop can access the 1st inner class, but not an inner class within another inner class. I can successfully require it in Hyperloop using the dollar sign <code>'$'</code> version above, but Hyperloop will fail to provide the static constants/methods. So, it doesn't solve anything.
   
   You can work-around this issue for now by using Google's <code>ContentResolver</code> class instead, which is what the <code>Media</code> class uses internally. Have a look at Google's code here...
   [MediaStore.java#L861](<a href="https://github.com/aosp-mirror/platform_frameworks_base/blob/master/core/java/android/provider/MediaStore.java#L861)" rel="nofollow" target="_blank">https://github.com/aosp-mirror/platform_frameworks_base/blob/master/core/java/android/provider/MediaStore.java#L861)</a>
   
   And their <code>ContentResolver</code> class documentation can be found here...
   <a href="https://developer.android.com/reference/android/content/ContentResolver" rel="nofollow" target="_blank">https://developer.android.com/reference/android/content/ContentResolver</a>
   </li>
<li>Joshua Quick 2020-05-01

   This was resolved as of Titanium 9.0.0 via ticket [TIMOB-27298].</li>
</ol>


<p><a href="/TIMOB/TIMOB-26248.json">JSON Source</a></p>