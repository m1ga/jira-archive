---
title: "[TIMOB-26259] Android: Investigate handling of missing FLAG_ACTIVITY_NEW_TASK on Android P"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Done</td></tr>
<tr><th>Resolution Date</th><td>2018-10-26T00:04:52.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, notification, shortcut</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2018-08-04T00:55:32.000+0000</td></tr>
<tr><th>Updated</th><td>2018-10-26T00:04:52.000+0000</td></tr>
</table>

<h3>Description</h3>

Android P has a breaking change where it now requires flag "FLAG_ACTIVITY_NEW_TASK" to be set if an intent will be starting an activity from a non-activity. If the flag is missing, then it will fail to start the activity.
<a href="https://developer.android.com/preview/behavior-changes#fant-required" rel="nofollow" target="_blank">https://developer.android.com/preview/behavior-changes#fant-required</a>

Investigate if this will be an issue for the following:
* Local notification pending intents via <code>Ti.Android.NotificationManager</code>.
* Push notification pending intents via APS and cloud push module.
* App shortcuts via "com.android.launcher.action.INSTALL_SHORTCUT" intents.
* Anything else?


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2018-10-26

   I'm not seeing any issues here.
   
   Our core Titanium code which calls <code>startActivity()</code> are done while an activity context is active. So, that part of the code is fine.
   
   Our push notification code is already setting the <code>FLAG_ACTIVITY_NEW_TASK</code> flag when calling <code>startActivity()</code>. So, that part is fine as well.
   [APSCloudPush.java#L377](<a href="https://github.com/appcelerator/aps_sdk/blob/master/android/cloudpush/APSCloudPush/src/main/java/com/appcelerator/aps/APSCloudPush.java#L377)" rel="nofollow" target="_blank">https://github.com/appcelerator/aps_sdk/blob/master/android/cloudpush/APSCloudPush/src/main/java/com/appcelerator/aps/APSCloudPush.java#L377)</a>
   [IntentReceiver.java#L42](<a href="https://github.com/appcelerator/aps_sdk/blob/master/android/cloudpush/APSCloudPush/src/main/java/com/appcelerator/aps/IntentReceiver.java#L42)" rel="nofollow" target="_blank">https://github.com/appcelerator/aps_sdk/blob/master/android/cloudpush/APSCloudPush/src/main/java/com/appcelerator/aps/IntentReceiver.java#L42)</a>
   
   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-26259.json">JSON Source</a></p>