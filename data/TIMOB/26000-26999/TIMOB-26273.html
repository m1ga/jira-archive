---
title: "[TIMOB-26273] Android: saveToPhotoGallery throws an error if there is no external storage."
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 7.3.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Josh Longton</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2018-08-07T16:29:36.000+0000</td></tr>
<tr><th>Updated</th><td>2020-02-17T11:39:33.000+0000</td></tr>
</table>

<h3>Description</h3>

*Steps to reproduce* 
<h4>Create an android application with the testcase below</h4>
<h4>Build to android device</h4>
<h4>Click open camera</h4>

*Testcase*

{noformat}
function askCameraPermissions() {
	if (Ti.Media.hasCameraPermissions()) {

		var win = Ti.UI.createWindow({
			backgroundColor: '#fff'
		});

		var button = Ti.UI.createButton({
			top: 10,
			title: "open camera"
		});

		button.addEventListener("click", function() {
			Titanium.Media.showCamera({

				success: function(event) {
					Ti.API.info("***************** woop");
				},
				cancel: function() {
					Ti.API.info("***************** cancel");
				},
				error: function(error) {
					Ti.API.info("***************** error");
				},
				saveToPhotoGallery: true,
				mediaTypes: [Ti.Media.MEDIA_TYPE_PHOTO]
			});
		});

		win.add(button);
		win.open();
	} else {
		Ti.Media.requestCameraPermissions(function(e) {
			if (e.success === true) {
				Ti.API.info("Camera Permissions Granted");
			} else {
				alert("Access denied, error: " + e.error);
			}
		});
	}
}

askCameraPermissions();
{noformat}


*Error*

{noformat}
[ERROR]  TiMedia: (main) [678,3423] Failed to create external storage directory.
[INFO]   ***************** error
{noformat}



*Expected*
No error is thrown and the camera is opened

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2018-08-07

   I suspect this issue will happen if the device does not have external storage mounted. Such as a device removable storage.
   
   I don't think setting "saveToPhotoGallery" to true/false is a factor.</li>
<li>Pietro Granati 2018-10-05

   Any news? This bug is HUGE!</li>
</ol>


<p><a href="/TIMOB/TIMOB-26273.json">JSON Source</a></p>