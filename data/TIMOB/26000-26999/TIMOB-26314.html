---
title: "[TIMOB-26314] Android: Add \"versionCode\" to tiapp.xml template"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Done</td></tr>
<tr><th>Resolution Date</th><td>2018-10-29T23:17:23.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.5.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, tiapp</td></tr>
<tr><th>Reporter</th><td>Michael Gangolf</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2018-08-16T20:06:30.000+0000</td></tr>
<tr><th>Updated</th><td>2018-10-29T23:17:26.000+0000</td></tr>
</table>

<h3>Description</h3>

Currently the default tiapp.xml doesn't include the versionName or versionCode in the manifest. It will always use versionNumber 1 and versionCode 1 in the AndroidManifest. This will lead to an error when a user uploads an update to the playstore and has to search the documentation or internet to find out where to make these settings.

Adding the versionNumber to the tiapp.xml will give the user a place to start. And by using the <version> number inside the versionName it will automatically stay in sync with the iOS version. Advanced users can still overwrite the versionName with a custom name like before by adding the parameter to tiapp.xml

Scenario:
* android:versionCode is exposed in the <manifest> block
* user creates an update and can increase the version code
* AndroidManifest will use the versionCode from the <manifest> block and the <version>
* if a user wants to have a different version number he can add android:versionName to the tiapp.xml (like he would do it today or already has) and it will overwrite the <version> string inside the AndroidManifest

Existing apps with a custom android:versionCode and android:versionName would still use those values.
New apps will use the new android:versionCode from <manifest> and the normal <version> number as android:versionName

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2018-08-16

   Hello, There is no PR attached. Can you attach here? Thanks.</li>
<li>Michael Gangolf 2018-08-16

   Sorry, pasted the wrong link. It is: <a href="https://github.com/appcelerator/titanium_mobile/pull/10264" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10264</a></li>
<li>Michael Gangolf 2018-08-17

   removed the versionName part since it is already set in _build</li>
<li>Lokesh Choudhary 2018-09-10

   FR Passed.
   Waiting for merge to be enabled.</li>
<li>Lokesh Choudhary 2018-09-26

   PR Merged.</li>
<li>Keerthi Mahalingam 2018-10-04

   Verified the fix on SDK 7.5.0.v20181004095510. Version code displayed correctly. Closing
   <code><pre>
   Operating System
     Name                        = Mac OS X
     Version                     = 10.13.6
     Architecture                = 64bit
   Node.js
     Node.js Version             = 8.9.1
     npm Version                 = 5.5.1
   Titanium CLI
     CLI Version                 = 5.1.1
   Titanium SDK
     SDK Version                 =7.5.0.v20181004095510
   Device                           =Samsung s5 android 6, 
                                           Pixel 2 XL android 8 emulator.
   </pre></code>
   </li>
<li>David van de Meer 2018-10-12

   </li>
<li>Michael Gangolf 2018-10-12

   that one was about the GUI in Appcelerator Studio (so you don't even need to edit it by hand). </li>
<li>David van de Meer 2018-10-12

   Ok, yes sorry</li>
</ol>


<p><a href="/TIMOB/TIMOB-26314.json">JSON Source</a></p>