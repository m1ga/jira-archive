---
title: "[TIMOB-26338] iOS: Label not shown when opened in window from tab-group in 7.3.0 (kroll-thread only)"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-08-29T10:01:08.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.3.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.3.1</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios</td></tr>
<tr><th>Reporter</th><td>Andreas Pingas</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2018-08-24T11:40:18.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-29T10:48:31.000+0000</td></tr>
</table>

<h3>Description</h3>

Createlabel bug

The algorithm below works properly on 7.2.1GA however on 7.3.0GA does not. The label is not created as it should be.

Check the algorithm below with the setting “run on main thread” turned off.


<code><pre>
var windowA = Ti.UI.createWindow();
var windowB = Ti.UI.createWindow();
 
var tabA = Ti.UI.createTab({
	window:windowA,
	title:'Tab A'
});
 
var tabB = Ti.UI.createTab({
	window:windowB,
	title:'Tab B'
});
	
var tabGroup = Titanium.UI.createTabGroup({
	tabs:[tabA, tabB]
});
 
tabGroup.open();

windowA.addEventListener('click', function() {
	
	var win = Titanium.UI.createWindow();
			
	win.add(Ti.UI.createLabel({
		text:'TEST',
		color:'#000'
	}));
			
	tabA.open(win);
	
});
</pre></code>


<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2018-08-26

   Hello, I have tested your issue on our end and I was able to reproduce the issue. There seems to be an issue with running on the main thread turned off for SDK 7.3.0.GA. With the main thread set to true, there is no issue. For 7.2.x.GA there is no issue. I will forward this to our engineering. Thanks.</li>
<li>Hans Knöchel 2018-08-26

   This is a valid issue and regression from TIMOB-17235. Assigning to [~vijaysingh] for further investigation.
   
   [~andreas.pingas] Out of interest: What blocks you from migrating to main-thread? The deprecated kroll-thread will be removed later this year, so if there are any issues with it, we should know those to fix them.</li>
<li>Vijay Singh 2018-08-27

   This problem is happening only on kroll-thread. I'll look in this.
   [~andreas.pingas] You should migrate to main-thread as [~hknoechel] has suggested.</li>
<li>Vijay Singh 2018-08-29

   PR (master) - <a href="https://github.com/appcelerator/titanium_mobile/pull/10294" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10294</a>
   PR (7_4_X) - <a href="https://github.com/appcelerator/titanium_mobile/pull/10295" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10295</a>
   PR (7_3_X) - <a href="https://github.com/appcelerator/titanium_mobile/pull/10293" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10293</a>
   
   Note - Please verify test cases using Kroll-thread and main-thread both.
   
   Test Case 1 (From this ticket) -
   
   <code><pre>
   var windowA = Ti.UI.createWindow();
   var windowB = Ti.UI.createWindow();
    
   var tabA = Ti.UI.createTab({
   	window:windowA,
   	title:'Tab A'
   });
    
   var tabB = Ti.UI.createTab({
   	window:windowB,
   	title:'Tab B'
   });
   	
   var tabGroup = Titanium.UI.createTabGroup({
   	tabs:[tabA, tabB]
   });
    
   tabGroup.open();
    
   windowA.addEventListener('click', function() {
   	
   	var win = Titanium.UI.createWindow({
   		backgroundColor: 'white'
   	});
   	var label = Ti.UI.createLabel({
   		text:'TEST',
   		color:'red',
   	})		
   	win.add(label);
   			
   	tabA.open(win);
   });
   </pre></code>
   
   
   Test case 2 (From TIMOB-17235) - 
   
   <code><pre>
   Titanium.UI.setBackgroundColor('#000');
    
   // create tab group
   var tabGroup = Titanium.UI.createTabGroup();
    
    
   var win1 = Titanium.UI.createWindow({  
       title:'Tab 1',
       backgroundColor:'#fff'
   });
   var tab1 = Titanium.UI.createTab({  
       icon:'KS_nav_views.png',
       title:'Tab 1',
       window:win1
   });
    
   var label1 = Titanium.UI.createLabel({
   	color:'#999',
   	text:'I am Window 1',
   	font:{fontSize:20,fontFamily:'Helvetica Neue'},
   	textAlign:'center',
   	bottom:10
   });
    
   win1.add(label1);
    
   // create base UI tab and root window
   
   var win2 = Titanium.UI.createWindow({  
       title:'Tab 1',
       backgroundColor:'#fff'
   });
   var tab2 = Titanium.UI.createTab({  
       icon:'KS_nav_views.png',
       title:'Tab 2',
       window:win2
   });
    
   var label2 = Titanium.UI.createLabel({
   	color:'#999',
   	text:'I am Window 2',
   	font:{fontSize:20,fontFamily:'Helvetica Neue'},
   	textAlign:'center',
   	bottom:10
   });
    
   win2.add(label2);
    
   var win3 = Titanium.UI.createWindow({  
       title:'Tab 1',
       backgroundColor:'#fff'
   });
   var tab3 = Titanium.UI.createTab({  
       icon:'KS_nav_views.png',
       title:'Tab 1',
       window:win3
   });
    
   var label3 = Titanium.UI.createLabel({
   	color:'#999',
   	text:'I am Window 1',
   	font:{fontSize:20,fontFamily:'Helvetica Neue'},
   	textAlign:'center',
   	width:'auto'
   });
    
   win3.add(label3);
    
   // create base UI tab and root window
   
   var win4 = Titanium.UI.createWindow({  
       title:'Tab 1',
       backgroundColor:'#fff'
   });
   var tab4 = Titanium.UI.createTab({  
       icon:'KS_nav_views.png',
       title:'Tab 1',
       window:win4
   });
    
   var label4 = Titanium.UI.createLabel({
   	color:'#999',
   	text:'I am Window 1',
   	font:{fontSize:20,fontFamily:'Helvetica Neue'},
   	textAlign:'center',
   	width:'auto'
   });
    
   win4.add(label4);
    
   //  add tabs
   tabGroup.addTab(tab1);  
   tabGroup.addTab(tab2);  
   tabGroup.addTab(tab3);
   tabGroup.addTab(tab4);
    
   tabGroup.open();
   </pre></code></li>
<li>Samir Mohammed 2018-08-29

   Verified fix in SDK version <code>7.3.1.v20180829001917</code> and <code>7.4.0.v20180829013317</code>
   
   *Test Steps (FR Passed):*
   <h4>Created a new Titanium application </h4>
   <h4>Added the first test case in to the app</h4>
   <h4>Ran the app with  “run on main thread” turned off.</h4>
   <h4>Clicked in to Tab A</h4>
   <h4>Able to see the label</h4>
   <h4>Ran the app again but this time with  “run on main thread” turned on.</h4>
   <h4>Clicked in to Tab A</h4>
   <h4>Still able to see the label </h4>
   <h4>Created an application with the second test case </h4>
   <h4>Ran the program</h4>
   <h4>Able to see no flickering</h4>
   
   *Test environment*
   <code><pre>
   APPC Studio:  5.1.0.201808080937
   APPC CLI: 7.0.6-Master.5
   iphone 6 simulator (11.2)
   Operating System Name: Mac OS High Sierra
   Operating System Version: 10.13.6
   Node.js Version: 8.9.1
   Xcode 10.0 beta 6
   </pre></code>
   
   *Note:* Waiting for build on Master.</li>
<li>Samir Mohammed 2018-08-29

   *Closing ticket.* Verified fix in SDK version <code>7.5.0.v20180829030547</code> using the test steps above. </li>
</ol>


<p><a href="/TIMOB/TIMOB-26338.json">JSON Source</a></p>