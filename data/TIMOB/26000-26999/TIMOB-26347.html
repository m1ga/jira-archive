---
title: "[TIMOB-26347] IOS: setRemoteBackup(flag) outputs an ERROR message when used on individual files. "
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-09-01T12:48:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.5.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>kosso</td></tr>
<tr><th>Assignee</th><td>Hans Knöchel</td></tr>
<tr><th>Created</th><td>2018-08-31T15:09:32.000+0000</td></tr>
<tr><th>Updated</th><td>2019-03-16T01:32:19.000+0000</td></tr>
</table>

<h3>Description</h3>

Since 7.3.0.GA+ I'm seeing an error when calling setRemoteBackup(bool) on an individual File object. "Could not configure remote backup: The file “mydatabase.db” couldn’t be opened."  (Setting the flag on a folder works fine,)

Looking at the code in TiFilesystemFileProxy.m around line 570, it appears that the object is setting the flag correctly (on the 'URL'), but then continues to treat the object as a folder, get the contents then output (not throw) an error if no contents are found. (Which a single file will always fail on).

It's not a fatal error, but the code just shouldn't have got that far to output the ERROR message.

A quick fix would be to change the setRemoteBackup method to : 

<code><pre>
- (void)setRemoteBackup:(id)value
{
  ENSURE_TYPE(value, NSNumber);
  BOOL isExcluded = ![TiUtils boolValue:value def:YES];
    NSNumber *isDirectory;
    BOOL success = [[NSURL fileURLWithPath:[self path]] getResourceValue:&isDirectory forKey:NSURLIsDirectoryKey error:nil];
    if (success && [isDirectory boolValue]) {
        [self addSkipBackupAttributeToFolder:[NSURL fileURLWithPath:[self path]] withFlag:isExcluded];
    } else {
        [self addSkipBackupAttributeToItemAtURL:[NSURL fileURLWithPath:[self path]] withFlag:isExcluded];
    }
}
</pre></code>






<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2018-08-31

   I don't think this is 7.3.0+ only, because the method wasn't changed for 1+ year. I agree on the improvement, can you file a PR for that?</li>
<li>Hans Knöchel 2018-09-01

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/10302" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10302</a></li>
<li>Samir Mohammed 2018-09-26

   *Closing ticket.* Verified fix in SDK version <code>7.5.0.v20180925002114</code>. setRemoteBackup(fla g) no longer outputs an ERROR message when used on individual files.
   
   *FR passed (Test steps)*
   <h4>Created a new project using the sample code from <a href="https://github.com/appcelerator/alloy/tree/master/samples/apps/models/sql_preload" rel="nofollow" target="_blank">https://github.com/appcelerator/alloy/tree/master/samples/apps/models/sql_preload</a></h4>
   <h4>Ran the program</h4>
   <h4>No longer saw the following error which could be seen in (7.4.0.GA)</h4>
   <code><pre>
   [ERROR] :  Could not configure remote backup: The file “fighters.sql” couldn’t be opened.
   </pre></code>
   
   
   *Test Environment*
   APPC Studio: 5.1.0.201808080937
   iphone 6 (11.3)
   APPC CLI: 7.0.7-master.1
   Operating System Name: Mac OS Mojave
   Operating System Version: 10.14
   Node.js Version: 8.9.1
   Xcode 10.0</li>
<li>JATIN JOSHI 2018-10-22

   I see the same error in my project compiled with SDK 7.4.1
   
   I cannot use 7.5.0 as GA version is not yet launched. I need to use stable one, being working for any enterprise.</li>
<li>Michael Gangolf 2018-10-22

   [~mr.jatinjoshi.mca@gmail.com] just do the change in the description under "quick fix" in your 7.4.1 folder. The file and place is described in the PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/10302/files" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10302/files</a>
   Works fine for me</li>
<li>Matthew Delmarter 2019-03-16

   I am still having this issue when using 8.0.0.GA
   
   <code><pre>
   Could not configure remote backup: The file “...” couldn’t be opened.
   </pre></code></li>
</ol>


<p><a href="/TIMOB/TIMOB-26347.json">JSON Source</a></p>