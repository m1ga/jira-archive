---
title: "[TIMOB-26427] Android: Add \"safeAreaPadding\" property to Ti.UI.Window"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-10-25T14:05:27.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.5.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, safearea, window</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2018-10-02T01:55:53.000+0000</td></tr>
<tr><th>Updated</th><td>2018-10-25T22:45:45.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
On Android, we'd like to add support for Window property "extendSafeArea" so that the window's root view can extend under the Android 9 notch or under an Android 4.4 translucent StatusBar/NavigationBar (see: [TIMOB-26246]). However, this feature is useless since these insets can be of various sizes and on any side of the screen. An app developer needs to know what region of the screen they can place content so that it won't be covered up by the device's insets.

*Proposal:*
Add read-only property "safeAreaPadding" to <code>Ti.UI.Window</code>. This property will return a Titanium [ViewPadding](<a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/api/ViewPadding) dictionary providing the left, top, right, and bottom padding needed to show content safely within the window without overlap. If there are no insets or if "extendSafeArea" is set <code>false</code>, then this property is expected to return all zeros for the padding.

The idea is that the app developer will then be able to set up their own safe area view and use it as a container as shown below.
<code><pre>
var FLAG_TRANSLUCENT_NAVIGATION = 134217728;
var FLAG_TRANSLUCENT_STATUS = 67108864;
var window = Ti.UI.createWindow({
	extendSafeArea: true,
	theme: "Theme.AppCompat.NoTitleBar",
	windowFlags: FLAG_TRANSLUCENT_STATUS | FLAG_TRANSLUCENT_NAVIGATION,
});
var safeAreaView = Ti.UI.createView({
	backgroundColor: "green",
	borderWidth: "4dp",
	borderColor: "blue",
});
window.add(safeAreaView);
window.addEventListener("postlayout", function() {
	// Padding's left/top/right/bottom can be used as pin positions for the view.
	safeAreaView.applyProperties(window.safeAreaPadding);
});
window.open();
</pre></code>

*Note:*
We should do the same on iOS to handle the following:
* iPhone X top notch and bottom home indicator.
* Translucent status bar on all other iOS devices. (Safe area should be beneath status bar.)

*Safe-Area Container Example:*
Test code  [^ExtendSafeAreaContainerTest.js] shows how to create a safe-area view container for other child views, guaranteed to always make child content tappable without overlap. The green rectangle with the blue border is the safe-area view within the root white window using an orange border.
 !ExtendSafeAreaContainerPortrait.jpeg|thumbnail!  !ExtendSafeAreaContainerLandscapeLeft.jpeg|thumbnail!  !ExtendSafeAreaContainerLandscapeRight.jpeg|thumbnail! 

*Safe-Area ScrollView Example:*
Test code  [^ExtendSafeAreaScrollViewTest.js] shows how to pad a ScrollView. It allows its contents to scroll beneath a translucent status bar and navigation bar, but pads the top and bottom so that the top-most view and bottom-most view can be scrolled within the safe-area, making them tappable.
 !ExtendSafeAreaScrollPortraitTop.jpeg|thumbnail!  !ExtendSafeAreaScrollPortraitBottom.jpeg|thumbnail!  !ExtendSafeAreaScrollLandscapeRightTop.jpeg|thumbnail!  !ExtendSafeAreaScrollLandscapeLeftBottom.jpeg|thumbnail!  !ExtendSafeAreaScrollLandscapeLeftTop.jpeg|thumbnail! 

*Safe-Area TabGroup Example:*
Test code  [^ExtendSafeAreaTabsTest.js] shows how to extend tabs to beneath the notches, translucent status bar, and translucent navigation bar. You would *not* normally use a translucent top status bar with an opaque top tab bar, but this is for testing purposes. Note that the top tab bar hovers over the content and each individual tab completely fills the window. The safe-area padding reported lies within the TabGroup container where content is normally displayed when "extendSafeArea" is set to <code>false</code>.
 !ExtendSafeAreaTab1Portrait.jpeg|thumbnail!  !ExtendSafeAreaTab2Portrait.jpeg|thumbnail!  !ExtendSafeAreaTabTransitionPortrait.jpeg|thumbnail!  !ExtendSafeAreaTab1LandscapeRight.jpeg|thumbnail!  !ExtendSafeAreaTab1LandscapeLeft.jpeg|thumbnail! 

*Safe-Area DrawerLayout Example:*
Test code [^ExtendSafeAreaDrawerTest.js] shows that a <code>Ti.UI.Toolbar</code> with "extendBackground" to <code>true</code> will automatically handle the safe-area when docked to the top of the screen. The toolbar will extend into the unsafe area of the screen inset while leaving its text and button content within the safe-area. This test code uses a toolbar in the root view and in a drawer side panel.
 !ExtendSafeAreaDrawerMainPortrait.jpg|thumbnail!  !ExtendSafeAreaDrawerMainLandscape.jpg|thumbnail!  !ExtendSafeAreaDrawerPanelPortrait.jpg|thumbnail!  !ExtendSafeAreaDrawerPanelLandscape.jpg|thumbnail! 


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65754/ExtendSafeAreaContainerLandscapeLeft.jpeg">ExtendSafeAreaContainerLandscapeLeft.jpeg</td></td><td>2018-10-22T23:02:44.000+0000</td><td>602568</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65753/ExtendSafeAreaContainerLandscapeRight.jpeg">ExtendSafeAreaContainerLandscapeRight.jpeg</td></td><td>2018-10-22T23:02:43.000+0000</td><td>443116</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65752/ExtendSafeAreaContainerPortrait.jpeg">ExtendSafeAreaContainerPortrait.jpeg</td></td><td>2018-10-22T23:02:43.000+0000</td><td>462364</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65751/ExtendSafeAreaContainerTest.js">ExtendSafeAreaContainerTest.js</td></td><td>2018-10-22T22:57:43.000+0000</td><td>842</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65740/ExtendSafeAreaDrawerMainLandscape.jpg">ExtendSafeAreaDrawerMainLandscape.jpg</td></td><td>2018-10-22T22:38:21.000+0000</td><td>426379</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65739/ExtendSafeAreaDrawerMainPortrait.jpg">ExtendSafeAreaDrawerMainPortrait.jpg</td></td><td>2018-10-22T22:38:21.000+0000</td><td>473671</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65742/ExtendSafeAreaDrawerPanelLandscape.jpg">ExtendSafeAreaDrawerPanelLandscape.jpg</td></td><td>2018-10-22T22:38:21.000+0000</td><td>581942</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65741/ExtendSafeAreaDrawerPanelPortrait.jpg">ExtendSafeAreaDrawerPanelPortrait.jpg</td></td><td>2018-10-22T22:38:21.000+0000</td><td>528083</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65738/ExtendSafeAreaDrawerTest.js">ExtendSafeAreaDrawerTest.js</td></td><td>2018-10-22T22:34:44.000+0000</td><td>2981</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65748/ExtendSafeAreaScrollLandscapeLeftBottom.jpeg">ExtendSafeAreaScrollLandscapeLeftBottom.jpeg</td></td><td>2018-10-22T22:48:11.000+0000</td><td>380421</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65747/ExtendSafeAreaScrollLandscapeLeftTop.jpeg">ExtendSafeAreaScrollLandscapeLeftTop.jpeg</td></td><td>2018-10-22T22:48:11.000+0000</td><td>411288</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65746/ExtendSafeAreaScrollLandscapeRightTop.jpeg">ExtendSafeAreaScrollLandscapeRightTop.jpeg</td></td><td>2018-10-22T22:48:11.000+0000</td><td>429002</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65750/ExtendSafeAreaScrollPortraitBottom.jpeg">ExtendSafeAreaScrollPortraitBottom.jpeg</td></td><td>2018-10-22T22:50:40.000+0000</td><td>444875</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65749/ExtendSafeAreaScrollPortraitTop.jpeg">ExtendSafeAreaScrollPortraitTop.jpeg</td></td><td>2018-10-22T22:50:22.000+0000</td><td>418895</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65743/ExtendSafeAreaScrollViewTest.js">ExtendSafeAreaScrollViewTest.js</td></td><td>2018-10-22T22:48:06.000+0000</td><td>1801</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65760/ExtendSafeAreaTab1LandscapeLeft.jpeg">ExtendSafeAreaTab1LandscapeLeft.jpeg</td></td><td>2018-10-22T23:39:10.000+0000</td><td>443817</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65759/ExtendSafeAreaTab1LandscapeRight.jpeg">ExtendSafeAreaTab1LandscapeRight.jpeg</td></td><td>2018-10-22T23:39:10.000+0000</td><td>380636</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65756/ExtendSafeAreaTab1Portrait.jpeg">ExtendSafeAreaTab1Portrait.jpeg</td></td><td>2018-10-22T23:39:10.000+0000</td><td>496940</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65757/ExtendSafeAreaTab2Portrait.jpeg">ExtendSafeAreaTab2Portrait.jpeg</td></td><td>2018-10-22T23:39:10.000+0000</td><td>461524</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65755/ExtendSafeAreaTabsTest.js">ExtendSafeAreaTabsTest.js</td></td><td>2018-10-22T23:17:18.000+0000</td><td>1955</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26427_65758/ExtendSafeAreaTabTransitionPortrait.jpeg">ExtendSafeAreaTabTransitionPortrait.jpeg</td></td><td>2018-10-22T23:39:10.000+0000</td><td>443968</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2018-10-18

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/10383" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10383</a></li>
<li>Josh Longton 2018-10-25

   *FR Passed*
   
   Waiting on Jenkins to merge</li>
<li>Keerthi Mahalingam 2018-10-25

   Verified the fix on SDK 7.5.0.v20181025085349. Closing.
   <code><pre>
   Operating System
     Name                        = Mac OS X
     Version                     = 10.13.6
     Architecture                = 64bit
   Node.js
     Node.js Version             = 8.12.0
     npm Version                 = 6.4.1
   Titanium CLI
     CLI Version                 = 5.1.1
   Studio			      =5.1.2.201810080801
   Titanium SDK
     SDK Version                 = 7.5.0.v20181025085349
   Device                        = Samsung s5 Android 6,pixel android 9 
   Emulator		     = Samsung galaxy s6 android 6,nexus 4.4
   </pre></code></li>
</ol>


<p><a href="/TIMOB/TIMOB-26427.json">JSON Source</a></p>