---
title: "[TIMOB-26510] Windows: "Runtime Exception: Layout cycle detected." when launching kitchensink-v2"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-11-07T23:04:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.5.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.5.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>regression</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2018-11-01T15:07:47.000+0000</td></tr>
<tr><th>Updated</th><td>2018-11-07T23:10:15.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

When launching ks-v2 I'm seeing <code>"Runtime Exception: Layout cycle detected." </code> when the app launches. Tracking the issue down it appears to be coming from the <code>$.log.setText</code> call [here](<a href="https://github.com/appcelerator/kitchensink-v2/blob/27e44b5635f6ca2abf83f9e76cc9f0044a56795f/app/controllers/console/index.js#L11)." rel="nofollow" target="_blank">https://github.com/appcelerator/kitchensink-v2/blob/27e44b5635f6ca2abf83f9e76cc9f0044a56795f/app/controllers/console/index.js#L11).</a>

* Commenting out the setText call allows the app to open fine (/)
* Placing the <code>setText</code> call in a setTimeout fixes the issue (/)
* Replacing <code>logger.history</code> with 'astring' does not fix the issue (x)

My best guess right now is that there's some issue around updating the label text while we're laying out the UI? 

<h4>Steps to reproduce</h4>

1. Run kitchensink-v2

<h4>Actual</h4>

App will error out on launch

<h4>Expected</h4>

App should not error out on launch

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2018-11-01

   [~jlongton] and [~smohammed] can't repro this on their machines</li>
<li>Kota Iguchi 2018-11-02

   [~eharris]
   I was not able to reproduce this but it sounds like something around latest changes on Label.
   
   Could you try built-artifact from <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1303" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1303</a> ? 
   This reverts the latest changes on Label in [PR1295](<a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1295)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1295)</a> to see if it causes the issue.
   
   Also, could you try following? I have added a guard hoping to make the layout less often without reverting [PR1295](<a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1295)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1295)</a>
   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1304" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1304</a></li>
<li>Kota Iguchi 2018-11-02

   I have pushed different attempt to avoid layout cycle. Could you try following too? [~eharris]
   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1305" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1305</a>
   </li>
<li>Kota Iguchi 2018-11-02

   After several tries I was able to reproduce ths and confirmed it is caused by latest Label changes. Unfortunately none of my guard works for it. I'm looking into it.</li>
<li>Kota Iguchi 2018-11-02

   [~eharris] <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1306" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1306</a> works for me. Would you try it?</li>
<li>Kota Iguchi 2018-11-02

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1306" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1306</a></li>
<li>Kota Iguchi 2018-11-05

   7_5_X: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1309" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1309</a></li>
<li>Kota Iguchi 2018-11-07

   [~eharris] [~rmitro] Would you try <code>7.5.0.v20181106111330</code>? For me it runs kitchensink without crash or freeze.
   
   <code><pre>
   appc ti sdk install --branch 7_5_X 7.5.0.v20181106111330
   </pre></code></li>
<li>Ewan Harris 2018-11-07

   [~kiguchi] I ran kitchensink a few times and did not see the error.
   
   [~rmitro], you're probably running into TISTUD-8994, where Studio cant parse the ES6 code in ks-v2. I'm not sure on the SDK issue however</li>
<li>Lokesh Choudhary 2018-11-07

    FR Passed.
    
    Ran KS V2 multiple times & did not see any <code>"Runtime Exception: Layout cycle detected."</code> exception.
    
    SDK : 7.5.0.v20181107142952
    OS: Win 10 Pro 64-bit</li>
<li>Lokesh Choudhary 2018-11-07

    Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-26510.json">JSON Source</a></p>