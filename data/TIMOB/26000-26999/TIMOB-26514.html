---
title: "[TIMOB-26514] Android: Custom theme applied to ActionBar/Toolbar title is lost when changing orientation as of 7.5.0.RC"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2018-11-07T00:31:43.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.5.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.5.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>actionbar, android, orientation, theme, toolbar</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2018-11-02T23:43:46.000+0000</td></tr>
<tr><th>Updated</th><td>2018-11-07T23:19:38.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
When applying a custom theme to an Android app or activity, the theme applied to an <code>ActionBar</code> or <code>Toolbar</code> title is lost when changing app orientation. It ends up resetting back to the default theme.

This bug was introduced into 7.5.0.RC.

*Steps to reproduce:*
<h4>Download "kitchensink-v2" project from: [here](<a href="https://github.com/appcelerator/kitchensink-v2)" rel="nofollow" target="_blank">https://github.com/appcelerator/kitchensink-v2)</a></h4>
<h4>Set up project to build with 7.5.0.RC.</h4>
<h4>Build and run to an Android device.</h4>
<h4>Clear the alert dialog displayed on app startup.</h4>
<h4>Notice that the top ActionBar title has white text.</h4>
<h4>Rotate the device from portrait to landscape.</h4>
<h4>Notice that the top ActionBar title now has black text. (This is the bug.)</h4>

*Result:*
Before rotating device. Notice the title text is white.
 !Good.png|thumbnail!

After rotating, notice the title is now black. This is the bug.
_(The white gap on left side is an Android P notch, which can't be captured. This is not an issue.)_
 !Bad.png|thumbnail! 

*Cause:*
The new [TiToolbarStyleHandler.java](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/titanium/src/java/org/appcelerator/titanium/view/TiToolbarStyleHandler.java)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/titanium/src/java/org/appcelerator/titanium/view/TiToolbarStyleHandler.java)</a> class added to 7.5.0.RC is hard-coded to use the "style.Widget_AppCompat_Toolbar" theme. We need to find a way to acquire the theme resource ID applied to the activity and use that instead. This will solve it for the <code>ActionBar</code> as well since it's internally implemented as a <code>Toolbar</code> on Google's end.


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26514_65804/Bad.png">Bad.png</td></td><td>2018-11-02T23:47:00.000+0000</td><td>68273</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26514_65803/Good.png">Good.png</td></td><td>2018-11-02T23:47:00.000+0000</td><td>78192</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2018-11-06

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/10431" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10431</a>
   PR (7.5.x): <a href="https://github.com/appcelerator/titanium_mobile/pull/10432" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10432</a></li>
<li>Lokesh Choudhary 2018-11-07

   FR Passed.
   PR Merged.</li>
<li>Lokesh Choudhary 2018-11-07

   Verified the fix in SDK 7.5.0.v20181107142952.
   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-26514.json">JSON Source</a></p>