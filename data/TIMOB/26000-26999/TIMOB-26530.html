---
title: "[TIMOB-26530] iOS: App requests microphone permissions when playing video on macOS Mojave iOS 12 Simulator"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Christopher Williams</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2018-11-07T19:39:05.000+0000</td></tr>
<tr><th>Updated</th><td>2018-11-07T19:39:32.000+0000</td></tr>
</table>

<h3>Description</h3>

This is an odd one seen on our unit tests after we upgraded to macOS Mojave. The unit test app's Ti.Media.VideoPlayer tests would pop up prompts for microphone permissions, specifically for the tests that actually played a video.

I can reproduce locally, but once the prompt appears I have to choose to approve or deny, and then after that I cannot reproduce. When it did appear, I passed the debugger in Xcode and it pointed at this code:
<a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/TiMediaVideoPlayerProxy.m#L969" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/TiMediaVideoPlayerProxy.m#L969</a>

The test case is:
<code><pre>
var win = Ti.UI.createWindow({
	backgroundColor: 'white'
});
var nav = Ti.UI.iOS.createNavigationWindow({
	window: win
});

win.addEventListener('focus', openWindow);

nav.open();

function openWindow() {
	var detailWindow,
		videoPlayer;
	win.removeEventListener('focus', openWindow);
	detailWindow = Ti.UI.createWindow({
		backgroundColor: 'black'
	});

	videoPlayer = Ti.Media.createVideoPlayer({
		url: '<a href="https://www.w3schools.com/html/mov_bbb.mp4" rel="nofollow" target="_blank">https://www.w3schools.com/html/mov_bbb.mp4</a>',
		autoplay: true,
		backgroundColor: 'blue',
		height: 300,
		width: 300,
		mediaControlStyle: Ti.Media.VIDEO_CONTROL_NONE,
		scalingMode: Ti.Media.VIDEO_SCALING_ASPECT_FILL,
		repeatMode: Ti.Media.VIDEO_REPEAT_MODE_ONE,
		showsControls: false
	});

	detailWindow.addEventListener('open', function () {
		setTimeout(function () {
			detailWindow.close();
		}, 2000);
	});

	detailWindow.addEventListener('close', function () {
		setTimeout(function () {
			nav.close();
			Ti.API.info('DONE!!!');
		}, 2000);
	});

	detailWindow.add(videoPlayer);
	nav.openWindow(detailWindow);
}
</pre></code>

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2018-11-07

   Note the similar issue mentioned here: <a href="https://github.com/insidegui/WWDC/issues/445" rel="nofollow" target="_blank">https://github.com/insidegui/WWDC/issues/445</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-26530.json">JSON Source</a></p>