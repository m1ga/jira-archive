---
title: "[TIMOB-26572] TiAPI: Extend global console API to be more Node-compatible"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-03-06T16:35:54.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.1.0</td></tr>
<tr><th>Components</th><td>TiAPI</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Christopher Williams</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2018-11-16T16:24:13.000+0000</td></tr>
<tr><th>Updated</th><td>2020-03-31T17:11:05.000+0000</td></tr>
</table>

<h3>Description</h3>

Our current console global object has the most common methods, but is missing some easy ones to target.

- assert
- count
- countReset
- trace

Some other methods may be useful to simply implement as no-ops (like #clear())

<a href="https://nodejs.org/api/console.html" rel="nofollow" target="_blank">https://nodejs.org/api/console.html</a>

Tony Lukasavage has a JS impl to add trace/assert/dir here: <a href="https://github.com/tonylukasavage/ti-console/blob/master/src/ti-console.js" rel="nofollow" target="_blank">https://github.com/tonylukasavage/ti-console/blob/master/src/ti-console.js</a>


<h3>Comments</h3>

<ol>
<li>Christopher Williams 2018-12-19

   I think given that on Android and Windows we already have JS code to implement some of console, it'd be fairly simple to move this into the common area and expand upon it.
   
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/runtime/common/src/js/console.js" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/runtime/common/src/js/console.js</a>
   <a href="https://github.com/appcelerator/titanium_mobile_windows/blob/master/Source/TitaniumKit/src/TiModule.cpp#L493-L531" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/blob/master/Source/TitaniumKit/src/TiModule.cpp#L493-L531</a>
   
   
   </li>
<li>Ewan Harris 2019-01-02

   [~cwilliams] I started to look into this, I'm not sure whether we would consider it a breaking change? iOS defines a [TiConsole](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/TitaniumKit/TitaniumKit/Sources/API/TiConsole.m)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/TitaniumKit/TitaniumKit/Sources/API/TiConsole.m)</a>, which is then added to the globals [here](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/TitaniumKit/TitaniumKit/Sources/API/KrollBridge.m#L557-L560)." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/TitaniumKit/TitaniumKit/Sources/API/KrollBridge.m#L557-L560).</a> Is TitaniumKit itself seen as a public API, or is just Titanium SDK our public API. As I understand, if it's the former then this should be a breaking change</li>
<li>Christopher Williams 2019-07-29

   The original goal from Matt Langston back in the early days of TitaniumKit/HAL was to make that the core foundation of all the platforms, but no one has the appetite to throw away our core stuff on iOS and replace it - let alone consider how we'd hook up JSC for Android. I'd only consider the SDK as our public API.
   
   I don't think this should be a breaking change, basically we just move any methods we can into the common JS code we ship in the SDK and leave say the base methods (like <code>#log()</code>) done natively. If we want to be extra safe, we can sniff if the console object already has an implementation for any given method and not override it.</li>
<li>Christopher Williams 2020-01-09

   WIP PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/11425" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11425</a></li>
<li>Christopher Williams 2020-01-09

   <a href="https://github.com/appcelerator/titanium_mobile/pull/11425" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11425</a></li>
<li>Christopher Williams 2020-03-06

   Merged to master for 9.1.0 target</li>
<li>Samir Mohammed 2020-03-31

   FR Passed: Tested by looking at the results of the Unit tests in Jenkins and a quick titanium application outlining various features. 
   
   
   <code><pre>
   var window = Titanium.UI.createWindow({
      backgroundColor:'white'
   });
   
   console.log('*********************************************************************************************')
   console.log('Log')
   console.info('info')
   console.error('error')
   console.warn('warm')
   console.log('*********************************************************************************************')
   
   console.log('*********************************************************************************************')
   console.time('mytimer'); // Start timer
   console.timeLog('mytimer'); // Log time taken so far
   console.timeLog('mytimer', 'with', 'some', 'extra', 'info'); // Log time taken with extra logging
   console.timeLog('mytimer', [ 'a', 'b', 'c' ], { objects: true }); // Should handle Arrays and Objects
   console.timeEnd('mytimer');
   console.log('*********************************************************************************************')
   
   var buttonClear = Titanium.UI.createButton({
   title: 'Clear',
   top: 10,
   });
   buttonClear.addEventListener('click',function(e)
   {
     console.clear()
     console.log('Clear should be a function, does not do anything')
   });
   
   var buttonCount = Titanium.UI.createButton({
   title: 'Count',
   top: 30,
   });
   buttonCount.addEventListener('click',function(e)
   {
     console.count()
   });
   
   var buttonClearCount = Titanium.UI.createButton({
   title: 'Clear Count',
   top: 50,
   });
   buttonClearCount.addEventListener('click',function(e)
   {
     console.countReset()
   });
   
   var buttonGroup = Titanium.UI.createButton({
   title: 'Group',
   top: 70,
   });
   buttonGroup.addEventListener('click',function(e)
   {
     const logs = [];
     			const fakeTiAPI = {
     				warn: msg =&gt; {
     					logs.push(<code>[WARN]${msg}</code>);
     				},
     				debug: msg =&gt; {
     					logs.push(<code>[DEBUG]${msg}</code>);
     				},
     				info: msg =&gt; {
     					logs.push(<code>[INFO]${msg}</code>);
     				},
     				error: msg =&gt; {
     					logs.push(<code>[ERROR]${msg}</code>);
     				},
     				apiName: 'Ti.API',
     			};
           console.group('mylabel');
     			console.log('this should be indented');
     			console.groupEnd();
     			console.group();
     			console.group('something');
     			console.warn('this should be indented twice'); // FIXME: Hijack warn too!
     			console.groupEnd();
     			console.log('this should be indented');
     			console.groupEnd();
     			console.log('this should NOT be indented');
   });
   
   var buttonDir = Titanium.UI.createButton({
   title: 'Dir',
   top: 90,
   });
   buttonDir.addEventListener('click',function(e)
   {
     console.dir(1);
     console.dir('1');
     console.dir(null);
     console.dir(undefined);
     console.dir({ 1: [ 2 ] });
   });
   
   window.open({fullscreen:true});
   window.add(buttonClear)
   window.add(buttonCount)
   window.add(buttonClearCount)
   window.add(buttonGroup)
   window.add(buttonDir)
   
   </pre></code>
   
   *Test environment*
   <code><pre>
   MacOS Catalina: 10.15.1 beta
   Xcode: 11.3
   Java Version: 1.8.0_131
   Android NDK: 21.1.6273396-beta2
   Node.js: 10.16.3
   ""NPM":"5.0.0-1","CLI":"8.0.0-master.10""
   Pixel Xl 7.1.1 Sim
   iphone x (ios13 sime)
   </pre></code>
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-26572.json">JSON Source</a></p>