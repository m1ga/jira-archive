---
title: "[TIMOB-26599] iOS: Add "allowTranscoding" option to Ti.Media.openPhotoGallery()"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-05-09T17:31:02.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.1.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>compression, iOS, performance, video</td></tr>
<tr><th>Reporter</th><td>Richard Lustemberg</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2018-11-26T14:31:32.000+0000</td></tr>
<tr><th>Updated</th><td>2019-05-09T17:31:02.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
When selecting a video from the gallery, iOS will transcode/convert the selected video by default and return the newly formatted video instead. This can cause a very long delay if the video is large.

*Solution:*
Add an iOS-only "allowTranscoding" option for our <code>Ti.Media.openPhotoGallery()</code> method, when set <code>false</code>, will return the selected video as-is without transcoding it. This will solve the long delay issue.

<code><pre>
Ti.Media.openPhotoGallery({
	allowTranscoding: false,
	mediaTypes: [Ti.Media.MEDIA_TYPE_VIDEO],
	success: function(e) {
		// Got it.
	},
});
</pre></code>

*Note:*
There is no equivalent to this on Android, which always returns a reference to the video as-is. So, this is an iOS only feature.

*Native Implementation Details:*
Add this code at line 1746. I can provide a PR
<code><pre>
if ([TiUtils isIOS11OrGreater]) {
      BOOL disableVideoCompression = [TiUtils boolValue:@"disableVideoCompression" properties:args def:NO];
      if (disableVideoCompression) {
        picker.videoExportPreset = AVAssetExportPresetPassthrough;
      }
    }
    [self displayModalPicker:picker settings:args];
</pre></code>

<h3>Comments</h3>

<ol>
<li>Vijay Singh 2018-11-27

   [~rlustemberg] Thanks for reporting. PR is appreciated :)</li>
<li>Richard Lustemberg 2018-11-27

   Just made the PR. Cheers!</li>
<li>Vijay Singh 2019-02-08

   PR - <a href="https://github.com/appcelerator/titanium_mobile/pull/10492" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10492</a></li>
<li>Samir Mohammed 2019-02-27

   FR Passed, waiting on Jenkins build.</li>
<li>Keerthi Mahalingam 2019-05-09

   Verified the Fix on sdk 8.1.0.v20190509024838.Works as expected.
   <code><pre>
   Operating System
     Name                        = Mac OS X
     Version                     = 10.13.6
     Architecture                = 64bit
   Node.js
     Node.js Version             = 8.9.1
     npm Version                 = 5.5.1
   Titanium CLI
     CLI Version                 = 5.1.1
   Titanium SDK
     SDK Version                 = 8.1.0.v20190509024838
   Device =iPhone X iOS 11
   Simulator =iPhone 6s iOS 12
   </pre></code></li>
</ol>


<p><a href="/TIMOB/TIMOB-26599.json">JSON Source</a></p>