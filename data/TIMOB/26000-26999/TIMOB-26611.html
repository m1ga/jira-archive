---
title: "[TIMOB-26611] Babel minify can error and prevent application from building"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2018-11-29T00:38:52.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 8.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.0.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Gary Mathews</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2018-11-29T00:22:23.000+0000</td></tr>
<tr><th>Updated</th><td>2018-11-29T00:38:52.000+0000</td></tr>
</table>

<h3>Description</h3>

I encountered an interesting error when attempting to build a test case:

<code><pre>
const win = Ti.UI.createWindow({ backgroundColor: 'gray', layout: 'vertical' });
const btn_js = Ti.UI.createButton({ title: 'JAVASCRIPT' });
const btn_native = Ti.UI.createButton({ title: 'NATIVE' });

btn_js.addEventListener('click', (e) =&gt; {
    const object = {};
    console.log(object.test.crash);
});

btn_native.addEventListener('click', (e) =&gt; {
    Ti.Geolocation.accuracy = {};
});

win.add([ Ti.UI.createView({ height: 80 }), btn_js, btn_native ]);
win.open();

/*var worker = require('ti.worker');

var window = Ti.UI.createWindow({
  backgroundColor: 'white',
});

var view = Ti.UI.createView({
  backgroundColor: 'white',
  top: 20
});

var label1 = Ti.UI.createLabel({
  text: 'Calculating prime',
  width: Ti.UI.FILL,
  height: Ti.UI.FIT,
  textAlign: 'center',
  color: 'red',
  top: 10
});

var label2 = Ti.UI.createLabel({
  text: 'Calculating prime',
  width: Ti.UI.FILL,
  height: Ti.UI.FIT,
  textAlign: 'center',
  color: 'green',
  top: 40
});

var label3 = Ti.UI.createLabel({
  text: 'Calculating prime',
  width: Ti.UI.FILL,
  height: Ti.UI.FIT,
  textAlign: 'center',
  color: 'blue',
  top: 70
});

var button = Ti.UI.createButton({
  title: 'Terminate',
  width: Ti.UI.FIT,
  height: Ti.UI.FIT,
  top: 100
});

window.add(view);
view.add(label1);
view.add(label2);
view.add(label3);
view.add(button);
window.open();

var thread1 = worker.createWorker('prime.js');

thread1.addEventListener('message', function(event) {
  label1.text = event.data;
});

/*
var thread2 = worker.createWorker('prime.js');

thread2.addEventListener('message', function(event) {
  label2.text = event.data;
});

var thread3 = worker.createWorker('prime.js');

thread3.addEventListener('message', function(event) {
  label3.text = event.data;
});

thread1.addEventListener('terminated', function() {
  label1.text = 'Terminated';
});

thread2.addEventListener('terminated', function() {
  label2.text = 'Terminated';
});

thread3.addEventListener('terminated', function() {
  label3.text = 'Terminated';
});

button.addEventListener('click', function() {
  thread1.terminate();
  thread2.terminate();
  thread3.terminate();
});
*/
</pre></code>
<code><pre>
[INFO]  Processing JavaScript files
[ERROR] Cannot read property 'isPure' of null
</pre></code>

What's interesting is this only occurs when building to a device...
<code><pre>
appc run -p android -T device
</pre></code>

And resolves itself when I comment out the <code>opts.minify</code> condition block in <code>jsanalyze.js</code>

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2018-11-29

   Turns out this issue has been resolved by updating <code>babel-minify</code> and <code>node-titanium-sdk</code> has already been updated to resolve this issue.
   
   <a href="https://github.com/appcelerator/titanium_mobile/commit/847fbdfb3bc723e7b535addbd1eea344bfdf1f61" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/847fbdfb3bc723e7b535addbd1eea344bfdf1f61</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-26611.json">JSON Source</a></p>