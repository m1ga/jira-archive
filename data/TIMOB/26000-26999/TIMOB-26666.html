---
title: "[TIMOB-26666] Android: TableView won't fire click events properly."
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2019-02-28T21:37:55.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Riduanul Islam</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2018-12-18T20:21:53.000+0000</td></tr>
<tr><th>Updated</th><td>2019-02-28T21:37:55.000+0000</td></tr>
</table>

<h3>Description</h3>

We have tested that click event is firing on tableView, but sometimes it does't fire on first or second or third click. 

Customer also share a sample app with a video for demo checking. There, he escalated a scenario where this issue occurs more randomly. 
<code><pre>   
customer scenario: 
<h4>click on first item of first section</h4>
<h4>then click on 1st item of 2nd section any item of 3rd section</h4>
<h4>scroll back to another item sometime its work sometimes not</h4>
</pre></code>
It is not prominent, this issue will occur more randomly not regularly. 
*Video Link*: <a href="https://drive.google.com/uc?id=1EPs_qVuYKEFwXIGjlT4SJYIjz0EO1shI&export=download" rel="nofollow" target="_blank">https://drive.google.com/uc?id=1EPs_qVuYKEFwXIGjlT4SJYIjz0EO1shI&export=download</a>

index.tss
<code><pre>
"Window[platform=ios]":{
	layout:'vertical'
},
"Window[platform=android]":{
},

"#headings[platform=android]":{
	top:5,
},
"#headings[platform=ios]":{
	top:30,
},
"Button":{
	top:5,bottom:5,
	height:Titanium.UI.SIZE,
	color:'#fff',
	width: Titanium.UI.FILL,
	backgroundColor: '#2b8ec7'
},
"Button[platform=android]":{
	height:35
},
"Label":{
	top:10,bottom:5,left:10,
	height:Ti.UI.SIZE,
	color: '#0e0c0e',
	width: Titanium.UI.FILL,
	textAlign:"left",
	font: {
		fontSize: 15,
		fontFamily: 'verdana,arial,sans-serif'
	}
},
"#tableView":{
	top:0,
	bottom:50,
	left:0,
	right:0,
	backgroundColor:"#fff",
	touchEnabled: true
	
}
</pre></code>

index.js<code><pre>var rowsData = [];

function refreshList() {
    for (var i = 0; i &lt;= 20; i++) {
        drawTableViewRow(i);
    }
    $.tableView.setData(rowsData);
}

refreshList();

function drawTableViewRow(i) {
    var row = Ti.UI.createTableViewRow({
        title : "Row" + i,
        className : 'rowTest',
        touchEnabled : true,
        height : 40,
        hasCheck : false
    });

    var rightView = Ti.UI.createView({
        layout : 'vertical',
        left : 90,
        right : 10,
        top : 5,
        height : Ti.UI.SIZE,
        width : Ti.UI.FILL
    });

    var caption = Titanium.UI.createLabel({
        width : Ti.UI.SIZE,
        ellipsize : true,
        wordWrap : false,
        top : "5",
        left : 0,
        text : '2018-12-12 - ' + i,
        font : {
            fontSize : '14',
            fontWeight : "bold"
        },
        color : '#000'
    });
    rightView.add(caption);
    row.add(rightView);
    if (i == 0 || i == 5 || i == 10) {
        var sectionView = Ti.UI.createView({
            layout : 'vertical',
            left : 90,
            right : 10,
            top : 5,
            height : 30,
            width : Ti.UI.FILL,
            backgroundColor : "#eaeaea"
        });

        var sectionLabel = Titanium.UI.createLabel({
            width : Ti.UI.SIZE,
            ellipsize : true,
            wordWrap : false,
            top : "5",
            text : 'section - ' + i,
            font : {
                fontSize : '14',
                fontWeight : "bold"
            },
            color : '#000'
        });
        sectionView.add(sectionLabel);
        var section = Ti.UI.createTableViewSection({
            headerView : sectionView
        });
        section.add(row);
        rowsData.push(section);
    } else {
        rowsData.push(row);
    }

}

//section.add(row);

// THIS WILL KILL THE EVENT LISTENER
//table.sections = [section];

// THIS WILL KILL THE EVENT LISTENER
//table.appendSection(section);

// THIS WORKS
//table.setData([section]);

// table.addEventListener("click", function(event) {
// alert("TableView Clicked");
// Ti.API.debug(event.row);
// });

function markSelected(e) {

    console.log(' markSelected() ' + e.row.hasCheck);
    var row = e.row;
    row.hasCheck = !row.hasCheck;
    //console.log('JSON: ', e.rowData);
    // var someRowsSelected = false;
    // e.row.hasCheck = !e.row.hasCheck;
    // var rows = $.tableView.data[0].rows;
    // for (var i = 0; i &lt; rows.length; i++) {
    // Ti.API.info(JSON.stringify(rows[i]));
    // Ti.API.info("rows[i].hasCheck:" + rows[i].hasCheck);
    // if (rows[i].hasCheck) {
    // someRowsSelected = true;
    // break;
    // }
    // }
    // Ti.API.info("someRowsSelected:" + someRowsSelected);
    // if (someRowsSelected) {
    // console.log('here 1');
    // //$.deleteSelectedButton.show();
    // } else {
    // console.log('here 2');
    // //$.deleteSelectedButton.hide();
    // }
    row = null;
};

$.win.open();
</pre></code>

index.xml
<code><pre> 
&lt;Alloy&gt;
	&lt;Window id="win"&gt;
		&lt;TableView  id="tableView" onClick="markSelected"/&gt;
	&lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>

<h3>Comments</h3>

<ol>
<li>Dominic Maricic 2018-12-19

   Thanks for posting this. This has been a major issue for our users since we updated. We believe it started after SDK 7.4 as we can't replicate the issue on the older SDK versions. Our users are on the app 8+ hours a day to perform home inspections and this is causing them to miss lots of issues as they think it's selected and it's not.</li>
<li>Gary Mathews 2019-01-14

   [~homeinspectorpro] Your test case is quite complex. I've simplified it to the basic components in order to better isolate the issue:
   <code><pre>
   const win = Ti.UI.createWindow({ backgroundColor: 'gray' });
   const section = Ti.UI.createTableViewSection();
   
   for (let i = 1; i &lt;= 100; i++) {
       section.add(
           Ti.UI.createTableViewRow({
               title: 'Row ' + i,
               height: 40,
               hasCheck: false
           })
       );
   }
   
   const tableView = Ti.UI.createTableView({ data: [ section ] });
   
   tableView.addEventListener('click', (e) =&gt; {
       const row = e.row;
       row.hasCheck = !row.hasCheck;
   });
   
   win.add(tableView);
   win.open();
   </pre></code>
   
   Although, I'm having trouble reproducing the issue.</li>
</ol>


<p><a href="/TIMOB/TIMOB-26666.json">JSON Source</a></p>