---
title: "[TIMOB-26700] Windows: Optimize UI rendering calls"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-03-11T14:54:38.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 7.5.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.0.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Kota Iguchi</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2019-01-08T01:09:47.000+0000</td></tr>
<tr><th>Updated</th><td>2019-03-11T14:54:38.000+0000</td></tr>
</table>

<h3>Description</h3>

Optimize UI rendering calls in our layout engine. 

<h3>Comments</h3>

<ol>
<li>Kota Iguchi 2019-01-23

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1345" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1345</a>
   
   <code><pre>
   Ti.Analytics.optedOut = true; // Just to make sure networking won't affect the test
   
   var win = Ti.UI.createWindow({ backgroundColor: 'green' });
   
   win.addEventListener('open', function () {
       var start = +new Date();
       for (var i = 0; i &lt; 200; i++) {
           win.add(Ti.UI.createLabel({
               width: 200, height: 50, left: i * 10, top: i * 10, backgroundColor: '#0000FF', text: 'Hello, World'
           }));
       }
   
       // setTimeout() effectively push tasks on UI thread.
       // This can be useful when you need to see actual UI response time.
       setTimeout(function () {
           alert((+new Date() - start) + ' m seconds elapsed');
       }, 0)
   });
   
   win.open(); 
   </pre></code>
   
   Locally, I've got average 20% improvement when compared to 7.5.0.GA. I also saw that Jenkins runs unit tests faster than before by 4 mins (10 % faster) which is a good sign too.
   
   <code><pre>
   <h4>7.5.0.GA</h4>
   1641 ms
   1625 ms
   1015 ms
   1203 ms
   1610 ms
   1609 ms
   1000 ms
   
   <h4>TIMOB-26700</h4>
   1328 ms
   860 ms
   1344 ms
   1125 ms
   1406 ms
   1031 ms
   890 ms
   </pre></code>
   </li>
<li>Kota Iguchi 2019-03-08

   master: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1345" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1345</a>
   8_0_X: <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1364" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1364</a>
   </li>
<li>Kota Iguchi 2019-03-08

   Note that this will introduce major breaking change on binary compatibility on module interfaces which requires major version bump-up on module <code>apiversion</code>. _All modules needs to be recompiled based on new sdk._ TIMOB-26886 is taking care of <code>apiversion</code> in the sdk.</li>
<li>Kota Iguchi 2019-03-08

   So far I can see good results on most practical app from customer (aka PerformanceTestApp). I can see up to 37% less application startup time and 45% less UI rendering time.
   
   <code><pre>
   7.5.0.GA
   
   [INFO]  Application startup in 1750 msec
   [WARN] [summary/contentView]  Total time to render UI:  2718
   
   8.0.x (with TIMOB-26700)
   [INFO]  Application startup in 1110 msec
   [WARN] [summary/contentView]  Total time to render UI:  1500
   </pre></code>
   </li>
<li>Kota Iguchi 2019-03-09

   For additional note, I would strongly recommend consider disabling <code>transpile</code> flag in <code>tiapp.xml</code> when you concern runtime performance. We observed that enabling transpile slows down the app because it tend to add lots of files and operations in order to support ES6+.
   
   <code><pre> 
   &lt;transpile&gt;false&lt;/transpile&gt;
   </pre></code></li>
<li>Kota Iguchi 2019-03-09

   Merged.</li>
<li>Josh Longton 2019-03-11

   *Verified as Fixed*
   
   The fix is present in SDK
   
   {noformat}
   8.0.0.v20190308114556
   {noformat}
   
   *ENV*
   
   {noformat}
   Noka lumia 550 (Win 10) 
   Ws-emulator
   Windows 10 Pro: 1803
   Appc NPM: 4.2.13
   Appc CLI: 7.0.10-master.17
   Ti CLI Ver: 5.1.1
   Node Ver: 8.9.1
   NPM Ver: 6.4.1
   {noformat}
   
   *Closing ticket*
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-26700.json">JSON Source</a></p>