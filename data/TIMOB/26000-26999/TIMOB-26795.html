---
title: "[TIMOB-26795] iOS: Event listener on overlay is not working for camera when camera is kept idle for a few minutes"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-07-16T22:02:57.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.1.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>camera, ios, overlay</td></tr>
<tr><th>Reporter</th><td>shumne</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2019-02-01T11:04:34.000+0000</td></tr>
<tr><th>Updated</th><td>2019-07-16T22:03:00.000+0000</td></tr>
</table>

<h3>Description</h3>

On click of simple label/button, we open the camera and one overlay is added on the camera view to show close/capture/gallery icons. 
Following are the steps to reproduce the issue.

  Case 1:
*  Open the application.
*  Click on the label to open the camera.
*  Keep app in the background for 1 or 2 minutes.
*  Open again
*  When we click Close button on the camera overlay, It is not clickable.

  Case 2:
*  Open the application
*  Click on the label to open the camera.
*  Keep app in the foreground for few minutes.
*  Same here, when we click Close button on the camera overlay, It is not clickable.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26795_66124/cameraIssue.zip">cameraIssue.zip</td></td><td>2019-02-01T11:03:47.000+0000</td><td>750767</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26795_66136/index.js">index.js</td></td><td>2019-02-06T19:16:16.000+0000</td><td>4742</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Rakhi Mitro 2019-02-03

   Hello [~shumne],
   
   Thanks for reporting this. Are you experiencing this on all iOS devices or a specific device on your end?</li>
<li>shumne 2019-02-04

   Hi Rakhi,
   We are facing this issue on all iOS devices.</li>
<li>Vijay Singh 2019-02-06

   A quick solution for this issue is -
    Create 'overlay' once and use it every launch of camera. Which means create overlay outside of 'handleCamera' function.
   I have attached updated index.js.
   Please let me know if it works for you. Thanks!</li>
<li>Vijay Singh 2019-02-07

   PR - <a href="https://github.com/appcelerator/titanium_mobile/pull/10685" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10685</a>
   
   Test Case -
   
   <code><pre>
   var win = Ti.UI.createWindow({
       backgroundColor: '#fff'
   });
   
   win.addEventListener('click', function(){
    onGalleryOverlay();
   });
   
   function onGalleryOverlay() {
   var overlay = Ti.UI.createView({
       height: Ti.UI.FILL,
       width: Ti.UI.FILL
   });
   var closeBtn = Ti.UI.createButton({
       width: "80dp",
       height: "80dp",
       backgroundColor: "yellow",
       top: "20dp",
       right: "20dp"
   });
   closeBtn.addEventListener("click", function() {
       Ti.Media.hideCamera();
   });
   
   overlay.addEventListener("click", function() {
       Ti.API.info('ovelay clicked');
       Ti.Media.hideCamera();
   });
   
   overlay.add(closeBtn);
       Ti.Media.showCamera({
           mediaTypes: [Ti.Media.MEDIA_TYPE_VIDEO],
           showControls: false,
           overlay: overlay,
           saveToPhotoGallery : true,
           autohide : false,
   
           success:function(e) {
               console.log("\n success");
           },
           cancel: function() {
               console.log("cancel");
           },
           error:function(error) {
               console.log("error");
           }
       });
   }
   win.open();
   </pre></code></li>
<li>Samir Mohammed 2019-02-12

   FR Passed, Awaiting for Merge to become available on Github. </li>
<li>Samir Mohammed 2019-03-01

   Closing ticket, fix verified in SDK version 8.1.0.v20190301040201.
   
   Test and other information can be found at: 
   <a href="https://github.com/appcelerator/titanium_mobile/pull/10685" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10685</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-26795.json">JSON Source</a></p>