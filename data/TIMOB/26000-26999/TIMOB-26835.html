---
title: "[TIMOB-26835] iOS: Unable to get call pop menu from a webView"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-04-04T13:53:43.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 8.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.0.1</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>engSchedule, regression</td></tr>
<tr><th>Reporter</th><td>Samir Mohammed</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2019-02-18T14:47:04.000+0000</td></tr>
<tr><th>Updated</th><td>2019-04-04T13:53:43.000+0000</td></tr>
</table>

<h3>Description</h3>

This is a regression from 7.5.0.GA. When pressing the call me button on an application using webView the call popup is no longer shown. 

*Test Code*
<code><pre>
var win = Titanium.UI.createWindow({
	backgroundColor:'white'
});
win.add(Ti.UI.createWebView({
	top:20,
	html:'&lt;body&gt;&lt;a href="tel:555-123-4567"&gt;Call me&lt;/a&gt;&lt;/body&gt;',
	handlePlatformUrl:true
}));
win.open();
</pre></code>

*Expected result:*
Above test case should show a pop up asking the user to make a call 

*Actual result:*
No pop is shown. 


<h3>Comments</h3>

<ol>
<li>Vijay Singh 2019-02-20

   [~smohammed] In 8.0.0 we are using WKWebView instead of UIWebView to implement Ti.UI.WebView. So in some cases behavior is a bit different.
   We have to use 'allowedURLSchemes' property for same to work.
   Best way to implement the same is -
   
   <code><pre>
   var win = Titanium.UI.createWindow({
       backgroundColor:'white'
   });
   var webview = Ti.UI.createWebView({
       top:20,
       html:'&lt;body&gt;&lt;a href="tel://555-123-4567"&gt;Call me&lt;/a&gt;&lt;/body&gt;',
       allowedURLSchemes:["tel"]
   });
   win.add(webview);
   win.open();
   
   webview.addEventListener('handleurl', function(e) {
       var handler = e.handler;
       Ti.Platform.openURL(e.url);
       handler.invoke(Ti.UI.iOS.ACTION_POLICY_CANCEL); 
   });
   </pre></code></li>
<li>Vijay Singh 2019-03-21

   PR(master) - <a href="https://github.com/appcelerator/titanium_mobile/pull/10793" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10793</a>
   PR(8_0_X) - <a href="https://github.com/appcelerator/titanium_mobile/pull/10794" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10794</a></li>
<li>Jan Vennemann 2019-03-28

   [~jquick], is there something similar to the <code>allowedURLSchemes</code> property and <code>handleurl</code> event on Android to dynamically decide which URLs to handle?</li>
<li>Joshua Quick 2019-03-28

   [~jvennemann], in Titanium 7.5.0, we added a new "onlink" callback to <code>WebView</code> on Android and iOS.
   <a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.UI.WebView-property-onlink
   
   The <code>WebView</code> will do a blocking call on the "onlink" callback whenever you tap on a link. If you return <code>true</code> from the callback, then the <code>WebView</code> will proceed to load the URL. If the callback returns <code>false</code>, then the <code>WebView</code> won't load the link. This feature's main intention is to allow the app developer to invoke native things from say a custom URL scheme. Such as display a native window/dialog.</li>
<li>Joshua Quick 2019-03-28

   Here is an example on how to use "onlink". It works on both Android and iOS.
   <code><pre>
   var htmlText =
   		'&lt;!DOCTYPE html&gt;\n' +
   		'&lt;html&gt;\n' +
   		'	&lt;head&gt;\n' +
   		'		&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;\n' +
   		'	&lt;/head&gt;\n' +
   		'	&lt;body&gt;\n' +
   		'		&lt;p&gt;WebView "onlink" Test&lt;/p&gt;\n' +
   		'		&lt;a href="mylink://show/alert1"&gt;Show Alert 1&lt;/a&gt;\n' +
   		'		&lt;br/&gt;\n' +
   		'		&lt;br/&gt;\n' +
   		'		&lt;br/&gt;\n' +
   		'		&lt;a href="mylink://show/alert2"&gt;Show Alert 2&lt;/a&gt;\n' +
   		'		&lt;br/&gt;\n' +
   		'		&lt;br/&gt;\n' +
   		'		&lt;br/&gt;\n' +
   		'		&lt;a href="<a href="https://www.youtube.com" rel="nofollow" target="_blank">https://www.youtube.com</a>"&gt;Go to YouTube&lt;/a&gt;\n' +
   		'	&lt;/body&gt;\n' +
   		'&lt;/html&gt;\n';
   
   var window = Ti.UI.createWindow();
   var webView = Ti.UI.createWebView({
   	html: htmlText,
   	onlink: function(e) {
   		switch (e.url) {
   			case "mylink://show/alert1":
   				alert("This is alert 1.");
   				return false;
   			case "mylink://show/alert2":
   				alert("This is alert 2.");
   				return false;
   		}
   		return true;
   	},
   });
   window.add(webView);
   window.open();
   </pre></code>
   </li>
<li>Samir Mohammed 2019-04-03

   FR Passed, waiting on Jenkins builds. </li>
<li>Christopher Williams 2019-04-03

   Merged to 8_0_X and master</li>
<li>Samir Mohammed 2019-04-04

   *Closing ticket.* Fix verified in SDK version <code>8.0.1.v20190403071846</code> and SDK version <code>8.1.0.v20190325115012</code>.
   
   Test and other information can be found at: 
   PR(master) - <a href="https://github.com/appcelerator/titanium_mobile/pull/10793" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10793</a>
   PR(8_0_X) - <a href="https://github.com/appcelerator/titanium_mobile/pull/10794" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10794</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-26835.json">JSON Source</a></p>