---
title: "[TIMOB-26848] Android: Re-add "baseURL" support to WebView.setHtml() that was removed in 6.0.3"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-04-23T21:38:52.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.3</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.1.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, engArch, parity, url, webview</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2019-02-22T03:13:22.000+0000</td></tr>
<tr><th>Updated</th><td>2019-04-23T21:38:52.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
Titanium currently documents that the <code>WebView.setHtml()</code> method supports a 2nd argument on Android and iOS which can provide a "baseURL" setting. Android used to support this, but it was inadvertently removed in Titanium 6.0.3. This feature should be re-added since it's needed by "iframes" to indicate which URL an iframe's embedded paths are relative to.

For example, a YouTube video embedded within an iframe will not play on Android or iOS unless a "baseURL" of "<a href="https://www.youtube.com" rel="nofollow" target="_blank">https://www.youtube.com</a>" is provided.

*Steps to reproduce:*
<h4>Build and run the below code on Android.</h4>
<h4>Tap on the video to attempt to play it.</h4>
<h4>Notice that the video won't play. Instead it reads "Video Unavailable".</h4>
<h4>Build and run on iOS.</h4>
<h4>Tap on the video play it.</h4>
<h4>Notice that the video plays fine. _(This is because the "baseURL" is being used.)_</h4>

<code><pre>
var htmlText =
		'<!DOCTYPE html>' +
		'<html>' +
		'	<body>' +
		'		<iframe width="560" height="315" src="<a href="https://www.youtube.com/embed/dQw4w9WgXcQ" rel="nofollow" target="_blank">https://www.youtube.com/embed/dQw4w9WgXcQ</a>" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen/>' +
		'	</body>' +
		'</html>';

var window = Ti.UI.createWindow();
var webView = Ti.UI.createWebView();
//webView.html = htmlText;
webView.setHtml(htmlText, { baseURL: "<a href="https://www.youtube.com" rel="nofollow" target="_blank">https://www.youtube.com</a>" });
window.add(webView);
window.open();
</pre></code>

*Work-Around:*
The "baseURL" is not needed if the webpage was loaded from the Internet (ie: the "url" property). That is, "baseURL" is only applicable when loading HTML from string. So, hosting the webpage on your own web server will work-around this problem.


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2019-03-22

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/10795" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10795</a></li>
<li>Lokesh Choudhary 2019-04-09

   FR Passed.
   Waiting for merge.</li>
<li>Lokesh Choudhary 2019-04-16

   PR Merged.</li>
<li>Keerthi Mahalingam 2019-04-23

   Verified the fix on SDK 8.1.0.v20190423074844.Video plays as expected. Closing .
   <code><pre>
    Name                        = Mac OS X
     Version                     = 10.13.6
     Architecture                = 64bit
   Node.js
     Node.js Version             = 8.9.1
     npm Version                 = 5.5.1
   Titanium CLI
     CLI Version                 = 5.1.1
   APPC CLI                       =7.0.11-70X.1
   Studio                         =5.1.2.201903111843
   Titanium SDK
     SDK Version                 = 8.1.0.v20190423074844
   Device                        = Oneplus 5T android 9,samsung s5 android 6
   Emulator.                     = pixel 2 xl android 8
   </pre></code></li>
</ol>


<p><a href="/TIMOB/TIMOB-26848.json">JSON Source</a></p>