---
title: "[TIMOB-26855] Windows: Add "baseURL" support to WebView.setHtml()"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-04-29T17:56:39.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.0.3</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.1.0</td></tr>
<tr><th>Components</th><td>Windows</td></tr>
<tr><th>Labels</th><td>parity, url, webview</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Kota Iguchi</td></tr>
<tr><th>Created</th><td>2019-02-24T13:04:21.000+0000</td></tr>
<tr><th>Updated</th><td>2019-04-29T17:56:39.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
Titanium currently documents that the <code>WebView.setHtml()</code> method supports a 2nd argument on Android and iOS which can provide a "baseURL" setting. Android used to support this, but it was inadvertently removed in Titanium 6.0.3. This feature should be re-added since it's needed by "iframes" to indicate which URL an iframe's embedded paths are relative to.

For example, a YouTube video embedded within an iframe will not play on Android or iOS unless a "baseURL" of "<a href="https://www.youtube.com" rel="nofollow" target="_blank">https://www.youtube.com</a>" is provided.

*Steps to reproduce:*
<h4>Build and run the below code on Android.</h4>
<h4>Tap on the video to attempt to play it.</h4>
<h4>Notice that the video won't play. Instead it reads "Video Unavailable".</h4>
<h4>Build and run on iOS.</h4>
<h4>Tap on the video play it.</h4>
<h4>Notice that the video plays fine. _(This is because the "baseURL" is being used.)_</h4>

<code><pre>
var htmlText =
		'<!DOCTYPE html>' +
		'<html>' +
		'	<body>' +
		'		<iframe width="560" height="315" src="<a href="https://www.youtube.com/embed/dQw4w9WgXcQ" rel="nofollow" target="_blank">https://www.youtube.com/embed/dQw4w9WgXcQ</a>" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen/>' +
		'	</body>' +
		'</html>';

var window = Ti.UI.createWindow();
var webView = Ti.UI.createWebView();
//webView.html = htmlText;
webView.setHtml(htmlText, { baseURL: "<a href="https://www.youtube.com" rel="nofollow" target="_blank">https://www.youtube.com</a>" });
window.add(webView);
window.open();
</pre></code>

*Work-Around:*
The "baseURL" is not needed if the webpage was loaded from the Internet (ie: the "url" property). That is, "baseURL" is only applicable when loading HTML from string. So, hosting the webpage on your own web server will work-around this problem.


<h3>Comments</h3>

<ol>
<li>Kota Iguchi 2019-03-21

   <a href="https://github.com/appcelerator/titanium_mobile_windows/pull/1369" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile_windows/pull/1369</a></li>
<li>Samir Mohammed 2019-04-26

   FR Passed, waiting on Jenkins build. </li>
<li>Kota Iguchi 2019-04-27

   Merged to master.</li>
<li>Keerthi Mahalingam 2019-04-29

   Verified the fix on SDK  8.1.0.v20190426222341.Video plays as expected. Works fine .closing 
   <code><pre>
   Operating System
     Name                        = Microsoft Windows 10 Pro
     Version                     = 10.0.17763
     Architecture                = 32bit
     # CPUs                      = 4
     Memory                      = 17034395648
   CLI                              =7.0.11 -1
   Studio                          =5.1.2.201903111843
   Node.js
     Node.js Version             = 8.9.1
     npm Version                 = 5.5.1
   Titanium CLI
     CLI Version                 = 5.1.1
   Titanium SDK
     SDK Version                 = 8.1.0.v20190426222341
   Simulator =Mobile Emulator 10.0.14393. 0 1080p 6 inch 
    </pre></code></li>
</ol>


<p><a href="/TIMOB/TIMOB-26855.json">JSON Source</a></p>