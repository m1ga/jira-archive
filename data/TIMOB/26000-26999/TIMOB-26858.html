---
title: "[TIMOB-26858] Android (V8): toLocaleDateString has different outputs on iOS and Android"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2020-05-11T23:15:57.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>engSchedule</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Alan Hutton</td></tr>
<tr><th>Created</th><td>2019-02-25T10:28:53.000+0000</td></tr>
<tr><th>Updated</th><td>2020-05-11T23:15:57.000+0000</td></tr>
</table>

<h3>Description</h3>

When calling <code>toLocaleDateString</code> on a <code>Date</code> object, the output is different on iOS and Android.

Test-Case (expecting German locale):
<code><pre>
new Date(2019, 1, 25).toLocaleDateString('de-DE')
</pre></code>

Output iOS (and Chrome):
<code><pre>
25.02.2019
</pre></code>

Output Android:
<code><pre>
Mon Feb 25 2019
</pre></code>

This is a parity issue for as, as we'd like to use localized dates for our users. Hopefully it's just a tweak in V8!

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2019-02-25

   The real issue here is that Android's <code>Date.toLocaleDataString()</code> method doesn't support a 2nd argument that allows you to specify how you want the month, day, and year to appear. That is what you really need.
   <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString" rel="nofollow" target="_blank">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString</a>
   
   For now, your only option is to use Titanium's [String.formatDate()](<a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/api/Global.String-method-formatDate) function. It will provide consistent results between platforms.
   <code><pre>
   var date = new Date(Date.UTC(2019, 1, 31));
   console.log(String.formatDate(date, "short"));
   // "en-us" output: 1/31/19
   </pre></code>
   
   Unfortunately, none of the format strings for <code>String.formatDate()</code> support a <code>MM/DD/YYYY</code> or <code>DD/MM/YYYY</code> format where it shows leading zeros for the month or day or 4 digit years. I believe this is the format you are after.
   
   Or... perhaps another alternative solution is to hard-code the date format too YYYY-MM-DD. The below works on Android, but it doesn't work on iOS and I'm not sure why at the moment. (Would need to isolate later.)
   <code><pre>
   var date = new Date(Date.UTC(2019, 1, 5));
   console.log(String.format("%04d-%02d-%02d", date.getFullYear(), date.getMonth() + 1, date.getDate()));
   // Android outputs: 2019-01-05
   // iOS outputs: 000-00-07
   </pre></code>
   
   But right, supporting the <code>Date.setLocaleDateString()</code> method's 2nd argument is the ultimate solution.</li>
<li>Hans Knöchel 2019-02-25

   Thanks for the input! For now, we went with the <code>date-fns</code> method <code>format</code> that takes a locale as well. How can it be that Android would not support this? Does it a ship with a different V8 revision?</li>
<li>Joshua Quick 2019-02-25

   Part of the problem is that the Android NDK C/C++ side does not support locale at all. For example, C functions such as <code>setlocale()</code> will no-op and the locale will always default to effectively "en-us" (ie: C++ <code>std::locale::classic</code>). This is a limitation on Google's end. I'm pretty sure our only option is to override the JavaScript functions and do the locale formatting on the Java side.
   </li>
<li>Joshua Quick 2020-05-11

   [~hknoechel], I'm closing this ticket in favor of [TIMOB-27892].
   Sorry. I forgot about this ticket and wrote up a duplicate, but the good news is that the other ticket has a working PR that does what you want. :)</li>
</ol>


<p><a href="/TIMOB/TIMOB-26858.json">JSON Source</a></p>