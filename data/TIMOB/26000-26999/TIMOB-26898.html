---
title: "[TIMOB-26898] Android: Build error \"Failed to run dexer\" can occur when including several libraries"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-07-16T22:48:13.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 7.5.2</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, build, cli, dexer, java</td></tr>
<tr><th>Reporter</th><td>Arbind</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2019-03-06T04:06:05.000+0000</td></tr>
<tr><th>Updated</th><td>2019-07-16T22:48:16.000+0000</td></tr>
</table>

<h3>Description</h3>

With the recent update, android compilation gets stuck at the "Running dexer" step. This happens when I add the cloudpush module to the project.

To reproduce the error, you can simply create a blank project (alloy), add the cloudpush module for android, and try to compile the app for Android.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26898_66224/appc-logs.txt">appc-logs.txt</td></td><td>2019-03-06T11:27:55.000+0000</td><td>38763</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-26898_66230/appc-logs-dexer.txt">appc-logs-dexer.txt</td></td><td>2019-03-09T00:49:57.000+0000</td><td>38794</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Rakhi Mitro 2019-03-06

   Hello,
   Thanks for reporting this. Which SDK are you using? It would be great if you can share complete console logs or screenshot which displays the issue.</li>
<li>Arbind 2019-03-06

   It happens with both, 7.5.1GA as well as 7.5.2 RC. Here are the logs.</li>
<li>Sharif AbuDarda 2019-03-06

   Hello [~mr.arbindbhagat], There seems to be an issue with cloudpush module with SDK 7.5.1.GA  and onward. I tried to test a sample app (classic) with the module enabled with SDK 7.5.1.GA. The first issue I encounter was 
   <code><pre>
   [ERROR] Conflicting jar files detected:
   [ERROR]   
   [ERROR] The following modules have different "cloudpush.jar" files
   [ERROR]    ti.cloudpush   (version 6.0.0) (hash=50e8dfdde7c5dd4feb4557c03ba305fc)
   [ERROR]    ti.cloudpush   (version 6.0.0) (hash=818fe6b00dcd4fa6f53bbeae31a63504)
   [ERROR]   
   [ERROR] You can either select a version of these modules where the conflicting jar file is the same or you
   [ERROR] can try copying the jar file from one module's "lib" folder to the other module's "lib" folder.
   </pre></code>
   
   So, I changed the module version to 5.2.0 and this time the console hangs on running dexer. The process never finishes and my processor seems to work a lot in the back.  [~rmitro], Can you try to reproduce the behavior? After that, we can move it to engineering. Thanks.
   </li>
<li>Arbind 2019-03-06

   Yes, you are right. That was the main/initial issue. And Appcelerator released 7.5.2 RC ( <a href="https://www.appcelerator.com/blog/2019/03/rc-release-titanium-sdk-7-5-2/" rel="nofollow" target="_blank">https://www.appcelerator.com/blog/2019/03/rc-release-titanium-sdk-7-5-2/</a> ) saying that it would fix the cloudpush issue. But it has not fixed it.
   
   And yes, I can reproduce the issue that you mentioned above.</li>
<li>Gary Mathews 2019-03-09

   [~rmitro] Please use <code>7.5.2</code> which contains <code>ti.cloudpush-6.0.1</code>
   
   <code><pre>
   appc ti sdk install -b 7_5_X -d
   </pre></code>
   
   [~mr.arbindbhagat] Make sure your application is using <code>ti.cloudpush-6.0.1</code>. Could you also provide a build log?</li>
<li>Arbind 2019-03-09

   Hi Gary,
   Yes, I did try with 7.5.2 using ti.cloudpush-6.0.1 , but that didn't help. It gets stuck for more than 30 minutes at the step of "Running Dexer" . Attached is the logs.
   
   
    [^appc-logs-dexer.txt] </li>
<li>Sharif AbuDarda 2019-03-09

   Hello [~gmathews], I tried with the SDK 7.5.2.v20190306131103 with ti.cloudpush-6.0.1 selected in tiapp.xml. The app stuck before running dexer. I have the same log as [~mr.arbindbhagat]. This seems to be a valid issue with ti.cloudpush module. Thanks.</li>
<li>Gary Mathews 2019-03-11

   [~mr.arbindbhagat] [~sdarda] What version of Java are you using?</li>
<li>Sharif AbuDarda 2019-03-11

   Hello, It's 1.8.0, I am on Mac OS 
   
   <code><pre>
   java version "1.8.0_131"
   Java(TM) SE Runtime Environment (build 1.8.0_131-b11)
   Java HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)
   </pre></code>
   </li>
<li>Arbind 2019-03-11

    Hi, I am on Mac OS and my java is 1.8.0.
    
    <code><pre>
    java version "1.8.0_201"
    Java(TM) SE Runtime Environment (build 1.8.0_201-b09)
    Java HotSpot(TM) 64-Bit Server VM (build 25.201-b09, mixed mode)
    </pre></code>
    </li>
<li>Gary Mathews 2019-03-11

    [~shossain][~mr.arbindbhagat] We're having a hard time reproducing this issue on our machines, could you try a couple of things?
    
    1. Try using an older version of <code>ti.playservices</code> in your <code>tiapp.xml</code>
    <code><pre>
    &lt;module platform="android" version="11.0.40"&gt;ti.playservices&lt;/module&gt;
    </pre></code>
    2. Remove the <code>ti.playservices</code> module entry from your <code>tiapp.xml</code> and use a lower version of <code>ti.cloudpush</code>
    <code><pre>
    &lt;module platform="android" version="5.2.0"&gt;ti.cloudpush&lt;/module&gt;
    </pre></code>
    
    Could you note the outcome of those two changes?</li>
<li>Arbind 2019-03-11

    Gary,
    I tried to compile without including ti.playservices module, and it failed.
    
    I tried to compile by including the ti.playservices latest version module, and it failed.
    
    I tried to compile with ti.playservices 11.0.40 version module, and it worked.
    
    (1) So, does it mean that, there is an issue with the latest version of ti.playservices module?
    
    (2) Why am I required to include the ti.playservices module even if I don't use it?</li>
<li>Sharif AbuDarda 2019-03-12

    Hello [~gmathews], [~mr.arbindbhagat], Here is my observation. 
    1. I tried with
    <code><pre>
    &lt;module platform="android" version="11.0.40"&gt;ti.playservices&lt;/module&gt; 
    &lt;module platform="android" version="6.0.1"&gt;ti.cloudpush&lt;/module&gt;
    </pre></code>
    set in the tiapp.xml and I run with trace log. The project builds and run fine in 2min 10s in the emulator.
     
    2. Then, I run the project with only 
    <code><pre>
    &lt;module platform="android" version="6.0.1"&gt;ti.cloudpush&lt;/module&gt; 
    </pre></code>
    set in the tiapp.xml and I see the ti.playservices module version=16.1.2 is used by default. Now, the project did finish building and run after 3min 15s. 
    
    3. Then, I clean the project "appc ti clean" and try to run again. Now I see the log stuck after running dexer for over 30 minutes. 
    
    So, ti.playservices=11.0.40 module version works fine with the latest ti.cloudpush version=6.0.1(latest). Also, ti.playservices module version=16.1.2 works fine with ti.cloudpush version=5.2.0. The issue seems to be with ti.playservices module version=16.1.2 with ti.cloudpush version=6.0.1(latest). Thanks.</li>
<li>Gary Mathews 2019-03-13

    master: <a href="https://github.com/appcelerator/titanium_mobile/pull/10774" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10774</a>
    8_0_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/10775" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10775</a>
    7_5_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/10776" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10776</a></li>
<li>Lokesh Choudhary 2019-03-14

    Verified the fix in SDK 8.0.0.v20190313105932.
    Closing.</li>
<li>Arbind 2019-03-14

    Can you please build it for 7.5.x as well so that I could install through the appc install command?
    
    I don't see it here <a href="http://builds.appcelerator.com/#7_5_X" rel="nofollow" target="_blank">http://builds.appcelerator.com/#7_5_X</a> , and hence I am not able to install this fix.</li>
<li>Lokesh Choudhary 2019-03-15

    [~mr.arbindbhagat], If you have <code>appc CLI</code> installed you can get the latest from CI by running <code>appc ti sdk install -b 7_5_X</code>.</li>
</ol>


<p><a href="/TIMOB/TIMOB-26898.json">JSON Source</a></p>