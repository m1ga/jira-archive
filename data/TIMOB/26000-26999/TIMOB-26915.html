---
title: "[TIMOB-26915] iOS: Implement cookie in TiUIWebView using WKHTTPCookieStore"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>In Review</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 8.0.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>breaking-change, cookies, webview</td></tr>
<tr><th>Reporter</th><td>Vijay Singh</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2019-03-20T21:09:40.000+0000</td></tr>
<tr><th>Updated</th><td>2021-03-22T19:22:07.000+0000</td></tr>
</table>

<h3>Description</h3>

From SDK 8.0.0 we have started using WKWebView. NSHTTPCookie  is not compatible with WKWebView. 
From iOS 11+ apple has given WKHTTPCookieStore in WKWebView to support cookie.
We need to use WKHTTPCookieStore to implement cookie for iOS 11.0+.

Currently we have implemented using description as given in below link - 
  <a href="https://stackoverflow.com/questions/26573137" rel="nofollow" target="_blank">https://stackoverflow.com/questions/26573137</a>
  <a href="https://github.com/haifengkao/YWebView" rel="nofollow" target="_blank">https://github.com/haifengkao/YWebView</a>

Following points need to be considered while implementation -
1. In titanium cookies are cross platform. So parity should be there.
2. It should be supported for iOS <11.0 as we minimum iOS version in SDK is 9.0

Edit - 

 1. From SDK 10, minimum iOS target is iOS 11. Now it can be implemented without worrying about point 2 .
2. It will be breaking change as it will not sync with Ti.Network.HTTPClient cookies. Every webview will have its own cookie management.
3. Can we have android parity as well?
4. New WebView cookie APIs -

Method -
a)  webview.addCookie(Titanium.Network.Cookie);
b) webview.removeCookie('domain', 'path', 'name');
c)  webview.removeAllCookies();
d)  webview.removeCookiesForDomain('domain') -> Array(Titanium.Network.Cookie)
e) webview.getCookies(''domain', 'path', 'name') -> Array(Titanium.Network.Cookie)
f) webview.cookiesForDomain('domain') -> Array(Titanium.Network.Cookie)

Property (read-only) -
e) webview.allCookies -> Array(Titanium.Network.Cookie)

<h3>Comments</h3>

<ol>
<li>Vijay Singh 2021-02-09

   PR - <a href="https://github.com/appcelerator/titanium_mobile/pull/12451" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/12451</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-26915.json">JSON Source</a></p>