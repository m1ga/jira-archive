---
title: "[TIMOB-26917] iOS: App builds containing large amounts of JS files are extremely slow"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-03-27T16:49:50.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 6.2.1, Release 8.0.0, Release 7.5.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.0.1</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>build-time, engSchedule, ios</td></tr>
<tr><th>Reporter</th><td>Hans Kn√∂chel</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2019-03-21T19:34:14.000+0000</td></tr>
<tr><th>Updated</th><td>2019-04-30T08:53:02.000+0000</td></tr>
</table>

<h3>Description</h3>

Our CLI builds process JS files in series, and differ between platforms versus how they compare the contents to determine how to proceed.

Both platforms read in the source JS file and transpile it.

iOS then does a check for the destination path to see if it exists, and if so to read that in and compare versus the transpiled contents. If they differ, it writes it out.

Android checks the original source against the transpired. If they don't differ and we're on MacOS/Linux we symlink the original src file. Otherwise, we write the new contents out.

The Android approach appears to be significantly faster, though it's unclear if either approach is "correct". Ideally we'd do a little of both - symlink when transpilation does not affect the source, don't write to destination file if we'd just be writing the same contents, etc. Fixing all of that logic properly is. larger task...

But, moving to processing the JS files in parallel has significant performance gains on iOS in particular.

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2019-03-21

   I have manually merged this perf fix to master branch. I think it's a small enough change and has a significant improvement in timings, so should be considered for 8.0.1.</li>
<li>Christopher Williams 2019-03-22

   Merged to 8_0_X as well.</li>
<li>Lokesh Choudhary 2019-03-27

   Verified the fix with SDK 8.0.1.v20190327083138. Checked with KS v2.
   Closing.
   
   Build timings:
   1. SDK 8.0.0.GA : 
   * First build 33s
   * Rebuild : 9s
   
   2. SDK 8.0.1.v20190327083138 :
   * First build: 25s
   * Rebuild: 6s</li>
</ol>


<p><a href="/TIMOB/TIMOB-26917.json">JSON Source</a></p>