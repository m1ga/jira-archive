---
title: "[TIMOB-26948] CLI: File provider extension capability not appropriately set"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-04-19T18:42:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 8.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.0.1</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Eric Merriman </td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2019-03-28T17:36:29.000+0000</td></tr>
<tr><th>Updated</th><td>2019-04-19T18:42:40.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>
While creating an iOS project using the file provider extension, we found that the capability was not appearing correctly in the generated Xcode project

<h4>Steps to reproduce</h4>
1) Create an iOS project
2) Create a file provider target, add the app groups capability
3) Ensure you have the appropriate provisioning profiles
4) Build the project
5) Examine the capabilities in the generated xCode project

<h4>Result</h4>
The capability is not set correctly.

<h3>Comments</h3>

<ol>
<li>Chris Barber 2019-03-28

   Master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/10813" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10813</a>
   8_0_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/10814" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10814</a>
   
   To test:
   1. Create a new app
   2. Create an <code>extensions</code> folder in your app (e.g. <code>/path/to/my-project/extensions</code>)
   3. Open Xcode, create a new project (name it something meaningful like <code>MyExtension</code>) and save in the extensions folder
   4. In the Xcode project, add a new Target of type FileProvider (check the box to also generate the FileProvider UI target) and name it something like <code>MyFileProvider</code>
   5. In the Xcode project settings, use manual provisioning profile (not managed)
   6. Go to the Apple Developer site and create an App Group like <code>com.mycompany.test</code>
   7. Create App IDs for the FileProvider and FileProvider UI targets such as <code>com.mycompany.myextension.MyFileProvider</code> and <code>com.mycompany.myextension.MyFileProviderUI</code>.
   8. Create provisioning profiles for the FileProvider and FileProvider UI targets using the App IDs created above. Apple requires the Titanium app and each extension to have its own provisioning profile. When creating the profile, enable app groups. You should probably set an explicit App ID and not a wildcard. After saving the profile, edit it, then assign the App Group name, then download it and install it by double clicking it and Xcode will copy it to the correct place.
   9. Edit the <code>tiapp.xml</code> and add an <code>&lt;extensions&gt;</code> section under the <code>ios</code> section:
   <code><pre>
   &lt;extensions&gt;
     &lt;extension projectPath="extensions/appcappext/appcappext.xcodeproj"&gt;
       &lt;target name="AppcAppFileProvider"&gt;
         &lt;provisioning-profiles&gt;
           &lt;device&gt;UUID GOES HERE&lt;/device&gt;
           &lt;dist-appstore/&gt;
           &lt;dist-adhoc/&gt;
         &lt;/provisioning-profiles&gt;
       &lt;/target&gt;
       &lt;target name="AppcAppFileProviderUI"&gt;
         &lt;provisioning-profiles&gt;
           &lt;device&gt;UUID GOES HERE&lt;/device&gt;
           &lt;dist-appstore/&gt;
           &lt;dist-adhoc/&gt;
         &lt;/provisioning-profiles&gt;
       &lt;/target&gt;
     &lt;/extension&gt;
   &lt;/extensions&gt;
   </pre></code>
   10. Run <code>appc ti info -t ios</code> and find the provisioning profiles. Copy and paste the provisioning profile UUIDs for the FileProvider targets into the <code>tiapp.xml</code>.
   11. Add the app groups to the <code>tiapp.xml</code> under the <code>ios</code> section:
   <code><pre>
   &lt;capabilities&gt;
     &lt;app-groups&gt;
       &lt;group&gt;group.appc.testext&lt;/group&gt;
     &lt;/app-groups&gt;
   &lt;/capabilities&gt;
   </pre></code>
   12. Clean the project: <code>appc ti clean</code>
   13. Build the project: <code>appc run -p ios -T device</code> and supply the Titanium app's provisioning profile UUID and developer name.
   14. Open the generated Xcode project <code>/path/to/myapp/build/iphone/myapp.xcodeproj</code> and verify app groups (under project settings -> capabilities) are enabled for all targets. Also verify the entitlements file under the <code>Extensions</code> folder in the Xcode project sidebar are correct.</li>
<li>Keerthi Mahalingam 2019-04-12

   FR passed. Danger failed on master .waiting for that to get resolved to merge .PR merged for 8.0.X only</li>
<li>Christopher Williams 2019-04-15

   Merged to master and 8_0_X</li>
<li>Keerthi Mahalingam 2019-04-19

   Verified the fix on SDK  8.1.0.v20190419091515 and 8.0.1.v20190418104938. Entitlements file and capabilities shows as expected. closing.
   <code><pre>
   Operating System
     Name                        = Mac OS X
     Version                     = 10.13.6
     Architecture                = 64bit
   Node.js
     Node.js Version             = 8.9.1
     npm Version                 = 5.5.1
   Titanium CLI
     CLI Version                 = 5.1.1
   Titanium SDK
     SDK Version                 = 8.0.1.v20190418104938 and 8.1.0.v20190419091515
   Cli=7.0.11-70X.1
   Studio = 5.1.2.201903111843
   </pre></code>
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-26948.json">JSON Source</a></p>