---
title: "[TIMOB-26953] Android: Modify Service.foregroundNotify() to support "foregroundServiceType" for Android Q"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-10-03T15:24:09.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, foreground, location, service</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2019-03-29T22:16:19.000+0000</td></tr>
<tr><th>Updated</th><td>2019-10-03T15:27:47.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
Android Q requires foreground services to set a new "foregroundServiceType" setting to "location" in order to collect location data while the app is backgrounded.
<a href="https://developer.android.com/preview/privacy/device-location#continuation-user-initiated-action" rel="nofollow" target="_blank">https://developer.android.com/preview/privacy/device-location#continuation-user-initiated-action</a>

*Recommended Solution:*
We don't have to set "android:foregroundServiceType" in the "AndroidManifest.xml". We can set it dynamically via the new Android Q [Service.startForeground()](<a href="https://developer.android.com/reference/android/app/Service.html#startForeground(int" rel="nofollow" target="_blank">https://developer.android.com/reference/android/app/Service.html#startForeground(int</a>,%20android.app.Notification,%20int)) method overload which accepts a <code>foregroundServiceType</code> as a 3rd argument. We should modify Titanium's [Service.foregroundNotify()](<a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.Android.Service-method-foregroundNotify) to support this new setting as well.


<h3>Comments</h3>

<ol>
<li>Gary Mathews 2019-09-05

   8_3_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/11197" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11197</a></li>
<li>Samir Mohammed 2019-09-25

   FR Passed, waiting on Jenkins build.</li>
<li>Christopher Williams 2019-10-02

   merged to master</li>
<li>Sohail Saddique 2019-10-03

   Verified working correctly on 8.3.0. 
   
   Ticket closed.</li>
<li>Sohail Saddique 2019-10-03

   Build: 8.3.0.v20191002165629</li>
</ol>


<p><a href="/TIMOB/TIMOB-26953.json">JSON Source</a></p>