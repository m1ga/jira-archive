---
title: "[TIMOB-26954] Android: Reading a JSON file fails on Android Q"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-06-13T18:33:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 8.0.0, Release 7.3.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.1.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>Blob, JSON, android, engSchedule</td></tr>
<tr><th>Reporter</th><td>grebulon</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2019-03-14T14:39:17.000+0000</td></tr>
<tr><th>Updated</th><td>2020-03-25T17:48:49.000+0000</td></tr>
</table>

<h3>Description</h3>

Running the following code, returns t==null
{quote}
var file=Ti.Filesystem.getFile(Config.PathRoot.resources,'some.json');
var d=file.read();
var t=d.text;
{quote}

Analysis:
TiBlob#getText checks TiMimeTypeHelper.isBinaryMimeType(mimetype) and if the file is binary, it only allows application/octet-stream. The detected mime type comes from android.webkit.MimeTypeMap#getMimeTypeFromExtension (in TiMimeTypeHelper#getMimeTypeFromFileExtension). This used to return the octet-steam mime on *.json files, but it was probably fixed to properly return application/json.


<h3>Comments</h3>

<ol>
<li>grebulon 2019-03-14

   BTW, I fixed this in TiMimeTypeHelper#isBinaryMimeType
   {quote}
   if (mimeType.startsWith("application/") && !mimeType.endsWith("xml") && !mimeType.endsWith("json"))
      return true;
   else ...
   {quote}
   Not very comprehensive, but does the job</li>
<li>Rakhi Mitro 2019-03-20

   Thanks for sharing with us. Just following up to check the status of this case and if you need further help on it. 
   
    </li>
<li>Abir Mukherjee 2019-04-01

   [~ahutton] Would you please check if you can repro this? I just spoke with [~jquick] and he suggested to do a quick check before scheduling this.</li>
<li>Alan Hutton 2019-05-15

   [~amukherjee] Reproducible. </li>
<li>Michael Gangolf 2019-06-03

   There is also an issue on github from the Android team about this: <a href="https://github.com/appcelerator/titanium_mobile/issues/10852" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/issues/10852</a> with some log-data</li>
<li>Joshua Quick 2019-06-04

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/10931" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10931</a></li>
<li>Lokesh Choudhary 2019-06-05

   FR Passed.
   PR Merged.</li>
<li>Joshua Quick 2019-06-10

   PR (8.1.x): <a href="https://github.com/appcelerator/titanium_mobile/pull/10955" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10955</a></li>
<li>Lokesh Choudhary 2019-06-11

   Backport merged.</li>
<li>Keerthi Mahalingam 2019-06-13

    Verified the fix on SDK  8.2.0.v20190612155743 and 8.1.0.v20190612160220. Works as expected. Closing
    
    <code><pre>
     Name                        = Mac OS X
      Version                     = 10.13.6
      Architecture                = 64bit
      # CPUs                      = 8
      Memory                      = 17179869184
    Node.js
      Node.js Version             = 10.13.0
      npm Version                 = 6.4.1
    Titanium CLI
      CLI Version                 = 5.1.1
    Titanium SDK
      SDK Version                 = 8.2.0.v20190612155743 and 8.1.0.v20190612160220
    Emulator = pixel 2 Q
    </pre></code></li>
<li>cstefaniga  2019-09-06

    Hello, 
    
    I am contacting you on behalf of ATOSS Software company. Our mobile application is built based on your framework entirely. 
    
    The problem is the following: as you already know, android 10 was officially released a few days ago and some of our customers already have it. We received from them a lot of complaints in which they said that the application doesn't work anymore.
    We are reading a local JSON file and the problem described here reproduces here on our product. 
    
    Unfortunately we are unable to change sdk from 7.5.2 (what we currently have) to 8.1.0 (which has the fix) in a time that is agreeable by the customers so this leave us with no option but the sdk patch.
    
    Could we please get a patch with this fix for SDK 7.5.2 ?
    
    We would greatly appreciate your support on this one! 
    Thanks!</li>
<li>Hans Knöchel 2019-09-06

    For anyone running into this, here a custom build thats 7.5.2-GA + this patch (nothing else): <a href="https://www.dropbox.com/s/pmsn9g9v7gqdkme/mobilesdk-7.5.2-osx.zip?dl=1" rel="nofollow" target="_blank">https://www.dropbox.com/s/pmsn9g9v7gqdkme/mobilesdk-7.5.2-osx.zip?dl=1</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-26954.json">JSON Source</a></p>