---
title: "[TIMOB-26959] iOS: Add TLS 1.3 support"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-08-03T21:04:12.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.1.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>HTTPClient, TLS, ios, network</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2019-04-01T21:23:39.000+0000</td></tr>
<tr><th>Updated</th><td>2020-08-03T21:04:12.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
We should add a new <code>TLS_VERSION_1_3</code> constant to the <code>Ti.Network</code> module.

We should also make sure TLS 1.3 is enabled by default when doing network communications via:
* <code>HTTPClient</code>
* Loading images via URLs. (ex: <code>ImageView.image</code>)
* Module verification on app startup for non-production builds via "ti.verify".

*Reasons:*
* For parity when we do the same on Android. See: [TIMOB-26956]
* So that devs can set a TLS version preference via [HTTPClient.tlsVersion](<a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.Network.HTTPClient-property-tlsVersion).

*Note:*
Apple added TLS 1.3 support to iOS 11.
<a href="https://developer.apple.com/documentation/security/sslprotocol/ktlsprotocol13?language=objc" rel="nofollow" target="_blank">https://developer.apple.com/documentation/security/sslprotocol/ktlsprotocol13?language=objc</a>


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2019-04-01

   Please note that Android won't have official TLS 1.3 support until Android Q (aka: Android 10.0) is released. Please see:
   <a href="https://developer.android.com/preview/features#tls-1.3" rel="nofollow" target="_blank">https://developer.android.com/preview/features#tls-1.3</a>
   
   But that doesn't mean we can't add it to iOS before Android. If we do this, then we may want to add the constant to Android anyways and have it no-op for TLS 1.3 until Titanium has official Android Q support.</li>
<li>Kota Iguchi 2019-04-02

   This sounds to me we might want to implement new <code>tlsVersion</code> property onto <code>Ti.Network.TCP</code> too like below.
   
   <code><pre>
   var socket = Ti.Network.Socket.createTCP({
       host: 'www.example.com',
       port: 80,
       tlsVersion: Ti.Network.TLS_VERSION_1_3
   });
   </pre></code></li>
<li>Kota Iguchi 2019-04-02

   FYI: I'm not sure if it really makes sense but I can see that each platform has API to deal with TLS version on socket/stream.
   
   - Android: [javax.net.ssl.SSLSocket.setEnabledProtocols](<a href="https://developer.android.com/reference/javax/net/ssl/SSLSocket.html#setEnabledProtocols)" rel="nofollow" target="_blank">https://developer.android.com/reference/javax/net/ssl/SSLSocket.html#setEnabledProtocols)</a>
   - iOS: [NSStreamSocketSecurityLevel on NSStream](<a href="https://developer.apple.com/documentation/foundation/nsstreamsocketsecuritylevel?language=objc" rel="nofollow" target="_blank">https://developer.apple.com/documentation/foundation/nsstreamsocketsecuritylevel?language=objc</a>|)
   - Windows: [Windows.Networking.Sockets.StreamSocket.ConnectAsync](<a href="https://docs.microsoft.com/en-us/uwp/api/windows.networking.sockets.streamsocket.connectasync#Windows_Networking_Sockets_StreamSocket_ConnectAsync_Windows_Networking_EndpointPair_Windows_Networking_Sockets_SocketProtectionLevel_)" rel="nofollow" target="_blank">https://docs.microsoft.com/en-us/uwp/api/windows.networking.sockets.streamsocket.connectasync#Windows_Networking_Sockets_StreamSocket_ConnectAsync_Windows_Networking_EndpointPair_Windows_Networking_Sockets_SocketProtectionLevel_)</a>
   </li>
<li>Eric Merriman  2019-08-22

   [~lchoudhary] We should set up a test of this</li>
<li>Abir Mukherjee 2019-10-02

   [~ssekhri] can you please check this? If it's done, can you please comment? Thanks.</li>
<li>Ygor Lemos 2019-10-29

   any chance on getting this back-ported to 8.3.X ?</li>
<li>Joshua Quick 2019-10-29

   [~ygbr], I remember our test team doing a quick test on iOS 13 and we got TLS 1.3 for free. At least in a <code>WebView</code>. We didn't have to make any code changes. Try it with the below URL.
   <a href="https://ssllabs.com/ssltest/viewMyClient.html" rel="nofollow" target="_blank">https://ssllabs.com/ssltest/viewMyClient.html</a>
   
   But we haven't done extensive testing yet. Nor tested it on older iOS versions to see what our options are. The team has been more focused on supporting iOS 13 in general.</li>
<li>Vijay Singh 2020-05-29

   I tried to test it using Charles. It always uses TLS 1.2. 
   
   In iOS, if one want to set some minimum TLS version, add following key can be set in tiapp.xml's plist section of iOS.  Similar is explained [here](<a href="https://stackoverflow.com/questions/37320980/how-to-enable-tls-1-2-1-1-1-0-and-ssl-in-ios-app)" rel="nofollow" target="_blank">https://stackoverflow.com/questions/37320980/how-to-enable-tls-1-2-1-1-1-0-and-ssl-in-ios-app)</a> -
   
   <code><pre>
   &lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
   &lt;dict&gt;
        &lt;key&gt;NSExceptionDomains&lt;/key&gt;
    &lt;dict&gt;
       &lt;key&gt;your.servers.domain.here&lt;/key&gt;
       &lt;dict&gt;
           &lt;key&gt;NSExceptionMinimumTLSVersion&lt;/key&gt;
           &lt;string&gt;TLSv1.0&lt;/string&gt;
       &lt;/dict&gt;
       &lt;/dict&gt;
   &lt;/dict&gt;
   </pre></code>
   
   [~ssekhri] Please verify it. Thanks!
   
   
   Test Case  - 
   
   <code><pre>
   var win = Ti.UI.createWindow({
       backgroundColor: '#fff'
   });
   
   var btn = Ti.UI.createButton({
   	top: 100,
       title: 'Load'
   });
   
   btn.addEventListener('click', function() {
        var webView = Ti.UI.createWebView({
        	top: 150,
        	url: '<a href="https://ssllabs.com/ssltest/viewMyClient.html" rel="nofollow" target="_blank">https://ssllabs.com/ssltest/viewMyClient.html</a>' //'<a href="https://www.google.com" rel="nofollow" target="_blank">https://www.google.com</a>'//
        });
   
        win.add(webView);
   
   	// const url = '<a href="https://ssllabs.com/ssltest/viewMyClient.html" rel="nofollow" target="_blank">https://ssllabs.com/ssltest/viewMyClient.html</a>';// "<a href="https://www.google.com" rel="nofollow" target="_blank">https://www.google.com</a>"; //
   	// const client = Ti.Network.createHTTPClient({
   	//     onload: function(e) {
   	//         console.log("success");
   	//     },
   
   	//     onerror: function(e) {
   	//         console.error(e.error);
   	//     },
   	// });
   	// client.open("GET", url);
   	// client.send();
   });
   
   win.add(btn);
   win.open();
   </pre></code>
   </li>
<li>Vijay Singh 2020-06-04

   PR - <a href="https://github.com/appcelerator/titanium_mobile/pull/11754" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11754</a></li>
<li>Satyam Sekhri 2020-07-01

    FR Passed.
    Waiting for Jenkins build</li>
<li>Christopher Williams 2020-07-06

    merged to master for 9.1.0 target</li>
<li>Satyam Sekhri 2020-08-03

    Verified on:
    Mac OS: 10.15.4
    SDK: 9.1.0.v20200727104531
    Appc CLI: 8.1.0-master.7
    JDK: 11.0.4
    Node: 10.17.0
    Studio: 6.0.0.202005141803
    Xcode: 12.0 beta
    Device: iOS simulator 13.5, 12.2, 11.4</li>
</ol>


<p><a href="/TIMOB/TIMOB-26959.json">JSON Source</a></p>