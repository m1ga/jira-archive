---
title: "[TIMOB-27098] iOS: debugger does not show all app files loaded"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-07-02T21:00:36.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>node-titanium-sdk 3.2.0, Release 8.1.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>engSchedule</td></tr>
<tr><th>Reporter</th><td>Mark Henderson</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2019-04-29T12:55:28.000+0000</td></tr>
<tr><th>Updated</th><td>2019-07-02T21:00:37.000+0000</td></tr>
</table>

<h3>Description</h3>

For a while now I have only been able to debug using Safari on version 7.4.1GA. When I use 7.5.X or 8.0.X then the Safari Web Inspector doesn't seem to be wired up correctly anymore. 

Please see the screenshot of what I see in Web Inspector. It seems to be displaying appcelerator Kroll type files rather than my apps files.

After quite a few re-deploys of the app to Simulator a breakpoint in Studio may hit and I can temporarily debug but it's not very stable. Deploying to a device seems to be better especially on Android.

Steps to reproduce:
- Create a new blank classic project (I don't use Alloy)
- Deploy in Debug mode to Simulator (I used iPhone XS as it was a new emulator type to be a fair test)
- Open Safari > Go to Developer > Simulator iPhone XS > JSContext
- I see Titanium internal js files not my app code (see screenshot)


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-27098_66579/Web_Inspector_—_iPhone_Xs_Max_—_testAttach_—_JSContext.png">Web_Inspector_—_iPhone_Xs_Max_—_testAttach_—_JSContext.png</td></td><td>2019-04-29T12:52:22.000+0000</td><td>584337</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sharif AbuDarda 2019-05-01

   Hello, Can you share the full steps to reproduce the issue on our end? We will try it with the latest SDK and the previous once to see whether the difference is reproducible or not. Thanks.</li>
<li>Mark Henderson 2019-05-02

   ok added the steps, see above..</li>
<li>Rakhi Mitro 2019-05-02

   [~mark.henderson@snagr.co.uk],
   Did you experience the issue on iOS simulator/device both?</li>
<li>Mark Henderson 2019-05-02

   I'm experiencing the same between iOS simulator, device and Android both.</li>
<li>Christopher Williams 2019-05-07

   So debugging in Studio vs Safari/Chrome are entirely separate issues. There are known issues with Studio debugging in various configurations/OS versions and we're working on those issues. (e.g. TISTUD-9161, TISTUD-9166) One of the bigger ones recently was that with iOS 11.3+ Apple modified how the debugger connects to simulators - TISTUD-9159
   
   Debugging in Safari/Chrome should work fine, and the screenshot does not indicate an "issue" here. In SDK 8+ we use polyfilling on the platforms to "fill in" support for ES6+ language features that the underlying JS engine may not yet support. Those files in the screenshot are a result of that polyflling and technically *are* baked into your app/the SDK. The set of files that get included varies by the platform/JS engine, but iOS has much more than Android due to our support back to iOS 8.x (which effectively has no native ES6 support).
   
   Also note that as of 8.1 we "bundle" all the polyfills/internal JS code we bake in to a single file (ti.main.js), so the file listing will be less "busy".</li>
<li>Mark Henderson 2019-05-07

   Hi Christopher,
   
   Thanks for the update, I will check each issue out tomorrow.
   
   With iOS I wasn't able to locate my files but I will check again tomorrow. Chrome seems to be working great, there are extra files but they are nicely segregated and I can see my own files and debug etc,, Safari / Appcelerator Studio is struggling at the moment.
   
   Thanks!</li>
<li>Christopher Williams 2019-05-21

   Ok, I'm actually seeing this oddball behavior under Safari/iOS as well - I can see *some* of the polyfilled scripts, but can't see the app.js file itself in the list of scripts. I don't really get why it likes some files but not others here...</li>
<li>Christopher Williams 2019-05-21

   Looks like Safari may have an issue with files that contain inlined source maps in a trailing comment? Seems to me that only the files returning a sourceMapURL value are "missing" in the listings.
   
   According to this, they've had support for this since 2016: <a href="https://bugs.webkit.org/show_bug.cgi?id=154303" rel="nofollow" target="_blank">https://bugs.webkit.org/show_bug.cgi?id=154303</a>
   
   So I'm not really sure exactly what's going wrong here. I guess I'll have to fiddle with not generating source maps or tweaking settings to try and figure it out.</li>
<li>Christopher Williams 2019-06-07

   For a first pass, I think turning off source-maps by default on development builds for iOS would help.
   
   I'm going to expose a --source-maps flag to the CLI build, so we can explicitly turn it on for builds (say from Studio), as right now it's a tiapp property (so source mapping will be turned on if you have the property set to true or pass the flag to the CLI for iOS - it will remain on by default for non-production builds on Android)</li>
<li>Christopher Williams 2019-06-11

    <a href="https://github.com/appcelerator/node-titanium-sdk/pull/106" rel="nofollow" target="_blank">https://github.com/appcelerator/node-titanium-sdk/pull/106</a></li>
<li>Hans Knöchel 2019-06-14

    Thanks for handling this Chris! Curious if Alloy files finally show up properly as well (not the generated files but the ones that actually include ES6+ etc).</li>
<li>Richard Lustemberg 2019-06-17

    Hi Chris. I've pulled the module from your repo, but didn't manage yet to get all source code to show up in the Webkit inspector.
    I've build using the command from VSC:
    
    {noformat}
    appc "run" "--platform" "ios" "--log-level" "debug" "--project-dir" "/Users/richard/Code/Titanium/Drawing App" "--target" "simulator" "--device-id" "xxx"
    {noformat}
    
    Is there. anything else I should do? I've used your branch, latest commit from today (17-6-19)
    Thanks for taking care of this!</li>
<li>Christopher Williams 2019-06-19

    PR to roll this fix up into SDK 8.1.0: <a href="https://github.com/appcelerator/titanium_mobile/pull/10981" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10981</a></li>
<li>Satyam Sekhri 2019-06-19

    FR Passed. The app.js (main and child) are both shown during debug using safari web inspector and chrome dev-tools. Also the breakpoints are hit as expected.</li>
<li>Christopher Williams 2019-06-19

    merged to master and 8_1_X</li>
<li>Keerthi Mahalingam 2019-07-02

    Verified the fix on sdk 8.1.0.v20190702104421 and 8.2.0.v20190702103948.Debugger shows all app files. works as expected
    <code><pre>
    Name                        = Mac OS X
      Version                     = 10.14.5
      Architecture                = 64bit
      # CPUs                      = 12
      Memory                      = 17179869184
    Node.js
      Node.js Version             = 10.13.0
      npm Version                 = 6.4.1
    Titanium CLI
      CLI Version                 = 5.2.1
    Titanium SDK
      SDK Version                 = 8.2.0.v20190702103948  and 8.1.0.v20190702104421
    Device = iPhone X iOS 11
    Simulator = iPhone XS iOS 12
    </pre></code>
    </li>
</ol>


<p><a href="/TIMOB/TIMOB-27098.json">JSON Source</a></p>