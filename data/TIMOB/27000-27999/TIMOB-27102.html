---
title: "[TIMOB-27102] iOS: \"appc run\" wrongly edits a Titanium SDK installed file causing studio to beachball and rebuild its workspace"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-06-06T17:32:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.0.2</td></tr>
<tr><th>Components</th><td>CLI, iOS, Tooling</td></tr>
<tr><th>Labels</th><td>appc, cli, engSchedule, ios, run, studio</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2019-05-25T00:33:52.000+0000</td></tr>
<tr><th>Updated</th><td>2019-06-06T17:32:46.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
Every time you click "Run" in Appcelator Studio to the iOS simulator, the IDE will *beachball* while rebuilding the workspace once the built app is launched in the simulator. The IDE can block for 5-60 seconds depending on the machine. While beachballing, the IDE cannot be used. Nor can you view anything being logged by the app.
_(Studio always beachballs for 1 minute for me.)_

*Cause:*
The CLI is changing the following Titanium SDK file whenever you do an <code>appc run</code> to the iOS Simulator.
<code><pre>
./node_modules/ioslib/lib/sim_focus.scpt
</pre></code>

Appcelerator Studio monitors for any Titanium SDK changes under the below directory. If at least 1 file is added/changed/deleted under this directory, then the IDE will "Rebuild the Workspace". The above file change is triggering this behavior for iOS simulator builds.
<code><pre>
~/Library/Application Support/Titanium/mobilesdk
</pre></code>

*Note:*
You can monitor file tree changes with the below node.js script. You'll need to change the below path to your equivalent SDK version folder that you plan on building with (don't forget to change <code>&lt;UserName</code> in path) and then run it in the terminal via the <code>node</code> command line tool.
<code><pre>
var fs = require("fs");
var folderPath = "/Users/&lt;UserName&gt;/Library/Application Support/Titanium/mobilesdk/osx/8.1.0";
fs.watch(folderPath, { recursive: true }, function(eventType, fileName) {
	console.log("- [" + eventType + "] " + fileName);
});
</pre></code>


<h3>Comments</h3>

<ol>
<li>Ewan Harris 2019-05-25

   This looks to be down to us spawning osascript to run the sim focus script. If I run <code>osascript "/Users/eharris/Documents/git/titanium_mobile/node_modules/ioslib/lib/sim_focus.scpt" "Simulator"</code> manually then I se the same changes, it looks like osascript changes the modified time every time it runs that file. Some googling threw up <a href="https://stackoverflow.com/questions/9487469/prevent-an-applescript-script-from-changing-its-own-modification-date-when-using" rel="nofollow" target="_blank">https://stackoverflow.com/questions/9487469/prevent-an-applescript-script-from-changing-its-own-modification-date-when-using</a>, and it looks like because we don't declare the variables we use as local they're implicitly global, declaring them with "local" at the start of the run handler fixes this for me. I'll verify with the folks in Dublin and then PR on Monday. We could potentially ship this in 8.0.2 if it's causing issues for Studio.
   
   Note, moved to TIMOB as this is a problem with ioslib which is part of the SDK and not the appc cli</li>
<li>Christopher Williams 2019-05-28

   <a href="https://github.com/appcelerator/ioslib/pull/87" rel="nofollow" target="_blank">https://github.com/appcelerator/ioslib/pull/87</a></li>
<li>Christopher Williams 2019-05-28

   8_0_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/10915" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10915</a>
   master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/10916" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/10916</a></li>
<li>Satyam Sekhri 2019-05-29

   FR passed. No file changes in the SDK folder after build to iOS simulator. Also no more beachball/temporary hang in the studio after iOS simulator launch.</li>
<li>Christopher Williams 2019-05-30

   merged to master and 8_0_X</li>
<li>Keerthi Mahalingam 2019-06-06

   Verified the fix on SDK 8.2.0.v20190605080023, 8.1.0.v20190605095601 and 8.0.2.v20190605070127 .No beach ball occurs on running simulators
   *Test Enviornment:*
   Name                        = Mac OS X
     Version                     = 10.13.6
     Architecture                = 64bit
   Node.js
     Node.js Version             = 8.9.1
     npm Version                 = 5.5.1
   Titanium CLI
     CLI Version                 = 5.1.1
   Titanium SDK
     SDK Version                 = 8.2.0.v20190605080023, 
                                                8.1.0.v20190605095601 
                                                8.0.2.v2019060507012
   Simulator = iphon6s iOS 11, iPhone xr iOS 12, iPhone 7 iOS 12.</li>
</ol>


<p><a href="/TIMOB/TIMOB-27102.json">JSON Source</a></p>