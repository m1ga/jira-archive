---
title: "[TIMOB-27237] Android: Animating a Label or Button with borderRadius bugs the backgroundColor animation."
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-10-04T10:35:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>animation, borderRadius, button, engSchedule, label, titanium</td></tr>
<tr><th>Reporter</th><td>remo.loaiza</td></tr>
<tr><th>Assignee</th><td>Yordan Banev</td></tr>
<tr><th>Created</th><td>2019-07-04T01:42:12.000+0000</td></tr>
<tr><th>Updated</th><td>2019-10-04T10:35:46.000+0000</td></tr>
</table>

<h3>Description</h3>

Adding the property borderRadius to a label or a button and animating the backgroundColor makes it always go from white to the animated color instead of animating from the view background color to the new color.

Test case:

<code><pre>
var win = Ti.UI.createWindow({
        layout : 'vertical',
        width : Ti.UI.FILL,
        height : Ti.UI.FILL
    });

    var label = Ti.UI.createLabel({
        width :Ti.UI.SIZE,
        font : {
            fontSize : 14
        },
        text : 'Should go from blue to black',
        textAlign : 'center',
        color : 'white',
        backgroundColor : 'blue',
        borderRadius : 20
    });
    
    label.addEventListener('click',function() {
        label.animate({
            backgroundColor : '#000',
            duration : 10000
        });
    });
    
    win.add(label);
    win.open();
</pre></code>

The expected behavior is for the background to go from {color:blue}blue{color} to {color:black}black{color} but instead it goes from white to black. If you remove the borderRadius then it works as expected.
A workaround is to wrap the label/button in a view.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27237_66755/1562230320886.JPEG">1562230320886.JPEG</td></td><td>2019-07-04T08:56:36.000+0000</td><td>12036</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27237_66754/1562230320932.JPEG">1562230320932.JPEG</td></td><td>2019-07-04T08:55:58.000+0000</td><td>12490</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27237_66761/1562408449852.JPEG">1562408449852.JPEG</td></td><td>2019-07-06T10:22:39.000+0000</td><td>17968</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27237_66762/1562408449904.JPEG">1562408449904.JPEG</td></td><td>2019-07-06T10:22:39.000+0000</td><td>17502</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27237_66756/ui_bug_brorderradius.gif">ui_bug_brorderradius.gif</td></td><td>2019-07-04T17:45:12.000+0000</td><td>874772</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Rakhi Mitro 2019-07-04

   Hello [~remo.loaiza],
   Thanks for reporting this. Are you using SDK 7.5.1 for testing? It would be great if you can test on SDK  8.0.2.GA and let us know the result. To install SDK  8.0.2.GA  please open terminal and type: *appc ti sdk install  8.0.2.GA*</li>
<li>remo.loaiza 2019-07-04

   Hi Rakhi, I just tested in 8.0.2 GA and it's still there.</li>
<li>Rakhi Mitro 2019-07-04

   [~remo.loaiza],
   We tested this on 8.0.2 GA(Android device Huawei y9 2018) and unable to reproduce this as a bug. This is working as expected.  Check the outputs:
   
   
   *Before click:*
    !1562230320932.JPEG|thumbnail! 
   *After click:*
    !1562230320886.JPEG|thumbnail! 
   
   The expected behaviour is for the background to go from blue to black.
   </li>
<li>remo.loaiza 2019-07-04

   Im sorry, I think I may not have explained the problem as I should.
   If you add a border radius the animation goes to white first then it goes to black. This is not expected, it should go from blue to black.  
   Here's a GIF of the bug and new test code:
   
   !ui_bug_brorderradius.gif! 
   
   
   <code><pre>
       var win = Ti.UI.createWindow({
           layout : 'vertical',
           width : Ti.UI.FILL,
           height : Ti.UI.FILL
       });
    
       var label = Ti.UI.createLabel({
           top : 20,
           width :'80%',
           font : {
               fontSize : 14
           },
           text : 'Should go from blue to black',
           textAlign : 'center',
           color : 'white',
           backgroundColor : 'blue',
           borderRadius : 20
       });
       
       var label2 = Ti.UI.createLabel({
           top : 20,
           width :'80%',
           font : {
               fontSize : 14
           },
           text : 'Should go from blue to black',
           textAlign : 'center',
           color : 'white',
           backgroundColor : 'blue'
       });
       
       label.addEventListener('click',function() {
           label.animate({
               backgroundColor : '#000',
               duration : 10000
           });
           label2.animate({
               backgroundColor : '#000',
               duration : 10000
           });
       });
       
       win.add(label);
       win.add(label2);
       win.open();
   </pre></code>
   </li>
<li>Jebun Naher 2019-07-06

   Hello [~remo.loaiza],
   Thanks for your update. I just tested the issue using ti sdk 8.0.2 GA on physical android device Huawei y9 2018. The issue does not reproduce on our end. The animation goes directly from blue to black, it doesn't go to white first. Please find the screenshots.
    !1562408449852.JPEG|thumbnail!  !1562408449904.JPEG|thumbnail! 
   Can you share your device / emulator details please? </li>
<li>remo.loaiza 2019-07-08

   Ive tried and reproduced this on a HUAWEI P30 Android 9 device, Android 6 emulator, and on a Sony D6603 running Android 6. On all Ive tried both SDKs 7.5.1 and 8.0.2.
   
   I started a new project with 8.0.2 to test if it was not another setting i've put in and I can reproduce this still. However, by default a new project uses the dark theme so instead of starting from white it starts from black. Which leads me to think this is somehow related to Android themes.</li>
<li>Sharif AbuDarda 2019-07-11

   Hello [~remo.loaiza], The issue occurs with the white window background. I was able to reproduce the issue using a white background. The issue is when using a border radius to the label. Clicking on it will first remove the background color(blue) and then the black background color starts to animate(from white to black). This is more visible in a white background. The expected behavior is shown in the second label. Where the animation turns the background color to black in 10s. Tested with SDK 8.0.2.GA in Android 9.0.1 device (Nokia 6). The issue is with both label and button.  Working as expected in iOS. Moving to engineering. Thanks.</li>
<li>Yordan Banev 2019-07-16

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/11053" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11053</a></li>
<li>Keerthi Mahalingam 2019-08-01

   FR Passed. Waiting for 8.1.0 GA release to merge PR.</li>
<li>Yordan Banev 2019-08-19

    PR (8_3_X): <a href="https://github.com/appcelerator/titanium_mobile/pull/11158" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11158</a></li>
<li>Keerthi Mahalingam 2019-08-19

    FR passed.Unit tests are failing .not able to merge PR
    </li>
<li>Keerthi Mahalingam 2019-09-09

    PR merged on master.</li>
<li>Sohail Saddique 2019-10-04

    *Verified fix*
    
    Test environment:
    
    Studio Ver:     5.1.4.201909061933
    SDK Ver:        8.3.0.v20191003144543
    Mac OS Ver:  10.14.6
    Ti CLI Ver:     5.2.1
    Node Ver:       10.16.3
    NPM Ver:        6.11.3
    Emulator:       â‡¨ Android 10 (Pixel 3 XL)
    
    Closing ticket.
    </li>
</ol>


<p><a href="/TIMOB/TIMOB-27237.json">JSON Source</a></p>