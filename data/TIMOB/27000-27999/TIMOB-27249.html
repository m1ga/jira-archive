---
title: "[TIMOB-27249] Android: OptionDialog without radio buttons should not auto-set "selectedIndex" property after clicking option"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-08-21T13:58:10.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.1.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>OptionDialog, android, dialog, index</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Yordan Banev</td></tr>
<tr><th>Created</th><td>2019-07-17T03:29:58.000+0000</td></tr>
<tr><th>Updated</th><td>2019-08-21T13:58:11.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
As of Titanium 8.1.0, Android now supports displaying an <code>OptionDialog</code> without radio buttons if its "selectedIndex" property is not set (or set to <code>-1</code>). See: [TIMOB-26793]

But one usability issue with the current implementation is that tapping on an <code>OptionDialog</code> button causes the "selectedIndex" to be set to the index of the tapped button. The issue with this is if the <code>OptionDialog</code> is re-shown, it'll show radio buttons instead of plain buttons which is not desired. This happens because the "selectedIndex" was set.

*Proposed Solution:*
If the <code>OptionDialog</code> is not showing radio buttons, then it should not automatically set the "selectedIndex" property when tapping a button. The "click" event already provides the index of the button that was tapped on and this is enough. Besides, iOS does not support the "selectedIndex" property anyways, making this behavior portable.

However, if the developer does set "selectedIndex" via code to show radio buttons, then the <code>OptionDialog</code> should maintain the old behavior and update the "selectedIndex" property with the clicked button index.

*Steps to reproduce:*
<h4>Build and run the below code on Android.</h4>
<h4>Tap on the "Show Dialog" button.</h4>
<h4>Tap on the dialog's "Option 1" button.</h4>
<h4>Tap on the "Show Dialog" button again to re-show it.</h4>
<h4>Notice the dialog shows radio buttons in front of every option button. _(This is the usability issue.)_</h4>

<code><pre>
var dialog = Ti.UI.createOptionDialog({
	title: "Option Dialog",
	options: ["Option 1", "Option 2", "Cancel"],
	cancel: 2,
});
dialog.addEventListener("click", function(e) {
	Ti.API.info("@@@ Dialog 'click' index: " + e.index + ", button: " + e.button + ", cancel: " + e.cancel);
});
dialog.addEventListener("cancel", function(e) {
	Ti.API.info("@@@ Dialog 'cancel'");
});

var window = Ti.UI.createWindow();
var button = Ti.UI.createButton({ title: "Show Dialog" });
button.addEventListener("click", function(e) {
	dialog.show();
});
window.add(button);
window.open();
</pre></code>

*Work-around:*
Set "selectedIndex" to <code>-1</code> before re-showing the dialog.
<code><pre>
dialog.selectedIndex = -1;
dialog.show();
</pre></code>


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2019-07-17

   FYI: [~michael]
   
   Keeping you in the loop since you've implemented this feature. Doing this via "selectedIndex" set to <code>null</code>/<code>-1</code> was my idea and it was my mistake for not noticing the usability issue to begin with.</li>
<li>Michael Gangolf 2019-07-17

   [~jquick] Thanks for the info. Are you going to have a look at a fix or shall I give it a go?</li>
<li>Joshua Quick 2019-07-17

   We're thinking about making this change for 8.1.0.GA.
   
   If you're willing to make this change this week, then please feel free to do so. Otherwise I'll get someone on our end to do it. Thanks.</li>
<li>Yordan Banev 2019-07-18

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/11059" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11059</a></li>
<li>Keerthi Mahalingam 2019-07-26

   FR Passed. waiting for 8.1.0 GA to merge this PR. Also back port PR is needed .</li>
<li>Christopher Williams 2019-08-20

   Merged to master; cherry-picked to 8_3_X and 8_1_X</li>
<li>Samir Mohammed 2019-08-21

   *Closing ticket* fix verified in SDK version <code>8.2.0.v20190820104021</code>, <code>8.1.1.v20190820143437</code> and <code>8.3.0.v20190820103430</code>.
   
   Test and other information can be found at:
   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/11059" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11059</a>
   
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-27249.json">JSON Source</a></p>