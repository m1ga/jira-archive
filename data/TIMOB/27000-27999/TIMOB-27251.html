---
title: "[TIMOB-27251] iOS: require in native module assets fails"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 8.0.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Jan Vennemann</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2019-07-18T03:14:57.000+0000</td></tr>
<tr><th>Updated</th><td>2019-07-18T03:17:17.000+0000</td></tr>
</table>

<h3>Description</h3>

*Steps to reproduce the behavior*

<h4>Add the [appcelerator.syncserver.client](<a href="https://github.com/appcelerator-modules/appcelerator.syncserver.client)" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/appcelerator.syncserver.client)</a> module to a project</h4>
<h4>Require the module in the app: <code>const client = require('appcelerator.syncserver.client');</code></h4>
<h4>Build and run app</h4>

*Actual behavior*
The following error is thrown:
<code><pre>
Script Error {
    column = 20;
    line = 30;
    message = "Couldn't find module: jsdeferred for architecture: x86_64";
    sourceURL = "file:///Users/jvennemann/Library/Developer/CoreSimulator/Devices/4DDA0F33-7B7B-41FA-BF96-5800581D3BBB/data/Containers/Bundle/Application/C34F3D2A-9AB2-4394-B74F-D0D1BE3363F5/global-test-classic.app/appcelerator.syncserver.client";
    stack = "    at require@[native code]\n    at (/appcelerator.syncserver.client:30:20)\n    at global code(/appcelerator.syncserver.client:2251:70)\n    at require@[native code]\n    at (/app.js:443:21)\n    at global code(/app.js:449:70)\n    at require@[native code]\n    at (/ti.main.js:9576:10)\n    at loadAsync(/ti.main.js:9502:13)\n    at global code(/ti.main.js:9573:10)";
    toJSON = "&lt;KrollCallback: 0x600002ad0900&gt;";
}
</pre></code>

*Expected behavior*
The module loads without issues.

*Notes*
This is most likely related to incorrect handling in [tryNativeModule](<a href="https://github.com/appcelerator/titanium_mobile/blob/c465e92795ddaf8eb4ae44319df00e98bd4b3a10/iphone/TitaniumKit/TitaniumKit/Sources/API/KrollBridge.m#L1163)." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/c465e92795ddaf8eb4ae44319df00e98bd4b3a10/iphone/TitaniumKit/TitaniumKit/Sources/API/KrollBridge.m#L1163).</a> The module requires <code>appcelerator.syncserver.client/jsdeferred.js</code>, which will be split into module id and asset path. Only the asset path will be passed to <code>ResolvedModule</code> though, which causes  [loadCoreModuleAsset](<a href="https://github.com/appcelerator/titanium_mobile/blob/c465e92795ddaf8eb4ae44319df00e98bd4b3a10/iphone/TitaniumKit/TitaniumKit/Sources/API/KrollBridge.m#L802)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/c465e92795ddaf8eb4ae44319df00e98bd4b3a10/iphone/TitaniumKit/TitaniumKit/Sources/API/KrollBridge.m#L802)</a> to throw.

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-27251.json">JSON Source</a></p>