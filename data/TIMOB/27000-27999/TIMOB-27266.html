---
title: "[TIMOB-27266] Titanium "Failed to encrypt JavaScript files" error on >=8.0.1.GA on Windows when using 32 bit java"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-08-28T11:11:28.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 8.0.1, Release 8.0.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.1.1</td></tr>
<tr><th>Components</th><td>CLI</td></tr>
<tr><th>Labels</th><td>Titanium, engReviewed, regression</td></tr>
<tr><th>Reporter</th><td>Yahya Uddin</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2019-07-20T23:10:26.000+0000</td></tr>
<tr><th>Updated</th><td>2019-08-28T11:11:28.000+0000</td></tr>
</table>

<h3>Description</h3>

There is a bug on Titanium 8.0.1.GA & 8.0.2.GA, where when running a simple compile:

<code><pre>
ti run -p android -T device
</pre></code>

Gives the error:

<code><pre>
[INFO]  Encrypting JavaScript files: C:\ProgramData\Titanium\mobilesdk\win32\8.0.1.GA\android\titanium_prep.win32.exe "com.example.sandbox" "C:\path\to\project\build\android\assets" "--file-listing" "C:\path\to\project\build\android\titanium_prep_listing.txt"
[ERROR] Failed to encrypt JavaScript files
[ERROR]
</pre></code>

I narrowed down the issue to changes made to *titanium_prep.win32.exe*.

Looking at the history:
<a href="https://github.com/appcelerator/titanium_mobile/commits/master/support/android/titanium_prep.win32.exe" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commits/master/support/android/titanium_prep.win32.exe</a>

It seems that one of the 2 commits to be blamed are:
<a href="https://github.com/appcelerator/titanium_mobile/commit/3eaf55c596402078321632c682549428b7c57371#diff-81660f9ac67f928cddca3a1e35855580" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/3eaf55c596402078321632c682549428b7c57371#diff-81660f9ac67f928cddca3a1e35855580</a>
or
<a href="https://github.com/appcelerator/titanium_mobile/commit/86b3fc01230a0ec09c0b2577a3e68c1e488e48b1#diff-81660f9ac67f928cddca3a1e35855580" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/86b3fc01230a0ec09c0b2577a3e68c1e488e48b1#diff-81660f9ac67f928cddca3a1e35855580</a>

A temp workaround is to copy the *titanium_prep.win32.exe* and *titanium_prep.win64.exe* from 8.0.0.GA and replace the ones in the newer 8.0.1.GA or 8.0.2.GA. 


 




<h3>Comments</h3>

<ol>
<li>Rakhi Mitro 2019-07-22

   Hello,
   Thanks for sharing with us. Can you please create a new app, run this on 8.0.2.GA and let us know how it goes.</li>
<li>Yahya Uddin 2019-07-22

   Yes this occured on a hello world app for version 8.0.2.GA as well. But copying over the *titanium_prep.win32.exe* from an older version fixed the issue
   </li>
<li>Ewan Harris 2019-07-22

   Thanks for the report [~yahya12], I can reproduce this and it looks to be specific to using 32 bit Java</li>
<li>Ewan Harris 2019-07-30

   [~rmitro], they appear to be using 64-bit java based off their log, could we have a new ticket for that issue with full logs from the build.
   
   [~nsalahin], I don't believe we have any updates currently. If possible we would recommend the user to move to a 64bit java is possible.</li>
<li>Ewan Harris 2019-08-09

   titanium_prep: <a href="https://github.com/appcelerator/titanium_prep/pull/35" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_prep/pull/35</a></li>
<li>Ewan Harris 2019-08-12

   titanium_mobile master: <a href="https://github.com/appcelerator/titanium_mobile/pull/11136" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11136</a>
   
   I'm not sure where else we want this to land, it's a regression from 8.0.1.GA onwards</li>
<li>Ewan Harris 2019-08-19

   8_1_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/11155" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11155</a>
   8_3_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/11159" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11159</a></li>
<li>Ewan Harris 2019-08-20

   Note for this ticket, we made our default settings for d8 and javac max memory incompatible with 32-bit java in TIMOB-26898. If you absolutely must use Java 8 32 bit (Java 9+ is 64 bit only), you must set the following.
   
   <code><pre>
   [appc] ti config android.javac.maxMemory 1024M
   [appc] ti config android.dx.maxMemory 1024M
   </pre></code></li>
<li>Samir Mohammed 2019-08-20

   Using the instructions mentioned by Ewan above I am able to verify the fix on SDK Version 8.2.0.v20190819090550. FR Also passed for 8_1_X and 8_3_X.</li>
<li>Christopher Williams 2019-08-20

    Merged to master and 8_3_X. Waiting on rebuild for 8_1_X...</li>
<li>Christopher Williams 2019-08-20

    Merged to 8_1_X</li>
<li>Samir Mohammed 2019-08-28

    Using the above instructions also able to verify the fix on SDK version <code>8.1.1.v20190827142754</code> and SDK version <code>8.2.0.v20190819090550</code>
    
    *Test and other information can be found at:*
    Master: <a href="https://github.com/appcelerator/titanium_mobile/pull/11136" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11136</a>
    8_1_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/11155" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11155</a>
    8_3_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/11159" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11159</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-27266.json">JSON Source</a></p>