---
title: "[TIMOB-27312] Android: Refactor "ProgressIndicator" status bar handling"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>ProgressIndicator, android, progress, statusbar</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2019-08-06T21:57:38.000+0000</td></tr>
<tr><th>Updated</th><td>2021-02-22T18:41:03.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
The <code>Ti.UI.Android.ProgressIndicator</code> whose "location" property is set to <code>Ti.UI.Android.PROGRESS_INDICATOR_STATUS_BAR</code> no longer displays a progress indicator in the activity window's <code>ActionBar</code>. This feature no longer works.

The <code>ProgressIndicator</code> object's defaults to using the status bar, making this an issue. All Titanium developers need to set it to <code>Ti.UI.Android.PROGRESS_INDICATOR_DIALOG</code> to see progress. This is the only "location" property setting that works.

*Reason:*
Google has stopped supporting this feature as of Android 5.0.
<a href="https://developer.android.com/reference/android/app/Activity#setProgress(int)" rel="nofollow" target="_blank">https://developer.android.com/reference/android/app/Activity#setProgress(int)</a>

This feature does not work on Android 4.4 either. Likely because the Google Support library's <code>ActionBar</code> and/or <code>AppCompatActivity</code> class dropped support of this feature as well.

*Test Code:*
The below code does *NOT* show a progress indicator on Android 4.4 and above anymore. This feature appears to be dead.
<code><pre>
var progressIndicator = Ti.UI.Android.createProgressIndicator({
	message: "Progressing...",
	location: Ti.UI.Android.PROGRESS_INDICATOR_STATUS_BAR,
	type: Ti.UI.Android.PROGRESS_INDICATOR_INDETERMINANT,
});

var window = Ti.UI.createWindow();
window.add(Ti.UI.createLabel({ text: "Progress Indicator Test" }));
window.addEventListener("open", function() {
	progressIndicator.show();
});
window.open();
</pre></code>

*Recommended Solution:*
We should do one of the following...
<h4>Find an alternative solution for showing progress in the action bar or status bar. _(Note that Google's guidelines do not recommend this anymore.)_</h4>
<h4>Drop status bar progress support and have "location" default to showing a dialog.</h4>

If we remove the status bar feature, then we may want to remove the <code>TiBaseActivity.requestWindowFeature()</code> method calls for constants <code>FEATURE_PROGRESS</code> and <code>FEATURE_INDETERMINATE_PROGRESS</code> here...
[TiBaseActivity.java#L694](<a href="https://github.com/appcelerator/titanium_mobile/blob/3386d95fb6203138428f1dcc4736448a569692bc/android/titanium/src/java/org/appcelerator/titanium/TiBaseActivity.java#L694)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/3386d95fb6203138428f1dcc4736448a569692bc/android/titanium/src/java/org/appcelerator/titanium/TiBaseActivity.java#L694)</a>


<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-27312.json">JSON Source</a></p>