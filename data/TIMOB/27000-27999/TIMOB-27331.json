{
	"id": "174006",
	"key": "TIMOB-27331",
	"fields": {
		"issuetype": {
			"id": "1",
			"description": "A problem which impairs or prevents the functions of the product.",
			"name": "Bug",
			"subtask": false
		},
		"project": {
			"id": "10153",
			"key": "TIMOB",
			"name": "Titanium SDK/CLI",
			"projectCategory": {
				"id": "10100",
				"description": "Titanium and related SDKs used in application development",
				"name": "Client"
			}
		},
		"fixVersions": [
			{
				"id": "20884",
				"name": "Release 8.2.1",
				"archived": false,
				"released": true,
				"releaseDate": "2019-10-25"
			}
		],
		"resolution": {
			"id": "1",
			"description": "A fix for this issue is checked into the tree and tested.",
			"name": "Fixed"
		},
		"resolutiondate": "2019-10-21T21:36:09.000+0000",
		"created": "2019-08-12T13:18:43.000+0000",
		"priority": {
			"name": "Critical",
			"id": "1"
		},
		"labels": [
			"engSchedule"
		],
		"versions": [
			{
				"id": "20827",
				"name": "Release 8.2.0",
				"archived": false,
				"released": true,
				"releaseDate": "2019-09-19"
			}
		],
		"issuelinks": [],
		"assignee": {
			"name": "cbarber",
			"key": "cbarber",
			"displayName": "Chris Barber",
			"active": true,
			"timeZone": "America/Chicago"
		},
		"updated": "2019-10-21T21:36:09.000+0000",
		"status": {
			"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
			"name": "Closed",
			"id": "6",
			"statusCategory": {
				"id": 3,
				"key": "done",
				"colorName": "green",
				"name": "Done"
			}
		},
		"components": [
			{
				"id": "10206",
				"name": "iOS",
				"description": "iOS Platform"
			}
		],
		"description": "Using the latest Xcode 11 B5, application logs are no longer visible. Logs:\r\n{code}\r\n[TRACE] ** BUILD SUCCEEDED **\r\n[INFO]  Finished building the application in 41s 82ms\r\n[INFO]  Launching iOS Simulator\r\n[TRACE] [ioslib] Selected iOS Simulator: iPhone Xʀ\r\n[TRACE] [ioslib]   UDID    = DF1A2054-2C4C-4C7F-9E4A-C1BA5338D43E\r\n[TRACE] [ioslib]   iOS     = 13.0\r\n[TRACE] [ioslib] Autoselected Xcode: 11.0\r\n[TRACE] [ioslib] Checking if the simulator /Applications/Xcode-beta.app/Contents/Developer/Applications/Simulator.app/Contents/MacOS/Simulator is already running\r\n[TRACE] [ioslib] Simulator is running (pid 30875)\r\n[TRACE] [ioslib] Waiting for simulator to boot...\r\n[TRACE] [ioslib] Simulator is booted!\r\n[TRACE] [ioslib] iPhone Xʀ Simulator already running with the correct UDID\r\n[TRACE] [ioslib] Tailing iPhone Xʀ Simulator system log: /Users/user/Library/Logs/CoreSimulator/DF1A2054-2C4C-4C7F-9E4A-C1BA5338D43E/system.log\r\n[TRACE] [ioslib] Running: osascript \"/Users/user/Library/Application Support/Titanium/mobilesdk/osx/8.2.0/node_modules/ioslib/lib/sim_focus.scpt\" \"Simulator\"\r\n[TRACE] [ioslib] iPhone Xʀ Simulator successfully focused\r\n[TRACE] [ioslib] Installing the app\r\n[TRACE] [ioslib] App launched\r\n[TRACE] [ioslib] Trying to connect to log server port 50092...\r\n{code}",
		"attachment": [],
		"flagged": false,
		"summary": "Xcode 11: No logs shown on recurring builds",
		"creator": {
			"name": "hknoechel",
			"key": "hansknoechel",
			"displayName": "Hans Knöchel",
			"active": true,
			"timeZone": "Europe/Berlin"
		},
		"subtasks": [],
		"reporter": {
			"name": "hknoechel",
			"key": "hansknoechel",
			"displayName": "Hans Knöchel",
			"active": true,
			"timeZone": "Europe/Berlin"
		},
		"environment": "Xcode 11 B5\r\nTi SDK 8.2.0",
		"closedSprints": [
			{
				"id": 1169,
				"state": "closed",
				"name": "2019 Sprint 22",
				"startDate": "2019-10-21T15:38:21.747Z",
				"endDate": "2019-11-03T15:38:00.000Z",
				"completeDate": "2019-11-04T18:36:57.022Z",
				"originBoardId": 114
			},
			{
				"id": 1165,
				"state": "closed",
				"name": "2019 Sprint 20",
				"startDate": "2019-09-23T15:38:43.949Z",
				"endDate": "2019-10-06T15:38:00.000Z",
				"completeDate": "2019-10-07T18:33:11.953Z",
				"originBoardId": 114
			},
			{
				"id": 1168,
				"state": "closed",
				"name": "2019 Sprint 21",
				"startDate": "2019-10-07T18:35:57.052Z",
				"endDate": "2019-10-20T18:35:00.000Z",
				"completeDate": "2019-10-21T15:38:00.182Z",
				"originBoardId": 114
			}
		],
		"comment": {
			"comments": [
				{
					"id": "451470",
					"author": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "Any update on this [~amukherjee] [~vsingh]? ",
					"updateAuthor": {
						"name": "hknoechel",
						"key": "hansknoechel",
						"displayName": "Hans Knöchel",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2019-09-18T07:35:04.000+0000",
					"updated": "2019-09-18T07:35:04.000+0000"
				},
				{
					"id": "451607",
					"author": {
						"name": "eharris",
						"key": "eharris",
						"displayName": "Ewan Harris",
						"active": true,
						"timeZone": "Europe/Dublin"
					},
					"body": "I can reproduce this, steps to reproduce\r\n\r\n1. Build the app to a simulator\r\n2. Without killing the app, rebuild\r\n\r\nIf I kill the app or rebuild using {{--force}}, then the CLI can reconnect just fine. \r\n\r\nDebugging the CLI, I can see that we're continually getting stuck in a loop [here|https://github.com/appcelerator/ioslib/blob/aa91c851fcc8ce137c1ded39088abc17afa3d582/lib/simulator.js#L1663-L1670], if I change the logServerPort to point at the original value the cli determined from my app id (as opposed to the randomly generated value) then it connects just fine.\r\n\r\nRunning {{lsof -i tcp | grep <name> }} where name is the first 9 letters of your app name shows the app has a port open on the app id log server port value, but not the randomly generated log server port value. \r\n\r\nMaybe we need to make the logserver port a toggle in the rebuild checks? But seeing as that will more than likely toggle each build with the current checks that seems totally unwanted.\r\n\r\ncc [~cb1kenobi]",
					"updateAuthor": {
						"name": "eharris",
						"key": "eharris",
						"displayName": "Ewan Harris",
						"active": true,
						"timeZone": "Europe/Dublin"
					},
					"created": "2019-09-24T14:50:38.000+0000",
					"updated": "2019-09-24T14:50:38.000+0000"
				},
				{
					"id": "451655",
					"author": {
						"name": "cbarber",
						"key": "cbarber",
						"displayName": "Chris Barber",
						"active": true,
						"timeZone": "America/Chicago"
					},
					"body": "I can also reproduce this.\r\n\r\nEssentially xcodebuild is not picking up the changes in the Xcode project (the log server port changing) and forcing a rebuild. Instead it doesn't detect any changes and skips the build. If I manually change the log server port in the generated Xcode project, then manually build and install the app, it works just fine. I'm still trying to pinpoint exactly what we need to do to replicate what Xcode does. It does not touch any build files or derived data.\r\n\r\nIt's worth noting that when I open the generated Xcode project and manually change the settings, Xcode will change and shift around quite a few things, but in general, the files are the same.\r\n\r\nWe may need to go back to NSLog() writing to a file on disk and the Titanium CLI tailing that log file.",
					"updateAuthor": {
						"name": "cbarber",
						"key": "cbarber",
						"displayName": "Chris Barber",
						"active": true,
						"timeZone": "America/Chicago"
					},
					"created": "2019-09-27T07:21:57.000+0000",
					"updated": "2019-09-27T07:21:57.000+0000"
				},
				{
					"id": "451670",
					"author": {
						"name": "cbarber",
						"key": "cbarber",
						"displayName": "Chris Barber",
						"active": true,
						"timeZone": "America/Chicago"
					},
					"body": "Ti SDK master PR: https://github.com/appcelerator/titanium_mobile/pull/11245\r\nTi SDK 8_2_X PR: https://github.com/appcelerator/titanium_mobile/pull/11246\r\n\r\nThese PRs revert the simulator log mechanism back to the file-based log from Titanium SDK 5.5.0 that was removed in Titanium SDK 6 in favor of the log server.\r\n\r\nThe build generates the name of the log file that the app is to write log output to. It is baked into the build using a gcc define When the app is launched, it writes the log file located at {{~/Library/Developer/CoreSimulator/Devices/<udid>/data/.../<app guid>.log}}. This log file is then tailed and output by the Titanium CLI.\r\n\r\nNote that the log server running in the iOS app is still used for device builds.",
					"updateAuthor": {
						"name": "cbarber",
						"key": "cbarber",
						"displayName": "Chris Barber",
						"active": true,
						"timeZone": "America/Chicago"
					},
					"created": "2019-09-27T20:15:52.000+0000",
					"updated": "2019-09-30T21:42:07.000+0000"
				},
				{
					"id": "452110",
					"author": {
						"name": "lchoudhary",
						"key": "lchoudhary",
						"displayName": "Lokesh Choudhary",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "FR Passed.",
					"updateAuthor": {
						"name": "lchoudhary",
						"key": "lchoudhary",
						"displayName": "Lokesh Choudhary",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2019-10-16T22:26:39.000+0000",
					"updated": "2019-10-16T22:26:39.000+0000"
				},
				{
					"id": "452121",
					"author": {
						"name": "lchoudhary",
						"key": "lchoudhary",
						"displayName": "Lokesh Choudhary",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "PR's merged.",
					"updateAuthor": {
						"name": "lchoudhary",
						"key": "lchoudhary",
						"displayName": "Lokesh Choudhary",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2019-10-17T15:26:23.000+0000",
					"updated": "2019-10-17T15:26:23.000+0000"
				},
				{
					"id": "452175",
					"author": {
						"name": "lchoudhary",
						"key": "lchoudhary",
						"displayName": "Lokesh Choudhary",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Verified the fix with SDK 8.2.1.v20191021132318 & 8.3.0.v20191021123610.\r\nClosing.",
					"updateAuthor": {
						"name": "lchoudhary",
						"key": "lchoudhary",
						"displayName": "Lokesh Choudhary",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2019-10-21T21:36:03.000+0000",
					"updated": "2019-10-21T21:36:03.000+0000"
				}
			],
			"maxResults": 8,
			"total": 8,
			"startAt": 0
		}
	}
}