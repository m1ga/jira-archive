---
title: "[TIMOB-27338] iOS: Invalid iOS simulator error is shown when doing concurrent builds with iOS 13"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-10-24T13:26:08.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 8.0.3, Release 8.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.2.1, Release 8.3.0</td></tr>
<tr><th>Components</th><td>CLI, iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Samir Mohammed</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2019-08-15T10:09:00.000+0000</td></tr>
<tr><th>Updated</th><td>2019-10-24T19:43:16.000+0000</td></tr>
</table>

<h3>Description</h3>

When running concurrent iOS builds on simulators the following error is seen in Studio:
<code><pre>
[ERROR] :  Invalid "--device-id" value "8B89634B-0E8B-4286-8839-7CEE6A035700"
</pre></code>
The cli also shows this error:
<code><pre>
[ERROR] Invalid iOS simulator "8B89634B-0E8B-4286-8839-7CEE6A035700"
</pre></code>

*Test Steps*
<h4>Create a titanium project </h4>
<h4>Run the project in APPC studio or through the CLI (e.g. <code>appc run -p ios -C 8B89634B-0E8B-4286-8839-7CEE6A035700 -I 13.0</code>)</h4>
<h4>Re-run the project without closing the Simulator</h4>

*Actual result*
Above error is shown

*Expected result*
Above error should not be shown and application should launch on the simulator 




<h3>Comments</h3>

<ol>
<li>Ewan Harris 2019-08-15

   note: I can only reproduce this when using xcode beta 5 after updating from xcode beta 4. It's reproducible in ti as well as appc so moving to TIMOB</li>
<li>Samir Mohammed 2019-08-15

   I was able to reproduce with 12.4 sims as well. It looks like if you have Xcode 11 command line tools selected and you try to run a concurrent 12.4 sim you get the above error. If you have command line tools selected for Xcode 10 and you try to run a concurrent 13.0 sim you get that error as well.</li>
<li>Ewan Harris 2019-08-16

   From some looking I think this is purely down to the response we're getting from <code>simctl list --json</code> not including a booted simulator that is using a runtime from another xcode (so xcode 10 simctl and iOS 13, xcode 11 simctl and iOS 12.4).
   
   Seeing as how that is how we source the simulator listing I'm not sure how we can fix this without changing how we source the simulator to run simctl from _every_ xcode available and the collate the results. I tested this and it appears to fix detection, but then cause issues further down the line when we try to boot the sim. [~cbarber] any thoughts on whether doing that is the right thing to do?</li>
<li>Hans Kn√∂chel 2019-08-17

   I added support for Xcode 11 sims in several ioslib releases recently, the last one is 1.7.11 which [isn't](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/package.json#L72)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/package.json#L72)</a> currently used on master. </li>
<li>Ewan Harris 2019-08-19

   [~hknoechel], i think 1.7.11 was just a fix for the team id stuff right? That shouldn't have an impact on sim detection. I think once xcode 11 is released this will be a non-issue except for the rare circumstance someone is switching between xcode versions during development, although I totally expect it to arise while people are testing xcode 11/iOS 13/SDK 8.2.0</li>
<li>Chris Barber 2019-08-22

   [~eharris] Beta 6 is out. Perhaps it's been fixed?</li>
<li>Ewan Harris 2019-08-22

   Still occurs on beta 6</li>
<li>Abir Mukherjee 2019-08-30

   [~eharris] so the theory is that when XCode 11 is released, we shouldn't see this issue? Should I move the fixVersion to 8.2.1 for now as a placeholder, and we'll check again after XCode 11/ iOS 13 release?</li>
<li>Ewan Harris 2019-08-30

   [~amukherjee], yes that's the theory. But mainly because when xcode 11 is GA'd people wont be running xcode 10/xcode 11 side by side.</li>
<li>Keerthi Mahalingam 2019-09-04

    Keeping it in resolved state until the final release of Xcode 11.</li>
<li>Chris Barber 2019-09-05

    The method of detecting the iOS simulators differs between the CLI and Studio. Appc/Titanium CLI uses ioslib@1.x in the SDK. Studio calls the daemon which uses ioslib@2.x.
    
    ioslib@1.x will detect the iOS simulators by calling <code>simctl list --json</code>.
    
    ioslib@2.x will detect the iOS simulators by walking the simulator devices directory.
    
    It is entirely possible that an iOS simulator device directory exists yet for some reason <code>simctl</code> doesn't list it. I've seen this happen depending on the selected Xcode version.
    
    Furthermore, I discovered bugs in ioslib@1.7 while fixing TIMOB-27360 where simulator availability checks were not being done in <code>findSimulators()</code>, a function that is only called at the beginning of the build to determine the simulator to launch.
    
    My hunch is to completely nuke all of your simulators and recreate them. The easiest way to do this is install ioslib@2 or ioslib@3, then run <code>node bin/ioslib reset-sims</code>. Otherwise you can try my old reset-sims script which may work: <a href="https://gist.github.com/cb1kenobi/19dc4c547864a96bfa9027aae5631e67." rel="nofollow" target="_blank">https://gist.github.com/cb1kenobi/19dc4c547864a96bfa9027aae5631e67.</a></li>
<li>Chris Barber 2019-09-18

    I've fixed a bunch of bugs in ioslib@1.7 and the SDK that seem to fix all simulator related issues.
    
    ioslib 1_7_X PR: <a href="https://github.com/appcelerator/ioslib/pull/98" rel="nofollow" target="_blank">https://github.com/appcelerator/ioslib/pull/98</a>
    Ti SDK master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/11228" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11228</a>
    
    To test, build an app for the iOS Simulator, then rerun the build without closing the simulators.
    
    Additional testing:
    * iOS SDK 12.2 (Xcode 10) + iOS Simulator 12.2 (Xcode 10)
    * iOS SDK 12.2 (Xcode 10) + iOS Simulator 13.0 (Xcode 11)
    * iOS SDK 12.2 (Xcode 10) + auto selected 12.2 iOS Simulator
    * iOS SDK 13.0 (Xcode 11) + iOS Simulator 12.2 (Xcode 10)
    * iOS SDK 13.0 (Xcode 11) + iOS Simulator 13.0 (Xcode 11)
    * iOS SDK 13.0 (Xcode 10) + auto selected 13.0 iOS Simulator
    * Same as above but with a watch app (both explicit watch sim UDID and auto selected)
    Note: selected Xcode shouldn't matter</li>
<li>Chris Barber 2019-09-23

    Ti SDK master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/11228" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11228</a>
    Ti SDK 8_2_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/11235" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11235</a></li>
<li>Satyam Sekhri 2019-10-07

    FR Passed. Concurrent builds on iOS simulator work fine.
    Waiting on Jenkins build to pass.</li>
<li>Lokesh Choudhary 2019-10-09

    PR's Merged</li>
<li>Sohail Saddique 2019-10-10

    Verified on build 8.2.1.v20191009074714. Ticket closed.</li>
<li>Chris Barber 2019-10-15

    Turns out the Ti SDK PR was bugged.
    
    Ti SDK master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/11281" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11281</a>
    Ti SDK 8_2_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/11282" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11282</a></li>
<li>Satyam Sekhri 2019-10-15

    FR Passed.</li>
<li>Lokesh Choudhary 2019-10-21

    Master PR Merged.</li>
<li>Christopher Williams 2019-10-21

    merged to 8_2_X</li>
<li>Samir Mohammed 2019-10-24

    Closing ticket, fix verified in SDK version <code>8.2.1.v20191023131524</code> and SDK version <code>8.3.0.v20191023125529</code>
    
    Test and other information can be found at:
    Ti SDK master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/11281" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11281</a>
    Ti SDK 8_2_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/11282" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11282</a></li>
<li>Chris Barber 2019-10-24

    Found another ioslib issue surrounding the Xcode version semver lookup that was causing Xcode 10 to short circuit Xcode 11's lookup.
    
    ioslib PR: <a href="https://github.com/appcelerator/ioslib/pull/105." rel="nofollow" target="_blank">https://github.com/appcelerator/ioslib/pull/105.</a></li>
<li>Chris Barber 2019-10-24

    Ti SDK master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/11296" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11296</a>
    Ti SDK 8_2_X PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/11297" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11297</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-27338.json">JSON Source</a></p>