---
title: "[TIMOB-27371] Can't crypt an existing SQLITE database"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Thomas Lemaitre</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2019-08-13T05:36:32.000+0000</td></tr>
<tr><th>Updated</th><td>2019-08-30T23:19:41.000+0000</td></tr>
</table>

<h3>Description</h3>

I've use the appcelerator.encrypteddatabase to encrypt a database into an existing application. The application is already in production and have one encrpyt database. For an update, we want crypt the actual database but it's not wokring if the databas ealready exist.

I've attach a sample app code for your test : <a href="https://drive.google.com/file/d/1O-vz9xwwZMUT5FWjXS8vU9mgAMNn79dC/view?usp=sharing" rel="nofollow" target="_blank">https://drive.google.com/file/d/1O-vz9xwwZMUT5FWjXS8vU9mgAMNn79dC/view?usp=sharing</a>

This is the message we received : 


<code><pre>
[ERROR] file is not a database
[ERROR] A SQLite database error occurred on database '/Users/didier/Library/Developer/CoreSimulator/Devices/ECB074E6-601F-4598-94D6-64F6865BACF7/data/Containers/Data/Application/E2C38BDE-D58D-4886-A3D7-B5661CAF458D/Library/Private Documents/myDb.sql': Error Domain=com.plausiblelabs.EncPLDatabase Code=4 "Cipher migrate: failed to attach new database." UserInfo={com.plausiblelabs.EncPLDatabase.error.vendor.string=file is not a database, NSLocalizedDescription=Cipher migrate: failed to attach new database., com.plausiblelabs.EncPLDatabase.error.vendor.code=26} (SQLite #26: file is not a database) (query: '&lt;none&gt;')

[ERROR] Error: Couldn't open database and migrate
[ERROR] File: /alloy/models/Books.js
[ERROR] Line: 386
[ERROR] SourceId: &lt;null&gt;
[ERROR] Backtrace:
[ERROR]  undefined
</pre></code>


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27371_66826/Screenshot 2019-08-13 at 12.48.03 PM.png">Screenshot 2019-08-13 at 12.48.03 PM.png</td></td><td>2019-08-13T06:48:22.000+0000</td><td>29834</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Jan Vennemann 2019-08-13

   [~gmathews], [~vsingh], you guys have more experience with the encrypted db module. Is this even something we support? I couldn't find any info regarding migrating an unencrypted db to an encrypted one.</li>
<li>Joshua Quick 2019-08-13

   The encrypted database module does not support copying an app embedded pre-made database file. This is not currently supported on Android or iOS. The module's <code>install()</code> method really does an <code>open()</code> instead.
   
   Please see: [MOD-2508]
   
   Your only option is to set up the database's tables/indexes/rows/etc. dynamically via code.</li>
</ol>


<p><a href="/TIMOB/TIMOB-27371.json">JSON Source</a></p>