---
title: "[TIMOB-27410] iOS: Module project is not compiling properly on 8.1.1.GA"
---
<table>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-10-30T18:07:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.3.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Rakhi Mitro</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2019-09-19T11:38:37.000+0000</td></tr>
<tr><th>Updated</th><td>2019-10-30T18:07:00.000+0000</td></tr>
</table>

<h3>Description</h3>

One user is facing error compiling a module. He is using 8.1.1.GA, Xcode 10.3, macOS Mojave 10.14.6. He is unable to build module project with TiApp.h using SDK8.1.1.GA ? His purpose is to use NSURLSessionDelegate, which requires importing TiApp.h according to the following [reference](<a href="https://wiki.appcelerator.org/display/guides2/iOS+Modules+-+Use+Native+UI+Application+Delegates+in+Hyperloop+and+Native+Modules)." rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/guides2/iOS+Modules+-+Use+Native+UI+Application+Delegates+in+Hyperloop+and+Native+Modules).</a> 

Sample module: Click [here| <a href="https://drive.google.com/open?id=1jbVe3r4Rm1__Eu73gDdBiT0zBRuMgI9W" rel="nofollow" target="_blank">https://drive.google.com/open?id=1jbVe3r4Rm1__Eu73gDdBiT0zBRuMgI9W</a>]

*Test Steps:*
Steps from the user:

1. Create new mobile module project [jp.co.ndsoft.NdSyncClinet2] using SDK8.1.1.GA, target iOS.
2. Add code follows into ios/Classes/JpCoNdsoftNdSyncClinet2Module.m
3. Package iOS Module

*Add code at step2*
<code><pre>
--- a/ios/Classes/JpCoNdsoftNdSyncClinet2Module.m
+++ b/ios/Classes/JpCoNdsoftNdSyncClinet2Module.m
@@ -9,6 +9,7 @@
#import "TiBase.h"
#import "TiHost.h"
#import "TiUtils.h"
+#import "TiApp.h"

@implementation JpCoNdsoftNdSyncClinet2Module
@@ -29,6 +30,12 @@
#pragma mark Lifecycle
+-(void)_configure
+{
+ [super _configure];
+ [[TiApp app] registerApplicationDelegate:self];
+}
+
- (void)startup
</pre></code>
Note: We also tried to compile module shared by the client and receive same error as him.
<code><pre>
[ERROR] [xcode-sim] ** BUILD FAILED **
[ERROR] [xcode-sim] The following build commands failed:
[ERROR] [xcode-sim] 	CompileC build/NdSyncClient2.build/Release-iphonesimulator/NdSyncClient2.build/Objects-normal/x86_64/JpCoNdsoftNdSyncClinet2Module.o Classes/JpCoNdsoftNdSyncClinet2Module.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
[ERROR] [xcode-sim] 	CompileC build/NdSyncClient2.build/Release-iphonesimulator/NdSyncClient2.build/Objects-normal/i386/JpCoNdsoftNdSyncClinet2Module.o Classes/JpCoNdsoftNdSyncClinet2Module.m normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
[ERROR] [xcode-sim] (2 failures)
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27410_66955/build_sdk811ga_logs.txt">build_sdk811ga_logs.txt</td></td><td>2019-09-19T11:38:23.000+0000</td><td>64376</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Jan Vennemann 2019-09-26

   If this is an existing module it is probably due to an outdated module configuration. Please take a look at our current [titanium.xcconfig](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/templates/module/objc/template/ios/titanium.xcconfig.ejs)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/templates/module/objc/template/ios/titanium.xcconfig.ejs)</a> template and update it accordingly.
   
   For example, with SDK 8.1.1.GA it should look something like this:
   <code><pre>
   TITANIUM_SDK_VERSION = 8.1.1.GA
   TITANIUM_SDK = ~/Library/Application Support/Titanium/mobilesdk/osx/$(TITANIUM_SDK_VERSION)
   HEADER_SEARCH_PATHS = $(inherited) "$(TITANIUM_SDK)/iphone/include"
   FRAMEWORK_SEARCH_PATHS = $(inherited) "$(TITANIUM_SDK)/iphone/Frameworks"
   </pre></code>
   
   Also it is recommended since 8.0.0 to include classes from the <code>TitaniumKit</code> framework directly, if available from there.
   
   <code><pre>
   #import &lt;TitaniumKit/TiApp.h&gt;
   </pre></code></li>
<li>Jan Vennemann 2019-10-16

   Alright, i took another look and this seems to be an issue with our module template. The error gives a very good hint at what is wrong:
   
   <code><pre>
   [TRACE] [xcode-sim] In file included from /Users/jvennemann/Downloads/NdSyncClient2/ios/Classes/JpCoNdsoftNdSyncClinet2Module.m:12:
   [TRACE] [xcode-sim] In file included from /Users/jvennemann/Library/Application Support/Titanium/mobilesdk/osx/8.1.1.GA/iphone/include/TiApp.h:1:
   [TRACE] [xcode-sim] In file included from /Users/jvennemann/Library/Application Support/Titanium/mobilesdk/osx/8.1.1.GA/iphone/Frameworks/TitaniumKit.framework/Headers/TiApp.h:11:
   [TRACE] [xcode-sim] /Users/jvennemann/Library/Application Support/Titanium/mobilesdk/osx/8.1.1.GA/iphone/Frameworks/TitaniumKit.framework/Headers/KrollBridge.h:15:1: error: use of '@import' when modules are disabled
   [TRACE] [xcode-sim] @import Foundation;
   </pre></code>
   
   So all they need to do is enable modules. This can be done easily by selecting the project in Xcode and then under "Build Settings" search for "Enable Modules (C and Objective-C)" and set it to "Yes".
   
   PR to update our template with recent clang settings: <a href="https://github.com/appcelerator/titanium_mobile/pull/11283" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11283</a>
   </li>
<li>Satyam Sekhri 2019-10-29

   FR Passed. The clang setting to Enable Modules (C and Objective-C) is set to Yes by default. The module builds successfully.
   Waiting for Jenkins build to pass before merge</li>
<li>Christopher Williams 2019-10-30

   merged to master</li>
<li>Satyam Sekhri 2019-10-30

   Verified on:
   Mac OS: 10.14.5
   SDK: 8.3.0.v20191030085531
   Appc CLI: 7.1.1
   JDK: 1.8.0_162
   Node: 10.5.0
   Studio: 5.1.4.201909061933
   Xcode: 11.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-27410.json">JSON Source</a></p>