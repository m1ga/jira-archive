---
title: "[TIMOB-27430] EncryptedDB ResultSet field and fieldByName functions are returning incorrect values on Android"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-10-15T17:10:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 8.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>encrypted_database, engSchedule, regression</td></tr>
<tr><th>Reporter</th><td>Ryan Aston</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2019-08-28T20:52:57.000+0000</td></tr>
<tr><th>Updated</th><td>2019-10-15T17:10:46.000+0000</td></tr>
</table>

<h3>Description</h3>

Calling .field() or .fieldByName() on an encrypteddatabase (3.0.4) ResultSet returns a boolean false if the value of the field is NULL.  This issue seems to be isolated to this module on Android with the 8.1.0.GA SDK.  8.0.0.GA and iOS don't have this issue, nor does the built-in Ti.Database.ResultSet.  A small sample project is linked below.  Run this app on an Android device and see the discrepancies between the console log outputs for non-encDB and encDB.  Running on iOS or switching back to 8.0.0.GA alleviates the discrepancy.

Sample project:  <a href="https://drive.google.com/file/d/1HW1jxvUPZ67_HVx1Phe-PqgJKeVQygLp/view?usp=sharing" rel="nofollow" target="_blank">https://drive.google.com/file/d/1HW1jxvUPZ67_HVx1Phe-PqgJKeVQygLp/view?usp=sharing</a>

<h3>Comments</h3>

<ol>
<li>Rakhi Mitro 2019-08-29

   Hello,
   
   Tested the sample project shared by you with SDK 8.1.0.GA on android device 7. Got the following output on console:
   
   <code><pre>
   
   [INFO]  Testing 1.0 (Powered by Titanium 8.1.0.84c6734b2d)
   [WARN]  col fieldByName: null
   [WARN]  col field: null
   [WARN]  col fieldByName: false
   [WARN]  col field: false
   </pre></code>
   
   Are you experiencing the same? Please share the console logs of your end.</li>
<li>Ryan Aston 2019-08-29

   Yes, that is exactly what my console log looks like.  The last two lines should be identical to the two above them, but on Android with 8.1.0.GA they are not.</li>
<li>Rakhi Mitro 2019-09-16

   Hello,
   Can you please test the issue on 8.1.1.GA and share us the console logs.</li>
<li>Ryan Aston 2019-09-16

   The output is identical:
   
   {noformat}
   [INFO]   Testing 1.0 (Powered by Titanium 8.1.1.0148ee6e79)
   [WARN]   col fieldByName: null
   [WARN]   col field: null
   [WARN]   col fieldByName: false
   [WARN]   col field: false
   {noformat}
   </li>
<li>Ryan Aston 2019-09-30

   Same with 8.2.0.GA:
   
   {noformat}
   [INFO]   Testing 1.0 (Powered by Titanium 8.2.0.6bfdf6e394)
   [WARN]   col fieldByName: null
   [WARN]   col field: null
   [WARN]   col fieldByName: false
   [WARN]   col field: false
   {noformat}
   
   We really need this resolved quickly.  It is preventing us from upgrading to these newer SDKs.
   </li>
<li>Gary Mathews 2019-10-09

   appcelerator.encrypteddatabase: <a href="https://github.com/appcelerator-modules/appcelerator.encrypteddatabase/pull/41" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/appcelerator.encrypteddatabase/pull/41</a></li>
<li>Lokesh Choudhary 2019-10-10

   FR Passed.</li>
<li>Lokesh Choudhary 2019-10-15

   Verified the fix with version 3.1.0.
   Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-27430.json">JSON Source</a></p>