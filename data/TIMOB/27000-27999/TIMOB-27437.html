---
title: "[TIMOB-27437] Android: Add @RequiresApi() annotations to core java code"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, annotations, java</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2019-10-02T18:57:52.000+0000</td></tr>
<tr><th>Updated</th><td>2021-02-22T19:06:11.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
Google supports Java annotation <code>@RequiresApi(number)</code> which can be applied to classes, methods, member variables, etc. This can be used to trigger linting errors/warnings if an API was accessed on an API Level older than what was set in the annotation.
<a href="https://developer.android.com/reference/android/support/annotation/RequiresApi" rel="nofollow" target="_blank">https://developer.android.com/reference/android/support/annotation/RequiresApi</a>

We should leverage this feature throughout our core Titanium code to help minimize mistakes and ensure we're checking the currently running API Level before making high API Level call. This will help avoid crashes when on older Android OS versions.

*Example:*
The below screenshot shows this in action. A <code>@RequiresApi(20)</code> annotation is applied to method <code>onApplyWindowInsets()</code>. In the method below, we call the <code>onApplyWindowInsets()</code> method twice. One call is unguarded and the other call is within an if-check block which checks if we're running in API Level 20 or higher. The linting tool correctly shows a red underline for the unguarded method call. This is what we want.
 !RequireApiLinting.png|thumbnail! 

*Notes:*
We should do this after switching our build system to gradle. This is because the gradle linting tool performs the API Level checks.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27437_67005/RequireApiLinting.png">RequireApiLinting.png</td></td><td>2019-10-02T18:39:09.000+0000</td><td>438741</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-27437.json">JSON Source</a></p>