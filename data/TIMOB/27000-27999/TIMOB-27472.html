---
title: "[TIMOB-27472] Android: Add Java 8 support"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-01-30T16:13:49.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, d8, dexer, java, modules</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Yordan Banev</td></tr>
<tr><th>Created</th><td>2019-10-16T00:15:23.000+0000</td></tr>
<tr><th>Updated</th><td>2020-01-30T16:13:49.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
Titanium currently support "Java 7" language features.

In Titanium 9.0.0, we would like to add "Java 8" language features for the core SDK and all modules. This is needed since some 3rd party Android libraries use the Java 8 language, but we're currently unable to compile them into a module or via hyperloop.

*Limitations:*
Android has limited support for Java 8 language features which Google documents below. Note that older Android OS versions support less Java 8 features.
<a href="https://developer.android.com/studio/write/java8-support#supported_features" rel="nofollow" target="_blank">https://developer.android.com/studio/write/java8-support#supported_features</a>

*Recommended Solution:*
We don't support Java 8 because Titanium is currently limited to using the "dex" command line tool in the Android SDK which only supports up to Java 7. Google's "d8" command line tool supports Java 8. If we update our Titanium build system to use gradle, then we can easily add support for this.

Support can be added via the following "build.gradle" settings...
<code><pre>
android {
	compileOptions {
		sourceCompatibility JavaVersion.VERSION_1_8
		targetCompatibility JavaVersion.VERSION_1_8
	}
	// When we add Kotlin support in the future,
	// then we must do the following as well.
	kotlinOptions {
		jvmTarget = "1.8"
	}
}
</pre></code>

*Testing:*
We should add a Java 8 feature to our core Titanium code to prove that Java 8 compilation works for both the SDK and an app build. In our [TiUIView.java](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/titanium/src/java/org/appcelerator/titanium/view/TiUIView.java)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/titanium/src/java/org/appcelerator/titanium/view/TiUIView.java)</a> code, I recommend that we change the following code...
<code><pre>
protected void setOnClickListener(View view)
{
	view.setOnClickListener(new OnClickListener() {
		public void onClick(View view)
		{
			fireEvent(TiC.EVENT_CLICK, dictFromEvent(lastUpEvent));
		}
	});
}
</pre></code>

...to use a Java 8 lambda as follows...
<code><pre>
protected void setOnClickListener(View view)
{
	view.setOnClickListener((clickedView) -&gt; {
		fireEvent(TiC.EVENT_CLICK, dictFromEvent(lastUpEvent));
	});
}
</pre></code>

We can then test the above via a Titanium <code>Ti.UI.Button</code> object's "click" event.
<code><pre>
var window = Ti.UI.createWindow();
var button = Ti.UI.createButton({ title: "Show Alert" });
button.addEventListener("click", function() {
	alert("Button clicked!");
});
window.add(button);
window.open();
</pre></code>


<h3>Comments</h3>

<ol>
<li>Yordan Banev 2020-01-15

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/11434" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11434</a></li>
<li>Satyam Sekhri 2020-01-22

   FR Passed.
   Waiting for Jenkins.</li>
<li>Christopher Williams 2020-01-23

   merged to master for 9.0.0</li>
<li>Sohail Saddique 2020-01-30

   Verified in build: 9.0.0.v20200130071742. Java8 has been fully implemented in Titanium for Android. Checked using testcase, and checking console
   
   
   <code><pre>
   [INFO]  TiApplication: (main) [342,342] Titanium Javascript runtime: v8
   </pre></code>
   
   Ticket closed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-27472.json">JSON Source</a></p>