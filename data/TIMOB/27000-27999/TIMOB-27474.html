---
title: "[TIMOB-27474] NavigationBar/ActionBar parity between Android and iOS"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 8.2.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android, iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Jan Vennemann</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2019-10-16T14:15:05.000+0000</td></tr>
<tr><th>Updated</th><td>2019-10-16T16:03:16.000+0000</td></tr>
</table>

<h3>Description</h3>

With the introduction of [NavigationWindow](<a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.UI.NavigationWindow) as a cross platform component in 8.0.0 we now have some parity issues when it comes to configuring the native ActionBar/NavigationBar.

<h4>iOS</h4>
On iOS the underlying NavigationBar can easily be configured with a bunch of properties directly in the containing <code>Window</code>. Namely these are:
- leftNavButton
- leftNavButtons
- rightNavButton
- rightNavButtons
- hideBackButton
- titleControl

*Example*
<code><pre>
<Alloy>
    <TabGroup>
        <Tab>
            <Window class="container">
                <LeftNavButton platform=ios>
                    <Button title="Back" onClick="closeWindow" />
                </LeftNavButton>
            </Window>
        </Tab>
    </TabGroup>
</Alloy>
</pre></code>

<h4>Android</h4>
Android offers similar customization, but requires a completely different API. Users need to manually grab a window's <code>activity</code> and then configure the <code>actionBar</code> property. In addition the <code>activity</code> also offers <code>onCreateOptionsMenu</code> to create a dropdown menu that can be opened from the ActionBar. Alloy already provides some convenient elements to configure these two properties directly from within a <code>Window</code>.

*Example*
<code><pre>
<Alloy>
    <Window title="My Test App">
        <ActionBar id="actionbar" title="My XML Menu" onHomeIconItemSelected="doMenuClick" />
        <Menu>
            <MenuItem id="item1" title="Settings" onClick="openSettings" />
            <MenuItem id="item2" title="Search" onClick="doSearch" />
        </Menu>
        <Label id="label">Welcome!</Label>
    </Window>
</Alloy>
</pre></code>

<h4>Proposed solution</h4>
We need a common abstraction of the native ActionBar/NavigationBar that allows for easy configuration on both platforms.

Alloy already has some custom behavior that differs from our classic API, although it is specific to the Android ActionBar. This proposal builds upon a similar approach but with cross-platform parity in mind.

<h4>ActionBar</h4>

Introduce a new <code>actionBar</code> property that transparently handles the ActionBar/NavigationBar setup behind the scenes using our existing API. We should do this via our bootstrapping mechanism for a JS only solution that won't require any changes to our native core.

<h4>API proposal</h4>

<code><pre>
interface ActionBar {
  title?: string
  titleView?: Ti.UI.View
  navigationButton?: NavigationButton
  items?: ActionItem[],
  icon?: string // Android only
}

interface NavigationButton {
  title?: string // iOS only
  icon?: string // Android only
  click?: (e: Event): void // Android only
}

interface ActionItem {
  android?: ActionItemOptions<ActionItemPositionAndroid>
  ios?: ActionItemOptions<ActionItemPositionIos>
  click: (e: Event): void
  hidden: bool
}

enum ActionItemPositionAndroid {
  ActionBar = "actionBar" // Ti.Android.SHOW_AS_ACTION_ALWAYS
  ActionBarIfRoom = "actionBarIfRoom" // Ti.Android.SHOW_AS_ACTION_IF_ROOM
  ActionBarWithText = "actionBarWithText" // Ti.Android.SHOW_AS_ACTION_WITH_TEXT
  Popup = "popup" // Ti.Android.SHOW_AS_ACTION_NEVER
  CollapseActionView = "collapseActionView" // Titanium.Android.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW
}

enum ActionItemPositionIos {
  Left = "left"
  Right = "right"
}

interface ActionItemOptions<T> {
  position: T
  icon: string | number
  title: string
  actionView: Ti.UI.View // Android only
}

Ti.UI.Window.actionBar: ActionBar;
</pre></code>

All of the properties on <code>ActionBar</code> are optional. If not set, our current default behavior is used.

<h4>Title text and view</h4>

<code><pre>
const win = Ti.UI.createWindow();
win.actionBar.title = 'Test' // instead of win.title
</pre></code>

In addition to setting a simple text as in the example above, users can set a custom view.

<code><pre>
const titleView = Ti.UI.createView({ layout: 'horizontal' });
const imageView = Ti.UI.createImageView({ image: '/logo.png' });
const titleLabel = Ti.UI.createLabel({ text: 'My App', left: 5 });
titleView.add(imageView);
titleView.add(titleLabel);
win.actionBar.titleView = titleView;
</pre></code>

<h4>Navigation button</h4>

The <code>navigationButton</code> represents the default back navigation button to the left.

<code><pre>
win.actionBar.navigationButton.title = 'Prev';
</pre></code>

<h4>Android Specifics / Limitations</h4>

On Android you *cannot* set the title. However you *can* set an icon.

<h4>iOS Specifics / Limitations</h4>

On iOS you can *only* change the title of the button.

<h4>Action items</h4>

The available buttons / menu of the native ActionBar/Navigation can be controlled with action items.

<code><pre>
const onSave = () => { console.log('Saved') };
const onCancel = () => { console.log('Canceled') };
win.actionBar.items = [
  {
    click: onSave,
    android: {
      title: 'Save',
      icon: 'item1.png'
      position: 'actionBar'
    },
    ios: {
      icon: Titanium.UI.iOS.SystemButton.SAVE
      position: 'right'
    }
  },
  {
    click: onCancel,
    android: {
      title: 'Cancel',
      icon: 'item2.png'
      position: 'actionBar'
    },
    ios: {
      icon: Titanium.UI.iOS.SystemButton.CANCEL
      position: 'left'
    }
  }
]
</pre></code>

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-27474.json">JSON Source</a></p>