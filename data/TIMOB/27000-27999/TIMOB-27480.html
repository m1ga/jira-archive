---
title: "[TIMOB-27480] iOS : Setting last index of TabbedBar after initialization doesn't work"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-11-12T22:10:09.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 8.2.1, Release 8.2.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.3.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>engTriage, ios, tabbedbar</td></tr>
<tr><th>Reporter</th><td>nicolomonili</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2019-10-17T09:27:32.000+0000</td></tr>
<tr><th>Updated</th><td>2019-11-12T22:10:09.000+0000</td></tr>
</table>

<h3>Description</h3>

Test with SDK *8.2.0.GA* on iPhone SE Simulator (*iOS 12.2* , *iOS 13.1*)

*Code test*
<code><pre>
var win = Ti.UI.createWindow();

var labels = ['1', '2', '3', 'LAST'];
var TabbedbBar = Ti.UI.createTabbedBar({
    labels : labels
});

win.add(TabbedbBar);
win.open();

setTimeout(function(){
    TabbedbBar.index = labels.length - 1;
}, 2000);
</pre></code>

This code work on iOS 12.2 simulator.
This code doesn't work on iOS 13.1 simulator.


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27480_67070/ios12-2.png">ios12-2.png</td></td><td>2019-10-17T09:26:51.000+0000</td><td>5771</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27480_67069/ios13-1.png">ios13-1.png</td></td><td>2019-10-17T09:26:51.000+0000</td><td>6120</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Rene Pot 2019-10-17

   Tested it and can reproduce on <code>8.2.1.v20191009074714</code>. It looks like it does get selected, however, it does not get redrawn properly. Because when you click another item after the selection animation does happen properly.</li>
<li>Vijay Singh 2019-10-17

   This problem is in native app as well. Apple need to fix it. Until apple fixes it following changes will fix the issue-
   
   PR - <a href="https://github.com/appcelerator/titanium_mobile/pull/11288" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11288</a> </li>
<li>nicolomonili 2019-10-22

   Is there no possibility to temporarily insert this fix into a "continuous integrations builds" ?</li>
<li>Vijay Singh 2019-10-23

   [~nicolomonili] This ticket is in review. Once PR get approved it'll get merged and you can get build. Meanwhile you can make the changes in your SDK as this is minor change.</li>
<li>nicolomonili 2019-10-23

   Usually i don't like to change the SDK manually ... in this case i can do a test being a simple change</li>
<li>nicolomonili 2019-10-23

   </li>
<li>nicolomonili 2019-10-23

   I tried to manually edit the file *iphone/Classes/TiUIButtonBar.m*.
   The fix doesn't work. Do i have to do anything other than edit that file?</li>
<li>Satyam Sekhri 2019-10-28

   FR Passed. Last index of TabbedBar gets set when done after initialization.
   Waiting for Jenkins build to pass before merge.</li>
<li>Christopher Williams 2019-10-30

   merged to master</li>
<li>Satyam Sekhri 2019-10-30

    Verified on:
    Mac OS: 10.14.5
    SDK: 8.3.0.v20191030085531
    Appc CLI: 7.1.1
    JDK: 1.8.0_162
    Node: 10.5.0
    Studio: 5.1.4.201909061933
    Xcode: 11.1
    Device: iPhone X(v13.0), iPhone 7Plus(v12.3.1), iOS simulator 13.1, 12.2</li>
<li>nicolomonili 2019-11-01

    In my situation the problem has not been solved. And I found the reason. 
    Test code
    
    <code><pre>
    var win = Ti.UI.createWindow();
    var labels1 = ['1', '2', '3', 'LAST'];
    var labels2 = ['1', '2', '3', '4','5','LAST'];
    var TabbedbBar1 = Ti.UI.createTabbedBar({
        labels : labels1,
        top : 30
    });
    var TabbedbBar2 = Ti.UI.createTabbedBar({
        labels : labels2,
        top : 80
    });
    setTimeout(function(){
        
        TabbedbBar1.labels = labels1;   //try to remove this comment
        
        TabbedbBar1.index = labels1.length - 1;
        TabbedbBar2.index = labels2.length - 1;
    }, 2000);
    win.add(TabbedbBar1,TabbedbBar2);
    win.open();
    </pre></code></li>
<li>nicolomonili 2019-11-01

    In my case i have to update the labels value in some cases, and i noticed that doing this (at least the first time) creates problems with the index set. </li>
<li>Rene Pot 2019-11-01

    I can confirm above code breaks the TabbedBar. For some reason, updating TabbedBar1 breaks TabbedBar2 index setting for me (using CLI 7.1.1/SDK 8.3.0.v20191030085531)
    
    When removing the line that says "try to remove this comment" both will work fine for me.
    
    </li>
<li>Vijay Singh 2019-11-11

    PR (master) - <a href="https://github.com/appcelerator/titanium_mobile/pull/11324" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11324</a>
    PR (8_3_X) - <a href="https://github.com/appcelerator/titanium_mobile/pull/11325" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11325</a></li>
<li>Satyam Sekhri 2019-11-12

    FR Passed.
    Waiting for Jenkins build to pass.</li>
<li>Christopher Williams 2019-11-12

    merged to master, 8_3_X</li>
<li>Satyam Sekhri 2019-11-12

    Verified on:
    Mac OS: 10.14.5
    SDK: 8.3.0.v20191112112455, 9.0.0.v20191112112437
    Appc CLI: 7.1.1
    JDK: 1.8.0_162
    Node: 10.5.0
    Studio: 5.1.4.201909061933
    Xcode: 11.2
    Device: iPhone X(v13.2), iPhone 7Plus(v12.3.1), iOS simulator 13.2, 12.4</li>
</ol>


<p><a href="/TIMOB/TIMOB-27480.json">JSON Source</a></p>