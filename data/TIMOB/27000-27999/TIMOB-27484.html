---
title: "[TIMOB-27484] iOS: App fails to launch with \"undefined is not an object\" on iOS 9"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-11-12T10:09:47.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 8.3.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.3.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>engSchedule</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2019-10-21T10:08:51.000+0000</td></tr>
<tr><th>Updated</th><td>2019-11-12T10:09:47.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

When building to an iOS 9 device/simulator the following error is seen, it's probable this is down to some of the recent refactorings in the build scripts relating to ti.main

<code><pre>
[ERROR] Script Error {
[ERROR]     column = 119;
[ERROR]     line = 5633;
[ERROR]     message = "undefined is not an object (evaluating 'Object.getOwnPropertyDescriptor(TypedArrayPrototype, Symbol.toStringTag).get')";
[ERROR]     sourceURL = "file:///Users/awam/Library/Developer/CoreSimulator/Devices/D1F3D800-B22D-43F1-A517-7BF234508D73/data/Containers/Bundle/Application/4F541A06-7C24-4A32-9595-CBD8F3410E48/ticreateapp.app/ti.main.js";
[ERROR]     stack = "    at global code(/ti.main.js:5633:119)";
[ERROR] } 
</pre></code>

<h4>Steps to reproduce</h4>

1. Build an app to iOS 9

<h4>Actual</h4>

Error above

<h4>Expected</h4>

App should launch fine

<h3>Comments</h3>

<ol>
<li>nicolomonili 2019-10-21

   With SDK *8.2.0.GA* there is no problem, the problems started with *SDK8.3*
   </li>
<li>Ewan Harris 2019-10-21

   Tracked this down to [these lines](<a href="https://github.com/appcelerator/titanium_mobile/blob/74d78fb89404122f278600933c3fb9e3e32cf4d8/common/Resources/ti.internal/extensions/node/internal/util/types.js#L29-L32)." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/74d78fb89404122f278600933c3fb9e3e32cf4d8/common/Resources/ti.internal/extensions/node/internal/util/types.js#L29-L32).</a>
   
   Looking into the app under the debugger the <code>Object.getOwnPropertyDescriptor(TypedArrayPrototype, Symbol.toStringTag)</code> call returns null, it looks like <code>Symbol.toStringTag</code> isn't implemented in JSCore in iOS 9 (confirmed by debugging a website there), but is polyfilled by core-js for us. Looking at core-js, the node team raised this issue also <a href="https://github.com/zloirock/core-js/issues/378." rel="nofollow" target="_blank">https://github.com/zloirock/core-js/issues/378.</a> We might need to update to core-js 3 to fix this (or try and patch it ourselves like we did for [Error.toJSON](<a href="https://github.com/appcelerator/titanium_mobile/blob/74d78fb89404122f278600933c3fb9e3e32cf4d8/common/Resources/ti.internal/extensions/js/Error.js#L13-L21))" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/74d78fb89404122f278600933c3fb9e3e32cf4d8/common/Resources/ti.internal/extensions/js/Error.js#L13-L21))</a>
   
   cc [~jvennemann] [~cwilliams]</li>
<li>Jan Vennemann 2019-10-21

   Might be a good opportunity to replace the deprecated <code>@babel/polyfill</code> with core-js directly like mentioned on the [@babel/polyfill](<a href="https://babeljs.io/docs/en/babel-polyfill)" rel="nofollow" target="_blank">https://babeljs.io/docs/en/babel-polyfill)</a> website.</li>
<li>Ewan Harris 2019-10-22

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/11289" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11289</a></li>
<li>nicolomonili 2019-10-29

   I urgently need to solve this problem with devices that mount iOS 9. It's possible to put this fix in a nightly build <a href="https://builds.appcelerator.com/#master" rel="nofollow" target="_blank">https://builds.appcelerator.com/#master</a> ? Thank you</li>
<li>Jan Vennemann 2019-10-29

   [~nicolomonili], you can build your own nightly including the outstanding PR in just a few simple steps.
   
   <code><pre>
   git checkout -b ewanharris-TIMOB-27484 master
   git pull <a href="https://github.com/ewanharris/titanium_mobile.git" rel="nofollow" target="_blank">https://github.com/ewanharris/titanium_mobile.git</a> TIMOB-27484
   node build/scons.js cleanbuild &lt;platform&gt;
   </pre></code>
   
   If you don't specify a specific platform (either <code>android</code> or <code>ios</code>), the SDK will be build for both.
   </li>
<li>Ewan Harris 2019-11-11

   8_3_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/11322" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11322</a></li>
<li>Samir Mohammed 2019-11-11

   FR Passed on 8_3_X</li>
<li>Samir Mohammed 2019-11-11

   FR Passed on Master, waiting on Jenkins builds for 8_3_X and Master.</li>
<li>Christopher Williams 2019-11-11

    merged to master and 8_3_X</li>
<li>Samir Mohammed 2019-11-12

    *Closing ticket*, Verified fix on SDK version <code>9.0.0.v20191111145151</code> and <code>8.3.0.v20191111195828</code>.
    
    Test and other information can be found at: 
    8_3_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/11322" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11322</a>
    Master: <a href="https://github.com/appcelerator/titanium_mobile/pull/11289" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11289</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-27484.json">JSON Source</a></p>