---
title: "[TIMOB-27496] Android: Setting ListView row item property not in template will be wrongly duplicated on offscreen rows"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2019-11-12T10:58:02.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 8.2.1, Release 8.2.0, Release 8.1.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 8.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>Escalation, ListView, android, engSchedule, regression</td></tr>
<tr><th>Reporter</th><td>Nazmus Salahin</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2019-10-24T02:14:09.000+0000</td></tr>
<tr><th>Updated</th><td>2019-11-12T10:58:02.000+0000</td></tr>
</table>

<h3>Description</h3>

The customer discovered a bug with ListView on Android. The issue happens when having a very long list. They use one template for all items and show/hide certain parts of it depending on their business logic. They've noticed that when scrolling below the fold and scroll back up items are being re-rendered using styles from the LAST item in the list. Instead of showing/hiding items, they colored them red. Notice that when rendered it looks correct. When scrolling down and encounter accounts colored with red background and scroll up - previously non-colored accounts also get the red background. The customer tested on Samsung S6, S7, S8, S9, S10 with SDK 8.2.0 GA.
Note: We tested the issue on 8.2.0.GA, Sumsang Galaxy A7(Android 9) and the issue is reproducible on our end.

*Test steps:*
1. Download the attached project.
2. Open appcelerator studio and import the project.
2. Run the project on a device.

*Test code:* <a href="https://drive.google.com/file/d/14BetKOnAO_JN7Kr33sJti65Jcmdrkga3/view?usp=sharing" rel="nofollow" target="_blank">https://drive.google.com/file/d/14BetKOnAO_JN7Kr33sJti65Jcmdrkga3/view?usp=sharing</a>

*Test result:* <a href="https://drive.google.com/file/d/10PFwqwx-CYTnJzfft6PmFpZG_UF1TDGp/view?usp=sharing" rel="nofollow" target="_blank">https://drive.google.com/file/d/10PFwqwx-CYTnJzfft6PmFpZG_UF1TDGp/view?usp=sharing</a>

Note: On iOS it works as expected.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-27496_67110/20191106_133543.mp4">20191106_133543.mp4</td></td><td>2019-11-06T21:41:22.000+0000</td><td>5234941</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2019-10-29

   Here's a simplified test case:
   <code><pre>
   const win = Ti.UI.createWindow({ backgroundColor: 'gray' });
   const listView = Ti.UI.createListView({
       templates: {
           template: {
               type: 'Ti.UI.View',
               childTemplates: [
                   {
                       type: 'Ti.UI.View',
                       bindId: 'view',
                       properties: {
                           height: 30,
                           backgroundColor: 'white'
                       },
                       childTemplates: [
                           {
                               type: 'Ti.UI.Label',
                               bindId: 'label',
                               properties: {
                                   color: 'black'
                               }
                           }
                       ]
                   }
               ]
           }
       },
       defaultItemTemplate: 'template'
   });
   
   const items = [];
   for (let i = 0; i &lt; 18; i++) {
       items.push({
           template: 'template',
           label: {
               text: <code>Item #${i}</code>
           }
       });
   }
   items.push({
       template: 'template',
       label: {
           text: <code>Item #19</code>
       },
       view: {
           backgroundColor: 'red'
       }
   });
   listView.sections = [ Ti.UI.createListSection({ items }) ];
   
   win.add(listView);
   win.open();
   </pre></code></li>
<li>Gary Mathews 2019-10-29

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/11302" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11302</a></li>
<li>Christopher Williams 2019-11-06

   merged to master</li>
<li>Lokesh Choudhary 2019-11-06

   [~gmathews], When I tap on the red row & then scroll up & down I am able to reproduce the issue.
   Seems its fixed for the original case & this can be a side effect.
   
    [^20191106_133543.mp4] </li>
<li>Gary Mathews 2019-11-07

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/11319" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11319</a></li>
<li>Gary Mathews 2019-11-11

   8_3_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/11323" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11323</a></li>
<li>Lokesh Choudhary 2019-11-11

   FR Passed.
   Waiting for Jenkins to merge.</li>
<li>Christopher Williams 2019-11-11

   merged to master and 8_3_X</li>
<li>Samir Mohammed 2019-11-12

   Closing ticket, fix verified in SDK version <code>8.3.0.v20191111195828</code> and SDK version <code>9.0.0.v20191111145151</code>
   
   Test and other information can be found at: 
   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/11319" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11319</a>
   8_3_X: <a href="https://github.com/appcelerator/titanium_mobile/pull/11323" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11323</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-27496.json">JSON Source</a></p>