---
title: "[TIMOB-27501] Android: Be able to determine dark / light theme, as well as changes on it"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-08-03T20:42:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.1.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Sergey Volkov</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2019-10-01T16:11:31.000+0000</td></tr>
<tr><th>Updated</th><td>2020-08-03T20:42:58.000+0000</td></tr>
</table>

<h3>Description</h3>

A developer should be able to check the current <code>Configuration.UI_MODE_NIGHT_MASK</code>, i.e. dark theme vs light theme.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-27501_67038/0001-feat-android-semantic-colors-and-night-mode.patch">0001-feat-android-semantic-colors-and-night-mode.patch</td></td><td>2019-10-10T09:52:43.000+0000</td><td>8569</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Sergey Volkov 2019-10-01

   Documentation: <a href="https://developer.android.com/guide/topics/ui/look-and-feel/darktheme" rel="nofollow" target="_blank">https://developer.android.com/guide/topics/ui/look-and-feel/darktheme</a>
   
   Sample code for the patch:
   
   <code><pre>
   const colorset = require('/semantic.colors.json');
   if (Ti.UI.Android) {
     const mode = Ti.UI.Android.nightModeStatus;
     if (mode === Ti.UI.Android.MODE_NIGHT_YES) {
       Ti.UI.semanticColorType = Ti.UI.SEMANTIC_COLOR_TYPE_DARK;
     } else {
       Ti.UI.semanticColorType = Ti.UI.SEMANTIC_COLOR_TYPE_LIGHT;
     }
   }
   
   Object.keys(colorset).forEach(name =&gt; {
     Alloy.CFG.color[name] = Ti.UI.fetchSemanticColor(name);
   });
   </pre></code>
   
   Also patch provides additional build step for android: color resources (xml) are generated from "semantic.colors.json" (<code>res/values/values.xml</code> for "light" colors and <code>res/values-night/values-night.xml</code> for "dark"). This allows to define colors one time in "semantic.colors.json" and then use them in android xml-theme.</li>
<li>Christopher Williams 2020-01-28

   I've started to look into this, because the iOS side had some funkiness to it as well.
   
   We should have a cross-platform API to query for whether we're in dark/night mode versus normal/light mode. We had a property off the <code>Ti.App.iOS</code> namesake for iOS. We also had an API in <code>Ti.UI.fetchSemanticColor</code> that was problematic as it'd return different types based on OS/OS version - and one of the types was entirely undocumented.
   
   I'm in the process of trying to cleaning that up, incorporating [~s.volkov]'s PR changes for Android support, and trying to get the docs right around the previously undocumented proxy type it returns.</li>
<li>Christopher Williams 2020-01-28

   WIP PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/11457" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11457</a></li>
<li>Christopher Williams 2020-01-28

   WIP PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/11457" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11457</a></li>
<li>Satyam Sekhri 2020-05-08

   FR Passed.</li>
<li>Satyam Sekhri 2020-08-03

   Verified on:
   Mac OS: 10.15.4
   SDK: 9.1.0.v20200727104531
   Appc CLI: 8.1.0-master.7
   JDK: 11.0.4
   Node: 10.17.0
   Studio: 6.0.0.202005141803
   Xcode: 12.0 beta
   Device: iPhone X(v13.4), iOS simulator 13.5, Pixel 3(v10.0), Pixel 2 emulator(v10.0)</li>
</ol>


<p><a href="/TIMOB/TIMOB-27501.json">JSON Source</a></p>