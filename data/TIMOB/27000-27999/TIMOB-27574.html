---
title: "[TIMOB-27574] Android: Replace SDK \"build.properties\" with gradle generated \"BuildConfig\" class"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-04-10T21:54:49.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.0.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, build, gradle, properties, sdk</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2019-11-13T01:35:09.000+0000</td></tr>
<tr><th>Updated</th><td>2020-04-10T21:54:49.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
When building the Titanium SDK, we generate a "build.properties" file (similar to an <code>INI</code> file) providing the Titanium library's version and build time information. This file is stored under APK "assets" and is read on app startup via the Java method below.
[TiApplication.loadBuildProperties()](<a href="https://github.com/appcelerator/titanium_mobile/blob/5fbe78276e04049874e13bcc0a3874593f27254e/android/titanium/src/java/org/appcelerator/titanium/TiApplication.java#L300)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/5fbe78276e04049874e13bcc0a3874593f27254e/android/titanium/src/java/org/appcelerator/titanium/TiApplication.java#L300)</a>

By default, gradle generates a <code>BuildConfig</code> Java class for all libraries and apps. We should use this feature instead of generating our own "build.properties" file. It will simplify our build process... and access to this info at runtime will be faster.
<a href="https://developer.android.com/studio/build/gradle-tips#share-custom-fields-and-resource-values-with-your-app-code" rel="nofollow" target="_blank">https://developer.android.com/studio/build/gradle-tips#share-custom-fields-and-resource-values-with-your-app-code</a>

*Example:*
<code><pre>
// The "build.gradle" file.
android {
	defaultConfig {
		buildConfigField('String', 'BUILD_VERSION', '"9.x.x"')
		buildConfigField('String', 'BUILD_TIMESTAMP', '"YYYY/MM/DD HH:MM"')
		buildConfigField('String', 'BUILD_GIT_HASH', '"HEAD"')
	}
}
</pre></code>

*Note:*
This information is logged on app startup as...
<code><pre>
&lt;AppName&gt; &lt;AppVersion&gt; (Powered by Titanium &lt;Version&gt;.&lt;GitHash&gt;)
</pre></code>

The above message gets logged in the code below...
[ti.main.js#L15](<a href="https://github.com/appcelerator/titanium_mobile/blob/5fbe78276e04049874e13bcc0a3874593f27254e/common/Resources/ti.main.js#L15)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/5fbe78276e04049874e13bcc0a3874593f27254e/common/Resources/ti.main.js#L15)</a>


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2020-04-08

   After upgrading gradle via [TIMOB-27778], the current "master" and "9_0_X" branches are no longer picking up the generated "build.properties" file on the initial build. This means that Jenkins built SDKs for Android will return version "1.0.0". This can be seen in app builds, such as via Jenkin's mocha unit test output.
   This issue can be corrected with this ticket's proposed changes.
   
   This issue was caught before release.</li>
<li>Joshua Quick 2020-04-08

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/11605" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11605</a>
   PR (9.0.x): <a href="https://github.com/appcelerator/titanium_mobile/pull/11606" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11606</a>
   </li>
<li>Lokesh Choudhary 2020-04-08

   FR Passed.
   PR's Merged.</li>
<li>Satyam Sekhri 2020-04-10

   Verified on:
   Mac OS: 10.15.4
   SDK: 9.0.1.v20200409100807, 9.1.0.v20200409073825
   Appc CLI: 8.0.0
   JDK: 11.0.4
   Node: 10.17.0
   Studio: 6.0.0.202003132109
   Device: Pixel3(v10.0) emulator, </li>
</ol>


<p><a href="/TIMOB/TIMOB-27574.json">JSON Source</a></p>