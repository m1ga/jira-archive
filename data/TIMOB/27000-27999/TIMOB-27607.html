---
title: "[TIMOB-27607] iPad: crash during test suite w/ Titanium.UI.TableView search bar"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2019-11-14T21:18:06.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 8.3.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Christopher Williams</td></tr>
<tr><th>Assignee</th><td>Vijay Singh</td></tr>
<tr><th>Created</th><td>2019-11-14T20:57:10.000+0000</td></tr>
<tr><th>Updated</th><td>2019-11-14T21:18:06.000+0000</td></tr>
</table>

<h3>Description</h3>

The "Delete row (Search active)" unit test for Tableview seems to have caused a crash on one of the build machines.

The unit test: <a href="https://github.com/appcelerator/titanium-mobile-mocha-suite/blob/master/Resources/ti.ui.tableview.test.js#L1037-L1081" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-mobile-mocha-suite/blob/master/Resources/ti.ui.tableview.test.js#L1037-L1081</a>

The output of the build log:
<code><pre>
[2019-11-14T20:31:09.534Z] [INFO] :   !TEST_START: Delete row (Search Active)
[2019-11-14T20:31:09.534Z] [WARN] :   Automatic setter methods for properties are deprecated in SDK 8.0.0 and will be removed in SDK 9.0.0. Please modify the property in standard JS style: obj.value = value; or obj['value'] = value;
[2019-11-14T20:31:14.306Z] [WARN] :   Window is not open. Ignoring this close call
[2019-11-14T20:31:14.306Z] [WARN] :   Window is not open. Ignoring this close call
[2019-11-14T20:31:14.306Z] [WARN] :   Window is not open. Ignoring this close call
[2019-11-14T20:31:14.306Z] [WARN] :   Window is not open. Ignoring this close call
[2019-11-14T20:31:14.306Z] [WARN] :   Window is not open. Ignoring this close call
[2019-11-14T20:31:14.306Z] [WARN] :   Window is not open. Ignoring this close call
[2019-11-14T20:31:14.306Z] [WARN] :   Window is not open. Ignoring this close call
[2019-11-14T20:31:14.306Z] [WARN] :   Window is not open. Ignoring this close call
[2019-11-14T20:31:14.306Z] [WARN] :   Window is not open. Ignoring this close call
[2019-11-14T20:31:14.306Z] [WARN] :   Window is not open. Ignoring this close call
[2019-11-14T20:31:14.306Z] [WARN] :   Window is not open. Ignoring this close call
[2019-11-14T20:31:14.306Z] [WARN] :   Window is not open. Ignoring this close call
[2019-11-14T20:31:14.306Z] [INFO] :   !TEST_END: {"state":"passed","duration":4903,"suite":"Titanium.UI.TableView","title":"Delete row (Search Active)","message":""}
[2019-11-14T20:31:16.086Z] [INFO] :   Window is not open. Ignoring this close call
[2019-11-14T20:31:16.086Z] [INFO] :   *** Assertion failure in -[_UISearchBarVisualProviderIOS prepareForTransitionToSearchLayoutState:], /BuildRoot/Library/Caches/com.apple.xbs/Sources/UIKitCore_Sim/UIKit-3899.13.13/_UISearchBarVisualProviderIOS.m:2055
[2019-11-14T20:31:16.086Z] [ERROR] :  Application received error: Nested internal _UISearchBar transitions not yet supported. This is an internal UIKit bug.
[2019-11-14T20:31:16.086Z] [ERROR] :      0   CoreFoundation                      0x0000000108b23bde __exceptionPreprocess + 350
[2019-11-14T20:31:16.086Z] [ERROR] :      1   libobjc.A.dylib                     0x0000000107dbfb20 objc_exception_throw + 48
[2019-11-14T20:31:16.086Z] [ERROR] :      2   CoreFoundation                      0x0000000108b23958 +[NSException raise:format:arguments:] + 88
[2019-11-14T20:31:16.086Z] [ERROR] :      3   Foundation                          0x000000010548e6f5 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 191
[2019-11-14T20:31:16.086Z] [ERROR] :      4   UIKitCore                           0x00000001149767ba -[_UISearchBarVisualProviderIOS prepareForTransitionToSearchLayoutState:] + 1306
[2019-11-14T20:31:16.086Z] [ERROR] :      5   UIKitCore                           0x0000000114976174 -[_UISearchBarVisualProviderIOS driveTransitionToSearchLayoutState:] + 180
[2019-11-14T20:31:16.086Z] [ERROR] :      6   UIKitCore                           0x00000001152cd46a __68-[_UISearchControllerTransplantSearchBarAnimator animateTransition:]_block_invoke.98 + 107
[2019-11-14T20:31:16.086Z] [ERROR] :      7   UIKitCore                           0x00000001157371e6 +[UIView(UIViewAnimationWithBlocks) _setupAnimationWithDuration:delay:view:options:factory:animations:start:animationStateGenerator:completion:] + 528
[2019-11-14T20:31:16.086Z] [ERROR] :      8   UIKitCore                           0x0000000115737795 +[UIView(UIViewAnimationWithBlocks) animateWithDuration:delay:options:animations:completion:] + 99
[2019-11-14T20:31:16.086Z] [ERROR] :      9   UIKitCore                           0x00000001152ccc15 -[_UISearchControllerTransplantSearchBarAnimator animateTransition:] + 862
[2019-11-14T20:31:16.086Z] [ERROR] :      10  UIKitCore                           0x0000000114c3949e ___UIViewControllerTransitioningRunCustomTransition_block_invoke_2 + 54
[2019-11-14T20:31:16.086Z] [ERROR] :      11  UIKitCore                           0x0000000114d4eece +[UIInputResponderController _pinInputViewsForInputResponderController:onBehalfOfResponder:duringBlock:] + 99
[2019-11-14T20:31:16.086Z] [ERROR] :      12  UIKitCore                           0x0000000114c39432 ___UIViewControllerTransitioningRunCustomTransition_block_invoke.645 + 180
[2019-11-14T20:31:16.086Z] [ERROR] :      13  UIKitCore                           0x0000000115735751 +[UIView(Animation) _setAlongsideAnimations:toRunByEndOfBlock:] + 175
[2019-11-14T20:31:16.086Z] [ERROR] :      14  UIKitCore                           0x0000000114c392b8 _UIViewControllerTransitioningRunCustomTransition + 553
[2019-11-14T20:31:16.086Z] [ERROR] :      15  UIKitCore                           0x0000000114b1cccb __56-[UIPresentationController runTransitionForCurrentState]_block_invoke.452 + 2632
[2019-11-14T20:31:16.086Z] [ERROR] :      16  UIKitCore                           0x000000011527885a _runAfterCACommitDeferredBlocks + 352
[2019-11-14T20:31:16.086Z] [ERROR] :      17  UIKitCore                           0x000000011526963c _cleanUpAfterCAFlushAndRunDeferredBlocks + 248
[2019-11-14T20:31:16.086Z] [ERROR] :      18  UIKitCore                           0x0000000115298c6e _afterCACommitHandler + 85
[2019-11-14T20:31:16.086Z] [ERROR] :      19  CoreFoundation                      0x0000000108a85eb7 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 23
[2019-11-14T20:31:16.086Z] [ERROR] :      20  CoreFoundation                      0x0000000108a8094e __CFRunLoopDoObservers + 430
[2019-11-14T20:31:16.086Z] [ERROR] :      21  CoreFoundation                      0x0000000108a80fca __CFRunLoopRun + 1514
[2019-11-14T20:31:16.086Z] [ERROR] :      22  CoreFoundation                      0x0000000108a806b6 CFRunLoopRunSpecific + 438
[2019-11-14T20:31:16.086Z] [ERROR] :      23  GraphicsServices                    0x000000011046cbb0 GSEventRunModal + 65
[2019-11-14T20:31:16.086Z] [ERROR] :      24  UIKitCore                           0x000000011526fa67 UIApplicationMain + 1621
[2019-11-14T20:31:16.086Z] [ERROR] :      25  mocha                               0x00000001024915ac main + 1212
[2019-11-14T20:31:16.087Z] [ERROR] :      26  libdyld.dylib                       0x000000010b6b6cf5 start + 1
[2019-11-14T20:31:16.087Z] [ERROR] :      27  ???                                 0x0000000000000001 0x0 + 1
[2019-11-14T20:31:16.087Z] [ERROR] :  *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Nested internal _UISearchBar transitions not yet supported. This is an internal UIKit bug.'
[2019-11-14T20:31:16.087Z] [ERROR] :  *** First throw call stack:
[2019-11-14T20:31:16.087Z] [ERROR] :  (
[2019-11-14T20:31:16.087Z] [ERROR] :  	0   CoreFoundation                      0x0000000108b23bde __exceptionPreprocess + 350
[2019-11-14T20:31:16.087Z] [ERROR] :  	1   libobjc.A.dylib                     0x0000000107dbfb20 objc_exception_throw + 48
[2019-11-14T20:31:16.087Z] [ERROR] :  	2   CoreFoundation                      0x0000000108b23958 +[NSException raise:format:arguments:] + 88
[2019-11-14T20:31:16.087Z] [ERROR] :  	3   Foundation                          0x000000010548e6f5 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 191
[2019-11-14T20:31:16.087Z] [ERROR] :  	4   UIKitCore                           0x00000001149767ba -[_UISearchBarVisualProviderIOS prepareForTransitionToSearchLayoutState:] + 1306
[2019-11-14T20:31:16.087Z] [ERROR] :  	5   UIKitCore                           0x0000000114976174 -[_UISearchBarVisualProviderIOS driveTransitionToSearchLayoutState:] + 180
[2019-11-14T20:31:16.087Z] [ERROR] :  	6   UIKitCore                           0x00000001152cd46a __68-[_UISearchControllerTransplantSearchBarAnimator animateTransition:]_block_invoke.98 + 107
[2019-11-14T20:31:16.087Z] [ERROR] :  	7   UIKitCore                           0x00000001157371e6 +[UIView(UIViewAnimationWithBlocks) _setupAnimationWithDuration:delay:view:options:factory:animations:start:animationStateGenerator:completion:] + 528
[2019-11-14T20:31:16.087Z] [ERROR] :  	8   UIKitCore                           0x0000000115737795 +[UIView(UIViewAnimationWithBlocks) animateWithDuration:delay:options:animations:completion:] + 99
[2019-11-14T20:31:16.087Z] [ERROR] :  	9   UIKitCore                           0x00000001152ccc15 -[_UISearchControllerTransplantSearchBarAnimator animateTransition:] + 862
[2019-11-14T20:31:16.087Z] [ERROR] :  	10  UIKitCore                           0x0000000114c3949e ___UIViewControllerTransitioningRunCustomTransition_block_invoke_2 + 54
[2019-11-14T20:31:16.087Z] [ERROR] :  	11  UIKitCore                           0x0000000114d4eece +[UIInputResponderController _pinInputViewsForInputResponderController:onBehalfOfResponder:duringBlock:] + 99
[2019-11-14T20:31:16.087Z] [ERROR] :  	12  UIKitCore                           0x0000000114c39432 ___UIViewControllerTransitioningRunCustomTransition_block_invoke.645 + 180
[2019-11-14T20:31:16.087Z] [ERROR] :  	13  UIKitCore                           0x0000000115735751 +[UIView(Animation) _setAlongsideAnimations:toRunByEndOfBlock:] + 175
[2019-11-14T20:31:16.087Z] [ERROR] :  	14  UIKitCore                           0x0000000114c392b8 _UIViewControllerTransitioningRunCustomTransition + 553
[2019-11-14T20:31:16.087Z] [ERROR] :  	15  UIKitCore                           0x0000000114b1cccb __56-[UIPresentationController runTransitionForCurrentState]_block_invoke.452 + 2632
[2019-11-14T20:31:16.087Z] [ERROR] :  	16  UIKitCore                           0x000000011527885a _runAfterCACommitDeferredBlocks + 352
[2019-11-14T20:31:16.087Z] [ERROR] :  	17  UIKitCore                           0x000000011526963c _cleanUpAfterCAFlushAndRunDeferredBlocks + 248
[2019-11-14T20:31:16.087Z] [ERROR] :  	18  UIKitCore                           0x0000000115298c6e _afterCACommitHandler + 85
[2019-11-14T20:31:16.087Z] [ERROR] :  	19  CoreFoundation                      0x0000000108a85eb7 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 23
[2019-11-14T20:31:16.087Z] [ERROR] :  	20  CoreFoundation                      0x0000000108a8094e __CFRunLoopDoObservers + 430
[2019-11-14T20:31:16.087Z] [ERROR] :  	21  CoreFoundation                      0x0000000108a80fca __CFRunLoopRun + 1514
[2019-11-14T20:31:16.087Z] [ERROR] :  	22  CoreFoundation                      0x0000000108a806b6 CFRunLoopRunSpecific + 438
[2019-11-14T20:31:16.087Z] [ERROR] :  	23  GraphicsServices                    0x000000011046cbb0 GSEventRunModal + 65
[2019-11-14T20:31:16.087Z] [ERROR] :  	24  UIKitCore                           0x000000011526fa67 UIApplicationMain + 1621
[2019-11-14T20:31:16.087Z] [ERROR] :  	25  mocha                               0x00000001024915ac main + 1212
[2019-11-14T20:31:16.087Z] [ERROR] :  	26  libdyld.dylib                       0x000000010b6b6cf5 start + 1
[2019-11-14T20:31:16.087Z] [ERROR] :  	27  ???                                 0x0000000000000001 0x0 + 1
[2019-11-14T20:31:16.087Z] [ERROR] :  )
[2019-11-14T20:31:16.087Z] [ERROR] :  libc++abi.dylib: terminating with uncaught exception of type NSException
</pre></code>

Link to log: <a href="https://jenkins.appcelerator.org/blue/rest/organizations/jenkins/pipelines/titanium-sdk/pipelines/titanium_mobile/branches/PR-11336/runs/1/nodes/97/steps/212/log/?start=0" rel="nofollow" target="_blank">https://jenkins.appcelerator.org/blue/rest/organizations/jenkins/pipelines/titanium-sdk/pipelines/titanium_mobile/branches/PR-11336/runs/1/nodes/97/steps/212/log/?start=0</a>

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2019-11-14

   Looks to be difficult to reproduce, ad the error message indicates its "an internal UIKit bug". Likely that updating our build nodes to newer versions of Xcode (with newer iOS versions) may fix the issue.</li>
</ol>


<p><a href="/TIMOB/TIMOB-27607.json">JSON Source</a></p>