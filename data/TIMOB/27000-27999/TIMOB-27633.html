---
title: "[TIMOB-27633] Android: Additional parameters in require cause app to crash"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-01-13T11:00:39.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 8.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, engSchedule</td></tr>
<tr><th>Reporter</th><td>Jan Vennemann</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2019-11-26T19:19:27.000+0000</td></tr>
<tr><th>Updated</th><td>2020-01-13T11:00:39.000+0000</td></tr>
</table>

<h3>Description</h3>

*Steps to reproduce the behavior*

<h4>Create a new JS files that can be required, for example <code>test.js</code>. The content doesn't matter</h4>
<h4>Require that JS file with an additional parameter</h4>
<code><pre>
require('./test.js', true);
</pre></code>
<h4>Run on Android</h4>

*Actual behavior*
The app crashes during runtime with the following error:
<code><pre>
[ERROR] TiExceptionHandler: (main) [157,157] ti:/module.js:596
[ERROR] TiExceptionHandler: 	context.sourceUrl = url;
[ERROR] TiExceptionHandler:                    ^
[ERROR] TiExceptionHandler: TypeError: Cannot create property 'sourceUrl' on boolean 'true'
[ERROR] TiExceptionHandler:     at Module._runScript (ti:/module.js:596:20)
[ERROR] TiExceptionHandler:     at Module.load (ti:/module.js:107:7)
[ERROR] TiExceptionHandler:     at Module.loadJavascriptText (ti:/module.js:453:9)
[ERROR] TiExceptionHandler:     at Module.loadAsFile (ti:/module.js:503:15)
[ERROR] TiExceptionHandler:     at Module.loadAsFileOrDirectory (ti:/module.js:425:20)
[ERROR] TiExceptionHandler:     at Module.require (ti:/module.js:255:17)
[ERROR] TiExceptionHandler:     at Module.global.Module.require (/ti.main.js:9505:34)
[ERROR] TiExceptionHandler:     at require (ti:/module.js:566:15)
[ERROR] TiExceptionHandler:     at /app.js:20:1
[ERROR] TiExceptionHandler:     at Module._runScript (ti:/module.js:608:9)
[ERROR] TiExceptionHandler:
[ERROR] TiExceptionHandler:     org.appcelerator.kroll.runtime.v8.V8Runtime.nativeRunModuleBytes(Native Method)
[ERROR] TiExceptionHandler:     org.appcelerator.kroll.runtime.v8.V8Runtime.doRunModuleBytes(V8Runtime.java:162)
[ERROR] TiExceptionHandler:     org.appcelerator.kroll.KrollRuntime.runModuleBytes(KrollRuntime.java:212)
[ERROR] TiExceptionHandler:     org.appcelerator.titanium.TiLaunchActivity.loadScript(TiLaunchActivity.java:101)
[ERROR] TiExceptionHandler:     org.appcelerator.titanium.TiRootActivity.loadScript(TiRootActivity.java:480)
[ERROR] TiExceptionHandler:     org.appcelerator.titanium.TiLaunchActivity.onResume(TiLaunchActivity.java:192)
[ERROR] TiExceptionHandler:     org.appcelerator.titanium.TiRootActivity.onResume(TiRootActivity.java:499)
[ERROR] TiExceptionHandler:     android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1355)
[ERROR] TiExceptionHandler:     android.app.Activity.performResume(Activity.java:7117)
[ERROR] TiExceptionHandler:     android.app.ActivityThread.performResumeActivity(ActivityThread.java:3556)
</pre></code>

*Expected behavior*
Additional parameter to require will be ignored.

*Additional notes*
If the file was required before without any additional parameters the require works as expected.

<code><pre>
// This won't crash
require('./test');
require('./test', true);
</pre></code>

<h3>Comments</h3>

<ol>
<li>Jan Vennemann 2019-12-06

   [~gmathews] put up a PR <a href="https://github.com/appcelerator/titanium_mobile/pull/11378" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11378</a> for a possible solution and further discussion.</li>
<li>Christopher Williams 2019-12-06

   WIP PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/11380" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11380</a></li>
<li>Christopher Williams 2019-12-16

   <a href="https://github.com/appcelerator/titanium_mobile/pull/11380" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11380</a></li>
<li>Samir Mohammed 2020-01-10

   FR Passed, Waiting on Jenkins build.</li>
<li>Christopher Williams 2020-01-10

   merged to master for 9.0.0</li>
<li>Samir Mohammed 2020-01-13

   *Closing ticket*, fix verified in SDK Version <code>9.0.0.v20200110103446</code>.
   
   Test and other information can be found at: 
   <a href="https://github.com/appcelerator/titanium_mobile/pull/11380" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11380</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-27633.json">JSON Source</a></p>