---
title: "[TIMOB-27686] Android: Auto-download build system dependencies via gradle"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-01-31T11:21:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, build, gradle, sdk, tools</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2019-12-14T05:43:03.000+0000</td></tr>
<tr><th>Updated</th><td>2020-01-31T11:21:58.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
Gradle supports automatically downloading build system related dependencies such as Google's "build-tools" and targeted API Level libraries. We should leverage this feature so that app developer's won't have to download/install them manually via Google's "Android SDK Manager" dialog. This will make building Android apps more convenient and minimize tech-support issues.

*Recommended Solution:*
Once gradle build support has been added via [TIMOB-19300] in Titanium 9.0.0, we get this feature for free when we start the "gradlew" app build.

But in order for this to happen, we need to ignore some of the error results returned by our [node-titanium-sdk](<a href="https://github.com/appcelerator/node-titanium-sdk)" rel="nofollow" target="_blank">https://github.com/appcelerator/node-titanium-sdk)</a> module's Android detect API [here](<a href="https://github.com/appcelerator/node-titanium-sdk/blob/master/lib/android.js)" rel="nofollow" target="_blank">https://github.com/appcelerator/node-titanium-sdk/blob/master/lib/android.js)</a> in our Titanium SDK's [_build.js](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/cli/commands/_build.js)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/cli/commands/_build.js)</a> script's <code>validate()</code> function.

The error string IDs we need to ignore are:
* <code>'ANDROID_BUILD_TOOLS_TOO_NEW'</code>
* <code>'ANDROID_BUILD_TOOLS_NOT_SUPPORTED'</code>
* <code>'ANDROID_BUILD_TOOLS_CONFIG_SETTING_NOT_INSTALLED'</code>
* <code>'ANDROID_API_TOO_OLD'</code>
* <code>'ANDROID_API_TOO_NEW'</code>
* <code>'ANDROID_NO_APIS'</code>
* <code>'ANDROID_NO_VALID_APIS'</code>
* <code>'ANDROID_SDK_MISSING_PROGRAMS'</code>

*Note 1:*
We still need our Android SDK/NDK detection code, because there is no way to run the Android gradlew tool without first setting up a "local.properties" file that reference the SDK/NDK directories.

*Note 2:*
Our Titanium CLI still needs to keep its existing Android tooling detection code since the CLI needs to support Titanium SDK versions older than 9.0.0.


<h3>Comments</h3>

<ol>
<li>Gary Mathews 2020-01-14

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/11432" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11432</a></li>
<li>Christopher Williams 2020-01-30

   merged to master for 9.0.0</li>
<li>Samir Mohammed 2020-01-31

   Closing ticket, fix verified in SDK version 9.0.0.v20200130113429
   
   Test and other information can be found at:
   <a href="https://github.com/appcelerator/titanium_mobile/pull/11432" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11432</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-27686.json">JSON Source</a></p>