---
title: "[TIMOB-27752] Android: Exclude x86 and x86_64 architectures in \"production\" builds by default"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-02-13T23:51:32.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, architecture, build, production, x86, x86_64</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2020-02-07T02:45:18.000+0000</td></tr>
<tr><th>Updated</th><td>2020-03-30T13:59:54.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
When doing a "production" build, the <code>x86</code> and <code>x86_64</code> architectures should be excluded from the built Android app by default. That is, only ARM architectures should be included.

*Note 1:*
We have been excluding <code>x86</code> from "production" builds since Titanium 7.0.0. We want to maintain this behavior in Titanium 9.0.0's gradle builds and exclude <code>x86_64</code> as well. These architectures are mostly needed for testing purposes in the Android emulator. Removing these architectures can reduce the APK size by a significant amount. Also, physical Android device that support <code>x86</code> are extremely rare.

*Note 2:*
Modules built with Titanium 8.x.x and older do not support the <code>x86_64</code> architecture. Only modules built with Titanium 9.0.0 and higher support <code>x86_64</code>. When you include a module that does *+NOT+* support <code>x86_64</code> into a Titanium 9.0.0 or newer app, then the build system will strip out all <code>x86_64</code> architectures from the app. It's all or nothing, otherwise a crash will occur on an <code>x84_64</code> device/emulator. This means if you want your app to support <code>x86_64</code>, then all modules must be built with Titanium 9.0.0 or higher.

*How to Override:*
You can override this behavior and specify which architectures you want to include in the build by adding the following <code>&lt;abi/&gt;</code> entry in the "tiapp.xml" file.
<code><pre>
&lt;ti:app xmlns:ti="<a href="http://ti.appcelerator.org" rel="nofollow" target="_blank">http://ti.appcelerator.org</a>"&gt;
	&lt;android&gt;
		&lt;abi&gt;armeabi-v7a,arm64-v8a,x86,x86_64&lt;/abi&gt;
	&lt;/android&gt;
&lt;/ti:app&gt;
</pre></code>


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2020-02-07

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/11466" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11466</a>
   </li>
<li>Satyam Sekhri 2020-02-10

   FR Passed.
   1. When performing a test/development build of a mobile project the apk generated includes all four architectures (arm64-v8a, armeabi-v7a, x86, x86_64)
   2. When performing a production build of a mobile project the apk generated has arm64-v8a, armeabi-v7a architectures.
   3. When performing a production build of a mobile project and including information for all 4abi's in Tiapp.xml the apk generated includes all four architectures.
   4. When the mobile project uses any module that uses SDK prior to 9.0 then the test/development/production build for the mobile project excludes the x86_64 architecture. Also a warning message is logged in the build logs.</li>
<li>Satyam Sekhri 2020-02-10

   Waiting on Jenkins build</li>
<li>Satyam Sekhri 2020-02-13

   Verified on:
   Mac OS: 10.15.1
   SDK: 9.0.0.v20200212155006
   Appc CLI: 8.0.0-master.6
   JDK: 11.0.4
   Node: 10.16.3</li>
</ol>


<p><a href="/TIMOB/TIMOB-27752.json">JSON Source</a></p>