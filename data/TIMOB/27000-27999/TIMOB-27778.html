---
title: "[TIMOB-27778] Android: Update gradle build tools to 3.6.x"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-04-02T14:27:44.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.0.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, build, gradle, tools</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2020-02-25T00:00:28.000+0000</td></tr>
<tr><th>Updated</th><td>2020-04-02T14:27:44.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
As of Titanium 9.0.0, we're using Android gradle build tool 3.4.2 to build the SDK, apps, and modules.
<code><pre>
'com.android.tools.build:gradle:3.4.2'
</pre></code>

We should update the tools to version 3.6.x.
<a href="https://developer.android.com/studio/releases/gradle-plugin#3-6-0" rel="nofollow" target="_blank">https://developer.android.com/studio/releases/gradle-plugin#3-6-0</a>

The newest build tools are supposed to improve APK build times.
<a href="https://developer.android.com/studio/releases/gradle-plugin#zipflinger" rel="nofollow" target="_blank">https://developer.android.com/studio/releases/gradle-plugin#zipflinger</a>

*Note:*
We should also update our gradle template to 6.0.x which has full support for JDK 13.
<a href="https://developer.android.com/studio/releases/gradle-plugin#updating-gradle" rel="nofollow" target="_blank">https://developer.android.com/studio/releases/gradle-plugin#updating-gradle</a>
<a href="https://docs.gradle.org/6.0/release-notes.html" rel="nofollow" target="_blank">https://docs.gradle.org/6.0/release-notes.html</a>

*To-Do:*
We must update the version in the following files...
<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/build.gradle" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/build.gradle</a>
<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/templates/build/root.build.gradle" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/templates/build/root.build.gradle</a>

Upgrading will cause the SDK and module builds to fail. The reason is because Google's build tool will now compile C/C++ before Java, which is an issue since our <code>kroll-apt</code> Java annotation processor generates C++ source files. We can solve this by adding the below to the library project's "build.gradle" file.
<code><pre>
project.afterEvaluate {
	externalNativeBuildDebug.dependsOn compileDebugJavaWithJavac
	externalNativeBuildRelease.dependsOn compileReleaseJavaWithJavac
}
</pre></code>
<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/titanium/build.gradle" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/titanium/build.gradle</a>
<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/templates/module/generated/build.gradle" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/templates/module/generated/build.gradle</a>

We will also need to update our gradlew and gradle library folder to the newest version.
<a href="https://github.com/appcelerator/titanium_mobile/tree/master/android" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/tree/master/android</a>

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2020-02-29

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/11507" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11507</a>
   PR (9.0.x): <a href="https://github.com/appcelerator/titanium_mobile/pull/11510" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11510</a></li>
<li>Sohail Saddique 2020-03-20

   </li>
<li>Samir Mohammed 2020-04-02

   *Closing ticket.* Fix verified in SDK version 9.1.0.v20200401121418. and 9.0.1.v20200331084758
   
   Test and other information can be found at:
   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/11507" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11507</a>
   PR (9.0.x): <a href="https://github.com/appcelerator/titanium_mobile/pull/11510" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11510</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-27778.json">JSON Source</a></p>