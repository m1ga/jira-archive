---
title: "[TIMOB-27791] Decide CLI commands to build and archive app for macOS target "
---
<table>
<tr><th>Type</th><td>Story</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-09-16T13:03:45.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.2.0</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Vijay Singh</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2020-03-05T21:48:27.000+0000</td></tr>
<tr><th>Updated</th><td>2020-09-16T13:03:45.000+0000</td></tr>
</table>

<h3>Description</h3>

In [PR #11506](<a href="https://github.com/appcelerator/titanium_mobile/pull/11506)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11506)</a> (WIP) we have started to supporting macOS target. 
Current commands to create and run app for Mac target are as below -

1.  Create an app using this SDK->               appc new -p ios
2.   Set property 'enable-mac-target' to 'true' in tiapp.xml
         < property name="enable-mac-target" type="bool">true < /property >
3.   To run on Mac->                                      appc run -p iOS -T 'mac'
4.    It should launch Mac app

Is there any modifications required?

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27791_67291/Native-ios-mac-enabled.png">Native-ios-mac-enabled.png</td></td><td>2020-03-05T21:52:50.000+0000</td><td>71577</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Vijay Singh 2020-03-05

   Feedback from Hans in PR -
   
   * In general: I'd vote for macos instead of mac in all terrms. Mac is the hardware, macOS the software.
   * Make macOS an own target (inside tiapp.xml), using <target>macos</target>
   * Make macOS an own command, e.g. ti build -p macos instead of an ti build -p ios subcommand
   * How are macOS assets planned to be handled? Especially launch images and app icon are quite essential. Do they just reuse the iOS one?</li>
<li>Vijay Singh 2020-03-05

    
   1. The way we are supporting Mac target is, via maccatalyst which is available in ios ecosystem. So I think platform should be ‘iOS’. See the attached screenshot 'Native-is-mac-enable.png' (section Deployment Info) of native app.  Instead of using 'enable-mac-target' in tiapp.xml we can use      <target device="mac">true</target> similar to
               <target device="iphone">true</target> . Or 'enable-mac-target'  in tiapp.xml is fine?  [~hknoechel] Are you talking about this?
   2. Assets handling - We can provide Mac specific app icons. By default it will use iOS one. Launch images are not used in Mac apps.
   3.  Do we want to make macos as own command or use it as subcommand -
       E.g to debug on Mac - "appc run -p iOS -T mac" and 
     to archive for Mac-apstore something like -    "app run -p iOS -T dist-mac-apstore"
   4.  How to ensure if module should be build for 'mac' as well?  Probably to add some key in 'timodule.xml' or any other way?
   
   [~cbarber] [~cwilliams] What is suggestion here?
   </li>
<li>Chris Barber 2020-03-05

   I don't get why we need a <code>&lt;enable-mac-target&gt;</code> or a <code>&lt;target device="mac"&gt;true&lt;/target&gt;</code> setting. Just have a <code>\-\-target</code> of <code>"mac"</code> (or <code>"macos"</code>). Having an explicit <code>--target</code> of "mac" with the appropriate validation should be sufficient. We don't want to add unnecessary barriers like these one-off settings. Furthermore, <code>&lt;target&gt;</code> is a Studio thing and should be deprecated.
   
   If you add a <code>\-T mac</code>, then it makes sense to also add a <code>\-T dist-mac-appstore</code>. Note that <code>"dist-*"</code> targets have a deploy type of "production".
   
   In theory a module would be built for x64 in addition to whatever other architectures they are compiled for. If you think there are modules that are mac specific, then maybe we take a step back and consider adding "mac" as a platform, not a target. Then the "mac" platform would have some sort of default target (I dunno, "desktop" or something) and a "dist-appstore" target. "mac" modules would go in <code>~/Library/Application Support/Titanium/mobilesdk/modules/mac/&lt;name&gt;/&lt;version&gt;/</code>.</li>
<li>Joshua Quick 2020-03-05

   *Side Question:*
   Perhaps the platform should be called "ipados"?
   
   This is because you're building an app based on the iPadOS platform which can run on macOS and iPad. (I'm guessing you don't have access to macOS APIs; only iPadOS APIs.)
   
   Kind of like how on Windows where you can build an app via the Win32 or UWP platforms. They're 2 totally separate platforms with different APIs/capabilities, but both can run on the Windows desktop.</li>
<li>Chris Barber 2020-03-06

   After some thought, it should be <code>"macos"</code>, not <code>"mac"</code>.</li>
<li>Hans Knöchel 2020-03-06

   @Chris: Agree on all points
   @Josh: iPadOS is literally a marketing name. The foundation is iOS and the macOS target is (technically) called "Catalyst" or "UIKit for Mac". So I think macOS is a proper target name here and everyone sees the benefits of it. "Classic" macOS aka AppKit will transition more and more to Catalyst as Apple pushes very hard in that direction. </li>
<li>Joshua Quick 2020-03-06

   I'm just saying there is a difference and we need to make it clear to developers which of the 2 they're getting. (If not iPadOS, then something else.)
   
   As a comparison on the Windows side, you would want to make the distinction. A Win32 app and a UWP app are very different. They result in different app binaries, have different APIs available to them, one is backward compatible on older OSes, etc. Microsoft re-documented Win32 apps as "classic" too, but no one cared, UWP never caught on (except with Xbox games), and Win32 apps are still the dominant style. UWP has less capabilities compared to Win32 and too much time was invested in existing Win32 apps to compel devs to transition them over. The same potential issue can happen on Mac and both app styles might have to coexist in parallel for the foreseeable future like how it is on Windows.
   
   Anyways, that's my 2 cents.</li>
<li>Joshua Quick 2020-03-06

   Hold on, I was confused. I thought we were making a new platform. But this is just a new target for "iOS". Oh never mind.</li>
<li>Vijay Singh 2020-03-06

   So for Mac dev -
         --target macos
   And for Mac distribution
        --target dist-macappstore
   
   Is there any difference in   -T  and --target ?
   
   For module -
   To build any module, we have to build for -
     iOS simulator
     iOS device
    maccatalyst
   
   And then we have to create a .xcframework to use it in app.
   
   Now the problem is maccatalyst is supported in macOS 10.15+(Catalina+). If someone is running on macOS < 10.15  it will fail. 
   I think we should ignore to build for maccatalyst just giving warning, if it is building for macOS < 10.15
   </li>
<li>Christopher Williams 2020-09-03

    <a href="https://github.com/appcelerator/titanium_mobile/pull/11955" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11955</a></li>
<li>Samir Mohammed 2020-09-16

    *Closing ticket*. Fix verified in SDK version <code>9.2.0.v20200915123928</code>, and <code>9.3.0.v20200915132757</code>.
    
    *Test and other information can be found at:*
    <a href="https://github.com/appcelerator/titanium_mobile/pull/11955" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11955</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-27791.json">JSON Source</a></p>