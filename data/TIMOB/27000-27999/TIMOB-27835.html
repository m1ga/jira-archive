---
title: "[TIMOB-27835] Android: Repository specified in modules build.gradle is not able to be resolved when building an application"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Not Our Bug</td></tr>
<tr><th>Resolution Date</th><td>2020-04-08T16:01:47.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 9.0.0, Release 9.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2020-04-07T12:37:06.000+0000</td></tr>
<tr><th>Updated</th><td>2020-04-08T16:01:51.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description</h4>

When providing an extra maven repository that provides a dependency in a modules build.gradle file, when building an application that uses that dependency cannot be resolved.

*Workaround*:

In your application, add a build.gradle to <code>platform/android</code> (classic) or <code>app/platform/android</code> (alloy) that contains the repository definition. 

<h4>Steps to reproduce</h4>

1. Copy the below to a build.gradle file in a module
<code><pre>
allprojects {
	repositories {
		maven { url '<a href="https://dl.bintray.com/radiusnetworks/flybuy-sdk" rel="nofollow" target="_blank">https://dl.bintray.com/radiusnetworks/flybuy-sdk</a>'}
	}
}
dependencies {
	implementation "com.radiusnetworks.flybuy:sdk:1.1.1"
	implementation "com.radiusnetworks.flybuy:api:1.1.1"
}

</pre></code>
2. Build the module using <code>appc run -p android</code> (so the app creation/building happens)

<h4>Actual</h4>

During the *application build* the following error occurs

<code><pre>
[ERROR] [GRADLE]
[ERROR] [GRADLE] FAILURE: Build failed with an exception.
[ERROR] [GRADLE]
[ERROR] [GRADLE] * What went wrong:
[ERROR] [GRADLE] Could not determine the dependencies of task ':app:compileDebugJavaWithJavac'.
[ERROR] [GRADLE] &gt; Could not resolve all task dependencies for configuration ':app:debugCompileClasspath'.
[ERROR] [GRADLE]    &gt; Could not find com.radiusnetworks.flybuy:api:1.1.1.
[ERROR] [GRADLE]      Required by:
[ERROR] [GRADLE]          project :app &gt; com.awam:foo:1.0.0
[ERROR] [GRADLE]
[ERROR] [GRADLE] * Try:
[ERROR] [GRADLE] Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.
[ERROR] [GRADLE]
[ERROR] [GRADLE] * Get more help at <a href="https://help.gradle.org" rel="nofollow" target="_blank">https://help.gradle.org</a>
[ERROR] [GRADLE]
[ERROR] [GRADLE] BUILD FAILED in 2s
[ERROR] "gradlew" tool returned exit code: 1
[ERROR] Failed to run ti /Users/awam/.nvm/versions/node/v10.16.3/bin/ti
</pre></code>

<h4>Expected</h4>

My expectation is that the repository definition shouldn't be required in app and module (but I could be wrong)

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2020-04-07

   It's an issue with the "build.gradle" file. The "allprojects" part can only be used by the root "build.gradle" which the app developer cannot define; it's auto-generated by Titanium. So, just get rid of the "allprojects" part like the below. I've tested it and it works.
   
   <code><pre>
   repositories {
   	maven { url '<a href="https://dl.bintray.com/radiusnetworks/flybuy-sdk" rel="nofollow" target="_blank">https://dl.bintray.com/radiusnetworks/flybuy-sdk</a>'}
   }
   dependencies {
   	 implementation "com.radiusnetworks.flybuy:sdk:1.1.1"
   	 implementation "com.radiusnetworks.flybuy:api:1.1.1"
   }
   </pre></code>
   </li>
<li>Joshua Quick 2020-04-07

   Note that if you're building a module, then you need the above "build.gradle" in your module's "android" directory.
   
   Unfortunately, gradle ignores custom repo URLs in the POM file used to declare the libraries dependencies.
   <a href="https://github.com/gradle/gradle/issues/8811" rel="nofollow" target="_blank">https://github.com/gradle/gradle/issues/8811</a>
   
   So, in your Titanium app project, you need to add a "build.gradle" under the "./platform/android" directory too
   <code><pre>
   repositories {
   	maven { url '<a href="https://dl.bintray.com/radiusnetworks/flybuy-sdk" rel="nofollow" target="_blank">https://dl.bintray.com/radiusnetworks/flybuy-sdk</a>'}
   }
   </pre></code>
   </li>
<li>Ewan Harris 2020-04-08

   Closing as not our bug based off previous comments.
   
   This is a limitation in gradle where a repository set in a module isn't persisted in the built sources (gradle does this for security). As stated in the ticket description the repository needs to be set in both the </li>
</ol>


<p><a href="/TIMOB/TIMOB-27835.json">JSON Source</a></p>