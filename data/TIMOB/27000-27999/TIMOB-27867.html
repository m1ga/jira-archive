---
title: "[TIMOB-27867] FileStream.read() with a callback is not asynchronous on iOS"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>n/a</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>n/a</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ryan Aston</td></tr>
<tr><th>Assignee</th><td>Abir Mukherjee</td></tr>
<tr><th>Created</th><td>2020-04-09T19:27:18.000+0000</td></tr>
<tr><th>Updated</th><td>2020-06-02T13:47:43.000+0000</td></tr>
</table>

<h3>Description</h3>

FileStream.read() is supposed to be an asynchronous call if invoked with a callback argument.  While this works in Android, in iOS it appears to be called synchronously.  This is causing our application to feel slow and even hit memory and recursion limits with large files.  Attached is a sample app that demonstrates the behavior.

Android 8.1.0 console output 

<code><pre>
[ERROR]  starting file read
[WARN]   ++++ 1. After Read
[WARN]   ---- 2. Reader Callback
[ERROR]  1
[WARN]   ++++ 1. After Read
[WARN]   ---- 2. Reader Callback
[ERROR]  2
[WARN]   ++++ 1. After Read
[WARN]   ---- 2. Reader Callback
[ERROR]  3
[WARN]   ++++ 1. After Read
[WARN]   ---- 2. Reader Callback
[ERROR]  4
[WARN]   ++++ 1. After Read
[WARN]   ---- 2. Reader Callback
[ERROR]  5
[WARN]   ++++ 1. After Read
[WARN]   ---- 2. Reader Callback
[ERROR]  6
[WARN]   ++++ 1. After Read
[WARN]   ---- 2. Reader Callback
[ERROR]  7
[WARN]   ++++ 1. After Read
[WARN]   ---- 2. Reader Callback
[ERROR]  8
[WARN]   ++++ 1. After Read
[WARN]   ---- 2. Reader Callback
[ERROR]  9
[WARN]   ++++ 1. After Read
[WARN]   ---- 2. Reader Callback
[WARN]   ++++ 1. After Read
[WARN]   ---- 2. Reader Callback
[ERROR]  10
[ERROR]  Done!
</pre></code>

iOS 12.4 console output

<code><pre>
[ERROR]  starting file read
[WARN]   ---- 2. Reader Callback
[ERROR]  1
[WARN]   ---- 2. Reader Callback
[ERROR]  2
[WARN]   ---- 2. Reader Callback
[ERROR]  3
[WARN]   ---- 2. Reader Callback
[ERROR]  4
[WARN]   ---- 2. Reader Callback
[ERROR]  5
[WARN]   ---- 2. Reader Callback
[ERROR]  6
[WARN]   ---- 2. Reader Callback
[ERROR]  7
[WARN]   ---- 2. Reader Callback
[ERROR]  8
[WARN]   ---- 2. Reader Callback
[ERROR]  9
[WARN]   ---- 2. Reader Callback
[WARN]   ---- 2. Reader Callback
[ERROR]  10
[ERROR]  Done!
[WARN]   ++++ 1. After Read
[WARN]   ++++ 1. After Read
[WARN]   ++++ 1. After Read
[WARN]   ++++ 1. After Read
[WARN]   ++++ 1. After Read
[WARN]   ++++ 1. After Read
[WARN]   ++++ 1. After Read
[WARN]   ++++ 1. After Read
[WARN]   ++++ 1. After Read
[WARN]   ++++ 1. After Read
[WARN]   ++++ 1. After Read
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27867_67329/FileStreamAsyncBug.zip">FileStreamAsyncBug.zip</td></td><td>2020-04-09T19:25:36.000+0000</td><td>8663231</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Vijay Singh 2020-04-27

   [~ryan@mvretail.com] Was it working in any previous sdk in iOS ?</li>
<li>Ryan Aston 2020-04-27

   I am not sure.  We did not use this API prior to 8.0.0.</li>
<li>Ryan Aston 2020-06-02

   Any updates on this?</li>
</ol>


<p><a href="/TIMOB/TIMOB-27867.json">JSON Source</a></p>