---
title: "[TIMOB-27930] iOS: iPad crashing intermittently during unit test suite"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-08-11T12:47:30.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 9.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.1.0</td></tr>
<tr><th>Components</th><td>iPad</td></tr>
<tr><th>Labels</th><td>engSchedule</td></tr>
<tr><th>Reporter</th><td>Christopher Williams</td></tr>
<tr><th>Assignee</th><td>Christopher Williams</td></tr>
<tr><th>Created</th><td>2020-06-03T13:31:16.000+0000</td></tr>
<tr><th>Updated</th><td>2020-08-11T12:47:30.000+0000</td></tr>
</table>

<h3>Description</h3>

When the test suite runs on iPad, it tends to crash around the Ti.UI.iOS.WebViewConfiguration tests (not one specific test, though). i.e.

Please see the attached crash logs.

Looks like perhaps TiViewController's underlying _proxy pointer is null?

<code><pre>
[2020-06-03T13:01:33.689Z] [INFO] :   !TEST_START: #createWebViewProcessPool()
[2020-06-03T13:01:33.689Z] [INFO] :   !TEST_END: {"state":"passed","duration":16,"suite":"Titanium.UI.iOS","title":"#createWebViewProcessPool()","message":""}
[2020-06-03T13:01:33.689Z] [INFO] :   !TEST_START: #createWebViewConfiguration()
[2020-06-03T13:01:33.689Z] [INFO] :   !TEST_END: {"state":"passed","duration":0,"suite":"Titanium.UI.iOS","title":"#createWebViewConfiguration()","message":""}
[2020-06-03T13:01:33.689Z] [INFO] :   !TEST_START: allowsPictureInPictureMediaPlayback
[2020-06-03T13:01:33.689Z] [INFO] :   !TEST_END: {"state":"passed","duration":337,"suite":"Titanium.UI.iOS.WebViewConfiguration","title":"allowsPictureInPictureMediaPlayback","message":""}
[2020-06-03T13:01:33.689Z] [INFO] :   !TEST_START: suppressesIncrementalRendering
[2020-06-03T13:01:33.689Z] [INFO] :   !TEST_END: {"state":"passed","duration":6,"suite":"Titanium.UI.iOS.WebViewConfiguration","title":"suppressesIncrementalRendering","message":""}
[2020-06-03T13:01:33.689Z] [INFO] :   !TEST_START: allowsAirPlayMediaPlayback
[2020-06-03T13:01:33.690Z] [INFO] :   !TEST_END: {"state":"passed","duration":5,"suite":"Titanium.UI.iOS.WebViewConfiguration","title":"allowsAirPlayMediaPlayback","message":""}
[2020-06-03T13:01:33.690Z] [INFO] :   !TEST_START: allowsInlineMediaPlayback
[2020-06-03T13:01:33.690Z] [INFO] :   !TEST_END: {"state":"passed","duration":8,"suite":"Titanium.UI.iOS.WebViewConfiguration","title":"allowsInlineMediaPlayback","message":""}
[2020-06-03T13:01:33.690Z] [INFO] :   !TEST_START: selectionGranularity
[2020-06-03T13:01:33.690Z] [INFO] :   !TEST_END: {"state":"passed","duration":4,"suite":"Titanium.UI.iOS.WebViewConfiguration","title":"selectionGranularity","message":""}
[2020-06-03T13:01:33.690Z] [INFO] :   !TEST_START: mediaTypesRequiringUserActionForPlayback
[2020-06-03T13:01:33.690Z] [INFO] :   !TEST_END: {"state":"passed","duration":7,"suite":"Titanium.UI.iOS.WebViewConfiguration","title":"mediaTypesRequiringUserActionForPlayback","message":""}
[2020-06-03T13:01:33.690Z] [INFO] :   !TEST_START: preferences
[2020-06-03T13:01:33.690Z] [INFO] :   !TEST_END: {"state":"passed","duration":7,"suite":"Titanium.UI.iOS.WebViewConfiguration","title":"preferences","message":""}
[2020-06-03T13:01:33.690Z] [INFO] :   !TEST_START: Should pass
[2020-06-03T13:01:33.690Z] [WARN] :   Ti.UI.iOS.NavigationWindow DEPRECATED in 8.0.0, in favor of Ti.UI.NavigationWindow
[2020-06-03T13:01:33.690Z] [WARN] :   3DTouch is not available on this device.
[2020-06-03T13:01:33.690Z] [WARN] :   Ti.UI.iOS.StatusBar.GRAY DEPRECATED in 9.1.0, in favor of Ti.UI.iOS.StatusBar.DEFAULT
[2020-06-03T13:01:33.690Z] [WARN] :   Ti.UI.iOS.StatusBar.GREY DEPRECATED in 9.1.0, in favor of Ti.UI.iOS.StatusBar.DEFAULT
[2020-06-03T13:01:33.690Z] [ERROR] :  Application received error: signal error code: 11
[2020-06-03T13:01:33.690Z] [ERROR] :      (null)
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27930_67421/mocha_2020-06-02-150546_macos-feldman.crash">mocha_2020-06-02-150546_macos-feldman.crash</td></td><td>2020-06-03T13:29:18.000+0000</td><td>195734</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27930_67420/mocha_2020-06-03-060205_slapchop-macos.crash">mocha_2020-06-03-060205_slapchop-macos.crash</td></td><td>2020-06-03T13:29:19.000+0000</td><td>196040</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27930_67422/mocha_2020-06-03-063834_ginsu-macos06.crash">mocha_2020-06-03-063834_ginsu-macos06.crash</td></td><td>2020-06-03T17:51:49.000+0000</td><td>191857</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-27930_67423/mocha_2020-06-03-065153_slapchop-macos.crash">mocha_2020-06-03-065153_slapchop-macos.crash</td></td><td>2020-06-04T12:42:00.000+0000</td><td>195303</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Vijay Singh 2020-06-03

   I run unit test 10+ times on iPad but didn't get any crash. I suspect [Titanium.UI.iPad.Popover](<a href="https://github.com/appcelerator/titanium-mobile-mocha-suite/blob/8cbbda6f03577d4804ba2c917c9d4430c6419fd8/Resources/ti.ui.ipad.popover.test.js#L43)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-mobile-mocha-suite/blob/8cbbda6f03577d4804ba2c917c9d4430c6419fd8/Resources/ti.ui.ipad.popover.test.js#L43)</a> might be the causing the crash. This is only iPad specific test case which is executing.
   [~cwilliams] Can we temporarily stop executing this test case to narrow down the cause of crash?
   
   PR to comment out test case - <a href="https://github.com/appcelerator/titanium-mobile-mocha-suite/pull/262" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium-mobile-mocha-suite/pull/262</a>
   
   Note-  Above PR need to be reverted after deciding.</li>
<li>Christopher Williams 2020-06-04

   I don't know that it's iPad specific anymore. Just saw this crash on iPhone:
   <a href="https://jenkins.appcelerator.org/blue/organizations/jenkins/titanium-sdk%2Ftitanium_mobile/detail/master/1049/artifacts" rel="nofollow" target="_blank">https://jenkins.appcelerator.org/blue/organizations/jenkins/titanium-sdk%2Ftitanium_mobile/detail/master/1049/artifacts</a>
   
   I'll attach that crash log as well - seems to be the same stack trace natively.</li>
<li>Christopher Williams 2020-06-04

   My best guess here is that the <code>Ti.UI.iOS.createPreviewContext()</code> test may be the trigger? I see it registers for the app's top controller a delegate, but never unregisters. But it does deallocate the underlying preview property which is the proxy that the TiViewController is trying to operate on.</li>
<li>Christopher Williams 2020-06-04

   Nevermind, we guard on non-3DTouch, so probably not that. Ti.UI.iOS.NavigationWindow?</li>
<li>Christopher Williams 2020-06-04

   <a href="https://github.com/appcelerator/titanium_mobile/pull/11753" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/11753</a></li>
<li>Samir Mohammed 2020-07-02

   FR Passed: Waiting on Jenkins build.</li>
<li>Christopher Williams 2020-07-06

   merged to master for 9.1.0 target</li>
<li>Samir Mohammed 2020-08-11

   Closing ticket, Test suite is no longer crashing. </li>
</ol>


<p><a href="/TIMOB/TIMOB-27930.json">JSON Source</a></p>