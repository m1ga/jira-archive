---
title: "[TIMOB-28109] iOS: Top section in grouped ListView disappears when tapping SearchBar or on orientation change"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2021-06-17T10:06:52.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 10.0.1</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ListView, grouped, ios, searchbar, section</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2020-09-03T12:44:29.000+0000</td></tr>
<tr><th>Updated</th><td>2021-06-17T10:06:52.000+0000</td></tr>
</table>

<h3>Description</h3>

Since the ListView search bar was moved to the <code>UISearchController</code>, there is a bug that makes the layout of the list section "collapse". This is quite critical for us, because it destroys our layout.

To debug: The following log is displayed in the console, indicating the underlaying issue:
<code><pre>
[DEBUG] Presenting view controllers on detached view controllers is discouraged &lt;TiViewController: 0x7fa06f532c40&gt;.
</pre></code>

Probably also reproducible in common sample apps and test suites that include a list view + search. Sample code to reproduce:
<code><pre>
var win = Ti.UI.createWindow({
    backgroundColor: '#fff'
});

var listView = Ti.UI.createListView({ style: Ti.UI.iOS.ListViewStyle.GROUPED });
listView.sections = [Ti.UI.createListSection({ items: [{ properties: { itemId: 1, height: 43, title: 'Test item 1' } }, { properties: { itemId: 2, height: 43, title: 'Test item 2' } }] })];
listView.searchView = Ti.UI.createSearchBar();

win.add(listView);
win.open();
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-28109_67936/ListViewSearchGroupTest.js">ListViewSearchGroupTest.js</td></td><td>2021-06-10T17:43:19.000+0000</td><td>874</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-28109_67524/Simulator Screen Shot - iPhone 11 Pro - 2020-09-04 at 10.12.45 Kopie.jpg">Simulator Screen Shot - iPhone 11 Pro - 2020-09-04 at 10.12.45 Kopie.jpg</td></td><td>2020-09-04T08:16:35.000+0000</td><td>191863</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Vijay Singh 2020-09-29

   The issue happens with Ti.UI.iOS.ListViewStyle.GROUPED not with Ti.UI.iOS.ListViewStyle.PLAIN</li>
<li>Hans Knöchel 2020-09-29

   Yep thats correct! :) Have you found the root cause already? If you create a sample native project and compare it, you can likely see what's causing it.</li>
<li>Joshua Quick 2021-06-02

   This issue will happen if the app changes orientation too. Looks like a relayout issue.
   
   You can work-around it by setting the first section's "headerTitle" to " " (a string with a space), but it will add a slight amount of height to the top.</li>
<li>Joshua Quick 2021-06-10

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/12879" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/12879</a></li>
<li>Christopher Williams 2021-06-16

   merged to master</li>
<li>Ewan Harris 2021-06-17

   backport merged</li>
</ol>


<p><a href="/TIMOB/TIMOB-28109.json">JSON Source</a></p>