---
title: "[TIMOB-28153] iOS: building for simulator still builds i386 arch"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 9.2.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>CLI, iOS</td></tr>
<tr><th>Labels</th><td>engSchedule</td></tr>
<tr><th>Reporter</th><td>Christopher Williams</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2020-09-24T14:50:46.000+0000</td></tr>
<tr><th>Updated</th><td>2020-10-01T11:10:06.000+0000</td></tr>
</table>

<h3>Description</h3>

When we build for an iOS simulator, generally I think we *have* to be on x86_64 machines now. We do intentionally set <code>ONLY_ACTIVE_ARCH</code> to try and speed up builds from targeting unnecessary architectures, but that value is ignored because we're targeting a "generic" simulator target. So we must use <code>EXCLUDE_ARCHS</code> to avoid targeting i386 and/or arm64.

 We already have some logic to exclude arm64 if we have modules/frameworks that don't support arm64-simulator. But ideally we should just always exclude i386/arm64 when building for sim on an x86_64 machine (and exclude i386/x86_64 when eventually building on an arm64 Apple Silicon machine). Otherwise build times are doubled/tripled unnecessarily.

<h3>Comments</h3>

<ol>
<li>Jan Vennemann 2020-10-01

   [~cwilliams] this is also affected by the iOS deployment target. Currently our minimum deployment targeted is iOS 10, which still supports 32bit devices so the build automatically builds for i386. If you manually set the minimum deployment target to iOS 11 using <code><min-ios-ver>11.0</min-ios-ver></code> in the tiapp.xml it now automatically builds for <code>x86_64</code>.</li>
</ol>


<p><a href="/TIMOB/TIMOB-28153.json">JSON Source</a></p>