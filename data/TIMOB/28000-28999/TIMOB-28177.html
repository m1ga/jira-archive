---
title: "[TIMOB-28177] Android: createTempFile() should create file under Ti.Filesystem.tempDirectory"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2020-11-20T15:14:52.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.3.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, filesystem, parity, tempdirectory</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2020-10-07T19:50:44.000+0000</td></tr>
<tr><th>Updated</th><td>2020-11-20T15:14:52.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
On Android, the [Ti.Filesystem.createTempFile()](<a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/api/Titanium.Filesystem-method-createTempFile) method creates the file under the root <code>Ti.Filesystem.applicationCacheDirectory</code> when it should be created under the <code>Ti.Filesystem.tempDirectory</code> instead like iOS.

*Steps to reproduce:*
<h4>Build and run the below code on Android.</h4>
<h4>In the log, notice <code>nativePath</code> is immediately under the <code>cache</code> folder.</h4>

<code><pre>
var tempFile = Ti.Filesystem.createTempFile();
console.log('@@@ nativePath: ' + tempFile.nativePath);
console.log('@@@ tempDirectory: ' + Ti.Filesystem.tempDirectory);
console.log('@@@ applicationCacheDirectory: ' + Ti.Filesystem.applicationCacheDirectory);
</pre></code>

*Note:*
On Android, the <code>tempDirectory</code> is a subfolder under the <code>applicationCacheDirectory</code>. This is okay since Android does not natively support both of these folders. You are expected to put temp files under the app's sandboxed "cache" folder. However, Titanium should keep temp files under a separate temp subfolder so that we can clean it ourselves on app startup and let the Android OS clean the rest of the cached files when needed.


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2020-10-07

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/12161" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/12161</a></li>
<li>Satyam Sekhri 2020-10-19

   FR Passed.
   Waiting for Jenkins build.</li>
<li>Christopher Williams 2020-10-19

   Merged to master for 9.3.0 target</li>
<li>Samir Mohammed 2020-11-20

   *Closing ticket*. fix verified in SDK version <code>9.3.0.v20201119063936</code>.
   
   Test and other information can be found at:
   <a href="https://github.com/appcelerator/titanium_mobile/pull/12161" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/12161</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-28177.json">JSON Source</a></p>