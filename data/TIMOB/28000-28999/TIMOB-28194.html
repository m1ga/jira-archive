---
title: "[TIMOB-28194] Android: After calling Ti.Media.takePicture() once, it doesn't return a result again"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2021-02-25T21:50:29.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 9.3.0, Release 9.2.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2020-10-14T14:16:57.000+0000</td></tr>
<tr><th>Updated</th><td>2021-02-25T21:50:29.000+0000</td></tr>
</table>

<h3>Description</h3>

Due to TIMOB-28190, we are exploring custom camera overlays to take pictures manually. While that works great on iOS, we noticed the following issue on Android:

We created an overlay that takes a pictures and previews it on-screen. After selecting the "Use" button, it calls <code>Ti.Media.hideCamera()</code> and returns everything correctly. But if we add a "Retake" button that clears the taken image and shows the camera again, calling <code>Ti.Media.takePicture()</code> does not call the "success" event of the <code>Ti.Media.showCamera</code> API again. The issue is likely caused by the "TiCameraActivity" guard <code>takingPicture</code> which probably is not reset correctly. Unfortunately, there is no way to workaround that, since the guard is set natively.

An always-to-reproduce test case can be taken from our app (branch: fix/camera-view)

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2020-10-14

   I assume these are the steps to reproduce?
   <h4>Tap on the "Chat" tab.</h4>
   <h4>Tap on a conversation row.</h4>
   <h4>Tap the "+" button and select "Camera" from dialog.</h4>
   <h4>Tap the "Cancel" button in the camera preview window.</h4>
   <h4>Tap the "+" button and select "Camera" from dialog.</h4>
   <h4>Tap on the capture button.</h4>
   <h4>Notice capture button spins forever. Success callback never invoked.</h4>
   
   I was able to reproduce this in Titanium 9.2.0.
   
   I've also confirmed that Titanium 9.3.0 has already fixed it via the following PR. We've made several other fixes/improvements to the camera overlay activity that you'll probably want.
   <a href="https://github.com/appcelerator/titanium_mobile/pull/12143" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/12143</a>
   </li>
<li>Hans Knöchel 2020-10-14

   Thanks Josh, thats good to hear! We went with removing the photo confirmation to upload the photo immediately, but will add the confirmation step again, once we update to 9.3.0. This can probably be closed then!</li>
</ol>


<p><a href="/TIMOB/TIMOB-28194.json">JSON Source</a></p>