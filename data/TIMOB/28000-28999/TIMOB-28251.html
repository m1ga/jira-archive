---
title: "[TIMOB-28251] Android: Add missing options to Intl.DateTimeFormat.resolvedOptions()"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 9.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 9.3.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>DateTimeFormat, Intl, android, locale, parity, timezone</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2020-11-20T11:18:33.000+0000</td></tr>
<tr><th>Updated</th><td>2021-01-08T14:57:06.000+0000</td></tr>
</table>

<h3>Description</h3>

Compared to iOS, the Android implementation seems to maintain a custom version of <code>Intl</code>, resulting in unexpected API gaps, e.g. for time zones (<code>Intl.DateTimeFormat().resolvedOptions().timeZone</code>). Can it maybe use the one V8 brings already?

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2020-11-20

   We document what is supported on Android and iOS here...
   <a href="https://docs.appcelerator.com/platform/latest/#" rel="nofollow" target="_blank">https://docs.appcelerator.com/platform/latest/#</a>!/api/Global.Intl
   
   The only gaps between Android and iOS that I'm aware of are:
   * Android doesn't support all <code>Collator</code> options like iOS.
   * The <code>DateTimeFormat.resolvedOptions()</code> is admittedly half-assed since there isn't a nice way to "fully" implement it using the standard Java framework. _(But it can be improved.)_
   
   We can add additional features upon request. We don't have a problem with that.
   Adding "timezone" to <code>resolvedOptions()</code> is easy to do.
   
   {quote}Can it maybe use the one V8 brings already?{quote}
   
   That's not a good idea. This would involve including the ICU C++ library which is about 20 MB per architecture. This library is way too big and not mobile friendly. Especially since Google Play has an APK size limit of 100 MB. This is why we've written our own custom implementation... and our competitors do the same for the same reason. _(Google provides ICU Java classes as of Android 7.0, but we're several years away until we can make that our min OS version.)_
   
   We have written extensive unit tests for the <code>Intl</code> API that is used to verify Android's behavior against iOS. This should give you confidence about all of the other APIs.
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/intl.test.js" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/intl.test.js</a>
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/intl.collator.test.js" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/intl.collator.test.js</a>
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/intl.datetimeformat.test.js" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/intl.datetimeformat.test.js</a>
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/intl.numberformat.test.js" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/intl.numberformat.test.js</a>
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/date.test.js" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/date.test.js</a>
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/number.test.js" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/number.test.js</a>
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/string.test.js" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/string.test.js</a>
   
   *Side Note:*
   Apple's JavaScriptCore and Google's V8 don't have full parity when comes to <code>Intl</code> APIs anyways. So, platform specific code has to be implemented regardless.</li>
<li>Hans Knöchel 2020-11-20

   Thanks Josh! For now, I unblocked us by adding <code>DateTime.getDefault().id</code> in our internal native "ti.polyfill" module. It does exactly the job  <code>Intl.DateTimeFormat().resolvedOptions().timeZone</code> does.</li>
<li>Joshua Quick 2020-11-21

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/12282" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/12282</a>
   
   _(Note that "master" is now Titanium 10.0.0.)_</li>
<li>Samir Mohammed 2021-01-07

   FR Passed, waiting on Jenkins build</li>
<li>Christopher Williams 2021-01-07

   merged to master, backport PR for 9_3_X is in progress.</li>
<li>Christopher Williams 2021-01-08

   merged to 9_3_X for 9.3.1 target.</li>
</ol>


<p><a href="/TIMOB/TIMOB-28251.json">JSON Source</a></p>