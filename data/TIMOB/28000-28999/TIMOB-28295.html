---
title: "[TIMOB-28295] Android: Ti.Media.AudioRecorder start() test hangs"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 9.3.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Christopher Williams</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2020-12-18T15:45:54.000+0000</td></tr>
<tr><th>Updated</th><td>2021-01-05T15:54:17.000+0000</td></tr>
</table>

<h3>Description</h3>

The test for Ti.Media.AudioRecorder '#start, #pause, #resume, #stop' intermittently hangs on the Android 5.0.2 (api level 21) emulator on our CI boxes.

<a href="https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/ti.media.audiorecorder.test.js#L27" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/tests/Resources/ti.media.audiorecorder.test.js#L27</a>

Here's the test output in one of the runs that hung there:
<code><pre>
[2020-12-18T15:17:21.482Z] [INFO] :   !TEST_END: {"state":"passed","duration":1,"suite":"Titanium.Media","title":"#createAudioPlayer()","message":""}
[2020-12-18T15:17:21.482Z] [INFO] :   !TEST_START: apiName
[2020-12-18T15:17:21.482Z] [INFO] :   !TEST_END: {"state":"passed","duration":2,"suite":"Titanium.Media.AudioPlayer","title":"apiName","message":""}
[2020-12-18T15:17:21.482Z] [INFO] :   !TEST_START: .url
[2020-12-18T15:17:21.482Z] [INFO] :   !TEST_END: {"state":"passed","duration":1,"suite":"Titanium.Media.AudioPlayer","title":".url","message":""}
[2020-12-18T15:17:21.482Z] [INFO] :   !TEST_START: #start, #stop
[2020-12-18T15:17:21.482Z] [ERROR] :  MediaPlayer: Should have subtitle controller already set
[2020-12-18T15:17:21.482Z] [ERROR] :  MediaPlayer: Should have subtitle controller already set
[2020-12-18T15:17:22.680Z] [INFO] :   !TEST_END: {"state":"passed","duration":1082,"suite":"Titanium.Media.AudioPlayer","title":"#start, #stop","message":""}
[2020-12-18T15:17:22.680Z] [INFO] :   !TEST_START: #pause
[2020-12-18T15:17:22.680Z] [ERROR] :  MediaPlayer: Should have subtitle controller already set
[2020-12-18T15:17:22.680Z] [ERROR] :  MediaPlayer: Should have subtitle controller already set
[2020-12-18T15:17:23.509Z] [INFO] :   !TEST_END: {"state":"passed","duration":1090,"suite":"Titanium.Media.AudioPlayer","title":"#pause","message":""}
[2020-12-18T15:17:23.509Z] [INFO] :   !TEST_START: #restart
[2020-12-18T15:17:23.509Z] [ERROR] :  MediaPlayer: Should have subtitle controller already set
[2020-12-18T15:17:23.509Z] [ERROR] :  MediaPlayer: Should have subtitle controller already set
[2020-12-18T15:17:24.707Z] [ERROR] :  MediaPlayer: Should have subtitle controller already set
[2020-12-18T15:17:24.707Z] [ERROR] :  MediaPlayer: error (-38, 0)
[2020-12-18T15:17:24.707Z] [ERROR] :  MediaPlayer: start called in state 0
[2020-12-18T15:17:24.707Z] [ERROR] :  MediaPlayer: error (-38, 0)
[2020-12-18T15:17:24.707Z] [INFO] :   !TEST_END: {"state":"passed","duration":1127,"suite":"Titanium.Media.AudioPlayer","title":"#restart","message":""}
[2020-12-18T15:17:24.707Z] [ERROR] :  MediaPlayer: Should have subtitle controller already set
[2020-12-18T15:17:24.707Z] [ERROR] :  MediaPlayer: Error (-38,0)
[2020-12-18T15:17:24.707Z] [INFO] :   !TEST_START: .duration
[2020-12-18T15:17:24.707Z] [ERROR] :  MediaPlayer: Should have subtitle controller already set
[2020-12-18T15:17:24.707Z] [ERROR] :  MediaPlayer: Should have subtitle controller already set
[2020-12-18T15:17:25.905Z] [INFO] :   !TEST_END: {"state":"passed","duration":1113,"suite":"Titanium.Media.AudioPlayer","title":".duration","message":""}
[2020-12-18T15:17:25.905Z] [INFO] :   !TEST_START: #createAudioRecorder()
[2020-12-18T15:17:25.905Z] [INFO] :   !TEST_END: {"state":"passed","duration":0,"suite":"Titanium.Media","title":"#createAudioRecorder()","message":""}
[2020-12-18T15:17:25.905Z] [INFO] :   !TEST_START: apiName
[2020-12-18T15:17:25.905Z] [INFO] :   !TEST_END: {"state":"passed","duration":3,"suite":"Titanium.Media.AudioRecorder","title":"apiName","message":""}
[2020-12-18T15:17:25.905Z] [INFO] :   !TEST_START: #start, #pause, #resume, #stop
[2020-12-18T15:17:25.905Z] [INFO] :   AudioRecorder.start()
[2020-12-18T15:45:22.475Z] Sending interrupt signal to process
</pre></code>

<h3>Comments</h3>

<ol>
<li>Christopher Williams 2021-01-05

   This looks highly relevant: <a href="https://stackoverflow.com/questions/9008770/media-player-called-in-state-0-error-38-0" rel="nofollow" target="_blank">https://stackoverflow.com/questions/9008770/media-player-called-in-state-0-error-38-0</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-28295.json">JSON Source</a></p>