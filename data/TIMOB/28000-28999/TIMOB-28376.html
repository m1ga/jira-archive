---
title: "[TIMOB-28376] Android: Update header and footer view activity"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2021-03-11T14:49:10.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 9.3.2, Release 10.1.0, Release 10.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 10.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, crash, fragments, mapview</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2021-03-07T13:05:21.000+0000</td></tr>
<tr><th>Updated</th><td>2021-03-11T14:49:10.000+0000</td></tr>
</table>

<h3>Description</h3>

The following code crashes the app on Android, while it works fine on iOS:
<code><pre>
const window = Ti.UI.createWindow();
const mapView = Ti.UI.createView({ height: 200 });
mapView.add(require('ti.map').createView());

const listView = Ti.UI.createListView({
	headerView: mapView, // This throws the error - works fine on iOS
	sections: [
		Ti.UI.createListSection({
			items: [ { title: 'Test 1' }, { title: 'Test 2' }, { title: 'Test 3' } ]
		})
	]
})

window.add(listView);
window.open();
</pre></code>

The crash / stacktrace is:
<code><pre>
[ERROR] E/com.example.app Invalid ID 0x00000002.
[DEBUG] AndroidRuntime: Shutting down VM
[ERROR] TiExceptionHandler: (main) [1539,1753] No view found for id 0x2 (unknown) for fragment SupportMapFragment{b743c3e} (b6132652-63cc-4547-83f3-18d882add40a) id=0x2}
[ERROR] TiExceptionHandler:
[ERROR] TiExceptionHandler:     androidx.fragment.app.FragmentStateManager.createView(FragmentStateManager.java:315)
[ERROR] TiExceptionHandler:     androidx.fragment.app.FragmentManager.moveToState(FragmentManager.java:1199)
[ERROR] TiExceptionHandler:     androidx.fragment.app.FragmentManager.moveToState(FragmentManager.java:1368)
[ERROR] TiExceptionHandler:     androidx.fragment.app.FragmentManager.moveFragmentToExpectedState(FragmentManager.java:1446)
[ERROR] TiExceptionHandler:     androidx.fragment.app.FragmentManager.moveToState(FragmentManager.java:1509)
[ERROR] TiExceptionHandler:     androidx.fragment.app.BackStackRecord.executeOps(BackStackRecord.java:447)
[ERROR] TiExceptionHandler:     androidx.fragment.app.FragmentManager.executeOps(FragmentManager.java:2181)
[ERROR] TiExceptionHandler:     androidx.fragment.app.FragmentManager.executeOpsTogether(FragmentManager.java:2004)
[ERROR] TiExceptionHandler:     androidx.fragment.app.FragmentManager.removeRedundantOperationsAndExecute(FragmentManager.java:1959)
[ERROR] TiExceptionHandler:     androidx.fragment.app.FragmentManager.execPendingActions(FragmentManager.java:1861)
[ERROR] TiExceptionHandler:     androidx.fragment.app.FragmentManager$4.run(FragmentManager.java:413)
[ERROR] TiExceptionHandler:     android.os.Handler.handleCallback(Handler.java:938)
[ERROR] TiExceptionHandler:     android.os.Handler.dispatchMessage(Handler.java:99)
[ERROR] TiExceptionHandler:     android.os.Looper.loop(Looper.java:223)
[ERROR] TiExceptionHandler:     android.app.ActivityThread.main(ActivityThread.java:7656)
[ERROR] TiExceptionHandler:     java.lang.reflect.Method.invoke(Native Method)
[ERROR] TiExceptionHandler:     com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)
[ERROR] TiExceptionHandler:     com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)
</pre></code>

It's a blocker we currently cannot workaround, so it'd be great to have some feedback on it - maybe then we can fix it ourselves. Thank you!

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-28376_67840/ListViewHeaderViewTest.js">ListViewHeaderViewTest.js</td></td><td>2021-03-09T23:47:32.000+0000</td><td>768</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-28376_67839/TableViewHeaderLabelTest.js">TableViewHeaderLabelTest.js</td></td><td>2021-03-09T23:46:48.000+0000</td><td>845</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Hans Knöchel 2021-03-07

   PR (by Sergey): <a href="https://github.com/appcelerator/titanium_mobile/pull/12524" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/12524</a> </li>
<li>Joshua Quick 2021-03-09

   This bug also prevented the headerView/footerView from updating after a dark/light theme change. So, we'll need this fixed for 10.0.0 since that SDK version adds official dark/light theme support. Thanks for bringing this up [~hknoechel]!</li>
<li>Samir Mohammed 2021-03-10

   FR Passed, waiting on Jenkins build and backports. </li>
<li>Christopher Williams 2021-03-11

   Squash merged to master, manually cherry-picked to 10_0_X for 10.0.0 target</li>
</ol>


<p><a href="/TIMOB/TIMOB-28376.json">JSON Source</a></p>