---
title: "[TIMOB-28377] Android: Remove deprecated usage of "ndk.dir" in "local.properties" file"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2021-06-22T15:30:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 9.3.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 10.0.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, build, ndk</td></tr>
<tr><th>Reporter</th><td>Hans Kn√∂chel</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2021-03-07T21:45:14.000+0000</td></tr>
<tr><th>Updated</th><td>2021-06-22T15:30:58.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
As of Titanium 9.3.0, the following deprecation warning will be logged when build an Android app, module, or the Titanium SDK.
<code><pre>
> Configure project :titanium
WARNING: NDK was located by using ndk.dir property. This method is deprecated and will be removed in a future release. Please delete ndk.dir from local.properties and set android.ndkVersion to [21.3.6528147] in all native modules in the project. <a href="https://developer.android.com/r/studio-ui/ndk-dir" rel="nofollow" target="_blank">https://developer.android.com/r/studio-ui/ndk-dir</a>
NDK was located by using ndk.dir property. This method is deprecated and will be removed in a future release. Please delete ndk.dir from local.properties and set android.ndkVersion to [21.3.6528147] in all native modules in the project. <a href="https://developer.android.com/r/studio-ui/ndk-dir" rel="nofollow" target="_blank">https://developer.android.com/r/studio-ui/ndk-dir</a>
</pre></code>

*Reason:*
Google has deprecated the "nki.dir" property in the "local.properties" file generated by Titanium.

*Solution:*
To be done on our end...
* Remove our usage of the "ndk.dir" property.
* Drop support of "ANDROID_NDK" environment variable for setting the NDK path.
* Drop support of <code>appc ti config</code> setting <code>android.ndkPath</code>.
* Do *NOT* set "build.gradle" setting "android.ndkVersion" in our template and use gradle's default NDK version.

Allow app/module developer to override NDK version used via a custom "build.gradle" file as shown below.
<code><pre>
// build.gradle
android {
	ndkVersion '21.2.6472646'
}
</pre></code>


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2021-03-08

   We're already aware of this. Unfortunately, it's not that simple which is why we haven't done anything about it "yet". Gradle won't automatically download the NDK version we specify if a different NDK version is installed (unlike how everything else works). Gradle will only download the NDK it if you have no NDK installed at all. It's an ugly problem.</li>
<li>Joshua Quick 2021-04-10

   I've confirmed that the newest Android gradle build tool now supports downloading/installing an NDK version if a different NDK version is already installed... unless the NDK you want is a major version higher than the default version gradle wants to use (ie: won't currently download NDK 22.x.x since current gradle version defaults to NDK 21.x.x). But this is a lot better than what it was before since it allows downloading older NDK versions upon request.</li>
<li>Joshua Quick 2021-04-10

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/12711" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/12711</a></li>
<li>Ewan Harris 2021-06-22

   master and 10_0_X backport merged</li>
</ol>


<p><a href="/TIMOB/TIMOB-28377.json">JSON Source</a></p>