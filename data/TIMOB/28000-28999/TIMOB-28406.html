---
title: "[TIMOB-28406] ListView on a modal with a transparent background is invisible"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2021-04-08T22:43:55.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 9.3.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 10.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, regression</td></tr>
<tr><th>Reporter</th><td>Jórdan Luiz Bisato</td></tr>
<tr><th>Assignee</th><td>Gary Mathews</td></tr>
<tr><th>Created</th><td>2021-03-19T20:26:01.000+0000</td></tr>
<tr><th>Updated</th><td>2021-04-09T13:34:46.000+0000</td></tr>
</table>

<h3>Description</h3>

Hi all, i found a bug on Android when insert a ListView on a window modal with a transparent background. 
If i use SDK 9.2.1- it works fine, but using 9.3.0+ ListView disappears from the modal. 

XML:


<code><pre>
&lt;Alloy&gt;
  &lt;Collection src="defaultRow" id="defaultRow" instance="true" /&gt;
  &lt;Window id="win" onClick="exit"&gt;
    &lt;View id="container"&gt;
      &lt;View id="vSearch" top="5" bubbleParent="false"&gt;
        &lt;TextField id="txtSearch" onChange="search"&gt;&lt;/TextField&gt;
      &lt;/View&gt;

      &lt;ListView id="list" defaultItemTemplate="defaultItem" separatorColor="transparent" onItemclick="lvClick" top="5" disableBounce="true" backgroundColor="#b3b3b3" bubbleParent="false"&gt;
        &lt;SearchBar id="searchBar"/&gt;
        &lt;Templates&gt;
          &lt;ItemTemplate name="defaultItem" backgroundColor="transparent"&gt;
            &lt;View width="Ti.UI.FILL" heighth="Ti.UI.SIZE" backgroundColor="white" bottom="1"&gt;
              &lt;Label bindId="texto" class="lblItem"&gt;&lt;/Label&gt;
            &lt;/View&gt;
          &lt;/ItemTemplate&gt;
        &lt;/Templates&gt;

        &lt;ListSection dataCollection="$.defaultRow"&gt;
          &lt;ListItem
            texto:text="{texto}"
            searchableText="{texto}"

            cod="{id}"
            desc="{descricao}"
            sigla="{sigla}"
            /&gt;
        &lt;/ListSection&gt;
      &lt;/ListView&gt;
    &lt;/View&gt;

  &lt;/Window&gt;
&lt;/Alloy&gt;
</pre></code>

TSS: 


<code><pre>

'#win': {
  height: Ti.UI.FILL,
  width: Ti.UI.FILL,
  backgroundColor: "#80000000",
}

"#win[platform=android]": {
  activityExitTransition: Ti.UI.Android.TRANSITION_FADE_OUT,
  theme: "Theme.Modal",
  modal: true,
  navBarHidden: true
}

'#list': {
  width: Ti.UI.FILL,
  height: Ti.UI.FILL,
  /* backgroundColor: "#F2F2F2", */
  borderRadius: 6,
  accessoryType: Ti.UI.LIST_ACCESSORY_TYPE_NONE,
  opacity: 1
}

'#container': {
  width: "90%",
  height: "70%",
  layout: 'vertical',
  backgroundColor: "white",
  borderRadius: 8
}

'#imgSearch': {
  right: 5,
  top: 5,
  bottom: 5,
  width: Ti.UI.SIZE,
  height: Ti.UI.SIZE
}

'#vSearch': {
  height: 40,
  width: Ti.UI.FILL,
  left: 5,
  right: 5,
  borderWidth: 1,
  borderRadius: 10,
  borderColor: "gray"
}

'#txtSearch': {
  font: {
    fontSize: 14,
    fontWeight: "normal"
  },
  color: "black",
  hintText: "Pesquisar...",
  width: Ti.UI.FILL,
  right: 40,
  left: 5,
  backgroundColor: "transparent"
}

'#searchBar': {
  height: 0,
  width: 0,
  hiddenBehavior: Ti.UI.HIDDEN_BEHAVIOR_GONE,
  visible: false
}

'.lblItem': {
  font: {
    fontSize: 15,
    fontWeight: "normal"
  },
  color: "black",
  textAlign: Ti.UI.TEXT_ALIGNMENT_LEFT,
  left: 10,
  right: 5,
  width: Ti.UI.SIZE,
  height: Ti.UI.SIZE,
  top: 7,
  bottom: 7
}
</pre></code>

JS: 


<code><pre>
var args = $.args;

$.defaultRow.add(
  [
    {
      "id": 888,
      "texto": "ADMINISTRADOR"
    },
    {
      "id": 555,
      "texto": "ADVOGADO"
    },
    {
      "id": 111,
      "texto": "ADVOGADO"
    },
    {
      "id": 222,
      "texto": "AGENCIADOR DE PROPAGANDA"
    },
    {
      "id": 333,
      "texto": "AGENTE ADMINISTRATIVO"
    }
  ]
)

$.win.addEventListener("postlayout", poslay);

function poslay(e) {
  $.txtSearch.focus();
  $.win.removeEventListener("postlayout", poslay);
}

function lvClick(e){
  var item = e.section.getItemAt(e.itemIndex);
}

function search(e){
  $.searchBar.value = $.txtSearch.value;
}

$.win.addEventListener("androidback", function(e) {
  $.win.close();
});

function exit(e){
  $.win.close();
}

</pre></code>




<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-28406_67850/SDK-9.2.1-.jpg">SDK-9.2.1-.jpg</td></td><td>2021-03-19T19:57:30.000+0000</td><td>107643</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-28406_67849/SDK-9.3.0+.jpg">SDK-9.3.0+.jpg</td></td><td>2021-03-19T19:57:30.000+0000</td><td>67831</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Gary Mathews 2021-03-24

   I'm unable to reproduce this on <code>master</code> and <code>10_0_X</code>
   
   <code><pre>
   const win = Ti.UI.createWindow({
   	backgroundColor: '#80000000',
   	modal: true
   });
   const container = Ti.UI.createView({
   	backgroundColor: 'white',
   	width: '90%',
   	height: '70%',
   	borderRadius: 8
   });
   const sections = [];
   
   for (let i = 0; i &lt; 3; i++) {
   	const items = [];
   
   	for (let x = 0; x &lt; 5; x++) {
   		items.push({
   			label: { text: <code>Item #${x}</code> }
   		});
   	}
   
   	sections.push(Ti.UI.createListSection({
   		headerTitle: <code>Section #${i}</code>,
   		items
   	}));
   }
   const listView = Ti.UI.createListView({
   	templates: {
   		template: {
   			properties: {
   				backgroundColor: 'transparent'
   			},
   			childTemplates: [
   				{
   					type: 'Ti.UI.Label',
   					bindId: 'label',
   					properties: {
   						left: 10,
   						color: 'black'
   					}
   				}
   			]
   		}
   	},
   	defaultItemTemplate: 'template',
   	sections
   });
   
   container.add(listView);
   win.add(container);
   win.open();
   </pre></code></li>
<li>Jórdan Luiz Bisato 2021-03-25

   Hi, i tested it again with your code and my. 
   I noted that the problem occours just when the ListView have a Searchbar enabled and a borderRadius seted. 
   
   Try again with this code: 
   
   
   <code><pre>
   const win = Ti.UI.createWindow({
   	backgroundColor: '#80000000',
   	modal: true
   });
   const container = Ti.UI.createView({
   	backgroundColor: 'white',
   	width: '90%',
   	height: '70%',
   	borderRadius: 8
   });
   
   var searchBar = Titanium.UI.createSearchBar({
   	height: 30,
     width: Ti.UI.FILL,
   });
   
   const sections = [];
   
   for (let i = 0; i &lt; 3; i++) {
   	const items = [];
   
   	for (let x = 0; x &lt; 5; x++) {
   		items.push({
   			label: { text: <code>Item #${x}</code> }
   		});
   	}
   
   	sections.push(Ti.UI.createListSection({
   		headerTitle: <code>Section #${i}</code>,
   		items
   	}));
   }
   const listView = Ti.UI.createListView({
   	templates: {
   		template: {
   			properties: {
   				backgroundColor: 'transparent'
   			},
   			childTemplates: [
   				{
   					type: 'Ti.UI.Label',
   					bindId: 'label',
   					properties: {
   						left: 10,
   						color: 'black'
   					}
   				}
   			]
   		}
   	},
   	backgroundColor:"#b3b3b3",
   	defaultItemTemplate: 'template',
     borderRadius: 6,
   	searchView: searchBar,
   	sections
   });
   
   container.add(listView);
   win.add(container);
   win.open();
   
   </pre></code>
   </li>
<li>Gary Mathews 2021-03-31

   master: <a href="https://github.com/appcelerator/titanium_mobile/pull/12678" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/12678</a></li>
<li>Christopher Williams 2021-04-09

   merged to master and 10_0_X branches for 10.0.0 target</li>
</ol>


<p><a href="/TIMOB/TIMOB-28406.json">JSON Source</a></p>