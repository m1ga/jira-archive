---
title: "[TIMOB-28434] Android: Toolbar "items" do not update when changing dark/light theme"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2021-05-24T15:00:44.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 10.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 10.0.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, material-theme, toolbar</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2021-05-01T03:04:12.000+0000</td></tr>
<tr><th>Updated</th><td>2021-05-24T15:00:44.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
Child views added to <code>Ti.UI.Toolbar</code> via its "items" property will not update themselves when changing the dark/light theme on Android.

*Steps to reproduce:*
<h4>Build and run the below code on Android 10 or higher.</h4>
<h4>Tap on the "Home" button after app launches. _(Do NOT back out.)_</h4>
<h4>Go to the Android system Settings -> Display screen.</h4>
<h4>Toggle the dark/light theme switch.</h4>
<h4>Resume the app.</h4>
<h4>Notice app UI changed colors *except* for the button text color in toolbar.</h4>
<h4>Back out of the app and then relaunch it.</h4>
<h4>Notice the button text color in the toolbar uses the correct color.</h4>

<code><pre>
function createButton(name) {
	const button = Ti.UI.createButton({
		title: name,
		style: Ti.UI.BUTTON_STYLE_OPTION_NEUTRAL,
	});
	button.addEventListener("click", function() {
		alert(name + " was clicked on.");
	});
	return button;
}

const window = Ti.UI.createWindow();
const toolbar = Ti.UI.createToolbar({
	items: [
		createButton("Button 1"),
		createButton("Button 2"),
		createButton("Button 3")
	],
	elevation: 2,
	top: 0,
	width: Ti.UI.FILL,
});
window.add(toolbar);
window.open();
</pre></code>

*Result:*
Notice the toolbar button text colors did not change when switching themes.
 !Toolbar-Light.png|thumbnail!  !Toolbar-Dark-Bad.png|thumbnail! 

*Expected Result:*
The button text color should be light blue when using the dark theme.
 !Toolbar-Dark-Good.png|thumbnail! 

*Notes:*
<h4>This is only an issue when changing theme dynamically. Backing out of the app/window and then relaunching it will show the correct colors.</h4>
<h4>This doesn't appear to be an issue in Alloy when adding child views to toolbar via XML. I've tested for this in our kitchensink-v2 app and it works fine.</h4>

*Work-Around:*
Add child views to <code>Ti.UI.Toolbar</code> via its <code>add()</code> method instead of the "items" property. However, adding views like this on iOS will have layout issues making this an Android-only solution.

<code><pre>
const toolbar = Ti.UI.createToolbar({
	elevation: 2,
	top: 0,
	width: Ti.UI.FILL,
});
toolbar.add(createButton("Button 1"));
toolbar.add(createButton("Button 2"));
toolbar.add(createButton("Button 3"));
</pre></code>


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-28434_67920/Toolbar-Dark-Bad.png">Toolbar-Dark-Bad.png</td></td><td>2021-05-01T02:59:46.000+0000</td><td>409639</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-28434_67921/Toolbar-Dark-Good.png">Toolbar-Dark-Good.png</td></td><td>2021-05-01T02:59:46.000+0000</td><td>410051</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-28434_67919/Toolbar-Light.png">Toolbar-Light.png</td></td><td>2021-05-01T02:59:46.000+0000</td><td>412896</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2021-05-03

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/12765" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/12765</a></li>
<li>Christopher Williams 2021-05-24

   merged to master and 10_0_X branch for 10.0.1 target</li>
</ol>


<p><a href="/TIMOB/TIMOB-28434.json">JSON Source</a></p>