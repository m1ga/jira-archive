---
title: "[TIMOB-28484] iOS: NavigationWindow opening a child with a ListView and SearchBar crashes on iOS 12"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ListView, NavigationWindow, SearchBar, iOS</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2021-06-09T02:15:49.000+0000</td></tr>
<tr><th>Updated</th><td>2021-06-09T02:16:10.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
On iOS 12, if a <code>NavigationWindow</code> opens a child window containing a <code>ListView</code> with a <code>SearchBar</code> attached will cause the app to crash. If the <code>ListView</code> does not a <code>SearchBar</code>, then the child window opens without issue.

*Steps to reproduce:*
<h4>Build and run  [^NavWindowListViewTest.js] on iOS 12.</h4>
<h4>Tap on one of the rows.</h4>
<h4>Noticed the app crashes when opening the child window.</h4>

*Result:*
<code><pre>
[INFO]  *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Only one palette with a top boundary edge can be active outside of a transition. Current active palette is &lt;_UINavigationControllerManagedSearchPalette: 0x7fd051717e70; frame = (0 116; 414 0); layer = &lt;CALayer: 0x6000011385a0&gt;&gt;'
[INFO]  *** First throw call stack:
[INFO]  (
[INFO]          0   CoreFoundation                      0x000000010ef968db __exceptionPreprocess + 331
[INFO]          1   libobjc.A.dylib                     0x000000010e31fac5 objc_exception_throw + 48
[INFO]          2   CoreFoundation                      0x000000010ef96735 +[NSException raise:format:] + 197
[INFO]          3   UIKitCore                           0x000000011a2c6318 -[UINavigationController(_UIPalette) attachPalette:isPinned:] + 516
[INFO]          4   UIKitCore                           0x000000011a2a2e72 -[UINavigationController _createAndAttachSearchPaletteForTopViewControllerIfNecessary:] + 584
[INFO]          5   UIKitCore                           0x000000011a2c0169 -[UINavigationController _navigationItemDidUpdateSearchController:oldSearchController:] + 419
[INFO]          6   UIKitCore                           0x000000011a1465a8 -[_UINavigationBarVisualProviderModernIOS navigationItemUpdatedSearchController:oldSearchController:animated:] + 160
[INFO]          7   UIKitCore                           0x000000011a0ff8bd -[UINavigationItem setSearchController:] + 135
[INFO]          8   ClassicAppTest                      0x00000001087df202 -[TiUIListView viewGetFocus] + 482
[INFO]          9   ClassicAppTest                      0x0000000108819e04 -[TiUIListViewProxy gainFocus] + 52
[INFO]          10  TitaniumKit                         0x000000010e22bd74 -[TiWindowProxy gainFocus] + 339
[INFO]          11  ClassicAppTest                      0x000000010891f7a5 -[TiUINavigationWindowProxy navigationController:didShowViewController:animated:] + 501
[INFO]          12  UIKitCore                           0x000000011a2ade50 -[UINavigationController navigationTransitionView:didEndTransition:fromView:toView:] + 1599
[INFO]          13  UIKitCore                           0x000000011a2a21b2 __49-[UINavigationController _startCustomTransition:]_block_invoke + 241
[INFO]          14  UIKitCore                           0x000000011a37d698 -[_UIViewControllerTransitionContext completeTransition:] + 102
[INFO]          15  UIKitCore                           0x000000011a38f342 __53-[_UINavigationParallaxTransition animateTransition:]_block_invoke.118 + 877
[INFO]          16  UIKitCore                           0x000000011ae273e3 -[UIViewAnimationBlockDelegate _didEndBlockAnimation:finished:context:] + 847
[INFO]          17  UIKitCore                           0x000000011adfae47 -[UIViewAnimationState sendDelegateAnimationDidStop:finished:] + 343
[INFO]          18  UIKitCore                           0x000000011adfb469 -[UIViewAnimationState animationDidStop:finished:] + 293
[INFO]          19  UIKitCore                           0x000000011adfb51d -[UIViewAnimationState animationDidStop:finished:] + 473
[INFO]          20  QuartzCore                          0x000000010ccdcc5b _ZN2CA5Layer23run_animation_callbacksEPv + 321
[INFO]          21  libdispatch.dylib                   0x0000000111e8dd02 _dispatch_client_callout + 8
[INFO]          22  libdispatch.dylib                   0x0000000111e99a50 _dispatch_main_queue_callback_4CF + 1276
[INFO]          23  CoreFoundation                      0x000000010eefda79 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__ + 9
[INFO]          24  CoreFoundation                      0x000000010eef8126 __CFRunLoopRun + 2310
[INFO]          25  CoreFoundation                      0x000000010eef74d2 CFRunLoopRunSpecific + 626
[INFO]          26  GraphicsServices                    0x00000001138552fe GSEventRunModal + 65
[INFO]          27  UIKitCore                           0x000000011a954fc2 UIApplicationMain + 140
[INFO]          28  ClassicAppTest                      0x0000000108758ce2 main + 1170
[INFO]          29  libdyld.dylib                       0x0000000111efb541 start + 1
[INFO]  )
[INFO]  libc++abi.dylib: terminating with uncaught exception of type NSException
</pre></code>

*Note 1:*
This issue was discovered when testing [TIMOB-28428] with it's attached test project.

*Note 2:*
Does not crash on iOS 14. (Have not tested it on iOS 13.)


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-28484_67933/NavWindowListViewTest.js">NavWindowListViewTest.js</td></td><td>2021-06-09T02:12:52.000+0000</td><td>1069</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-28484.json">JSON Source</a></p>