---
title: "[TIMOB-28491] iOS: Setter not called properly anymore"
---
<table>
<tr><th>Type</th><td>Improvement</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2021-06-22T15:30:32.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 10.0.1</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Hans Knöchel</td></tr>
<tr><th>Assignee</th><td>Jan Vennemann</td></tr>
<tr><th>Created</th><td>2021-06-12T16:01:16.000+0000</td></tr>
<tr><th>Updated</th><td>2021-06-22T15:30:32.000+0000</td></tr>
</table>

<h3>Description</h3>

It seems like the iOS setters in modules are not called correctly anymore. I remember I brought this up a few months ago, but it actually seems like it made it into the 10.0.0.GA as well, breaking basically all modules that have properties like this (ti.facebook example):

<code><pre>
- (void)setPermissions:(NSArray<NSString *> *_Nullable)permissions
{
  _permissions = permissions;
}
</pre></code>

The setter is only triggered if called via <code>facebook.setPermissions(['email])</code>, the prior (and better) way, <code>facebook.permissions = ['email']</code> does not work anymore, so Facebooks logins don't include the permission anymore and therefore fail.


<h3>Comments</h3>

<ol>
<li>Ewan Harris 2021-06-15

   [~hknoechel], I'm trying to see if there's some context from the previous ticket but I can't seem to find it (closest I could find is TIMOB-28415)
   
   [~cwilliams], [~jvennemann], I'm not familiar with this. Is it this an unfortunate consequence of the automatic setters removal where we're no longer generating the property here? Is there some form of compatibility we could add to handle this?</li>
<li>Hans Knöchel 2021-06-15

   I mean, the setters are fine to be removed. But I was not sure why it can't even be accessed via the set-property anymore. Titanium always used the "setXXX" in native code to handle both setter and set-properties, so maybe a bit too much was removed. On the other hand, it seems like the SDK itself is not affected by this.</li>
<li>Christopher Williams 2021-06-16

   Long story short, when I tried to unify the underlying require implementations between iOS/Android, this bug came about. Native modules got wrapped in a "wrapper" object that forwarded method invocations. This is necessary for shuttling around "scope variables" to Android proxies - primary the <code>sourceURL</code> used to resolve relative paths (relative to the proxy creation file). Looks like this wrapper object is unnecessary for iOS and inadvertently causes this bug. I believe [~jvennemann] is going to basically just skip the wrapping on iOS.</li>
<li>Jan Vennemann 2021-06-16

   Thanks for the explanation [~cwilliams]. Yep, that's basically what i did ;)
   
   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/12900" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/12900</a></li>
<li>Ewan Harris 2021-06-22

   master and 10_0_X backport merged</li>
</ol>


<p><a href="/TIMOB/TIMOB-28491.json">JSON Source</a></p>