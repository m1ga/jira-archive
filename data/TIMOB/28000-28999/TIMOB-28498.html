---
title: "[TIMOB-28498] iOS: Hang between sim selection and launch or app install when building to iOS 15 simulator"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>None</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2021-06-28T16:28:41.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 10.1.0, Release 10.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 10.1.0</td></tr>
<tr><th>Components</th><td>CLI, iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Ewan Harris</td></tr>
<tr><th>Assignee</th><td>Ewan Harris</td></tr>
<tr><th>Created</th><td>2021-06-28T13:48:44.000+0000</td></tr>
<tr><th>Updated</th><td>2021-09-10T10:56:11.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Description </h4>

When building to an iOS 15 simulator there is a hang occuring between the simulator selection and the simulator launching/app installing. This is because of [this code](<a href="https://github.com/appcelerator/ioslib/blob/1_7_X/lib/simulator.js#L919-L935)" rel="nofollow" target="_blank">https://github.com/appcelerator/ioslib/blob/1_7_X/lib/simulator.js#L919-L935)</a> in ioslib that will walk the reported <code>dataDir</code> property for a simulator, this directory contains symlinks which is causing the CLI to get caught in an infinite loop, we should either not walk the entire directory or not follow symlinks


<h4>Steps to reproduce</h4>

1. Build to an iOS sim using Xcode 13 beta 2

<h4>Actual</h4>

Build process hangs

<h4>Expected</h4>

Build process should not hang

<h3>Comments</h3>

<ol>
<li>Ewan Harris 2021-06-28

   Changing the code to no longer follow symlinks makes this no longer occur and happen in a similar time to the existing sim search to app launch when using Xcode 12. I do wonder if we could just not do all that work in the first place though</li>
<li>Ewan Harris 2021-06-28

   Edited description to correct the assertion that Xcode 12/Xcode 13 return different values, they return the same value. It just appears that that directory now contains symlinks which cause the CLI to get stuck in an infinite loop, the  iOS 15 directory contains about 3k more files (11,600 vs 8,700) and is around 2GB larger (3.7GB vs 1.6GB) although that probably differs on a machine/usage basis</li>
<li>Ewan Harris 2021-06-28

   ioslib PR: <a href="https://github.com/appcelerator/ioslib/pull/210" rel="nofollow" target="_blank">https://github.com/appcelerator/ioslib/pull/210</a>
   ioslib PR 2, because I liked it so much: <a href="https://github.com/appcelerator/ioslib/pull/211" rel="nofollow" target="_blank">https://github.com/appcelerator/ioslib/pull/211</a></li>
<li>Ewan Harris 2021-06-28

   master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/12873" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/12873</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-28498.json">JSON Source</a></p>