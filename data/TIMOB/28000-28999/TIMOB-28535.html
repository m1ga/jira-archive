---
title: "[TIMOB-28535] Android: Blob fails to read WebP image file info"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2021-10-20T03:37:25.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 10.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, blob, mimetype, webp</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2021-09-15T21:09:30.000+0000</td></tr>
<tr><th>Updated</th><td>2021-10-20T03:37:25.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
When loading a WebP image via a Titanium <code>Blob</code>, the following <code>Blob</code> APIs fail to read WebP information.
* <code>width</code>, <code>height</code>, <code>uprightWidth</code>, <code>uprightHeight</code>: Wrongly returns zero.
* <code>mimeType</code>: Wrongly returns "audio/x-wav"
* <code>imageAs*()</code> and <code>imageWith*()</code> methods: Always return null.

*Note:*
An <code>ImageView</code> can display a blob's WebP image just fine. This is just an issue with how a <code>Blob</code> fetches the image's information which may be needed to size/position an image view correctly.

*Steps to reproduce:*
<h4>Copy attached "TiLogoOpaque.webp" to project folder <code>Resources/assets/images</code></h4>
<h4>Build and run the below code on Android.</h4>
<h4>Notice image fails to display. (This is because <code>imageAsThumbnail()</code> returned null.)</h4>
<h4>Notice displayed "Image Size" wrongly reads: <code>0x0</code></h4>
<h4>Notice displayed "MimeType" wrongly reads: <code>audio/x-wav</code></h4>

<code><pre>
const file = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, "assets/images/TiLogoOpaque.webp");
const blob = file.read();

const window = Ti.UI.createWindow();
window.add(Ti.UI.createImageView({
	image: blob.imageAsThumbnail(320, 1, 64),
}));
window.add(Ti.UI.createLabel({
	text: <code>Image Size: ${blob.uprightWidth}x${blob.uprightHeight}\nMime-Type: ${blob.mimeType}</code>,
	backgroundColor: OS_IOS ? "white" : "?android:attr/colorBackground",
	bottom: "30dp",
}));
window.open();
</pre></code>


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-28535_67982/TiLogoOpaque.webp">TiLogoOpaque.webp</td></td><td>2021-09-15T21:03:03.000+0000</td><td>54960</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2021-09-15

   PR (titanium_mobile): <a href="https://github.com/appcelerator/titanium_mobile/pull/13069" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/13069</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-28535.json">JSON Source</a></p>