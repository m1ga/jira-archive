---
title: "[TIMOB-28555] Android: Moving a TableView row into an empty section or header/footer causes a crashes"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2021-10-20T03:13:12.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 9.3.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 10.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>TableView, android, editing, move, parity</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2021-10-14T01:20:47.000+0000</td></tr>
<tr><th>Updated</th><td>2021-10-20T03:13:12.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
Moving a <code>TableView</code> row via edit mode into an empty section or a header/footer title will cause a crash.

*Steps to reproduce:*
<h4>Build and run the below on Android.</h4>
<h4>Tap and hold "Row 1".</h4>
<h4>Drag it into "Section 1".</h4>
<h4>Notice the app crashes.</h4>

<code><pre>
const window = Ti.UI.createWindow();
const tableView = Ti.UI.createTableView({
	data: [
		Ti.UI.createTableViewSection({ headerTitle: "Section 1" }),
		Ti.UI.createTableViewSection({ headerTitle: "Section 2" }),
	],
	allowsSelectionDuringEditing: false,
	allowsMultipleSelectionDuringEditing: false,
	editing: true,
	headerTitle: "Header Title",
	footerTitle: "Footer Title",
});
tableView.sections[1].add(Ti.UI.createTableViewRow({ title: "Row 1", editable: false, moveable: true }));
tableView.addEventListener("move", (e) =&gt; {
	const data = {
		sectionTitle: e.section.headerTitle,
		rowTitle: e.row.title,
		index: e.index,
	};
	console.log(<code>@@@ "move" event: ${JSON.stringify(data)}</code>);
});
window.add(tableView);
window.open();
</pre></code>

*Result:*
App immediately crashes with the following exception when dragged into an empty section. You don't have to release your finger (ie: drop) for the crash to occur.
<code><pre>
[ERROR] InputEventReceiver: Exception dispatching input event.
[ERROR] TiExceptionHandler: (main) [517745,517850] Index: -1, Size: 0
[ERROR] TiExceptionHandler:
[ERROR] TiExceptionHandler:     java.util.ArrayList.add(ArrayList.java:483)
[ERROR] TiExceptionHandler:     ti.modules.titanium.ui.TableViewSectionProxy.add(TableViewSectionProxy.java:59)
[ERROR] TiExceptionHandler:     ti.modules.titanium.ui.TableViewProxy.moveItem(TableViewProxy.java:264)
[ERROR] TiExceptionHandler:     ti.modules.titanium.ui.widget.listview.ItemTouchHandler.onMove(ItemTouchHandler.java:281)
[ERROR] TiExceptionHandler:     androidx.recyclerview.widget.ItemTouchHelper.moveIfNecessary(ItemTouchHelper.java:885)
[ERROR] TiExceptionHandler:     androidx.recyclerview.widget.ItemTouchHelper$2.onTouchEvent(ItemTouchHelper.java:389)
[ERROR] TiExceptionHandler:     androidx.recyclerview.widget.RecyclerView.dispatchToOnItemTouchListeners(RecyclerView.java:3259)
[ERROR] TiExceptionHandler:     androidx.recyclerview.widget.RecyclerView.onTouchEvent(RecyclerView.java:3421)
[ERROR] TiExceptionHandler:     android.view.View.dispatchTouchEvent(View.java:14309)
[ERROR] TiExceptionHandler:     android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:3112)
[ERROR] TiExceptionHandler:     android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2785)
[ERROR] TiExceptionHandler:     ti.modules.titanium.ui.widget.listview.TiNestedRecyclerView.dispatchTouchEvent(TiNestedRecyclerView.java:109)
[ERROR] TiExceptionHandler:     android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:3118)
</pre></code>


<h3>Comments</h3>

<ol>
<li>Joshua Quick 2021-10-14

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/13120" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/13120</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-28555.json">JSON Source</a></p>