---
title: "[TIMOB-28573] Android: Complex items added to ListView after window open can cause scroll performance issues as of 9.3.0"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2021-11-03T01:04:49.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 9.3.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 10.1.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>ListView, android, performance, regression</td></tr>
<tr><th>Reporter</th><td>Joshua Quick</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2021-11-02T23:25:23.000+0000</td></tr>
<tr><th>Updated</th><td>2021-11-17T10:58:55.000+0000</td></tr>
</table>

<h3>Description</h3>

*Summary:*
As of Titanium 9.3.0, list items added to a <code>ListView</code> after the window has opened can cause a huge scroll performance issue. This is only noticeable if the list item templates contain a lot of child views, such as 16 or more. This is not an issue if items are added before the window has opened.

*Note:*
This is an issue with <code>TableView</code> as well.

*Steps to reproduce:*
<h4>Build and run  [^ListViewTemplateManyViewsTest.js] on Android.</h4>
<h4>Fling the <code>ListView</code> down.</h4>
<h4>Notice how bad the scrolling stutters.</h4>

*Cause:*
All Titanium proxy objects are assigned the root activity by default, which is the splash screen window.
<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/titanium/src/java/org/appcelerator/kroll/KrollProxy.java#L173" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/titanium/src/java/org/appcelerator/kroll/KrollProxy.java#L173</a>

The issue with this is that <code>ListView</code> will notice that the <code>ListItem</code>'s activity does not match the activity the <code>ListView</code> is attached to and will *+correctly+* update the <code>ListItem</code>'s activity and release its old views. This behavior is correct because the item needs to use the same theme as the <code>ListView</code>, but the item should favor the top-most activity and not the root activity when created.
<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/ui/src/java/ti/modules/titanium/ui/widget/listview/ListViewHolder.java#L165-L168" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/ui/src/java/ti/modules/titanium/ui/widget/listview/ListViewHolder.java#L165-L168</a>

*Work-Around:*
Add the items before the window opens, such as during <code>ListView</code> or <code>ListSection</code> creation.


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-28573_68023/ListViewTemplateManyViewsTest.js">ListViewTemplateManyViewsTest.js</td></td><td>2021-11-02T23:23:51.000+0000</td><td>1976</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Joshua Quick 2021-11-02

   PR (master): <a href="https://github.com/appcelerator/titanium_mobile/pull/13163" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/13163</a></li>
<li>Ewan Harris 2021-11-17

   Backport PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/13183" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/13183</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-28573.json">JSON Source</a></p>