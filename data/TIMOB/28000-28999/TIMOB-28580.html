---
title: "[TIMOB-28580] Android: ANR issue(s) in kroll V8 runtime"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Hans Kn√∂chel</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2021-11-21T17:49:46.000+0000</td></tr>
<tr><th>Updated</th><td>2021-11-21T18:08:46.000+0000</td></tr>
</table>

<h3>Description</h3>

Here is the log:

<code><pre>
org.appcelerator.kroll.runtime.v8.ReferenceTable.isStrongReference (ReferenceTable.java:134)
org.appcelerator.kroll.runtime.v8.V8Function.nativeInvoke (Native method)
org.appcelerator.kroll.runtime.v8.V8Function.callSync (V8Function.java:55)
org.appcelerator.kroll.runtime.v8.V8Function.call (V8Function.java:41)
org.appcelerator.titanium.TiBaseActivity.onOptionsItemSelected (TiBaseActivity.java:1156)
android.app.Activity.onMenuItemSelected (Activity.java:4369)
androidx.fragment.app.FragmentActivity.onMenuItemSelected (FragmentActivity.java:352)
androidx.appcompat.app.AppCompatActivity.onMenuItemSelected (AppCompatActivity.java:264)
androidx.appcompat.view.WindowCallbackWrapper.onMenuItemSelected (WindowCallbackWrapper.java:109)
androidx.appcompat.widget.ToolbarWidgetWrapper$1.onClick (ToolbarWidgetWrapper.java:188)
android.view.View.performClick (View.java:7509)
android.view.View.performClickInternal (View.java:7486)
android.view.View.access$3600 (View.java:841)
android.view.View$PerformClick.run (View.java:28709)
android.os.Handler.handleCallback (Handler.java:938)
android.os.Handler.dispatchMessage (Handler.java:99)
android.os.Looper.loop (Looper.java:236)
android.app.ActivityThread.main (ActivityThread.java:8061)
java.lang.reflect.Method.invoke (Native method)
com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:656)
com.android.internal.os.ZygoteInit.main (ZygoteInit.java:967) 
</pre></code>

It seems related to the <code>MenuItemProxy</code>.

Another one:
<code><pre>
main (native): tid=1 systid=5177
#00 pc 0xa33afc split_config.arm64_v8a.apk!libkroll-v8.so 
#01 pc 0xa3923c split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::PreParser&gt;::ParseBinaryContinuation(v8::internal::PreParserExpression, int, int) + 368)
#02 pc 0xa38bd8 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::PreParser&gt;::ParseLogicalExpression() + 368)
#03 pc 0xa37b10 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::PreParser&gt;::ParseAssignmentExpressionCoverGrammar() + 128)
#04 pc 0xa36974 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::PreParser&gt;::ParseExpressionCoverGrammar() + 164)
#05 pc 0xa3ce54 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::PreParser&gt;::ParseIfStatement(v8::internal::ZoneList&lt;v8::internal::AstRawString const*&gt;*) + 228)
#06 pc 0xa32048 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::PreParser&gt;::ParseStatement(v8::internal::ZoneList&lt;v8::internal::AstRawString const*&gt;*, v8::internal::ZoneList&lt;v8::internal::AstRawString const*&gt;*, v8::internal::AllowLabelledFunctionStatement) + 692)
#07 pc 0xa31948 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::PreParser&gt;::ParseStatementListItem() + 320)
#08 pc 0xa306b8 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::PreParser::ParseStatementListAndLogFunction(v8::internal::PreParserFormalParameters*) + 232)
#09 pc 0xa2fc00 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::PreParser::PreParseFunction(v8::internal::AstRawString const*, v8::internal::FunctionKind, v8::internal::FunctionSyntaxKind, v8::internal::DeclarationScope*, int*, v8::internal::ProducedPreparseData**) + 592)
#10 pc 0xa123a4 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::Parser::SkipFunction(v8::internal::AstRawString const*, v8::internal::FunctionKind, v8::internal::FunctionSyntaxKind, v8::internal::DeclarationScope*, int*, int*, v8::internal::ProducedPreparseData**) + 836)
#11 pc 0xa086a4 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::Parser::ParseFunctionLiteral(v8::internal::AstRawString const*, v8::internal::Scanner::Location, v8::internal::FunctionNameValidity, v8::internal::FunctionKind, int, v8::internal::FunctionSyntaxKind, v8::internal::LanguageMode, v8::internal::ZoneList&lt;v8::internal::AstRawString const*&gt;*) + 776)
#12 pc 0xa287a0 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::Parser&gt;::ParseHoistableDeclaration(int, v8::base::Flags&lt;v8::internal::ParseFunctionFlag, int&gt;, v8::internal::ZoneList&lt;v8::internal::AstRawString const*&gt;*, bool) + 408)
#13 pc 0xa13c9c split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::Parser&gt;::ParseFunctionBody(v8::internal::ScopedList&lt;v8::internal::Statement*, void*&gt;*, v8::internal::AstRawString const*, int, v8::internal::ParserFormalParameters const&, v8::internal::FunctionKind, v8::internal::FunctionSyntaxKind, v8::internal::ParserBase&lt;v8::internal::Parser&gt;::FunctionBodyType) + 1816)
#14 pc 0xa12948 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::Parser::ParseFunction(v8::internal::ScopedList&lt;v8::internal::Statement*, void*&gt;*, v8::internal::AstRawString const*, int, v8::internal::FunctionKind, v8::internal::FunctionSyntaxKind, v8::internal::DeclarationScope*, int*, int*, bool*, int*, int*, v8::internal::ZoneList&lt;v8::internal::AstRawString const*&gt;*) + 984)
#15 pc 0xa08710 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::Parser::ParseFunctionLiteral(v8::internal::AstRawString const*, v8::internal::Scanner::Location, v8::internal::FunctionNameValidity, v8::internal::FunctionKind, int, v8::internal::FunctionSyntaxKind, v8::internal::LanguageMode, v8::internal::ZoneList&lt;v8::internal::AstRawString const*&gt;*) + 884)
#16 pc 0xa1eaf0 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::Parser&gt;::ParseFunctionExpression() + 232)
#17 pc 0xa1d51c split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::Parser&gt;::ParsePrimaryExpression() + 772)
#18 pc 0xa1b4f4 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::Parser&gt;::ParseLogicalExpression() + 324)
#19 pc 0xa1a520 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::Parser&gt;::ParseAssignmentExpressionCoverGrammar() + 176)
#20 pc 0xa1f13c split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::Parser&gt;::ParseExpressionCoverGrammar() + 180)
#21 pc 0xa1d718 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::Parser&gt;::ParsePrimaryExpression() + 1280)
#22 pc 0xa1b4f4 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::Parser&gt;::ParseLogicalExpression() + 324)
#23 pc 0xa1a520 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::Parser&gt;::ParseAssignmentExpressionCoverGrammar() + 176)
#24 pc 0xa1f13c split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::Parser&gt;::ParseExpressionCoverGrammar() + 180)
#25 pc 0xa27ec4 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::ParserBase&lt;v8::internal::Parser&gt;::ParseExpressionOrLabelledStatement(v8::internal::ZoneList&lt;v8::internal::AstRawString const*&gt;*, v8::internal::ZoneList&lt;v8::internal::AstRawString const*&gt;*, v8::internal::AllowLabelledFunctionStatement) + 452)
#26 pc 0xa07454 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::Parser::DoParseProgram(v8::internal::Isolate*, v8::internal::ParseInfo*) + 1676)
#27 pc 0xa06ba8 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::Parser::ParseProgram(v8::internal::Isolate*, v8::internal::Handle&lt;v8::internal::Script&gt;, v8::internal::ParseInfo*, v8::internal::MaybeHandle&lt;v8::internal::ScopeInfo&gt;) + 484)
#28 pc 0xa2bf38 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::parsing::ParseProgram(v8::internal::ParseInfo*, v8::internal::Handle&lt;v8::internal::Script&gt;, v8::internal::MaybeHandle&lt;v8::internal::ScopeInfo&gt;, v8::internal::Isolate*, v8::internal::parsing::ReportStatisticsMode) + 288)
#29 pc 0x7bf054 split_config.arm64_v8a.apk!libkroll-v8.so 
#30 pc 0x7c01a0 split_config.arm64_v8a.apk!libkroll-v8.so (v8::internal::Compiler::GetSharedFunctionInfoForScript(v8::internal::Isolate*, v8::internal::Handle&lt;v8::internal::String&gt;, v8::internal::Compiler::ScriptDetails const&, v8::ScriptOriginOptions, v8::Extension*, v8::internal::ScriptData*, v8::ScriptCompiler::CompileOptions, v8::ScriptCompiler::NoCacheReason, v8::internal::NativesFlag) + 1848)
#31 pc 0x78124c split_config.arm64_v8a.apk!libkroll-v8.so (v8::ScriptCompiler::CompileUnboundInternal(v8::Isolate*, v8::ScriptCompiler::Source*, v8::ScriptCompiler::CompileOptions, v8::ScriptCompiler::NoCacheReason) + 824)
#32 pc 0x78162c split_config.arm64_v8a.apk!libkroll-v8.so (v8::ScriptCompiler::Compile(v8::Local&lt;v8::Context&gt;, v8::ScriptCompiler::Source*, v8::ScriptCompiler::CompileOptions, v8::ScriptCompiler::NoCacheReason) + 140)
#33 pc 0x77f24c split_config.arm64_v8a.apk!libkroll-v8.so (v8::Script::Compile(v8::Local&lt;v8::Context&gt;, v8::Local&lt;v8::String&gt;, v8::ScriptOrigin*) + 96)
#34 pc 0x603f58 split_config.arm64_v8a.apk!libkroll-v8.so (titanium::V8Util::executeString(v8::Isolate*, v8::Local&lt;v8::String&gt;, v8::Local&lt;v8::Value&gt;) + 112)
#35 pc 0x602c9c split_config.arm64_v8a.apk!libkroll-v8.so (titanium::V8Runtime::bootstrap(v8::Local&lt;v8::Context&gt;) + 608)
#36 pc 0x6031e8 split_config.arm64_v8a.apk!libkroll-v8.so (Java_org_appcelerator_kroll_runtime_v8_V8Runtime_nativeInit + 452)
       at org.appcelerator.kroll.runtime.v8.V8Runtime.nativeInit(Native method)
       at org.appcelerator.kroll.runtime.v8.V8Runtime.initRuntime(V8Runtime.java:103)
       at org.appcelerator.kroll.KrollRuntime.doInit(KrollRuntime.java:217)
       at org.appcelerator.kroll.KrollRuntime.init(KrollRuntime.java:112)
       at com.appc.myapp.MyAppApplication.onCreate(MyAppApplication.java:751)
       at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:1192)
       at android.app.ActivityThread.handleBindApplication(ActivityThread.java:7573)
       at android.app.ActivityThread.access$1500(ActivityThread.java:301)
       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2166)
       at android.os.Handler.dispatchMessage(Handler.java:106)
       at android.os.Looper.loop(Looper.java:246)
       at android.app.ActivityThread.main(ActivityThread.java:8633)
       at java.lang.reflect.Method.invoke(Native method)
       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)
       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)
</pre></code>

<h3>Comments</h3>

<p>No comments</p>

<p><a href="/TIMOB/TIMOB-28580.json">JSON Source</a></p>