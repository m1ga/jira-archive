---
title: "[TIMOB-3039] Android: DP unit for imageView causes crash"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T02:00:45.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M08</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>2.2, android, defect, enterprise, release-1.6.0, reported-1.6.0, rplist</td></tr>
<tr><th>Reporter</th><td>Rick Blalock</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:35:15.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T02:00:45.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Unsure if this is a feature request or defect.</p>
<p>Breakdown is assigning height / width of an imageView using
'dp's crashes.</p>
<p>Enterprise ticket here: <a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/70571" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/70571</a>"><a href="http://developer.appcelerator.com/helpdesk/view/70571" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/70571</a></a></p>
<p>using 'dip' does not work either.</p>
<p>Reproducible code:</p>
<pre>
<code class="javascript">var win = Ti.UI.createWindow({
    backgroundColor:'red',
});
 
 
var a =  Titanium.UI.createImageView({
            height:'48dp',
            width:'48dp',
            top:'12dp',
            left:'18dp',
            image:'icon_default_white_48.png',
            defaultImage:'icon_default_white_48.png',
        });
 
win.add(a);
win.open();</code>
</pre></div>

<h3>Comments</h3>

<ol>
<li>Andreas sandberg 2011-04-15

   <div><p>Bill, here is a similar use case that also throws an exception
   and crashes the application:</p>
   <p>var win = Ti.UI.createWindow({<br></p>
   <pre>
   <code>backgroundColor:'red',</code>
   </pre>
   <p>});</p>
   <p>var a = Titanium.UI.createTextField({<br></p>
   <pre>
   <code>        height:'51dp',
           top:'5dp',
           paddingLeft:'10dp',
           left:'10dp',
           right:'54dp'
       });</code>
   </pre>
   <p>var fieldContainer = Ti.UI.createView({<br></p>
   <pre>
   <code>        height:a.height,
           width:320,
           layout:'horizontal'</code>
   </pre>
   <p>});</p>
   <p>fieldContainer.add(a);<br>
   win.add(fieldContainer);<br>
   win.open();</p>
   <p>Stack Trace:</p>
   <p>TRACE] E/KrollReflectionProperty( 559): (kroll$1) [702,1358]
   Exception getting/setting property: height<br>
   <a href="/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559):
   java.lang.NumberFormatException: unable to parse '51dp' as integer
   <a href="/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559): at
   java.lang.Integer.parse(Integer.java:433) <a href=
   "/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559): at
   java.lang.Integer.parseInt(Integer.java:422) <a href=
   "/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559): at
   java.lang.Integer.parseInt(Integer.java:382) <a href=
   "/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559): at
   org.appcelerator.titanium.util.TiConvert.toInt(TiConvert.java:251)
   <a href="/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559): at
   org.appcelerator.titanium.proxy.TiViewProxy.getHeight(TiViewProxy.java:303)
   <a href="/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559): at
   org.appcelerator.titanium.proxy.TiViewProxyBindingGen$2.dynamicGet(TiViewProxyBindingGen.java:276)
   <a href="/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559): at
   org.appcelerator.kroll.KrollDynamicProperty.safeInvoke(KrollDynamicProperty.java:39)
   <a href="/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559): at
   org.appcelerator.kroll.KrollDynamicProperty.get(KrollDynamicProperty.java:88)
   <a href="/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559): at
   org.appcelerator.kroll.KrollProxy.getDynamicProperty(KrollProxy.java:241)
   <a href="/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559): at
   org.appcelerator.kroll.KrollProxy.get(KrollProxy.java:183) <a href=
   "/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559): at
   org.appcelerator.kroll.KrollObject.get(KrollObject.java:33)
   <a href="/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559): at
   org.mozilla.javascript.ScriptableObject.getProperty(ScriptableObject.java:1963)
   <a href="/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559): at
   org.mozilla.javascript.ScriptRuntime.getObjectProp(ScriptRuntime.java:1503)
   <a href="/projects/32238/changesets/TRACE" title=
   "Changeset [TRACE]">[TRACE]</a> E/KrollReflectionProperty( 559): at
   org.mozilla.javascript.ScriptRuntime.getObjectProp(ScriptRuntime.java:1489)</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>The TextField issue is similar in the sense that it happens with
   'dp', but it actually has a different root cause so I put it in its
   own ticket: <a href="/projects/32238/tickets/3047" title=
   "Ticket #3047">#3047</a></p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/6f78b58b06affa14ab0ab8188ea98f6969e415ba"
   title=
   "Changeset [6f78b58b06affa14ab0ab8188ea98f6969e415ba]">[6f78b58b06affa14ab0ab8188ea98f6969e415ba]</a>)
   For dp and % units, view's parent is required, and imageview needs
   it 'earlier' that most other views so that image scaling can occur.
   Modify ImageView.getParent to find the parent view via the parent's
   proxy in case the imageview view hasn't yet been added to the
   parent view. [<a href="/projects/32238/tickets/3039" title=
   "Ticket #3039">#3039</a> state:fixed-in-qa] <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/6f78b58b06affa14ab0ab8188ea98f6969e415ba" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/6f78b58b06affa14ab0ab8188ea98f6969e415ba</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/6f78b58b06af..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/6f78b58b06af...</a></a></p></div></li>
<li>Opie Cyrus 2011-04-15

   <div><p>verified on emulator 2.2.</p>
   <p>Creating the image view with dp does not result in
   exception.</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-3039.json">JSON Source</a></p>