---
title: "[TIMOB-3047] Android: TextField crashes when 'dp' units used to set dimension properties"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Hold</td></tr>
<tr><th>Resolution Date</th><td>2011-04-15T03:35:28.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect, enterprise, release-1.7.0, reported-1.6.0, rplist</td></tr>
<tr><th>Reporter</th><td>Bill Dawson</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-04-15T03:35:26.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-10T19:23:39.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>(From Andreas Sandberg) Bill, here is a similar use case that
also throws an exception and crashes the application:</p>
<pre>
<code class="javascript">var win = Ti.UI.createWindow({
backgroundColor:'red',
});
var a = Titanium.UI.createTextField({
        height:'51dp',
        top:'5dp',
        paddingLeft:'10dp',
        left:'10dp',
        right:'54dp'
    });
var fieldContainer = Ti.UI.createView({
        height:a.height,
        width:320,
        layout:'horizontal'
});
fieldContainer.add(a);
win.add(fieldContainer);
win.open();</code>
</pre>
<p>Stack Trace:</p>
<pre>
<code>[TRACE] E/KrollReflectionProperty( 559): (kroll$1) [702,1358] Exception getting/setting property: height
[TRACE] E/KrollReflectionProperty( 559): java.lang.NumberFormatException: unable to parse '51dp' as integer 
[TRACE] E/KrollReflectionProperty( 559): at java.lang.Integer.parse(Integer.java:433) 
[TRACE] E/KrollReflectionProperty( 559): at java.lang.Integer.parseInt(Integer.java:422) 
[TRACE] E/KrollReflectionProperty( 559): at java.lang.Integer.parseInt(Integer.java:382) 
[TRACE] E/KrollReflectionProperty( 559): at org.appcelerator.titanium.util.TiConvert.toInt(TiConvert.java:251) 
[TRACE] E/KrollReflectionProperty( 559): at org.appcelerator.titanium.proxy.TiViewProxy.getHeight(TiViewProxy.java:303) 
[TRACE] E/KrollReflectionProperty( 559): at org.appcelerator.titanium.proxy.TiViewProxyBindingGen$2.dynamicGet(TiViewProxyBindingGen.java:276) 
[TRACE] E/KrollReflectionProperty( 559): at org.appcelerator.kroll.KrollDynamicProperty.safeInvoke(KrollDynamicProperty.java:39) 
[TRACE] E/KrollReflectionProperty( 559): at org.appcelerator.kroll.KrollDynamicProperty.get(KrollDynamicProperty.java:88) 
[TRACE] E/KrollReflectionProperty( 559): at org.appcelerator.kroll.KrollProxy.getDynamicProperty(KrollProxy.java:241) 
[TRACE] E/KrollReflectionProperty( 559): at org.appcelerator.kroll.KrollProxy.get(KrollProxy.java:183) 
[TRACE] E/KrollReflectionProperty( 559): at org.appcelerator.kroll.KrollObject.get(KrollObject.java:33) 
[TRACE] E/KrollReflectionProperty( 559): at org.mozilla.javascript.ScriptableObject.getProperty(ScriptableObject.java:1963) 
[TRACE] E/KrollReflectionProperty( 559): at org.mozilla.javascript.ScriptRuntime.getObjectProp(ScriptRuntime.java:1503) 
[TRACE] E/KrollReflectionProperty( 559): at org.mozilla.javascript.ScriptRuntime.getObjectProp(ScriptRuntime.java:1489)</code>
</pre></div>

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-04-15

   <div><p>Simplified failcase app.js:</p>
   <pre>
   <code class=
   "javascript">var v = Ti.UI.createView({height: '50dp'});
   var h = v.height;</code>
   </pre></div></li>
<li>Don Thorp 2011-04-15

   <div><p>Bill, I spoke with the customer and we're pushing this to 1.7.0.
   As you know, it requires changing method signatures and dealing
   with the static vs dynamic problem we found in our UI review in
   January.</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>Also slated for 1.7.0 is a general re-working of the properties
   that set and expose layout characteristics. For example, currently
   it is impossible to <em>read</em> that you set a width to
   <code>"auto"</code>. (It throws the exception that is the subject
   of this ticket.) One of the goals of the overhaul is that
   differentiate between what you set as a layout dimension ("11",
   "11dp", "auto", etc.) and the actual pixel dimension that resulted
   once the view was laid out. At that point, this ticket will not be
   valid anymore.</p>
   <p>To avoid duplicate effort, we're therefore putting this ticket
   in a hold state, since both this ticket and the general re-working
   (which will solve this ticket) are slated for 1.7.0.</p>
   <p>As a temporary workaround to the exception that you're getting
   as described in this ticket, you can read the <code>.size</code>
   property of views. For example, if you set <code>view.width =
   "20dp"</code>, you can then read the resulting width (expressed in
   <em>pixels</em>) with <code>view.size.width</code>, but only
   <strong>after</strong> the view has been laid out (i.e., after the
   window has been open and all child views have been drawn.)</p></div></li>
<li>Lee Morris 2017-03-10

   Closing ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-3047.json">JSON Source</a></p>