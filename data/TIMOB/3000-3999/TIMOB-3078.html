---
title: "[TIMOB-3078] Android: Bugs in KS Base UI - Views - Image View - Animated test"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T02:00:51.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M10</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect, lifecycle_refactor, regression, release-1.6.0, reported-1.6.0</td></tr>
<tr><th>Reporter</th><td>Bill Dawson</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-04-15T03:36:13.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T02:00:51.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Testing on 2.2 device with Titanium 1.6.0 49c5b13 (Mon Feb 7
21:26:27 2011 -0600).</p>
<p>Several symptoms:</p>
<ul>
<li>
<p>The "Loading" indicator stays around forever (in Smoketest
anyway, but not KS). (NOTE: see later comment. This was changed in
KS but not Smoketest. So it's a non-issue.)</p>
</li>
<li>
<p><strong>Sometimes</strong> no images appear. But this is very
difficult to reproduce. It's happened to me a few times.</p>
</li>
<li>
<p><strong>Sometimes</strong> when you go back it crashes the app.
Log:</p>
</li>
</ul>
<pre>
<code>W/dalvikvm(10893): threadid=15: thread exiting with uncaught exception (group=0x400259f8)
E/TiUncaughtHandler(10893): (Thread-18) [1469,48790] Sending event: exception on thread: Thread-18 msg:java.lang.NullPointerException; Titanium 1.6.0,2011/02/08 17:42,9c5b13
E/TiUncaughtHandler(10893): java.lang.NullPointerException
E/TiUncaughtHandler(10893):     at ti.modules.titanium.ui.widget.TiUIImageView$Loader.isNotFinalFrame(TiUIImageView.java:227)
E/TiUncaughtHandler(10893):     at ti.modules.titanium.ui.widget.TiUIImageView$Loader.run(TiUIImageView.java:251)
E/TiUncaughtHandler(10893):     at java.lang.Thread.run(Thread.java:1102)
E/AndroidRuntime(10893): FATAL EXCEPTION: Thread-18
E/AndroidRuntime(10893): java.lang.NullPointerException
E/AndroidRuntime(10893):    at ti.modules.titanium.ui.widget.TiUIImageView$Loader.isNotFinalFrame(TiUIImageView.java:227)
E/AndroidRuntime(10893):    at ti.modules.titanium.ui.widget.TiUIImageView$Loader.run(TiUIImageView.java:251)
E/AndroidRuntime(10893):    at java.lang.Thread.run(Thread.java:1102)
W/ActivityManager(   96):   Force finishing activity com.appcelerator.SmokeTest/org.appcelerator.titanium.TiActivity</code>
</pre></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-3078_18259/no_images.png">no_images.png</td></td><td>2011-04-15T03:36:14.000+0000</td><td>20767</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-04-15

   <div><p>Just so y'all don't think I'm crazy, here is the Titanium
   version info output during build of KitchenSink. I rebuild the SDK
   and KitchenSink, just to be sure:</p>
   <p><code>Titanium SDK version: 1.6.0 (02/08/11 20:51
   49c5b13)</code></p>
   <p>That hash is precisely the HEAD of master at this moment. (The
   date/time shows my time now, because I just re-built the SDK.)</p>
   <p>And the attached screen capture is of my device running the
   Image View - Animated test. In this case, there are no images
   displaying (the second condition noted above).</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>The first issue I list above has already been addressed by a
   change in KS from Marshall at the time he committed many of the new
   message queue implementation changes. But the change isn't in
   Smoketest, so that's why I saw the behavior there. Marshall's
   relevant commit:</p>
   <p><a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/76647275afd7304f48ea8535b55a3db9e1e1f666#diff-33" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/76647275afd7304f48ea8535b55a3db9e1e1f666#diff-33</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/76647275afd7..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/76647275afd7...</a></a></p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>I can't reliably reproduce the second issue (no images appear).
   It's happened twice -- one time I caught the screen capture for
   posterity, but neither time did I get a logcat. Bad boy. So we'll
   have to accept that one.</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/b27d06ff4e2818e3daf755c0a2c6eff84c1eac57"
   title=
   "Changeset [b27d06ff4e2818e3daf755c0a2c6eff84c1eac57]">[b27d06ff4e2818e3daf755c0a2c6eff84c1eac57]</a>)
   [<a href="/projects/32238/tickets/3078" title=
   "Ticket #3078">#3078</a> state:fixed-in-qa] check for imageSources
   being null before accessing <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/b27d06ff4e2818e3daf755c0a2c6eff84c1eac57" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/b27d06ff4e2818e3daf755c0a2c6eff84c1eac57</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/b27d06ff4e28..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/b27d06ff4e28...</a></a></p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>Adding to this ticket, because there is another place where
   "backing out" can cause an NPE:</p>
   <pre>
   <code>E/TiUncaughtHandler( 8676): (Thread-24) [398,283170] Sending event: exception on thread: Thread-24 msg:java.lang.NullPointerException; Titanium 1.6.0,2011/02/08 16:18,17c1ea
   E/TiUncaughtHandler( 8676): java.lang.NullPointerException
   E/TiUncaughtHandler( 8676):     at ti.modules.titanium.ui.widget.TiUIImageView$Loader.getStart(TiUIImageView.java:220)
   E/TiUncaughtHandler( 8676):     at ti.modules.titanium.ui.widget.TiUIImageView$Loader.run(TiUIImageView.java:251)
   E/TiUncaughtHandler( 8676):     at java.lang.Thread.run(Thread.java:1096)</code>
   </pre></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>One additional way to test this and try to break it is to go in
   and out of the test quickly. Or go into it, click "Stop", click
   "Start" but then back out quickly before it really has a chance to
   start. Also go in, click "Stop", click "Reverse", click "Start",
   then go back fast before it can start.</p>
   <p>Try to make it break, in other words.</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/67b6bde7b0c14e4b916180abd228a242432f8ff9"
   title=
   "Changeset [67b6bde7b0c14e4b916180abd228a242432f8ff9]">[67b6bde7b0c14e4b916180abd228a242432f8ff9]</a>)
   Put more null checks in image view animator to avoid NPEs when user
   backs out of an animation. [<a href="/projects/32238/tickets/3078"
   title="Ticket #3078">#3078</a> state:fixed-in-qa] <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/67b6bde7b0c14e4b916180abd228a242432f8ff9" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/67b6bde7b0c14e4b916180abd228a242432f8ff9</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/67b6bde7b0c1..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/67b6bde7b0c1...</a></a></p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/f666f8d2c6ccb03e523ad2216b66808ea054573e"
   title=
   "Changeset [f666f8d2c6ccb03e523ad2216b66808ea054573e]">[f666f8d2c6ccb03e523ad2216b66808ea054573e]</a>)
   Put more null checks in image view animator to avoid NPEs when user
   backs out of an animation. [<a href="/projects/32238/tickets/3078"
   title="Ticket #3078">#3078</a> state:fixed-in-qa] <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/f666f8d2c6ccb03e523ad2216b66808ea054573e" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/f666f8d2c6ccb03e523ad2216b66808ea054573e</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/f666f8d2c6cc..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/f666f8d2c6cc...</a></a></p></div></li>
<li>Opie Cyrus 2011-04-15

   <div><p>Verified on Droid 2 (2.2) against KS built with 1_6_X</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-3078.json">JSON Source</a></p>