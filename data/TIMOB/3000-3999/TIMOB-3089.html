---
title: "[TIMOB-3089] iPhone: SearchBar UI Doesn't get fully rendered when focus() is added before the window is opened"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2012-08-30T16:51:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.6.0 M10</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>defect, ios, reported-1.6.0, rplist, tbs-1.9.0</td></tr>
<tr><th>Reporter</th><td>Rick Blalock</td></tr>
<tr><th>Assignee</th><td>Neeraj Gupta</td></tr>
<tr><th>Created</th><td>2011-04-15T03:36:36.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-23T21:12:34.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>This could be a defect or just an issue of what is best
practice.</p>
<p>If you set a focus() on the SearchBar before the window is
opened it doesn't get fully rendered (see customer's example)
<em>or</em> will draw it on the canvas realtime (See video link
below). The workaround is simple: place the focus() after the
window is opened or delay the focus event a few ms.</p>
<p>Sample Code: <a href=
"<a href="http://pastie.org/1545123" rel="nofollow" target="_blank">http://pastie.org/1545123</a>"><a href="http://pastie.org/1545123" rel="nofollow" target="_blank">http://pastie.org/1545123</a></a><br>
Video: <a href=
"<a href="http://www.screencast.com/users/XiDScreencasts/folders/Jing/media/4a51feee-e70e-4cd0-bfcd-b751661d3943" rel="nofollow" target="_blank">http://www.screencast.com/users/XiDScreencasts/folders/Jing/media/4a51feee-e70e-4cd0-bfcd-b751661d3943</a>">
<a href="http://www.screencast.com/users/XiDScreencasts/folders/Jing/media/4..." rel="nofollow" target="_blank">http://www.screencast.com/users/XiDScreencasts/folders/Jing/media/4...</a></a><br>
HD Ticket (Customer's sample code there): <a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/66091#c340591" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/66091#c340591</a>"><a href="http://developer.appcelerator.com/helpdesk/view/66091#c340591" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/66091#c340591</a></a></p></div>

<h3>Comments</h3>

<ol>
<li>James David Low 2011-08-05

   I'm having a similar problem when the table view is added before the window is opened. Code showing the bug:
   
   var tabGroup = Titanium.UI.createTabGroup();
   var win1 = Titanium.UI.createWindow({title:'Tab 1',backgroundColor:'#fff'});
   var tab1 = Titanium.UI.createTab({title:'Tab 1',window:win1});
   
   function createTableView() {
   	var search = Titanium.UI.createSearchBar();
   	var tableview = Titanium.UI.createTableView({
   		data:[{title:'New Table View'}],
   		search:search,
   		filterAttribute:'title'
   	});
   	tableview.addEventListener('click',function(e) {createTableView();});
   	win1.add(tableview);
   }
   createTableView();
   tabGroup.addTab(tab1);
   tabGroup.open();</li>
<li>Federico Casali 2012-05-16

   Jira bug review - reproducing same video behavior with 2.0 GA and 2.1 CI SDK</li>
<li>Junaid Younus 2012-08-30

   Tested on the iOS Simulator using TiSDK 2.2.0v20120830102513, unable to reproduce the issue. Everything seems to be fine and fully loaded. 
   
   Ticket marked as resolved. 
   
   <code><pre>
   var win = Titanium.UI.createWindow({backgroundColor: 'white'});
   
   
   var searchBar = Ti.UI.createSearchBar({
       barColor: '#00f',
       showCancel: false,
       hintText: 'Search for Something'
   });
   var searchHasFocus = false;
   
   var tableView = Ti.UI.createTableView({
       backgroundColor: 'white',
       search: searchBar
   });
   
   searchBar.addEventListener('focus', function(e) {
       searchHasFocus = true;
       e.source.showCancel = true;
   });
   
   searchBar.addEventListener('blur', function(e) {
       searchHasFocus = false;
       e.source.showCancel = false;
   });
   
   searchBar.addEventListener('return', function(e) {
       if (searchHasFocus) searchBar.blur();
   });
   
   searchBar.addEventListener('cancel', function(e) {
       searchBar.blur();
   });
   
   tableView.addEventListener('touchstart', function(e) {
       if (searchHasFocus) searchBar.blur();
   });
   
   tableView.addEventListener('scroll', function(e) {
       if (searchHasFocus) searchBar.blur();
   });
   
   win.add(tableView);
   
   searchBar.focus();
   
   win.open();
   </pre></code></li>
<li>Lee Morris 2017-03-23

   Can verify this ticket as "Cannot Reproduce". Tested with the following environment;
   iPhone 7 and Simulator (10.2)
   MacOS 10.11.6 (15G31)
   Studio 4.8.1.201612050850
   Ti SDK 6.0.3 GA
   Appc NPM 4.2.8
   Appc CLI 6.1.0
   Ti CLI 5.0.11
   Alloy 1.9.5
   Arrow 1.10.1
   Xcode 8.2 (8C38)
   Node v4.6.0
   Java 1.7.0_80</li>
</ol>


<p><a href="/TIMOB/TIMOB-3089.json">JSON Source</a></p>