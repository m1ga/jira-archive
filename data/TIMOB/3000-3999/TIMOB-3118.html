---
title: "[TIMOB-3118] Android: 304 status causes timeouts"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T02:00:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M10</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect, release-1.6.0, reported-1.6.0, rplist</td></tr>
<tr><th>Reporter</th><td>Rick Blalock</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:37:21.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T02:00:58.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Zipcar is reporting an issue where a 304 is returned from their
server subsequent requests will timeout. I've tested this and it
does happen though not all the time. The customer has supplied a
runnable app to test here: <a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/65941#c343981" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/65941#c343981</a>"><a href="http://developer.appcelerator.com/helpdesk/view/65941#c343981" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/65941#c343981</a></a></p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-3118_18265/app.js">app.js</td></td><td>2011-04-15T03:37:21.000+0000</td><td>2426</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Don Thorp 2011-04-15

   <div><p>Triage, if too risky we'll have to consider 1.6.1 or 1.7.0.</p></div></li>
<li>Opie Cyrus 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/ccc3a3073f757c32053e9dd8eb596b58a30001ca"
   title=
   "Changeset [ccc3a3073f757c32053e9dd8eb596b58a30001ca]">[ccc3a3073f757c32053e9dd8eb596b58a30001ca]</a>)
   [<a href="/projects/32238/tickets/3144" title=
   "Ticket #3144">#3144</a> state:fixed-in-qa] [<a href=
   "/projects/32238/tickets/3118" title="Ticket #3118">#3118</a>
   state:fixed-in-qa] modify http client to release stale
   connections</p>
   <p>sometimes http client does not correctly release stale
   connections when exceptions are thrown or certain responses are
   received (304) in this case. upon receiving exception, manually
   release any idle or expired connections. also modified http client
   to respect unique timeout values per TiHTTPClient instance rather
   than setting the timeout value on the shared http client
   instance.<br>
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/ccc3a3073f757c32053e9dd8eb596b58a30001ca" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/ccc3a3073f757c32053e9dd8eb596b58a30001ca</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/ccc3a3073f75..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/ccc3a3073f75...</a></a></p></div></li>
<li>Opie Cyrus 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/b9a4f2cec1823d7d6842baf7f59a1e4cf81458ad"
   title=
   "Changeset [b9a4f2cec1823d7d6842baf7f59a1e4cf81458ad]">[b9a4f2cec1823d7d6842baf7f59a1e4cf81458ad]</a>)
   [<a href="/projects/32238/tickets/3144" title=
   "Ticket #3144">#3144</a> state:fixed-in-qa] [<a href=
   "/projects/32238/tickets/3118" title="Ticket #3118">#3118</a>
   state:fixed-in-qa] modify http client to release stale
   connections</p>
   <p>sometimes http client does not correctly release stale
   connections when exceptions are thrown or certain responses are
   received (304) in this case. upon receiving exception, manually
   release any idle or expired connections. also modified http client
   to respect unique timeout values per TiHTTPClient instance rather
   than setting the timeout value on the shared http client
   instance.<br>
   (cherry picked from commit
   ccc3a3073f757c32053e9dd8eb596b58a30001ca) <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/b9a4f2cec1823d7d6842baf7f59a1e4cf81458ad" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/b9a4f2cec1823d7d6842baf7f59a1e4cf81458ad</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/b9a4f2cec182..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/b9a4f2cec182...</a></a></p></div></li>
<li>Opie Cyrus 2011-04-15

   <div><p>Please verify with attached test app which if modified version
   of the test app provided in HD ticket. Basically, whenever you
   click the button on the first tab, you should fire off both
   requests. Even as the 304 response is received, you should not see
   a timeout on further requests.</p></div></li>
<li>Zipcar (Goss) 2011-04-15

   <div><p>Excellent, I'll also test against our full suite of requests
   with tomorrow's CI build. Thanks!</p></div></li>
<li>Zipcar (Goss) 2011-04-15

   <div><p>This has addressed the issue for me, thank you!</p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>nexus 2, G1, todays pull and Opies excellent test content</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-3118.json">JSON Source</a></p>