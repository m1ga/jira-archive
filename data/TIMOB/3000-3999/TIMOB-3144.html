---
title: "[TIMOB-3144] Android:  allow timeout value to be set per http client instance"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T02:01:02.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.6.0 M10</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect, httpclient, regression, release-1.6.0, reported-1.6.0, timeout</td></tr>
<tr><th>Reporter</th><td>Opie Cyrus</td></tr>
<tr><th>Assignee</th><td>Opie Cyrus</td></tr>
<tr><th>Created</th><td>2011-04-15T03:38:00.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T02:01:02.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Now that the http client is shared, modify the http client to
allow for a unique timeout per instance.</p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-3144_18267/app.js">app.js</td></td><td>2011-04-15T03:38:00.000+0000</td><td>2424</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Opie Cyrus 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/ccc3a3073f757c32053e9dd8eb596b58a30001ca"
   title=
   "Changeset [ccc3a3073f757c32053e9dd8eb596b58a30001ca]">[ccc3a3073f757c32053e9dd8eb596b58a30001ca]</a>)
   [<a href="/projects/32238/tickets/3144" title=
   "Ticket #3144">#3144</a> state:fixed-in-qa] [<a href=
   "/projects/32238/tickets/3118" title="Ticket #3118">#3118</a>
   state:fixed-in-qa] modify http client to release stale
   connections</p>
   <p>sometimes http client does not correctly release stale
   connections when exceptions are thrown or certain responses are
   received (304) in this case. upon receiving exception, manually
   release any idle or expired connections. also modified http client
   to respect unique timeout values per TiHTTPClient instance rather
   than setting the timeout value on the shared http client
   instance.<br>
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/ccc3a3073f757c32053e9dd8eb596b58a30001ca" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/ccc3a3073f757c32053e9dd8eb596b58a30001ca</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/ccc3a3073f75..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/ccc3a3073f75...</a></a></p></div></li>
<li>Opie Cyrus 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/b9a4f2cec1823d7d6842baf7f59a1e4cf81458ad"
   title=
   "Changeset [b9a4f2cec1823d7d6842baf7f59a1e4cf81458ad]">[b9a4f2cec1823d7d6842baf7f59a1e4cf81458ad]</a>)
   [<a href="/projects/32238/tickets/3144" title=
   "Ticket #3144">#3144</a> state:fixed-in-qa] [<a href=
   "/projects/32238/tickets/3118" title="Ticket #3118">#3118</a>
   state:fixed-in-qa] modify http client to release stale
   connections</p>
   <p>sometimes http client does not correctly release stale
   connections when exceptions are thrown or certain responses are
   received (304) in this case. upon receiving exception, manually
   release any idle or expired connections. also modified http client
   to respect unique timeout values per TiHTTPClient instance rather
   than setting the timeout value on the shared http client
   instance.<br>
   (cherry picked from commit
   ccc3a3073f757c32053e9dd8eb596b58a30001ca) <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/b9a4f2cec1823d7d6842baf7f59a1e4cf81458ad" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/b9a4f2cec1823d7d6842baf7f59a1e4cf81458ad</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/b9a4f2cec182..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/b9a4f2cec182...</a></a></p></div></li>
<li>Opie Cyrus 2011-04-15

   <div><p>Please verify with attached test app. Basically, whenever you
   click the button on the first tab, you should fire off two
   requests. One request has a 500 millisecond timeout which should
   fail and the other has a 40 second timeout which should work
   without issue.</p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>GA - 1.6 G! and 2.3.1 Nexus s</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-3144.json">JSON Source</a></p>