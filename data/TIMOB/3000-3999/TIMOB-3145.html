---
title: "[TIMOB-3145] Using multipart POST with HTTPClient"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2017-06-07T22:55:37.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Andre Carregal</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2011-04-15T03:38:01.000+0000</td></tr>
<tr><th>Updated</th><td>2017-06-07T22:55:37.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Currently there is no way to POST multipart messages using
HTTPClient. Are there any plans to do so?</p></div>

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2011-04-15

   <div><p>Need to discuss how we're going to break up XHR/HTTPClient going
   forward. Don't want to put multipart features in a single-request
   architecture.</p></div></li>
<li>Andre Carregal 2011-04-15

   <div><p>Call me naive if you want, but what about keeping full
   compatibility with the current API by using an optional second
   parameter for HTTPClient.send? I was thinking in something
   like:</p>
   <pre>
   <code>HTTPClient.send(data, multipart)</code>
   </pre>
   <p>where <em>data</em> would have the current semantics and
   <em>multipart</em>, if present, would be an Array with multiple
   file objects and their properties:</p>
   <pre>
   <code>{
      { name :'fieldname',
        filename :'filename',
        filedata :'filedata'
        [, 'Content-Type' : 'content-type']
        [, 'Content-Transfer-Encoding' : 'encoding']
      },
      { ... },
      ...
   }</code>
   </pre>
   <p>The presence of <em>multipart</em> would also signal the need
   for a multipart protocol instead of the default one. In that case
   the function would change the response preamble accordingly and add
   a functional boundary string.</p>
   <p>The function could also infer <em>Content-Type</em> for each
   part using the <em>filename</em> extension, so a full example could
   be something like:</p>
   <pre>
   <code>var avatardata = avatarfile.read();
   var videodata = videofile.read();
   
   var data = {name : 'a name', option : 'some value'};
   var multipart = {
      { name = 'avatar', filename = 'thumb.jpg',
        filedata =  avatardata,
        Content-Transfer-Encoding' : 'base64' },
      { name = 'video',
        filename = 'presentation.avi',
        filedata = videodata }
   };
   
   HTTPClient.send(data, multipart);</code>
   </pre></div></li>
<li>Lee Morris 2017-06-07

   Closing ticket due to time passed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-3145.json">JSON Source</a></p>