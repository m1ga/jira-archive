---
title: "[TIMOB-3179] Android: Tab icons should support resource ids"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T02:01:07.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Sprint-2011-08</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, feature, release-1.7.0, reported-1.5.1, rplist</td></tr>
<tr><th>Reporter</th><td>Bill Dawson</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:38:53.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T02:01:07.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>Now that we expose <code>Ti.Android.R</code> we should allow
resource ids instead of paths to the <code>icon</code> property of
tabs.</p>
<p>Excerpt from <a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/73511" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/73511</a>">HD</a>:</p>
<blockquote>
<p>I've put a {root}/platform/android/res/drawable directory in
place.</p>
<p>In there I've put in a state-list-drawable XML file for each of
my tabs following the naming convention "ic_tab_tabName1.xml"</p>
<p>I've then put in corresponding
{root}/platform/android/res/drawable-{ldpi/mdpi/hdpi} directories
with appropriately sized icons for both the selected and unselected
states.</p>
<p>Then when I create the tab, my call looks something like
this:</p>
</blockquote>
<pre>
<code class="javascript">var tab1 = Titanium.UI.createTab({
    icon:Titanium.Android.R.drawable.ic_tab_tabName1,
    title:'Tab 1',
    window:win1
});
 
tabGroup.add(tab1);</code>
</pre>
<blockquote>
<p>So, this doesn't work... At runtime I get an exception like
this:</p>
</blockquote>
<pre>
<code>[TRACE] E/TiUncaughtHandler( 429): java.lang.ClassCastException: org.appcelerator.titanium.proxy.RProxy
[TRACE] E/TiUncaughtHandler( 429): at ti.modules.titanium.ui.TabGroupProxy.addTabToGroup(TabGroupProxy.java:163)</code>
</pre></div>

<h3>Comments</h3>

<ol>
<li>Jean-Etienne LaVallee 2011-04-15

   <div><p>Thanks for reporting this, Bill. I'm also wondering if there
   should be an over-all assessment of the entire API to address all
   the various properties where @drawable resources could/should be
   allowed as values (and correspondingly, properly resolved in the
   native layer)?</p>
   <p>Also, I've noticed in an app I'm currently working on that if I
   do use Ti.Android.R.xxx I receive an "no such method for <a href=
   "/projects/32238/changesets/undefined" title=
   "Changeset [undefined]">[undefined]</a>" javascript error in iOS
   EVEN IF I go through the trouble of using a
   Ti.Platform.osname-based resolver (e.g. like the tt.os utility
   method in the Tweetanium app). This totally makes sense since the
   whole Ti.Android.xxx namespace is unresolved in the iOS build
   configuration.</p>
   <p>BUT, this makes coding much more complicated because I have to
   revert back to encapsulating such references in their own include
   files and then doing conditional-wrapped Ti.Platform.osname
   switching. Is there any way we can make this more graceful w/r/t
   supporting multi-target app development?</p>
   <p>Thanks,<br>
   Etienne</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>Yes, we're looking at it for the whole api.</p>
   <p>Re your other problem: be sure to put it in Helpdesk so our
   Support guys can try to help you.</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>Test Case for QE:</p>
   <ul>
   <li>Use this app.js:</li>
   </ul>
   <pre>
   <code class="javascript">Titanium.UI.setBackgroundColor('#000');
   var tabGroup = Titanium.UI.createTabGroup();
   var win1 = Titanium.UI.createWindow({  
       title:"Tab 1 with icon",
       backgroundColor:'#fff'
   });
   var tab1 = Titanium.UI.createTab({  
       icon:Ti.App.Android.R.drawable.ic_tab1,
       title:"Tab 1 with icon",
       window:win1
   });
   win1.add(Ti.UI.createLabel({text: 'Win1'}));
   
   var win2 = Titanium.UI.createWindow({  
       title:'Tab 2 no icon',
       backgroundColor:'#fff'
   });
   var tab2 = Titanium.UI.createTab({  
       title:'Tab 2 no icon',
       window:win2
   });
   win2.add(Ti.UI.createLabel({text: 'Win2'}));
   
   tabGroup.addTab(tab1);  
   tabGroup.addTab(tab2);  
   tabGroup.open();</code>
   </pre>
   <ul>
   <li>
   <p>From the project's root folder, create the folder
   <code>platform/android/res/drawable</code>.</p>
   </li>
   <li>
   <p>Plop the two .pngs here -- selected.png &amp; unselected.png --
   into the <code>platform/android/res/drawable</code> folder.</p>
   </li>
   <li>
   <p>Save the following xml as
   <code>platform/android/res/drawable/ic_tab1.xml</code>:</p>
   </li>
   </ul>
   <pre>
   <code class="xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;selector xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt;
       &lt;item android:drawable="@drawable/selected" android:state_pressed="false" android:state_selected="true"/&gt;
       &lt;item android:drawable="@drawable/unselected"/&gt;
   &lt;/selector&gt;</code>
   </pre>
   <ul>
   <li>Run the app.</li>
   </ul>
   <p>In the "old" version (pre-commit), the app will crash
   immediately. If you look at logcat you will see a
   <code>ClassCastException</code> similar to:</p>
   <pre>
   <code>E/AndroidRuntime( 1434): java.lang.ClassCastException: java.lang.Integer
   E/AndroidRuntime( 1434):    at ti.modules.titanium.ui.TabGroupProxy.addTabToGroup(TabGroupProxy.java:163)</code>
   </pre>
   <p>With the post-commit version, you should see that the first tab
   has a bird icon when selected, and a star icon when not selected
   (i.e., when the other tab is selected).</p></div></li>
<li>Don Thorp 2011-04-15

   <div><p>removed tbs-1.7.0 added release-1.7.0</p></div></li>
<li>Bill Dawson 2011-04-15

   <div><p>don't know why this didn't get updated with my commits. Here
   they are:</p>
   <p><a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/dddf612e49194b97f1522fc53e3c3ea22a842dd5" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/dddf612e49194b97f1522fc53e3c3ea22a842dd5</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/dddf612e4919..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/dddf612e4919...</a></a></p>
   <p><a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/979a1c50a695a03a442be2446c411835ac39148d" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/979a1c50a695a03a442be2446c411835ac39148d</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/979a1c50a695..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/979a1c50a695...</a></a></p></div></li>
<li>Natalie Huynh 2011-04-15

   <div><p>Tested with Titanium SDK version: 1.7.0 (03/01/11 16:09
   e613126)<br>
   GalaxyTab 2.2<br>
   Emulator 2.1</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-3179.json">JSON Source</a></p>