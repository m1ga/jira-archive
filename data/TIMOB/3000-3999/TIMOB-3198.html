---
title: "[TIMOB-3198] iOS: Facebook module authorize crashes when Safari Restricted"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-04-17T02:01:09.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Sprint-2011-08</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>feature, ios, release-1.7.0, reported-1.6.0, rplist</td></tr>
<tr><th>Reporter</th><td>Jon Alter</td></tr>
<tr><th>Assignee</th><td>Ralf Pfeiffer</td></tr>
<tr><th>Created</th><td>2011-04-15T03:39:13.000+0000</td></tr>
<tr><th>Updated</th><td>2011-04-17T02:01:09.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>The application crashes when you use
Titanium.Facebook.authorize(); when Safari is restricted
(settings-&gt;General-&gt;Restrictions).<br></p>
<h3>To Reproduce</h3>
<p>Step 1: restrict Safari via
(settings-&gt;General-&gt;Restrictions)<br>
Step 2: install app to device<br>
Step 3: tap the 'authorize()' button</p>
<pre>
<code class="javascript">var win = Titanium.UI.createWindow({  
    backgroundColor:'#fff'
});

// need to change the APPID before you run
Titanium.Facebook.appid = 'APPID';

var fbAuthButton = Titanium.UI.createButton({
    title: 'authorize()',
    bottom: 100,
    width: 300,
    height: 60
});
fbAuthButton.addEventListener('click', function(e) {
    Titanium.Facebook.authorize();
});

var fbButton = Titanium.Facebook.createLoginButton({
    'style': 'wide',
    'sessionProxy': '<a href="http://api.appcelerator.net/p/fbconnect/" rel="nofollow" target="_blank">http://api.appcelerator.net/p/fbconnect/</a>',
    bottom: 50,
    height: 30,
    width: 300
});

win.add(fbAuthButton);
win.add(fbButton);
win.open();</code>
</pre>
<h3>Tested</h3>
<p>TiSDK 1.6.0RC1, iOS SDK 4.2, iPhone4 iOS 4.2.1</p>
<h3>Workaround</h3>
<p>Titanium.Facebook.createLoginButton() will still work the
classic way with a window inside the app even when Safari is
restricted</p>
<h3>Associated Helpdesk Ticket(s)</h3>
<p><a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/74491" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/74491</a>"><a href="http://developer.appcelerator.com/helpdesk/view/74491" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/74491</a></a><br>
<a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/74771" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/74771</a>"><a href="http://developer.appcelerator.com/helpdesk/view/74771" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/74771</a></a></p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-3198_18275/test3_2011-02-22-160654_jeff-haynies-iphone.crash">test3_2011-02-22-160654_jeff-haynies-iphone.crash</td></td><td>2011-04-15T03:39:13.000+0000</td><td>17301</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-3198_18276/test3_2011-02-22-163241_opendoc.crash">test3_2011-02-22-163241_opendoc.crash</td></td><td>2011-04-15T03:39:14.000+0000</td><td>22926</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Thomas Huelbert 2011-04-15

   <div><p>occurs on 3.1.3 - 4.X.X</p>
   <p>attaching crash logs. Basically install app and tap "authorize"
   button, app will crash.</p>
   <p>Assigning to Stramer as per Blain. There is a work around (use
   fb log in button) fwiw. Could be cherry picked back in 1.6.X if
   needed (as per Blain). 1.7.0, high priority.</p></div></li>
<li>Thomas Huelbert 2011-04-15

   <div><p>and 4.2.1 crash log</p></div></li>
<li>Jon Alter 2011-04-15

   <div><h3>Associated Lighthouse Tickets</h3>
   <p><a href=
   "<a href="https://appcelerator.lighthouseapp.com/projects/32238/tickets/3148-new-facebook-module-crashes-on-non-multi-tasking-device-16-rc1" rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238/tickets/3148-new-facebook-module-crashes-on-non-multi-tasking-device-16-rc1</a>">
   <a href="https://appcelerator.lighthouseapp.com/projects/32238/tickets/3148-..." rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238/tickets/3148-...</a></a><br>
   <a href=
   "<a href="https://appcelerator.lighthouseapp.com/projects/32238/tickets/3150-facebook-module-in-rc1-mobile-fbdialog-like-option-needed" rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238/tickets/3150-facebook-module-in-rc1-mobile-fbdialog-like-option-needed</a>">
   <a href="https://appcelerator.lighthouseapp.com/projects/32238/tickets/3150-..." rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238/tickets/3150-...</a></a><br>
   <a href=
   "<a href="https://appcelerator.lighthouseapp.com/projects/32238/tickets/3149-facebook-module-in-rc1-mobile-safari-restricted" rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238/tickets/3149-facebook-module-in-rc1-mobile-safari-restricted</a>">
   <a href="https://appcelerator.lighthouseapp.com/projects/32238/tickets/3149-..." rel="nofollow" target="_blank">https://appcelerator.lighthouseapp.com/projects/32238/tickets/3149-...</a></a></p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/a3d2f8cb68bec4be6796d6733ded90b374bea403"
   title=
   "Changeset [a3d2f8cb68bec4be6796d6733ded90b374bea403]">[a3d2f8cb68bec4be6796d6733ded90b374bea403]</a>)
   [<a href="/projects/32238/tickets/3198" title=
   "Ticket #3198">#3198</a> state:fixed-in-qa] Add facebook login to
   things that have to be done on the main thread. Hat tip to Blain.
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/a3d2f8cb68bec4be6796d6733ded90b374bea403" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/a3d2f8cb68bec4be6796d6733ded90b374bea403</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/a3d2f8cb68be..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/a3d2f8cb68be...</a></a></p></div></li>
<li>Jeff Haynie 2011-04-15

   <div><p>(from <a href=
   "/projects/32238/changesets/e7b65f6606ca7e0e984bd3c4b7346e609d1fd445"
   title=
   "Changeset [e7b65f6606ca7e0e984bd3c4b7346e609d1fd445]">[e7b65f6606ca7e0e984bd3c4b7346e609d1fd445]</a>)
   [<a href="/projects/32238/tickets/3198" title=
   "Ticket #3198">#3198</a> state:fixed-in-qa] Add facebook login to
   things that have to be done on the main thread. Hat tip to Blain.
   <a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/e7b65f6606ca7e0e984bd3c4b7346e609d1fd445" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/e7b65f6606ca7e0e984bd3c4b7346e609d1fd445</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/e7b65f6606ca..." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/e7b65f6606ca...</a></a></p></div></li>
<li>Natalie Huynh 2011-04-15

   <div><p>Tested with Titanium SDK version: 1.7.0 (03/02/11 13:57 5d8c78a)
   on<br>
   iPhone 4 OS 4.2.1<br>
   iPhone 3g OS 3.1.2</p></div></li>
</ol>


<p><a href="/TIMOB/TIMOB-3198.json">JSON Source</a></p>