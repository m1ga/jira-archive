---
title: "[TIMOB-3223] iOS - showBookmark missing from searchBar"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-04-18T10:56:41.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>core, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Pedro Enrique</td></tr>
<tr><th>Assignee</th><td>Neeraj Gupta</td></tr>
<tr><th>Created</th><td>2011-04-15T03:39:50.000+0000</td></tr>
<tr><th>Updated</th><td>2013-11-06T19:24:12.000+0000</td></tr>
</table>

<h3>Description</h3>

According to Apple's [Documentation](<a href="http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISearchBar_Class/Reference/Reference.html%23//apple_ref/doc/uid/TP40007529)" rel="nofollow" target="_blank">http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISearchBar_Class/Reference/Reference.html%23//apple_ref/doc/uid/TP40007529)</a> there is a property for the searchbar that adds a Bookmark icon to the right side of it.

I modified a little bit the Obj-C code. Specifically, I added the following code to TiUISearchBar.m and now it is working as expected:
<code><pre>
-(void)setShowBookmark_:(id)value
{
    UISearchBar *search = [self searchBar];
    [search setShowsBookmarkButton:[TiUtils boolValue:value]];
    [search sizeToFit];
}
</pre></code>
To make this work on Titanium's code just added it to the searchbar with showBookmark true:
<code><pre>
var search = Ti.UI.createSearchBar({
    hintText: "Type Something",
    top:0,
    height:44,
    showBookmark: true
});
</pre></code>
Then for it's listener, I modified the Obj-C code a little more:
<code><pre>
// called when bookmark button pressed
- (void)searchBarBookmarkButtonClicked:(UISearchBar *)searchBar                   
{   
    //TODO: update to the new event model

    NSString * text = [searchBar text];
    [self.proxy replaceValue:text forKey:@"value" notification:NO];

    if ([self.proxy _hasListeners:@"bookmark"])
    {
        [self.proxy fireEvent:@"bookmark" withObject:[NSDictionary dictionaryWithObject:text forKey:@"value"]];
    }


    if (delegate!=nil &amp;&amp; [delegate respondsToSelector:@selector(searchBarBookmarkButtonClicked:)])
    {
        [delegate searchBarBookmarkButtonClicked:searchBar];
    }

}
</pre></code>
And the JS is like this:
<code><pre>
search.addEventListener('bookmark', function(e){
    alert(e);
});
</pre></code>

Tested in Ti SDK 1.6 Release
iPhone Simulator 4.2

<h3>Comments</h3>

<ol>
<li>Zipcar (Goss) 2011-04-15

   <div><p>This feature is necessary for our project, if it can be
   prioritized.</p></div></li>
<li>Reggie Seagraves 2011-04-15

   <div><p>As a low priority item, this will not be looked at until after
   Sprint 16.</p></div></li>
<li>Hidayet Dogan 2012-02-17

   I've pulled request on github for Pedro Enrique's solution with adding documentation.
   
   See here: <a href="https://github.com/appcelerator/titanium_mobile/pull/1458" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/1458</a>
   
   Ticket is already tagged for 1.8.0 release but I hope it'll be included in next release.</li>
<li>Hidayet Dogan 2012-04-05

   Tested with:
   
   Titanium SDK: 2.0.0 (04/06/12 00:35 8e4d621)
   iPhone SDK: 5.0
   iPhone Simulator
   
   Screenshots:
   
   [<a href="http://oi41.tinypic.com/34skkcy.jpg" rel="nofollow" target="_blank">http://oi41.tinypic.com/34skkcy.jpg</a>]
   [<a href="http://oi42.tinypic.com/xeg3ee.jpg" rel="nofollow" target="_blank">http://oi42.tinypic.com/xeg3ee.jpg</a>]
   [<a href="http://oi41.tinypic.com/2ibnf9s.jpg" rel="nofollow" target="_blank">http://oi41.tinypic.com/2ibnf9s.jpg</a>]
   [<a href="http://oi42.tinypic.com/30nayxs.jpg" rel="nofollow" target="_blank">http://oi42.tinypic.com/30nayxs.jpg</a>]
   
   Here are the functional test application source code:
   
   <code><pre>
   var window = Titanium.UI.createWindow({
   	backgroundColor: "white"
   });
   
   var searchBar = Titanium.UI.createSearchBar({
   	top: 0,
   	height: 44
   });
   
   searchBar.addEventListener('bookmark', function(e) {
   	alert('Bookmark button clicked. Value: ' + e.value);
   });
   
   var buttonFocus = Titanium.UI.createButton({
   	title: 'Focus',
   	top: 75,
   	left: 20,
   	height: 30
   });
   
   buttonFocus.addEventListener('click', function(e) {
   	searchBar.focus();
   });
   
   var buttonBlur = Titanium.UI.createButton({
   	title: 'Blur',
   	top: 75,
   	right: 20,
   	height: 30
   });
   
   buttonBlur.addEventListener('click', function(e) {
   	searchBar.blur();
   });
   
   var buttonBookmark = Titanium.UI.createButton({
   	title: 'Toggle Bookmark',
   	top: 125,
   	height: 30
   });
   
   buttonBookmark.addEventListener('click', function(e) {
   	searchBar.showBookmark = !searchBar.showBookmark;
   });
   
   window.add(searchBar);
   window.add(buttonFocus);
   window.add(buttonBlur);
   window.add(buttonBookmark);
   window.open();
   </pre></code></li>
<li>Stephen Tramer 2012-04-18

   Here is an additional test which should be run:
   
   <h4>Searchbar w/bookmark in tableview</h4>
   <code><pre>
   var window = Titanium.UI.createWindow({
       backgroundColor: "white"
   });
    
   var searchBar = Titanium.UI.createSearchBar({
   	showBookmark: true
   });
    
   searchBar.addEventListener('bookmark', function(e) {
       alert('Bookmark button clicked. Value: ' + e.value);
   });
    
   var table = Ti.UI.createTableView({
   	data:[{title:"Row 1"}, {title:"Row 2"}, {title:"Row 3"}],
   	search:searchBar
   });
   
   window.add(table);
   window.open();
   </pre></code></li>
<li>Natalie Huynh 2012-06-06

   Tested with 2.1.0.v20120606112649 iPad 3 5.1.1 and iPhone 3gs 4.3</li>
<li>Shameer Jan 2013-11-06

   Anvil testcase PR
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/4758" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4758</a>
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-3223.json">JSON Source</a></p>