---
title: "[TIMOB-3318] No Redirect when using Titanium.Network.createHTTPClient"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2017-06-08T23:28:58.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>tbs-1.8.0</td></tr>
<tr><th>Reporter</th><td>marco.schierhorn (at gmail)</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2011-04-15T03:42:02.000+0000</td></tr>
<tr><th>Updated</th><td>2017-06-08T23:28:58.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>I have an issue using Titanium.Network.createHTTPClient with
Android. Im trying to call an url <a href=
"<a href="http://www.motorsport-total.com/f1/live/htdocs/ticker.php" rel="nofollow" target="_blank">http://www.motorsport-total.com/f1/live/htdocs/ticker.php</a>"><a href="http://www.motorsport-total.com/f1/live/htdocs/ticker.php" rel="nofollow" target="_blank">http://www.motorsport-total.com/f1/live/htdocs/ticker.php</a></a>
. When i call this url a redirect should happen as you can see if
you use an usual web browser like firefox or chrome. It usually
redirects to this url : <a href=
"<a href="http://www.motorsport-total.com/f1/live/htdocs/ticker.php?strecken_id=19&amp" rel="nofollow" target="_blank">http://www.motorsport-total.com/f1/live/htdocs/ticker.php?strecken_id=19&amp</a>;event_id=7&amp;kunde=default">
<a href="http://www.motorsport-total.com/f1/live/htdocs/ticker.php?strecken_..." rel="nofollow" target="_blank">http://www.motorsport-total.com/f1/live/htdocs/ticker.php?strecken_...</a></a></p>
<p>Then i want to get those get parameters for using them in my app
to get the latest race results. This works great with iOs but
doenst work with Android. It still keeps on <a href=
"<a href="http://www.motorsport-total.com/f1/live/htdocs/ticker.php" rel="nofollow" target="_blank">http://www.motorsport-total.com/f1/live/htdocs/ticker.php</a>"><a href="http://www.motorsport-total.com/f1/live/htdocs/ticker.php" rel="nofollow" target="_blank">http://www.motorsport-total.com/f1/live/htdocs/ticker.php</a></a></p>
<p>Is there any way to get the redirect working or to get those get
parameters? I really need that fast because the iOs Version is
already available in the iTunes Store and our client wants to go
live with the Android Version. And thats the last big issue i
have.</p>
<p>This is the code:</p>
<pre>
<code>function get_last()
{
  var req = new r_ajax('<a href="http://www.motorsport-total.com/f1/live/htdocs/ticker.php" rel="nofollow" target="_blank">http://www.motorsport-total.com/f1/live/htdocs/ticker.php</a>', function(f)
  {
    Titanium.API.info('location of request = ' + f.location);
    var query = f.location.replace('<a href="http://www.motorsport-total.com/f1/live/htdocs/ticker.php?" rel="nofollow" target="_blank">http://www.motorsport-total.com/f1/live/htdocs/ticker.php?</a>', '');
    var vars = query.split("&amp;");
 
    for (var i = 0; i &lt; vars.length; i++) 
    {
      Titanium.API.error(vars[i]);
      var pair = vars[i].split("=");
 
      if (pair[0] == 'strecken_id') 
      {
        win.strecken_id = pair[1];
      }
 
      if (pair[0] == 'event_id') 
      {
        win.event_id = pair[1];
      }
    }
 
    Titanium.API.info('win.strecken_id = ' + win.strecken_id );
    Titanium.API.info('win.event_id = ' + win.event_id);
 
    xmlFile = '<a href="http://www.motorsport-total.com/f1/live/xmlfeed/generic/S_ID_" rel="nofollow" target="_blank">http://www.motorsport-total.com/f1/live/xmlfeed/generic/S_ID_</a>' + win.strecken_id + '_EV_ID_' + win.event_id + '.xml';
    xmlNewsFile = '<a href="http://www.motorsport-total.com/f1/live/xmlfeed/generic/S_ID_" rel="nofollow" target="_blank">http://www.motorsport-total.com/f1/live/xmlfeed/generic/S_ID_</a>' + win.strecken_id + '_EV_ID_' + win.event_id + '_news.xml';
    createTickerValues(
    {
      url: xmlFile
    }, showLive, live_err);
  }, function()
  {
    Titanium.API.error('Error at function get_last live.js = ' + e);
  }, 'GET').send();
}</code>
</pre>
<pre>
<code>var r_ajax =  function(url,on_ok, on_err, method, async) {
    var async = !!async ? true : false;
    var method = !!method ? method : 'POST';
    var xhr = Titanium.Network.createHTTPClient();
 
    xhr.onload = function()
  {
        on_ok(this);
        xhr.abort();
    };
 
    xhr.onerror = function(e){
        on_err(e);
        xhr.abort();
    };  
 
 
    xhr.open(method,url,async);
 
    return {
        xhr:xhr,
        send:function(data) {
            xhr.send(data); 
        },
        abort:function() { xhr.abort();}
    };
};</code>
</pre></div>

<h3>Comments</h3>

<ol>
<li>Alan Leard 2011-04-15

   <div><p><strong>Problem</strong></p>
   <p>Confirmed that above code works properly if not redirected and
   fails only on Android when redirect is required.<br></p>
   <p><strong>Test</strong></p>
   <p>Tested on TiDev 1.6 and 1.7 (03/10/11) emulator APIs 2.2.</p>
   <p>Failed test results:</p>
   <p>win.strecken_id = undefined<br>
   win.event_id = undefined</p>
   <p><strong>Ticket Reference</strong></p>
   <p>HD Ticket Reference: <a href=
   "<a href="http://developer.appcelerator.com/helpdesk/view/76362" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/76362</a>"><a href="http://developer.appcelerator.com/helpdesk/view/76362" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/76362</a></a></p></div></li>
<li>Lee Morris 2017-06-08

   Closing ticket as there has been no input for the last 6 years. Any problems, please file a new ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-3318.json">JSON Source</a></p>