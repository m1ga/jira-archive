---
title: "[TIMOB-3341] iOS: navGroup closing window turns black before animation"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-10-27T15:46:16.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.6.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-26, Release 1.8.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>defect, ios, reported-1.5.1, reported-1.6.0, rplist</td></tr>
<tr><th>Reporter</th><td>Jon Alter</td></tr>
<tr><th>Assignee</th><td>Sabil Rahim</td></tr>
<tr><th>Created</th><td>2011-04-15T03:42:30.000+0000</td></tr>
<tr><th>Updated</th><td>2011-10-27T15:46:16.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>When you have a navGroup and open a new window using it and then
close the window using the navGroup the window turns black before
the navGroup goes back. If you click the back button the window
does not turn black before the navGroup goes back to the previous
page.</p>
<p>Step 1: launch the sample code below<br>
Step 2: tap the red window to open the blue window<br>
Step 3: click the 'close' button on the blue window to go back to
the red one<br>
Step 4: notice that the blue window turns black before the slide
animation back to the red window<br>
Step 5: click on the red window again<br>
Step 6: tap the left nav button<br>
Step 7: notice that the blue window does not turn black before
going back to the red window</p>
<h3>app.js</h3>
<pre>
<code class="javascript">var win = Titanium.UI.createWindow();

var win1 = Titanium.UI.createWindow({
    backgroundColor:"red",
    title:"Red Window"
});
win1.addEventListener('click', function(){
    nav.open(toolsWindow);
});

var nav = Titanium.UI.iPhone.createNavigationGroup({
   window: win1
});

var toolsWindow = Ti.UI.createWindow({
    title: 'Blue Window',
    url: 'tools_window.js',
    nav: nav,
    exitOnClose: false,
    backgroundColor: 'blue'
});

win.add(nav);
win.open();</code>
</pre>
<h3>tools_window.js</h3>
<pre>
<code class="javascript">var win = Ti.UI.currentWindow;

var button = Ti.UI.createButton({
    title: 'close',
    height: 40,
    width: 300,

});
button.addEventListener('click', function(e) {
    Ti.API.info('clicked close');
    win.nav.close(win);
});

win.add(button);</code>
</pre>
<h3>Tested on</h3>
<p>TiSDK 1.5.1, 1.6.0, iOS SDK 4.2</p>
<h3>Associated Helpdesk Ticket</h3>
<p><a href=
"<a href="http://developer.appcelerator.com/helpdesk/view/76439" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/76439</a>"><a href="http://developer.appcelerator.com/helpdesk/view/76439" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/76439</a></a></p></div>

<h3>Comments</h3>

<ol>
<li>Pedro Enrique 2011-05-18

   Similar thing happens in a tabgroup. Replace the app.js code from above with this one:
   <code><pre>
   
   var tabgroup = Ti.UI.createTabGroup();
   
   var win1 = Titanium.UI.createWindow({
       backgroundColor:"red",
       title:"Red Window"
   });
   var tab = Ti.UI.createTab({
   	window: win1
   });
   
   win1.addEventListener('click', function(){
    	var toolsWindow = Ti.UI.createWindow({
   	    title: 'Blue Window',
   	    url: 'd.js',
   	    nav: tab,
   	    exitOnClose: false,
   	    backgroundColor: 'blue'
   	});
      tab.open(toolsWindow);
   });
   
   tabgroup.addTab(tab);
   tabgroup.open();
   </pre></code>
   When closing the next window with the custom button, the window does animate to the side and closes, but the navBar elements stay in their place instead of sliding over with the window the way they would by pressing the built in back button.
   
   This bug seems related, that's why I'm not opening a separate ticket for it.
   
   Helpdesk ticket: <a href="http://support.appcelerator.com/tickets/APP-218955/homepage" rel="nofollow" target="_blank">http://support.appcelerator.com/tickets/APP-218955/homepage</a></li>
<li>Sabil Rahim 2011-06-28

   <a href="https://github.com/appcelerator/titanium_mobile/pull/169" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/169</a> the pull request associated with it</li>
<li>Sabil Rahim 2011-06-28

   Its been merged and was cherry picked into 1.7.x</li>
<li>Vikramjeet Singh 2011-08-29

   Tested On: 
   Mac OSX Lion
   TiMob: 1.8.0v20110819142548
   TiStud: 1.0.4.201108101535
   
   Devices:
   iPhone4 version 4.2.10
   iPad2 version 4.3.5
   iPod 3</li>
</ol>


<p><a href="/TIMOB/TIMOB-3341.json">JSON Source</a></p>