---
title: "[TIMOB-3375] TiAPI: Implement several missing Ti.Media.AudioPlayer features"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2018-01-13T20:47:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>api</td></tr>
<tr><th>Reporter</th><td>Ronnie Swietek</td></tr>
<tr><th>Assignee</th><td>Hans Kn√∂chel</td></tr>
<tr><th>Created</th><td>2011-04-15T03:43:29.000+0000</td></tr>
<tr><th>Updated</th><td>2018-08-06T17:41:06.000+0000</td></tr>
</table>

<h3>Description</h3>

*Problem description*
Ti.Media.AudioPlayer is lacking several features. Because of this, developing an audio player with the current API is not possible. For example, Ti.Media.Sound has a duration property, which isn't available in Ti.Media.AudioPlayer.

*Proposed fixes (available in linked repositry)*
- ADD duration read-only property
- ADD time property (for seeking)
- ADD volume property
- ADD next/prev and seeking remote control events
- FIX play/pause remote controls don't work when using background audio
- FIX changing the URL doesn't work (unless you stop first)
- FIX progress events only fire for the first URL

Also suggested on <a href="http://stackoverflow.com/q/35157844/4626813" rel="nofollow" target="_blank">http://stackoverflow.com/q/35157844/4626813</a>
- Expose contentType header to be send when retrieving the file/stream

<h3>Comments</h3>

<ol>
<li>Gerry Cardinal III 2011-04-15

   <div><p>In iOS, Ti.Media.AudioPlayer is missing many key features and
   has a few bugs as well. I have been working on them in Instant
   Automatic's fork and will be submitting a pull request to
   Appcelerator soon.</p>
   <p>For completeness, here is what I am working on:<br>
   -ADD duration read-only property -ADD time property (for seeking)
   -ADD volume property -ADD next/prev and seeking remote control
   events -FIX play/pause remote controls don't work when using
   background audio -FIX changing the URL doesn't work (unless you
   stop first) -FIX progress events only fire for the first URL</p>
   <p>Let me know if I am missing anything.</p></div></li>
<li>Ronnie Swietek 2011-04-15

   <div><p>It is missing many things..another one is seek definitely. What
   is Instant Automatic? I would love to see the features added</p></div></li>
<li>Gerry Cardinal III 2011-04-15

   <div><p>Instant Automatic is a mobile applications startup that I work
   for. We currently use Titanium to develop our applications.</p>
   <p>I have completed and tested all the work I described above and
   pushed it to our fork on Titanium: <a href=
   "<a href="https://github.com/organizations/instantautomatic" rel="nofollow" target="_blank">https://github.com/organizations/instantautomatic</a>"><a href="https://github.com/organizations/instantautomatic" rel="nofollow" target="_blank">https://github.com/organizations/instantautomatic</a></a></p>
   <p>I will be doing even more testing early next week and then I
   will submit the pull request to Appcelerator. I have no clue what
   their process is for responding to pull requests.</p></div></li>
<li>Ronnie Swietek 2011-04-15

   <div><p>whoa that is really cool! I haven't looked into the user
   submitted plugins for Ti yet. Any examples of how someone would use
   your new code? You write the plugin in obj-c right?</p></div></li>
<li>Gerry Cardinal III 2011-04-15

   <div><p>Titanium does offer support for custom modules and we have
   developed some of these for our projects, but this is not a custom
   module. I have made these changes to Titanium itself (specifically,
   Ti.Media.AudioPlayer). I will be submitting a pull request with
   updates to the Kitchen Sink that showcase all of the new
   functionality.</p>
   <p>Both Titanium and custom modules (for iOS) are written in
   Objective-C.</p>
   <p>Feel free to clone or fork the Instant Automatic fork of
   Titanium and play with the new features.</p></div></li>
<li>Stefan Schleich 2011-09-14

   I've just tested Gerry's changes to the AudioPlayer and they work pretty well! Is there a chance his changes get merged into the official mobile SDK?
   
   Gerry, thanks for the great work!</li>
<li>Daniel Sefton 2013-02-26

   Hi Gerry,  
   
   Did you manage to submit a pull request for this? We'd really appreciate it if you did, or if you already have a link would be great. Thanks!  
   
   New URL where the commits can be found is here: <a href="https://github.com/instantautomatic/titanium_mobile/tree/master/iphone/Classes/AudioStreamer" rel="nofollow" target="_blank">https://github.com/instantautomatic/titanium_mobile/tree/master/iphone/Classes/AudioStreamer</a>  </li>
<li>Juan Pablo Gonzalez Barrientos 2015-05-14

   Does someone has a workaround to "setTime()" method for IOS. Thank you!</li>
<li>Jason Priebe 2015-05-14

   I wish.  I was just looking all over the net for a third party audio player module for ios.  I found some for android, but none for ios.  Maybe it would be possible to pull the code from the titanium audio player into a new module and add Gerry's changes.  I might try that for the next revision of our app.</li>
<li>kosso 2015-08-06

    While trying to implement an audio player, I've also come against the lack of functionality listed in this issue when it comes to providing a viable product to play remote audio. 
    
    One of the missing methods is a 'seek' (setTime). Bizarrely the AudioStreamerCUR.m currently used in the Titanium SDK already contains a seekToTime:time method but this has yet to be implemented. 
    
    The reason that I need a seek is to overcome an issue which occurs when you try and pause a streaming mp3 url with Ti.Media.audioPlayer. What I found was that after resuming the paused audio, the STOPPING and STOPPED events will fire after a few seconds, ending the audio before it should. As if some data in the audio buffer has just been *forgotten*.  So, I wanted to try and take a note of the current progress time when paused, then instead of just 'start'ing the playback again, I'd seek to the paused time and continue playback. (This does require the remote url to support Partial Content, since that's how seekToTime works.)
    
    During the past few days research on the matter, I found a module which employs the same seekToTime method from Matt Gallagher's AudioStreamer library.  It does work, but has some glitches. <a href="https://github.com/atsusy/tiaudiostreaming" rel="nofollow" target="_blank">https://github.com/atsusy/tiaudiostreaming</a>
    
    The trouble is, is that the versions being used by this module *and* the Ti SDK are woefully out of date. The Github Network Graph of the AudioStreamer project [ <a href="https://github.com/mattgallagher/AudioStreamer/network" rel="nofollow" target="_blank">https://github.com/mattgallagher/AudioStreamer/network</a> ] shows many years of improvements. The furthest being Alex Crichton's <a href="https://github.com/alexcrichton/AudioStreamer" rel="nofollow" target="_blank">https://github.com/alexcrichton/AudioStreamer</a> where much mode modern methods are employed and many deprecations removed.  (AudioStreamer was written before Apple even released the iPhone 3GS, in 2008! ;) ) 
    
    The latest version on his branch also has a host of new features, such as metadata from ShoutCast servers, ID3 tags, etc. 
    
    After even further research, I've also found that maybe a solution with AVFoundation/AVPlayer might be worth a shot. I'm going to attempt to build a module (and I don't *do* Objective-C ;) ) and see how I get on.
    
    K
    </li>
<li>kosso 2015-08-09

    If anyone's interested, here's a stab I've had at building a module based on AVPlayer to try and replicate/replace/update the Ti.Media.audioPlayer.  It's a bit shoddy and thrown together by someone who doesn't quite know what he's doing, but it's a start and it works. ;) It provides seek and speed (rate) methods too. 
    
    <a href="https://github.com/kosso/TiAVPlayer" rel="nofollow" target="_blank">https://github.com/kosso/TiAVPlayer</a>
    
    </li>
<li>Shawn Lan 2015-12-30

    Hi Kosso,
    
    I started using your module. It works great. Now I want to try your android module: <a href="https://github.com/kosso/tiandroidaudioplayer" rel="nofollow" target="_blank">https://github.com/kosso/tiandroidaudioplayer</a> and hope it's in parity with <a href="https://github.com/kosso/TiAVPlayer" rel="nofollow" target="_blank">https://github.com/kosso/TiAVPlayer</a> so that I can re-use my code. But looks like it doesn't. For example, the debug tells me it doesn't have seekThenPlay(). Is it incomplete? Or did I miss anything?
    
    Thanks a lot!</li>
<li>kosso 2015-12-30

    Hi,
    
    Probably best to keep this discussion on GitHub but a) Thanks! ;) and b) 
    
    you should be able to use  audioPlayer.seek(new_ms);
    
    where audioPlayer refers to either the iOS or Android module and it should work (and play) and set the time in ms. 
    
    I have a feeling I didn't finish up the seekComplete event on both as I didn't need it in the app I was working on. 
    
    But mostly, everything works fine across both platforms for live radio streams and remote audio urls (mp3, m4a, etc).
    
    Cheers!
    
    </li>
<li>Brad Ball 2016-01-12

    any update on this? Being able to seek/scrub to a specific position/time is basic functionality that any audio player should be able to handle.</li>
<li>Patrick Mounteney 2016-02-03

    Simply being able to pass in a content-type in the Ti AudioStreamer constructor would be a great help. I've hacked the AudioStreamer to recognise an AAC extension so it will trigger kAudioFileAAC_ADTSType, but as there area fair number of different url schemes out there, and given that the content-type (in my case) is known, it's cleaner to pass it in the Ti constructor. Unfortunately my Objective-C skills are minimal and I have to lie down in a dark room after even the simplest hack.
    
    So my addition to the original feature requests (of several years ago) would be a content-type property.</li>
<li>Hans Kn√∂chel 2018-01-13

    Considered to be added as part of TIMOB-24909.
    
    *EDIT*:
    - (Already available) ADD duration read-only property
    - (Already available) ADD time property (for seeking)
    - (Already available) ADD volume property
    - (Added in the linked ticket, used via <code>seekToTime</code>) ADD next/prev and seeking remote control events
    - (Fixed as part of using AVPlayer) FIX play/pause remote controls don't work when using background audio
    - (Fixed) FIX changing the URL doesn't work (unless you stop first)
    - (Fixed) FIX progress events only fire for the first URL</li>
<li>Eric Merriman  2018-08-06

    Closing as a duplicate. If this is in error, please reopen.</li>
</ol>


<p><a href="/TIMOB/TIMOB-3375.json">JSON Source</a></p>