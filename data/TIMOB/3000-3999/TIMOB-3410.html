---
title: "[TIMOB-3410] simple table view search crashes on 1.7.0"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-05-16T11:00:03.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.7.0, Sprint 2011-13</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios, release-1.7.0, tableview</td></tr>
<tr><th>Reporter</th><td>Leo Lou</td></tr>
<tr><th>Assignee</th><td>Reggie Seagraves</td></tr>
<tr><th>Created</th><td>2011-04-15T03:43:57.000+0000</td></tr>
<tr><th>Updated</th><td>2011-05-16T11:00:03.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><pre>
<code class="javascript">
var win = Titanium.UI.currentWindow;
var search = Titanium.UI.createSearchBar({
    showCancel:true,
    height:43,
    top:0
});
var data = [];
 
data[0] = Titanium.UI.createTableViewSection({headerTitle:'Header 1'});
data[0].add(Titanium.UI.createTableViewRow({title:'Row 1'}));
 
data[1] = Titanium.UI.createTableViewSection({headerTitle:'Header 2'});
data[1].add(Titanium.UI.createTableViewRow({title:'Row 2'}));

search.addEventListener('focus', function(e)
{
    Ti.API.info('focus');
});

var tableview = Titanium.UI.createTableView({
  data:data,
  search:search,
 
});

tableview.addEventListener('click',function(e) {
  Ti.API.info(e);
});

win.add(tableview);</code>
</pre>
<p>crashes on 1.7.0 (with iOS 4.1)<br>
works on 1.6.2</p>
<p>steps to reproduce:<br>
1) type r in search box<br>
2) click row 1</p>
<p>error:<br>
Invalid update: invalid number of sections. The number of sections
contained in the table view after the update (2) must be equal to
the number of sections contained in the table view before the
update (1)</p></div>

<h3>Comments</h3>

<ol>
<li>Leo Lou 2011-04-15

   <div><p><strong><em>Terminating app due to uncaught exception
   'NSInternalInconsistencyException', reason: 'Invalid update:
   invalid number of sections. The number of sections contained in the
   table view after the update (18) must be equal to the number of
   sections contained in the table view before the update (1), plus or
   minus the number of sections inserted or deleted (0 inserted, 0
   deleted).'</em></strong> Call stack at first throw: ( 0
   CoreFoundation 0x0388ab99 <strong>exceptionPreprocess + 185<br>
   1 libobjc.A.dylib 0x039da40e objc_exception_throw + 47<br>
   2 CoreFoundation 0x03843238 +[NSException raise:format:arguments:]
   + 136<br>
   3 Foundation 0x006ade37 -[NSAssertionHandler
   handleFailureInMethod:object:file:lineNumber:description:] +
   116<br>
   4 UIKit 0x0092d9a6 -[UITableView(<em>UITableViewPrivate)</em>
   endCellAnimationsWithContext:] + 7806<br>
   5 UIKit 0x0091d4d3 -[UITableView
   reloadRowsAtIndexPaths:withRowAnimation:] + 56<br>
   6 UIKit 0x08b0d898 -[UITableViewAccessibility(Accessibility)
   reloadRowsAtIndexPaths:withRowAnimation:] + 74<br>
   7 MyApp 0x00074648 -[TiUITableView hideSearchScreen:] + 604<br>
   8 MyApp 0x000731be -[TiUITableView
   triggerActionForIndexPath:fromPath:tableView:wasAccessory:search:name:]
   + 1637<br>
   9 MyApp 0x00079222 -[TiUITableView
   tableView:didSelectRowAtIndexPath:] + 205<br>
   10 UIKit 0x00926a48 -[UITableView
   <em>selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] +
   1140<br>
   11 UIKit 0x0091d32e -[UITableView</em> userSelectRowAtIndexPath:] +
   219<br>
   12 Foundation 0x0063221a</strong> NSFireDelayedPerform + 441<br>
   13 CoreFoundation 0x0386bf73
   <strong>CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION</strong>
   + 19<br>
   14 CoreFoundation 0x0386d5b4 <strong>CFRunLoopDoTimer + 1364<br>
   15 CoreFoundation 0x037c9dd9</strong> CFRunLoopRun + 1817<br>
   16 CoreFoundation 0x037c9350 CFRunLoopRunSpecific + 208<br>
   17 CoreFoundation 0x037c9271 CFRunLoopRunInMode + 97<br>
   18 GraphicsServices 0x0547100c GSEventRunModal + 217<br>
   19 GraphicsServices 0x054710d1 GSEventRun + 115<br>
   20 UIKit 0x008c1af2 UIApplicationMain + 1160<br>
   21 MyApp 0x0000388c main + 362<br>
   22 MyApp 0x000026b1 start + 53<br>
   ) terminate called after throwing an instance of 'NSException'</p></div></li>
<li>Leo Lou 2011-04-15

   <div><p>fixed in 1.7.0 Apr 1 r1203e55e</p></div></li>
<li>Thomas Huelbert 2011-05-11

   thanks for confirming the fix Leo - also checked 3.1.3 iphone3, 4.3.3 ipad2 [INFO] Titanium SDK version: 1.7.0 (05/10/11 19:34 879871b...)</li>
</ol>


<p><a href="/TIMOB/TIMOB-3410.json">JSON Source</a></p>