---
title: "[TIMOB-3424] iOS: Label with backgroundImage Error"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2014-01-28T23:59:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.2.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>module_label, qe-closed-3.2.2, qe-testadded, supportTeam</td></tr>
<tr><th>Reporter</th><td>Alan Leard</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2011-04-15T03:45:01.000+0000</td></tr>
<tr><th>Updated</th><td>2014-03-13T10:24:36.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>
Error message shows in Ti Console when using a backgroundImage
on a label. 
<h4>Error Message:</h4>
 
<code><pre>&lt;Error&gt;: CGContextConcatCTM: invalid context 0x0
&lt;Error&gt;: CGContextSetInterpolationQuality: invalid context 0x0
&lt;Error&gt;: CGContextDrawImage: invalid context 0x0
&lt;Error&gt;: CGBitmapContextCreateImage: invalid context 0x0</pre></code>
 
<h4>Test Code </h4>
 
<code><pre>
var window = Titanium.UI.createWindow({  
    title:'LabelImageTest',
    backgroundColor:'#fff'
});

var label = Titanium.UI.createLabel({
    backgroundImage: 'default_app_logo.png',
    text: 'This is a label with a backgroundImage'
});
window.add(label);
window.open();
</pre></code>
 
<h4>Ticket Reference </h4>
 
 <a href="http://developer.appcelerator.com/helpdesk/view/76638" rel="nofollow" target="_blank">http://developer.appcelerator.com/helpdesk/view/76638</a> 

<h3>Comments</h3>

<ol>
<li>Gerry Cardinal III 2011-04-22

   I fixed it by commenting out the code that wasn't doing anything anyway:
   
       -(void)setBackgroundImage_:(id)url
       {
           if (url != nil) {
               // !!!: this doesn't work because self.frame.size isn't set
               //        UIImage* bgImage = [UIImageResize resizedImage:self.frame.size 
               //                                  interpolationQuality:kCGInterpolationDefault
               //                                                 image:[self loadImage:url]
               //                                               hires:NO];
   
               // Resizing doesn't preserve stretchability.  Should we maybe fix this?
               UIImage* bgImage = [self loadImage:url];
               if (backgroundView == nil) {
                   backgroundView = [[UIImageView alloc] initWithImage:bgImage];
                   backgroundView.userInteractionEnabled = NO;
                   [self insertSubview:backgroundView atIndex:0];
                   repad = YES;
                   [self padLabel];
               }
               else {
                   backgroundView.image = bgImage;
                   [backgroundView setNeedsDisplay];
   
                   repad = YES;
                   [self padLabel];
               }
           }
           else {
               if (backgroundView) {
                   [backgroundView removeFromSuperview];
                   RELEASE_TO_NIL(backgroundView);
               }
           }
   
           self.backgroundImage = url;
       }</li>
<li>Jon Alter 2011-08-05

   <h4>Associated Helpdesk Ticket</h4>
   <a href="http://appc.me/c/APP-593963" rel="nofollow" target="_blank">http://appc.me/c/APP-593963</a></li>
<li>Roel kramer 2011-08-26

   Got this problem as well! Will find another workaround.</li>
<li>Junaid Younus 2012-05-16

   Tested with 2.0.1GA2 on a HTC Sensation 4G, unable to reproduce this issue. Ticket closed.</li>
<li>Neeraj Gupta 2012-05-16

   This issue was filed for iOS platform so it needs to be verified against the same platform.</li>
<li>Shak Hossain 2014-01-28

   Resolving this since we can't reproduce it with 3.2GA</li>
<li>Neha Mittal 2014-03-10

   Verified as fixed using below environment so closing the issue:
   
   Environment:
   Appc Studio: 3.2.2.201402280732
   Sdk: 3.2.2.v20140221161255
   acs: 1.0.14
   npm: 1.3.2
   alloy:1.3.1
   titanium:3.2.1
   titanium-code-processor:1.1.0
   Xcode: 5.1-beta5
   Osx: Maverick(10.9.2)
   Device: iPhone 5S (iOS 7.1)
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-3424.json">JSON Source</a></p>