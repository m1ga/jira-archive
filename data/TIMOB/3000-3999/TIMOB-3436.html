---
title: "[TIMOB-3436] iOS: tableview "scroll" event only fires when dragging"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2017-06-21T22:09:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Brian</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2011-04-15T03:45:10.000+0000</td></tr>
<tr><th>Updated</th><td>2017-06-21T22:09:34.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>TiUITableView only fires the "scroll" event when the underlying
scrollView is being dragged. There is actually a check for
scrollView.isDragging in the scrollViewDidScroll delegate method
around line 2020. We actually need to be notified at all times that
the tableview is scrolling, regardless of whether or not it's being
dragged. This is standard functionality that is available in native
iOS and allows us to do much more with the UI. It also allows us to
deal with the content inset issues when using headerPullview.</p>
<p>When you listen to a ScrollView's "scroll" event you get a
boolean called "dragging" on the event, this should also be
available on the TableView's "scroll" event. We already modified
the Titanium code-base to support this in our project. We removed 3
lines of code and added one line. The required changes are outlined
bedlow. Also the documentation for a TableView's "scroll" event
would need to be updated to show the new boolean "dragging".</p>
<p>TiUITableView.m<br>
Goto line 2020 and into the method -
(void)scrollViewDidScroll:(UIScrollView *)scrollView<br>
Remove the scrollView.isDragging check<br>
Add the following to the event NSMutableDictionary:<br>
[event setObject:NUMBOOL([scrollView isDragging])
forKey:@"dragging"];</p>
<p>Best,</p>
<p>Brian</p></div>

<h3>Comments</h3>

<ol>
<li>Brian 2011-04-15

   <div><p>I went ahead and made the changes...here is the pull
   request:</p>
   <p><a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/pull/85" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/85</a>"><a href="https://github.com/appcelerator/titanium_mobile/pull/85" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/85</a></a></p>
   <p>Thanks,</p>
   <p>Brian</p></div></li>
<li>Thiago 2011-04-15

   <div><p>Hi Brian, I have some problems too with pull to refresh solution
   with iphone &lt;= 3G, as you mentioned.<br>
   I implemented your fix and still have some delay on scrollend to
   set some control variables.</p>
   <p>Well, I would like to know how you fixed pull to refresh issues
   with your fix.</p>
   <p>Thanks.</p></div></li>
<li>Brian 2011-04-15

   <div><p>@Thiago,</p>
   <p>On your tableView's scroll event you have to check for dragging
   and if it's not dragging but is reloading then you force the
   headerPullView to show. Here is an example:</p>
   <pre>
   <code>tableView.addEventListener('scroll', function(e) {
       var offset = e.contentOffset.y;
   
       if (e.dragging &amp;&amp; !reloading) {
           if (!pulling &amp;&amp; offset &lt;= -65.0) {
               pulling = true;
               var t = Ti.UI.create2DMatrix();
               t = t.rotate(-180);
               arrow.animate({transform:t,duration:100});
               statusLabel.text = "Release to update...";
           }
           else if (pulling &amp;&amp; offset &gt; -65.0 &amp;&amp; offset &lt; 0) {
               pulling = false;
               var t = Ti.UI.create2DMatrix();
               arrow.animate({transform:t,duration:100});
               statusLabel.text = "Pull down to update...";
           }
       }
       if (!e.dragging &amp;&amp; reloading) {
           tableView.scrollToTop(-65, {animated:true});
       }
   });</code>
   </pre></div></li>
<li>Thiago 2011-04-15

   <div><p>Ohh, I was doing everything right, except using scrollToTop. I
   was using the bugged setContentInsets instead of scrollToTop (by
   the way, if you set animated to true, it goes to the top and then
   the scroll goes to the desired position - is there a way to fix
   this [the best solution I found was setting animated to
   false]?).</p>
   <p>Thanks! And I hope they can fix all this weird code and all
   developers like us can sleep better in the end of the day.</p></div></li>
<li>Brian 2011-04-15

   <div><p>Ya setting animated to false is probably the best way...glad you
   were able to get everything working :)</p></div></li>
<li>Lee Morris 2017-06-21

   Closing ticket due to time passed and lack of progress for a number of years. Any problems, please file a new ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-3436.json">JSON Source</a></p>