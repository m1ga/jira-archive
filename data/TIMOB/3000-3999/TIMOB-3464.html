---
title: "[TIMOB-3464] Android: Throws NullPointerException when tag not found"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-11-05T13:40:46.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.6.2</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-30, Release 1.8.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Jon Alter</td></tr>
<tr><th>Assignee</th><td>Reggie Seagraves</td></tr>
<tr><th>Created</th><td>2011-04-15T03:45:30.000+0000</td></tr>
<tr><th>Updated</th><td>2011-11-05T13:40:46.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>In Android, when you getElementsByTagName() and element that
doesn't exist, It throws a NPE.<br>
note: iOS does not throw an exception</p>
<p>Step 0: Notice 'bas' is not in the xmlString in the example<br>
Step 1: Paste example code below into appi.js<br>
Step 2: Run example<br>
Step 3: Click 'Find Bas'<br>
Step 4: Notice the Null Pointer Exception</p>
<pre>
<code class=
"javascript">var xmlString = '&lt;items&gt;&lt;foo&gt;FOO&lt;/foo&gt;&lt;bar&gt;BAR&lt;/bar&gt;&lt;/items&gt;';

var window = Ti.UI.createWindow({
    backgroundColor: 'green'
});

var button = Ti.UI.createButton({
    title: 'Find Foo',
    height: 60,
    width: 100,
  top: 40
});
button.addEventListener('click', function(e){
    var xml = Titanium.XML.parseString(xmlString);
  var element = xml.getElementsByTagName("foo");
  Ti.API.info( element.item(0).text );
});

var button2 = Ti.UI.createButton({
    title: 'Find Bas',
    height: 60,
    width: 100,
  top: 140
});
button2.addEventListener('click', function(e){
    var xml = Titanium.XML.parseString(xmlString);
  var element = xml.getElementsByTagName("bas");
  Ti.API.info( element.item(0).text );
});

window.add(button);
window.add(button2);
window.open();</code>
</pre>
<h3>Tested On</h3>
<p>TiSDK 1.6.1, Android SDK 2.1</p>
<h3>Associated Helpdesk Ticket</h3>
<p><a href=
"<a href="http://support-admin.appcelerator.com/display/WEJ-65612-589" rel="nofollow" target="_blank">http://support-admin.appcelerator.com/display/WEJ-65612-589</a>"><a href="http://support-admin.appcelerator.com/display/WEJ-65612-589" rel="nofollow" target="_blank">http://support-admin.appcelerator.com/display/WEJ-65612-589</a></a></p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-3464_22652/Screen Shot 2011-08-24 at 11.13.40 AM (2).png">Screen Shot 2011-08-24 at 11.13.40 AM (2).png</td></td><td>2011-08-24T11:14:48.000+0000</td><td>2983794</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-07-26

   The failcase above will cause an exception even after the fix, since you can't read <code>.text</code> from null ( <code>.item(0)</code> will return null since there are no matching items.)
   
   Simpler failcase app.js:
   
   <code><pre>
   var xmlString = "&lt;benny/&gt;";
   var doc = Ti.XML.parseString(xmlString);
   var elem = doc.getElementsByTagName("mickey").item(0);
   //Titanium.Network;
   </pre></code></li>
<li>Bill Dawson 2011-07-26

   Pull request ready:
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/283" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/283</a></li>
<li>Vikramjeet Singh 2011-08-24

   Test fails on iOS while using simpler test case given by Bill Dawson in above comment. Error is pasted below and also screenshot of the error is attached.
   
   Tested On: 
   Mac OSX Lion
   TiMob: 1.8.0.v20110819142548
   TiStud: 1.0.4.201108101535
   
   Devices used:
   iPhone4 4.2.10
   iPad2 4.3.5
   iPhone Simulator
   
   Following is the error:
   
   
   [DEBUG] loading: /Users/vsingh/Library/Application Support/iPhone Simulator/4.3.2/Applications/5C91A3FF-5977-4666-95E8-89A2BA7B2625/QTS.app/atestList.js, resource: atestList_js
   
   [DEBUG] loading: /Users/vsingh/Library/Application Support/iPhone Simulator/4.3.2/Applications/5C91A3FF-5977-4666-95E8-89A2BA7B2625/QTS.app/tests/ios/2968.js, resource: tests/ios/2968_js
   
   [DEBUG] loading: /Users/vsingh/Library/Application Support/iPhone Simulator/4.3.2/Applications/5C91A3FF-5977-4666-95E8-89A2BA7B2625/QTS.app/tests/xplat/3464.js, resource: tests/xplat/3464_js
   
   [ERROR] Script Error = Result of expression 'doc.getElementsByTagName("mickey")' [null] is not an object. at 3464.js (line 1).</li>
<li>Vikramjeet Singh 2011-08-24

   attached screenshot with error</li>
<li>Natalie Huynh 2011-08-25

   Tested with 1.8.0.v20110819142548
   Motorola Xoom 3.2
   Nexus One 2.2.2</li>
<li>Don Thorp 2011-11-05

   Fixing labels.</li>
</ol>


<p><a href="/TIMOB/TIMOB-3464.json">JSON Source</a></p>