---
title: "[TIMOB-3465] Android: XML Cannot call method parseString if only defined inside an event listener"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-07-27T09:22:59.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.6.2</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-30, Release 1.8.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>reported-1.6.1, tooling, xml</td></tr>
<tr><th>Reporter</th><td>Jon Alter</td></tr>
<tr><th>Assignee</th><td>Natalie Huynh</td></tr>
<tr><th>Created</th><td>2011-04-15T03:45:31.000+0000</td></tr>
<tr><th>Updated</th><td>2011-08-26T16:15:19.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>On Android, If parseString is only defined inside an event
listener then you will get an error.<br></p>
<h3>Note</h3>
<p>This only happens until you define it outside of the
eventListener once. After that it will work fine in that
application even if it is inside an event listener. In order to
reproduce this error you MUST create a new application.</p>
<p>Step 1: Create a NEW application<br>
Step 2: Paste the example below into app.js<br>
Step 3: Run the app<br>
Step 4: Click 'Find Foo'<br>
Step 5: Notice Runtime Error (picture of error attached)</p>
<pre>
<code class=
"javascript">var xmlString = '&lt;items&gt;&lt;foo&gt;FOO&lt;/foo&gt;&lt;bar&gt;BAR&lt;/bar&gt;&lt;/items&gt;';

var window = Ti.UI.createWindow({
    backgroundColor: 'green'
});

var button = Ti.UI.createButton({
    title: 'Find Foo',
    height: 60,
    width: 100,
  top: 40
});
button.addEventListener('click', function(e){
    var xml = Titanium.XML.parseString(xmlString);
  var element = xml.getElementsByTagName("foo");
  Ti.API.info( element.item(0).text );
});

window.add(button);
window.open();</code>
</pre>
<h3>Tested on</h3>
<p>TiSDK 1.6.1, Android SDK 2.1</p></div>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-3465_18325/error.jpg">error.jpg</td></td><td>2011-04-15T03:45:31.000+0000</td><td>81012</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-07-25

   pull request ready <a href="https://github.com/appcelerator/titanium_mobile/pull/276" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/276</a></li>
<li>Bill Dawson 2011-07-25

   XML module was not being included in build because:
   
   a) It has an all upper case name, which means it was being treated as a constant rather than a module.
   b) No other module outside of Network had a dependency on it, and only Yahoo has a dependency on Network, so it was easy for XML to be avoided given (a) above.</li>
<li>Don Thorp 2011-07-27

   Reviewed and tested.</li>
<li>Natalie Huynh 2011-08-26

   Tested with 1.8.0.v20110819142548 on
   Motorola Xoom 3.2
   Droid 1 2.2.2</li>
</ol>


<p><a href="/TIMOB/TIMOB-3465.json">JSON Source</a></p>