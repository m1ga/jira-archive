---
title: "[TIMOB-3510] Android evalJS crashing with SIGSEGV"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2011-04-15T03:46:06.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, defect</td></tr>
<tr><th>Reporter</th><td>KT</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:46:05.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-29T22:15:05.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>I've been going over this, and I'm fairly certain this is a
bug.</p>
<p>Here's the minimal test that will crash on Android with
SIGSEGV:</p>
<p>var win = Ti.UI.createWindow({<br></p>
<pre>
<code>// Android
navBarHidden: false,
exitOnClose: true</code>
</pre>
<p>}); var view = Ti.UI.createWebView({<br></p>
<pre>
<code>scalesPageToFit: false,
url: 'something.html'</code>
</pre>
<p>}); view.addEventListener('load', function() {<br></p>
<pre>
<code>view.evalJS("test");</code>
</pre>
<p>}); win.add(view);<br>
win.open();</p>
<p>(Although I find it hard to believe people aren't somehow using
evalJS() on Android. You'd think it would be a higher-profile
issue.)</p>
<p>Anyway, that code gives a crash dump similar to <a href=
"<a href="http://pastie.org/1754641" rel="nofollow" target="_blank">http://pastie.org/1754641</a>"><a href="http://pastie.org/1754641" rel="nofollow" target="_blank">http://pastie.org/1754641</a></a>.</p></div>

<h3>Comments</h3>

<ol>
<li>KT 2011-04-15

   <div><p>Sorry about that formatting. I just realized how it pasted.
   Hopefully this is better.</p>
   <p>(Also, confirming that this crash also happens with 1.7
   beta.)</p>
   <pre>
   <code class="javascript">var win = Ti.UI.createWindow({
       // Android
       navBarHidden: false,
       exitOnClose: true
   });
   var view = Ti.UI.createWebView({
       scalesPageToFit: false,
       url: 'something.html'
   });
   view.addEventListener('load', function() {
       view.evalJS("test");
   });
   win.add(view);
   win.open();</code>
   </pre></div></li>
<li>KT 2011-04-15

   <div><p>Just as some further background and to help try to pinpoint it
   regression-wise, this issue seems to go back at least a year:</p>
   <p><a href=
   "<a href="http://developer.appcelerator.com/question/117750/android-evaljs" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/117750/android-evaljs</a>"><a href="http://developer.appcelerator.com/question/117750/android-evaljs" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/117750/android-evaljs</a></a></p>
   <p><a href=
   "<a href="http://developer.appcelerator.com/question/67431/js-to-webview-working-on-iphone-not-in-android" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/67431/js-to-webview-working-on-iphone-not-in-android</a>">
   <a href="http://developer.appcelerator.com/question/67431/js-to-webview-working-on-iphone-not-in-android" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/67431/js-to-webview-working-on-iphone-not-in-android</a></a></p>
   <p><a href=
   "<a href="http://developer.appcelerator.com/question/41671/problem-with-webviewevaljs---doesnt-seem-to-work-at-all-with-android-emulator" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/41671/problem-with-webviewevaljs---doesnt-seem-to-work-at-all-with-android-emulator</a>">
   <a href="http://developer.appcelerator.com/question/41671/problem-with-webviewevaljs---doesnt-seem-to-work-at-all-with-android-emulator" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/41671/problem-with-webviewevaljs---doesnt-seem-to-work-at-all-with-android-emulator</a></a></p>
   <p><a href=
   "<a href="http://developer.appcelerator.com/question/13431/evaljs-not-working-anymore-since-12x-upgrade-on-android-16" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/13431/evaljs-not-working-anymore-since-12x-upgrade-on-android-16</a>">
   <a href="http://developer.appcelerator.com/question/13431/evaljs-not-working-anymore-since-12x-upgrade-on-android-16" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/13431/evaljs-not-working-anymore-since-12x-upgrade-on-android-16</a></a></p>
   <p>This is, strangely, in direct contravention to your drillbit
   test in:</p>
   <p><a href=
   "<a href="https://github.com/appcelerator/titanium_mobile/commit/597a4878af606e255811964cc5cbc9b93df5dfb2" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/597a4878af606e255811964cc5cbc9b93df5dfb2</a>">
   <a href="https://github.com/appcelerator/titanium_mobile/commit/597a4878af606e255811964cc5cbc9b93df5dfb2" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/commit/597a4878af606e255811964cc5cbc9b93df5dfb2</a></a></p>
   <p>If that works, then what is drillbit doing differently so that
   it works whereas the app.js above crashes hard immediately?</p></div></li>
<li>KT 2011-04-15

   <div><p>Further information: This crash doesn't seem to happen on 3.0.
   <em>But</em> the necessary Ti Javascript seems to never get
   injected, as is the case with 1.6 (i.e., no crash, but no Ti
   injection).</p></div></li>
<li>hal 2011-04-15

   <div><p>The information in this ticket has been moved to <a href=
   "<a href="http://appc.me/timob-3554" rel="nofollow" target="_blank">http://appc.me/timob-3554</a>" title="Ticket #3554">#3554</a></p></div></li>
<li>Lee Morris 2017-03-29

   Closing ticket as duplicate.</li>
</ol>


<p><a href="/TIMOB/TIMOB-3510.json">JSON Source</a></p>