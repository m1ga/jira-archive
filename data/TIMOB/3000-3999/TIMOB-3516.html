---
title: "[TIMOB-3516] Android: density-specific splash screen not working on Windows"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-01-09T15:15:27.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-29, Release 1.8.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>densitySpecificSplashScreen, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Matthew Lieder</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-04-15T03:46:11.000+0000</td></tr>
<tr><th>Updated</th><td>2012-01-09T15:15:27.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>It's currently impossible to use density-specific splash screens
on Android when building on Windows. The bug is easy to fix; in the
following code from support/android/builder.py:</p>
<pre>
<code>     # look for density-specific default.png's first
        if os.path.exists(android_images_dir):
            pattern = r'/android/images/(high|medium|low|res-[^/]+)/default.png'
            for root, dirs, files in os.walk(android_images_dir):
                for f in files:
                    path = os.path.join(root, f)
                    if re.search(pattern, path):
                        res_folder = resource_drawable_folder(path)
                        debug('found %s splash screen at %s' % (res_folder, path))
                        dest_path = os.path.join(self.res_dir, res_folder)
                        dest_file = os.path.join(dest_path, 'background.png')
                        if not os.path.exists(dest_path):
                            os.makedirs(dest_path)
                        shutil.copy(path, dest_file)</code>
</pre>
<p>change "if re.search(pattern, path):" to "if re.search(pattern,
path.replace("\", "/")):"</p>
<p>It might be good to audit the rest of the code too for this
problem.</p></div>

<h3>Comments</h3>

<ol>
<li>Matthew Lieder 2011-04-15

   <div><p>(looks like Lighthouse stripped out the second backslash from
   the first parameter to path.replace in my comment)</p></div></li>
<li>Don Thorp 2011-07-06

   the fix should probably not use pattern replacement specifically. The pattern should probably be built in a platform dependent way to begin with using os.path.join, then fixing the \ to be \\ to handle the escaping properly.</li>
<li>Bill Dawson 2011-07-19

   It's easy to see the problem.  Just build a Titanium app on Windows, then look down in your project's build/android/res folder and you'll only see a few "drawable-xxx" folders.  There should be a bunch of them.
   
   With the fix in place, re-build (you may need to "touch" the tiapp.xml first just one time after installing the newer SDK) and you'll see many more drawable folders under build/android/res.</li>
<li>Don Thorp 2011-07-25

   Reviewed and tested.</li>
<li>Michael Pettiford 2011-12-14

   Tested on Ti Studio 1.0.7.201112080131
     Ti Mob SDK 1.8.0.1.v20111209102124 v8/rhino
     Windows 7
   
   Expected behavior of the correct drawable folders is shown</li>
<li>Michael Pettiford 2012-01-09

   Reopening/closing to add/remove labels</li>
</ol>


<p><a href="/TIMOB/TIMOB-3516.json">JSON Source</a></p>