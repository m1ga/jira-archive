---
title: "[TIMOB-3539] Android:  No Ti Javascript injection to webview"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2011-07-07T11:15:55.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.6.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-25</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android</td></tr>
<tr><th>Reporter</th><td>KT</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-04-15T03:46:27.000+0000</td></tr>
<tr><th>Updated</th><td>2011-07-07T11:15:55.000+0000</td></tr>
</table>

<h3>Description</h3>

<div><p>evalJS() doesn't work, period, <a href=
"http:///appc.me/timob-3510">
on Android 2.2</a>, but seems to on 1.6 and 3.0.</p>
<p>However, communicating back from the webview to the application
doesn't work because there doesn't seem to be a similar mechanism
in place as there is on iOS to inject the necessary Javascript at
the head of the HTML, resulting in errors like:</p>
<p>E/Web Console( 504): ReferenceError: Can't find variable: Ti at
file: ...</p>
<p>when trying to do something like Ti.App.fireEvent().</p>
<p>For reference: <a href=
"<a href="http://developer.appcelerator.com/question/118231/ti-injection-for-webview-failing-on-android" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/118231/ti-injection-for-webview-failing-on-android</a>">
<a href="http://developer.appcelerator.com/question/118231/ti-injection-for-webview-failing-on-android" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/118231/ti-injection-for-webview-failing-on-android</a></a></p></div>

<h3>Comments</h3>

<ol>
<li>Paul Dowsett 2011-06-18

   The following code demonstrates that Titanium now works as expected:
   
   <code><pre>
   var win = Ti.UI.createWindow({
   	backgroundColor : "blue",
   	exitOnClose:true
   });
   
   var view = Ti.UI.createWebView({
   	scalesPageToFit: false,
   	url:'myweb.htm'
   });
   view.addEventListener('load', function() {
   	Ti.API.info("************TITLE: " + view.evalJS("document.title"));
   	Ti.API.info("************CONTENT: " + view.evalJS('document.getElementsByTagName("html")[0].innerHTML'));
   });
   win.add(view);
   win.open();
   </pre></code>
   
   <code><pre>
   &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</a>"&gt;
   &lt;html xmlns="<a href="http://www.w3.org/1999/xhtml" rel="nofollow" target="_blank">http://www.w3.org/1999/xhtml</a>" xml:lang="en-GB"&gt;
   &lt;head&gt;
   &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /&gt;
   &lt;title&gt;This is the title&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
   &lt;div id="page-content"&gt;
   	&lt;h1&gt;Testing Titanium&lt;/h1&gt;
   	&lt;div id="inner-content"&gt;
   	&lt;p&gt;This is the content&lt;/p&gt;
   	&lt;/div&gt;
   &lt;/div&gt;
   &lt;/body&gt;
   &lt;/html&gt;
   </pre></code></li>
<li>Paul Dowsett 2011-06-18

   Note this ticket is duplicated in TIMOB-3554</li>
<li>Don Thorp 2011-07-07

   Closing as invalid per Paul's comment.</li>
</ol>


<p><a href="/TIMOB/TIMOB-3539.json">JSON Source</a></p>