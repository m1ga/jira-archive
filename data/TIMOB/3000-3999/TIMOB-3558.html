---
title: "[TIMOB-3558] Android: Map Annotations Array Doesn't Accept Dictionary"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-05-16T16:47:10.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.0, Release 2.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.0, Sprint 2012-10 API</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>api, parity, qe-port, training</td></tr>
<tr><th>Reporter</th><td>Dawson Toth</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2011-04-15T03:46:39.000+0000</td></tr>
<tr><th>Updated</th><td>2012-08-28T02:25:57.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>
You can't pass an array of dictionaries {} to the annotations
property on a map view. But you CAN pass in an array of explicitly
created annotations Ti.Map.createAnnotation({ }). This use case
already works on iOS.

This contrasts with the "annotation" property, where you can
either pass in a Ti.Map.createAnnotation({ }), or simply a
dictionary {}.

<h4>Sample Code</h4>
The following will crash at runtime (as soon as you open the
app) if placed in an app.js:

<code><pre>var win = Ti.UI.createWindow({ backgroundColor: '#fff' });

win.add(Ti.Map.createView({
    mapType: Ti.Map.STANDARD_TYPE,
    regionFit: true,
    region: { latitude: 50.8683, longitude: 6.0818, latitudeDelta: 0.01, longitudeDelta: 0.01 },
    annotations: [
        {
            latitude: 50.8683, longitude: 6.0818, title: 'Rolduc Abbey'
        }
    ]
}));

win.open();
</pre></code>

BUT if we wrap the dictionary passed in to the annotation with
an explicit call to Ti.Map.createAnnotation it won't crash anymore.
Here is the code with only that one line updated:

<code><pre>var win = Ti.UI.createWindow({ backgroundColor: '#fff' });

win.add(Ti.Map.createView({
    mapType: Ti.Map.STANDARD_TYPE,
    regionFit: true,
    region: { latitude: 50.8683, longitude: 6.0818, latitudeDelta: 0.01, longitudeDelta: 0.01 },
    annotations: [
        Ti.Map.createAnnotation({ // &lt;-- this is the first line that changed
            latitude: 50.8683, longitude: 6.0818, title: 'Rolduc Abbey'
        }) // &lt;-- this is the other line that changed
    ]
}));

win.open();
</pre></code>

<h4>Tested On</h4>
Titanium SDK version: 1.7.0 (04/05/11 10:30 731db9c...)
BROKEN on Samsung Epic 4G Android 2.2
WORKS on iPhone Simulator 4.2

<h4>Associated Helpdesk Ticket</h4>
<a href="http://support-admin.appcelerator.com/display/RSN-92979-828" rel="nofollow" target="_blank">http://support-admin.appcelerator.com/display/RSN-92979-828</a>

<h3>Comments</h3>

<ol>
<li>Don Thorp 2011-04-15

   <div><p>fixing tags.</p></div></li>
<li>Shyam Bhadauria 2012-08-28

   App is not crashing now.
   Environment used for verification -
   Tested with Titanium SDK: 2.2.0.v20120827143312 , 2.1.1.GA,2.1.0.v20120628121617
   Tested with Titanium Â Studio: 2.1.2.201208201549
   Device - Android 2.2,2.3 emulator
   Machine OS - MAC 10.7.3</li>
</ol>


<p><a href="/TIMOB/TIMOB-3558.json">JSON Source</a></p>