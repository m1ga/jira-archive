---
title: "[TIMOB-3639] Android and iOS: Localization issues for Chinese dialects"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Resolved</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2015-12-30T07:24:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.0, Release 3.5.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android, iOS, Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Kevin Whinnery</td></tr>
<tr><th>Assignee</th><td>Feon Sua Xin Miao</td></tr>
<tr><th>Created</th><td>2011-04-21T11:27:03.000+0000</td></tr>
<tr><th>Updated</th><td>2016-09-08T12:21:22.000+0000</td></tr>
</table>

<h3>Description</h3>

Our internationalization facilities for Chinese localizations has a problem where the required naming conventions for the folders in the i18n directory are different for one platform versus the other.

The example that was brought to my attention required the following set up for iOS:

/i18n
  /zh-Hant
  /zh-Hans

and the following setup for Android

/i18n
  /zh-rTW
  /zh-rCN

When trying to use the iOS configuration for Android, the Python build scripts report an error that the "resource directory name is invalid".  Both configurations work on their platforms, but not when tested on the other platform.  It's a major problem for localizations in East Asian markets.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-3639_50948/Chinese.zip">Chinese.zip</td></td><td>2014-09-03T11:29:40.000+0000</td><td>3311829</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-3639_18378/TiBountyHunter220.zip">TiBountyHunter220.zip</td></td><td>2011-04-21T11:58:36.000+0000</td><td>2771471</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Marshall Culpepper 2011-08-05

   It looks like zh-Hant and zh-Hans locales aren't supported by Android, so I'm not sure that anything can be done on the Android side. Have you tried using zh-TW / zh-CN (without the "r" prefix) on both, to see if that fixes the problem?</li>
<li>Marshall Culpepper 2011-08-22

   Moving forward to 1.9.0 TBS, workaround should exist (see comments), and there isn't a clear path of support from Android for the alternative locales</li>
<li>Brandon DuRette 2011-09-16

   It would be nice if the build tools simply ignored (or perhaps issued a warning) about i18n directories that it does not understand rather than failing outright. This would at least allow for a single project to include zh-hans and zh-rcn and not have it fail to build. 
   
   The workaround suggested above (zh-CN) does not work. Works fine on Android, but not in iOS.</li>
<li>Mark Henderson 2012-12-12

   Can I champion this issue.. It seems straight forward that any build script simply ignore unsupported folder names.. At the moment I'm in a non-cross-platform compliant project situation because my app supports chinese localisation? I'm going to have to swap the folders out each time I want to build?</li>
<li>Eric Hu 2013-01-25

   Even nicer would be if a build script allowed one folder to be used for ios/android, perhaps with symlinking or setting config flags on the iOS/Android side</li>
<li>Seven Bai 2013-02-18

   I tried to modify Titanium Mobile SDK build script, localecompiler.py, as below and it works (tested on SDK 3.0.2).
   <code><pre>
   def compile_for_ios(self,file):
                   locale = self.get_locale(file)
   &gt;                if locale == 'zh-TW': locale = 'zh-Hant'
   &gt;                if locale == 'zh-CN': locale = 'zh-Hans'
                   build_dir = self.get_ios_dir()
   </pre></code>
   Hopefully this issue can be fixed officially by Appcelerator soon.</li>
<li>Jeff Haynie 2013-02-18

   we need to re-test with the new CLI / 3.0.2 release.</li>
<li>Jeff Haynie 2013-02-18

   @Steven Bai -- i'm not sure that localecompiler.py is used in 3.0.2 since we are now using the new CLI project at <a href="http://github.com/appcelerator/titanium" rel="nofollow" target="_blank">http://github.com/appcelerator/titanium</a> and for iphone and the ios build script for locale is at <a href="https://github.com/appcelerator/titanium_mobile/blob/master/iphone/cli/commands/_build.js#L1818." rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/iphone/cli/commands/_build.js#L1818.</a>
   
   </li>
<li>Chris Barber 2013-02-18

   localecompiler.py is still used by Android's build script. iOS and Mobile Web use the new i18n mechanism.
   
   We need to gather some data about the various platform's Chinese dialect names. I'm concerned that the fix forces the locale to "zh-Hant" when Marshall's first comments says it doesn't look like Android supports zh-Hant.</li>
<li>Seven Bai 2013-02-18

    @Jeff Haynie - My fault! You are right, I tested my above solution in 2.1.4 instead of 3.x. For 3.x, it can be solved by similar approach - create .lproj with correct file name, and it works too.
    @Chris Barber - Agree, it is better to gather and handle all the difference between these platforms inside Titanium Mobile SDK, and define a uniform rule for Titanium Mobile SDK user.</li>
<li>Caleb Cox 2013-12-23

    With Titanium SDK 3.2.0, I found that using zh-rCN works on both iOS and Android.</li>
<li>Ingo Muschenetz 2014-05-01

    Need more information before we are able to prioritize properly.</li>
<li>Eduardo Gomez 2014-09-03

    Locale strings for Chinese simplified and Chinese traditional work on Android. I have used the folder names 'zh-rCN' for Simplified Chinese and 'zh-rTW' for Traditional Chinese. Attached Sample "Chinese.zip" for verification.
    
    Titanium Command-Line Interface, CLI version 3.3.0, Titanium SDK version 3.3.0.GA, Xperia Play device with Android 4.0.4 (API level 14) 
    
    <code><pre>
    //Sample Code:
    var str = Ti.Locale.getString('holiday_greeting');
    alert(str);
    alert(Ti.Locale.getCurrentLanguage());
    //Output:
    [INFO] :   ALERT: (KrollRuntimeThread) [241,241] 新年快乐！
    [INFO] :   ALERT: (KrollRuntimeThread) [0,241] zh
    </pre></code></li>
<li>grebulon 2014-12-01

    There's a suggested fix at [the support site](<a href="https://developer.appcelerator.com/question/148383/language-code-if-include-country-code#answer-257000)." rel="nofollow" target="_blank">https://developer.appcelerator.com/question/148383/language-code-if-include-country-code#answer-257000).</a>
    
    Personally, I think it's about time to fix this...</li>
<li>Vishal Duggal 2015-03-05

    The android system is pretty simple as explained here
    <a href="http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources" rel="nofollow" target="_blank">http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources</a>
    
    The language is defined by a two-letter ISO 639-1 language code, optionally followed by a two letter ISO 3166-1-alpha-2 region code (preceded by lowercase "r"). 
    
    iOS seems to be all over the place. Following standards when possible otherwise doing their own thing. 
    
    For example chinese in Taiwan would be zh-rTW on Android. On iOS according to xcode settings it would be zh-Hant-TW.(Traditional chinese taiwan)
    iOS also seems to support non ISO 639-1 language codes.
    
    One thing me might do is restrict the i18n folder to only allow ISO 639-1 language codes.
    
    Then allow region specific localization strings in the platform specific folder under Resources/<platform>/i18n. 
    
    Or we could allow the Android standard in i18N(without the r prefix) and also allow platform specific localization stings under Resources/<platform>/i18n.
    </li>
<li>Ingo Muschenetz 2015-03-12

    Everyone, to confirm, the workaround specified <a href="https://developer.appcelerator.com/question/148383/language-code-if-include-country-code#answer-257000" rel="nofollow" target="_blank">https://developer.appcelerator.com/question/148383/language-code-if-include-country-code#answer-257000</a> does NOT work?
    
    Also, I'd like to know if there is a preference based on Vishal's suggestions.</li>
<li>Ingo Muschenetz 2015-03-13

    Moving this to 4.1.0 while we await feedback. If we can find an appropriate workaround or solution before then, we will release in a patch update.</li>
<li>Jérémy Tonneau 2015-05-06

    Hi,
    
    Any news on this ?
    Is it not possible to backport this feature in 3.5.2 for instance ?
    
    Thanks !</li>
<li>Ingo Muschenetz 2015-05-06

    [~Cryde] I asked if the workaround continued to work. Does it?</li>
<li>Ingo Muschenetz 2015-06-18

    Still awaiting feedback. Moving to 4.1.1 while we wait.</li>
<li>Mark Henderson 2015-08-17

    To confirm the workaround specified above will NOT work. The function compileI18N has changed significantly in the 2 years since it was first proposed.
    
    Also to add, a lot of Android device manufacturers put in extra localisations into their devices. For example I have a client who can choose Hong Kong Chinese as an option on a standard Samsung tablet device. The only way Traditional Chinese will work with my app is if they change the device to Taiwan Chinese (again another localisation not supported natively by Android).
    
    See [here](<a href="http://stackoverflow.com/a/4250246/181197)" rel="nofollow" target="_blank">http://stackoverflow.com/a/4250246/181197)</a></li>
<li>Shawn Lan 2015-09-14

    I use zh_TW for iOS. Today I found that when building for Android, there is no longer an error! What happened?
    
    SDK 4.1.1</li>
<li>Hans Knöchel 2015-10-16

    Can other users confirm this?</li>
<li>Srikanth Sombhatla 2015-12-15

    Using zh_TW did work on iOS and Android. 
    
    Appcelerator Studio build: 4.4.0.201511241829
    CLI: 5.1.0
    iOS: 9.1
    Android: 5.1.1</li>
<li>Feon Sua Xin Miao 2015-12-17

    I can't reproduce this.</li>
<li>Mark Henderson 2016-09-08

    I got this when submitting to Apple:
    
    Unrecognized Locale -
    The directory located at ( 'Payload/YouRApp.app/zh-rCN.lproj' ) has an unrecognized locale name. Refer to the Language and Locale Designations guide for more information on naming your language-specific directories.
    
    
    </li>
<li>Ingo Muschenetz 2016-09-08

    [~fmiao] FYI</li>
</ol>


<p><a href="/TIMOB/TIMOB-3639.json">JSON Source</a></p>