---
title: "[TIMOB-4207] Media.createVideoPlayer requires CAMERA_PERMISSION"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-06-08T11:42:52.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.8.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Dawson Toth</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-05-24T16:51:35.000+0000</td></tr>
<tr><th>Updated</th><td>2011-06-28T12:49:21.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>
Using Ti.Media.createVideoPlayer adds the camera permissions to the resulting AndroidManifest.xml.

<h4>Solution</h4>
Edit builder.py to remove this relationship (I'll send a pull request on Ti Mobile with this change).

<h4>Associated Helpdesk Ticket</h4>
<a href="http://appc.me/c/APP-744612" rel="nofollow" target="_blank">http://appc.me/c/APP-744612</a>

<h3>Comments</h3>

<ol>
<li>Dawson Toth 2011-05-24

   <h4>Pull Request</h4>
   <a href="https://github.com/appcelerator/titanium_mobile/pull/100" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/100</a></li>
<li>Dawson Toth 2011-06-08

   <h4>Sample Code</h4>
   Drop the following in an app.js to test this change. It downloads a 7mb video and plays it in a video player.
   <code><pre>
   var videoLink = '<a href="http://photosbydawson.com/resources/yoyo.mp4" rel="nofollow" target="_blank">http://photosbydawson.com/resources/yoyo.mp4</a>';
   var videoFile = Ti.Filesystem.getFile('file:///sdcard/').exists()
           ? Ti.Filesystem.getFile('file:///sdcard/yoyo.mp4')
           : Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, 'yoyo.mp4');
   
   var win = Ti.UI.createWindow({ backgroundColor: '#000' });
   win.open();
   
   function downloadVideo() {
       var progressBar = Ti.UI.createProgressBar({
           max: 1, min: 0, value: 0,
           visible: true
       });
       win.add(progressBar);
       var xmlHttpObj = Ti.Network.createHTTPClient({
           ondatastream: function(e) {
               progressBar.value = e.progress;
           },
           onreadystatechange: function() {
               if (xmlHttpObj.readyState == 4) {
                   videoFile.write(xmlHttpObj.responseData);
                   win.remove(progressBar);
                   playVideo();
               }
           }
       });
       xmlHttpObj.open('GET', videoLink);
       xmlHttpObj.send();
   }
   
   function playVideo() {
       var videoPlayer = Ti.Media.createVideoPlayer({
           url: videoFile.nativePath
       });
       if (parseFloat(Ti.Platform.version) &gt;= 3.2) {
           win.add(videoPlayer);
       }
       videoPlayer.play();
   }
   
   if (videoFile.exists()) {
       playVideo();
   }
   else {
       downloadVideo();
   }
   </pre></code></li>
<li>Thomas Huelbert 2011-06-28

   closing against 1.8.0.v20110628104237. confirmed on galaxy pad (2.2.1), xoom (3.1) opening a new issue for the droid 1 as per Don.</li>
</ol>


<p><a href="/TIMOB/TIMOB-4207.json">JSON Source</a></p>