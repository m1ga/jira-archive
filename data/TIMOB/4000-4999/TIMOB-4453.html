---
title: "[TIMOB-4453] Android - Crash when clicked on a mapview annotation without pincolor property"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2012-04-30T17:22:31.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.0, Release 1.6.2, Release 1.7.1, Release 1.7.3</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>annotation, mapview</td></tr>
<tr><th>Reporter</th><td>Pedro Enrique</td></tr>
<tr><th>Assignee</th><td>Josh Roesslein</td></tr>
<tr><th>Created</th><td>2011-06-17T17:47:54.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-21T22:39:48.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>The problem</h4>
If the annotation is clicked but it does not have a pincolor, the app crashes when clicked on it
<h4>Solution</h4>
Add a pincolor manually to the annotation
<h4>Code Sample</h4>
<code><pre>
var W = {};
W.MapView = function(){
	var win = Ti.UI.createWindow({
		tabBarHidden:true,
		fullscreen:false
	});
	var data = [];
	data.push(
		Ti.Map.createAnnotation({
			latitude:40.892651,
			longitude:-74.001920,
			title:'title here',
			subtitle:'sub title here'
		//	, pincolor:Titanium.Map.ANNOTATION_GREEN
		})
	);
	var map = Ti.Map.createView({
		region:{
			latitude:40.892651,
			longitude:-74.001920,
			latitudeDelta:0.1,
			longitudeDelta:0.1
		},
		annotations:data
	});

	win.addEventListener('open', function(){
		win.add(map);
	});
	return win;
}

W.MapView().open();
</pre></code>
<h4>To reproduce</h4>
1. Run the code provided in app.js as is. Click on the pin. It will crash.
2. Uncomment line 14 to give it a color. It will not crash.

Note that when <code>pincolor</code> is set to a supported color, as per the list in [TiMapView.java](<a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/map/src/ti/modules/titanium/map/TiMapView.java#L199)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/map/src/ti/modules/titanium/map/TiMapView.java#L199)</a>, the app does not crash and the color renders correctly.

When <code>pincolor</code> is set to a non-supported color, such as "mycolor", the app also does not crash and the rendered color defaults to yellow.



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-4453_24953/nullPointerException.txt">nullPointerException.txt</td></td><td>2012-01-06T10:23:20.000+0000</td><td>7807</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>pyephyo han 2011-08-09

   I also have some issue but your solution is not working for me.
   If you don't mind, please take a look at here also 
   <a href="http://developer.appcelerator.com/question/123964/map-crashes-when-clicking-twice-on-annotation-android" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/123964/map-crashes-when-clicking-twice-on-annotation-android</a></li>
<li>Tony Lukasavage 2011-10-14

   This still exists in the latest 1.7.3</li>
<li>Wilson Luu 2012-01-06

   Bug persists on 1.8.0.1. I get a Java NullPointerException in the console. See attachment.</li>
<li>Dustin Hyde 2012-01-19

   Bug Still Valid.
   SDK: 1.9.0.v20120118184633, 1.8.0.1
   Android: V8/Rhino
   Studio: 1.0.8
   OS: Lion
   Devices Tested: Galaxy Nexus 4.0.2, Nexus S 2.3.6</li>
<li>Josh Roesslein 2012-04-30

   This is a duplicate of TIMOB-8675 which has been resolved.</li>
<li>Lee Morris 2017-03-21

   Closing ticket as duplicate.</li>
</ol>


<p><a href="/TIMOB/TIMOB-4453.json">JSON Source</a></p>