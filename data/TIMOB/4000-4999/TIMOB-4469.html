---
title: "[TIMOB-4469] Android:  Filesystem exists() method used on file in resourcesDirectory always returns true even if the file is not present"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-01-04T13:51:59.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-37, Release 1.8.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>module_filesystem, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Anirudh Nagesh</td></tr>
<tr><th>Assignee</th><td>Allen Yeung</td></tr>
<tr><th>Created</th><td>2011-06-21T12:42:12.000+0000</td></tr>
<tr><th>Updated</th><td>2013-11-13T12:35:59.000+0000</td></tr>
</table>

<h3>Description</h3>

Note: please see [this comment|#comment-164088] below for clearer testcase and accurate explanation of the bug.

1. create an empty mobile project.
2. Copy the following sample code. <a href="http://pastie.org/2102937" rel="nofollow" target="_blank">http://pastie.org/2102937</a>
3. The image is not loaded even if it is present in the filesystem.

Works fine with Ti SDK 1.6.2

<h3>Comments</h3>

<ol>
<li>Don Thorp 2011-06-22

   Please move the example code from pastie to the actual ticket. Also, does it fail if you don't put the @ in the name.</li>
<li>Anirudh Nagesh 2011-06-22

   the code snippet can be found below.
   
   <code><pre>
   // this sets the background color of the master UIView (when there are no windows/tab groups on it)
   Titanium.UI.setBackgroundColor('#000');
   
   // create tab group
   
   function find(path) 
   {
   
             if (Titanium.Filesystem.getFile(Titanium.Filesystem.resourcesDirectory,'KS_nav_ui@A.png').exists()) 
             {
           path = 'KS_nav_ui@A.png';
           
             }
   
       return path;
   }
   //
   // create base UI tab and root window
   //
   var win1 = Titanium.UI.createWindow({  
       title:'Tab 1',
       backgroundColor:'#fff',
       backgroundImage:find('KS_nav_ui.png')
   });
   
   alert(win1.backgroundImage);
   win1.open();
   </pre></code>
   
   2. No, it does not fail if '@' is not in the name.</li>
<li>Anirudh Nagesh 2011-06-22

   sending back to dev with required info.</li>
<li>Thomas Huelbert 2011-06-27

   kicking back so Don can see it</li>
<li>Don Thorp 2011-06-27

   Will look into why it's returning true. It should not.</li>
<li>Don Thorp 2011-07-20

   Attaching code where I added more logging statements. I could not get this to fail. It is not always returning true.
   
   <code><pre>
   
   // this sets the background color of the master UIView (when there are no windows/tab groups on it)
   Titanium.UI.setBackgroundColor('#000');
   
   function find(path) {
   
   	Ti.API.debug("Path with @ exists: " + Titanium.Filesystem.getFile(Titanium.Filesystem.resourcesDirectory,'KS_nav_ui@A.png').exists());
   	Ti.API.debug("Path w/o @ exists: " +  Titanium.Filesystem.getFile(Titanium.Filesystem.resourcesDirectory,'KS_nav_ui.png').exists());
   
   	if (Titanium.Filesystem.getFile(Titanium.Filesystem.resourcesDirectory,'KS_nav_ui@A.png').exists()) {
   		path = 'KS_nav_ui@A.png';	
   	}
   
   	return path;
   }
   //
   // create base UI tab and root window
   //
   var win1 = Titanium.UI.createWindow({  
       title:'Tab 1',
       backgroundColor:'#fff',
       backgroundImage:find('KS_nav_ui.png')
   });
   
   alert(win1.backgroundImage);
   win1.open();
   </pre></code></li>
<li>Anirudh Nagesh 2011-07-20

   Don,
   
   I can still reproduce the issue with 1.7.0! I double checked it with both 1.6.2 and 1.7.0
   In 1.6.2, 'exists()' returns false and true properly when the file is not present in the resources directory.
   In 1.7.0, it always returns true.
   
   Please let me know if you need any further information.</li>
<li>Paul Dowsett 2011-08-25

   This has been reported again in TC-211. Note that this issue specifically occurs for testing the existence of files in resourcesDirectory. Other locations, such as applicationDataDirectory, are not affected.
   
   Environment Information:
   * Titanium SDK version: 1.7.2.97c3689.
   * Platform & version: Android 2.1.1 and Android 2.3.3
   * Device Details: Android 2.1.1 and Android 2.3.3
   * Host Operating System: OSX 10.7 (Lion)
   * Titanium Studio version: Titanium Studio, build: 1.0.2.201107130739
   
   The user has observed this problem using the following Titanium SDKs:
   
   * 1.7.1 - No bug
   * 1.7.2 - Bug exists
   * 1.7.3 - Bug exists
   
   I have also verified that the issue still exists in 1.7.3.
   
   The user has provided a simpler testcase as follows:
   
   <code><pre>
   var resourcesFileDoesExist = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, 'app.js');
   var resourcesFileDoesNotExist = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, 'this-file-does-not-exist.js');
   
   var newFile = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,'this-file-exists.js');
   newFile.write("testing a file");
   
   var appDataFileDoesExist = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, 'this-file-exists.js');
   var appDataFileDoesNotExist = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, 'this-file-does-not-exist.js');
   
   var label = Ti.UI.createLabel({
     color: '#FFF'
   });
   label.text = '*** Resources Dir: \nTest presence of file that exists => ' +
     resourcesFileDoesExist.exists() +
     '\nTest presence of file that does not exist => ' +
     resourcesFileDoesNotExist.exists() +
     '\n\n*** appData Dir: \nTest presence of file that exists => ' +
     appDataFileDoesExist.exists() +
     '\nTest presence of file that does not exist => ' +
     appDataFileDoesNotExist.exists();
   
   var win = Ti.UI.createWindow({
     backgroundColor: '#000'
   });
   win.add(label);
   win.open();
   </pre></code>
   
   Expected Results:
   <code><pre>
   *** Resources Dir:
   True
   False
   *** appData Dir:
   True
   False
   </pre></code>
   
   Actual Results:
   <code><pre>
   *** Resources Dir:
   True
   True
   *** appData Dir:
   True
   False
   </pre></code></li>
<li>Jon Alter 2011-09-01

   <h4>folder.exists()</h4>
   
   <h4>Description </h4>
   exists() returns "false" when pointing to a folder that exists and "true" when the folder does not exist
   
   <h4>Steps to reproduce</h4>
   Step 1: create a new app
   Step 2: run the code below
   Step 3: click the window
   Step 4: look in the console 
   Step 5: notice that there is no "data" directory but exists returns "true"
   Step 6: create a "data" directory in Resources, and create a couple files inside it
   Step 7: make a small change to tiapp.xml, delete the change, and save the file so that fastdev will pull in your new folder
   Step 8: run the app
   Step 9: click the window
   Step 10: notice that there is now a "data" directory but exists returns "false"
   Step 11: notice that getDirectoryListing listed the contents of your data directory, proving that the folder is indeed there
   
   <h4>Repro Case</h4>
   <code><pre>
   var win = Ti.UI.createWindow({
     backgroundColor:"#fff"
   });
   win.open();
   
   win.addEventListener('click', function(e){
   	var srcDataDir = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, "data");
     	Ti.API.info('SRC EXISTS = ' + srcDataDir.exists());
   	Ti.API.info('SRC LISTING = ' + srcDataDir.getDirectoryListing());
   });
   </pre></code>
   
   <h4>Environment</h4>
   TiSDK 1.7.2
   Android Emulator 2.2
   
   <h4>Associated Helpdesk Ticket</h4>
   <a href="http://appc.me/c/APP-728922" rel="nofollow" target="_blank">http://appc.me/c/APP-728922</a></li>
<li>Marshall Culpepper 2011-09-15

    We need to make sure to test the fix for this with Fastdev automatic changes, it looks like the current changeset disables it completely. The test is pretty simple:
    
    * Run the project from TiStudio on the emulator (Fastdev should be automatically started)
    * After the app starts, change some JS code directly in TiStudio
    * Re-run the app (it should restart almost immediately, and have the changes you just made -- coming from FastDev mode)</li>
<li>Michael Pettiford 2011-12-09

    Tested on Ti Studio 1.0.7.201112080131
     Ti Mob SDK 1.8.0.1.v20111209011840
     OSX Lion
    Nexus S OS 2.3.6, Android emulator with fast dev mode on
    
    Expected filesystem behavior is shown</li>
<li>Michael Pettiford 2012-01-04

    Reopening/closing to add/remove labels</li>
</ol>


<p><a href="/TIMOB/TIMOB-4469.json">JSON Source</a></p>