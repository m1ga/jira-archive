---
title: "[TIMOB-4478] reverseGeocoder Platform Inconsistency"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-08-03T08:49:27.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-29, Release 1.8.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Dawson Toth</td></tr>
<tr><th>Assignee</th><td>Natalie Huynh</td></tr>
<tr><th>Created</th><td>2011-06-22T06:02:48.000+0000</td></tr>
<tr><th>Updated</th><td>2018-12-17T17:57:07.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>
The "country code" property is inconsistent between the platforms. On iOS it is "country_code", while for Android it is "CountryCode".

<h4>Solution</h4>
Pick one, and deprecate the other. Both platforms should expose the one chosen, and one can have the antiquated property for a couple more releases.

<h4>Sample Code</h4>
<code><pre>
Ti.Geolocation.addEventListener('location', function(e) {
    Ti.Geolocation.reverseGeocoder(e.coords.latitude, e.coords.longitude, function(evt) {
        alert(evt);
    });
});
</pre></code>

<h4>Associated Helpdesk Ticket</h4>
<a href="http://appc.me/c/APP-455583" rel="nofollow" target="_blank">http://appc.me/c/APP-455583</a>

<h3>Comments</h3>

<ol>
<li>Reggie Seagraves 2011-06-23

   Dawson,
   
   Please update the sample code attached to this bug that exhibits the problem.  
   I think that "country_code" would work on both platforms.
   </li>
<li>Dawson Toth 2011-07-05

   "country_code" only works on iOS. Android return value does not contain this property. I just verified this statement is true on device, and in the source code using Release 1.7.1 and a build from source 6f5ab67357aa358d413f.
   
   See:
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/geolocation/src/ti/modules/titanium/geolocation/TiLocation.java#L352" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/geolocation/src/ti/modules/titanium/geolocation/TiLocation.java#L352</a>
   
   And for the constant's definition see:
   <a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/titanium/src/org/appcelerator/titanium/TiC.java#L137" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/titanium/src/org/appcelerator/titanium/TiC.java#L137</a></li>
<li>Don Thorp 2011-07-20

   Updated example code.
   
   <code><pre>
   
   Ti.Geolocation.addEventListener('location', function(e) {
       Ti.Geolocation.reverseGeocoder(e.coords.latitude, e.coords.longitude, function(evt) {
       	var m = "countryCode: " + evt.places[0].countryCode + 
       		" country_code: " + evt.places[0].country_code;
           alert(m);
       });
   });
   </pre></code></li>
<li>Bill Dawson 2011-08-01

   Additional (simpler) test if you're having problem with GEO on your device.  This test just tests the affected code, which is the reverse geo lookup.  The result should refer to Austria, since I'm giving the coordinates to Vienna, Austria here:
   
   <code><pre>
       Ti.Geolocation.reverseGeocoder(48.2, 16.3666667, function(evt) {
       	var m = "countryCode: " + evt.places[0].countryCode + 
       		" country_code: " + evt.places[0].country_code;
           alert(m);
       });
   </pre></code></li>
<li>Natalie Huynh 2011-08-25

   Tested with 1.8.0.v20110819142548
   iPhone 4.3.4
   iPad2 4.3.2
   Motorola Xoom 3.2
   Nexus One 2.2.2</li>
</ol>


<p><a href="/TIMOB/TIMOB-4478.json">JSON Source</a></p>