---
title: "[TIMOB-4643] Application crashes if a custom theme is included in the project"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-01-05T10:30:57.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-31, Release 1.8.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>platform_android, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Anirudh Nagesh</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2011-07-12T13:30:19.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-19T12:46:19.000+0000</td></tr>
</table>

<h3>Description</h3>

Including a custom theme.xml and applying it one of the activities results in a crash of the application. Works fine with Ti SDK 1.7 versions..

Step: Copy the below code in app.js
<code><pre>
var win = Titanium.UI.createWindow({ backgroundColor: '#fff', fullscreen: true });
win.add(Ti.UI.createLabel({ text: 'Press your hardware menu button!' }));
win.open();

// keep a pointer to the current activity
var currentActivity = win.activity;

// and make an options menu
currentActivity.onCreateOptionsMenu = function(e) {
    e.menu.add({ title: 'Open Dialog' }).addEventListener("click", function() {
        var intent = Ti.Android.createIntent({
            url: 'temp.js'
        });
        intent.putExtra('modal', true);
        currentActivity.startActivity(intent);
    });
};
</pre></code>
Step2: Copy the below code to temp.js.
<code><pre>
var win = Ti.UI.currentWindow;
win.modal = true;

win.add(Ti.UI.createLabel({
    text: 'Hello, world!'
}));
</pre></code>
Step3: Create a file 'theme.xml' in root->platform->android->res->values folder. Copy the below code into it.
<code><pre>
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="FullHeightDialog" parent="android:style/Theme.Dialog">
        <item name="android:windowNoTitle">true</item>
    </style>
    <style name="Theme.Titanium" parent="android:Theme.NoTitleBar.Fullscreen">
    <item name="android:windowBackground">@drawable/background</item>
</style>
</resources>
</pre></code>
Step4: Run the app with Ti SDK set to 1.8.0. Application crashes.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-4643_21805/console.txt">console.txt</td></td><td>2011-07-12T13:59:55.000+0000</td><td>15993</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ben Bahrenburg 2011-07-12

   Hi Don, there is a sample project attached to this ticket. Let me know if any additional info is needed.
   
   <a href="http://support.appcelerator.com/tickets/APP-119465/homepage" rel="nofollow" target="_blank">http://support.appcelerator.com/tickets/APP-119465/homepage</a></li>
<li>Anirudh Nagesh 2011-07-12

   Crash log attached.</li>
<li>Anirudh Nagesh 2011-07-13

   Don, the crash log is attached. Please let me know if you need anything else.</li>
<li>Eric Merriman  2011-12-05

   Verified fixed with both v8 and rhino on Nexus S (2.3.6), Droid 1 (2.2.2), and Galaxy tab 10.1 (3.1) running 1.8.0.1.v20111205011857.</li>
<li>Eric Merriman  2012-01-05

   Reopening to edit labels.</li>
</ol>


<p><a href="/TIMOB/TIMOB-4643.json">JSON Source</a></p>