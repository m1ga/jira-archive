---
title: "[TIMOB-4769] Android:  XML.Node drillbit tests fails when comparing Ti.Element to Ti.Element"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2011-07-27T08:12:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.1</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-30</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>drillbit, xml</td></tr>
<tr><th>Reporter</th><td>Opie Cyrus</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-07-25T15:05:34.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-19T12:46:42.000+0000</td></tr>
</table>

<h3>Description</h3>

XML.Node drill tests:
apiXmlNodeAppendChild
apiXmlNodeInsertBefore
apiXmlNodeRemoveChild
apiXmlNodeReplaceChild

fails when comparing Ti.Element to Ti.Element.  Objects in question should not have been copied so should be equal to one another from memory address standpoint.

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-07-26

   This ticket was made during the XML Node drillbit test work and specifically because <code>shouldBeExactly</code> was failing.  In a [pull request](<a href="https://github.com/appcelerator/titanium_mobile/pull/221)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/221)</a> comment I mention that I don't think <code>shouldBeExactly</code> can work, so this ticket is probably invalid.  If meant to refer to <code>shouldBe</code> (as opposed to <code>shouldBeExactly</code>), it's a duplicate of TIMOB-4703.
   
   I pasted my reasoning from the pull request comment here as well:
   
   It's my opinion that we can't ever use <code>shouldBeExactly</code> with node proxies (nodes, elements, attributes, etc.).  <code>shouldBeExactly</code> uses <code>===</code>, which in the case of non-String, non-Number and non-Boolean objects "return(s) true if x and y refer to the same object".  (From [ECMAScript](<a href="http://www.ecmascript.org/docs.php)" rel="nofollow" target="_blank">http://www.ecmascript.org/docs.php)</a> spec.)  They'll never refer to the same object in our case, because we take what the underlying XML DOM library gives us and wrap it in a proxy on every function/property call.   So although we may be wrapping the same underlying object in the proxies, the proxies themselves are different objects.  <code>==</code> (and thus <code>shouldBe</code>) will work if the pull request for TIMOB-4703 gets put in, but <code>===</code> and <code>shouldBeExactly</code> will never work.
   
   To put it another way, we don't keep our own tree of proxies that mirrors the underlying document tree.  This is unlike our <code>Titanium.UI</code> view hierarchy implementation, in which we really do keep <code>children</code> collections containing proxies that mirror the underlying children collection of a native Android View.</li>
</ol>


<p><a href="/TIMOB/TIMOB-4769.json">JSON Source</a></p>