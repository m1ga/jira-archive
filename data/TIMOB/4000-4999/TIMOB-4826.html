---
title: "[TIMOB-4826] module.exports not supported when requiring a file"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-11-10T14:18:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.8.0.1</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Rick Blalock</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-07-28T19:20:43.000+0000</td></tr>
<tr><th>Updated</th><td>2011-12-07T16:01:57.000+0000</td></tr>
</table>

<h3>Description</h3>

module.exports is not supported in our require implementation.  <code>module</code> is undefined.

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-10-05

   FYI, module.exports is not part of CommonJS.  It is supported by Node's implementation of modules, and perhaps by a few other implementations (not Rhino, for example).
   
   The CommonJS [module spec](<a href="http://wiki.commonjs.org/wiki/Modules/1.1.1)" rel="nofollow" target="_blank">http://wiki.commonjs.org/wiki/Modules/1.1.1)</a> explicitly states "modules must use the "exports" object as the *only* means of exporting."  They're speaking there of the "free variable" <code>exports</code>, not <code>module.exports</code>.  This suggests that using something called <code>module.exports</code> to export your API is, in fact, "illegal".  :)  NodeJS does it anyway.
   
   In the spec's discussion of the <code>module</code> variable, no reference to an <code>exports</code> property is ever made.
   
   (For more of my long-winded arguments, see TIMOB-5406 :) )
   
   [This discussion](<a href="http://groups.google.com/group/commonjs/browse_thread/thread/f994b609460355e3)" rel="nofollow" target="_blank">http://groups.google.com/group/commonjs/browse_thread/thread/f994b609460355e3)</a> on the official commonjs mailing list makes it clear that it's a Node thing and that the CommonJS spec folks are by no means unanimous in wanting to adopt it.
   
   I'm not opposed to supporting it, btw.  Just want to make it clear it's not part of the spec and that it will need to be done with parity in mind, because Android uses Rhino's implementation of require() and it is *not* supported therein.</li>
<li>Reggie Seagraves 2011-10-27

   <a href="http://wiki.commonjs.org/wiki/Modules/1.1#Related_Discussion" rel="nofollow" target="_blank">http://wiki.commonjs.org/wiki/Modules/1.1#Related_Discussion</a></li>
<li>Blain Hamon 2011-11-07

   Hours recorded on 4825. Pull pending. <a href="https://github.com/appcelerator/titanium_mobile/pull/647" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/647</a></li>
<li>Wilson Luu 2011-12-07

   Closing bug. Verified fix on KS > Platform > Common JS using the following environment:
   
   OS: Mac OS X Lion
   Titanium Studio, build: 1.0.7.201112061404
   SDK build: 1.8.0.1.v20111207151125
   Device: iphone 4S Sprint (5.0.1)</li>
</ol>


<p><a href="/TIMOB/TIMOB-4826.json">JSON Source</a></p>