---
title: "[TIMOB-4858] iOS: Duplicate Symbols (encodingMap) in TiUtils.o and 3rd Party Library"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-10-27T15:47:54.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 1.7.3, Release 1.8.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>merge-1.7.3</td></tr>
<tr><th>Reporter</th><td>Vikramjeet Singh</td></tr>
<tr><th>Assignee</th><td>Reggie Seagraves</td></tr>
<tr><th>Created</th><td>2011-08-01T09:54:16.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-19T12:46:38.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>
When you include the Greystrip module in an app the app crashes with SystemExit:65 if building with TiSDK 1.7.x.

<h4>Reproduction</h4>
Use the module's example app to reproduce this.

<h4>Build Error</h4>
<code><pre>
ld: duplicate symbol _encodingMap in /var/folders/IO/IOzpz3kfFFa5JFj0INAwME+++TI/-Tmp-/mblNyDSti/greystripe/modules/iphone/ti.greystripe/1.0/libti.greystripe.a(GSBase64.o) and /var/folders/IO/IOzpz3kfFFa5JFj0INAwME+++TI/-Tmp-/mblNyDSti/greystripe/build/iphone/build/greystripe.build/Debug-iphonesimulator/greystripe.build/Objects-normal/i386/TiUtils.o for architecture i386
collect2: ld returned 1 exit status
Command /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-g++-4.2 failed with exit code 1
</pre></code>

<h4>Solution</h4>
Place "static" before the three variables declared at the top of TiUtils.m so that they don't collide with the library Greystrip is using.

<h4>Pull Request</h4>
<a href="https://github.com/appcelerator/titanium_mobile/pull/305" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/305</a>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-4858_22648/Screen Shot 2011-08-24 at 11.00.52 AM (2).png">Screen Shot 2011-08-24 at 11.00.52 AM (2).png</td></td><td>2011-08-24T11:03:27.000+0000</td><td>2997294</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Dawson Toth 2011-08-01

   Removed estimate... that was a holdover from the original [MOD-148] ticket.</li>
<li>Vikramjeet Singh 2011-08-24

   Test bug was fixed in Pull request but fails again when tried with following configuration. TiMob 1.8.0.v20110819142548 is used.
   
   Note: Added module ti.greystripe in Titanium folder. 
         Added module tag in tiapp.xml
         Added app id: 360f96ed-2109-48fb-a020-e42f6433e4f6 in example code for greystripe module.
         
   Error is not the same as previous, that was, SystemExit:65 at that time, its different and   pasted below: 
   
   Tested on:
   Mac OSX Lion
   TiMob: 1.8.0.v20110819142548
   TiStud: 1.0.4.201108101535
   
   Device Used:
   iPhone Simulator
   
   Following is the error:
   
   
   [DEBUG] loading: /Users/vsingh/Library/Application Support/iPhone Simulator/5.0/Applications/944E2F28-27C0-466C-BDAB-01DB621D6164/mod-148.app/app.js, resource: app_js
   
   [INFO] Greystripe module loaded
   
   [DEBUG] loading: /Users/vsingh/Library/Application Support/iPhone Simulator/5.0/Applications/944E2F28-27C0-466C-BDAB-01DB621D6164/mod-148.app/ti.greystripe.js, resource: ti_greystripe_js
   
   [ERROR] Invalid type passed to function. expected: NSDictionary, was: __NSArrayM  in -[TiGreystripeModule setup:] (TiGreystripeModule.m:82)
   
   [ERROR] Script Error = Invalid type passed to function. expected: NSDictionary, was: __NSArrayM  in -[TiGreystripeModule setup:] (TiGreystripeModule.m:82) at app.js (line 8).
   
   [DEBUG] application booted in 248.316050 ms</li>
<li>Vikramjeet Singh 2011-08-24

   Check the attached screenshot with error</li>
<li>Dawson Toth 2011-08-24

   That is a very different error, Vikramjeet. Please open a separate ticket.</li>
<li>Jeff English 2011-08-24

   I have confirmed that this latest issue is related to code in the module and is not the same issue that was resolved with this ticket. Please open a new issue in the MOD project to address this latest problem.</li>
<li>Vikramjeet Singh 2011-08-24

   </li>
<li>Jeff English 2011-09-01

   MOD-177 is the appropriate ticket for the latest reported issue. The original issue reported by this ticket was previously resolved. This ticket should not have been re-opened.</li>
</ol>


<p><a href="/TIMOB/TIMOB-4858.json">JSON Source</a></p>