---
title: "[TIMOB-4886] String.format using sequence (%1$s) returns invalid string"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-10-27T14:32:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-31, Release 1.8.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>string</td></tr>
<tr><th>Reporter</th><td>Matthew O'Riordan</td></tr>
<tr><th>Assignee</th><td>Reggie Seagraves</td></tr>
<tr><th>Created</th><td>2011-08-03T12:03:20.000+0000</td></tr>
<tr><th>Updated</th><td>2011-10-27T14:32:21.000+0000</td></tr>
</table>

<h3>Description</h3>

When using the String.format function, it works as expected when using the interpolation such as <code>String.format('inserted value is %s', 'expected')</code>.

However, when using the sequence syntax such as <code>String.format('inserted value is %1$s', 'expected')</code> garbled characters are returned where the interpolation is expected.

Code to replicate this issue below.

<code><pre>
var win = Titanium.UI.createWindow({
  backgroundColor: '#FFF'
});

var text = "String.format with %s interpolation - " + String.format('value = %s', 'correct');
text += "\nString.format with %1$s and %2$s interpolation - " + String.format('value = %1$s %2$s', 'correct1', 'correct2');

win.add(Titanium.UI.createLabel({
  text: text,
  color: '#000',
  left: 10,
  right: 10
}));
win.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Paul Dowsett 2011-08-03

   Matt
   
   Thanks for raising this ticket - it is a lot cleaner than your first. With this potential bug, are two files important in order to replicate the issue? Would you test with all your code in app.js to be certain? A single app.js file is always preferable to multiple files.
   
   I will correct the environment field for you. Please note these changes, so you know the information to provide with any new tickets.
   
   Cheers
   </li>
<li>Paul Dowsett 2011-08-03

   Would you also provide the strings.xml file you used to test this, in a code block in the body of the ticket?
   
   Cheers</li>
<li>Matthew O'Riordan 2011-08-03

   Paul, are you just trying to be difficult?  I have provided a perfectly workable testing solution as two files yes, but that DOES NOT EFFECT the issue in any way whatsoever.  Every Titanium App is more than one JS file, so why is this an issue?  Seriously man, why are you putting up a barrier every time.  Please pass this on as is, I have made the effort, now do your part please.
   
   Also, if you look at the code, I am not using an Localisation strings, so no strings.xml file is necessary.  The L method is never called, I am only using Strings.format</li>
<li>Paul Dowsett 2011-08-03

   OK Matthew, you are now aware of the points to bear in mind, in all the tickets I have edited for you today. These are all explained in the guidelines at [Submitting Bug Reports](<a href="http://wiki.appcelerator.org/display/guides/Contributing+to+Titanium#ContributingtoTitanium-SubmittingBugReports)" rel="nofollow" target="_blank">http://wiki.appcelerator.org/display/guides/Contributing+to+Titanium#ContributingtoTitanium-SubmittingBugReports)</a>, which I urge you to read.</li>
<li>Matthew O'Riordan 2011-08-03

   Thanks Paul.
   
   I will bear that mind for future tickets.</li>
<li>Natalie Huynh 2011-08-25

   Tested with 1.8.0.v20110819142548
   iPhone 4.3.4
   iPad2 4.3.2
   Motorola Xoom 3.2
   Nexus One 2.2.2</li>
</ol>


<p><a href="/TIMOB/TIMOB-4886.json">JSON Source</a></p>