---
title: "[TIMOB-5041] Android: Activity related events fire only once for tabgroup activity"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2011-09-12T13:36:25.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.2</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>android, enterprise</td></tr>
<tr><th>Reporter</th><td>Anirudh Nagesh</td></tr>
<tr><th>Assignee</th><td>Don Thorp</td></tr>
<tr><th>Created</th><td>2011-08-17T18:07:23.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-23T21:37:29.000+0000</td></tr>
</table>

<h3>Description</h3>

The activity related events fire only once on tabgroup activity, but works fine with a heavyweight window.
The Sample code is below.
<code><pre>
Titanium.UI.setBackgroundColor('#000');

// create tab group
var tabGroup = Titanium.UI.createTabGroup();


//
// create base UI tab and root window
//
var win1 = Titanium.UI.createWindow({  
    title:'Tab 1',
    backgroundColor:'#fff'
});
var tab1 = Titanium.UI.createTab({  
    icon:'KS_nav_views.png',
    title:'Tab 1',
    window:win1
});

var label1 = Titanium.UI.createLabel({
	color:'#999',
	text:'I am Window 1',
	font:{fontSize:20,fontFamily:'Helvetica Neue'},
	textAlign:'center',
	width:'auto'
});

win1.add(label1);

//
// create controls tab and root window
//
var win2 = Titanium.UI.createWindow({  
    title:'Tab 2',
    backgroundColor:'#fff'
});
var tab2 = Titanium.UI.createTab({  
    icon:'KS_nav_ui.png',
    title:'Tab 2',
    window:win2
});

var label2 = Titanium.UI.createLabel({
	color:'#999',
	text:'I am Window 2',
	font:{fontSize:20,fontFamily:'Helvetica Neue'},
	textAlign:'center',
	width:'auto'
});

win2.add(label2);



//
//  add tabs
//
tabGroup.addTab(tab1);  
tabGroup.addTab(tab2);  


// open tab group
tabGroup.open();

Ti.Android.currentActivity.addEventListener('pause', function(e){
	Ti.API.info('changeState App is pausing');
});

Ti.Android.currentActivity.addEventListener('resume', function(e){
	Ti.API.info('changeState App is resuming');
});
</pre></code>

<h4>Associated Hepdesk ticket:</h4>
appc.me/c/APP-834283

<h3>Comments</h3>

<ol>
<li>Dawson Toth 2011-08-29

   Check out the workaround on [TIMOB-4121] for an explanation of how to get around what you are seeing.</li>
<li>Moshe Marciano 2011-08-30

   The example in that ticket relies on multi-context application (url parameter in the createWindow call), we have a big app that suffered major stability issues until we were advised by you guys to convert it to a single-context app - that helped a lot, but set us back weeks behind our schedule.
   
   we cannot convert it back to multi-context because we don't have the time and it will bring instability back to the app.
   
   we need another workaround even if it is only temporary and even if it means a private fork of the framework...we need to ship the product ASAP.</li>
<li>Moshe Marciano 2011-08-30

   BTW, all we need is to repsond to when the user presses the HOME key and send the app to the background...we need to cleanup and also when the app is resumed, we need to reinitiate. We don't need control per tab...right now we get a single event and further pause/resumed are not triggered.</li>
<li>Pedro Enrique 2011-09-12

   The activity is in relationship with the window. This code works as expected:
   
   (assuming this is a single context application)
   <h4>Code:</h4>
   <code><pre>
   var W = {};
   W.Window = function(currentTab){
   	
   	var win = Ti.UI.createWindow({
   		fullscreen:false,
   		backgroundColor:"#"+((1&lt;&lt;24)*Math.random()|0).toString(16)
   	});
   	var btn = Ti.UI.createButton({
   		title:'click',
   		width:200,
   		height:50
   	});
   	win.add(btn);
   	
   	btn.addEventListener('click', function(){
   		currentTab.open(W.Window(currentTab));
   	});
   	
   	win.addEventListener('focus', function(){
   		Ti.API.info(' -=-=-=-=-=-=- focus -=-=-=-=-=-=- ');
   	});
   	win.activity.addEventListener('pause', function(){
   		Ti.API.info(' -=-=-=-=-=-=- pause -=-=-=-=-=-=- ');
   	});
   	win.activity.addEventListener('resume', function(){
   		Ti.API.info(' -=-=-=-=-=-=- resume -=-=-=-=-=-=- ');
   	});
   	return win;
   }
   
   W.TabGroup = function(){
   	var tabGroup = Ti.UI.createTabGroup();
   	var tab1 = Ti.UI.createTab({
   		title:'win1'
   	});
   	tab1.window = W.Window(tab1);
   	var tab2 = Ti.UI.createTab({
   		title:'win2'
   	});
   	tab2.window = W.Window(tab2);
   	tabGroup.addTab(tab1);
   	tabGroup.addTab(tab2);
   	return tabGroup;
   }
   
   W.TabGroup().open();
   </pre></code>
   
   <h4>Conclusion:</h4>
   - Make the windows "fullscreen: false"
   - And set the event listener to the window's activity</li>
<li>Pedro Enrique 2011-09-12

   Working sample code provided. This is not a bug.</li>
<li>Joe Falcone 2012-05-24

   This example only works if the window is part of a tabGroup.  
   Otherwise, if you have a heavyweight window that is not part of a tabGroup, 
   
   if you try to do something with the activity of the heavyweight window, such as
   
   win.activity.addEventListener('pause', function () { Ti.API.info('pause') });
   
   you get "Uncaught TypeError: Object #<Object> has no method 'addEventListener'
   
   If you need an example, just remove the tabGroup from the above example.
   
   So for us that do not use tabGroup's, what should we do to get access to pause & resume events.</li>
<li>Joe Falcone 2012-05-24

   </li>
<li>Lee Morris 2017-03-23

   Closing ticket as invalid with reference to the previous comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-5041.json">JSON Source</a></p>