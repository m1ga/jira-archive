---
title: "[TIMOB-5085] Tooling: Disabling Spotlight causes iOS builder.py to hang on OSX Lion"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-09-09T12:26:53.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-35, Release 1.8.0</td></tr>
<tr><th>Components</th><td>Tooling</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Marshall Culpepper</td></tr>
<tr><th>Assignee</th><td>Marshall Culpepper</td></tr>
<tr><th>Created</th><td>2011-08-23T10:51:37.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-08T00:03:39.000+0000</td></tr>
</table>

<h3>Description</h3>

If you have the Spotlight indexer disabled, the iPhone builder.py will hang when it tries to use <code>mdfind</code> to search for log files. Snippet of the builder.py output:

<code><pre>
--- snip copying stuff ---

[DEBUG] executing command: /usr/bin/killall iPhone Simulator
[DEBUG] No matching processes belonging to you were found
[DEBUG] finding old log files
[DEBUG] executing command: mdfind -onlyin /Users/marshall/Library/Application Support/iPhone Simulator/4.3 -name .log
(HANG HERE)
</pre></code>

To reproduce this, simply disable the Spotlight indexer, and try running any iPhone project:
<code><pre>
$ sudo mdutil -a -i off
$ titanium run --platform=iphone
</pre></code>

We can easily workaround this by checking the status of the Spotlight indexer with <code>mdutil</code>, and falling back to Python's <code>os.walkdir</code> or, simply use <code>find</code>:
<code><pre>
$ mdutil -a -s
/:
	Indexing disabled.
</pre></code>

<h3>Comments</h3>

<ol>
<li>Marshall Culpepper 2011-08-26

   To test this fix, just disable spotlight indexing as listed above. Without the patch builder.py will hang for a _very_ long time. With the patch, builder.py will fall back to using recursive file search. Also try adding this property to a Titanium app:
   
   <code><pre>
   &lt;property name="ti.ios.enablemdfind" type="bool"&gt;false&lt;/property&gt;
   </pre></code>
   
   Build the app, and you should just notice that it no longer uses mdfind in the debugging output.</li>
<li>Marshall Culpepper 2011-09-09

   this has been merged</li>
<li>Lee Morris 2017-03-08

   Closing ticket due to time passed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-5085.json">JSON Source</a></p>