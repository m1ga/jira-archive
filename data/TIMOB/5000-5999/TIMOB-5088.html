---
title: "[TIMOB-5088] Android: webView does not support openDatabase"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-07-30T17:20:02.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.2, Release 2.0.2, Release 3.0.0, Release 3.0.2, Release 3.1.0</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 16, 2013 Sprint 16 API, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>hard_to_verify, parity</td></tr>
<tr><th>Reporter</th><td>Jon Alter</td></tr>
<tr><th>Assignee</th><td>Hieu Pham</td></tr>
<tr><th>Created</th><td>2011-08-23T14:38:04.000+0000</td></tr>
<tr><th>Updated</th><td>2013-10-24T00:17:38.000+0000</td></tr>
</table>

<h3>Description</h3>

openDatabase does not work in a webView but it does in the Android browser.

Step 1: create a file called test.html
Step 2: host it
Step 3: run the code below (changing the url to point to test.html)
Step 4: notice that the database is not created
Step 5: use the android browser and go to the same file
Step 6: notice that the database is created successfully

<code><pre>
var win = Ti.UI.createWindow();

var webView = Ti.UI.createWebView({
	url: "<a href="http://192.168.1.137/~jalter/test/test.html" rel="nofollow" target="_blank">http://192.168.1.137/~jalter/test/test.html</a>"
});
win.add(webView);

win.open();

</pre></code>

<code><pre>
&lt;html&gt;
	&lt;head&gt;
		&lt;title&gt;Test&lt;/title&gt;
		&lt;script type="text/javascript"&gt;	
			function setupDatabase() {
				var result = document.getElementById('result');
				var db;
				db = openDatabase('tweets', '1.0', 'db of tweets', 2 * 1024 * 1024);
				if(db){
				 	result.innerHTML = '&lt;li&gt;DB created successfully&lt;/li&gt;';
				}else{
				  	result.innerHTML = '&lt;li&gt;DB failed to be created&lt;/li&gt;';
				}
			}			
		&lt;/script&gt;
	&lt;/head&gt;
	&lt;body onload="setupDatabase()"&gt;
		&lt;div id='result'&gt;Nothing yet...&lt;/div&gt;
	&lt;/body&gt;
&lt;/html&gt;
</pre></code>

<h4>Associated Helpdesk Ticket</h4>
<a href="http://appc.me/c/APP-323498" rel="nofollow" target="_blank">http://appc.me/c/APP-323498</a>

<h4>Another customer having the same issue</h4>

I need to use web SQL in a Titanium web View. I've used the following code snippet to test the functionality. This code works fine on iPhone, but it fails on Android. Can you please provide assistance in this regard.

<code><pre>
var db = openDatabase('mydb', '1.0', 'my first database', 1024);

db.transaction(function (tx) {
  tx.executeSql('CREATE TABLE IF NOT EXISTS foo (id unique, text)');
  tx.executeSql('INSERT INTO foo (id, text) VALUES (1, "ABCD")');
});

db.transaction(function (tx) {
 tx.executeSql('SELECT * FROM foo', [], function (tx, results) {
   var len = results.rows.length, i;
   for (i = 0; i &lt; len; i++) {
    $("#val1").text("Value : "+results.rows.item(i).text);
  }
});

});
</pre></code>

<h3>Comments</h3>

<ol>
<li>Chris Haff 2011-08-24

   Here is what needs to happen.  I reviewed the source on <a href="https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/ui/src/ti/modules/titanium/ui/widget/webview/TiUIWebView.java" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/android/modules/ui/src/ti/modules/titanium/ui/widget/webview/TiUIWebView.java</a>
   and it looks like you are not enabling the database. That would require the addition of settings.setDatabaseEnabled(true); in TiUIWebView.</li>
<li>Chris Haff 2011-08-24

   [~dthorp] This is not a feature, it's a bug because it's inconsistent with iOS where this works fine (Haven't tried BB yet).  This brakes the promise of Titanium and therefore should be a bug (and IMO of course should be addressed immediately.)  :)</li>
<li>Hieu Pham 2013-07-29

   master PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/4507" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4507</a></li>
<li>Lokesh Choudhary 2013-10-24

   Verified the fix. Database is created successfully.
   Closing.
   
   Environment:
   Appcel Studio : 3.2.0.201310230601
   Ti SDK : 3.2.0.v20131022171645
   Mac OSX : 10.8.5
   CLI - 3.2.0 with hash 72f7426b4ee6c2d2883c666d5b7e03906a16012f
   Device: Samsung Galaxy S4 running android 4.2.2</li>
</ol>


<p><a href="/TIMOB/TIMOB-5088.json">JSON Source</a></p>