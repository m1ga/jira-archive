---
title: "[TIMOB-5177] Android: scaled images in ImageView are stretched if aspect ratio of view doesn't match source image."
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-09-26T15:17:32.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-38, Release 1.8.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>imageview, merged-v8, parity, scale, stage</td></tr>
<tr><th>Reporter</th><td>Bill Dawson</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-08-30T14:06:07.000+0000</td></tr>
<tr><th>Updated</th><td>2011-10-31T22:40:48.000+0000</td></tr>
</table>

<h3>Description</h3>

Given the attached large photo "julia.jpg" and the following app.js:

<code><pre>
Titanium.UI.setBackgroundColor('#000');
var win = Titanium.UI.createWindow({
	title : 'Test',
	backgroundColor : '#000',
	exitOnClose : true
});

var img = Ti.UI.createImageView({
	image : "julia.jpg",
	top : 0,
	left : 0,
	width : "300dp",
	height : "100dp",
	backgroundColor : "red"
});

win.add(img);
win.open();
</pre></code>

The aspect ratio of the image (w/h) is 0.75.  The aspect ratio of the created ImageView is 3.0.  If you run the app in iOS, you'll see that iOS makes a "best fit" for image, being sure to display all of it *and* at the correct aspect ratio.  Our Android implementation, on the other hand, will stretch to fit the entirety of the ImageView, meaning it forces the 0.75 aspect ratio photo into a 3.0 aspect ratio, causing it to stretch horizontally and look bad.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-5177_22730/julia.jpg">julia.jpg</td></td><td>2011-08-30T14:09:13.000+0000</td><td>739261</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-5177_23001/timob5177.zip">timob5177.zip</td></td><td>2011-09-21T15:52:23.000+0000</td><td>2356828</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-09-21

   Testing notes:
   
   The attached ugly test app (timob5177.zip) simply shows that when the aspect ratio of the bitmap and its containing ImageView are different, you get a best fit that preserves the original ratio.  This is Android's "CENTER_FIT" mode which is the default.  A later ticket will allow for other options.
   
   The bottom image in the test app simply shows  that if you set the dimensions to "auto", you get what you'd expect: ImageView same size as scaled bitmap, aspect ratio preserved.
   
   Additionally test KitchenSink ImageView tests and TableView layout tests.</li>
<li>Bill Dawson 2011-09-21

   Pull request ready:
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/485" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/485</a></li>
<li>Don Thorp 2011-09-26

   test, review, merge.</li>
<li>Alan Vaghti 2011-10-13

   Closing.
   
   Fix verified on Nexus One 2.2.2 with SDK 1.8.0.v20111013161411</li>
</ol>


<p><a href="/TIMOB/TIMOB-5177.json">JSON Source</a></p>