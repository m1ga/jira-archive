---
title: "[TIMOB-5279] iOS: Repeatedly Scrolling a Table View Leaks Memory"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-10-06T23:41:48.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-37, Release 1.8.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>branch-5062, module_tableview, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Dawson Toth</td></tr>
<tr><th>Assignee</th><td>Stephen Tramer</td></tr>
<tr><th>Created</th><td>2011-09-12T16:18:43.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-19T12:46:35.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>
When you repeatedly scroll up and down in a table view, memory is progressively leaked and is not reclaimed until a memory warning occurs. Do this for long enough, and the app will crash.

<h4>When This Happens</h4>
Based on experimentation, I see an inverse correlation between number of rows in the table and how quickly you need to scroll up and down before the table view will start leaking memory. For example, if you only have 50 rows, you have to scroll very quickly to get the problem to start. But if you increase that to 200 rows, it is much easier to see the leak. Further, with 200 rows, if you slowly scroll through, you won't see the problem.

<h4>Sample Code</h4>
Consider the following code, and download the attached iproducts.png to your resources directory:
<code><pre>
var win = Ti.UI.createWindow({ backgroundColor: '#fff' });

var rows = [];
for (var i = 0; i &lt; 200; i++) {
    var row = Ti.UI.createTableViewRow();
    row.add(Ti.UI.createLabel({ text: 'Row ' + i, left: 70 }));
    row.add(Ti.UI.createImageView({ image: 'iproducts.png', left: 10 }));
    rows.push(row);
    row = null;
}
win.add(Ti.UI.createTableView({
    data: rows,
    bottom: 50
}));

var freeMemory = Ti.UI.createLabel({
    height: 50, bottom: 0
});
setInterval(function() {
    freeMemory.text = 'Free Memory: ' + Ti.Platform.availableMemory;
}, 1000);
win.add(freeMemory);

win.open({
    modal: true,
    modalStyle: Ti.UI.iPhone.MODAL_PRESENTATION_FORMSHEET
});
</pre></code>

<h4>Steps To Reproduce</h4>

1. Drop the above in an app.js
2. Download the attached iproducts.png to your Resources directory
3. Run the app on an iPad 1; I have reproduced this in the simulator, but it is easier to see and reproduce on an actual device
4. Slowly scroll through the whole table, making sure all of the rows are loaded.
5. Look at the "Free Memory" label. You probably saw it decrease as the rows were loaded, and then stabilize. Slow scrolling through the table might cause this number to change, but it should stay pretty stable.
6. Now rapidly scroll up and down in the table view. You should be going at a rate of around 2-3 flicks per second to go from top to bottom, and then 2-3 flicks to get back to the top in another second.
7. Keep doing step 6, and watch "Free Memory". It might stay stable for a couple of seconds, but then you should see it go down by a megabyte or more per second. The OS will send a memory warning, and you'll jump back up to having lots of free memory. But it will continue to drain memory, and continue to hit memory warnings, until the OS forces the app to terminate.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-5279_22906/iproducts.png">iproducts.png</td></td><td>2011-09-12T16:18:43.000+0000</td><td>2709</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Reggie Seagraves 2011-09-13

   Probably a duplicate of this.</li>
<li>Stephen Tramer 2011-09-14

   When resolving this bug, please also resolve TIMOB-5247 as DUPLICATE. Confirmed that the fix for this bug works for that one.</li>
<li>Stephen Tramer 2011-10-05

   Issue was reopened and then marked resolved again, due to misidentification.</li>
<li>Alan Vaghti 2011-10-06

   The test in the description of this bug passed as expected with both the iPad simulator 4.3 and the iPad 2 4.3.5 .
   
   However the associated bug, TIMOB-5247 continues to fail.  There is choppy performance followed by a crash.  That test was conducted on an iPod 4.3.3 with SDK 1.8.0.v20111006001414.
   
   Reopening issue.</li>
<li>Stephen Tramer 2011-10-06

   By QE's own admission, test passes. Related bug should remain open, and the tag marking this bug as a "duplicate" has been removed because they are clearly separate issues.</li>
<li>Wilson Luu 2011-12-09

   Closing bug. Verified fix on:
   
   OS: Mac OS X Lion
   Titanium Studio, build: 1.0.7.201112080131
   SDK build: 1.8.0.1.v20111209102124
   Device: iphone 4S (5.0.1)</li>
</ol>


<p><a href="/TIMOB/TIMOB-5279.json">JSON Source</a></p>