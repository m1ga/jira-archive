---
title: "[TIMOB-5296] iOS: app pause event is fired after the os has taken a snapshot of the app"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2011-09-21T12:45:19.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.2</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-37</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Jon Alter</td></tr>
<tr><th>Assignee</th><td>Reggie Seagraves</td></tr>
<tr><th>Created</th><td>2011-09-16T16:35:54.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-22T21:10:30.000+0000</td></tr>
</table>

<h3>Description</h3>

When an application is backgrounded, iOS takes a screenshot of the app and uses it in its animation. This screenshot it stored on the filesystem of the device. The user wants to hide sensitive information from the screen before this screenshot is taken. When this is done in Titanium, iOS takes the screenshot before anything in the pause event listener is run. In a native app, it runs fast enough to change the label before the screenshot is taken.

Step 1: run the code below
Step 2: hit the home button
Step 3: go look at the screenshot that was taken. 
(my screenshot was in "/Users/jalter/Library/Application Support/iPhone Simulator/4.3.2/Applications/4BF6EF8F-5523-421A-8FE8-6793B79CD3F3/Library/Caches/Snapshots/com.appcelerator.test3")
Step 4: we want the screenshot to say "App has been paused", but the label change does not happen fast enough.


<code><pre>
var win = Ti.UI.createWindow({
	backgroundColor : 'white',
	orientationModes : [Ti.UI.PORTRAIT]
});
win.open();

var label = Ti.UI.createLabel({
	text : 'No app event received. Make call while running app',
	textAlign : 'center',
	width : 'auto'
});
win.add(label);

Titanium.App.addEventListener('pause', function() {
	label.text = "App has been paused";
});

Titanium.App.addEventListener('resume', function(e) {
	label.text = "App has resumed";
});
</pre></code>

<h4>Associated Helpdesk Ticket</h4>
<a href="http://appc.me/c/APP-822958" rel="nofollow" target="_blank">http://appc.me/c/APP-822958</a>

<h3>Comments</h3>

<ol>
<li>Jon Alter 2011-09-21

   <h4>Workaround</h4>
   <code><pre>
   // by Blain Hamon
   var win = Ti.UI.createWindow({
     backgroundColor : 'white',
     orientationModes : [Ti.UI.PORTRAIT]
   });
   win.open();
   
   var label = Ti.UI.createLabel({
     text : 'No app event received. Make call while running app',
     textAlign : 'center',
     width : 'auto'
   });
   win.add(label);
   
   Titanium.App.addEventListener('pause', function() {
   // this will delete the Snapshots folder and create a file in its place 
   // so that the folder cannot be recreated
     var snapFolder = Ti.Filesystem.getFile(Ti.Filesystem.applicationSupportDirectory,"../Caches/Snapshots");
     snapFolder.deleteDirectory(true);
     snapFolder.write("No Folder for you!");
     label.text = "App has been paused";
   });
   
   Titanium.App.addEventListener('resume', function(e) {
     label.text = "App has resumed";
   });
   </pre></code></li>
<li>Neeraj Gupta 2012-06-10

   There is almost no way to guarantee that the UI will be updated from the JS thread in time on the pause/paused event. Titanium documentation clearly states that.
   
   The only way to implement this functionality would be in the native code itself. A simple solution would be to pop up a UIView (maybe just the splash screen with the default image) in front of everything else and obscure the app. This would kind of make sure that the snapshot taken by iOS does not have any sensitive information. The drawback is that the obscuring a view would be visible to the users momentarily when the app boots up and before we can remove it from the view heirarchy.
   
   We could drive this off of an app property (defined in tiapp.xml) or a runtime property (Ti.App.Properties.setString) so that the obscuring of data could be on a per screen basis.
   </li>
<li>Lee Morris 2017-03-22

   Closing ticket as "Won't Fix".</li>
</ol>


<p><a href="/TIMOB/TIMOB-5296.json">JSON Source</a></p>