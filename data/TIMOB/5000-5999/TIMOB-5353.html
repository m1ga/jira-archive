---
title: "[TIMOB-5353] iOS: In TiBase.h, \"expected\" and \"was\" Are Frequently Backwards"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Trivial</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-03-26T06:57:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0, Release 3.0.2</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-50, Release 1.8.1, Release 3.2.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>module_tabgroup, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Dawson Toth</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2011-09-23T02:58:32.000+0000</td></tr>
<tr><th>Updated</th><td>2013-03-26T06:57:11.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>
In several of the macros defined in TiBase.h, the log warnings about "expected: type, was: x" are backwards. They will show the actual type beside "expected" and the expected type beside "actual".

<h4>Pull Request</h4>
<a href="https://github.com/appcelerator/titanium_mobile/pull/490" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/490</a>

<h4>Error Message</h4>
When I tried to pass a label to a tab group's addTab method, I see the following. Note how expected and was are switched?
<code><pre>
[ERROR] Invalid type passed to function. expected: TiUILabelProxy, was: TiUITabProxy  in -[TiUITabGroupProxy addTab:] (TiUITabGroupProxy.m:65)
</pre></code>

<h4>Reproduction</h4>
Drop the following in your app.js, and run it. The app will crash (as it should... we're adding a label to a tab group!) but you will notice the erroneous log message right before the nasty exceptions are thrown.
<code><pre>
var tabs = Ti.UI.createTabGroup();
tabs.addTab(Ti.UI.createLabel());
tabs.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Dawson Toth 2011-09-23

   Added a pull request.</li>
<li>Dustin Hyde 2011-12-12

   Bug still valid (conditionally), verified on:
   SDK: 1.8.0.v20111010114849
   Studio: 1.0.7.201112120322
   OS: OS X Lion
   
   There are three different scenarios, each having a different result:
   
   I. Building and running to device.
   II. Building to device, running in simulator.
   III. Building and running to simulator.
   
   I. Building and running to device (with one exception).
   
   Devices: iPhone/iPad 4.3.5, iPhone 5.0.1, iPhone Simulator 5.0 (run after building to device)
   
   Log: [ERROR] Script Error = invalid method (createTabGroup) passed to UIModule at app.js (line 1).
   
   II. Building to device, running in simulator (after a few runs, behavior I is exhibited).
   
   Devices: iPhone Simulator 4.3, iPad Simulator 4.3/5.0
   
   Log: <crash w/no log>
   
   III. Building and running to simulator. This is the original incorrect behavior.
   
   Devices: iPhone/iPad Simulator 4.3/5.0
   
   Log: [ERROR] Invalid type passed to function. expected: TiUILabelProxy, was: TiUITabProxy  in -[TiUITabGroupProxy addTab:] (TiUITabGroupProxy.m:65)</li>
<li>Blain Hamon 2011-12-14

   Couldn't recreate the crash or issues, but did notice one related error that slipped through the cracks. This one would be recreated by
   
   <code><pre>
   
   var foo = Ti.UI.createEmailDialog({toRecipients:5});
   foo.open();
   
   </pre></code></li>
<li>Natalie Huynh 2012-01-13

   Tested with 1.9.0.v20120112104633
   First Case:
   [ERROR] Invalid type passed to function. expected: TiUITabProxy, was: TiUILabelProxy  in -[TiUITabGroupProxy addTab:] (TiUITabGroupProxy.m:65)
   
   Second Case:
   [ERROR] Invalid type passed to function. expected: NSArray or nil, was: __NSCFNumber  in -[TiUIEmailDialogProxy open:] (TiUIEmailDialogProxy.m:64)
   
   Need to be tested on Simulator to see the expected and was</li>
<li>Paras Mishra 2013-02-13

   Running the app, no exception occurred.
   
   Tested on:
   Studio : 3.0.2.201302041757
   SDK version:  3.0.2.v20130207164659
   Device : Google Nexus, android : 4.1
   Actual:
   No exception occur
   
   Excepted:
   A classCastException should occur.
   E/TiApplication(8640): (main) \[5973,6039\] Sending event: exception on thread: main msg:java.lang.ClassCastException: ti.modules.titanium.ui.LabelProxy; Titanium 1.8.1,2012/01/27 17:31,a24502a
   E/TiApplication(8640): java.lang.ClassCastException: ti.modules.titanium.ui.LabelProxy
   </li>
<li>Blain Hamon 2013-03-26

   Confused: Why is an android test used to reopen an iOS bug?</li>
<li>Thomas Huelbert 2013-03-26

   Paras, since this is an iOS bug, we need to open a new bug for android (especially when the noted issue is fixed). So... please confirm this works on ios, and fi so close. AT that point, go ahead and log a new issue for android. Let Dustin or myself know if this is not clear. thanks!
   </li>
<li>Paras Mishra 2013-03-26

   App doesn't crash and error message is reported as expected.Hence closing the issue.
   Error message comes as 
   Invalid type passed to function at app.js
   
   Log on the console
   [ERROR] Script Error {
       backtrace = "#0 () at :0";
       line = 56;
       message = "Invalid type passed to function";
       nativeLocation = "-[TiUITabGroupProxy addTab:] (TiUITabGroupProxy.m:78)";
       nativeReason = "expected: TiUITabProxy, was: TiUILabelProxy";
       sourceId = 303212608;
       sourceURL = "file://localhost/Users/global/Library/Application%20Support/iPhone%20Simulator/6.1/Applications/B4AB833B-8CB1-4070-A98A-CF7E91C45780/abc.app/app.js";
   }
   
   Tested on:
   iOS version: 6
   Studio : 3.0.2.201302041757
   SDK version: 3.1.0.v20130325155928
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-5353.json">JSON Source</a></p>