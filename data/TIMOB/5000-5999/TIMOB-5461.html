---
title: "[TIMOB-5461] Android: View with border radius crashes Honeycomb when hardware acceleration on"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-01-05T15:22:26.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.2</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-40, Release 1.8.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>honeycomb, module_views, qe-testadded, stage</td></tr>
<tr><th>Reporter</th><td>Bill Dawson</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-10-06T14:15:43.000+0000</td></tr>
<tr><th>Updated</th><td>2012-11-19T18:44:31.000+0000</td></tr>
</table>

<h3>Description</h3>

Honeycomb introduced hardware acceleration which can be turned on with a setting in the <application> node of AndroidManifest.xml.  When it's turned on, and a view has a borderRadius set (> 0), the app crashes because we use clipPath, which is not supported with hw accel. (cf <a href="http://android-developers.blogspot.com/2011/03/android-30-hardware-acceleration.html)." rel="nofollow" target="_blank">http://android-developers.blogspot.com/2011/03/android-30-hardware-acceleration.html).</a>

Re-creation steps:

* Create an app.
* Make the tiapp.xml's <android> section so:

<code><pre>
	<android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>">
		<tool-api-level>11</tool-api-level>
		<manifest>
			<application android:hardwareAccelerated="true"/>
		</manifest>
	</android>
</pre></code>

* Make the app.js so:

<code><pre>
Titanium.UI.setBackgroundColor('#000');
var win = Titanium.UI.createWindow({  
    title:'Test',
    backgroundColor:'#000',
	exitOnClose: true
});

win.add(Ti.UI.createView({
	backgroundColor: "blue",
	borderColor: "red",
	borderWidth: 10,
	borderRadius: 5,
	left: "10dp",
	right: "10dp",
	top: "50dp",
	height: "200dp"
}));

win.open();
</pre></code>

* Run the app on the honeycomb device and it will crash.  (When testing the fix, it should not crash of course.).

Typical crash logcat entry looks like:

<code><pre>
E/AndroidRuntime(26499): java.lang.UnsupportedOperationException
E/AndroidRuntime(26499): 	at android.view.GLES20Canvas.clipPath(GLES20Canvas.java:287)
E/AndroidRuntime(26499): 	at org.appcelerator.titanium.view.TiBackgroundDrawable.draw(TiBackgroundDrawable.java:73)
E/AndroidRuntime(26499): 	at android.view.View.draw(View.java:9264)
... (etc)
</pre></code>



<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-10-06

   Pull req ready
   <a href="https://github.com/appcelerator/titanium_mobile/pull/534" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/534</a></li>
<li>Natalie Huynh 2011-12-06

   Tested with 1.8.0.1.v20111205164258 v8/rhino on
   Galaxy 10.1 (3.1)
   Droid 1 (2.2.2)
   Nexus S (2.3.6)
   Emulator (4.0)</li>
<li>Michael Pettiford 2012-01-05

   Reopening/closing to add/remove labels</li>
</ol>


<p><a href="/TIMOB/TIMOB-5461.json">JSON Source</a></p>