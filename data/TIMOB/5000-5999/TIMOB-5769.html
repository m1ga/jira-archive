---
title: "[TIMOB-5769] Android: Add the ability to add multiple polygons to the MapView"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2015-05-28T07:14:03.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 4.1.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>SupportTeam, module_androidmapv2, qe-manualtest, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Eduardo Gomez</td></tr>
<tr><th>Assignee</th><td>Ashraf Abu</td></tr>
<tr><th>Created</th><td>2011-10-17T08:04:06.000+0000</td></tr>
<tr><th>Updated</th><td>2015-06-10T19:04:20.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Feature Request</h4>
To add routes and allow for multiple polygons to be added to the MapView as well as have fill, opacity and color properties.

<h4>Utilities</h4>
That would allow developers to implement geofencing (see <a href="http://en.wikipedia.org/wiki/Geo-fence)" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Geo-fence)</a> a common technique for Android apps.

<h4>Customer notes</h4>
"We'd like to be able to hook into the events when a user enters and leaves a geo-fenced polygon or a radius around a geolocated point."

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-5769_23739/geofence01.jpg">geofence01.jpg</td></td><td>2011-10-17T08:04:06.000+0000</td><td>47052</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-5769_23740/geofence02.jpg">geofence02.jpg</td></td><td>2011-10-17T08:04:06.000+0000</td><td>151942</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-5769_35445/MapsIMG_0255.PNG">MapsIMG_0255.PNG</td></td><td>2013-02-07T01:15:13.000+0000</td><td>227808</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-5769_55251/ti.map-android-2.3.1.zip">ti.map-android-2.3.1.zip</td></td><td>2015-05-06T08:37:31.000+0000</td><td>3525184</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ingo Muschenetz 2013-02-08

   Can be fixed on Android Maps v2</li>
<li>Ashraf Abu 2015-05-06

   Test code app.js for PR that will be added here:
   <code><pre>
   Titanium.UI.setBackgroundColor('#000');
   
   Ti.Map = require('ti.map');
   
   var self = Ti.UI.createWindow({
   	backgroundColor : '#800'
   });
   
   // create UI components
   var view = Ti.UI.createView({
   	backgroundColor : '#800',
   });
   
   var mapview;
   
   // add map after window opens
   self.addEventListener('open', function() {
   	// Make sure we only add the map once
   	if (mapview !== undefined) {
   		return;
   	}
   
   	mapview = Titanium.Map.createView({
   		mapType : Titanium.Map.NORMAL_TYPE,
   		region : {
   			latitude : 37.389569,
   			longitude : -122.050212,
   			latitudeDelta : 0.1,
   			longitudeDelta : 0.1
   		},
   		animate : true,
   		regionFit : true,
   		userLocation : false,
   		top : '70dp'
   	});
   
   	// Handle all map annotation clicks
   	mapview.addEventListener('click', function(e) {
   		if (e.annotation && (e.clicksource === 'leftButton' || e.clicksource == 'leftPane')) {
   			mapview.removeAnnotation(e.annotation);
   		}
   	});
   
   	var appc = Ti.Map.createAnnotation({
   		latitude : 37.389569,
   		longitude : -122.050212,
   		title : 'Appcelerator HQ',
   		subtitle : 'Mountain View, CA',
   		pincolor : Ti.Map.ANNOTATION_GREEN
   	});
   
   	var randLoc = Ti.Map.createAnnotation({
   		latitude : 37.389569,
   		longitude : -122.0855498,
   		title : 'Random Location',
   		subtitle : 'Mountain View, CA',
   		pincolor : Ti.Map.ANNOTATION_ORANGE
   	});
   
   	var apple = Ti.Map.createAnnotation({
   		latitude : 37.331689,
   		longitude : -122.030731,
   		title : 'Apple HQ',
   		subtitle : 'Cupertino, CA',
   		pincolor : Ti.Map.ANNOTATION_RED
   	});
   	var google = Ti.Map.createAnnotation({
   		latitude : 37.422502,
   		longitude : -122.0855498,
   		title : 'Google HQ',
   		subtitle : 'Mountain View, CA',
   		pincolor : Ti.Map.ANNOTATION_VIOLET
   	});
   	var route = Ti.Map.createRoute({
   		width : 4,
   		color : '#f00',
   		points : [{
   			latitude : google.latitude,
   			longitude : google.longitude
   		}, {
   			latitude : appc.latitude,
   			longitude : appc.longitude
   		}, {
   			latitude : apple.latitude,
   			longitude : apple.longitude
   		}, {
   			latitude : randLoc.latitude,
   			longitude : randLoc.longitude
   		}]
   	});
   
   	var polygon = Ti.Map.createPolygon({
   		fillColor : '#30f0',
   		points : [{
   			latitude : google.latitude,
   			longitude : google.longitude
   		}, {
   			latitude : appc.latitude,
   			longitude : appc.longitude
   		}, {
   			latitude : apple.latitude,
   			longitude : apple.longitude
   		}, {
   			latitude : randLoc.latitude,
   			longitude : randLoc.longitude
   		}]
   	});
   
   	var circle = Ti.Map.createCircle({
   		center : {
   			latitude : google.latitude,
   			longitude : google.longitude
   		},
   		radius : 3000,
   		fillColor : '#3f00'
   	});
   
   	var mapview = Ti.Map.createView({
   		mapType : Ti.Map.NORMAL_TYPE,
   		region : {
   			latitude : 37.389569,
   			longitude : -122.050212,
   			latitudeDelta : 0.2,
   			longitudeDelta : 0.2
   		},
   		annotations : [google, appc, apple, randLoc]
   	});
   
   	mapview.addPolygon(polygon);
   	mapview.addCircle(circle);
   
   	self.add(mapview);
   });
   
   
   self.add(view);
   
   self.open();
   </pre></code>
   
   tiapp.xml that was used (for android map api key):
   <code><pre>
   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;ti:app xmlns:ti="<a href="http://ti.appcelerator.org" rel="nofollow" target="_blank">http://ti.appcelerator.org</a>"&gt;
       &lt;id&gt;com.testmap&lt;/id&gt;
       &lt;name&gt;TestMap&lt;/name&gt;
       &lt;version&gt;1.0&lt;/version&gt;
       &lt;publisher&gt;msamah&lt;/publisher&gt;
       &lt;url&gt;http://&lt;/url&gt;
       &lt;description/&gt;
       &lt;copyright&gt;2015 by msamah&lt;/copyright&gt;
       &lt;icon&gt;appicon.png&lt;/icon&gt;
       &lt;fullscreen&gt;false&lt;/fullscreen&gt;
       &lt;navbar-hidden&gt;false&lt;/navbar-hidden&gt;
       &lt;analytics&gt;true&lt;/analytics&gt;
       &lt;guid&gt;bb886494-8822-4437-9ccc-869476a2f16d&lt;/guid&gt;
       &lt;property name="ti.ui.defaultunit" type="string"&gt;dp&lt;/property&gt;
       &lt;ios&gt;
           &lt;plist&gt;
               &lt;dict&gt;
                   &lt;key&gt;UISupportedInterfaceOrientations~iphone&lt;/key&gt;
                   &lt;array&gt;
                       &lt;string&gt;UIInterfaceOrientationPortrait&lt;/string&gt;
                   &lt;/array&gt;
                   &lt;key&gt;UISupportedInterfaceOrientations~ipad&lt;/key&gt;
                   &lt;array&gt;
                       &lt;string&gt;UIInterfaceOrientationPortrait&lt;/string&gt;
                       &lt;string&gt;UIInterfaceOrientationPortraitUpsideDown&lt;/string&gt;
                       &lt;string&gt;UIInterfaceOrientationLandscapeLeft&lt;/string&gt;
                       &lt;string&gt;UIInterfaceOrientationLandscapeRight&lt;/string&gt;
                   &lt;/array&gt;
                   &lt;key&gt;UIRequiresPersistentWiFi&lt;/key&gt;
                   &lt;false/&gt;
                   &lt;key&gt;UIPrerenderedIcon&lt;/key&gt;
                   &lt;false/&gt;
                   &lt;key&gt;UIStatusBarHidden&lt;/key&gt;
                   &lt;false/&gt;
                   &lt;key&gt;UIStatusBarStyle&lt;/key&gt;
                   &lt;string&gt;UIStatusBarStyleDefault&lt;/string&gt;
               &lt;/dict&gt;
           &lt;/plist&gt;
       &lt;/ios&gt;
       &lt;android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt;
           &lt;manifest&gt;
               &lt;uses-sdk android:targetSdkVersion="21"/&gt;
               &lt;!-- Allows the API to download data from Google Map servers --&gt;
               &lt;uses-permission android:name="android.permission.INTERNET"/&gt;
               &lt;!-- Allows the API to cache data --&gt;
               &lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;
               &lt;!-- Use GPS for device location --&gt;
               &lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/&gt;
               &lt;!-- Use Wi-Fi or mobile connection for device location --&gt;
               &lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/&gt;
               &lt;!-- Allows the API to access Google web-based services --&gt;
               &lt;uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/&gt;
               &lt;!-- Specify OpenGL ES 2.0 as a requirement --&gt;
               &lt;uses-feature android:glEsVersion="0x00020000" android:required="true"/&gt;
               &lt;uses-permission android:name="com.appcelerator.sample.mapping.permission.MAPS_RECEIVE"/&gt;
               &lt;permission
                   android:name="com.appcelerator.sample.mapping.permission.MAPS_RECEIVE" android:protectionLevel="signature"/&gt;
               &lt;application&gt;
                   &lt;meta-data
                       android:name="com.google.android.maps.v2.API_KEY" android:value="AIzaSyBDHDIaKMqiLg6ntGv0snXFW32NDDEXgbc"/&gt;
               &lt;/application&gt;
           &lt;/manifest&gt;
       &lt;/android&gt;
       &lt;mobileweb&gt;
           &lt;precache/&gt;
           &lt;splash&gt;
               &lt;enabled&gt;true&lt;/enabled&gt;
               &lt;inline-css-images&gt;true&lt;/inline-css-images&gt;
           &lt;/splash&gt;
           &lt;theme&gt;default&lt;/theme&gt;
       &lt;/mobileweb&gt;
       &lt;modules&gt;
           &lt;module platform="iphone"&gt;ti.map&lt;/module&gt;
           &lt;module platform="android" version="2.3.1"&gt;ti.map&lt;/module&gt;
       &lt;/modules&gt;
       &lt;deployment-targets&gt;
           &lt;target device="android"&gt;true&lt;/target&gt;
           &lt;target device="ipad"&gt;true&lt;/target&gt;
           &lt;target device="iphone"&gt;true&lt;/target&gt;
           &lt;target device="mobileweb"&gt;true&lt;/target&gt;
       &lt;/deployment-targets&gt;
       &lt;sdk-version&gt;4.0.0.v20150429154210&lt;/sdk-version&gt;
       &lt;property name="appc-app-id" type="string"&gt;55499a092284ff862dbcfd92&lt;/property&gt;
   &lt;/ti:app&gt;
   </pre></code></li>
<li>Ashraf Abu 2015-05-06

   PR: <a href="https://github.com/appcelerator-modules/ti.map/pull/93" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/93</a></li>
<li>Ashraf Abu 2015-05-07

   Closed PR 93 in favor of <a href="https://github.com/appcelerator-modules/ti.map/pull/86." rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/86.</a> Will be reviewing this PR.</li>
<li>Ashraf Abu 2015-05-27

   Update: New PR: <a href="https://github.com/appcelerator-modules/ti.map/pull/99" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/99</a>
   
   <a href="https://github.com/appcelerator-modules/ti.map/pull/86" rel="nofollow" target="_blank">https://github.com/appcelerator-modules/ti.map/pull/86</a> is closed. Everything in PR86 was merged into 1 commit in PR99.</li>
<li>Ashraf Abu 2015-05-28

   Binary update PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/6881" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/6881</a></li>
<li>Lokesh Choudhary 2015-06-10

   Verified the feature. We can add ploygon's & circle's on to mapview.
   
   Closing.
   
   Environment:
   Appc Studio :  4.1.0.201505071004
   Ti SDK :  4.1.0.v20150610043614
   Ti CLI : 4.0.1
   Alloy : 1.6.0
   MAC Yosemite : 10.10.3
   Appc npm : 4.0.0
   Appc CLI : 4.0.2-rc2
   Node: v0.10.37
   Nexus 5 - Android 5.1.1
   Map Module: 2.3.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-5769.json">JSON Source</a></p>