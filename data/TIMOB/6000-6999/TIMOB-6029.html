---
title: "[TIMOB-6029] Android: Response cache doesn't request images after they are cleaned"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2012-03-11T22:26:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Marshall Culpepper</td></tr>
<tr><th>Assignee</th><td>Marshall Culpepper</td></tr>
<tr><th>Created</th><td>2011-11-05T13:34:51.000+0000</td></tr>
<tr><th>Updated</th><td>2012-03-11T22:26:00.000+0000</td></tr>
</table>

<h3>Description</h3>

After the cleanup timer executes (around 1 minute), and cached images will be cleared out and subsequent image loads fail with exceptions. 

<h3>Comments</h3>

<ol>
<li>Allen Yeung 2011-12-28

   I could not reproduce this in master. I had to remove the check for max_cache size, so it cleans the directory regardless of the cache size (TiResponseCache.java line 93). I ran the following app.js: 
   
   <code><pre>
   Titanium.UI.setBackgroundColor('#000');
   
   
   var win1 = Titanium.UI.createWindow({  
       title:'Tab 1',
       backgroundColor:'#fff'
   });
   
   var button = Titanium.UI.createButton({
       title:'open new window'
   });
   
   var webview = Ti.UI.createImageView({
       top: 0, left: 0, width: 100, height: 50,
       image: '<a href="http://www.appcelerator.com/wp-content/themes/appcelerator/img/APPC_logo.png" rel="nofollow" target="_blank">http://www.appcelerator.com/wp-content/themes/appcelerator/img/APPC_logo.png</a>'
   });
   
   var win2 = Titanium.UI.createWindow({  
       title:'Tab 2',
       backgroundColor:'#fff'
   });
   
   win2.add(webview);
   
   button.addEventListener('click', function(){
       win2.open();
   });
   
   var button2 = Titanium.UI.createButton({
       title:'close window'
   });
   
   button2.addEventListener('click', function(){
       win2.close();
   });
   
   win2.add(button2);
   
   win1.add(button);
   win1.open();
   </pre></code>
   
   1. Launch the app
   2. click on the button to open a new window.
   3. Use DDMS to browse the cache directory /mnt/sdcard/Android/data/<appid>/cache/_tmp/remote-image-cache
   4. Wait for the cache directory to clear
   5. Close the window by clicking the button
   6. Reopen the window by clicking the button
   
   The cache directory re-populates after the window is reopened.</li>
<li>Michael Pettiford 2012-01-24

   Closing this issue
   
   Tested with Allens test steps to reproduce and verified expected behavior
   
   *Note had to edit TiResponseCache.java to repro and scons</li>
</ol>


<p><a href="/TIMOB/TIMOB-6029.json">JSON Source</a></p>