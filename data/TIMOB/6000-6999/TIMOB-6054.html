---
title: "[TIMOB-6054] Titanium.Filesystem.File.exists function crashes after being called for many times "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2011-11-10T14:39:41.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-45</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Qing Gao</td></tr>
<tr><th>Assignee</th><td>Reggie Seagraves</td></tr>
<tr><th>Created</th><td>2011-11-07T13:41:45.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-03T22:50:52.000+0000</td></tr>
</table>

<h3>Description</h3>

Titanium.Filesystem.File.exists() function crashes after being repeatedly called. The crash log is attached. This bug has been fixed in 1.8.0.

<h4>Repro Steps</h4>

Run the following code snippet on the iPhone emulator and it will get crashed.

<code><pre>
var dir, i;
for (i = 0; i <= 1000; i++) {
  dir = Ti.Filesystem.getFile(Ti.Filesystem.applicationSupportDirectory, "myfolder");
  if (!dir.exists()) {
    dir.createDirectory();
  }
}
alert("done");
</pre></code>

<h4>Associated Helpdesk Ticket</h4>

<a href="http://appc.me/c/APP-647367" rel="nofollow" target="_blank">http://appc.me/c/APP-647367</a>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-6054_24088/testFileSystem_2011-11-08-100821_qgaombp.crash">testFileSystem_2011-11-08-100821_qgaombp.crash</td></td><td>2011-11-08T10:12:47.000+0000</td><td>37545</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Damien Elmes 2011-11-07

   As mentioned in the helpdesk ticket, a fix for 1.7 would be greatly appreciated, as I can't drop support for iOS3 yet.</li>
<li>Damien Elmes 2011-11-09

   In case it helps, the crash my users are getting in the app looks a little different, but also seems to be triggered by an exists() call (if I comment out the call, no crash)
   
   <code><pre>
   Thread 6 name:  KrollContext<kroll$2>
   Thread 6 Crashed:
   0   Anki                                0x00169322 TI::Interpreter::privateExecute(TI::Interpreter::ExecutionFlag, TI::RegisterFile*, TI::TiExcState*, TI::TiValue*) (TiCell.h:202)
   1   Anki                                0x0017645a TI::Interpreter::execute(TI::FunctionExecutable*, TI::TiExcState*, TI::TiFunction*, TI::TiObject*, TI::ArgList const&, TI::ScopeChainNode*, TI::TiValue*) (Interpreter.cpp:688)
   2   Anki                                0x00180432 TI::TiFunction::call(TI::TiExcState*, TI::TiValue, TI::ArgList const&) (TiFunction.cpp:127)
   3   Anki                                0x0013b4d0 TI::call(TI::TiExcState*, TI::TiValue, TI::CallType, TI::CallData const&, TI::TiValue, TI::ArgList const&) (CallData.cpp:46)
   4   Anki                                0x0018c12a TiObjectCallAsFunction (TiObjectRef.cpp:417)
   5   Anki                                0x00037e76 -[KrollObject invokeCallbackForKey:withObject:thisObject:] (KrollObject.m:1242)
   6   Anki                                0x00031150 -[ExpandedInvocationOperation main] (KrollContext.mm:1299)
   7   Foundation                          0x378fb39c -[__NSOperationInternal start] + 856
   8   Anki                                0x0002d238 -[KrollContext invoke:] (KrollContext.mm:828)
   9   Anki                                0x0002e568 -[KrollContext main] (KrollContext.mm:1143)
   10  Foundation                          0x378e0a8a -[NSThread main] + 66
   11  Foundation                          0x3797459a __NSThread__main__ + 1042
   12  libsystem_c.dylib                   0x36cffc16 _pthread_start + 314
   13  libsystem_c.dylib                   0x36cffad0 thread_start + 0
   </pre></code></li>
<li>Reggie Seagraves 2011-11-10

   Unfortunately the fix for this issue was actually a fix in JavaScriptCore.  As it requires a new JavaScriptCore, it is not possible for us to merge this fix into the 1_7_X branch.  Upgrading to 1.8 is the only resolution for the issue.</li>
<li>Lee Morris 2017-03-03

   Closing ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-6054.json">JSON Source</a></p>