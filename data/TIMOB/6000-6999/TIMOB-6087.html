---
title: "[TIMOB-6087] Android: Facebook: v8 only: Publish stream, wall post with dialog sometimes crashes "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-11-30T15:33:25.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-48, Release 1.8.0.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>branch-v8</td></tr>
<tr><th>Reporter</th><td>Eric Merriman </td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-11-08T11:36:14.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-19T12:43:15.000+0000</td></tr>
</table>

<h3>Description</h3>

Description:
This test crashes for me reliably on the Galaxy Tab 10.1. On the Nexus S, it crashed once out of 3 times. Console output:

E/TiApplication( 2399): (KrollRuntimeThread) [1362,50228] Sending event: exception on thread: KrollRuntimeThread msg:android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@40a5e5b0 is not valid; is your activity running?; Titanium 1.8.0.1,2011/11/08 10:56,31f6a70
E/TiApplication( 2399): android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@40a5e5b0 is not valid; is your activity running?
E/TiApplication( 2399): 	at android.view.ViewRoot.setView(ViewRoot.java:448)
E/TiApplication( 2399): 	at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:181)
E/TiApplication( 2399): 	at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:95)
E/TiApplication( 2399): 	at android.view.Window$LocalWindowManager.addView(Window.java:526)
E/TiApplication( 2399): 	at android.app.Dialog.show(Dialog.java:269)
E/TiApplication( 2399): 	at com.facebook.android.FbDialog$FbWebViewClient.onPageStarted(FbDialog.java:196)
E/TiApplication( 2399): 	at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:267)
E/TiApplication( 2399): 	at android.os.Handler.dispatchMessage(Handler.java:99)
E/TiApplication( 2399): 	at android.os.Looper.loop(Looper.java:132)
E/TiApplication( 2399): 	at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(Unknown Source)
W/WindowManager(  291): Attempted to add application window with unknown token ActivityRecord{418f1900 com.appcelerator.titanium/org.appcelerator.titanium.TiActivity}.  Aborting.
E/AndroidRuntime( 2399): FATAL EXCEPTION: KrollRuntimeThread
E/AndroidRuntime( 2399): android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@40a5e5b0 is not valid; is your activity running?
E/AndroidRuntime( 2399): 	at android.view.ViewRoot.setView(ViewRoot.java:448)
E/AndroidRuntime( 2399): 	at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:181)
E/AndroidRuntime( 2399): 	at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:95)
E/AndroidRuntime( 2399): 	at android.view.Window$LocalWindowManager.addView(Window.java:526)
E/AndroidRuntime( 2399): 	at android.app.Dialog.show(Dialog.java:269)
E/AndroidRuntime( 2399): 	at com.facebook.android.FbDialog$FbWebViewClient.onPageStarted(FbDialog.java:196)
E/AndroidRuntime( 2399): 	at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:267)
E/AndroidRuntime( 2399): 	at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 2399): 	at android.os.Looper.loop(Looper.java:132)
E/AndroidRuntime( 2399): 	at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(Unknown Source)
W/ActivityManager(  291):   Force finishing activity com.appcelerator.titanium/org.appcelerator.titanium.TiActivity
E/android.os.Debug(  291): Dumpstate > /data/log/dumpstate_app_error

Steps to reproduce:
1) Install KS on device
2) Navigate to Mashups>Facebook>Publish stream
3) Click "Publish wall post with dialog"

Result:
App crashes

Expected:
Dialog with post details displayed



<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-11-29

   Pull request ready
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/782" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/782</a></li>
<li>Natalie Huynh 2011-12-07

   Tested with 1.8.0.1.v20111207090257
   Xoom (3.2.1) - v8
   Samsung Tab 10.1 (3.1) - rhino</li>
</ol>


<p><a href="/TIMOB/TIMOB-6087.json">JSON Source</a></p>