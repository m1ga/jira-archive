---
title: "[TIMOB-6142] Android: Expose createBroadcastIntent in ActivityProxy"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-09-11T06:07:54.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0.1</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 19, 2013 Sprint 19 API, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>exalture, module_android, qe-testadded, tbs-1.9.0</td></tr>
<tr><th>Reporter</th><td>Marshall Culpepper</td></tr>
<tr><th>Assignee</th><td>Sunila</td></tr>
<tr><th>Created</th><td>2011-11-10T10:46:01.000+0000</td></tr>
<tr><th>Updated</th><td>2014-04-21T11:26:36.000+0000</td></tr>
</table>

<h3>Description</h3>

createBroadcastIntent is not callable from Ti.Android, we need to make sure it's exposed and working as intended. We have a community pull request here:
<a href="https://github.com/appcelerator/titanium_mobile/pull/655" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/655</a>

<h4>Test case for sendBroadcast</h4>

Run the following app, press the button therein and then check the log for "Broadcast received".

<code><pre>
  var win = Ti.UI.createWindow();
	
  var br = Ti.Android.createBroadcastReceiver({
	    onReceived: function() {
	        Ti.API.info('Broadcast received.');
	    }
  });

  Ti.Android.registerBroadcastReceiver(br,["com.exalture.test.broadcastreceiver"]);

  var sendBroadcastBtn =    Ti.UI.createButton({top:100,width:300,title:"SendBroadcast"});
	sendBroadcastBtn.addEventListener('click', function()
			{
		            var intent =  Ti.Android.createBroadcastIntent({
	            		 	action: "com.exalture.test.broadcastreceiver"
	        			 });
			 	         Ti.Android.currentActivity.sendBroadcast(intent);
			 
			});
	
  win.add(sendBroadcastBtn);
	
  win.open();
</pre></code>

<h4>Test case for sendBroadcastWithPermission. </h4>

First, you need to both define the permission and "use" it in the manifest section of the "android" section of your tiapp.xml.  So make the tiapp.xml's "android" section look like this:

<code><pre>
<android xmlns:android="<a href="http://schemas.android.com/apk/res/android" rel="nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>">
    <manifest>
        <permission
            android:name="com.exalture.test.withPermission" />
        <uses-permission android:name="com.exalture.test.withPermission"/>
    </manifest>
</android>
</pre></code>

The run the following app, press the button therein and check the log for "Broadcast received with permission":

<code><pre>
  var win = Ti.UI.createWindow();
	
  var brWithPermission = Ti.Android.createBroadcastReceiver({
	    onReceived: function() {
	        Ti.API.info('Broadcast received with permission.');
	    }
	});
	
   Ti.Android.registerBroadcastReceiver(brWithPermission, ["com.exalture.test.broadcastreceiver"]);

   var sendBroadcastBtn = Ti.UI.createButton({top:100,width:300,title:"SendBroadcast"});
	sendBroadcastBtn.addEventListener('click', function()
			{
				 var intentWithPermission =  Ti.Android.createBroadcastIntent({
	             			action: "com.exalture.test.broadcastreceiver"
	         			});
			 	   Ti.Android.currentActivity.sendBroadcastWithPermission(intentWithPermission, "com.exalture.test.withPermission");
			 
			});
	
  win.add(sendBroadcastBtn);
	
  win.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Josh Roesslein 2011-11-10

   Will we need to expose Activity.sendBroadcast to make this useable?</li>
<li>Marshall Culpepper 2011-11-11

   Yeah, maybe others as well</li>
<li>Tommy Leung 2013-01-16

   Any chance of this being implemented? </li>
<li>Sunila 2013-06-24

   Added support for BroadcastIntent
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/4412" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4412</a></li>
<li>Sunila 2013-07-30

   Updated the description with test case</li>
<li>Priya Agarwal 2013-10-23

   Verified the fix with:
   
   Appc-Studio: 3.2.0.201310181700
   Sdk:3.2.0.v20131022171645
   alloy:1.2.2
   npm:1.3.2
   titanium:3.2.0
   titanium-code-processor:1.0.3
   Device:Google Nexus 7(v4.3)
   OS: Mac OSX 10.8
   
   
   Getting logs as per test code for broadcast with and without permission.
   Above test code was used for testing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-6142.json">JSON Source</a></p>