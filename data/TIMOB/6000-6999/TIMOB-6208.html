---
title: "[TIMOB-6208] Open NavigationGroup multiple times crashes the app"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2011-11-22T11:36:24.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-47, Release 1.8.0.1</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Qing Gao</td></tr>
<tr><th>Assignee</th><td>Stephen Tramer</td></tr>
<tr><th>Created</th><td>2011-11-16T17:44:42.000+0000</td></tr>
<tr><th>Updated</th><td>2012-03-30T10:34:37.000+0000</td></tr>
</table>

<h3>Description</h3>

When a navigation group is opened multiple times the app crashed. This only happens on 1.8.0 version. I can not repro it on 1.7.5 version.

<h4>Repro Steps</h4>
Step1. Create a project with the code below and run it on the emulator.
Step2. Click the "open" button then click the "back" button.
Step3. Repeat Step2 couple of times will crash the app.

<code><pre>
function NavGroup(){
	var w = Ti.UI.createWindow();
	var n = Ti.UI.iPhone.createNavigationGroup();
	var win = Ti.UI.createWindow({
		backgroundColor:'#444'
	});
	n.window = win;
	
	var close = Ti.UI.createButton({
		title:'back'
	});
	win.rightNavButton = close;
	
	close.addEventListener('click', function(){
		w.close();
	});

	w.add(n);
	return w;
}

function Window(){
	
	var win = Ti.UI.createWindow({backgrounColor:'green'});
	var btn = Ti.UI.createButton({
		width:100,
		height:40,
		title:'open'
	});
	win.add(btn);
	btn.addEventListener('click', function(){
		NavGroup().open();
	});
	
	return win;
}

Window().open();

</pre></code>

<h4>Associated Helpdesk Ticket</h4>
<a href="http://appc.me/c/APP-628857" rel="nofollow" target="_blank">http://appc.me/c/APP-628857</a>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-6208_24214/NavGroupCrashTest_2011-11-17-131234_qgaombp.crash">NavGroupCrashTest_2011-11-17-131234_qgaombp.crash</td></td><td>2011-11-17T13:20:39.000+0000</td><td>37790</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Reggie Seagraves 2011-11-17

   This ticket should have included a symbolocated crash log.</li>
<li>Qing Gao 2011-11-17

   Attached the crash log.</li>
<li>Stephen Tramer 2011-11-17

   There is a javascript workaround for this. Changing the <code>close</code> event listener:
   
   <code><pre>
   	close.addEventListener('click', function(){
   		n.close();
   		w.close();
   	});
   </pre></code>
   
   Addressing this issue in the SDK may take substantial time and significant changes, which are being avoided at this point due to partial freeze.</li>
<li>Mark Allen 2011-11-18

   the recommended fix does not work in the context of our application. Please refer to ticket APP-628857 for a zip file that contains a sample application the closely emulates the code we use in our application. I modified the code in settings.js from:
   
   		function handleClose(_event) {
   			modal.close();
   		};
   
   
   to:
   
   		function handleClose(_event) {
   			navGroup.close();
   			modal.close();
   		};
   
   but app still crashes. Console in simulator displays the following after getting the message '[DEBUG] Session did end with error (null)'
   
   [FATAL] Orphaned [object TiUIWindow] is trying to forget (null).
   
   [FATAL] Orphaned [object TiUIWindow] is trying to forget [object TiUIWindow].
   
   
   Also, please note there might be duplicate effort on this. Refer to 'APP-687672: Left Nav Button causing app to crash' for similar issue. </li>
<li>Mark Allen 2011-11-18

   refer also to TIMOB-6183 - issue closely mirrors this one. I believe it is the same issue. </li>
<li>Stephen Tramer 2011-11-22

   Unable to reproduce the crash with either the sample code from this ticket or the sample code provided on the helpdesk, with SDK 1.8.0.1.3e67d33. Tested on iOS simulator 4.3/5.0 and iPod 3GT iOS 5.0.
   
   Note that the warning (Orphaned X trying to forget Y) is still logged, but that's acceptable. There's no way around that until we restructure how navgroup works.</li>
<li>Michael Pettiford 2012-03-30

   Closing issue
   
   Tested with Ti Studio build 2.0.0.201203291340
   Ti Mobile SDK 2.0.0.v20120329191102 hash r1fbf18c4
   OSX Lion 10.7.3
   iPhone 4S OS 5.0.1
   
   Cannot reproduce issue</li>
</ol>


<p><a href="/TIMOB/TIMOB-6208.json">JSON Source</a></p>