---
title: "[TIMOB-6247] Android UI/ UI drillbit tests fail when on tablet when screen is off"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-12-07T02:17:37.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-49, Release 1.8.0.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>branch-v8</td></tr>
<tr><th>Reporter</th><td>Allen Yeung</td></tr>
<tr><th>Assignee</th><td>Ping Wang</td></tr>
<tr><th>Created</th><td>2011-11-21T00:13:55.000+0000</td></tr>
<tr><th>Updated</th><td>2011-12-19T11:28:40.000+0000</td></tr>
</table>

<h3>Description</h3>

UI / Android UI drillbit tests are failing in Rhino when the screen is off.  The following error shows up:

<code><pre>
E/TiApplication(20896): (main) [2166,4798] Sending event: exception on thread: main msg:java.lang.NullPointerException; Titanium 1.8.0.1,2011/11/20 22:58,673fe51
E/TiApplication(20896): java.lang.NullPointerException
E/TiApplication(20896):   at android.view.ViewConfiguration.get(ViewConfiguration.java:262)
E/TiApplication(20896):   at android.view.View.&lt;init&gt;(View.java:2380)
E/TiApplication(20896):   at android.view.View.&lt;init&gt;(View.java:2423)
E/TiApplication(20896):   at android.widget.TextView.&lt;init&gt;(TextView.java:474)
E/TiApplication(20896):   at android.widget.TextView.&lt;init&gt;(TextView.java:467)
E/TiApplication(20896):   at android.widget.TextView.&lt;init&gt;(TextView.java:462)
E/TiApplication(20896):   at ti.modules.titanium.ui.widget.TiUILabel.&lt;init&gt;(TiUILabel.java:39)
E/TiApplication(20896):   at ti.modules.titanium.ui.widget.tableview.TiTableViewRowProxyItem.refreshOldStyleRow(TiTableViewRowProxyItem.java:181)
E/TiApplication(20896):   at ti.modules.titanium.ui.widget.tableview.TiTableViewRowProxyItem.setRowData(TiTableViewRowProxyItem.java:282)
E/TiApplication(20896):   at ti.modules.titanium.ui.widget.tableview.TiTableViewRowProxyItem.setRowData(TiTableViewRowProxyItem.java:84)
E/TiApplication(20896):   at ti.modules.titanium.ui.widget.tableview.TiTableView$TTVListAdapter.getView(TiTableView.java:210)
E/TiApplication(20896):   at android.widget.AbsListView.obtainView(AbsListView.java:2146)
E/TiApplication(20896):   at android.widget.ListView.makeAndAddView(ListView.java:1791)
E/TiApplication(20896):   at android.widget.ListView.fillDown(ListView.java:689)
E/TiApplication(20896):   at android.widget.ListView.fillSpecific(ListView.java:1347)
E/TiApplication(20896):   at android.widget.ListView.layoutChildren(ListView.java:1620)
E/TiApplication(20896):   at android.widget.AbsListView.onLayout(AbsListView.java:1976)
E/TiApplication(20896):   at android.view.View.layout(View.java:9593)
E/TiApplication(20896):   at android.view.ViewGroup.layout(ViewGroup.java:3877)
E/TiApplication(20896):   at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
E/TiApplication(20896):   at android.view.View.layout(View.java:9593)
E/TiApplication(20896):   at android.view.ViewGroup.layout(ViewGroup.java:3877)
E/TiApplication(20896):   at org.appcelerator.titanium.view.TiCompositeLayout.onLayout(TiCompositeLayout.java:390)
E/TiApplication(20896):   at android.view.View.layout(View.java:9593)
E/TiApplication(20896):   at android.view.ViewGroup.layout(ViewGroup.java:3877)
E/TiApplication(20896):   at org.appcelerator.titanium.view.TiCompositeLayout.onLayout(TiCompositeLayout.java:390)
E/TiApplication(20896):   at android.view.View.layout(View.java:9593)
</pre></code>

<h3>Comments</h3>

<ol>
<li>Ping Wang 2011-12-05

   The two UI tests, appendRowWithHeader_as_async and appendRowAsArray, crash on both rhino and v8 when screen is off. The error stack is:
   <code><pre>
   
   E/TiApplication(31369): (KrollRuntimeThread) [628,6778] no valid current activity found for application instance
   E/TiApplication(31369): (KrollRuntimeThread) [5,6783] no valid current activity found for application instance
   E/TiApplication(31369): (KrollRuntimeThread) [2,6785] no valid current activity found for application instance
   E/TiApplication(31369): (KrollRuntimeThread) [57,6842] no valid current activity found for application instance
   E/TiApplication(31369): (KrollRuntimeThread) [12,6854] no valid current activity found for application instance
   D/dalvikvm(31369): GC_EXTERNAL_ALLOC freed 192K, 45% free 3675K/6663K, external 0K/0K, paused 29ms
   E/TiApplication(31369): (KrollRuntimeThread) [1044,7898] no valid current activity found for application instance
   D/AndroidRuntime(31369): Shutting down VM
   W/dalvikvm(31369): threadid=1: thread exiting with uncaught exception (group=0x4001d648)
   E/TiApplication(31369): (main) [177,8075] Sending event: exception on thread: main msg:java.lang.NullPointerException; Titanium 1.8.0.1,2011/12/05 14:23,8f6f25b
   E/TiApplication(31369): java.lang.NullPointerException
   E/TiApplication(31369): 	at android.view.ViewConfiguration.get(ViewConfiguration.java:230)
   E/TiApplication(31369): 	at android.view.View.&lt;init&gt;(View.java:1919)
   E/TiApplication(31369): 	at android.view.View.&lt;init&gt;(View.java:1968)
   E/TiApplication(31369): 	at android.widget.TextView.&lt;init&gt;(TextView.java:392)
   E/TiApplication(31369): 	at android.widget.TextView.&lt;init&gt;(TextView.java:385)
   E/TiApplication(31369): 	at android.widget.TextView.&lt;init&gt;(TextView.java:380)
   E/TiApplication(31369): 	at ti.modules.titanium.ui.widget.TiUILabel.&lt;init&gt;(TiUILabel.java:39)
   E/TiApplication(31369): 	at ti.modules.titanium.ui.widget.tableview.TiTableViewRowProxyItem.refreshOldStyleRow(TiTableViewRowProxyItem.java:181)
   E/TiApplication(31369): 	at ti.modules.titanium.ui.widget.tableview.TiTableViewRowProxyItem.setRowData(TiTableViewRowProxyItem.java:282)
   E/TiApplication(31369): 	at ti.modules.titanium.ui.widget.tableview.TiTableViewRowProxyItem.setRowData(TiTableViewRowProxyItem.java:84)
   E/TiApplication(31369): 	at ti.modules.titanium.ui.widget.tableview.TiTableView$TTVListAdapter.getView(TiTableView.java:210)
   E/TiApplication(31369): 	at android.widget.AbsListView.obtainView(AbsListView.java:1449)
   E/TiApplication(31369): 	at android.widget.ListView.makeAndAddView(ListView.java:1793)
   E/TiApplication(31369): 	at android.widget.ListView.fillDown(ListView.java:670)
   E/TiApplication(31369): 	at android.widget.ListView.fillSpecific(ListView.java:1350)
   E/TiApplication(31369): 	at android.widget.ListView.layoutChildren(ListView.java:1624)
   E/TiApplication(31369): 	at android.widget.AbsListView.onLayout(AbsListView.java:1279)
   E/TiApplication(31369): 	at android.view.View.layout(View.java:7292)
   E/TiApplication(31369): 	at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
   E/TiApplication(31369): 	at android.view.View.layout(View.java:7292)
   E/TiApplication(31369): 	at org.appcelerator.titanium.view.TiCompositeLayout.onLayout(TiCompositeLayout.java:390)
   E/TiApplication(31369): 	at android.view.View.layout(View.java:7292)
   E/TiApplication(31369): 	at org.appcelerator.titanium.view.TiCompositeLayout.onLayout(TiCompositeLayout.java:390)
   E/TiApplication(31369): 	at android.view.View.layout(View.java:7292)
   E/TiApplication(31369): 	at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
   E/TiApplication(31369): 	at android.view.View.layout(View.java:7292)
   E/TiApplication(31369): 	at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
   E/TiApplication(31369): 	at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
   E/TiApplication(31369): 	at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
   E/TiApplication(31369): 	at android.view.View.layout(View.java:7292)
   E/TiApplication(31369): 	at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
   E/TiApplication(31369): 	at android.view.View.layout(View.java:7292)
   E/TiApplication(31369): 	at android.view.ViewRoot.performTraversals(ViewRoot.java:1205)
   E/TiApplication(31369): 	at android.view.ViewRoot.handleMessage(ViewRoot.java:1961)
   E/TiApplication(31369): 	at android.os.Handler.dispatchMessage(Handler.java:99)
   E/TiApplication(31369): 	at android.os.Looper.loop(Looper.java:150)
   E/TiApplication(31369): 	at android.app.ActivityThread.main(ActivityThread.java:4293)
   E/TiApplication(31369): 	at java.lang.reflect.Method.invokeNative(Native Method)
   E/TiApplication(31369): 	at java.lang.reflect.Method.invoke(Method.java:507)
   E/TiApplication(31369): 	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
   E/TiApplication(31369): 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
   E/TiApplication(31369): 	at dalvik.system.NativeStart.main(Native Method)
   </pre></code></li>
<li>Natalie Huynh 2011-12-07

   Tested with version=1.8.0.1
   timestamp=12/07/11 13:33
   githash=7954783 v8/rhino
   Samsung Galaxy Tab 10.1 (3.1)</li>
</ol>


<p><a href="/TIMOB/TIMOB-6247.json">JSON Source</a></p>