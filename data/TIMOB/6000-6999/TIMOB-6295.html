---
title: "[TIMOB-6295] Android: ImageView with image property set to an http source can cause NPE if removed from parent while still downloading content"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-01-05T13:50:27.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-47, Release 1.8.0.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>branch-v8, module_imageview, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Bill Dawson</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2011-11-23T12:53:45.000+0000</td></tr>
<tr><th>Updated</th><td>2012-11-02T19:04:50.000+0000</td></tr>
</table>

<h3>Description</h3>

<a href="http://pastie.org/pastes/2909794/text" rel="nofollow" target="_blank">http://pastie.org/pastes/2909794/text</a>

<h4>Fail case / Test case</h4>

* Run the app.js below as your application.

* After the "good" image loads, click the "test" button.

* In the fail case, the app will crash.  *Expected behavior*: ImageView disappears (because we're calling <code>win.remove(imageView)</code> and the app will not crash.

<h4>app.js</h4>

<code><pre>
var win = Titanium.UI.createWindow({  
    title:'Test',
    backgroundColor:'#000',
	exitOnClose: true
});
var btnAdd, imageView
win.add(btnAdd = Ti.UI.createButton({
	title: "Test",
	left: "10dp", width: "150dp", bottom: "5dp", height: "40dp"
}));
win.add(imageView = Ti.UI.createImageView({
	image: "<a href="http://www.appcelerator.com/wp-content/themes/appcelerator/img/werehiring_sticker.png" rel="nofollow" target="_blank">http://www.appcelerator.com/wp-content/themes/appcelerator/img/werehiring_sticker.png</a>",
	width: "86dp", height: "84dp"
}));
btnAdd.addEventListener("click", function() {
	imageView.image = "<a href="http://www.google.com" rel="nofollow" target="_blank">http://www.google.com</a>";
	win.remove(imageView);
});
win.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2011-11-23

   Pull request ready 
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/766" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/766</a></li>
<li>Dustin Hyde 2011-12-06

   Bug fixed. Verified on:
   SDK: 1.8.0.1.v20111205164258
   Runtimes: Android V8/Rhino
   Studio: 1.0.7.201112052104
   OS: OS X Lion
   Devices Tested: Nexus One 2.2.2, Droid3 2.3.4, G Slate 3.1, Emulator 4.0</li>
<li>Dustin Hyde 2012-01-05

   Added label qe-testadded.</li>
</ol>


<p><a href="/TIMOB/TIMOB-6295.json">JSON Source</a></p>