---
title: "[TIMOB-6426] MobileWeb: Add support for non-http protocols to Ti.Platform.openURL() and Ti.Platform.canOpenURL()"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-12-13T16:13:45.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-50, Release 1.8.0.1, Release 2.0.0</td></tr>
<tr><th>Components</th><td>MobileWeb</td></tr>
<tr><th>Labels</th><td>stage</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Anthony Decena</td></tr>
<tr><th>Created</th><td>2011-12-01T16:05:05.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-03T23:16:55.000+0000</td></tr>
</table>

<h3>Description</h3>

Ti.Platform.canOpenURL() just returns true for any and all urls.  Ti.Platform.openURL() performs an window.open() for all URLs.

For canOpenURL(), say true if url does NOT contain a ":" or it does contain a ":" but is http or https, otherwise false.  It would also be nice to have checks for if running in a simulator, then blacklist known unsupported protocols. For example, iPhone simulator doesn't support mailto, tel, sms, itms, itms-apps.

For openURL(), simply do something like:

    canOpenURL(url) ? window.open(url) : window.location = url;

Problem with window.location is we may accidentally redirect the browser to a malformed mailto: or something. Perhaps we need to create a dummy iframe and target it by name with window.open()?

Note: this needs to be tested on all browsers including devices (ios & android) and simulators.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-6426_24501/platform_app.js">platform_app.js</td></td><td>2011-12-07T08:17:27.000+0000</td><td>2533</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Anthony Decena 2011-12-01

   The test for the ':' in the canOpenURL() function would fail on a url with no protocol but with a port, ie: someplace.com:8080 which would not be uncommon in a mobile web app.
   I'll try and come up with something that covers as much as possible while still remaining rather simple.</li>
<li>Chris Barber 2011-12-01

   Also need to support :// which means use the current protocol.</li>
<li>Chris Barber 2011-12-01

   I did some research and if you detect a URL that can be opened by local process (i.e. iTunes, mail, or something), it says to do it in a setTimeout:
   
   <code><pre>
   setTimeout(function () {
       window.location.href = url;
   }, 1);
   </pre></code>
   
   This is probably to allow the UI to refresh, perhaps in the event of a mouse up event on a button.
   
   You may want to checkout <a href="http://r.mzstatic.com/htmlResources/880B/web-storefront-base.jsz" rel="nofollow" target="_blank">http://r.mzstatic.com/htmlResources/880B/web-storefront-base.jsz</a> and <a href="http://r.mzstatic.com/htmlResources/880B/web-storefront-preview.jsz." rel="nofollow" target="_blank">http://r.mzstatic.com/htmlResources/880B/web-storefront-preview.jsz.</a></li>
<li>Anthony Decena 2011-12-02

   I added a uri parser for the canOpenURL() method. I also fixed the issue where urls were getting incorrectly assigned to open in the current window. Commit is here: 
   <a href="https://github.com/Mindelusions/titanium_mobile/commit/43764ed6634728de6960da5e7d903867eb0cf2d6" rel="nofollow" target="_blank">https://github.com/Mindelusions/titanium_mobile/commit/43764ed6634728de6960da5e7d903867eb0cf2d6</a>
   Test page is here: <a href="http://mindelusions.com/boneyard/ti_mobileweb/platform_url_test.html" rel="nofollow" target="_blank">http://mindelusions.com/boneyard/ti_mobileweb/platform_url_test.html</a>
   </li>
<li>Lee Morris 2017-03-03

   Closing ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-6426.json">JSON Source</a></p>