---
title: "[TIMOB-6446] Android: Titanium.Network.HTTPClient.send - V8/Rhino - Android 2.x - send() loads text instead of image"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-09-27T20:39:26.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.6.2, Release 1.7.2, Release 1.7.3, Release 1.7.5, Release 1.8.0.1, Release 2.1.2, Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.0.0, Sprint 2012-20 API, 2012 Sprint 20</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>api, qe-and082012</td></tr>
<tr><th>Reporter</th><td>Dustin Hyde</td></tr>
<tr><th>Assignee</th><td>Ping Wang</td></tr>
<tr><th>Created</th><td>2011-12-02T18:10:53.000+0000</td></tr>
<tr><th>Updated</th><td>2012-12-05T22:28:36.000+0000</td></tr>
</table>

<h3>Description</h3>

Titanium.Network.HTTPClient.send loads text instead of image (log and screenshot attached).
Bug specific to Android 2.x. 
Behavior not found in iOS or Android 3.x.

Steps to Reproduce:

1. Run KitchenSink (or KitchenSink-Nook if using the NookColor to have a valid test configuration).
2. Go to Platform > XHR > File Download.
3. Click "Set Web View (Data)".

Expected Result:

Image should display.

Actual Result:

Text displays (screenshot attached). Errors log (attached).

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-6446_24453/device-2011-12-02-175321.png">device-2011-12-02-175321.png</td></td><td>2011-12-02T18:10:53.000+0000</td><td>124734</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-6446_24452/log.txt">log.txt</td></td><td>2011-12-02T18:10:53.000+0000</td><td>4019</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Evgenii Tcarev 2012-08-22

   Occurs on:
   Titanium Studio, build: 2.1.2.201208201549
   SDK version: 2.1.2.v20120821160113
   Devices:
   Motorola Droid (2.2.3)
   </li>
<li>Karl Rowley 2012-09-12

   There's a URL in this code that is no longer valid:
   
   GET','<a href="http://www.appcelerator.com/wp-content/themes/appcelerator/img/a-logo.png" rel="nofollow" target="_blank">http://www.appcelerator.com/wp-content/themes/appcelerator/img/a-logo.png</a>
   
   In this case, the HTTP server returns a web page that includes some "404" text.
   
   If I replace the invalid URL with a valid one here, it works as expected:
   
   
   ttp://codedog.net/wp-content/uploads/2011/09/appcelerator.png
   
   This is the same issue as for other tickets with invalid URL's.
   
   </li>
<li>Ping Wang 2012-09-18

   On Android, webview.setData(TiBlob data) only works for html-string. It does not work for binary data, eg. image. This is a native Android behavior. In the Android [doc](<a href="http://developer.android.com/reference/android/webkit/WebView.html#loadData(java.lang.String" rel="nofollow" target="_blank">http://developer.android.com/reference/android/webkit/WebView.html#loadData(java.lang.String</a>, java.lang.String, java.lang.String)), it points out:
   {quote}
   The 'data' scheme URL formed by this method uses the default US-ASCII charset. If you need need to set a different charset, you should form a 'data' scheme URL which explicitly specifies a charset parameter in the mediatype portion of the URL and call loadUrl(String) instead. 
   {quote}
   And there are several related discussion:
   <a href="http://code.google.com/p/android/issues/detail?id=596" rel="nofollow" target="_blank">http://code.google.com/p/android/issues/detail?id=596</a>
   <a href="http://stackoverflow.com/questions/5267124/how-to-display-image-with-webview-loaddata" rel="nofollow" target="_blank">http://stackoverflow.com/questions/5267124/how-to-display-image-with-webview-loaddata</a>
   
   Will modify the KS test. PR <a href="https://github.com/appcelerator-developer-relations/KitchenSink/pull/34" rel="nofollow" target="_blank">https://github.com/appcelerator-developer-relations/KitchenSink/pull/34</a></li>
<li>Tamila Smolich 2012-12-05

   Closing as fixed. Tested on: 
   Titanium Studio, build: 3.0.0.201211301903
   Titanium SDK, build: 3.0.0.v20121204181658
   Devices: HTC Nexus One (2.2.2)</li>
</ol>


<p><a href="/TIMOB/TIMOB-6446.json">JSON Source</a></p>