---
title: "[TIMOB-6451] Android: Drillbit: Unable to run any test suites, error in harness (app.js:45)."
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-12-03T22:45:02.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-48, Release 1.8.0.1</td></tr>
<tr><th>Components</th><td>Drillbit</td></tr>
<tr><th>Labels</th><td>branch-v8</td></tr>
<tr><th>Reporter</th><td>Josh Roesslein</td></tr>
<tr><th>Assignee</th><td>Josh Roesslein</td></tr>
<tr><th>Created</th><td>2011-12-03T16:50:45.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-06T19:01:53.000+0000</td></tr>
</table>

<h3>Description</h3>

Drillbit fails to run any tests. Get the follow error w/ Rhino (also occurs w/ v8):

{quote}
E/ScriptsModule(22261): org.mozilla.javascript.EcmaError: TypeError: Cannot find function addEventListener in object [object Object]. (Resources/app.js#45)
E/ScriptsModule(22261): 	at org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3784)
E/ScriptsModule(22261): 	at org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3762)
E/ScriptsModule(22261): 	at org.mozilla.javascript.ScriptRuntime.typeError(ScriptRuntime.java:3790)
E/ScriptsModule(22261): 	at org.mozilla.javascript.ScriptRuntime.typeError2(ScriptRuntime.java:3809)
E/ScriptsModule(22261): 	at org.mozilla.javascript.ScriptRuntime.notFunctionError(ScriptRuntime.java:3880)
E/ScriptsModule(22261): 	at org.mozilla.javascript.ScriptRuntime.getPropFunctionAndThisHelper(ScriptRuntime.java:2359)
E/ScriptsModule(22261): 	at org.mozilla.javascript.ScriptRuntime.getPropFunctionAndThis(ScriptRuntime.java:2326)
E/ScriptsModule(22261): 	at org.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:1514)
E/ScriptsModule(22261): 	at script(Resources/app.js:45)
...
{quote}

<h3>Comments</h3>

<ol>
<li>Josh Roesslein 2011-12-03

   This regression in Drillbit occurred after TIMOB-6090 was merged.
   Window.activity not longer references an ActivityProxy before open.
   It is only when a HW is opened that this becomes a true ActivityProxy.
   </li>
<li>Josh Roesslein 2011-12-03

   Drillbit uses window.activity to get a reference to the root activity to
   listen for "instrumentationReady" event. Changing this to use Ti.Android.currentActivity instead appears to fix the issue.</li>
<li>Lee Morris 2017-03-06

   Closing ticket due to time passed.</li>
</ol>


<p><a href="/TIMOB/TIMOB-6451.json">JSON Source</a></p>