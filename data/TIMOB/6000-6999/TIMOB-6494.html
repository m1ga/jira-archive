---
title: "[TIMOB-6494] Android: Implement activity stack behavior to address currentActivity being null"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-12-07T02:17:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-49, Release 1.8.0.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>branch-v8, verified-1.8.0.1</td></tr>
<tr><th>Reporter</th><td>Opie Cyrus</td></tr>
<tr><th>Assignee</th><td>Opie Cyrus</td></tr>
<tr><th>Created</th><td>2011-12-06T18:00:51.000+0000</td></tr>
<tr><th>Updated</th><td>2011-12-19T16:07:36.000+0000</td></tr>
</table>

<h3>Description</h3>

When the device screen goes black, TiApplication.getCurrentActivity is set to null which causes a problem if proxies are created in this state since their activity reference will be null.  The larger fix for this is to implement an activity stack representing the Titanium activities on the stack.

<h3>Comments</h3>

<ol>
<li>Dustin Hyde 2011-12-19

   Requested test case.</li>
<li>Marshall Culpepper 2011-12-19

   IIRC this fix affected several others but they aren't linked here, let me try and find which ones</li>
<li>Marshall Culpepper 2011-12-19

   See the failure in TIMOB-6247: A run of the drillbit "ui" test on a phone or tablet with the screen off used to fail, but now it passes w/ this fix</li>
<li>Michael Pettiford 2011-12-19

   Tested with Ti Mob SDK 1.8.0.1.RC3 with tests steps on TIMOB-6247 on Galaxy Tab 10.1
   
   Verified that when the device screen is off, test still passes</li>
</ol>


<p><a href="/TIMOB/TIMOB-6494.json">JSON Source</a></p>