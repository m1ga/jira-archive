---
title: "[TIMOB-6534] Android: Rhino: Drillbit test for XML fails"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-02-14T23:29:03.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-03, Release 2.0.0, Release 1.8.2</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Opie Cyrus</td></tr>
<tr><th>Assignee</th><td>Ping Wang</td></tr>
<tr><th>Created</th><td>2011-12-09T11:12:37.000+0000</td></tr>
<tr><th>Updated</th><td>2012-02-14T23:29:03.000+0000</td></tr>
</table>

<h3>Description</h3>

Running the XML drillbit test under Rhino will result in a failure for the last two tests.  Results from a recent update for the XML element tests.

NOTE:  remove the !android checks put in with TIMOB-6627

<h3>Comments</h3>

<ol>
<li>Ping Wang 2011-12-09

   There are two failures in xml.js.
   1) line 1284. It throws DOMException with error code INUSE_ATTRIBUTE_ERR which is raised if newAttr is already an attribute of another Element object. The DOM user must explicitly clone Attr nodes to re-use them in other elements.
   It should not throw exception because this test is replacing an attribute node by itself and it should has no effect based on the doc <a href="http://developer.android.com/reference/org/w3c/dom/Element.html#setAttributeNode(org.w3c.dom.Attr)." rel="nofollow" target="_blank">http://developer.android.com/reference/org/w3c/dom/Element.html#setAttributeNode(org.w3c.dom.Attr).</a>
   2) line 1372. It throws the same exception as above. Based on the JS code, throwing the exception is expected. But the odd thing is in this test, it uses setAttributeNodeNS and setAttributeNode for the same attribute node.</li>
<li>Marshall Culpepper 2011-12-13

   We need a test "if (!android)" only for 1_8_X to verify we're running the rest of the XML drillbit tests. Do not resolve for 1_8_x merge</li>
<li>Natalie Huynh 2012-02-06

   Failed: Tested XML with drillbit using:
   version=1.9.0
   module_apiversion=2
   timestamp=01/23/12 15:04
   githash=72b3e82
   fails to run</li>
<li>Ping Wang 2012-02-07

   XML test passes using latest master on HTC 2.3.4 phone.</li>
<li>Natalie Huynh 2012-02-08

   Retested with version=1.9.0
   module_apiversion=2
   timestamp=01/23/12 15:04
   githash=72b3e82 with rhino and emulator 2.2 all test passed</li>
</ol>


<p><a href="/TIMOB/TIMOB-6534.json">JSON Source</a></p>