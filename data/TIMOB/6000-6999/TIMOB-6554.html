---
title: "[TIMOB-6554] Android: Module: "'V8Util' has not been declared" error when building modules"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2011-12-12T09:51:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2011-50, Release 1.8.0.1, Release 2.0.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>branch-v8</td></tr>
<tr><th>Reporter</th><td>Jeff English</td></tr>
<tr><th>Assignee</th><td>Marshall Culpepper</td></tr>
<tr><th>Created</th><td>2011-12-09T17:59:20.000+0000</td></tr>
<tr><th>Updated</th><td>2011-12-19T12:49:35.000+0000</td></tr>
</table>

<h3>Description</h3>

When building several of the 2.0 versions of the modules, receiving an error of "error: 'V8Util' has not been declared" during the ndk.build step.

Occurs on the imagefactory and styledlabel modules (as well as a couple of others).

The build output for the imagefactory module is as follows:

<code><pre>
JEnglish-MBP:imagefactory jenglish$ ant
Buildfile: /Users/jenglish/titanium_mobile_modules/android/imagefactory/build.xml

init:
    [mkdir] Created dir: /Users/jenglish/titanium_mobile_modules/android/imagefactory/build/classes
    [mkdir] Created dir: /Users/jenglish/titanium_mobile_modules/android/imagefactory/dist

process.annotations:
    [mkdir] Created dir: /Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated/json
    [javac] Compiling 2 source files to /Users/jenglish/titanium_mobile_modules/android/imagefactory/build/classes
    [javac] Note: [KrollBindingGen] Running Kroll binding generator.
    [javac] Note: [KrollBindingGen] No binding data found, creating new data file: org.appcelerator.titanium.bindings/imagefactory.json
    [javac] Note: [KrollBindingGen] Found binding for module ImageFactory
    [javac] Note: [KrollBindingGen] Generating JSON: /Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated/json/org/appcelerator/titanium/bindings/imagefactory.json
    [javac] warning: The following options were not recognized by any processor: '[kroll.checkTiContext]'

generate.rhino.bindings:
     [java] Generating /Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated/java/ti/imagefactory/ImageFactoryModulePrototype.java
     [java] Generating /Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated/java/imagefactoryGeneratedBindings.java

generate.rhino.idswitch:
     [echo] Generating IDs for /Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated/java/imagefactoryGeneratedBindings.java
     [echo] Generating IDs for /Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated/java/ti/imagefactory/ImageFactoryModulePrototype.java

generate.v8.bindings:
     [java] Generating /Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated/jni/ti.imagefactory.ImageFactoryModule.h
     [java] Generating /Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated/jni/ti.imagefactory.ImageFactoryModule.cpp

generate.bindings:

pre.compile:

ndk.build:
     [copy] Copying 1 file to /Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated
     [copy] Copying 1 file to /Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated/jni
     [exec] Compile++ thumb  : ti.imagefactory <= ti.imagefactory.ImageFactoryModule.cpp
     [exec] jni/Android.mk:24: warning: overriding commands for target <code>/Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated/KrollGeneratedBindings.cpp'
     [exec] jni/Android.mk:24: warning: ignoring old commands for target </code>/Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated/KrollGeneratedBindings.cpp'
     [exec] jni/Android.mk:27: warning: overriding commands for target <code>/Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated/BootstrapJS.cpp'
     [exec] jni/Android.mk:27: warning: ignoring old commands for target </code>/Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated/BootstrapJS.cpp'
     [exec] jni/ti.imagefactory.ImageFactoryModule.cpp: In static member function 'static v8::Handle<v8::Value> ti::imagefactory::ImageFactoryModule::compress(const v8::Arguments&)':
     [exec] jni/ti.imagefactory.ImageFactoryModule.cpp:172: error: 'V8Util' has not been declared
     [exec] jni/ti.imagefactory.ImageFactoryModule.cpp: In static member function 'static v8::Handle<v8::Value> ti::imagefactory::ImageFactoryModule::compressToFile(const v8::Arguments&)':
     [exec] jni/ti.imagefactory.ImageFactoryModule.cpp:421: error: 'V8Util' has not been declared
     [exec] make: *** [/Users/jenglish/titanium_mobile_modules/android/imagefactory/build/generated/obj/local/armeabi/objs/ti.imagefactory/ti.imagefactory.ImageFactoryModule.o] Error 1

BUILD FAILED
/Library/Application Support/Titanium/mobilesdk/osx/1.8.0.1/module/android/build.xml:226: exec returned: 2

</pre></code>

<h3>Comments</h3>

<ol>
<li>Natalie Huynh 2011-12-19

   Contacted Jeff English, he will verify this fix.</li>
<li>Jeff English 2011-12-19

   Verified to build correctly in both 1.8.0.1.RC3 and 1.9.0</li>
<li>Natalie Huynh 2011-12-19

   Verified fix by Jeff English, occurred with imagefactory and styledlabel</li>
</ol>


<p><a href="/TIMOB/TIMOB-6554.json">JSON Source</a></p>