---
title: "[TIMOB-6853] iOS: xml attributes broken in 1.8.0.1"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2012-02-14T23:43:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Assignee</th><td>Stephen Tramer</td></tr>
<tr><th>Created</th><td>2011-12-22T15:02:05.000+0000</td></tr>
<tr><th>Updated</th><td>2012-02-14T23:43:40.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>PROBLEM DESCRIPTION</h4>
Code that was working up to recent CI build is now failing when querying xml attributes from an xml node.

<h4>STEPS TO REPRODUCE</h4>
1. Create new mobile project
2. Paste below code into the app.js
3. Run

<h4>ACTUAL RESULTS</h4>
[INFO] Attributes: null

<h4>EXPECTED RESULTS</h4>
 [INFO] Attributes: [object TiDOMNamedNodeMap] [INFO] Value: appcelerator 

<h4>CODE</h4>
<code><pre>
var str = "<test name='appcelerator'/>";
var xml = Ti.XML.parseString(str); 
Ti.API.info("Attributes: "+xml.attributes); 
if (xml.attributes && (xml.attributes.length > 0)) { 
       Ti.API.info(" Value: "+xml.attributes.item(0).nodeValue); 
} 
win = Ti.UI.createWindow();
win.open(); 
</pre></code>

<h4>WORKAROUND</h4>
A workaround was provided, and rejected from the customer. 

<code><pre>
var str = "<test name='appcelerator'/>" 
var xml = Ti.XML.parseString(str); 
var node = xml.documentElement;
//Ti.API.info("Attributes: "+xml.attributes); 
if (node.attributes && (node.attributes.length > 0)) { 
   Ti.API.info(" Value: "+node.attributes.item(0).nodeValue); 
};

win = Ti.UI.createWindow();
win.open(); 
</pre></code>

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2011-12-29

   This change is to conform to the DOM LEVEL 2 spec. See the description of "Attr":
   
   <a href="http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-637646024" rel="nofollow" target="_blank">http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-637646024</a>
   
   And the IDL definition for "Document":
   
   <a href="http://www.w3.org/TR/DOM-Level-2-Core/core.html#i-Document" rel="nofollow" target="_blank">http://www.w3.org/TR/DOM-Level-2-Core/core.html#i-Document</a>
   
   In particular:
   
   * A Document is not an Element
   * Document provides the <code>documentElement</code> accessor for the element representing the root node of the document (the document object's first child)
   
   In the event that it was expected that you could directly access Element information off of a Document, this would require that we implement all Element methods on a Document (to conform to expected behavior, being able to retrieve Attr nodes off an object implies it is an Element, and that it should be interacted with as one). This violates the IDL specification by re-typing Document as a subtype of Element.
   
   The "workaround" is actually the correct way to interact with an XML tree.</li>
<li>Stephen Tramer 2011-12-29

   Additionally, see the behavior definition for <code>Node.attributes</code> in this section of the spec:
   
   <a href="http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1950641247" rel="nofollow" target="_blank">http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1950641247</a>
   
   The property is defined, but MUST (according to spec) return <code>null</code> for non-Element nodes.</li>
<li>Thomas Huelbert 2012-01-23

   Closing based on Stevens comments</li>
</ol>


<p><a href="/TIMOB/TIMOB-6853.json">JSON Source</a></p>