---
title: "[TIMOB-6908] Android: png image file transparency problem"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2017-04-21T01:30:16.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.7.2</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Rune Lund-Hermansen</td></tr>
<tr><th>Assignee</th><td>Ingo Muschenetz</td></tr>
<tr><th>Created</th><td>2011-10-24T12:50:25.000+0000</td></tr>
<tr><th>Updated</th><td>2017-04-21T01:30:16.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>

On Android, PNGs containing transparency/semi-transparency (such as shadows and glow) look very bad compared to both the iPhone version and the Photoshop reference mockup (see attached screenshots).

The PNGs are normal 32bit (RGBA) straight from Photoshop and looks fine in iPhone simulator. On Android both the emulator and device (HTC Legend) are affected. 

<h4>Test case</h4>

The test is made up of a Window with a background PNG, and two child views with unscaled background PNG's with both solid and semi-transparent content.

Assets are attached

<code><pre>
var win = Ti.UI.createWindow({
    backgroundImage:'bg.png',
});
 
var shadow = Ti.UI.createView({
    backgroundImage:'shadow.png',
    width:'179dp',
    height:'179dp',
    top:'25dp',
});
 
var glow = Ti.UI.createView({
    backgroundImage:'glow.png',
    width:'189dp',
    height:'189dp',
    bottom:'15dp',
});
 
win.add(shadow);
win.add(glow);
win.open();
</pre></code>

<h4>Discussions</h4>

Q&A: [severe android png rendering bug](<a href="http://developer.appcelerator.com/question/127038/severe-android-png-rendering-bug)" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/127038/severe-android-png-rendering-bug)</a>



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-6908_23846/png_assets.zip">png_assets.zip</td></td><td>2011-10-24T12:50:25.000+0000</td><td>25919</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-6908_23845/TI_android_PNG_Bug.jpg">TI_android_PNG_Bug.jpg</td></td><td>2011-10-24T12:50:25.000+0000</td><td>289754</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Max Stepanov 2012-12-11

   <a href="http://www.curious-creature.org/2010/12/08/bitmap-quality-banding-and-dithering/" rel="nofollow" target="_blank">http://www.curious-creature.org/2010/12/08/bitmap-quality-banding-and-dithering/</a>
   {quote}
   Simple performance test shows very clearly that using a compatible format (32 bits bitmap on a 32 bits window or 16 bits/565 bitmap on a 16 bits window) is the most efficient way to draw bitmaps. For this reason, you should always check the format of your bitmaps and windows and try to make them compatible with each other.
   {quote}
   
   This code in onCreate() may work:
   <code><pre>
   // set 32 bit window (draw correctly transparent images)
   getWindow().getAttributes().format = android.graphics.PixelFormat.RGBA_8888;
   </pre></code>
   
   Workaround: ship 16-bit PNGs for android</li>
<li>Joshua Quick 2017-04-21

   Closing because it is a duplicate of [TIMOB-24465] which will be resolved soon.</li>
</ol>


<p><a href="/TIMOB/TIMOB-6908.json">JSON Source</a></p>