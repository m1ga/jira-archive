---
title: "[TIMOB-7000] Android: UI - crash when window property not initialized on tab creation"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Critical</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-01-17T21:43:15.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-02, Release 2.0.0, Release 1.8.1</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>module_tabgroup, qe-testadded, regression</td></tr>
<tr><th>Reporter</th><td>Benjamin Jeanjean</td></tr>
<tr><th>Assignee</th><td>Opie Cyrus</td></tr>
<tr><th>Created</th><td>2012-01-05T09:28:15.000+0000</td></tr>
<tr><th>Updated</th><td>2013-12-10T05:58:31.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>

If the <code>window</code> property is omitted when a [Titanium.UI.Tab](<a href="http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.UI.Tab-object#properties)" rel="nofollow" target="_blank">http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.UI.Tab-object#properties)</a> is created, despite setting it directly afterwards with the <code>setWindow()</code> method, it will cause the app to crash.

The crash will occur when the <code>open</code> method is called on the <code>TabGroup</code>.

<h4>Test case</h4>

<code><pre>
Ti.UI.setBackgroundColor('#000');

var tabGroup = Ti.UI.createTabGroup();

var win1 = Ti.UI.createWindow({  
    title:'Tab 1',
    backgroundColor:'#fff'
});
var tab1 = Ti.UI.createTab({  
    icon:'KS_nav_views.png',
    title:'Tab 1',
});
tab1.window = win1;

var win2 = Ti.UI.createWindow({  
    title:'Tab 2',
    backgroundColor:'#fff'
});
var tab2 = Ti.UI.createTab({  
    icon:'KS_nav_ui.png',
    title:'Tab 2',
});
tab2.setWindow(win2);

tabGroup.addTab(tab1);  
tabGroup.addTab(tab2);  

tabGroup.open();
</pre></code>

<h4>Logs</h4>

<code><pre>
01-05 17:59:57.370: ERROR/TiApplication(6157): (main) [1,4512] Sending event: exception on thread: main msg:java.lang.NullPointerException; Titanium 1.8.0.1,2011/12/22 13:09,fbdc96f
01-05 17:59:57.370: ERROR/TiApplication(6157): java.lang.NullPointerException
01-05 17:59:57.370: ERROR/TiApplication(6157):     at ti.modules.titanium.ui.TabGroupProxy.addTabToGroup(TabGroupProxy.java:204)
01-05 17:59:57.370: ERROR/TiApplication(6157):     at ti.modules.titanium.ui.TabGroupProxy.handlePostOpen(TabGroupProxy.java:314)
01-05 17:59:57.370: ERROR/TiApplication(6157):     at ti.modules.titanium.ui.TabGroupProxy.handleMessage(TabGroupProxy.java:95)
01-05 17:59:57.370: ERROR/TiApplication(6157):     at android.os.Handler.dispatchMessage(Handler.java:95)
01-05 17:59:57.370: ERROR/TiApplication(6157):     at android.os.Looper.loop(Looper.java:123)
01-05 17:59:57.370: ERROR/TiApplication(6157):     at android.app.ActivityThread.main(ActivityThread.java:3691)
01-05 17:59:57.370: ERROR/TiApplication(6157):     at java.lang.reflect.Method.invokeNative(Native Method)
01-05 17:59:57.370: ERROR/TiApplication(6157):     at java.lang.reflect.Method.invoke(Method.java:507)
01-05 17:59:57.370: ERROR/TiApplication(6157):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
01-05 17:59:57.370: ERROR/TiApplication(6157):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
01-05 17:59:57.370: ERROR/TiApplication(6157):     at dalvik.system.NativeStart.main(Native Method)
01-05 17:59:57.400: ERROR/AndroidRuntime(6157): FATAL EXCEPTION: main
01-05 17:59:57.400: ERROR/AndroidRuntime(6157): java.lang.NullPointerException
01-05 17:59:57.400: ERROR/AndroidRuntime(6157):     at ti.modules.titanium.ui.TabGroupProxy.addTabToGroup(TabGroupProxy.java:204)
01-05 17:59:57.400: ERROR/AndroidRuntime(6157):     at ti.modules.titanium.ui.TabGroupProxy.handlePostOpen(TabGroupProxy.java:314)
01-05 17:59:57.400: ERROR/AndroidRuntime(6157):     at ti.modules.titanium.ui.TabGroupProxy.handleMessage(TabGroupProxy.java:95)
01-05 17:59:57.400: ERROR/AndroidRuntime(6157):     at android.os.Handler.dispatchMessage(Handler.java:95)
01-05 17:59:57.400: ERROR/AndroidRuntime(6157):     at android.os.Looper.loop(Looper.java:123)
01-05 17:59:57.400: ERROR/AndroidRuntime(6157):     at android.app.ActivityThread.main(ActivityThread.java:3691)
01-05 17:59:57.400: ERROR/AndroidRuntime(6157):     at java.lang.reflect.Method.invokeNative(Native Method)
01-05 17:59:57.400: ERROR/AndroidRuntime(6157):     at java.lang.reflect.Method.invoke(Method.java:507)
01-05 17:59:57.400: ERROR/AndroidRuntime(6157):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
01-05 17:59:57.400: ERROR/AndroidRuntime(6157):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
01-05 17:59:57.400: ERROR/AndroidRuntime(6157):     at dalvik.system.NativeStart.main(Native Method)
</pre></code>

<h3>Comments</h3>

<ol>
<li>Benjamin Jeanjean 2012-01-05

   This work on SDK 1.7.5, that's a regression.</li>
<li>Eric Merriman  2012-01-19

   Verified fixed with SDK 1.9.0.v20120119131634 on Nexus S (2.3.6) and Emulator.</li>
<li>Wilson Luu 2012-02-02

   updated labels</li>
<li>Shameer Jan 2013-12-10

   Anvil testcase PR <a href="https://github.com/appcelerator/titanium_mobile/pull/5074" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5074</a>
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-7000.json">JSON Source</a></p>