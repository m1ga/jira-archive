---
title: "[TIMOB-7138] MobileWeb: Support for encrypted/obfuscated Ti+ modules"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2016-09-28T16:02:20.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>MobileWeb</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2012-01-12T14:50:12.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-23T22:32:20.000+0000</td></tr>
</table>

<h3>Description</h3>

It would be a good idea to support encrypted/obfuscated Ti+ modules. A small command line Python script would "compile" a module which would minify and then encrypt/obfuscate.

If we choose to encrypt, a production build would yield both a key file and the module (encrypted and minified) JavaScript file. The encryption method is a two-way cipher.

<code><pre>
F0LeAo2c!8fzpQ52m7YCx
</pre></code>

<code><pre>
define("mymodule", ["Ti/_/Decrypt!mymodule"], function(decryptor) {
    return decryptor("ENCRYPTED CODE GOES HERE");
});
</pre></code>

When a project is compiled that uses mymodule, then all module names/keys will be "registered" with the decryptor by appending the following to the titanium.js:

<code><pre>
require("Ti/_/Decrypt", function(decyrpt) {
    decrypt.set({
        "mymodule": "F0LeAo2c!8fzpQ52m7YCx"
    });
});
</pre></code>

The decryptor will look up the key for the module being decrypted, then decrypt and evaluate it.

Ti/_/Decrypt is an AMD module as well as a AMD plugin. When invoked as a module (when the keys are defined), the set() method is simply invoked.

<code><pre>
define(function() {
    var keys = {};

    return {
        set: function(k) {
            require.mix(keys, k);
        },

        load: function(name) {
            return (function(k) {
                return function(s) {
                    // TODO: decrypt "s" with keys[k]
                    var obj = require.eval(s);
                    return obj;
                };
            }(name.split("!").pop()));
        }
    };
});
</pre></code>

<h3>Comments</h3>

<ol>
<li>Lee Morris 2017-03-23

   Closing ticket as Won't Fix.</li>
</ol>


<p><a href="/TIMOB/TIMOB-7138.json">JSON Source</a></p>