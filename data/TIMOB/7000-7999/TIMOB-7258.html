---
title: "[TIMOB-7258] Android - Android does not detect an array as an instanceof Array"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2013-03-25T17:11:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0.1, Release 2.0.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>exalture</td></tr>
<tr><th>Reporter</th><td>Mauro Parra-Miranda</td></tr>
<tr><th>Assignee</th><td>Sunila</td></tr>
<tr><th>Created</th><td>2012-01-17T10:54:19.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-21T21:29:50.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>PROBLEM DESCRIPTION</h4>
Customer refactored his app to use the require function instead of Ti.include. But I detect an issue with the require feature. My instanceof checks do no longer work. It's a bit strange and took me a long time to break it down.

<h4>STEPS TO REPRODUCE</h4>
1. Create new mobile project
2. Add app.js listed below

<code><pre>
var win = Ti.UI.createWindow();
win.open();
 
function callback (myarray) {
 
    if ((myarray instanceof Array)) {
        alert('myarray is instance of array');
    } else {
        alert('myarray is NOT instance of array');
    }
};
 
var caller = require('caller');
var call   = new caller();
call.setCallback(callback);
call.start();
</pre></code>

3. add a file caller.js with this:

<code><pre>
function caller () {
}
 
caller.prototype.setCallback = function (callback) {
    this.callback = callback;
};
 
caller.prototype.start = function () {
    this.callback.apply({}, [[]]);
};
 
module.exports = caller;
</pre></code>

<h4>EXTRA INFO</h4>
In iOS is working fine. Screenshots attached. 

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-7258_25100/Screen Shot 2012-01-17 at 10.07.03 AM.png">Screen Shot 2012-01-17 at 10.07.03 AM.png</td></td><td>2012-01-17T10:54:39.000+0000</td><td>56407</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-7258_25101/Screen Shot 2012-01-17 at 10.33.09 AM.png">Screen Shot 2012-01-17 at 10.33.09 AM.png</td></td><td>2012-01-17T10:54:39.000+0000</td><td>37327</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Ivan Skugor 2012-01-19

   There is definitely something strange going on here. The issue is not related to "apply" function, regular function call ("this.callback([])") also suffers from same problem.
   
   
   I tried to see "myarray" variable contains but debug information does not show.
   
   <code><pre>
   function callback (myarray) {
       Ti.API.debug(myarray); //doesn't print anything
       Ti.API.debug(Object.prototype.toString.call(myarray)); //prints [object Array], that's OK
       if ((myarray instanceof Array)) {
           alert('myarray is instance of array');
       } else {
           alert('myarray is NOT instance of array');
       }
   };
   </pre></code>
   
   
   It seems like array's value is lost somewhere.</li>
<li>Jick Steen 2012-01-19

   Same happens for example with a <code>(myobject instanceof Object)</code> check. Doesn't work.</li>
<li>Sunila 2013-03-25

   I can't reproduce the problem, it works fine with SDK 3.1.0.
   </li>
<li>Lee Morris 2017-03-21

   Closing ticket as the issue cannot be reproduced.</li>
</ol>


<p><a href="/TIMOB/TIMOB-7258.json">JSON Source</a></p>