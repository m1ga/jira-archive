---
title: "[TIMOB-7440] Android: 2DMatrix initalizer doesn't work properly when both "scale" and "rotate" are specified"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-05-10T04:36:41.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 3.1.0</td></tr>
<tr><th>Fix Version/s</th><td>2013 Sprint 10 Core, 2013 Sprint 10, Release 3.2.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>module_animation, parity, qe-manualtest, tbs-2.1.0</td></tr>
<tr><th>Reporter</th><td>Arthur Evans</td></tr>
<tr><th>Assignee</th><td>Josh Roesslein</td></tr>
<tr><th>Created</th><td>2012-01-26T17:39:21.000+0000</td></tr>
<tr><th>Updated</th><td>2014-08-08T00:34:15.000+0000</td></tr>
</table>

<h3>Description</h3>

Both Android and iOS appear to accept the same initializer to <code>create2DMatrix</code>. This dictionary object can contain  <code>scale</code> and <code>rotate</code> properties, like so:

<code><pre>
var m = Ti.UI.create2DMatrix({ 
    scale: 2,
    rotate: 45
);
</pre></code>

Applying this matrix to a view on iOS produces the expected results: the view is scaled 2x and rotated 45 degrees. However, on Android the view is scaled 2x and translated, but not rotated.

Using either <code>scale:</code> or <code>rotate:</code> on its own works on both systems.

The following code produces the correct results on Android:

<code><pre>
var m = Ti.UI.create2DMatrix({ 
    rotate: 45
);
m = m.scale(2, 2);
</pre></code>


<h3>Comments</h3>

<ol>
<li>Shameer Jan 2013-03-20

   The problem reproduces with release 3.0.2 and master release 3.1.0
   
   tested on
   
   Titanium Studio, build: 3.0.2.201302191606
   Titanium SDK version: 3.1.0 
   Titanium SDK version: 3.0.2 
   Device: Samsung galaxy s duos Android version: 4.0.4
   Android Emulator: Android SDK version: 2.2
   iOS iPhone Simulator: iOS SDK version: 6.0
   
   It works fine on IOS iphone simulator</li>
<li>Bill Dawson 2013-05-09

   <h4>Test case / fail case</h4>
   
   Run an app with this app.js:
   
   <code><pre>
   Ti.UI.backgroundColor = "blue";
   var win = Titanium.UI.createWindow({  
   		title:'Test',
   		backgroundColor:'blue',
   		exitOnClose: true,
   		orientationModes: [Ti.UI.PORTRAIT]
   	}),
   	btn = Ti.UI.createButton({
   		title: "Rotate/Scale",
   		height: 48, top: "40%", left: "25%", width: 150
   	});
   
   win.add(btn);
   
   btn.addEventListener("click", function() {
   	/** THIS IS THE CODE FROM THE TICKET **/
   	var matrix = Ti.UI.create2DMatrix({
   		scale: 2,
   		rotate: 45
   	});
   	/*************************************/
   
   	btn.animate({
   		transform: matrix,
   		duration: 500
   	});
   });
   
   win.add(Ti.UI.createLabel({
   	text: "When clicked once, the button should double size AND rotate 45°. Fail case is just doubling size and failing to rotate.",
   	bottom: 16, left: 16, right: 16, height: "auto",
   	color: "white"
   }));
   
   win.open();
   </pre></code>
   
   When you click the button, it should *both* scale up (grow) *and* rotate 45°.  The fail case was that it would scale up but *not* rotate.</li>
<li>Bill Dawson 2013-05-09

   PR ready: <a href="https://github.com/appcelerator/titanium_mobile/pull/4247" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4247</a></li>
<li>Wilson Luu 2013-10-23

   Closing ticket as fixed. Verified using Bill's test case that the button both scale up and rotate 45°.
   
   Tested on:
   
   Titanium Studio, build: 3.2.0.201310230548
   OS: Mac OS X Mountain Lion (10.8.5)
   SDK build: 3.2.0.v20131022171645
   Ti CLI: 3.2.0 (72f7426b4ee6c2d2883c666d5b7e03906a16012f)
   Devices: Samsung Galaxy S3 (4.0.4), Samsung Galaxy S4 (4.2.2)</li>
</ol>


<p><a href="/TIMOB/TIMOB-7440.json">JSON Source</a></p>