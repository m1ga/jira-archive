---
title: "[TIMOB-7780] iOS: trying to compile not found for architecture i386"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2012-02-27T17:13:27.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0.1, Release 1.8.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Francisco Antonio Duran Ramirez</td></tr>
<tr><th>Assignee</th><td>Stephen Tramer</td></tr>
<tr><th>Created</th><td>2012-02-22T16:44:05.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-24T18:15:48.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>

Every time you have a static library the module does not compile, and throws the following error messages: 

<code><pre>
[ERROR]
[ERROR] Error: Traceback (most recent call last):
[DEBUG] File "/Users/tony/Library/Application Support/Titanium/mobilesdk/osx/1.8.1/iphone/builder.py", line 1286, in main
[DEBUG] execute_xcode("iphonesimulator%s" % link_version,["GCC_PREPROCESSOR_DEFINITIONS=__LOG__ID__=%s DEPLOYTYPE=development TI_DEVELOPMENT=1 DEBUG=1 TI_VERSION=%s %s %s" % (log_id,sdk_version,debugstr,kroll_coverage)],False)
[DEBUG] File "/Users/tony/Library/Application Support/Titanium/mobilesdk/osx/1.8.1/iphone/builder.py", line 1192, in execute_xcode
[DEBUG] output = run.run(args,False,False,o)
[DEBUG] File "/Users/tony/Library/Application Support/Titanium/mobilesdk/osx/1.8.1/iphone/run.py", line 39, in run
[DEBUG] sys.exit(rc)
[DEBUG] SystemExit: 65
[ERROR] Build Failed. See: /var/folders/57/2nnhd4_n3kd46bpt37k6gmlw0000gp/T/mTnxUGHti/zbarscannersimple/build/iphone/build/build.log
</pre></code>

<h4>To Reproduce:</h4>
1. Create an iOS module
2. Drag and drop a static library (something.a) into the project
3. Run the module from the command line: titanium run
4. Module does not compile

Attached is a static .a library.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-7780_25862/libzbar.a">libzbar.a</td></td><td>2012-02-22T16:44:05.000+0000</td><td>3038988</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2012-02-24

   Going to get fixed as part of another bug</li>
<li>Stephen Tramer 2012-02-24

   Not the relation I thought it was; probably S05 timeframe</li>
<li>Stephen Tramer 2012-02-27

   This is actually an issue with the library being built without appropriate <code>extern "C"</code> support for C++ compiler integration. We require some C++ build steps to get Titanium to work correctly with JSCore, although I will take a closer look at where we can chop this out and whether or not we can add our own <code>extern "C"</code> support.
   
   In the meantime the library vendor should be contacted. This is a severe problem with their build, as it prevents it from working with any linker which is working with source compiled from C++.
   
   *NOTE*: This could be an issue with modules not using the C++ linker (which could create other problems as well). Will investigate.</li>
<li>Stephen Tramer 2012-02-27

   Coercing the module to a C++ build did not provide the correct symbols. However, I did find the following:
   
   <code><pre>
   -&gt; % nm libzbar.a | grep _CVP
            U _CVPixelBufferGetBaseAddressOfPlane
            U _CVPixelBufferGetBytesPerRowOfPlane
            U _CVPixelBufferGetHeightOfPlane
            U _CVPixelBufferGetPixelFormatType
            U _CVPixelBufferGetPlaneCount
   etc.
   </pre></code>
   
   These are all references to an additional foundation framework which we *do not* link in Titanium. The module may be required to link it in itself, and the library may not even be available for simulator.</li>
<li>Stephen Tramer 2012-02-27

   Figured out the correct solution. Module developers must make sure that their module specifies any additional compilation flags for their projects in the <code>module.xcconfig</code> file. In particular, modules need to indicate which additional libraries they must link against. In this case the line
   
   <code><pre>
   OTHER_LDFLAGS=$(inherited) -framework CoreVideo -liconv
   </pre></code>
   
   Is required. Closing this ticket as invalid.</li>
<li>Stephen Tramer 2012-02-27

   See comments for correct resolution to this issue.</li>
<li>Lee Morris 2017-03-24

   Closing ticket as invalid with reference to the above comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-7780.json">JSON Source</a></p>