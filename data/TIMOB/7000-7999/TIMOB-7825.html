---
title: "[TIMOB-7825] MobileWeb: Expose withCredentials and userAgent on HTTPClient"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-03-19T22:44:49.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.0.0, Sprint 2012-06</td></tr>
<tr><th>Components</th><td>MobileWeb</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Dawson Toth</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2012-02-27T11:20:56.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-04T00:17:31.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Feature</h4>
Two properties are needed for a particular instance of cross domain requesting:
- Expose the withCredentials property of XMLHttpRequest via HTTPClient.
- Allow overriding or excluding the UserAgent request header via a userAgent property passed in the constructor.

<h4>Why</h4>
For some cross domain requests, these properties need to be set, or the request won't be valid. (Cookies and authorization need to be included, and the server doesn't accept the UserAgent header.)

<h3>Comments</h3>

<ol>
<li>Dawson Toth 2012-02-27

   PR sent: <a href="https://github.com/appcelerator/titanium_mobile/pull/1519" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/1519</a></li>
<li>Chris Barber 2012-02-27

   Do we need this? We've been testing with cross-domain XHR and it works as long as the server has properly configured CORS (cross-origin resource sharing).
   
   Furthermore, this should probably be implemented as a property, not a method. A "withCreditials" will automatically create the setter/getter method.</li>
<li>Chris Barber 2012-02-27

   Is there any reason we can't always set setWithCredentials('true')?</li>
<li>Chris Barber 2012-02-27

   What is the fallback for browsers that don't support XHR2 (i.e. support for setWithCredentials())?</li>
<li>Dawson Toth 2012-02-27

   PR updated per your comments.
   
   To the best of my knowledge, browsers that don't support XHR2 will ignore the property. We probably could set withCredentials to true all the time, but I think it would only be a problem if the server wasn't sending "Access-Control-Allow-Credentials: true".</li>
<li>Bryan Hughes 2012-03-19

   Pull Request: <a href="https://github.com/appcelerator/titanium_mobile/pull/1749" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/1749</a>
   
   Note: we removed support for Ti.userAgent entirely, and are no longer setting the "UserAgent" header internally.</li>
<li>Lee Morris 2017-03-04

   Closing ticket due to MobileWeb no longer being supported.</li>
</ol>


<p><a href="/TIMOB/TIMOB-7825.json">JSON Source</a></p>