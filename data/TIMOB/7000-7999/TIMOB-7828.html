---
title: "[TIMOB-7828] Ti API: Problem with remove method to clear all children in a scrollview"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 1.8.0.1</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>TiAPI</td></tr>
<tr><th>Labels</th><td>core</td></tr>
<tr><th>Reporter</th><td>process</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2012-02-24T05:25:26.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-06T18:57:49.000+0000</td></tr>
</table>

<h3>Description</h3>

Hi,

Lots of problem with remove method. Didn't find any function to clear all children.
Create a simple scrollView (i guess it's the same for views), add some ImageViews inside and try :

<code><pre>
var simpleView = Ti.UI.createView({
			id : 'mainView',
			top : 0,
			left : 0,
			layout : 'absolute',
			width : Ti.Platform.displayCaps.platformWidth,
			height : Ti.Platform.displayCaps.platformHeight
		});
</pre></code>
or
<code><pre>
var simpleView == Ti.UI.createScrollView({
			top : 0,
			zoomScale : 1,
			minZoomScale : 1,
			maxZoomScale : 2,
			width : Ti.Platform.displayCaps.platformWidth,
			height : Ti.Platform.displayCaps.platformHeight,
			contentWidth : 'auto',
			contentHeight : 'auto'
}
</pre></code>

then ...

<code><pre>
var images = [];

for(var i=0; i &lt; 10; i++){
         images.push(Ti.UI.createImageView({
					image : 'image' + i + '.jpg',
					width : 600,
					height : 400,
					left : 0,
					top : 0
				}));
}

for(var i=0; i&lt;imgs.length; i++){
    simpleView.add(images[i]);
}


var removeChildren = function(view){
	while(view.children != undefined){
		view.remove(view.children[0]);
	}
}

removeChildren(simpleView);
</pre></code>

Getting sometimes : 
<code><pre>"*** -[__NSArrayM objectAtIndex:]: index N beyond bounds [0 .. X]";</pre></code>
at this line :
<code><pre>while(view.children != undefined)</pre></code>

I tried other ways to do removeChildren method but none works well on titanium mobile 1.8.1.0 ( <a href="http://developer.appcelerator.com/question/131151/emptying-a-view#228486" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/131151/emptying-a-view#228486</a> )

********************

Another method is the following : 
<code><pre>
var removeAllChildren = function(viewObject) {
	if(viewObject.children != undefined){
		var children = viewObject.children.slice(0);
		
		for(var i = 0; i &lt; children.length; i++) {
			try {
				viewObject.remove(children[i]);
			} catch(e) {
				Ti.API.error('removeAllChildren error : ' + e.message + ' ' + viewObject);
			}
		}
		children = null;
	}
}
</pre></code>

but there's a warning on each remove invocation (in my case it's a scrollView instead of a view but i guess it's the same pb) :

<code><pre>
called remove for [object TiUIImageView] on [object TiUIScrollView], but [object TiUIImageView] isn't a child or has already been removed
</pre></code>

and sometimes i get
<code><pre>"Result of expression 'viewObject.children' [undefined] is not an object.";</pre></code>
for line
<code><pre>if(viewObject.children != undefined)</pre></code>

********************

- In general it's hard to loop through children of a view an to remove some children. This kind of way to do return sometimes an error :

<code><pre>
for(var i=0; i&lt; simpleView.children.length; i++){
	if(XXXXX){
		simpleView.remove(player.ui.mainView.children[i]);
		i--;
        }
}
</pre></code>

at line <code><pre>for(var i=0; i&lt; simpleView.children.length; i++)</pre></code> it launch sometimes this exception
<code><pre>"*** -[__NSArrayM objectAtIndex:]: index X beyond bounds [0 .. X]";</pre></code>



Best Regards


<h3>Comments</h3>

<ol>
<li>Ivan Skugor 2012-02-28

   "Result of expression 'viewObject.children' [undefined] is not an object." - you got that message because you passed "undefined" instead of TiView into that function.
   
   It can be avoided by modifying that line so it checks if value is falsy: "if(viewObject && viewObject.children != undefined)"</li>
<li>process 2012-02-28

   I think there's a latency between the time when remove method is called and when view.length is updated</li>
</ol>


<p><a href="/TIMOB/TIMOB-7828.json">JSON Source</a></p>