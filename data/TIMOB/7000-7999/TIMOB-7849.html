---
title: "[TIMOB-7849] iOS: TiUIWebView beforeload event doesn't have the URL "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-03-06T11:30:27.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.2</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-05, Release 2.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>module_webview, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Taracque</td></tr>
<tr><th>Assignee</th><td>Stephen Tramer</td></tr>
<tr><th>Created</th><td>2012-02-29T03:36:58.000+0000</td></tr>
<tr><th>Updated</th><td>2013-11-25T08:50:59.000+0000</td></tr>
</table>

<h3>Description</h3>

When beforeload event called in TiUIWebView.m the URL is unknown. The beforeload event should be moved to shouldStartLoadWithRequest, to let beforeload know what url will be opened.

A suggested fix can be found here:
<a href="https://github.com/appcelerator/titanium_mobile/pull/538" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/538</a>

<h3>Comments</h3>

<ol>
<li>Taracque 2012-03-01

   I don't think it's a New feature. As the documentation clearly describes, that the URL is passed on beforeload event, I still think this is a bug.
   <a href="http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.UI.WebView.beforeload-event.html" rel="nofollow" target="_blank">http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.UI.WebView.beforeload-event.html</a></li>
<li>Marshall Culpepper 2012-03-02

   This issue is simply pending functional review on Taracque's existing PR here:
   <a href="https://github.com/appcelerator/titanium_mobile/pull/538" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/538</a></li>
<li>Taracque 2012-03-06

   You can test this issue with this code:
   
   
   var webViewer = Titanium.UI.createWebView({
   	top:0,
   	left:0,
   	width:'100%',
   	height:'100%'
   });
   
   webViewer.addEventListener('beforeload',function(e){
   	alert("BEFORELOAD: " + e.url);
   });
   
   webViewer.addEventListener('load', function(e){
   	alert("LOAD: " + e.url);
   });
   
   var winFront = Titanium.UI.createWindow({
       title:'TUiWebView',
   	navBarHidden: true,
       backgroundColor:'#d6d6d6'
   });
   
   winFront.add(webViewer);
   winFront.open();
   
   webViewer.url="<a href="http://www.appcelerator.com/" rel="nofollow" target="_blank">http://www.appcelerator.com/</a>";
   
   
   
   You will see, that beforeload alerts are displays the current url every time (which always can be read from webViewer.url property) , and load alert displays the new url.
   If you accept my patch, beforload handler can reject page before it actually loads depending on URL. The current implementation has no sense.</li>
<li>Michael Pettiford 2012-03-07

   Closing issue
   
   Tested with Ti Studio build 1.0.9.201202141208
   Ti Mob SDK 2.0.0.v20120307090205
   OSX Lion 10.7.3
   iPhone 4S OS 5.0
   
   Expected behavior is shown</li>
<li>jithinpv 2013-11-25

   Anvil test case added.
   PR link:
   <a href="https://github.com/appcelerator/titanium_mobile/pull/5020" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5020</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-7849.json">JSON Source</a></p>