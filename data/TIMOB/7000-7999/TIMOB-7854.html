---
title: "[TIMOB-7854] iOS: WindowProxy not properly cleaned up in modal views "
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-03-20T14:48:40.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.0.0, Sprint 2012-06</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>ios, module_window, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Sabil Rahim</td></tr>
<tr><th>Assignee</th><td>Max Stepanov</td></tr>
<tr><th>Created</th><td>2012-02-29T15:10:23.000+0000</td></tr>
<tr><th>Updated</th><td>2012-07-09T14:02:33.000+0000</td></tr>
</table>

<h3>Description</h3>

In the following code the windows opened are never cleared out from memory which can cause memory as well as orientation issues as we check the last window on the stack to find the current orientation. 

<h4>Steps to reproduce</h4>
1. Run the app.js file in instruments.
2. search for TiUIwindowproxy
3. Click open on Blue window
4. Click open on Green window.
5. Click close on Red Window.
6. Repeat steps 4 & 5 , few times and finally click close on blue window.
7. Check the number of living WindowProxy.(It does not get Garbage Collected).

<h4>Expected Result:</h4>
When closing out the windows inside modal views the windowproxy should cleaned up.

<h4>Actual Result:</h4>
None of the windows opened inside modal views are cleaned up.

<code><pre>
var toplevel = Ti.UI.createWindow({
	orientationModes:[
		Ti.UI.PORTRAIT,
		Ti.UI.UPSIDE_PORTRAIT
	],
	backgroundColor:'blue'
});

var win = Ti.UI.createWindow({
	orientationModes:[
		Titanium.UI.LANDSCAPE_LEFT,
		Titanium.UI.LANDSCAPE_RIGHT
	],
	backgroundColor:'green'
});



var b = Ti.UI.createButton({
	title:'open',
	width:100,
	height:50
});
b.addEventListener('click', function() {
	win.open({modal:true});
});

var b2 = Ti.UI.createButton({
	title:'open',
	width:100,
	height:50,
	top:20
});
b2.addEventListener('click', function() {
	var win2 = Ti.UI.createWindow({
	orientationModes:[Ti.UI.LANDSCAPE_RIGHT],
	backgroundColor:'red'
    });
    var b4 = Ti.UI.createButton({
	title:'close',
	width:100,
	height:50,
	bottom:20
    });
    win2.add(b4);
    b4.addEventListener('click', function() {
        win2.close();
    });

    
    
    
    win2.open();
});

var b3 = Ti.UI.createButton({
	title:'close',
	width:100,
	height:50,
	bottom:20
});
b3.addEventListener('click', function() {
	win.close();
});

var b4 = Ti.UI.createButton({
	title:'close',
	width:100,
	height:50,
	bottom:20
});
b4.addEventListener('click', function() {
	win2.close();
});

toplevel.add(b);
win.add(b2);
win.add(b3);


toplevel.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Neeraj Gupta 2012-03-20

   This PR is on hold pending TIMOB-8070 resolution.</li>
<li>Blain Hamon 2012-03-20

   Pull #1691 merged</li>
<li>Dustin Hyde 2012-03-21

   Closing as Fixed.
   
   SDK: 2.0.0.v20120321161753
   Studio: 2.0.0.201203202130
   OS: Snow Leopard
   Devices Tested: iPhone4 4.3.5, iPad2 5.1</li>
</ol>


<p><a href="/TIMOB/TIMOB-7854.json">JSON Source</a></p>