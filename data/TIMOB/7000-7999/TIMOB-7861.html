---
title: "[TIMOB-7861] iOS: Tableview headers incorrect display when combined with searchBar"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-03-29T07:57:12.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.2</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-05, Release 2.0.0, Release 1.8.3</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>module_tableview, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Sandeep Bhimavarapu</td></tr>
<tr><th>Assignee</th><td>Max Stepanov</td></tr>
<tr><th>Created</th><td>2012-03-01T21:25:13.000+0000</td></tr>
<tr><th>Updated</th><td>2012-03-29T15:56:21.000+0000</td></tr>
</table>

<h3>Description</h3>

This is the case where a tableview is associated with a searchBar. When table rows are filtered using some search text and then new data, with headers, is set to the table on clicking the search button on keyboard ('return' function of the searchBar), then the search filter is applied on the new data but then the headers are also displayed which results in weird display.

Please see the attached images for better understanding.

*Sample Code*
{noformat}
// create table view data object
var win = Ti.UI.createWindow({
    backgroundColor : 'white'
});

var data = [
    {title:'Alan (click to change index)', hasChild:true, header:'A'},
    {title:'Alice', hasDetail:true},
    {title:'Alexander'},
    {title:'Amos'},
    {title:'Alonzo'},
    {title:'Brad', header:'B'},
    {title:'Brent'},
    {title:'Billy'},
    {title:'Brenda'},
    {title:'Callie', header:'C'},
    {title:'Cassie'},
    {title:'Chris'},
    {title:'Cameron'},
    {title:'Don', header:'D'},
    {title:'Dilbert'},
    {title:'Deacon'},
    {title:'Devin'},
    {title:'Darin'},
    {title:'Darcy'}
];

var search = Titanium.UI.createSearchBar();

// create table view
var tableview = Titanium.UI.createTableView({
    data:data,
    search:search,
    filterAttribute : 'title'
});

// set filters
var index = [
    {title:'A',index:0},
    {title:'B',index:5},
    {title:'C',index:9},
    {title:'D',index:(data.length -1)}
];
tableview.index = index;

// add table view to the window
win.add(tableview);

search.addEventListener('return', function() {
    
    tableview.setData(data);
    
});

win.open();
{noformat}

*Steps to Reproduce*
- Please copy the code into app.js and run the app.
- Search for a name in the table, say 'Chr'.
- Hit Enter if running on simulator or search if running on device.
- You can see new data with search filter and also the headers.

*Expected Behavior*
- New data is filtered and no headers are seen

*Other comments*
- The use case is to apply new data, but not the original data again. It was only used for the example.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-7861_26002/Search button is hit and new data is applied.png">Search button is hit and new data is applied.png</td></td><td>2012-03-01T21:25:13.000+0000</td><td>71738</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-7861_26001/Search filter applied.png">Search filter applied.png</td></td><td>2012-03-01T21:25:13.000+0000</td><td>101872</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-7861_26000/Tableview with data.png">Tableview with data.png</td></td><td>2012-03-01T21:25:13.000+0000</td><td>79897</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Max Stepanov 2012-03-07

   This is a common iOS issue when UITableView with sections is updated when UISearchDisplayController is active.
   <a href="http://stackoverflow.com/questions/3647319/reloading-uitableview-behind-uisearchdisplaycontroller" rel="nofollow" target="_blank">http://stackoverflow.com/questions/3647319/reloading-uitableview-behind-uisearchdisplaycontroller</a>
   </li>
<li>Michael Pettiford 2012-03-09

   Closing issue
   
   Tested with Ti Studio build 1.0.9.201202141208
   Ti Mob SDK 2.0.0.v20120309100238
   OSX Lion 10.7.3
   
   Expected behavior is shown of no headers being displayed after searching </li>
<li>Stephen Tramer 2012-03-29

   Reopening to add 1.8.3 to fixversion</li>
</ol>


<p><a href="/TIMOB/TIMOB-7861.json">JSON Source</a></p>