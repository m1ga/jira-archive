---
title: "[TIMOB-7868] iOS: change map annotation to fire event when the annotation pin is clicked"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Won't Fix</td></tr>
<tr><th>Resolution Date</th><td>2017-08-01T22:37:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.0.1, Release 1.8.1, Release 1.8.2, Release 3.1.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>module_map, parity, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Dustin Hyde</td></tr>
<tr><th>Assignee</th><td>Eric Merriman </td></tr>
<tr><th>Created</th><td>2012-03-02T14:57:59.000+0000</td></tr>
<tr><th>Updated</th><td>2017-08-01T22:37:35.000+0000</td></tr>
</table>

<h3>Description</h3>

When a map annotation is visible and the related pin is clicked, no annotation click event is fired. It works on Android. Parity.
Clone of TIMOB-7272.

Steps to Reproduce:

1. Run code.

<code><pre>
var win = Ti.UI.createWindow();

var atlantaParams = {
	latitude:33.74511,
	longitude:-84.38993,
	title:"Atlanta, GA",
	subtitle:'Atlanta Braves Stadium\nfoo',
	animate:true,
	rightButton: Titanium.UI.iPhone.SystemButton.DISCLOSURE,
	myid:3 // CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS
};

atlantaParams.pincolor = Titanium.Map.ANNOTATION_PURPLE;

var atlanta = Titanium.Map.createAnnotation(atlantaParams);

var mapview = Titanium.Map.createView({
	mapType: Titanium.Map.STANDARD_TYPE,
	region:{latitude:33.74511, longitude:-84.38993, latitudeDelta:0.5, longitudeDelta:0.5},
	animate:true,
	regionFit:true,
	userLocation:true,
	annotations:[atlanta]
});

mapview.addEventListener("click", function(e) {
	var info = '\n';
	
	info += 'type: ' + e.type + '\n';
	info += 'clicksource: ' + e.clicksource + '\n';
	info += 'title: ' + e.title + '\n';
	info += 'index: ' + e.index + '\n';
	info += 'annotation: ' + e.annotation + '\n';
	info += 'map: ' + e.map + '\n';
	info += 'source: ' + e.source + '\n';
	
	Ti.API.info(info);
	alert(info);
});

mapview.addAnnotation(atlanta);

win.add(mapview);

win.open();
</pre></code>

2. Click pin to open annotation. Close first alert.
3. Click pin again when annotation is open.

Expected Result:

Annotation event should fire, with alert.

Actual Result:

No event fired, as it would in Android.

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2012-03-02

   Now that we actually have gesture listeners, we can implement click detection on maps. There are some long-standing parity bugs involving map click detection.</li>
<li>jithinpv 2013-04-04

   Issue reproduces 
   
   Tested with
   
   Titanium Studio, build: 3.0.1.201212181159
   Titanium SDK version: 3.1.0 
   Titanium SDK version: 3.0.2 
   iOS iPhone Simulator: iOS SDK version: 6.0</li>
<li>Tristan Marly 2013-09-16

   I'm subscribing to this bug, still occurs on 3.1.2.GA / iPhone Simulator 6.0
   
   Really annoying because the only way to listen click on markers is to set a title and have this not very nice black bubble above the marker.
   I don't know if there is a workaround to force the black bubble to stay hidden.</li>
<li>Lee Morris 2017-08-01

   Closing due to inactivity. If this issue still exists, please raise a new ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-7868.json">JSON Source</a></p>