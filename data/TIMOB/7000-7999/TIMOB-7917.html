---
title: "[TIMOB-7917] Android: Ti.Platform.displayCaps.platformWidth return value changes on Honeycomb tablet when app is run in "zoom" mode"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-03-14T14:22:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.0.0, Sprint 2012-06</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>module_platform, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Shawn Lipscomb</td></tr>
<tr><th>Assignee</th><td>Opie Cyrus</td></tr>
<tr><th>Created</th><td>2012-03-05T12:11:54.000+0000</td></tr>
<tr><th>Updated</th><td>2012-07-09T13:43:48.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>

Note that the Environment (above) does not display all of the relevent information:
- Titanium Mobile SDK 1.8.2 and 1.8.1
- Android 3.2 emulator (honeycomb), WXGA, app run in "zoom to fill screen" mode
- Also seen on Acer Icona Tab A200 tablet (honeycomb) and Asus Transformer Prime tablet (ICS)
- Windows 7
- Titanium Studio 1.0.9.201202141208

Ti.Platform.displayCaps.platformWidth, when called repeatedly with some calls to Ti.Platform.displayCaps.dpi mixed in, returns 2 different numbers.

The first call to Ti.Platform.displayCaps.platformWidth seems to return the correct value (545 in my case, since the emulator starts off in landscape orientation).  After calling Ti.Platform.displayCaps.dpi, the next call to Ti.Platform.displayCaps.platformWidth returns an incorrect value (1280 in my case).  This incorrect value is the WXGA width (as if the app were not being run in "zoom mode").  Continuing this pattern of calls, eventually the result of Ti.Platform.displayCaps.platformWidth will start returning the correct value again (545).

It is therefore impossible to reliably determine the dimensions of the screen.

<h4>Testcase</h4>
<code><pre>
var LastPW=null;
var LastDPI,Result;
for (var c=0; (c < 12); c++)
{
  Result=Ti.Platform.displayCaps.platformWidth;
  LastDPI=Ti.Platform.displayCaps.dpi;
  Ti.API.info('*--> '+'platformWidth returning:'+Result);
  if ((LastPW != null) && (Result != LastPW))
    Ti.API.info('*--> '+'CHANGE IN platformWidth');
  LastPW=Result;  
}
Ti.API.info('*--> '+'Done');
</pre></code>

<h4>Console output:</h4>
{noformat}
>platformWidth returning:545
>platformWidth returning:1280
>CHANGE IN platformWidth
>platformWidth returning:1280
>platformWidth returning:1280
>platformWidth returning:1280
>platformWidth returning:1280
>platformWidth returning:545
>CHANGE IN platformWidth
>platformWidth returning:1280
>CHANGE IN platformWidth
>platformWidth returning:1280
>platformWidth returning:1280
>platformWidth returning:1280
>platformWidth returning:1280
>Done
{noformat}

<h4>Expected Result</h4>
Ti.Platform.displayCaps.platformWidth should consistently return 545 in this test case.

<h4>More Information</h4>
If you remove the call to Ti.Platform.displayCaps.dpi, the problem does not occur.

<h3>Comments</h3>

<ol>
<li>Opie Cyrus 2012-03-13

   Suspect this is due to deprecation of the previous getWidth, etc method on the Android Display object that is updated with 3.2 (lvl 13)</li>
<li>Opie Cyrus 2012-03-14

   PR <a href="https://github.com/appcelerator/titanium_mobile/pull/1669" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/1669</a> opened</li>
<li>Wilson Luu 2012-03-16

   Closing bug. Verified fix on:
   
   SDK build: 2.0.0.v20120316124800
   Runtime: v8, rhino
   Titanium Studio, build: 2.0.0.201203152033
   Device: Xoom (3.2.1)</li>
<li>Shawn Lipscomb 2012-03-19

   Verified fix on SDK 2.0.0.v20120319003254.  Thanks!</li>
</ol>


<p><a href="/TIMOB/TIMOB-7917.json">JSON Source</a></p>