---
title: "[TIMOB-7984] Android: Support setting permissions in generated permissions by module"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-03-15T15:59:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.0.0, Sprint 2012-06</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>module_geolocation, qe-port</td></tr>
<tr><th>Reporter</th><td>Marshall Culpepper</td></tr>
<tr><th>Assignee</th><td>Opie Cyrus</td></tr>
<tr><th>Created</th><td>2012-03-13T19:50:17.000+0000</td></tr>
<tr><th>Updated</th><td>2012-03-19T14:25:11.000+0000</td></tr>
</table>

<h3>Description</h3>

When an app only uses <code>Ti.Geolocation.addEventListener</code>, the proper Geolocation permissions aren't correctly added to the AndroidManifest.xml, causing a permissions error when the application tries to add a <code>location</code> event listener. It looks like the list of APIs that enable these permissions is simply missing this method:

<a href="https://github.com/appcelerator/titanium_mobile/blob/master/support/android/builder.py#L728" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/blob/master/support/android/builder.py#L728</a>

Sample app:
<code><pre>
Titanium.Geolocation.addEventListener("location", function listener(e) {
  Titanium.Geolocation.removeEventListener("location", listener);
});
</pre></code>


* Updated this ticket to cover a general change to build script to allow for setting permissions based on module usage in general rather than relying on specific methods

<h3>Comments</h3>

<ol>
<li>Marshall Culpepper 2012-03-19

   A better test case for confirming this issue is Opie's orignal test case from TIMOB-7565</li>
<li>Wilson Luu 2012-03-19

   Closing bug. Verified you can launch code from TIMOB-7565 without setting any permissions in tiapp.xml on:
   
   SDK build: 2.0.0.v20120319003254
   Runtime: v8, rhino
   Titanium Studio, build: 2.0.0.201203182248
   Device: LG Slate (3.1)</li>
</ol>


<p><a href="/TIMOB/TIMOB-7984.json">JSON Source</a></p>