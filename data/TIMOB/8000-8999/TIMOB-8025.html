---
title: "[TIMOB-8025] iOS: Precompiled headers modified error"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-08-21T21:42:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.0.0, Release 2.1.0, Sprint 2012-06, Release 2.1.1, Release 2.1.2, Release 3.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Chris Barber</td></tr>
<tr><th>Assignee</th><td>Neeraj Gupta</td></tr>
<tr><th>Created</th><td>2012-03-14T16:50:15.000+0000</td></tr>
<tr><th>Updated</th><td>2014-06-19T12:44:01.000+0000</td></tr>
</table>

<h3>Description</h3>

When building any iPhone app after doing a clean, I get the following error:

<code><pre>
[ERROR] fatal error: file '/Volumes/ultima/projects/titanium/timob-5698-maps/build/iphone/timob-5698-maps_Prefix.pch' has been modified since the precompiled header was built
</pre></code>

I'm not alone: <a href="http://developer.appcelerator.com/question/130795/ios-cannot-compile-with-19-continuous-build." rel="nofollow" target="_blank">http://developer.appcelerator.com/question/130795/ios-cannot-compile-with-19-continuous-build.</a>

It can be fixed by simply changing the guid in the tiapp.xml.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-8025_26275/20120316-ek15br2r82brrctydutmy4me1e.jpg">20120316-ek15br2r82brrctydutmy4me1e.jpg</td></td><td>2012-03-15T22:54:28.000+0000</td><td>80813</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-8025_26274/preferences-screenshot.jpg">preferences-screenshot.jpg</td></td><td>2012-03-15T22:48:55.000+0000</td><td>49100</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-8025_26276/Screen Shot 2012-03-16 at 12.09.38 AM.png">Screen Shot 2012-03-16 at 12.09.38 AM.png</td></td><td>2012-03-15T23:10:33.000+0000</td><td>80220</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2012-03-15

   In order to resolve this, we require more information:
   
   * The version of TiStudio
   * The version of Xcode
   * The exact version of CI build (githash is preferable over date)
   * A sample project (complete) which demonstrates the issue.</li>
<li>Chris Barber 2012-03-15

   Titanium Studio, build: 2.0.0.201203121914
   
   Xcode 4.2 build 4D199
   
   Latest master will cause it. This problem has been around for months.
   
   Any app will do. Just go into the build directory and kill the iphone directory, then go to run in iphone simulator.</li>
<li>Stephen Tramer 2012-03-15

   Unable to reproduce on:
   
   * TiStudio 1.0.9.201202141208
   * XCode 4.2.1
   * TiMob SDK 2.0.0.a70a010
   * Existing project built for iOS only
   * Cleaned in TiStudio
   * Cleaned by deleting contents of <code>iphone</code>
   * Cleaned by deleting <code>iphone</code>
   
   Still need more information if this is persisting.</li>
<li>Max Stepanov 2012-03-15

   I believe it's related to Xcode Derived Data which is at a separate location and not affected by TiStudio clean.
   Probably we should clean Derived Data every time we do a clean build in builder.py</li>
<li>Stephen Tramer 2012-03-15

   Unable to reproduce on TiStudio 2.0.0.201203142055 either.
   
   Max should be correct, PCH information is saved in the derived data location where it would become stale if replaced with an updated version. What's the location for "Derived Data" in the Preferences->Locations pane, and the settings under "Advanced..." there?
   
   It appears that <code>xcodebuild clean</code> does in fact clean the cached PCH stuff after all. We should be adding that to both:
   
   * TiStudio
   * The new 'clean' command</li>
<li>Stephen Tramer 2012-03-15

   Created issue TISTUD-1353 so that this can be resolved as part of Studio's cleaning process, if indeed the information that we have is correct. We should be doing this ANYWAY as it will provide a bridge to any build system changes (i.e. no more source file copying).</li>
<li>Chris Barber 2012-03-15

   I don't think this has anything to do with cleaning the project. I've attached a video of what's going on. Please let me know if you want to do a Skype screenshare or have me test anything.</li>
<li>Chris Barber 2012-03-15

   Scratch that... Jira has a 10MB upload limit, so I put the video on my website: <a href="http://www.cb1inc.com/files/TIMOB-8025.mov" rel="nofollow" target="_blank">http://www.cb1inc.com/files/TIMOB-8025.mov</a></li>
<li>Max Stepanov 2012-03-15

   Chris, will it build if you return previous guid back ?</li>
<li>Chris Barber 2012-03-15

    Max, yes, it compiles just fine when I change the guid back to the original.</li>
<li>Chris Barber 2012-03-15

    So, if I get the error, I change my guid to anything, compile and it will work. If I change it back, it still works, even if I delete the build directory. So I'm not sure I'm not sure if the iphone build directory missing that first time is the cause.
    
    I don't get why the guid fixes it. Is the guid getting inserted into a header by the python build script? That's generally a no-no. It's tempting to do that because you can easily assign it to a constant or preprocessor macro, but then you get these header issues.</li>
<li>Max Stepanov 2012-03-15

    How do you get into that state again then ? Once that happens, do you able to build from Xcode by opening generated project file ?</li>
<li>Chris Barber 2012-03-15

    I have no clue, but since I made the video an hour ago, I have done a ton of mobile web builds from the command line (not from studio) and then I deleted the iphone dir in the build dir and it now errors again. I don't see how mobile web could be the problem. We don't touch the iphone directory. We do a os.makedirs(self.build_path) where build_path = /path/to/project/build/mobileweb, do you think makedirs() "touches" the build dir and throws off the iphone dir? Are you guys checking the date modified on the "build" dir or soemthing?</li>
<li>Chris Barber 2012-03-15

    I confirmed, that os.makedirs() does indeed modify the dates of the build dir. But since we're dealing with the build/mobileweb directory, we do not touch the date of the build/iphone directory.</li>
<li>Max Stepanov 2012-03-15

    It might be TiStudio issue. Try uncheck in Preferences/Titanium Studio/"Auto-detect modifications to projects made outside of IDE"</li>
<li>Chris Barber 2012-03-15

    I can't seem to find that setting. Where exactly is it?</li>
<li>Max Stepanov 2012-03-15

    menu Titanium Studio/Preferences...; then Titanium Studio in the left tree. The option is at the bottom.</li>
<li>Chris Barber 2012-03-15

    Hmm, my preferences dialog looks different, see attached.</li>
<li>Max Stepanov 2012-03-15

    Ok, on development branch you use it was merged into Preferences:General/Workspace/Refresh automatically.</li>
<li>Chris Barber 2012-03-15

    Everything is unchecked. See attached.</li>
<li>Stephen Tramer 2012-03-16

    See TISTUD-1353 for the command that needs to be run during the iOS clean - this should be done regardless of the resolution to this issue since clearing out the PCH headers is part of the clean process.</li>
<li>Stephen Tramer 2012-03-16

    OK, I took another look at this to see where we're processing the guid; it is actually part of the rebuild process which might not be getting triggered correctly from just a clean. Going to take a look at that as well.</li>
<li>Max Stepanov 2012-03-16

    Stephen, also we may consider to define SHARED_PRECOMPS_DIR pointing to builder/iphone/somewhere folder in our build scripts.</li>
<li>Stephen Tramer 2012-03-16

    Assigning back to me; looks like Chase's clean script is in and if there are other GUID problems, I can fix them all at once.</li>
<li>Natalie Huynh 2012-03-19

    Closing per Chris as he is no longer encountering this issue on his machine</li>
<li>Davide Cassenti 2012-08-21

    This problem happens again if you perform these steps:
    
    1. Change the computer's date to a future date (even 1h later is ok)
    2. Perform a clean build of any project in Studio to iPhone Simulator
    3. Change back to the current date
    
    From now on, the build won't work anymore for that project and that SDK version, giving the error stated in the description:
    
    <code><pre>
    [ERROR] fatal error: file '/Users/username/Titanium/TestApp/build/iphone/TestApp_Prefix.pch' has been modified since the precompiled header was built
    </pre></code>
    
    I tried to clean the project from Studio and to delete the directory DerivedData, but none helps.</li>
</ol>


<p><a href="/TIMOB/TIMOB-8025.json">JSON Source</a></p>