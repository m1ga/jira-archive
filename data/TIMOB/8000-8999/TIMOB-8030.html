---
title: "[TIMOB-8030] iOS: Window's "open" event fires twice when animating or properties are set"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-07-09T02:21:08.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.0.2, Release 2.1.0, Sprint 2012-07, Release 1.8.3</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>api, module_window, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Varun Joshi</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2012-03-15T10:05:09.000+0000</td></tr>
<tr><th>Updated</th><td>2013-12-10T06:19:32.000+0000</td></tr>
</table>

<h3>Description</h3>

When properties or animations are set to the window as follows: (See the comments in the code below)

{noformat}

var appWin = Ti.UI.createWindow({
    width: '100%',
    height: '100%',
    backgroundColor: 'white'
});
var btn = Ti.UI.createButton({
    top: 0,
    left: 0,
    width: 100,
    height: 50,
    title: 'bug'
});
btn.addEventListener('click', demoBug);
appWin.add(btn);
appWin.open();

function demoBug() {
    var win = Ti.UI.createWindow({
        top: Ti.Platform.displayCaps.platformHeight,
        right: 0,
        bottom: -Ti.Platform.displayCaps.platformHeight,
        left: 0,
        backgroundColor: 'red',
    });

    var num = 0;
    win.addEventListener('open', function() {
        Ti.API.error('win:open:' + (++num));
        alert('open called');
    })

    // These 2 lines are the cause of the bug. Remove either one or both, the
    // bug doesn't manifest.
    win.top = 50;
    win.bottom = 50;
   // win.duration = 0;
   // win.open();
    win.open({
        top: 50,
        bottom: 50
        //duration: 0
     });
}

{noformat}




*ACTUAL BEHAVIOR*

The open gets fired twice (can be confirmed by the alert statement). If the properties are set just once (either inside the open function or separately), the open event gets fired just once.

*EXPECTED BEHAVIOR* 

Open should be fired just once.



<h3>Comments</h3>

<ol>
<li>Vishal Duggal 2012-03-22

   Pull pending #1798</li>
<li>Natalie Huynh 2012-05-10

   Tested with 2.0.2.v20120505151714 with iPhone 4 5.0.1</li>
<li>Neha Chhabra 2012-07-09

   Reopening to update labels.</li>
<li>Shameer Jan 2013-12-10

   Anvil testcase PR <a href="https://github.com/appcelerator/titanium_mobile/pull/4967" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4967</a>
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-8030.json">JSON Source</a></p>