---
title: "[TIMOB-8033] MobileWeb: WebView - The content of the property "html" is undefined after listening for the load event"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-03-19T22:46:47.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.0.0, Sprint 2012-06</td></tr>
<tr><th>Components</th><td>MobileWeb</td></tr>
<tr><th>Labels</th><td>qe-mw020912</td></tr>
<tr><th>Reporter</th><td>Michael Pettiford</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2012-03-15T11:00:48.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-03T23:59:09.000+0000</td></tr>
</table>

<h3>Description</h3>

Steps to reproduce

1. Create a default mobile web project and replace the code in app.js with the following
<code><pre>
var win = Titanium.UI.createWindow({
			title : 'test',
			backgroundColor : 'white'
		});
		var web = Ti.UI.createWebView({
		    url: '<a href="http://appc.me/test/Echo" rel="nofollow" target="_blank">http://appc.me/test/Echo</a>',
		    width: '90%', height: '90%', top: '5%', left: '5%'
		});
		win.add(web);
		
		web.addEventListener('load', function() {
		    // The server returns just 'GET', but iOS forces the web view to be well formed...
		    Ti.API.info(web.html);
		    // So we'll accept either a well formed HTML or the literal response from the server.
		    if (web.html == '&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;GET&lt;/body&gt;&lt;/html&gt;' || web.html == 'GET') {
		        _window.backgroundColor = '#0f0';
		        alert('PASS: I love you forever!');
		    }
		    // Otherwise... FAIL!
		    else {
		        _window.backgroundColor = '#f00';
		        alert('FAIL: web.html != expected html');
		    }
		});
win.open();
</pre></code>

2. Run the app

Actual result:
The content of html is undefinded

Expected result:
The content of html is GET

<h3>Comments</h3>

<ol>
<li>Bryan Hughes 2012-03-19

   Pull Request: <a href="https://github.com/appcelerator/titanium_mobile/pull/1751" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/1751</a>
   
   Note: this test will still fail with the new implementation for two reasons:
   
   1) unless the test app itself is running on appc.me, then the test will fail because the iframe is cross-domain
   2) Some browsers like to inject extra attributes and remove the <html> tags. For example, Safari returns "<head></head><body marginwidth="0" marginheight="0">GET</body>", not "<html><head></head><body>GET</body></html>"</li>
<li>Lee Morris 2017-03-03

   Closing ticket as MobileWeb is no longer supported.</li>
</ol>


<p><a href="/TIMOB/TIMOB-8033.json">JSON Source</a></p>