---
title: "[TIMOB-8224] Mobileweb: Ti.UI.Window.open event does not mean its views are ready"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-03-26T14:52:29.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.0.0, Sprint 2012-07</td></tr>
<tr><th>Components</th><td>MobileWeb</td></tr>
<tr><th>Labels</th><td>mw-list</td></tr>
<tr><th>Reporter</th><td>Tony Lukasavage</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2012-03-23T10:20:32.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-03T23:35:27.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>

Executing code against views in mobileweb from the view's containing window's <code>open</code> event does not ensure that the view has completely loaded. I would expect for mobileweb that the <code>Window.open</code> event would be much like jQuery's <code>ready</code>, meaning that you are free to start manipulating the elements contained within it. This is not the case.

<h4>Test Case</h4>

All of the properties of <code>view</code> in this test case will animate from zero. I assume this is because the view's properties are not fully loaded when the <code>window.open</code> event fires. The comments portion with the <code>setTimeout</code> call will execute as expected, albeit with a 2 second delay. 

<code><pre>
var win = Ti.UI.createWindow({
	backgroundColor: '#fff',
	fullscreen: false,
	exitOnClose: true
});

var view = Ti.UI.createView({
	backgroundColor: '#a00', 
	height: 100,
	width: 100,
	top: 500,
	left: 500
});
var anim = Ti.UI.createAnimation({
	duration: 5000,
	top: 10,
	left: 10
});

win.add(view);
win.addEventListener('open', function(e) {
	// All of the view's properties will animate from zero, not the 
	// values specified above in its creation
	view.animate(anim);
	
	// This code will work 
	// setTimeout(function() {
		// view.animate(anim);
	// }, 2000);
});

win.open();
</pre></code>

<h4>Proposed Solution</h4>

Have <code>Window.open</code> fire only when it and all of its child components have also loaded. This way developers can be assured that all necessary manipulations are safe in the <code>open</code> event.

<h3>Comments</h3>

<ol>
<li>Bryan Hughes 2012-03-24

   After some discussion, the behavior for the window.open event is actually correct, however animation need to deal with this situation. In short, the bug is in animation, not window.open.</li>
<li>Bryan Hughes 2012-03-24

   Pull Request: <a href="https://github.com/appcelerator/titanium_mobile/pull/1832" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/1832</a></li>
<li>Lee Morris 2017-03-03

   Closing ticket as MobileWeb is no longer supported.</li>
</ol>


<p><a href="/TIMOB/TIMOB-8224.json">JSON Source</a></p>