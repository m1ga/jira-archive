---
title: "[TIMOB-8246] iOS: CGcontext errors, while using any background property on label"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-07-09T03:37:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.2, Release 2.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.0, Sprint 2012-12 API</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>api, module_label, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Devang Gandhi</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2012-03-23T13:19:20.000+0000</td></tr>
<tr><th>Updated</th><td>2013-11-07T05:28:55.000+0000</td></tr>
</table>

<h3>Description</h3>

When any of the background property is applied on the label, we see CGcontext errors in the console.

source code:
<code><pre>var win1 = Titanium.UI.createWindow({  
    backgroundColor:'white'
});

var l2 = Titanium.UI.createLabel({
    text:'Appcelerator',
    backgroundColor:'red',
    backgroundImage:'flower.jpg',
    height:'auto',
    width:'auto',
    color:'#900',
    font:{fontSize:48},
    textAlign:'center'
});
win1.add(l2);
win1.open();
</pre></code>


Crash Log:
<code><pre>
GNU gdb 6.3.50-20050815 (Apple version gdb-1708) (Thu Nov  3 21:59:02 UTC 2011)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin".Attaching to process 10502.
[DEBUG] reading stylesheet from: /Users/dgandhi/Library/Application Support/iPhone Simulator/5.0/Applications/D35A6348-7A0B-4279-87CF-2F268969C6CD/videplayer.app/stylesheet.plist
[INFO] test/1.0 (2.0.0.v20120321121811.9b41dde)
[DEBUG] Analytics is enabled = YES
[DEBUG] loading: /Users/dgandhi/Library/Application Support/iPhone Simulator/5.0/Applications/D35A6348-7A0B-4279-87CF-2F268969C6CD/videplayer.app/app.js, resource: app_js
Mar 23 14:11:06 dgandhimbp test[10502] &lt;Error&gt;: CGContextConcatCTM: invalid context 0x0
Mar 23 14:11:06 dgandhimbp test[10502] &lt;Error&gt;: CGContextSetInterpolationQuality: invalid context 0x0
Mar 23 14:11:06 dgandhimbp test[10502] &lt;Error&gt;: CGContextDrawImage: invalid context 0x0
Mar 23 14:11:06 dgandhimbp test[10502] &lt;Error&gt;: CGBitmapContextCreateImage: invalid context 0x0
[DEBUG] application booted in 44.771016 ms
</pre></code>

<h3>Comments</h3>

<ol>
<li>Junaid Younus 2012-05-21

   Tested with 2.0.1GA2 on the iOS simulator (had to do this via Xcode), issue still reproducible.</li>
<li>Max Stepanov 2012-06-05

   PR merged <a href="https://github.com/appcelerator/titanium_mobile/pull/2319" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2319</a></li>
<li>Dustin Hyde 2012-06-23

   Closing as Fixed.
   
   SDK: 2.1.0.v20120622174154
   Studio: 2.1.0.201206221045
   OS: Lion 10.7.4
   Xcode: 4.3.2
   Devices Tested: iPod 4.3.3, iPad3 5.1.1
   
   Test Steps
   
   1. Run sample code above.
   2. Check console for errors of this type:
   
   <code><pre>
   Mar 23 14:11:06 dgandhimbp test[10502] &lt;Error&gt;: CGContextConcatCTM: invalid context 0x0
   Mar 23 14:11:06 dgandhimbp test[10502] &lt;Error&gt;: CGContextSetInterpolationQuality: invalid context 0x0
   Mar 23 14:11:06 dgandhimbp test[10502] &lt;Error&gt;: CGContextDrawImage: invalid context 0x0
   Mar 23 14:11:06 dgandhimbp test[10502] &lt;Error&gt;: CGBitmapContextCreateImage: invalid context 0x0
   </pre></code>
   
   Expected Result:
   
   No CGContext errors.</li>
<li>Neha Chhabra 2012-07-09

   Reopening to update labels.</li>
<li>Shameer Jan 2013-11-07

   Anvil testcase PR <a href="https://github.com/appcelerator/titanium_mobile/pull/4787" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/4787</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-8246.json">JSON Source</a></p>