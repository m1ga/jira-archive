---
title: "[TIMOB-8329] iOS: TiMediaVideoPlayerProxy is not properly removed as observer on MPMoviePlayerController when it' released. "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-04-02T15:12:21.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.0.2, Release 2.1.0, Sprint 2012-07, Release 1.8.3</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>core</td></tr>
<tr><th>Reporter</th><td>Max Stepanov</td></tr>
<tr><th>Assignee</th><td>Max Stepanov</td></tr>
<tr><th>Created</th><td>2012-03-27T11:16:22.000+0000</td></tr>
<tr><th>Updated</th><td>2012-05-29T20:14:32.000+0000</td></tr>
</table>

<h3>Description</h3>

<code><pre>
Mar 23 14:06:16 unknown XYZ[6174] &lt;Warning&gt;: An instance 0x1048eb50 of class MPAVPlaylistManager was deallocated while key value observers were still registered with it. Observation info was leaked, and may even become mistakenly attached to some other object. Set a breakpoint on NSKVODeallocateBreak to stop here in the debugger. Here's the current observation info:
	&lt;NSKeyValueObservationInfo 0x101a8090&gt; (
	&lt;NSKeyValueObservance 0x105b7ab0: Observer: 0x105aff30, Key path: currentItem, Options: &lt;New: YES, Old: YES, Prior: NO&gt; Context: 0x0, Property: 0x6767b0&gt;
	)
Mar 23 14:06:16 unknown ReportCrash[6347] &lt;Notice&gt;: Formulating crash report for process NBC[6174]
</pre></code>

<code><pre>
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib               	0x36214fc2 objc_msgSend + 22
1   Foundation                    	0x3177b75c NSKVOPendingNotificationCreate + 216
2   Foundation                    	0x3177b662 NSKeyValuePushPendingNotificationPerThread + 62
3   Foundation                    	0x3176d754 NSKeyValueWillChange + 408
4   Foundation                    	0x31744858 -[NSObject(NSKeyValueObserverNotification) willChangeValueForKey:] + 176
5   MediaPlayer                   	0x33090c36 -[MPQueuePlayer observeValueForKeyPath:ofObject:change:context:] + 282
6   Foundation                    	0x3176e148 NSKeyValueNotifyObserver + 252
7   Foundation                    	0x3176ddae NSKeyValueDidChange + 318
8   Foundation                    	0x317449a0 -[NSObject(NSKeyValueObserverNotification) didChangeValueForKey:] + 88
9   AVFoundation                  	0x367257a6 -[AVPlayer didChangeValueForKey:] + 38
10  MediaPlayer                   	0x33090f2e -[MPQueuePlayer commitPlaybackQueueTransaction] + 130
11  MediaPlayer                   	0x3306a73a __block_global_0 + 526
12  libdispatch.dylib             	0x36030d4e _dispatch_call_block_and_release + 6
13  libdispatch.dylib             	0x36032f74 _dispatch_main_queue_callback_4CF$VARIANT$mp + 188
14  CoreFoundation                	0x357722d6 __CFRunLoopRun + 1262
15  CoreFoundation                	0x356f54d6 CFRunLoopRunSpecific + 294
16  CoreFoundation                	0x356f539e CFRunLoopRunInMode + 98
17  GraphicsServices              	0x321dffe6 GSEventRunModal + 150
18  UIKit                         	0x37ab973c UIApplicationMain + 1084
19  XYZ                           	0x000797e4 0x77000 + 10212
20  XYZ                           	0x00079224 0x77000 + 8740
</pre></code>

<h3>Comments</h3>

<ol>
<li>Vishal Duggal 2012-04-02

   Merged on master. Waiting for 1_8_X PR before resolving this issue.</li>
<li>Max Stepanov 2012-04-02

   1_8_X PR <a href="https://github.com/appcelerator/titanium_mobile/pull/1897" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/1897</a></li>
<li>Vishal Duggal 2012-04-02

   Fixed on 1_8_X by PR #1897.</li>
</ol>


<p><a href="/TIMOB/TIMOB-8329.json">JSON Source</a></p>