---
title: "[TIMOB-8330] Android: Global variables causing memory leak on windows"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Reopened</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>Release 2.0.0, Release 1.8.2</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>n/a</td></tr>
<tr><th>Reporter</th><td>Hieu Pham</td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2012-03-27T11:26:27.000+0000</td></tr>
<tr><th>Updated</th><td>2018-03-06T18:57:53.000+0000</td></tr>
</table>

<h3>Description</h3>

Assigning window to a global variable causes that window to leak when closing via back button.
Steps to reproduce:
1. Run this code: 
<code><pre>
var mainwin = Ti.UI.createWindow({
    title:'TEST WINDOW',
    backgroundColor:'#fff',
    fullscreen:true,  
    statusBarHidden: true,
    navBarHidden:true, 
    exitOnClose:true
});

var MY_WINDOW = null;

var button1 = Ti.UI.createButton({
    top: 100,
    title: "create Window"
});

button1.addEventListener('click', function(e) {
 
    MY_WINDOW = createWin(); 
    MY_WINDOW.open();
    //createWin();
 
});

mainwin.add(button1);
mainwin.open();


function createWin() {
    var win = null;
    var v = [];
    win = Ti.UI.createWindow({
        fullscreen:'true',
        backgroundColor:'#fff'
    });
    
    for (var i=0; i < 600; i++) {
        var view1 = Ti.UI.createView();
        v.push(view1);
        win.add(view1);
    }
    return win;
    //win.open();
}


</pre></code>
2. Click on 'create Window' button.
3. Click back
4. Repeat and observe memory in DDMS

NOTE: if you don't assign global variable, then it won't leak. Try moving the open() call into createWin() function and don't return anything.


<h3>Comments</h3>

<ol>
<li>Hieu Pham 2012-03-30

   This issue is due to V8 GC lag. Closing as invalid.</li>
</ol>


<p><a href="/TIMOB/TIMOB-8330.json">JSON Source</a></p>