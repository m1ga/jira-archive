---
title: "[TIMOB-8346] iOS: "open" event fires multiple times at startup, plus whenever focused when using NavigationGroup"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-07-12T03:40:34.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 1.8.2</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.0, Sprint 2012-08</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>api, ios, module_navgroup, parity, qe-testadded, regression</td></tr>
<tr><th>Reporter</th><td>Shawn Lipscomb</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2012-02-09T13:46:29.000+0000</td></tr>
<tr><th>Updated</th><td>2013-11-27T12:15:07.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>
The "open" event of a window fires 3 times when first opened, then whenever the window re-receives focus (when navigating back to it using a NavigationGroup), the "open" event fires again.

<h4>Expected Result</h4>
The "open" event should only fire once...when it is first opened, period.  And it should not fire when the window re-receives focus.

<h4>Steps to Reproduce</h4>
<h4>drop the following app.js code into a new project</h4>
<h4>build with SDK 1.8.1</h4>
<h4>run in the iPhone simulator.  You will see:</h4>
<code><pre>
[INFO] One moment, building ...
[INFO] Titanium SDK version: 1.8.1 (01/27/12 17:31 a24502a)
[INFO] iPhone Device family: iphone
[INFO] iPhone SDK version: 5.0
[INFO] iPhone simulated device: iphone
[INFO] Launching application in Simulator
[INFO] Launched application in Simulator (3.78 seconds)
[INFO] Found 5.0 patch installed
[INFO] Application started
[INFO] NavGroupFocusTest/1.0 (1.8.1.a24502a)
[INFO] rootWin OPEN fired
[INFO] rootWin OPEN fired
[INFO] rootWin OPEN fired
</pre></code>
<h4>Say to yourself: "Why did OPEN fire 3 times?!?!?!?!?!"</h4>
<h4>click the "open new window" button and watch the console log.  You will see:</h4>
<code><pre>
[INFO] 2nd wind
</pre></code>
<h4>click the "back" button and watch the console log.  You will see:</h4>
<code><pre>
[INFO] rootWin FOCUSED
[INFO] rootWin OPEN fired
</pre></code>
<h4>Say to yourself: "Why did OPEN fire again?!?!?!?!?!"</h4>

Repeat steps 5, 6, and 7 and continue to get the same result until you're bored with this game.

<h4>Testcase</h4>
<code><pre>
var rootWin   = Ti.UI.createWindow();
rootWin.addEventListener('focus', function()
{
  Ti.API.info("rootWin FOCUSED");
});

rootWin.addEventListener('open', function()
{
  Ti.API.info("rootWin OPEN fired");
});

var btnOpenWin = Ti.UI.createButton({
  title : "open new window",
  width : 200,
  height  : 35
});

btnOpenWin.addEventListener('click', function()
{
  var win2 = Ti.UI.createWindow();
  ng.open(win2, {animated:true});
  Ti.API.info("2nd wind");
});

rootWin.add(btnOpenWin);

ng = Ti.UI.iPhone.createNavigationGroup({window:rootWin});
var NavBase = Ti.UI.createWindow();
NavBase.add(ng);
NavBase.open(); // this opens the "root" window, automatically
</pre></code>


In a larger project, sometimes when you go "back" to the main window, no events fire at all (no focus, no open).  I would expect the focus event to fire each time.  Just something to keep in mind while you're looking into the code, as I haven't been successful in reproducing this in a small testcase.


<h3>Comments</h3>

<ol>
<li>Shawn Lipscomb 2012-03-28

   </li>
<li>Junaid Younus 2012-03-28

   I can confirm that the issue related to step 6 still exists. I have moved this ticket to the appropriate section.</li>
<li>Vishal Duggal 2012-04-13

   Pull pending <a href="https://github.com/appcelerator/titanium_mobile/pull/2004" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2004</a></li>
<li>Shawn Lipscomb 2012-04-17

   Verified fixed in SDK 2.1.0.v20120416160358.  Thanks!
   </li>
<li>Michael Pettiford 2012-06-19

   Closing issue
   
   Tested with Ti Studio build 2.1.0.201206172244
   Ti Mobile SDK 2.1.0.v20120618154152 hash r7830c03d
   OSX Lion 10.7.3
   iPhone 4S OS 5.1
   
   The expected behavior is shown</li>
<li>Shyam Bhadauria 2012-07-12

   Re-opening to edit label</li>
<li>jithinpv 2013-11-27

   Anvil test case added.
   PR link:
   <a href="https://github.com/appcelerator/titanium_mobile/pull/5038" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5038</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-8346.json">JSON Source</a></p>