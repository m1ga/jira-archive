---
title: "[TIMOB-8430] Android: TimePicker - Switching between am and pm time does not makes changes in time format on the top of the page"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2017-05-19T20:01:33.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.0, Release 3.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 6.1.0</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>merge-6.1.0, qe-and031912</td></tr>
<tr><th>Reporter</th><td>Tamila Smolich</td></tr>
<tr><th>Assignee</th><td>Joshua Quick</td></tr>
<tr><th>Created</th><td>2012-03-29T16:15:55.000+0000</td></tr>
<tr><th>Updated</th><td>2017-05-19T20:57:18.000+0000</td></tr>
</table>

<h3>Description</h3>

Description:
Switching between am and pm time does not makes changes in time format on the top of the page. 
Also occurs on  Motorola Xoom 4.0.3, and on both devices on 1.8.2

Steps:
1. Run KitchenSink
2. Go to Controls-Picker-Time picker
3. Choose a time
4. Switch time format

Expected result:
Time in correct time format should be shown on the top of the page

Actual result:
Time format on the top of the page is incorrect


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-8430_26712/device-2012-03-29-164900.png">device-2012-03-29-164900.png</td></td><td>2012-03-29T16:15:55.000+0000</td><td>42329</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Justin Toth 2012-11-30

   I just ran into this bug too so will provide some additional information. 
   
   It doesn't happen on the Android emulator at all, it only happens on devices. 
   
   It works correctly if you change the AM/PM and then change the hours or minutes *after* before pressing OK, the AM/PM change only doesn't save if you change the AM/PM last and then press OK.
   
   Reproduced on:
   Samsung Galaxy SIII
   Samsung Galaxy Tab</li>
<li>Justin Toth 2012-11-30

   The picker's "change" event doesn't fire when the AM/PM is changed on an Android device, even though it fires when you change the hours or minutes. The getValue() doesn't update either when AM/PM is changed, so there is no workaround that I can see for this...</li>
<li>David Bankier 2013-01-30

   It is an android issue. See the following:
   <a href="http://code.google.com/p/android/issues/detail?id=18982" rel="nofollow" target="_blank">http://code.google.com/p/android/issues/detail?id=18982</a></li>
<li>Shameer Jan 2013-03-15

   The problem reproduces with release 3.0.2 and master release 3.1.0
   
   tested on
   
   Titanium Studio, build: 3.0.2.201302191606
   Titanium SDK version: 3.1.0 
   Titanium SDK version: 3.0.2 
   Device: Samsung galaxy s duos Android version: 4.0.4
   Android Emulator: Android SDK version: 2.2
   iOS iPhone Simulator: iOS SDK version: 6.0
   
   It works fine on IOS iphone simulator</li>
<li>Mike Stancliffe 2016-02-08

   This still seems to be a problem in 5.1.2, any updates on it?
   </li>
<li>Ashraf Abu 2016-02-10

   [~cliff_stander] Could you give the code that you are using? And also more information on the device and android version you are using that's facing this issue.</li>
<li>Kelly Corn 2016-02-11

   Using a Nexus 6, Android 6.0.1. Selecting AM when PM is default (or vice versa) does not trigger change event as it does on iOS. User must change the hour to trigger the change event.
   
   Sample code:
   
   <code><pre>
      var win1 = Titanium.UI.createWindow({
      backgroundColor:'#fff',
      layout: 'vertical'
   });
   
   var label1 = Titanium.UI.createLabel({
   	color:'#999',
   	text:'Set the time below',
   	font:{fontSize:20,fontFamily:'Helvetica Neue'},
   	textAlign:'center',
   	width:'auto',
   	top: '40'
   });
   
   var picker1 = Titanium.UI.createPicker({
   	type: Ti.UI.PICKER_TYPE_TIME,
   	top: '20'
   });
   
   picker1.addEventListener('change', function(e) {
   	label1.text = picker1.value;
   	Ti.API.info(picker1.value);
   });
   
   win1.add(label1);
   win1.add(picker1);
   
   win1.open();
   </pre></code>
   
   </li>
<li>Kiley Williams 2016-08-06

   What's the status on this? Sounds like the underlying Android issue may need to be worked around...</li>
<li>Farzad Merzadyan 2016-10-18

   In the meantime, use either nativeSpinner or useSpinner properties which comes without the AM/PM button.
   
   <code><pre>
   //usage example of nativeSpinner and useSpinner. 
   //only one property must be true otherwise nativeSpinner overpowers useSpinner property
   var timePicker = Titanium.UI.createPicker({
       type: Ti.UI.PICKER_TYPE_TIME,
       top: '20',
       nativeSpinner: true,
       useSpinner: false
   });
   </pre></code>
   </li>
<li>Frankie Merzadyan 2017-01-27

    master: <a href="https://github.com/appcelerator/titanium_mobile/pull/8799" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/8799</a>
    6_1_0: <a href="https://github.com/appcelerator/titanium_mobile/pull/9026" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/9026</a></li>
<li>Joshua Quick 2017-05-15

    *Note to QE:*
    I can only reproduce this issue if my "tiapp.xml" is set up to run the JavaScript engine on another thread (ie: not the main UI thread).
    
    <code><pre>
    &lt;ti:app xmlns:ti="<a href="http://ti.appcelerator.org" rel="nofollow" target="_blank">http://ti.appcelerator.org</a>"&gt;
        &lt;property name="run-on-main-thread" type="bool"&gt;false&lt;/property&gt;
    &lt;/ti:app&gt;
    </pre></code>
    </li>
<li>Lokesh Choudhary 2017-05-16

    [~jquick], I am running on the Main thread.
    
    <code><pre>&lt;property name="run-on-main-thread" type="bool"&gt;true&lt;/property&gt;</pre></code></li>
<li>Joshua Quick 2017-05-16

    [~lchoudhary],
    
    [~mchen] and [~fmerzadyan] have came up with a simpler solution to this bug (it's a 2 line fix). A new or updated PR will be coming soon.</li>
<li>Joshua Quick 2017-05-17

    The "master" and "6.1.0" PRs have been updated and reviewed.
    They're ready to be tested.</li>
<li>Lokesh Choudhary 2017-05-18

    FR Failed.
    
    On Android 5.1.1. & 6.0.1 the change event does not fire when I change From AM to PM & vice versa. But, if you change from e.g AM toPM, I have to tap on the hour or minute for the change event to fire.</li>
<li>Lokesh Choudhary 2017-05-19

    Backport PR merged.</li>
<li>Lokesh Choudhary 2017-05-19

    Verified the fix.
    
    Switching between am and pm fires the change event successfully every time.
    Closing.
    
    Studio Ver:     4.9.0.201705170123
    SDK Ver:        6.1.0.v20170519130656
    OS Ver:         10.12.3
    Xcode Ver:      Xcode 8.3.2
    Appc NPM:       4.2.9
    Appc CLI:       6.2.1
    Ti CLI Ver:     5.0.13
    Alloy Ver:      1.9.11
    Node Ver:       6.10.1
    Java Ver:       1.8.0_101
    Devices:        ⇨ google Nexus 6 --- Android 6.0.1
                    ⇨ google Pixel XL --- Android 7.1.1
    
    
    </li>
</ol>


<p><a href="/TIMOB/TIMOB-8430.json">JSON Source</a></p>