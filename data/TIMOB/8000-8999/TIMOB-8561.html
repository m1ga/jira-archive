---
title: "[TIMOB-8561] Android:  add permissions for map when map module is used"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-07-09T03:41:00.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.0, Sprint 2012-12 Core</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>core, module_map, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Opie Cyrus</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2012-04-05T20:01:58.000+0000</td></tr>
<tr><th>Updated</th><td>2014-09-09T21:10:12.000+0000</td></tr>
</table>

<h3>Description</h3>

When Ti.Map module is used, permissions are not automatically inserted into the generated manifest.

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2012-06-11

   <h4>Fail Case / Test Case</h4>
   
   * Create a new android app in Titanium Studio.
   
   * Add this to the tiapp.xml:
   
   <code><pre>
   <property name="ti.android.google.map.api.key.development">0ZnKXkWA2dIAu2EM-OV4ZD2lJY3sEWE5TSgjJNg</property>
   </pre></code>
   
   * Make this the app.js:
   
   <code><pre>
   Titanium.UI.setBackgroundColor('#000');
   var win = Titanium.UI.createWindow({  
       title:'Test',
       backgroundColor:'#000',
   	exitOnClose: true
   });
   
   win.add(Ti.Map.createView({
   	userLocation:true
   }));
   
   win.open();
   </pre></code>
   
   * Run the app _on device_ so that location services will actually work.  But don't package for production, unless you want to change that tiapp.xml entry above to point to your own Google Maps API key.
   
   * In the fail case, when the app opens and the map appears, you won't see your location marked anywhere on the world map, although <code>userLocation: true</code> was set as a creation argument for the View.  Also in logcat you'll see these warnings:
   
   <code><pre>
   W/Maps.MyLocationOverlay( 1322): Couldn't get provider gps: Provider gps requires ACCESS_FINE_LOCATION permission
   W/Maps.MyLocationOverlay( 1322): Couldn't get provider network: Provider network requires ACCESS_FINE_LOCATION or ACCESS_COARSE_LOCATION permission
   </pre></code>
   
   * When testing the fix, you *should* see your location on the world map, and you should *not* see those warnings in logcat.
   </li>
<li>Bill Dawson 2012-06-11

   Pull request ready
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/2370" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2370</a></li>
<li>Tamila Smolich 2012-06-23

   Closing as fixed. Verified with:
   Titanium Studio, build: 2.1.0.201206221045
   Titanium SDK: 2.1.0.v20120622174154
   Device: Samsung Galaxy tab (3.2)</li>
<li>Anshu Mittal 2012-07-09

   Reopening to update labels</li>
</ol>


<p><a href="/TIMOB/TIMOB-8561.json">JSON Source</a></p>