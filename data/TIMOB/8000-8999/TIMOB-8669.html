---
title: "[TIMOB-8669] Android: ImageView triggers error event only once"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Cannot Reproduce</td></tr>
<tr><th>Resolution Date</th><td>2013-04-02T11:24:17.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.0.2</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>api, parity</td></tr>
<tr><th>Reporter</th><td>Markus Krug</td></tr>
<tr><th>Assignee</th><td>Shameer Jan</td></tr>
<tr><th>Created</th><td>2012-04-10T13:06:35.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-21T22:04:47.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>

On Android, the error event is only triggered once if an image is not accessible. On iOS, it triggers the error event each time. Which is better in my opinion.

<h4>Test case</h4>
<code><pre>
var win = Ti.UI.createWindow({backgroundColor: 'white'});
win.open();
 
function createImageView (params) {
    var imageView = Ti.UI.createImageView(params);
 
    imageView.addEventListener('load', function (event) {
        Ti.API.info('load event');
    });
 
    imageView.addEventListener('error', function (event) {
        Ti.API.info('error event');
    });
 
    return imageView;
}
 
Ti.API.info('loading first image');
win.add(createImageView({image: '<a href="https://invalid.url/doesnotexist.png" rel="nofollow" target="_blank">https://invalid.url/doesnotexist.png</a>', width: 200, height: 100, top: 50}));
 
setTimeout(function () {
    Ti.API.info('loading second image');
 
    win.add(createImageView({image: '<a href="https://invalid.url/doesnotexist.png" rel="nofollow" target="_blank">https://invalid.url/doesnotexist.png</a>', width: 200, height: 100, top: 150}));
}, 2000);
</pre></code> 

When executing this code, you'll notice that the <code>error event</code> is just displayed once in error log. The <code>load event</code> is never triggered. On iOS the <code>error event</code> is triggered twice.
This is especially inappropriate if the image is not available for just a short time. On the next app start the <code>error event</code> is also not triggered since it is cached. It should try to reload the image.

<h4>Community Discussion </h4>
Q&A [Android Parity: ImageView triggers error event only once](<a href="http://developer.appcelerator.com/question/135037/android-parity-imageview-triggers-error-event-only-once)" rel="nofollow" target="_blank">http://developer.appcelerator.com/question/135037/android-parity-imageview-triggers-error-event-only-once)</a>

I've also explained why I need the error event.

<h4>Log</h4>
<code><pre>
D/TiAssetHelper(  410): Fetching "app.js" with Fastdev...
I/TiAPI   (  410): loading first image
D/dalvikvm(  410): GC_EXTERNAL_ALLOC freed 537K, 53% free 2895K/6087K, external 1967K/2137K, paused 159ms
I/TiRootActivity(  410): (main) [0,0] checkpoint, on root activity resume. activity = de.test.mobile.TestMobileActivity@405a4498
D/dalvikvm(  410): GREF has increased to 201
E/TiDownloadManager(  410): (pool-3-thread-1) [31,31] Exception downloading <a href="https://invalid.url/doesnotexist1.png" rel="nofollow" target="_blank">https://invalid.url/doesnotexist1.png</a>
E/TiDownloadManager(  410): java.net.ConnectException: invalid.url/62.157.140.133:443 - Connection refused
E/TiDownloadManager(  410): 	at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:207)
E/TiDownloadManager(  410): 	at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:437)
E/TiDownloadManager(  410): 	at java.net.Socket.connect(Socket.java:983)
E/TiDownloadManager(  410): 	at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.&lt;init&gt;(HttpConnection.java:74)
E/TiDownloadManager(  410): 	at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.&lt;init&gt;(HttpConnection.java:48)
E/TiDownloadManager(  410): 	at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:298)
E/TiDownloadManager(  410): 	at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
E/TiDownloadManager(  410): 	at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:285)
E/TiDownloadManager(  410): 	at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:267)
E/TiDownloadManager(  410): 	at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:381)
E/TiDownloadManager(  410): 	at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl$HttpsEngine.makeConnection(HttpsURLConnectionImpl.java:369)
E/TiDownloadManager(  410): 	at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1018)
E/TiDownloadManager(  410): 	at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:510)
E/TiDownloadManager(  410): 	at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:247)
E/TiDownloadManager(  410): 	at java.net.URL.openStream(URL.java:645)
E/TiDownloadManager(  410): 	at org.appcelerator.titanium.util.TiDownloadManager$DownloadJob.run(TiDownloadManager.java:157)
E/TiDownloadManager(  410): 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
E/TiDownloadManager(  410): 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
E/TiDownloadManager(  410): 	at java.lang.Thread.run(Thread.java:1019)
I/TiAPI   (  410): error event
I/TiAPI   (  410): loading second image
D/dalvikvm(  136): GC_EXPLICIT freed 50K, 51% free 2971K/5959K, external 4969K/5664K, paused 51ms
I/InputReader(   62): Device reconfigured: id=0x0, name=qwerty2, display size is now 480x854
I/InputManager-Callbacks(   62): No virtual keys found for device qwerty2.
</pre></code>

<h3>Comments</h3>

<ol>
<li>Shameer Jan 2013-04-02

   Issue does not reproduces 
   
   
   Tested with
   
   Titanium Studio, build: 3.2.0.201212181159
   Titanium SDK version: 3.1.0 
   Titanium SDK version: 3.0.2 
   iOS iPhone Simulator: iOS SDK version: 6.0
   </li>
<li>Lee Morris 2017-03-21

   Closing ticket as the issue cannot be reproduced and due to the above comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-8669.json">JSON Source</a></p>