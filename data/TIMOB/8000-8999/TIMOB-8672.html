---
title: "[TIMOB-8672] Android: Compass True Heading - Magnetic declination seem to be added in the opposite direction"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-06-15T17:16:53.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.0, Sprint 2012-12 Core</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>core, geolocation, qe-port</td></tr>
<tr><th>Reporter</th><td>Yuzhi Zheng</td></tr>
<tr><th>Assignee</th><td>Arthur Evans</td></tr>
<tr><th>Created</th><td>2012-01-23T10:24:04.000+0000</td></tr>
<tr><th>Updated</th><td>2013-01-17T15:59:30.000+0000</td></tr>
</table>

<h3>Description</h3>

For a location like Boston, MA, the magnetic declination should be about -15.
iPhone handles this correctly by subtracting 15 from the magnetic heading, giving me a true heading that is more accurate than the magnetic heading.
On the other hand on both the Droid and HTC incredible I tested, the true heading actually ADDS 15 to the magnetic heading, making the true heading about 30 degrees off in the Boston area and making it more inaccurate than the magnetic heading.


<h3>Comments</h3>

<ol>
<li>Eduardo Gomez 2012-04-10

   @Yuzhi Zheng Can you provide info about the environment? i.e. Titanium SDK, Android OS, device specs, reproduction steps and code.
   
   That will help to narrow down the issue and fix potential bugs quicker.</li>
<li>Yuzhi Zheng 2012-04-10

   Titanium Studio, build: 1.0.7.201112281340
   Android OS both 2.2 and 2.3
   
   Droid running 2.2 and HTC incredible running 2.3
   
   Using Kitchen Sink to show both magnetic heading and true heading should be enough to show the problem.
   
   Any other information I should provide?
   </li>
<li>Eduardo Gomez 2012-04-10

   - Titanium SDK i.e. 1.8.2, 2.0, 
   - Reproduction steps i.e. Goto KS demos / Phone Tab / Geolocation, Views / Map Views
   </li>
<li>Arthur Evans 2012-06-12

   See test code for TIMOB-9434. 
   
   Without fix, run app. Press "Get Heading" button to ensure that a true heading is available.
   Note the difference between the true heading and the magnetic heading. 
   
   Use the NOAA website to determine the appropriate declination correction for your area:
   
   <a href="http://www.ngdc.noaa.gov/geomag-web/#declination" rel="nofollow" target="_blank">http://www.ngdc.noaa.gov/geomag-web/#declination</a>
   
   (Hint: for Mountain View, the correction is approximately +14 degrees.) 
   
   Compare this to the true heading on the device, and note that the correction is applied in reverse. That is, if the appropriate correction is 14 degrees, the true heading is showing 14 degrees *less* than the magnetic heading instead of 14 degrees more.
   
   With the fix, run the app. Note that the correction goes in the expected direction.
   
   For extra credit, or if you're a bit shaky on your map and compass skills, run the app on iOS, and note that the difference between the magnetic and true headings more or less matches the Android app post-fix. (The compass headings themselves may differ between the devices, but the difference between the two readings should be about the same--that is, a magnetic heading of 346 should correspond to a true heading of around 0, assuming you're in Mountain View in June of 2012.)
   
   
   </li>
<li>Arthur Evans 2012-06-12

   Addressed in PR:
   <a href="https://github.com/appcelerator/titanium_mobile/pull/2373" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2373</a></li>
<li>Olga Romero 2013-01-17

   Closing as fixed/ used Sample code from TIMOB-9434.
   Tested with:
   Titanium Studio, build: 3.0.1.201212181159
   Titanium SDK, build: 3.0.0.GA 
   Device:
   HTC-EVO 4.0.3
   
   Note: KS is not really helpful to test this issue. Refer to TIMOB-12325</li>
</ol>


<p><a href="/TIMOB/TIMOB-8672.json">JSON Source</a></p>