---
title: "[TIMOB-8678] iOS: Webcolor colorForHex returns incorrect values for some strings "
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-04-19T15:38:55.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.0, Sprint 2012-08</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>api, module_window, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Arthur Evans</td></tr>
<tr><th>Assignee</th><td>Blain Hamon</td></tr>
<tr><th>Created</th><td>2012-04-11T10:23:36.000+0000</td></tr>
<tr><th>Updated</th><td>2012-07-13T14:53:18.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Problem</h4>

The logic in colorForHex is incorrect for some color values, specifically color values starting with '#'. This is not notable for colors specified by users, because the hash mark is stripped out before the value is passed to colorForHex. However, the values listed internally, 'aqua', 'fuchsia', 'lime' and 'maroon' are improperly returned as transparent.

colorForHex should simply strip the '#' character before interpreting the color values, which would simplify the logic.

<h4>Test case</h4>

<code><pre>
// According to the following test case:
// Android does not currently support: brown. The color yellow is used when a name is not recognised.
// iOS does not currently support: aqua, fuchsia, lime and maroon.  The color black is used when a name is not recognised.

// stripped for tableview background color still to be tested

var webcolor = [
  'black', 'gray', 'darkgray', 'lightgray', 'white', 'red', 'green', 'blue', 'cyan', 'yellow',
  'magenta', 'orange', 'purple', 'brown', 'transparent',
  'aqua', 'fuchsia', 'lime', 'maroon', 'pink', 'navy', 'silver', 'olive', 'teal'];

var webcolorPointer = 0;

var win = Ti.UI.createWindow({
  backgroundColor: webcolor[webcolorPointer],
  exitOnClose: true,
  fullscreen: false,
  layout: 'vertical',
  title: 'Webcolor Demo'
});

var label = Ti.UI.createLabel({
  backgroundColor: 'white',
  text: webcolor[webcolorPointer]
});
webcolorPointer++;

win.add(label);

// click window to iterate through color array
win.addEventListener('click', function(e){
  e.source.backgroundColor = webcolor[webcolorPointer];
  label.text = webcolor[webcolorPointer];
  webcolorPointer++;
  if(webcolorPointer === webcolor.length){
    webcolorPointer = 0;
  }
});

win.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Blain Hamon 2012-04-18

   Pull request pending.</li>
<li>Max Stepanov 2012-04-19

   PR merged <a href="https://github.com/appcelerator/titanium_mobile/pull/2033" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2033</a></li>
<li>Eric Merriman  2012-06-18

   Verified fixed with SDK 2.1.0.v20120618102300 on iPod 4th Gen
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-8678.json">JSON Source</a></p>