---
title: "[TIMOB-8732] Android: Custom JavaScript objects sent in events to a WebView throw errors"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Duplicate</td></tr>
<tr><th>Resolution Date</th><td>2012-05-15T11:50:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.0, Release 1.8.2</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>api</td></tr>
<tr><th>Reporter</th><td>Devang Gandhi</td></tr>
<tr><th>Assignee</th><td>Josh Roesslein</td></tr>
<tr><th>Created</th><td>2012-04-13T17:47:43.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-10T19:14:07.000+0000</td></tr>
</table>

<h3>Description</h3>

When JavaScript objects are accessed from webview, ljava.lang.object error is thrown. Javascript objects are defined in a js file, which is then passed to html page using fireevent. The values are retrieved correctly in iOS.

snippet of JS file:
<code><pre>var win = Ti.UI.currentWindow;

var activity_obj = {
	screen_name: [],
	idea_title : []
};

activity_obj.screen_name[0] = 'bhushan';
activity_obj.screen_name[1] = 'bhaskar';
activity_obj.screen_name[2] = 'deore';

activity_obj.idea_title[0] = 'android';
activity_obj.idea_title[1] = 'iphone';
activity_obj.idea_title[2] = 'app';

var webView = Ti.UI.createWebView({
	url:'webview_logging.html',
	height:400

});
win.add(webView);

webView.addEventListener('load', function(e) {
		Ti.App.fireEvent('data', activity_obj);	
});

</pre></code>

Snippet of html file:
<code><pre><html>
	<head>
		<title>Webview Logging</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

		<script>
			function show_content(e) {
				//alert('in event');
				for (var prop in e) {
					if (e.hasOwnProperty(prop)) {
						var obj_01 = e[prop];
						Ti.API.info("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=");
						Ti.API.info(JSON.stringify(obj_01));
						
					}
				}
			}
			Ti.App.addEventListener('data', show_content);
		</script>
	</head>
	<body>
		<div id = 'add_content'>
			ド標準第5版の刊行を大いに
		</div>
		
	</body>
</html></pre></code>

Also attached crash log, and other js files, as a complete project.

Steps to reproduce: Below are attached app.js and other files. Create a new project in titanium.create source folder under resources, and place all files excluding app.js. replace app.js with attached app.js. 

Run the project, and see the console.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-8732_27049/app.js">app.js</td></td><td>2012-04-13T17:47:44.000+0000</td><td>421</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-8732_27044/log.txt">log.txt</td></td><td>2012-04-13T17:47:43.000+0000</td><td>47676</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-8732_27045/webview_logging.html">webview_logging.html</td></td><td>2012-04-13T17:47:43.000+0000</td><td>602</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-8732_27046/webview_repaint.js">webview_repaint.js</td></td><td>2012-04-13T17:47:43.000+0000</td><td>526</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-8732_27047/webview.js">webview.js</td></td><td>2012-04-13T17:47:43.000+0000</td><td>1005</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-8732_27048/xml2json.js">xml2json.js</td></td><td>2012-04-13T17:47:44.000+0000</td><td>889</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Josh Roesslein 2012-05-15

   This looks to be a duplicate of TIMOB-8308. Ran test case on latest master (2.1) CI and works fine.
   </li>
<li>Lee Morris 2017-03-10

   Closing ticket as duplicate.</li>
</ol>


<p><a href="/TIMOB/TIMOB-8732.json">JSON Source</a></p>