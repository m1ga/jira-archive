---
title: "[TIMOB-8889] Android: android:back event does not get fired from activity indicator"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2012-06-18T18:16:45.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.0</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>api</td></tr>
<tr><th>Reporter</th><td>Allen Yeung</td></tr>
<tr><th>Assignee</th><td>Josh Roesslein</td></tr>
<tr><th>Created</th><td>2012-04-25T15:06:57.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-24T18:10:54.000+0000</td></tr>
</table>

<h3>Description</h3>

Repro steps:

1. Run the code below
2. hit back while the activity indicator is running

Expected result:
You should see 'back!!!!!!!' in the logs

Actual result:
The event is never fired.


Note, I tried adding the listener to the win1, win2, and activityIndicator with the same results.
<code><pre>
Ti.UI.backgroundColor = 'white';

var win1 = Ti.UI.createWindow({
  backgroundColor: 'blue'
});

var win2 = Ti.UI.createWindow({
  backgroundColor: 'yellow',
  fullscreen: true
});

var activityIndicator = Ti.UI.createActivityIndicator({
  color: 'green',
  font: {fontFamily:'Helvetica Neue', fontSize:26, fontWeight:'bold'},
  message: 'Loading...',
  style:Ti.UI.iPhone.ActivityIndicatorStyle.DARK,
  top:10,
  left:10,
  height:'auto',
  width:'auto'
});

// On iOS, the activity indicator must be added to a window or view for it to appear
if (Ti.Platform.name === 'iPhone OS'){
  win2.add(activityIndicator);
}

// eventListeners must always be loaded before the event is likely to fire
// hence, the open() method must be positioned before the window is opened
win2.addEventListener('open', function (e) {
  activityIndicator.show();
  // do some work that takes 6 seconds
  // ie. replace the following setTimeout block with your code
  setTimeout(function(){
    win2.close();
    activityIndicator.hide();
  }, 6000);
});

activityIndicator.addEventListener('android:back', function(){
	Ti.API.info('back!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!');
});

win1.open();
win2.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Josh Roesslein 2012-04-30

   Proposed solution:
   
   Expose a "cancel" event on the ActivityIndicator proxy.
   For Android this will be fired when the back button is pressed.
   Indicator dialog will be hidden before the event is fired.
   This is only enabled when the property "cancelable" is true (false by default).
   
   Bonus:
     Android also supports cancelling via a touch outside the dialog.
     Could expose this as another property (ex: cancelOnTouch).
   
   Example:
   
   <code><pre>
   var indicator = Ti.UI.createActivityIndicator({
     message: "Processing...",
     cancelable: true
   });
   
   indicator.addEventListener('cancel', function() {
     // abort the processing here.
   });
   </pre></code>
   
   Would this satisfy your use case and solve the issue?</li>
<li>Josh Roesslein 2012-04-30

   Looks like this will only be an Android API since iOS and Mobile Web don't use modal dialogs
   for the activity indicator.</li>
<li>Vishal Duggal 2012-05-04

   Resolved by PR #2118</li>
<li>Eric Cheng 2012-05-09

   The customer is on 1.8.2.  Can the fix be backported to support 1.8.2.  Customer delivery date is 5/11.</li>
<li>Neeraj Gupta 2012-05-09

   @Eric - We are not porting new features back to older releases. This issue was resolved by implementing a new feature so we cannot put it in 1.8.X branch.</li>
<li>Eric Merriman  2012-06-18

   This still occurs with SDK 2.1.0.v20120618102300 on a Droid running 2.2.3.</li>
<li>Josh Roesslein 2012-06-18

   </li>
<li>Josh Roesslein 2012-06-18

   We won't fix the unsupported/undocumented behavior this test case describes here. Instead we implemented the API/feature in TIMOB-8954 to satisfy the customer's use case.</li>
<li>Lee Morris 2017-03-24

   Closing ticket as invalid with reference to the above comments.</li>
</ol>


<p><a href="/TIMOB/TIMOB-8889.json">JSON Source</a></p>