---
title: "[TIMOB-9080] iOS: send navigationType when beforeload event is fired in iOS webview"
---
<table>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-05-11T10:38:50.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.0, Sprint 2012-10 API</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>community, core, module_webview, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Tommy Leung</td></tr>
<tr><th>Assignee</th><td>Max Stepanov</td></tr>
<tr><th>Created</th><td>2012-05-03T10:39:37.000+0000</td></tr>
<tr><th>Updated</th><td>2013-11-25T08:51:46.000+0000</td></tr>
</table>

<h3>Description</h3>

Implement UIWebViewNavigationType such that the beforeload event will include this in its parameters

<a href="http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html" rel="nofollow" target="_blank">http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html</a>

Test case:

<code><pre>
var win1 = Titanium.UI.createWindow({  
    navBarHidden:false
});

var webview1 = Ti.UI.createWebView({
  url: '<a href="http://www.gmail.com" rel="nofollow" target="_blank">http://www.gmail.com</a>'
});

webview1.addEventListener('beforeload', function(e){
    var navigationType = e.navigationType;

    if(Ti.UI.iOS.WEBVIEW_NAVIGATIONTYPE_LINK_CLICKED == navigationType){
      Ti.API.info("WEBVIEW_NAVIGATIONTYPE_LINK_CLICKED");
    } else if (Ti.UI.iOS.WEBVIEW_NAVIGATIONTYPE_FORM_SUBMITTED == navigationType){
      Ti.API.info("WEBVIEW_NAVIGATIONTYPE_FORM_SUBMITTED");
    } else if (Ti.UI.iOS.WEBVIEW_NAVIGATIONTYPE_BACK_FORWARD == navigationType){
      Ti.API.info("WEBVIEW_NAVIGATIONTYPE_BACK_FORWARD");
    } else if (Ti.UI.iOS.WEBVIEW_NAVIGATIONTYPE_RELOAD == navigationType){
      Ti.API.info("WEBVIEW_NAVIGATIONTYPE_RELOAD");
    } else if (Ti.UI.iOS.WEBVIEW_NAVIGATIONTYPE_FORM_RESUBMITTED == navigationType){
      Ti.API.info("WEBVIEW_NAVIGATIONTYPE_FORM_RESUBMITTED");
    } else if (Ti.UI.iOS.WEBVIEW_NAVIGATIONTYPE_OTHER == navigationType){
      Ti.API.info("WEBVIEW_NAVIGATIONTYPE_OTHER");
    }
});

var bb2 = Titanium.UI.createButtonBar({
  labels:['Back', 'Reload', 'Forward'],
  bottom: 0
});
var flexSpace = Titanium.UI.createButton({
  systemButton:Titanium.UI.iPhone.SystemButton.FLEXIBLE_SPACE
});
bb2.addEventListener('click',function(ce){
  if (ce.index == 0) { webview1.goBack(); }
  else if (ce.index == 1) { webview1.reload(); }
  else { webview1.goForward(); }
});

win1.add(webview1);
win1.add(bb2);

win1.open();
</pre></code>


<h3>Comments</h3>

<ol>
<li>Tommy Leung 2012-05-03

   Pull request <a href="https://github.com/appcelerator/titanium_mobile/pull/1902" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/1902</a></li>
<li>Max Stepanov 2012-05-11

   PR merged <a href="https://github.com/appcelerator/titanium_mobile/pull/1902" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/1902</a></li>
<li>Michael Pettiford 2012-06-12

   Closing issue
   
   Tested with Ti Studio build 2.1.0.201206111802
   Ti Mobile SDK 2.1.0.v20120612102301 hash refeef019
   OSX Lion 10.7.3
   iPhone 4S OS 5.1
   
   Verified that the navigation type is sent to the before load event</li>
<li>jithinpv 2013-11-25

   Anvil test case added.
   PR link:
   <a href="https://github.com/appcelerator/titanium_mobile/pull/5020" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/5020</a></li>
</ol>


<p><a href="/TIMOB/TIMOB-9080.json">JSON Source</a></p>