---
title: "[TIMOB-9090] iOS: Timing out waiting on main thread causing rejections"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-07-10T23:40:06.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.0, Sprint 2012-11 Core</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>core, module_package, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Eduardo Gomez</td></tr>
<tr><th>Assignee</th><td>Stephen Tramer</td></tr>
<tr><th>Created</th><td>2012-05-09T22:10:06.000+0000</td></tr>
<tr><th>Updated</th><td>2013-10-09T23:48:09.000+0000</td></tr>
</table>

<h3>Description</h3>



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-9090_27630/FirstRun_iOS5_2.0.1.GA2.jpg">FirstRun_iOS5_2.0.1.GA2.jpg</td></td><td>2012-05-10T08:52:42.000+0000</td><td>43310</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-9090_27631/SecondRun_iOS5_2.0.1.GA2.jpg">SecondRun_iOS5_2.0.1.GA2.jpg</td></td><td>2012-05-10T08:52:42.000+0000</td><td>24402</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-9090_27629/test.zip">test.zip</td></td><td>2012-05-10T08:52:42.000+0000</td><td>2383305</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2012-05-09

   We require a full reproduction case to address this ticket. The warning is being taken care of as part of TIMOB-9002.</li>
<li>Eduardo Gomez 2012-05-10

   Uploading developer resources to reproduce.
   
   <h4>test.zip</h4>
   UnZip test project into Studio
   
   <h4>FirstRun_iOS5_2.0.1.GA2.jpg</h4>
   Warning might appear at the first run
   
   <h4>SecondRun_iOS5_2.0.1.GA2.jpg</h4>
   Warning doesn't appear when running by second time
   
   <h4>Brief summary</h4>
   If developer deletes app from simulator and run it again the warn will appear again.
   
   I've been trying to reproduce it locally but I can't see such warning message yet.
   
   <h4>My console output</h4>
   {noformat}
   [INFO] One moment, building ...
   [INFO] Titanium SDK version: 2.0.1 (04/12/12 16:33 999c68a)
   [INFO] iPhone Device family: iphone
   [INFO] iPhone SDK version: 5.0
   [INFO] iPhone simulated device: iphone
   [INFO] Launching application in Simulator
   [INFO] Launched application in Simulator (3.78 seconds)
   [INFO] Application started
   [INFO] test/1.0 (2.0.1.GA2.999c68a)
   {noformat}</li>
<li>Eduardo Gomez 2012-05-11

   I just bumped with this issue again having set the following settings:
   
   <h4>Console output:</h4>
   <code><pre>
   [INFO] One moment, building ...
   [INFO] Titanium SDK version: 2.0.1 (04/12/12 16:33 999c68a)
   [INFO] iPhone Device family: iphone
   [INFO] iPhone SDK version: 4.3
   [INFO] iPhone simulated device: iphone
   [INFO] Launching application in Simulator
   [INFO] Launched application in Simulator (3.86 seconds)
   [INFO] Application started
   [INFO] test/1.0 (2.0.1.GA2.999c68a)
   [WARN] Timing out waiting on main thread. Possibly a deadlock?  in TiThreadPerformOnMainThread (TiBase.m:238)
   </pre></code>
   
   <h4>app.js</h4>
   <code><pre>
   var win = Titanium.UI.createWindow();
   
   var win1 = Titanium.UI.createWindow({
       backgroundColor:"red",
       title:"Red Window"
   });
   win1.addEventListener('click', function(){
       nav.open(toolsWindow);
   });
   
   var nav = Titanium.UI.iPhone.createNavigationGroup({
      window: win1
   });
   
   var toolsWindow = Ti.UI.createWindow({
       title: 'Blue Window',
       url: 'tools_window.js',
       nav: nav,
       exitOnClose: false,
       backgroundColor: 'blue'
   });
   
   win.add(nav);
   win.open();
   </pre></code>
   
   <h4>tools_window.js</h4>
   <code><pre>
   var win = Ti.UI.currentWindow;
   
   var button = Ti.UI.createButton({
       title: 'close',
       height: 40,
       width: 300
   });
   button.addEventListener('click', function(e) {
       Ti.API.info('clicked close');
       win.nav.close(win);
   });
   
   win.add(button);
   </pre></code>
   
   Having launch the emulator and close it then warning did not appear over again.</li>
<li>Blain Hamon 2012-05-15

   Ironically enough, this looks like a case where the warning was completely correct and valid. That is, *something* caused an infinite loop or deadlock with the main thread, (May or may not be related to the perform on main thread) and the perform on main thread code is saying the formal equivalent of "Hey guys, the main thread hasn't processed my request in over a full second (A long amount of time). Is there a deadlock or something going on?"</li>
<li>Pedro Enrique 2012-05-18

   To reproduce:
   
   Build the app (I can provide the source code) for distribution, as if it were going to the AppStore. Get the .ipa and drag and drop to iTunes. Then open the app. It will not pass the splash screen.</li>
<li>Stephen Tramer 2012-05-22

   Customer indicated this was a module location problem - they were including the module but it apparently was not found, and the build did *not* fail gracefully.</li>
<li>Stephen Tramer 2012-05-22

   <h4>TESTING</h4>
   ----
   
   <h4>Create a new app in TiStudio</h4>
   <h4>Add a module to the project in the tiapp.xml which does not exist such as <code>&lt;module version="1.0"&gt;not.there&lt;/module&gt;</code></h4>
   <h4>Run a build for simulator, device, packaging</h4>
   
   *PASS:* The build fails
   *FAIL:* Any other result</li>
<li>Max Stepanov 2012-05-24

   PR merged <a href="https://github.com/appcelerator/titanium_mobile/pull/2247" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2247</a></li>
<li>Mukesh Gadiya 2012-06-23

   SDK: 2.1.0.v20120622174154
   iOS sim : 5.1
   iphone 4s Verizon
   Verified that:
   
   1. Create a new app in TiStudio
   2. Add a module to the project in the tiapp.xml which does not exist such as <module version="1.0">not.there</module>
   3. Run a build for iOS simulator, iOS device
   4. The build fails
   </li>
<li>Mukesh Gadiya 2012-06-23

    The iOS version on the iPhone 4s verizon was  5.0.1</li>
<li>Shyam Bhadauria 2012-07-10

    Re-opening to edit label</li>
</ol>


<p><a href="/TIMOB/TIMOB-9090.json">JSON Source</a></p>