{
	"id": "91855",
	"key": "TIMOB-9139",
	"fields": {
		"issuetype": {
			"id": "1",
			"description": "A problem which impairs or prevents the functions of the product.",
			"name": "Bug",
			"subtask": false
		},
		"project": {
			"id": "10153",
			"key": "TIMOB",
			"name": "Titanium SDK/CLI",
			"projectCategory": {
				"id": "10100",
				"description": "Titanium and related SDKs used in application development",
				"name": "Client"
			}
		},
		"fixVersions": [
			{
				"id": "15699",
				"description": "2013 Sprint 21",
				"name": "2013 Sprint 21",
				"archived": true,
				"released": true,
				"releaseDate": "2013-10-18"
			},
			{
				"id": "15701",
				"description": "2013 Sprint 21 Core",
				"name": "2013 Sprint 21 Core",
				"archived": true,
				"released": true,
				"releaseDate": "2013-10-18"
			},
			{
				"id": "14982",
				"description": "Release 3.2.0",
				"name": "Release 3.2.0",
				"archived": false,
				"released": true,
				"releaseDate": "2013-12-19"
			}
		],
		"resolution": {
			"id": "1",
			"description": "A fix for this issue is checked into the tree and tested.",
			"name": "Fixed"
		},
		"resolutiondate": "2013-10-19T01:19:59.000+0000",
		"created": "2012-05-15T09:44:52.000+0000",
		"priority": {
			"name": "Medium",
			"id": "3"
		},
		"labels": [
			"SupportTeam",
			"androidbuild",
			"ay-verified",
			"cb-verified",
			"core",
			"exalture",
			"hard_to_verify",
			"qe-closed-3.2.0"
		],
		"versions": [
			{
				"id": "13272",
				"description": "Release 2.0.1",
				"name": "Release 2.0.1",
				"archived": true,
				"released": true,
				"releaseDate": "2012-04-16"
			}
		],
		"issuelinks": [
			{
				"id": "30749",
				"type": {
					"id": "10003",
					"name": "Relates",
					"inward": "relates to",
					"outward": "relates to"
				},
				"outwardIssue": {
					"id": "91507",
					"key": "TIMOB-9028",
					"fields": {
						"summary": "CLI: \"build\" command for Android apps",
						"status": {
							"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
							"name": "Closed",
							"id": "6",
							"statusCategory": {
								"id": 3,
								"key": "done",
								"colorName": "green",
								"name": "Done"
							}
						},
						"priority": {
							"name": "Critical",
							"id": "1"
						},
						"issuetype": {
							"id": "6",
							"description": "gh.issue.epic.desc",
							"name": "Epic",
							"subtask": false
						}
					}
				}
			},
			{
				"id": "31506",
				"type": {
					"id": "10003",
					"name": "Relates",
					"inward": "relates to",
					"outward": "relates to"
				},
				"outwardIssue": {
					"id": "119156",
					"key": "TIMOB-14973",
					"fields": {
						"summary": "Android Build: Validate command line arguments and tiapp.xml settings",
						"status": {
							"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
							"name": "Closed",
							"id": "6",
							"statusCategory": {
								"id": 3,
								"key": "done",
								"colorName": "green",
								"name": "Done"
							}
						},
						"priority": {
							"name": "High",
							"id": "2"
						},
						"issuetype": {
							"id": "7",
							"description": "gh.issue.story.desc",
							"name": "Story",
							"subtask": false
						}
					}
				}
			}
		],
		"assignee": {
			"name": "cbarber",
			"key": "cbarber",
			"displayName": "Chris Barber",
			"active": true,
			"timeZone": "America/Chicago"
		},
		"updated": "2013-12-17T21:18:37.000+0000",
		"status": {
			"description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
			"name": "Closed",
			"id": "6",
			"statusCategory": {
				"id": 3,
				"key": "done",
				"colorName": "green",
				"name": "Done"
			}
		},
		"components": [
			{
				"id": "10202",
				"name": "Android",
				"description": "Android Platform"
			},
			{
				"id": "10207",
				"name": "Tooling"
			}
		],
		"description": "h4. Problem Description\r\nWhen you do a deployment for distribution, you will think that the deploytype in analytics will switch to production. But it's not happening with some projects. A customer is not getting analytics from his app, and he reported it, the people in the Cloud replied that he didn't set the app to be in prod: \r\n\r\nThe second issue, for the other app GUID 473b9203-836a-4d48-ac13-2993873efa2c, the problem is that the user is using deploytype:test, and analytics only shows up for deploytype:production.\r\n\r\nWhen I asked the client to do for production (i.e., deploy it to the Market), he already did that, as the attached image shows. \r\n\r\nh4. Actual Results\r\nApp is not set for production in the deploytype.\r\n\r\nh4. Expected results\r\nIf you build an app for distribution in the market, the deploytype should be production.\r\n\r\nh4. Extra info \r\nSee attached image. ",
		"attachment": [
			{
				"id": "27696",
				"filename": "Screen Shot 2012-05-15 at 08.40.41.png",
				"author": {
					"name": "mpmiranda",
					"key": "mpmiranda",
					"displayName": "Mauro Parra-Miranda",
					"active": true,
					"timeZone": "America/Mexico_City"
				},
				"created": "2012-05-15T09:44:52.000+0000",
				"size": 167288,
				"mimeType": "image/png"
			}
		],
		"flagged": false,
		"summary": "Android: Tooling: How to set the deploytype ",
		"creator": {
			"name": "mpmiranda",
			"key": "mpmiranda",
			"displayName": "Mauro Parra-Miranda",
			"active": true,
			"timeZone": "America/Mexico_City"
		},
		"subtasks": [],
		"reporter": {
			"name": "mpmiranda",
			"key": "mpmiranda",
			"displayName": "Mauro Parra-Miranda",
			"active": true,
			"timeZone": "America/Mexico_City"
		},
		"environment": "Titanium SDK version: 2.0.1GA2\r\nJavascript Engine: V8 \r\nPlatform & version: Android 4.0 \r\nDevice Details:  physical device model \r\nHost Operating System: OS X 10.7.3 \r\nTitanium Studio version: 2.0",
		"comment": {
			"comments": [
				{
					"id": "194886",
					"author": {
						"name": "billdawson",
						"key": "billdawson",
						"displayName": "Bill Dawson",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"body": "Some background on how the deploytype is set via build scripts:\r\n\r\n* User chooses \"Distribute - Android Marketplace\" in titanium studio and fills out the form.\r\n\r\n* Studio calls the android builder.py with the [\"distribute\" command|https://github.com/appcelerator/titanium_mobile/blob/2_0_X/support/android/builder.py#L2126].\r\n\r\n* builder.py's {{build_and_run}} function is called with the {{install}} argument set to {{True}}.  That - and the fact that the keystore information is also passed to builder - lead the {{deploy_type}} to be set to {{production}}.  ([code|https://github.com/appcelerator/titanium_mobile/blob/2_0_X/support/android/builder.py#L1663]).\r\n\r\n* That information is then used when we generate the Java source for the application's \"AppInfo\" class.  [My test app here|https://skitch.com/bill_dawson/84mm2/tistud1659appinfo.java-projects-ti-tistud1659-build-android-gen-com-billdawson-tistud1659-vim3]. That sets the system \"ti.deploytype\" property for the application at runtime.\r\n\r\n* Then, when analytics is fired up at runtime, that \"ti.deploytype\" property [is read and sent along|https://github.com/appcelerator/titanium_mobile/blob/2_0_X/android/titanium/src/java/org/appcelerator/titanium/TiApplication.java#L407] with the analytics data.",
					"updateAuthor": {
						"name": "billdawson",
						"key": "billdawson",
						"displayName": "Bill Dawson",
						"active": true,
						"timeZone": "Europe/Berlin"
					},
					"created": "2012-05-15T13:28:21.000+0000",
					"updated": "2012-05-15T13:28:21.000+0000"
				},
				{
					"id": "194928",
					"author": {
						"name": "ingo",
						"key": "ingo",
						"displayName": "Ingo Muschenetz",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Mauro--it appears that\r\n\r\n# This should be working correctly\r\n# The choice of deploy type is actually done inside the SDK scripts. There isn't anything Studio can do about it (in the code Bill links to, deploy type is not a parameter that's passed in).\r\n\r\nHave you replicated this yourself? If you have, it appears it should be a TIMOB issue.",
					"updateAuthor": {
						"name": "ingo",
						"key": "ingo",
						"displayName": "Ingo Muschenetz",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2012-05-15T16:44:13.000+0000",
					"updated": "2012-05-15T16:44:13.000+0000"
				},
				{
					"id": "194932",
					"author": {
						"name": "mpmiranda",
						"key": "mpmiranda",
						"displayName": "Mauro Parra-Miranda",
						"active": true,
						"timeZone": "America/Mexico_City"
					},
					"body": "This is changing to TI mobile SDK, so they can give us their opinion. ",
					"updateAuthor": {
						"name": "mpmiranda",
						"key": "mpmiranda",
						"displayName": "Mauro Parra-Miranda",
						"active": true,
						"timeZone": "America/Mexico_City"
					},
					"created": "2012-05-15T16:52:42.000+0000",
					"updated": "2012-05-15T16:52:42.000+0000"
				},
				{
					"id": "195190",
					"author": {
						"name": "ngupta",
						"key": "ngupta",
						"displayName": "Neeraj Gupta",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "@Mauro - Have you reproduced this issue yourself? All the issues that come from support team should have been verified? Why is this issue in the escalation list?",
					"updateAuthor": {
						"name": "ngupta",
						"key": "ngupta",
						"displayName": "Neeraj Gupta",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2012-05-17T13:04:48.000+0000",
					"updated": "2012-05-17T13:04:48.000+0000"
				},
				{
					"id": "195451",
					"author": {
						"name": "mpmiranda",
						"key": "mpmiranda",
						"displayName": "Mauro Parra-Miranda",
						"active": true,
						"timeZone": "America/Mexico_City"
					},
					"body": "Changing priority to next patch, working on a testcase. \r\n\r\nBest,\r\n\r\nMauro ",
					"updateAuthor": {
						"name": "mpmiranda",
						"key": "mpmiranda",
						"displayName": "Mauro Parra-Miranda",
						"active": true,
						"timeZone": "America/Mexico_City"
					},
					"created": "2012-05-21T09:33:22.000+0000",
					"updated": "2012-05-21T09:33:22.000+0000"
				},
				{
					"id": "275585",
					"author": {
						"name": "ayeung",
						"key": "ayeung",
						"displayName": "Allen Yeung",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "In the new CLI, the deploy can be set with the --deploy-type flag.  When building for distribution, it can only have a deploy-type of production.",
					"updateAuthor": {
						"name": "ayeung",
						"key": "ayeung",
						"displayName": "Allen Yeung",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2013-10-18T06:28:05.000+0000",
					"updated": "2013-10-18T06:28:05.000+0000"
				},
				{
					"id": "275805",
					"author": {
						"name": "ayeung",
						"key": "ayeung",
						"displayName": "Allen Yeung",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "PR: https://github.com/appcelerator/titanium_mobile/pull/4781",
					"updateAuthor": {
						"name": "ayeung",
						"key": "ayeung",
						"displayName": "Allen Yeung",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2013-10-19T01:19:59.000+0000",
					"updated": "2013-10-19T01:19:59.000+0000"
				},
				{
					"id": "284857",
					"author": {
						"name": "sdowse",
						"key": "sdowse",
						"displayName": "Samuel Dowse",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"body": "Verified fixed on:\nMac OSX 10.9 Mavericks\nTitanium Studio, build: 3.2.0.201312162209\nTitanium SDK, build: 3.2.0.v20131216191854\nCLI: 3.2.0-cr3\nAlloy: 1.3.0-cr\n\nCLI Android:\n--deploy-type can be set to test and development.\n--target can be set to dist-playstore for production.\nProduction will override any --deploy-type parameters.\nStudio has package and run buttons which sort all this out for you successfully.\nClosing.",
					"updateAuthor": {
						"name": "sdowse",
						"key": "sdowse",
						"displayName": "Samuel Dowse",
						"active": true,
						"timeZone": "America/Los_Angeles"
					},
					"created": "2013-12-17T21:18:21.000+0000",
					"updated": "2013-12-17T21:18:21.000+0000"
				}
			],
			"maxResults": 8,
			"total": 8,
			"startAt": 0
		}
	}
}