---
title: "[TIMOB-9148] iOS: commonjs external module compilation broken (build.py -> compile.py in module projects)"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-05-20T09:11:22.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.0, Sprint 2012-10 Core</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>core, module_build, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Bill Dawson</td></tr>
<tr><th>Assignee</th><td>Max Stepanov</td></tr>
<tr><th>Created</th><td>2012-05-16T09:14:41.000+0000</td></tr>
<tr><th>Updated</th><td>2012-07-11T13:18:09.000+0000</td></tr>
</table>

<h3>Description</h3>

Broken by commit f9a4f3815ee0

Reproduce:

a) Create an iOS module project: <code>titanium create --type=module --name=testmod --id=ti.testmod --platform=iphone --dir=.</code>

(I'm assuming there that <code>titanium</code> is aliased to the master branch version of titanium.py -- adjust accordingly if needed.)

b) Create a file therein: assets/ti.testmod.js and some code:

<code><pre>
exports.hello = function() { return "hello world"; };
</pre></code>

c) Run ./build.py.

You will see:

<code><pre>
Traceback (most recent call last):
  File "./build.py", line 216, in &lt;module&gt;
    compile_js(manifest,config)
  File "./build.py", line 81, in compile_js
    metadata = compiler.make_function_from_file(path,js_file)
AttributeError: 'Compiler' object has no attribute 'make_function_from_file'
</pre></code>


<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-9148_28663/ti.testmod.js">ti.testmod.js</td></td><td>2012-06-23T16:02:00.000+0000</td><td>53</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Max Stepanov 2012-05-17

   PR pending <a href="https://github.com/appcelerator/titanium_mobile/pull/2215" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2215</a></li>
<li>Dustin Hyde 2012-06-23

   Closing as Fixed.
   
   SDK: 2.1.0.v20120622174154
   Studio: 2.1.0.201206221045
   OS: Lion 10.7.4
   Xcode: 4.3.2
   Devices Tested: iPod 4.3.3, iPad3 5.1.1, iPhone Simulator 5.1
   
   Test Steps
   
   1. Create iOS module.
   2. Add attached ti.testmod.js file to <module_project_root>/assets/
   3. Build module (either run build.py from command line or package module from studio).
   
   Expected Result:
   
   Module should build without error.</li>
</ol>


<p><a href="/TIMOB/TIMOB-9148.json">JSON Source</a></p>