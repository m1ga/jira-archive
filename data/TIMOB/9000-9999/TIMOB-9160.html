---
title: "[TIMOB-9160] Android: Font sizing should obey the ti.ui.defaultunit setting in tiapp.xml"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-10-08T20:58:14.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.0, Release 2.0.1</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.0.0, Sprint 2012-20 Core, 2012 Sprint 20</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>core, module_android, parity, qe-manualtest</td></tr>
<tr><th>Reporter</th><td>Tim Poulsen</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2012-05-16T17:36:43.000+0000</td></tr>
<tr><th>Updated</th><td>2014-08-08T22:01:47.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Expected results:</h4>

I can set the ti.ui.defaultunit property in tiapp.xml to 'dip' and have font sizes respect that setting.

<h4>Actual results:</h4>

I can explicitly set fontSize='14dip' and text will be sized appropriately. But setting the default unit in tiapp.xml and setting fontSize=14 gives px based font sizing.

See the attached screen: <property name="ti.ui.defaultunit" type="string">dip</property> is included in the tiapp.xml file, the field labels (URL, Username, etc.) are set with fontSize=## whereas the contents of the first text field is set with fontSize='14dip'

Tested on my Galaxy Nexus running ICS/4.0.2. I'm using the <a href="https://github.com/gshipley/BeerShift" rel="nofollow" target="_blank">https://github.com/gshipley/BeerShift</a> application featured in the developer blog.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-9160_32284/app.js">app.js</td></td><td>2012-10-04T12:16:33.000+0000</td><td>1845</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-9160_27727/device-2012-05-16-173228.png">device-2012-05-16-173228.png</td></td><td>2012-05-16T17:37:32.000+0000</td><td>52576</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Kevin Whinnery 2012-09-06

   +1</li>
<li>Bill Dawson 2012-10-04

   <h4>Fail case / Test case</h4>
   
   **Note**: Need a high density device to test with (that's basically any device these days) or an emulator such as WVGA854.
   
   <h4>Create a new mobile project, leave the ti.ui.defaultunit setting in tiapp.xml at "system".</h4>
   <h4>Replace the app.js with the code from below.</h4>
   <h4>Run the app.  The text is crazy small.</h4>
   <h4>Change the ti.ui.defaultunit setting in tiapp.xml to "dip".</h4>
   <h4>Run the app again.  In the fail case, the text is still crazy small.  When testing the fix, the text should have grown up.</h4>
   
   Notes: TextArea (another control that supports "font") uses the same view as TextField, so I haven't bothered to add it here.  Anyways, all of our controls that support "font" use the exact same method in Java to style the text: TiUIHelper.styleText.
   
   Here's that app.js (I've also attached it since it's kinda long):
   
   <code><pre>
   Ti.UI.backgroundColor = "#fff";
   var win = Titanium.UI.createWindow({  
       title:'Test',
       backgroundColor:'#fff',
   	exitOnClose: true,
   	orientationModes: [Ti.UI.PORTRAIT]
   }),
   logLabel = Ti.UI.createLabel({
   	bottom: "8dp", left: "8dp", right: "8dp", height: "192dp",
   	backgroundColor: "black", color: "white",
   	font: {fontSize: 12},
   	verticalAlign: Ti.UI.TEXT_VERTICAL_ALIGNMENT_TOP
   }),
   log = function(s, clearFirst) {
   	var current = logLabel.text;
   	if (current && !clearFirst) {
   		current += "\n";
   	} else {
   		current = "";
   	}
   	current += s;
   	logLabel.text = current;
   },
   button = Ti.UI.createButton({
   	left: "8dp", right: "8dp", top: "8dp", height: "48dp",
   	title: "A long-titled button",
   	font: {fontSize: 12}
   }),
   textField = Ti.UI.createTextField({
   	hintText: "A long-hinted text field",
   	left: "8dp", right: "8dp", top: "64dp", height: "48dp",
   	font: {fontSize: 12}
   }),
   activityIndicator = Ti.UI.createActivityIndicator({
   	style: Titanium.UI.ActivityIndicatorStyle.BIG_DARK,
   	message: "An activity indicator, dear friends.",
   	font: {fontSize: 12}, top: "120dp", left: "8dp",
   	right: "8dp", height: "96dp"
   });
   
   win.add(logLabel);
   win.add(textField);
   win.add(button);
   win.add(activityIndicator);
   
   log("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sem mauris, fringilla sed condimentum ac, tempor quis justo. Praesent vel volutpat arcu. Fusce porttitor condimentum consectetur. Suspendisse potenti. Integer pellentesque blandit ullamcorper. Ut tincidunt ante sit amet lorem scelerisque vitae rutrum turpis placerat. Integer massa odio, bibendum eu molestie et, ornare non purus. Nullam accumsan neque id sapien ornare hendrerit. Etiam lacinia diam eget ligula dictum feugiat. Sed malesuada justo vel mi luctus tempor. Proin eu porta arcu.");
   
   win.addEventListener("open", function() {activityIndicator.show();});
   win.open();
   </pre></code></li>
<li>Bill Dawson 2012-10-04

   PR ready:
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/3108" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3108</a></li>
<li>Lokesh Choudhary 2012-12-06

   Verified the issue is no more occurring.
   Changing to 'dip' increased int font size.
   Titanium studio : 3.0.0.201211301903
   SDK Version  : 3.0.0.v20121204154658
   CLI version : 3.0.19
   OS : OSX 10.8.2
   Android : 4.0.4
   Samsung S3
   </li>
</ol>


<p><a href="/TIMOB/TIMOB-9160.json">JSON Source</a></p>