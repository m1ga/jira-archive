---
title: "[TIMOB-9187] Ti.map.view add direct  access to user's  currentlocation "
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Low</td></tr>
<tr><th>Status</th><td>Open</td></tr>
<tr><th>Resolution</th><td>Unresolved</td></tr>

<tr><th>Affected Version/s</th><td>n/a</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>api</td></tr>
<tr><th>Reporter</th><td>Vincent </td></tr>
<tr><th>Assignee</th><td>Unknown</td></tr>
<tr><th>Created</th><td>2012-05-15T04:54:08.000+0000</td></tr>
<tr><th>Updated</th><td>2018-02-28T20:04:10.000+0000</td></tr>
</table>

<h3>Description</h3>

give access to MKUserLocation location  @property(readonly, retain, nonatomic) CLLocation *location 
from the mapview ( no need to listen for GPS event in a mapview)

constraint :  
@property(readonly, nonatomic, getter=isUpdating) BOOL updating  should also be exposed



<h3>Comments</h3>

<ol>
<li>Vincent  2012-07-06

   could be also implemented under a new event for the mapview  returning a  LocationCoordinates object  each time the userLocation is updated</li>
<li>Vincent  2012-12-10

   that's what I did
   
   <code><pre>
   - (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
   {
      
       if ([self.proxy _hasListeners:@"userLocation"])
       {
           CLLocation*   myLocation = [userLocation location];
           CLLocationCoordinate2D coord = [myLocation coordinate];
             
           NSDictionary * props = @{
           @"latitude":    @(coord.latitude),
           @"longitude":   @(coord.longitude),
           @"heading":     @(myLocation.course ),
           @"timestamp":   @([ myLocation.timestamp timeIntervalSince1970] * 1000 ),
           };
           
           [self.proxy fireEvent:@"userLocation" withObject:props];
           
       }
       
       
   }
   </pre></code></li>
</ol>


<p><a href="/TIMOB/TIMOB-9187.json">JSON Source</a></p>