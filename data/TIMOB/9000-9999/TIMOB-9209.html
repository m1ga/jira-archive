---
title: "[TIMOB-9209] Android: backgroundRepeat returns black view when using density images (xhdpi, hdpi etc...)"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-02-05T23:16:47.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.1, Release 3.0.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.1.0, 2013 Sprint 03 API, 2013 Sprint 03</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>api, community, module_window, parity, qe-manualtest</td></tr>
<tr><th>Reporter</th><td>Peter Willemsen</td></tr>
<tr><th>Assignee</th><td>Ping Wang</td></tr>
<tr><th>Created</th><td>2012-05-20T07:50:37.000+0000</td></tr>
<tr><th>Updated</th><td>2014-08-08T23:47:44.000+0000</td></tr>
</table>

<h3>Description</h3>

So I was trying to repeat a background, which always works. But when using density images (xhdpi, hdpi etc...) it's not working. It returns a black view.
To reproduce:
Put an image in your Resources directory, according to the docs: <a href="https://wiki.appcelerator.org/display/guides/Using+density-specific+resources+on+Android" rel="nofollow" target="_blank">https://wiki.appcelerator.org/display/guides/Using+density-specific+resources+on+Android</a>

I have this code:
<code><pre>
var win = Ti.UI.createWindow({
	navBarHidden : true,
	exitOnClose : true
});
var logo = Ti.UI.createView({
	left : 0,
	top : 0,
	right : 0,
	height : "44dp",
	zIndex : 3,
	backgroundImage : "/images/barbg.png",
    backgroundRepeat : true
});
win.add(logo);
win.open();
</pre></code>
The view will be black instead of a repeated image.

Thanks!

<h3>Comments</h3>

<ol>
<li>Betty Tran 2012-05-22

   Hi Peter,
   
   Could you provide another code snippet that reproduces the problem? There are some errors in the code that you have included.
   
   Thanks,
   Betty</li>
<li>Paul Dowsett 2012-05-22

   </li>
<li>Peter Willemsen 2012-05-22

   Hi Paul,
   
   Oops, no I'm very sorry. I totally missed that. I'll remember the next time.
   I changed the code. It looked normal in the edit window :(
   
   Anyway, yes I tested it myself by moving the images outside the hdpi folder into the /Resources/ folder, and it works. I'm using it right now as a temporary workaround.</li>
<li>Paul Hamilton 2012-05-23

   happening for me as well. There really isn't a perfect test case with a default app as you need to have images that will tile in the android resources folders. 
   
   Android w/2.0.1.GA2
   
   First off you can't repeat on Heavy Weight windows at all
   
   Note this is lightweight and works as expected:
   <code><pre>
   var win = Titanium.UI.createWindow({  
       title:'tiling bug',
       backgroundImage: "KS_nav_ui.png",
       backgroundRepeat: true
   }).open();
   </pre></code>
   
   This is heavyweight and ignores the repeat property:
   <code><pre>
   var win = Titanium.UI.createWindow({  
       title:'tiling bug',
       backgroundImage: "KS_nav_ui.png",
       backgroundRepeat: true,
       navBarHidden: false
   }).open();
   </pre></code>
   
   
   Now as a base case take this piece of code which works as expected:
   <code><pre>
   var win = Titanium.UI.createWindow({  
       title:'tiling bug',
   	backgroundColor: 'red',
       navBarHidden: false
   });
   
   var view = Ti.UI.createView({
       backgroundImage: "KS_nav_ui.png",
       backgroundRepeat: true,
       width: "100%",
       height: "100%"
   });
   
   win.add(view)
   win.open();
   </pre></code>
   
   
   Now move (don't just copy) "KS_nav_ui.png" to the resolution specific image folders.
   
   Run with this slight modification of the image location to reference the images folder:
   <code><pre>
   var win = Titanium.UI.createWindow({  
       title:'tiling bug',
   	backgroundColor: 'red',
       navBarHidden: false
   });
   
   var view = Ti.UI.createView({
       backgroundImage: "images/KS_nav_ui.png",
       backgroundRepeat: true,
       width: "100%",
       height: "100%"
   });
   
   win.add(view)
   win.open();
   </pre></code></li>
<li>Peter Willemsen 2012-05-23

   I'll make a nice template with some random images to let users reproduce this bug.</li>
<li>Paul Hamilton 2012-07-05

   This is actually more then just android. Occurs with iOS as well with retina and the @2x images. When trying to tile with both the regular image and the @2x on a retina device, the image will just stretch rather then tile. The only exception to this so far i found is with tableviews for some reason. Though i can't tell if perhaps the tableview is just ignoring the @2x and using the regular image, or is tiling the image appropriately.</li>
<li>Dan Tamas 2012-10-03

   Any news on this?
   Thank you.</li>
<li>Ping Wang 2013-01-30

   PR: <a href="https://github.com/appcelerator/titanium_mobile/pull/3826" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3826</a>
   For FR, please run the three test cases attached below. Note: put "image.png" in /Resources/android/images/[high|medium|low]/
   Test case 1:
   <code><pre>
   var win = Titanium.UI.createWindow({  
       title:'tiling bug',
       backgroundImage: "images/image.png",
       backgroundRepeat: true,
       navBarHidden: false
   }).open();
   </pre></code>
   Test case 2:
   <code><pre>
   var win = Titanium.UI.createWindow({  
       title:'tiling bug',
       backgroundImage: "images/image.png",
       backgroundRepeat: true
   }).open();
   </pre></code>
   Test case 3:
   <code><pre>
   var win = Titanium.UI.createWindow({  
       title:'tiling bug',
       backgroundColor: 'red',
       navBarHidden: false
   });
   
   var view = Ti.UI.createView({
       backgroundImage: "images/image.png",
       backgroundRepeat: true,
       width: "100%",
       height: "100%"
   });
   
   win.add(view)
   win.open();
   </pre></code></li>
<li>Paras Mishra 2013-03-15

   backgroundRepeat property is working  as expected. Tested by executing the above three testcases.
   
   Verified on:
   Device : Google Nexus,  Android Version: 4.1
   SDK version:  3.1.0.v20130314163255
   CLI version : 3.0.24
   OS : MAC OSX 10.7.5
   XCode : 4.5.1
   </li>
<li>Michael Gangolf 2013-05-18

    Can someone verify that this is also working on alloy? In my case its using the normal image and not the one out of the res-notlong-* folder: 
    <a href="https://developer.appcelerator.com/question/152480/android-backgroundimage-repeat-ignoring-retina-images" rel="nofollow" target="_blank">https://developer.appcelerator.com/question/152480/android-backgroundimage-repeat-ignoring-retina-images</a>
    
    SDK: 3.1.0 GA
    Android 4.0.2 (device and emulator)
    </li>
</ol>


<p><a href="/TIMOB/TIMOB-9209.json">JSON Source</a></p>