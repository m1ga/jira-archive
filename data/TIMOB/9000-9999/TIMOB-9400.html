---
title: "[TIMOB-9400] iOS: Children are not removed from parents view hierarchy when context is shutdown"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-11-12T23:17:35.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.0.0, Release 3.1.0, 2012 Sprint 21 API, 2012 Sprint 21</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>api, qe-port</td></tr>
<tr><th>Reporter</th><td>Vishal Duggal</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2012-06-05T14:19:49.000+0000</td></tr>
<tr><th>Updated</th><td>2013-11-12T23:17:40.000+0000</td></tr>
</table>

<h3>Description</h3>

Steps to reproduce
Run the code.
1. Open TableWindow
2. Open Detail Window
3. Back to Table Window
4. Back to Main Window

Repeat steps 1 through 4 till you see the table view blanked out

Test code below.

FILE: app.js


<code><pre>
Ti.UI.setBackgroundColor('#fff');

var tabGroup = Ti.UI.createTabGroup();

var winMain = Ti.UI.createWindow({
	url: 'main.js',
	title: 'Main Window'
});

var tab1 = Ti.UI.createTab({
	window: winMain,
	title: 'Main Window'
})

tabGroup.addTab(tab1);
tabGroup.open();
</pre></code>


FILE: main.js


<code><pre>
var winTable = Ti.UI.createWindow({
	url: 'table.js',
	title: 'Table Window'
});

var button = Ti.UI.createButton({
	title: 'Open Window with Table'
});

button.addEventListener('click', function(e) {
	Ti.UI.currentTab.open(winTable, {animated: true});
});

Ti.UI.currentWindow.add(button);
</pre></code>


FILE: table.js


<code><pre>
var winDetail = Ti.UI.createWindow({
	url: 'detail.js',
	title: 'Detail Window'
});

var table = Ti.UI.createTableView();

table.addEventListener('click', function(e) {
	winDetail.sectionIndex = e.rowData.sectionIndex;
	winDetail.rowIndex     = e.rowData.rowIndex;
	Ti.UI.currentTab.open(winDetail, {animated: true});
});

Ti.UI.currentWindow.add(table);

var data = [];

for (var i = 0; i < 5; i++) {
	data[i] = Ti.UI.createTableViewSection({
		headerTitle: 'Section ' + i
	});
	
	for (var j = 0; j < 5; j++) {
		var row = Ti.UI.createTableViewRow({
			className: 'row',
			hasDetail: true,
			sectionIndex: i,
			rowIndex: j
		});
		
		var container = Ti.UI.createView({
			layout: 'vertical',
			height: Ti.UI.SIZE,
			top: 10,
			left: 10,
			bottom: 10,
			right: 10
		});
		
		container.add(Ti.UI.createLabel({
			left: 0,
			text: 'Label ' + j,
			font: {
				fontWeight: 'bold',
				fontSize: 16
			}
		}));
		
		container.add(Ti.UI.createLabel({
			top: 5,
			left: 0,
			text: 'Sub Label ' + j,
			font: {
				fontStyle: 'italic',
				fontSize: 14
			}
		}));
		
		row.add(container);
		data[i].add(row);
	}
	
	table.setData(data);
}
</pre></code>


FILE: detail.js


<code><pre>
var label = Ti.UI.createLabel({
	text: 'Section: ' + Ti.UI.currentWindow.sectionIndex + ' Row: ' + Ti.UI.currentWindow.rowIndex
});

Ti.UI.currentWindow.add(label);
</pre></code>


<h3>Comments</h3>

<ol>
<li>Hidayet Dogan 2012-06-09

   Affect version is not only 2.1.0 but 2.0.1GA2 and 2.0.2GA are also affected. I think the problem comes with Titanium Mobile SDK version 2 layout changes (I haven't checked SDK code changes). I did not notice this problem when using 1.8.x.</li>
<li>Vishal Duggal 2012-10-11

   Pull pending <a href="https://github.com/appcelerator/titanium_mobile/pull/3176" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3176</a></li>
<li>Blain Hamon 2012-10-16

   Pull merged</li>
<li>Vishal Duggal 2012-11-21

   Backport PR <a href="https://github.com/appcelerator/titanium_mobile/pull/3460" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3460</a></li>
<li>Natalie Huynh 2012-12-04

   Tested with 3.0.0.v201211300200208 with iPhone 5 6.0</li>
<li>Priya Agarwal 2013-07-17

   Reopening just to update label.</li>
<li>Eric Merriman  2013-11-12

   Was reopened in error. Closing.</li>
</ol>


<p><a href="/TIMOB/TIMOB-9400.json">JSON Source</a></p>