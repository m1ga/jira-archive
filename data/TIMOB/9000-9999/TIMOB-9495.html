---
title: "[TIMOB-9495] Android: Animation: An animated object does not animate correctly the second time"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-06-15T13:26:43.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 2.1.0, Sprint 2012-12 Core</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>core, module_animation, qe-and060112, qe-testadded, regression</td></tr>
<tr><th>Reporter</th><td>Satyam Sekhri</td></tr>
<tr><th>Assignee</th><td>Bill Dawson</td></tr>
<tr><th>Created</th><td>2012-06-12T03:19:30.000+0000</td></tr>
<tr><th>Updated</th><td>2012-07-03T15:06:56.000+0000</td></tr>
</table>

<h3>Description</h3>

An animated view object does not animate properly the second time.

This is a regression. The behavior does not happen on 2.0.2

Steps to Reproduce:
1. Create an application with the Sample code for animation, as given below
2. Run the application
3. Click on Red View. The red view animates.
4. After the animation is completed, again click on the Red view

Actual Result: The red view scales for once and stays

Expected: The red view should animate each time it is clicked

Sample Code
<code><pre>
var win = Ti.UI.createWindow({
	backgroundColor:'green'
});

var box = Ti.UI.createView({
			backgroundColor : 'red',
			height : '150',
			width : '100'
		});

		box.addEventListener('click', function() {
			var matrix = Ti.UI.create2DMatrix()
			
			matrix = matrix.scale(2, 2);
			var a = Ti.UI.createAnimation({
				transform : matrix,
				duration : 2000,
				autoreverse : true,
				repeat : 3
			});
			box.animate(a);
		});
		win.add(box);
win.open();
</pre></code>

<h3>Comments</h3>

<ol>
<li>Bill Dawson 2012-06-14

   <h4>Fail Case / Test Case</h4>
   
   * Create an app with this app.js:
   
   <code><pre>
   var win = Ti.UI.createWindow({
   	backgroundColor : 'green'
   });
   
   var box = Ti.UI.createView({
   	backgroundColor : 'red',
   	height : '150dp',
   	width : '100dp',
   	top: '50dp'
   });
   
   box.addEventListener('click', function() {
   	var matrix = Ti.UI.create2DMatrix().scale(1.5, 1.5);
   	var a = Ti.UI.createAnimation({
   		transform : matrix,
   		duration : 500,
   		autoreverse : true,
   		repeat : 2
   	});
   	box.animate(a);
   });
   win.add(box);
   
   var box2 = Ti.UI.createView({
   	backgroundColor: "blue",
   	top: "285dp",
   	height: "100dp",
   	width: "100dp"
   });
   
   box2.addEventListener("click", function() {
   	var matrix = Ti.UI.create2DMatrix().rotate(97);
   	box2.animate({transform: matrix, duration: 500, autoreverse: true, repeat: 2});
   });
   win.add(box2);
   
   win.open();
   </pre></code>
   
   * Run it.
   
   * Tap the red box.  It should grow and shrink twice.  Tap it again: in the fail case, it will fail to do what it's supposed to (it gets stuck).  In the fixed branch, it should do just like when you tapped it the first time.
   
   * Tap the green box.  It should rotate forward and back twice.  Tap it again: in the fail case, it will fail to do what it's supposed to (it gets stuck). In the fixed branch, it should do just like when you tapped it the first time.</li>
<li>Bill Dawson 2012-06-14

   Pull request ready:
   
   <a href="https://github.com/appcelerator/titanium_mobile/pull/2392" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2392</a></li>
<li>Michael Pettiford 2012-06-18

   Closing issue
   
   Tested with Ti Studio build 2.1.0.201206172244
   Ti Mobile SDK2.1.0.v20120618134156 hash r00905cd0
   OSX Lion 10.7.3
   iPhone 4S OS 5.1, Nexus S OS 4.0.4
   
   The expected behavior is shown</li>
</ol>


<p><a href="/TIMOB/TIMOB-9495.json">JSON Source</a></p>