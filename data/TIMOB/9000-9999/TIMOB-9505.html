---
title: "[TIMOB-9505] iOS: New feature to add ability to choose keychain at codesign"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>New Feature</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-08-03T13:48:50.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-14 Core, Release 2.1.1, Release 3.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>SupportTeam, core</td></tr>
<tr><th>Reporter</th><td>Varun Joshi</td></tr>
<tr><th>Assignee</th><td>Neeraj Gupta</td></tr>
<tr><th>Created</th><td>2012-06-12T14:29:05.000+0000</td></tr>
<tr><th>Updated</th><td>2012-08-03T13:48:50.000+0000</td></tr>
</table>

<h3>Description</h3>

Currently, even when we set the default keychain to the separate keychain in OS X, codesign will still look at not only the separate keychain but also the default login keychain. 

The codesign man pages say that we are allowed to pass an argument with the keychain that we would like to use and codesign will only look at that keychain.

It has been requested to add a new feature to have the ability to select the desired keychain from command line through builder.py.

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2012-07-09

   <h4>TESTING</h4>
   ----
   
   <h4>Create a new Keychain in "Keychain Access" and name it "test". Any password is OK.</h4>
   <h4>Copy your existing 'iPhone Developer' and 'iPhone Distribution' certificates and then Paste (DO NOT DRAG) them into the new keychain. Dragging moves them to the new keychain - pasting puts a reference in it.</h4>
   <h4>*Make sure* that the keychain is "locked" by clicking the lock button in the upper-left if necessary.</h4>
   <h4>Create a new app in TiStudio which you have both developer and distribution/packaging credentials for.</h4>
   
   In order to get the correct command-line invokes for your created app, you will want to do the following in Studio:
   
   <h4>Go to Preferences -> Titanium Studio -> Troubleshooting</h4>
   <h4>Select debug level "All"</h4>
   <h4>Click "Debug specific components"</h4>
   <h4>Uncheck all components EXCEPT for <code>com.aptana.core/debug/shell</code></h4>
   <h4>Apply changes</h4>
   
   WITHOUT SPECIFIED KEYCHAIN:
   
   <h4>Build for device in TiStudio</h4>
   <h4>Build for distribution in TiStudio</h4>
   
   PASS: App builds
   
   WITH SPECIFIED KEYCHAIN:
   
   To do this, for now you will need to run the builder.py manually from the command line. Studio does not support keychain selection yet; this is a separate feature request that will be filed with them and then linked from this ticket.
   
   In order to get the correct invoke line, you will need to have enabled Studio's shell logging, but the ticket includes templates. You can get you invoke line by:
   
   <h4>In Studio, go to Help -> Titanium Studio -> View Log File</h4>
   <h4>Find a builder.py invoke for the project (either "install" or "distribute" command). If you performed the last test just before this one, they should be at the bottom of the file.</h4>
   
   Now you will want to get your keychain file. In the terminal, run
   
   <code><pre>
   security list-keychains
   </pre></code>
   
   And copy the path to your keychain file that you just created.
   
   From the console, you will want to run an invoke similar to the following:
   
   <code><pre>
   "/usr/bin/python" "/Users/stiv/Library/Application Support/Titanium/mobilesdk/osx/2.1.0/iphone/builder.py" "install" "5.1" "/Users/stiv/Documents/Titanium Studio Workspace/temp" "com.appcelerator.temp" "temp" "C4D93DB0-3102-4CB1-972A-3DBAC291D341" "Stephen Tramer (E434A5798Q)" "universal" "/Users/stiv/temp.keychain"
   </pre></code>
   
   If the correct keychain is being used, you should be presented with a dialog box to unlock the "temp" keychain which you created. You will also want to run the "distribute" command in addition to "install", which *does* take different arguments. Check the studio logs again to get the correct invoke.</li>
<li>Sabil Rahim 2012-07-16

   [PR 2575](<a href="https://github.com/appcelerator/titanium_mobile/pull/2575)" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2575)</a> merged in for 2_1_X branch</li>
<li>Thomas Huelbert 2012-07-31

   Varun to close - email sent</li>
<li>Varun Joshi 2012-07-31

   Closing this issue</li>
<li>Nam Le 2012-08-01

   Should this work with the "adhoc" command as well?</li>
<li>Sabil Rahim 2012-08-02

   Yes it should work for adhoc command as well. </li>
<li>Nam Le 2012-08-03

   Yes you're correct Sabil</li>
<li>Nam Le 2012-08-03

   Reopen to edit spelling error</li>
</ol>


<p><a href="/TIMOB/TIMOB-9505.json">JSON Source</a></p>