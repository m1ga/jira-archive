---
title: "[TIMOB-9524] iOS: Support multiple JS files per module"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Sub-task</td></tr>
<tr><th>Priority</th><td>Medium</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-09-16T23:06:32.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.0, Release 2.1.4, Release 3.1.1, Release 3.1.2</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-14 Core, Release 3.0.0</td></tr>
<tr><th>Components</th><td>iOS</td></tr>
<tr><th>Labels</th><td>core</td></tr>
<tr><th>Reporter</th><td>Stephen Tramer</td></tr>
<tr><th>Assignee</th><td>Stephen Tramer</td></tr>
<tr><th>Created</th><td>2012-06-13T16:02:18.000+0000</td></tr>
<tr><th>Updated</th><td>2016-05-16T17:42:24.000+0000</td></tr>
</table>

<h3>Description</h3>

See umbrella bug for description. MobileWeb has already implemented this; see the ticket for the full details, but the general structure is:

* require('module.id') requires the main module JS
* require('module.id/sub-lib') requires the JS file 'sub-lib.js' which is loaded in the module

Introducing this may require some significant changes in iOS' module-loading infrastructure.

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-9524_28423/assets.tar.gz">assets.tar.gz</td></td><td>2012-06-15T18:23:18.000+0000</td><td>882</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-9524_41760/test.zip">test.zip</td></td><td>2013-08-21T10:56:04.000+0000</td><td>116297</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-9524_41761/testone.zip">testone.zip</td></td><td>2013-08-21T10:56:04.000+0000</td><td>107267</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-9524_29261/timob9524.tar.gz">timob9524.tar.gz</td></td><td>2012-07-12T17:12:37.000+0000</td><td>2315040</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Stephen Tramer 2012-06-15

   <h4>TESTING</h4>
   ----
   
   <h4>Module build</h4>
   
   <h4>Create a new module project for iOS with the id <code>com.foo.bar</code> - only the ID matters. This module MUST be created with 2.1.0 SDK being tested with.</h4>
   <h4>Download the attached <code>assets.tar.gz</code></h4>
   <h4>untar <code>assets.tar.gz</code> in the directory of the new module project</h4>
   <h4>run the module's <code>build.py</code></h4>
   
   *PASS*:
   
   <h4>The module has built correctly</h4>
   <h4>The module's <code>ComFooBarModuleAssets</code> file contains:</h4>
   #* A nontrivial <code>moduleAsset</code> method
   #* A nontrivial <code>resolveModuleAsset:</code> method which contains the hash keys:
   #** com_foo_bar_js
   #** test1_js
   #** subdir/test2_js
   
   Once the module build passes testing, install it in <code>~/Library/Application Support/Titanium</code> in the usual way.
   
   <h4>Project (2.1.0)</h4>
   
   <h4>Download the attached <code>timob9524.tar.gz</code> and untar it</h4>
   <h4>Import the resulting directory into TiStudio</h4>
   <h4>Run project</h4>
   
   *PASS:*
   
   The console output from the app will include the following:
   
   <code><pre>
   [INFO] foo.foo:
   [INFO] bar
   [INFO] foo.dorp:
   [INFO] dorp
   [INFO] mod.test:
   [INFO] hellz yes
   [INFO] woo :)
   [INFO] Fold Goggold Jeff Goldgate Jeff Jeffgold Foldgold Blumgold Cool Jeffjeff Gatecool Game Coolcold Blum Gateblum Coolgold Goldjeff Game Gamegame Gate Oldgold Jeff Goldblast Jeff Gotgamesgold. Cool cool cool game.
   [INFO] woo.woo:
   [INFO] woo :)
   [INFO] jeff.gamegold:
   [INFO] Fold Goggold Jeff Goldgate Jeff Jeffgold Foldgold Blumgold Cool Jeffjeff Gatecool Game Coolcold Blum Gateblum Coolgold Goldjeff Game Gamegame Gate Oldgold Jeff Goldblast Jeff Gotgamesgold. Cool cool cool game.
   </pre></code>
   
   This looks redundant but tests ALL of the following features:
   
   * Relative pathing outside modules
   * Relative pathing inside modules
   * Absolute pathing outside modules
   * Absolute pathing inside modules
   * Loading module resource before module
   * Loading module as <code>module.id/module.id</code>
   
   *IMPORTANT*: These modules are NOT compatible with any earlier versions of the SDK; this is both because of symbol loading errors, and because any module which loads resources outside of its main asset file will generate an exception.</li>
<li>Stephen Tramer 2012-06-15

   Module assets and timob project for testing.</li>
<li>Blain Hamon 2012-07-13

   Pull#2414 merged.</li>
<li>Martin Guillon 2013-03-24

   I just tried to do that and my "resolveModuleAsset" does not get filled with my modules js files
   I cant find where that method gets filled in the build process. Any help?
   
   THanks</li>
<li>Martin Guillon 2013-03-24

   Got it working, it was jspacker which wasnt liking some of my js files. Running from inside xcode you dont see the error from jspacker. Have to do it from the commandline</li>
<li>Jonathan Beebe 2013-05-20

   Following the described steps in SDK 3.1.0.GA , this doesn't seem to be working. I think the culprit may be changes to the build.py script.</li>
<li>Ashish Nigam 2013-08-21

   Issue remains open for new SDK, tested on 2.1.4.GA and 3.1.2.GA SDK.</li>
<li>Ashish Nigam 2013-08-21

   I tested the attached module zip (test(3.1.2.GA SDK) and testone(2.1.4.GA SDK)) using 3.1.2.GA and 2.1.4.GA SDK and issue is still reproducible using them.</li>
<li>Varun Joshi 2013-09-12

   This problem was fixed if I required all the files under the native module like this:
   
   var woo = require('<module_name_id.js>/test1');
   var jeff = require('<module_name_id.js>/subdir/test2');
   
   Requiring the files without specifying the module name will not work. 
   
   This ticket can be closed.</li>
<li>Eric Merriman  2013-09-16

    Closing based on Varun's comment.</li>
<li>ralph valeriote 2013-09-27

    I am not able to get this to work. I've tried the posted solution without luck. Can someone post a working example? Varun?</li>
<li>Varun Joshi 2013-09-27

    Ralph, Did you try with the suggestion posted? Here is a working module <a href="https://www.dropbox.com/s/ui2j55dgi455q7q/TestModule.zip" rel="nofollow" target="_blank">https://www.dropbox.com/s/ui2j55dgi455q7q/TestModule.zip</a>
    
    To test, you can just use the sample app provided in this ticket.</li>
</ol>


<p><a href="/TIMOB/TIMOB-9524.json">JSON Source</a></p>