---
title: "[TIMOB-9593] Android: Webview: Webview with HTML property having HTML content does not reload"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2013-07-26T10:32:11.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Release 3.1.0, 2013 Sprint 02 API, 2013 Sprint 02, 2013 Sprint 05 API, 2013 Sprint 05</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>api, module_webview, qe-and060112, qe-testadded, regression</td></tr>
<tr><th>Reporter</th><td>Satyam Sekhri</td></tr>
<tr><th>Assignee</th><td>Vishal Duggal</td></tr>
<tr><th>Created</th><td>2012-06-17T01:48:06.000+0000</td></tr>
<tr><th>Updated</th><td>2014-03-27T10:54:59.000+0000</td></tr>
</table>

<h3>Description</h3>

A webview with HTML property (containing the HTML content of the webview) loads successfully but does not reload.

The behavior occurs since 2.0.1. This worked fine on 1.8.2

Steps to reproduce:
1. Create an application with code below
2. Launch app on android device
3. Click on "Remove and release and add webview" button

Actual: After step 2, the webview launches successfully
After step 3, the webview does not reload

Expected: The webview with HTML content should reload.

<code><pre>
var _window = Ti.UI.createWindow({
	backgroundColor:'#000'
})
 		var webview=Ti.UI.createWebView({
			//url:'<a href="http://www.google.com" rel="nofollow" target="_blank">http://www.google.com</a>',
			html:'<html><body>test</body></html>',
			top : 0,
			height : 200
		});
		
		webview.addEventListener('load', function() {
			alert('The webview is loaded!');
		});

		var b2 = Ti.UI.createButton({
			title : "remove and release and add webview",
			top : 280
		});
		b2.addEventListener("click", function() {
			_window.remove(webview);
			webview.reload();
			_window.add(webview);
		});

_window.add(webview);
_window.add(b2);
_window.open();
</pre></code>

<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-9593_35767/app.js">app.js</td></td><td>2013-02-26T23:02:05.000+0000</td><td>2809</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-9593_35768/test.html">test.html</td></td><td>2013-02-26T23:02:05.000+0000</td><td>173</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-9593_35769/test2.html">test2.html</td></td><td>2013-02-26T23:02:05.000+0000</td><td>171</td></tr>
<tr><td><a href="https://jira-attachments.tisdk.com/TIMOB/TIMOB-9593_35770/webview.html">webview.html</td></td><td>2013-02-26T23:02:05.000+0000</td><td>192</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Neeraj Gupta 2012-06-17

   </li>
<li>Satyam Sekhri 2012-12-21

   The issue still occurs. Tested on 3.0.0.GA.
   The issue is same as TIMOB-3501 which was reported for both url and html property of webview. However the url property works fine now and the issue exists only for html property.</li>
<li>Vishal Duggal 2013-01-25

   Pull pending
   <a href="https://github.com/appcelerator/titanium_mobile/pull/3782" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3782</a></li>
<li>Ping Wang 2013-01-25

   Another test case:
   Put flower.jpg in /Resources/ .
   <code><pre>
   var _window = Ti.UI.createWindow({
   	backgroundColor : '#000'
   })
   
   var html = '<html><img src="flower.jpg" alt="flower" height="100" width="100"></html>';
   
   var webview = Ti.UI.createWebView({
   	html: html,
   	top : 0,
   	height : 200
   });
   
   webview.addEventListener('load', function() {
   	alert('The webview is loaded!');
   });
   
   var b2 = Ti.UI.createButton({
   	title : "remove and release and add webview",
   	top : 280
   });
   b2.addEventListener("click", function() {
   	_window.remove(webview);
   	webview.reload();
   	_window.add(webview);
   });
   
   _window.add(webview);
   _window.add(b2);
   _window.open(); 
   </pre></code></li>
<li>Vishal Duggal 2013-01-25

   Bad test case. If this code is in base Resources/ folder it might work. What if this code is in a file that is in a subfolder of Resources? </li>
<li>Vishal Duggal 2013-01-28

   Backport PR <a href="https://github.com/appcelerator/titanium_mobile/pull/3805" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3805</a></li>
<li>Shyam Bhadauria 2013-01-29

   Webview is reloading successfully now.
   Titanium SDK: 3.1.0.v20130128172329
   Titanium SDK: 3.0.2.v20130128174806
   Titanium  Studio:3.0.2.201301251115
   Device: Samung GALAXY Tab 620 Android 3.2, Samsung GALAXY Note	Android 2.3.6
   </li>
<li>Ingo Muschenetz 2013-02-13

   The fix for this resulted in a slight change with regards to needing a base URL:
   
   Formerly:
   <code><pre>
   var win = Titanium.UI.createWindow({
   backgroundColor:'#fff'
   });
   
   win.add(Titanium.UI.createWebView({
   height:Ti.UI.FILL,
   width:Ti.UI.FILL,
   html:"<html><script src='hello.js'></script><body><p>hello</p></body></html>"
   }));
   
   win.open();
   </pre></code>
   
   
   Now, the behavior is like so (note the addition of baseURL):
   
   <code><pre>
   var win = Titanium.UI.createWindow({
   backgroundColor:'#fff'
   });
   
   var webview = Titanium.UI.createWebView({
   height:Ti.UI.FILL,
   width:Ti.UI.FILL
   });
   
   win.add(webview);
   webview.setHtml("<html><script src='hello.js'></script><body><p>hello</p></body></html>", {baseURL:'file:///android_asset/Resources/'});
   win.open();
   </pre></code></li>
<li>Nathan Nadeau 2013-02-21

   I think Ping Wang's test case with flower.jpg is a valid test case because the documentation for WebView at <a href="http://docs.appcelerator.com/titanium/3.0/#" rel="nofollow" target="_blank">http://docs.appcelerator.com/titanium/3.0/#</a>!/guide/The_WebView_Component-section-29004918_TheWebViewComponent-UsingLocalWebContentwithWebView declares that "<code>all local web content is available relative to your project's Resources directory</code>" as below:
   
   bq.Let's say you not only want to show a local HTML file, but you also want that HTML file to have access to local CSS and Javascript files. All you need to do is remember that all local web content is available relative to your project's Resources directory. You can think of Resources almost as a local web server root path. To illustrate this point, let's take the prior example and expand it to use local CSS and Javascript files. 
   
   So many developers are going to expect the the URLs for any local resource files will be relative to the Resources directory by default. Having to add a special <code>{baseURL:'file:///android_asset/Resources/'}</code> for Android breaks that supposed rule.
   
   Having to use a <code>baseURL</code> option is fine but it should be clarified in the documentation or some other appropriate location because this will break existing code that used the assumption from the documentation that all local resources are relative to your Resources directory of your project. For example my project worked great until 3.0.2, at which point none of my local Android resource files were being loaded correctly until I came across this workaround. </li>
<li>Azwan b. Amit 2013-02-26

    What is the supposed value for baseURL above for iOS? this breaking change cause my app to stop working until I found this bug report. Also, even with baseURL specified, I couldn't fireEvent to and from webview and js module.</li>
<li>Nathan Nadeau 2013-02-26

    @Azwan this bug is only for Android, so you only need to set the <code>baseURL</code> for Android. In my app, for iOS, I simply don't specify any <code>baseURL</code> and the files load correctly, as expected. I cannot verify your problems with firing events to and from the webview and the local js; for me it all works fine in both Android and iOS once I've set the <code>baseURL</code> for Android. I fire an event from the local JS loaded by the webview component, and I can receive that event in my application code. I have not yet tried firing an event from my Titanium code and receiving it in the local webview component.</li>
<li>Vishal Duggal 2013-02-26

    Reopening to fix the reload method and fix the baseURL problems</li>
<li>Vishal Duggal 2013-02-26

    Resources for test case</li>
<li>Vishal Duggal 2013-02-26

    PR <a href="https://github.com/appcelerator/titanium_mobile/pull/3909" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/3909</a></li>
<li>Shyam Bhadauria 2013-03-12

    Environment used for verification -
    Titanium SDK: 3.1.0.v20130311192922
    Titanium  Studio:3.0.2.201302151605
    Device: Samsung GALAXY Note (2.3.6) and Samung GALAXY Tab 620 Android 3.2</li>
<li>Priya Agarwal 2013-07-26

    Reopening to update label.</li>
<li>Priya Agarwal 2013-07-26

    updated label.
    Closing as Fixed.
    
    Verified with environment:
    
    Studio: 3.1.1.201306131423
    SDK: 3.1.2.v20130725180746
    acs:1.0.3
    alloy:1.1.3
    npm:1.2.14
    titanium:3.1.1
    titanium-code-processor:1.0.1
    OS: OSX 10.8
    Device: HTC Desire(v4.0.3),iphone simulator(v6.0)
    
    
    Webview with HTML property having HTML content getting reload now.</li>
<li>Fokke Zandbergen 2014-03-27

    </li>
</ol>


<p><a href="/TIMOB/TIMOB-9593.json">JSON Source</a></p>