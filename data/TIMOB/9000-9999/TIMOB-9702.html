---
title: "[TIMOB-9702] Android: "TableView" doesn't counts rows well when there are table view sections present"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-09-10T10:13:48.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-15 API, Release 3.0.0, Sprint 2012-18 API</td></tr>
<tr><th>Components</th><td>Android</td></tr>
<tr><th>Labels</th><td>api, community, module_tableview, qe-review, qe-testadded</td></tr>
<tr><th>Reporter</th><td>Ivan Skugor</td></tr>
<tr><th>Assignee</th><td>Karl Rowley</td></tr>
<tr><th>Created</th><td>2012-06-13T06:11:46.000+0000</td></tr>
<tr><th>Updated</th><td>2012-09-11T01:58:39.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>The problem</h4>

"TableView" component does not calculate number of rows well. It seems it counts rows from last section only. That cause issues when row is being updated or deleted by row index.

<h4>Test case</h4>


To see this issue, run this example:

<code><pre>
(function() {
   
        var win = Ti.UI.createWindow({
	    backgroundColor: '#000',
	    navBarHidden: true
	});
	
	
	var tableView = Ti.UI.createTableView();
	
	var tableViewSection1 = Ti.UI.createTableViewSection({
		headerTitle: 'Section 1'
	});
	
	var rows = [];
	
	for (var i = 0; i < 10; ++i) {
		rows[i] = Ti.UI.createTableViewRow({ title: 'Row ' + i });
		tableViewSection1.add(rows[i]);
	}
	
	var tableViewSection2 = Ti.UI.createTableViewSection({
		headerTitle: 'Section 2'
	});
	
	rows = [];
	
	for (i = 0; i < 20; ++i) {
		rows[i] = Ti.UI.createTableViewRow({ title: 'Row ' + (i + 10) });
		tableViewSection2.add(rows[i]);
	}
	
	tableView.setData([ tableViewSection1, tableViewSection2 ]);
	
	tableView.addEventListener('click', function(e) {
		tableView.updateRow(e.index, Ti.UI.createTableViewRow({ title: 'NEW Row' }));
	});
	
	win.add(tableView);
	 
	win.open();
    
})();
</pre></code>


Click on "Row 11" in second section. You'll see that "Row 21" is updated.

Now click on "Row 23" and you should get exception that says that index is invalid.


<h4>Expected behavior</h4>


Row that is clicked should also be updated.


This works fine on iOS, and does not work on Android even prior to 2.1 (I tested with 1.8.3).

<h3>Comments</h3>

<ol>
<li>Ivan Skugor 2012-06-27

   IMHO, this issue should have bigger priority because there is no workaround and updating/deleting wrong row or crushing the app (if index is out of range) as the result of this issue is a big thing from usability point of view.
   
   
   Don't know how many developers use update/delete functionality, but it seems pretty basic thing to me.</li>
<li>Ivan Skugor 2012-06-28

   Thanks. :)</li>
<li>Ivan Skugor 2012-07-13

   </li>
<li>Karl Rowley 2012-07-20

   Pull request is <a href="https://github.com/appcelerator/titanium_mobile/pull/2623" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2623</a></li>
<li>Rima Umbrasas 2012-08-10

   Verified fixed with 
   mobile sdk-2.2.0.v20120810080115
   Titanium Studio, build: 2.1.1.201207271312
   Device:
   Galaxy S III Android version 4.0.4
   </li>
<li>Neha Chhabra 2012-09-04

   Row 0 of Section 1 does not change,instead the first row of section 2 i.e. row 10 changes on click of row 0.
   
   Verified on:
   Tested with Titanium Studio:2.1.2.201208301612
   Tested with Titanium SDK: 2.2.0.v20120831200114</li>
<li>Karl Rowley 2012-09-06

   It appears that a recent change here re-introduced a bug.
   
   Pull Request <a href="https://github.com/appcelerator/titanium_mobile/pull/2880" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2880</a></li>
<li>Anshu Mittal 2012-09-11

   Verified with:
   
   SDK: 3.0.0.v20120910184912
   STUDIO: 2.1.3.201209071738
   Device: Samsung galaxy tab(v 3.2)</li>
</ol>


<p><a href="/TIMOB/TIMOB-9702.json">JSON Source</a></p>