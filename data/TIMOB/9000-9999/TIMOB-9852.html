---
title: "[TIMOB-9852] iOS: Titanium.Media.AudioPlayer should fire a 'complete' event, when the audio play is over"
---
<table>
<tr><th>GitHub Issue</th><td>n/a</td></tr>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Invalid</td></tr>
<tr><th>Resolution Date</th><td>2012-07-23T21:06:20.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.0.2</td></tr>
<tr><th>Fix Version/s</th><td>n/a</td></tr>
<tr><th>Components</th><td>TiAPI</td></tr>
<tr><th>Labels</th><td>api</td></tr>
<tr><th>Reporter</th><td>Davide Cassenti</td></tr>
<tr><th>Assignee</th><td>Neeraj Gupta</td></tr>
<tr><th>Created</th><td>2012-07-02T04:14:02.000+0000</td></tr>
<tr><th>Updated</th><td>2017-03-14T05:22:59.000+0000</td></tr>
</table>

<h3>Description</h3>

<h4>Feature description</h4>
When the playback of an audio file with Ti.Media.AudioPlayer object terminates, the object should fire a 'complete' event, similarly to what Ti.Media.Sound does.

<h3>Comments</h3>

<ol>
<li>Vishal Duggal 2012-07-10

   Couldn't this be accomplished by just listening for the change event and checking e.state = Ti.Media.AudioPlayer.STATE_STOPPED ?</li>
<li>Blain Hamon 2012-07-19

   Stopped fires whenever the player stops playing, which is likely due to user action or server error, but also when the stream ends. AudioPlayer is often meant for streams that have no end, thus a lack of explicit complete event.
   
   To avoid confusing the stream ending than the user manually stopping, try something like this:
   <code><pre>
   var shouldBePlaying;
   startButton.addEventListener('click',function(){
       shouldBePlaying=true;stream.start();
   });
   startButton.addEventListener('click',function(){
       shouldBePlaying=false;stream.stop();
   });
   stream.addEventListener('change',function(e){
       if(e.description=='stopped'){
           if(shouldBePlaying){
                alert('Stream complete!');
           }
           shouldBePlaying=false;
       }
   });
   </pre></code>
   </li>
<li>Blain Hamon 2012-07-23

   Streams are not meant for completion, typically, and worse yet there's little to tell the difference between a finished stream and the server cutting out, in which case 'complete' would be a misnomer.</li>
<li>Lee Morris 2017-03-14

   Closing ticket as invalid.</li>
</ol>


<p><a href="/TIMOB/TIMOB-9852.json">JSON Source</a></p>