---
title: "[TIMOB-9976] MobileWeb: HttpClient in the MobileWeb drops responseText when error happens"
---
<table>
<tr><th>Type</th><td>Bug</td></tr>
<tr><th>Priority</th><td>High</td></tr>
<tr><th>Status</th><td>Closed</td></tr>
<tr><th>Resolution</th><td>Fixed</td></tr>
<tr><th>Resolution Date</th><td>2012-07-17T15:19:22.000+0000</td></tr>
<tr><th>Affected Version/s</th><td>Release 2.1.0</td></tr>
<tr><th>Fix Version/s</th><td>Sprint 2012-15 Core, Release 3.0.0</td></tr>
<tr><th>Components</th><td>MobileWeb</td></tr>
<tr><th>Labels</th><td>core, httpclient, qe-port</td></tr>
<tr><th>Reporter</th><td>Sehyo Chang</td></tr>
<tr><th>Assignee</th><td>Chris Barber</td></tr>
<tr><th>Created</th><td>2012-07-12T20:22:25.000+0000</td></tr>
<tr><th>Updated</th><td>2013-01-15T13:29:07.000+0000</td></tr>
</table>

<h3>Description</h3>

1. Client make ajax request using HttpClient
2. Server return HTTP error code 4xx (for example 400) with  detail error in the response body

There is no way to get response body because HttpClient perform abort after receiving error.

Here is method abort for HttpClient

<code><pre>
abort: function() {

     var c = this.constants;
     c.responseText = c.responseXML = c.responseData = "";
     this._completed = true;
     clearTimeout(this._timeoutTimer);
--------------------- when abort happens this._xhr.reponseText is cleared --------
     this.connected && this._xhr.abort();
     c.readyState = this.UNSENT;
     this._fireStateChange();

}
</pre></code>
So before performing abort on xhr, the responseText should be saved.



<h3>Attachments</h3>

<table>
<thead>
<tr><th>File</th><th>Date</th><th>Size</th></tr><thead>
<tbody>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-9976_29824/app.js">app.js</td></td><td>2012-07-17T01:30:32.000+0000</td><td>1748</td></tr>
<tr><td><a href="https://jira-attachments.titaniumsdk.com/TIMOB/TIMOB-9976_29812/TC1061.zip">TC1061.zip</td></td><td>2012-07-16T15:39:47.000+0000</td><td>2212223</td></tr>
</tbody>
<table>

<h3>Comments</h3>

<ol>
<li>Junaid Younus 2012-07-16

   Hey Sehyo,
   
   Can you please provide a small, runnable test case to reproduce this issue? Instead of providing a small part of the code, please provide something that we can run instantly, in order to get your issue resolved asap.
   
   Thanks</li>
<li>Sehyo Chang 2012-07-16

   Attached is sample project</li>
<li>Sehyo Chang 2012-07-16

   Attached sample project that reproduce the case.  Here is instruction how to set up
   (1) unzip the project
   (2) install nginx. 
   (3) copy nginx conf from "<project>/server/nginx.conf" to nginx installation directory
   (4) in the nginx.conf,  change "root" to point to the <project>/build/mobileweb
   (3) install node.js
   (4) cd <project>/server
   (5) "node good.js"
   (6) from Studio, run the project as mobileweb. open safari on "http://localhost:8080"
   (7) click text.  It should return string return from node.js server.  That shows success is return ok
   (8) kill node.js and run "node bad.js"
   (9) refresh the browser and click text.  In this case error message is not return properly.
   
   UI code is in the "FirstView.js"</li>
<li>Junaid Younus 2012-07-16

   Thanks Sehyo,
   
   I have moved the ticket so that the platform team can look into this issue and fix it.</li>
<li>Chris Barber 2012-07-17

   Pull request: <a href="https://github.com/appcelerator/titanium_mobile/pull/2582" rel="nofollow" target="_blank">https://github.com/appcelerator/titanium_mobile/pull/2582</a></li>
<li>Sehyo Chang 2012-07-20

   Can you move this to 2.1.1? since this is high priority issue for us</li>
<li>Olga Romero 2013-01-15

   Closing as fixed.
   Tested and verified with:
   Titanium Studio, build: 3.0.1.201212181159
   Titanium SDK, build: 3.0.O.GA
   iPad mini iOS 6.0 safari
   MacBook Pro 10.8.2 Mountain Lion
   Chrome 23.0</li>
</ol>


<p><a href="/TIMOB/TIMOB-9976.json">JSON Source</a></p>